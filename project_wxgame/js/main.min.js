var egret=window.egret,__reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);i.prototype=t.prototype,e.prototype=new i},GameByteArray=function(e){function t(){var t=e.call(this)||this;return t.endian=egret.Endian.LITTLE_ENDIAN,t}return __extends(t,e),t.prototype.readString=function(){var e=this.readUTF();return this.position++,e},t.prototype.readNumber=function(){var e=new uint64(this),t=e.toString();return+t},t.prototype.writeNumber=function(e){var t=uint64.stringToUint64(e.toString());this.writeInt64(t)},t.prototype.writeInt64=function(e){this.writeUnsignedInt(e._lowUint),this.writeUnsignedInt(e._highUint)},t.prototype.writeString=function(e){this.writeUTF(e),this.writeByte(0)},t.prototype.writeCmd=function(e,t){this.writeByte(e),this.writeByte(t)},t}(egret.ByteArray);__reflect(GameByteArray.prototype,"GameByteArray"),window.GameByteArray=GameByteArray;var BaseView=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eventList=[],t}return __extends(t,e),t.prototype.observe=function(e,t){"function"==typeof e?MessageCenter.addListener(e,t,this):MessageCenter.ins().addListener(e,t,this)},t.prototype.removeObserve=function(){MessageCenter.ins().removeAll(this)},t.prototype.checkEventList=function(){this.eventList.length>0&&Logger.Warn("基于BaseView离开舞台时并未清空eventList",this,this.eventList)},t.prototype.AddClick=function(e,t){this.addEvent(egret.TouchEvent.TOUCH_TAP,t,this,e)},t.prototype.AddItemClick=function(e,t){this.addEvent(eui.ItemTapEvent.ITEM_TAP,t,this,e)},t.prototype.addTouchEvent=function(e,t,i){this.addEvent(egret.TouchEvent.TOUCH_TAP,t,e,i)},t.prototype.addItemTapEvent=function(e,t,i){this.addEvent(eui.ItemTapEvent.ITEM_TAP,t,e,i)},t.prototype.addTextLinkEvent=function(e,t,i){this.addEvent(egret.TextEvent.LINK,t,e,i)},t.prototype.addTouchEndEvent=function(e,t,i){this.addEvent(egret.TouchEvent.TOUCH_END,t,e,i)},t.prototype.addChangeEvent=function(e,t,i){this.addEvent(egret.TouchEvent.CHANGE,t,e,i)},t.prototype.addEvent=function(e,t,i,o,s){if(void 0===o&&(o=null),void 0===s&&(s=!1),null==o)return void console.debug("没有给定目标控件",this.__class__);for(var n=0,r=this.eventList;n<r.length;++n)if(r[n].addObject==o)return;var a=new EventListenerData(o,e,t,i,s,0);a?this.eventList.push(a):egret.log("绑定侦听事件失败")},t.prototype.removeEvents=function(){for(var e=this.eventList,t=0,i=e.length;i>t;t++)e[t].clean();this.eventList=[]},t.prototype.DoOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.open.apply(this,e)},t.prototype.DoClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.close.apply(this,e),this.removeEvents(),this.removeObserve()},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t}(eui.Component);__reflect(BaseView.prototype,"BaseView"),window.BaseView=BaseView;var BaseClass=function(){function e(){}return e.ins=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this;if(!i._instance){var o=e.length;0==o?i._instance=new i:1==o?i._instance=new i(e[0]):2==o?i._instance=new i(e[0],e[1]):3==o?i._instance=new i(e[0],e[1],e[2]):4==o?i._instance=new i(e[0],e[1],e[2],e[3]):5==o?i._instance=new i(e[0],e[1],e[2],e[3],e[4]):6==o&&(i._instance=new i(e[0],e[1],e[2],e[3],e[4],e[5]))}return i._instance},e}();__reflect(BaseClass.prototype,"BaseClass"),window.BaseClass=BaseClass;var GameSocket=function(){function e(){this._socketStatus=0,this._lastReceiveTime=0,this.pid=0,this._serverId=0,this._user="",this._uid="",this._pwd="",this.recvPack=new GameByteArray,this._packets=[],this.m_ReLoginTimer=0,this.m_ServerTimeCounter=5,this.newSocket()}return e.prototype.newSocket=function(){this.socket_=new egret.WebSocket,this.socket_.type=egret.WebSocket.TYPE_BINARY,this.socket_.addEventListener(egret.Event.CONNECT,this.onSocketConnected,this),this.socket_.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.socket_.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketRead,this),this.socket_.addEventListener(egret.IOErrorEvent.IO_ERROR,this.connectError,this)},e.prototype.connectError=function(){alert("网络中断")},e.prototype.connect=function(t,i){this.updateStatus(e.STATUS_CONNECTING),this._host=t,this._port=i,e.httpsProtocol==e.HTTPS?this.socket_.connectByUrl("wss://"+t+":"+i):this.socket_.connect(t,i)},e.prototype.close=function(){console.log("close socket！ip:"+this._host+" port:"+this._port),this.socket_.close()},e.prototype.GetSocketState=function(){return this._socketStatus},e.prototype.Rpc=function(e,t,i,o){return void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=null),this.send(Sproto.SprotoSender.Pack(e,t,i,o)),!0},e.prototype.send=function(t){return this._socketStatus==e.STATUS_COMMUNICATION&&RoleMgr.CheckAccount?(this.sendPack(t),!0):(console.log("发送数据时没和服务连接或者未进入通信状态"),!1)},e.prototype.onSocketConnected=function(t){console.log("Socket connected！ip:"+this._host+" port:"+this._port),TimerManager.ins().remove(this.reLogin,this),this.updateStatus(e.STATUS_COMMUNICATION)},e.prototype.onSocketRead=function(e){var t=this.recvPack,i=this.socket_;i._readByte.position=0;var o=i._readByte.bytesAvailable;i.readBytes(t,0);var s=Sproto.SprotoCore.Dispatch(new Uint8Array(t.buffer.slice(0,o)));s&&this.send(s)},e.prototype.onSocketClose=function(t){egret.log("与服务器的连接断开了！ip:"+this._host+" port:"+this._port),this.updateStatus(e.STATUS_DISCONNECT),this._onClosed&&this._onClosed();var i=GameServer.ins();i&&i.mOtherLogin||(Chat.ins().ClearMsg(),this.m_ReLoginTimer=egret.getTimer(),TimerManager.ins().doTimer(5e3,0,this.reLogin,this))},e.prototype.reLogin=function(){console.log(">>>>>>>>>>>>>>>>>重连服务器"),RoleMgr.CheckAccount=!1,this.close(),this.login(this._user,this._uid,this._pwd,this._serverId,this._host+":"+this._port)},e.prototype.updateStatus=function(e){if(this._socketStatus!=e){var t=this._socketStatus;this._socketStatus=e,this.onFinishCheck(e,t)}},e.prototype.onFinishCheck=function(t,i){t==e.STATUS_COMMUNICATION?(egret.log("与服务器建立通信成功！ip:"+this._host+" port:"+this._port),EasyLoading.ins().hideLoading(),this.sendCheckAccount(this._user,this._uid,this._pwd),TimerManager.ins().remove(this._SendHeartBeat,this),TimerManager.ins().doTimer(5e3,0,this._SendHeartBeat,this)):t==e.STATUS_DISCONNECT&&TimerManager.ins().remove(this._SendHeartBeat,this)},e.prototype._SendHeartBeat=function(){this.Rpc(C2sProtocol.cs_send_heart_beat),++this.m_ServerTimeCounter%100==0&&this.Rpc(C2sProtocol.cs_get_server_time)},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"port",{get:function(){return this._port},enumerable:!0,configurable:!0}),e.prototype.sendCheckAccount=function(e,t,i){egret.log("验证账号"),RoleMgr.Checking=!0;var o=new Sproto.checkAccount_request;o.accountname=e,o.platformuid=t,o.token=i,o.serverid=GameServer.serverID,this.sendPack(Sproto.SprotoSender.Pack(C2sProtocol.checkAccount,o))},e.prototype.login=function(e,t,i,o,s){i=i?i:"e10adc3949ba59abbe56e057f20f883e",this._user=e,this._pwd=i,this._uid=t,this._serverId=o,GameServer.serverID=o;var n=s.split(":")[0],r=9001;s.split(":")[1]&&s.split(":")[1].length&&(r=parseInt(s.split(":")[1])),this.socket_.connected?this.sendCheckAccount(e,t,i):(egret.log("connect to "+n+" ,port: "+r),this.connect(n,r)),egret.log("准备连接服务器")},e.prototype.registerSTCFunc=function(e,t,i,o){},e.prototype.setOnClose=function(e,t){this._onClosed=e.bind(t)},e.prototype.setOnConnected=function(e,t){this._onConnected=e.bind(t)},e.prototype.sendPack=function(e){if(null==e||0==e.length)throw new egret.error("创建客户端数据包时数据不能为空！");this.socket_.writeBytes(e)},e.httpsProtocol="http:",e.HTTPS="https:",e.HTTP="http:",e.ins=function(){return e._ins||(e._ins=new e),e._ins},e.DEFAULT_TAG=52462,e.DEFAULT_CRC_KEY=30301,e.HEAD_SIZE=8,e.STATUS_CONNECTING=1,e.STATUS_CHECKING=2,e.STATUS_COMMUNICATION=3,e.STATUS_DISCONNECT=4,e.PACK_HANDLER=[],e.BYTE_CLASS_NAME=egret.getQualifiedClassName(GameByteArray),e}();__reflect(GameSocket.prototype,"GameSocket"),window.GameSocket=GameSocket;var PackageID;!function(e){e[e.Default=0]="Default",e[e.Guanqia=1]="Guanqia",e[e.Skill=2]="Skill",e[e.Bag=3]="Bag",e[e.Equip=4]="Equip",e[e.Encounter=5]="Encounter",e[e.Wing=6]="Wing",e[e.strongthen=7]="strongthen",e[e.Mail=8]="Mail",e[e.Task=9]="Task",e[e.Boss=10]="Boss",e[e.Gem=11]="Gem",e[e.JingMai=12]="JingMai",e[e.Zs=13]="Zs",e[e.Zhuling=14]="Zhuling",e[e.Tupo=15]="Tupo",e[e.Shop=16]="Shop",e[e.Ring=17]="Ring",e[e.Ranking=18]="Ranking",e[e.Vip=19]="Vip",e[e.Notice=20]="Notice",e[e.LoongSoul=21]="LoongSoul",e[e.TreasureHunt=22]="TreasureHunt",e[e.Train=23]="Train",e[e.FbChallenge=24]="FbChallenge",e[e.Activity=25]="Activity",e[e.Artifact=26]="Artifact",e[e.Recharge=27]="Recharge",e[e.ExpGold=28]="ExpGold",e[e.CDKey=29]="CDKey",e[e.Chat=30]="Chat",e[e.ZhuZaiEquip=31]="ZhuZaiEquip",e[e.ZsBoss=32]="ZsBoss",e[e.pfActivity=33]="pfActivity",e[e.Ladder=34]="Ladder",e[e.Miji=35]="Miji",e[e.moneyTree=36]="moneyTree",e[e.Guild=37]="Guild",e[e.Title=38]="Title",e[e.GuildFB=39]="GuildFB",e[e.GuildRobber=41]="GuildRobber",e[e.GuildStore=42]="GuildStore",e[e.WarSpirit=43]="WarSpirit",e[e.Friends=47]="Friends",e[e.NewFunNotice=58]="NewFunNotice",e[e.Login=255]="Login"}(PackageID||(PackageID={}));var BaseEuiLayer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.percentWidth=100,t.percentHeight=100,t.touchEnabled=!1,t}return __extends(t,e),t}(eui.UILayer);__reflect(BaseEuiLayer.prototype,"BaseEuiLayer"),window.BaseEuiLayer=BaseEuiLayer;var MessageCenter=function(e){function t(t){var i=e.call(this)||this;return i.flag=0,i.type=0,i.dict={},i.eVec=[],i.lastRunTime=0,i.m_TempDict={},i.type=t,0==i.type&&TimerManager.ins().doFrame(1,0,i.run,i),i}return __extends(t,e),t.ins=function(){return e.ins.call(this,0)},t.prototype.clear=function(){this.dict={},this.eVec.splice(0)},t.prototype.addListener=function(e,t,i){var o=this.dict[e];o?0!=this.flag&&(this.dict[e]=o=o.concat()):this.dict[e]=o=[];for(var s=0,n=o;s<n.length;s++){var r=n[s];if(r[0]==t&&r[1]==i)return}o.push([t,i])},t.prototype.removeListener=function(e,t,i){var o=this.dict[e];if(o){0!=this.flag&&(this.dict[e]=o=o.concat());for(var s=o.length,n=0;s>n;n++)if(o[n][0]==t&&o[n][1]==i){o.splice(n,1);break}0==o.length&&(this.dict[e]=null,delete this.dict[e])}},t.prototype.removeAll=function(e){for(var t=Object.keys(this.dict),i=0,o=t;i<o.length;i++){var s=o[i],n=this.dict[s];0!=this.flag&&(this.dict[s]=n=n.concat());for(var r=0;r<n.length;r++)n[r][1]==e&&(n.splice(r,1),r--);0==n.length&&(this.dict[s]=null,delete this.dict[s])}},t.prototype.dispatch=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null==t||0==t.length){if(this.m_TempDict[e])return;this.m_TempDict[e]=!0}var o=ObjectPool.ins().pop("MessageVo");o.type=e,o.param=t,0==this.type?this.eVec.push(o):1==this.type?this.dealMsg(o):Logger.trace("MessageCenter未实现的类型")},t.prototype.dispatchImmediate=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=ObjectPool.ins().pop("MessageVo");o.type=e,o.param=t,this.dealMsg(o)},t.prototype.run=function(){var e=egret.getTimer(),t=e-this.lastRunTime>100;if(this.lastRunTime=e,t)for(;this.eVec.length>0;)this.dealMsg(this.eVec.shift());else for(;this.eVec.length>0&&(this.dealMsg(this.eVec.shift()),!(egret.getTimer()-e>5)););},t.prototype.dealMsg=function(e){this.m_TempDict[e.type]&&delete this.m_TempDict[e.type];var t=this.dict[e.type];if(t){var i=t.length;if(0!=i){this.flag++;for(var o=0,s=t;o<s.length;o++){var n=s[o];n[0].apply(n[1],e.param)}this.flag--,e.dispose(),ObjectPool.ins().push(e)}}},t.setFunction=function(e,i,o,s){if(0==o.indexOf(s)&&"function"==typeof i[o]){var n=egret.getQualifiedClassName(i)+t.splite+o,r=i[o],a=function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];var s,a=i.length;return 0==a?s=r():1==a?s=e?r.call(this,i[0]):r(i[0]):2==a?s=e?r.call(this,i[0],i[1]):r(i[0],i[1]):3==a?s=e?r.call(this,i[0],i[1],i[2]):r(i[0],i[1],i[2]):4==a?s=e?r.call(this,i[0],i[1],i[2],i[3]):r(i[0],i[1],i[2],i[3]):5==a?s=e?r.call(this,i[0],i[1],i[2],i[3],i[4]):r(i[0],i[1],i[2],i[3],i[4]):6==a&&(s=e?r.call(this,i[0],i[1],i[2],i[3],i[4],i[5]):r(i[0],i[1],i[2],i[3],i[4],i[5])),"boolean"!=typeof s||s?(t.ins().dispatch(n,s),s):s};return a.funcallname=n,i[o]=a,!0}return!1},t.compile=function(e,i){void 0===i&&(i="post");for(var o in e)t.setFunction(!1,e,o,i);for(var s=e.prototype,n=Object.keys(s),r=0,a=n;r<a.length;r++){var l=a[r];t.setFunction(!0,s,l,i)}},t.addListener=function(e,i,o){return e.funcallname?(t.ins().addListener(e.funcallname,i,o),!0):(console.log("MessageCenter.addListener error:"+egret.getQualifiedClassName(o)),!1)},t.splite=".",t}(BaseClass);__reflect(MessageCenter.prototype,"MessageCenter");var MessageVo=function(){function e(){this.type=null,this.param=null}return e.prototype.dispose=function(){this.type=null,this.param=null},e}();__reflect(MessageVo.prototype,"MessageVo"),window.MessageCenter=MessageCenter,window.MessageVo=MessageVo;var Dictionary=function(){function e(){this.m_keys=[],this.m_values=[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.m_keys.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this.m_values.concat()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return this.m_keys.concat()},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){var i=this.indexOfKey(e);i>=0?this.m_values[i]=t:(this.m_keys.push(e),this.m_values.push(t))},e.prototype.keyOfValue=function(e){return this.m_keys[this.indexOfValue(e)]},e.prototype.indexOfKey=function(e){return this.m_keys.indexOf(e)},e.prototype.indexOfValue=function(e){return this.m_values.indexOf(e)},e.prototype.exist=function(e){return this.m_keys.indexOf(e)>=0},e.prototype.every=function(e){for(var t=this.keys.length,i=0;t>i&&e(i,this.values[i]);i++);},e.prototype.get=function(e){var t=this.indexOfKey(e);return t>=0?this.m_values[t]:null},e.prototype.remove=function(e){var t=this.indexOfKey(e);return t>=0?(this.m_keys.splice(t,1),this.m_values.splice(t,1)[0]):null},e.prototype.clear=function(){this.m_keys.length=0,this.m_values.length=0},e.prototype.getKeyByValue=function(e){return this.m_keys[this.indexOfValue(e)]},e}();__reflect(Dictionary.prototype,"Dictionary");var BaseEuiView=function(e){function t(t){var i=e.call(this)||this;return i.mWindowHelpId=0,i._resources=null,i._isInit=!1,i.layerLevel=VIEW_LAYER_LEVEL.MIDDLE,i._resources=null,i._isInit=!1,t||(i.percentHeight=100,i.percentWidth=100),i}return __extends(t,e),t.prototype.isInit=function(){return this._isInit},t.prototype.isShow=function(){return null!=this.stage&&this.visible},t.prototype.addToParent=function(e){e.addChild(this)},t.prototype.removeFromParent=function(){DisplayUtils.removeFromParent(this),this.destoryView()},t.prototype.initUI=function(){this._isInit=!0},t.prototype.initData=function(){},t.prototype.destroy=function(){},t.prototype.destoryView=function(){TimerManager.ins().removeAll(this),ViewManager.ins().destroy(this.hashCode)},t.prototype.loadResource=function(e,t){this._resources&&this._resources.length>0?(ResourceUtils.ins().loadResource(this._resources,[],e,null,this),this.addEventListener(eui.UIEvent.CREATION_COMPLETE,t,this)):(e(),t())},t.prototype.setVisible=function(e){this.visible=e},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!0},t.prototype.GetLayerLevel=function(){return null},t.prototype.SetTableIndex=function(e){var t=this.commonWindowBg;t&&t.SetTabIndex(e)},t.LAYER_LEVEL=null,t.LAYER_NAME=null,t}(BaseView);__reflect(BaseEuiView.prototype,"BaseEuiView"),window.BaseEuiView=BaseEuiView;var Color=function(){function e(){}return e.White=16777215,e.WhiteStroke=1776411,e.Green=36642,e.GreenTips=36642,e.GreenStroke=19974,e.Blue=5011675,e.BlueTips=5011675,e.BlueStroke=168,e.Purple=11818219,e.PurpleTips=11818219,e.PurpleStroke=2818116,e.Orange=11291904,e.OrangeTips=11291904,e.OrangeStroke=8063232,e.Red=16282482,e.RedTips=16282482,e.RedStroke=6094848,e.Yellow=12549376,e.YellowTips=12549376,e.YellowStroke=11155456,e.Black=5461335,e.Gray=7895160,e.FontColor=3881787,e.needOrange=13271040,e.ColorStr=["16777215","5372423","3264255","13855983","16754432","16714752","16580379"],e.ColorStroke=[e.WhiteStroke,e.GreenStroke,e.BlueStroke,e.PurpleStroke,e.OrangeStroke,e.RedStroke,e.YellowStroke],e}();__reflect(Color.prototype,"Color"),window.Color=Color;var BaseEuiPanel=function(e){function t(){var t=e.call(this,!0)||this;return t.verticalCenter=0,t.horizontalCenter=0,t.rect=new eui.Rect,t.rect.fillColor=0,t.rect.alpha=.85,t.rect.percentHeight=100,t.rect.percentWidth=100,t.rect.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onMaskTap,t),t.imgMask=new eui.Image("pic_bj_45_jpg"),t.imgMask.percentHeight=100,t.imgMask.percentWidth=100,t.imgMask.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onMaskTap,t),t}return __extends(t,e),t.prototype.onMaskTap=function(){ViewManager.ins().close(this)},t.prototype.addToParent=function(t){t==LayerManager.UI_Popup||t==LayerManager.UI_Top?t.addChild(this.rect):t.addChild(this.imgMask),e.prototype.addToParent.call(this,t)},t.prototype.removeFromParent=function(){e.prototype.removeFromParent.call(this),DisplayUtils.removeFromParent(this.rect),DisplayUtils.removeFromParent(this.imgMask)},t}(BaseEuiView);__reflect(BaseEuiPanel.prototype,"BaseEuiPanel"),window.BaseEuiPanel=BaseEuiPanel;var LayerManager=function(){function e(){}return e.Game_Bg=new BaseEuiLayer,e.Game_Main=new BaseEuiLayer,e.UI_HUD=new BaseEuiLayer,e.UI_USER_INFO=new BaseEuiLayer,e.UI_Main=new BaseEuiLayer,e.UI_NAVIGATION=new BaseEuiLayer,e.UI_Main_2=new BaseEuiLayer,e.UI_Popup=new BaseEuiLayer,e.UI_Message=new BaseEuiLayer,e.UI_Tips=new BaseEuiLayer,e.UI_Top=new BaseEuiLayer,e}();__reflect(LayerManager.prototype,"LayerManager"),window.LayerManager=LayerManager;var ActivityBaseData=function(){function e(){this.record=0}return e.prototype.UpdateBase=function(e){this.startTime=e.startTime,this.endTime=e.endTime,this.openState=e.openState,this.id=e.id,this.type=e.type},e.prototype.GetRecord=function(e){return(this.record&1<<e)>0},e.prototype.update=function(e){},e.prototype.canReward=function(){return!1},e.prototype.isOpenActivity=function(){return!1},e.prototype.init=function(){},Object.defineProperty(e.prototype,"rewardState",{get:function(){return 0},enumerable:!0,configurable:!0}),e.sort=function(e,t){return e.state==RewardState.CanGet&&t.state!=RewardState.CanGet?-1:e.state!=RewardState.CanGet&&t.state==RewardState.CanGet?1:e.state==RewardState.Gotten&&t.state!=RewardState.Gotten?1:e.state!=RewardState.Gotten&&t.state==RewardState.Gotten?-1:e.index<t.index?-1:e.index>t.index?1:0},e.prototype.getRemindTimeString=function(){var e=this,t=Math.floor(e.startTime-GameServer.serverTime),i=Math.max(Math.floor(e.endTime-GameServer.serverTime),0);if(t>=0)return GlobalConfig.jifengTiaoyueLg.st101885;if(0>=i)return GlobalConfig.jifengTiaoyueLg.st101289;var o=Math.floor(i/86400),s=Math.floor(i%86400/3600),n=Math.floor(i%3600/60),r=o+GlobalConfig.jifengTiaoyueLg.st100006+s+GlobalConfig.jifengTiaoyueLg.st101518+n+GlobalConfig.jifengTiaoyueLg.st101519;return r},e.prototype.isOpenTime=function(){return 0==this.endTime?!0:this.startTime<GameServer.serverTime&&this.endTime>GameServer.serverTime},e.prototype.GetSurplusTimeStr=function(){return""+this.getRemindTimeString()},e}();__reflect(ActivityBaseData.prototype,"ActivityBaseData"),window.ActivityBaseData=ActivityBaseData;var __ref_field__=GameSocket,__ref_field__=PackageID,BaseSystem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.regNetMsg=function(e,t){Sproto.SprotoReceiver.AddHandler(e,t,this)},t.prototype.getBytes=function(e){return t.temp},t.prototype.sendBaseProto=function(e){},t.prototype.sendToServer=function(e){},t.prototype.Rpc=function(e,t,i,o){void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=null),GameSocket.ins().Rpc(e,t,i,this)},t.temp=new GameByteArray,t}(BaseClass);__reflect(BaseSystem.prototype,"BaseSystem"),MessageCenter.compile(BaseSystem),window.BaseSystem=BaseSystem;var ViewManager=function(e){function t(){var t=e.call(this)||this;return t._view=new Dictionary,t._hCode2Key=new Dictionary,t._openList=new Dictionary,t.m_RegInfos=new Dictionary,t.recordLastPanel=[],t._view.clear(),t._hCode2Key.clear(),t._openList.clear(),t.m_RegInfos.clear(),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.clear=function(){this.closeAll(),this._view.clear()},t.prototype.reg=function(e,t){null!=e&&(e.LAYER_LEVEL=t,this.m_RegInfos.set(egret.getQualifiedClassName(e),e))},t.prototype.GetRegInfo=function(e){var t=this.m_RegInfos.get(e);return null==t&&(t=egret.getDefinitionByName(e),this.m_RegInfos.set(e,t)),t},t.prototype.destroy=function(e){var t=this._hCode2Key.get(e);this.releaseView(t)},t.prototype.GetViewCls=function(e){return"function"==typeof e?e:this.GetRegInfo(this.getKey(e))},t.prototype.getKey=function(e){var t;return"string"==typeof e?t=e:"function"==typeof e?t=egret.getQualifiedClassName(e):e instanceof BaseEuiView?t=egret.getQualifiedClassName(e):egret.log("面板打开错误-----"+e),t},t.viewOpenCheck=function(e,t){if(!e)return!1;var i=e.openCheck;return i?i(t):!0},t.prototype.open=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(null==e)return null;if(e==ChargeFirstWin&&(e=Recharge.ins().getFirstRechargeState()?Recharge1GetWin:ChargeFirstWin),e==Recharge1GetWin&&StartGetUserInfo.isUsa&&(e=ChargeFirstWin),e!=Recharge1GetWin&&e!=ChargeFirstWin||!StartGetUserInfo.isOne){var s=this.GetViewCls(e);this.getKey(e);if(!t.viewOpenCheck(s,i))return null;var n=this.openEasy(s,i);return n&&this.setPanelLayer(n),n}},t.prototype.openEasy=function(e,t){void 0===t&&(t=null);egret.getTimer();if(null==e)return void console.log("open nameorclass is null");var i=this.getKey(e),o=this.GetRegInfo(i),s=this._view.get(i);if(s||(s=new o,this._view.set(i,s),this._hCode2Key.set(s.hashCode,i)),null==s)return void Logger.trace("UI_"+o+"不存在");var n=o.LAYER_LEVEL;return null==n&&(n=s.GetLayerLevel(),n||console.log("没有设置层级",i)),s.isShow()||s.isInit()?(s.addToParent(n),this._OpenView(s,t)):(s.addToParent(n),s.initUI(),s.initData(),this._OpenView(s,t),s.setVisible(!0)),this._openList.get(i)||this._openList.set(i,i),s},t.prototype._OpenView=function(e,t){e&&e.DoOpen.apply(e,t)},t.prototype._CloseVie=function(e,t){e.DoClose.apply(e,t)},t.prototype.setPanelLayer=function(e){if(e){if(e.parent==LayerManager.UI_Main){this.closeEasy(UIView1_1),this.closeEasy(PlayFunView),this.closeEasy(GameSceneView);for(var t=0;t<this._openList.values.length;t++){var i=this._view.get(this._openList.values[t]);if(null!=i){if(e==i)break;Util.GetClass(i).LAYER_LEVEL==LayerManager.UI_Main_2&&this.closeEasy(i)}}}egret.is(e,"GuildWarInfoPanel")&&this.closeEasy(UIView1_1)}},t.prototype.hideUIView=function(e,t){var i=this.getKey(e),o=(this.GetRegInfo(i),this._view.get(i));o?o.visible=t:"UIView1_1"==i&&t&&this.open(i)},t.prototype.hideAllPopView=function(){for(var e=this._openList.values,t=0;t<e.length;t++){var i=this.getKey(e[t]),o=this.getView(i);o&&o.parent==LayerManager.UI_Popup&&(this._openList.remove(i),this._CloseVie(o,[]),o.removeFromParent())}},t.prototype.close=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=this.getKey(e),s=this.closeEasy(o,t);s&&this.checkCloseView()},t.prototype.closeEasy=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];egret.getTimer();if(!this.isShow(e))return null;var o=this.getKey(e),s=this.getView(o);return s&&(this._openList.remove(o),this._CloseVie(s,t),s.removeFromParent()),s},t.prototype.checkCloseView=function(){var e=this.checkHaveMainUILayerUI();e||(GameMap.IsPublicBoss()||GameMap.IsHomeBoss()||GameMap.IsSyBoss()||GameMap.IsZhuanshengBoss()||GameMap.IsGuildBoss()||GameMap.IsGuildWar()||GameMap.IsKfBoss()||GameMap.IsWorldBoss()||GameMap.IsXbBoss()||GameMap.IsHeroBattle()||GameMap.IsGuanQiaBoss()||GameMap.IsPersonalBoss()||GameMap.IsCityBoss()||GameMap.IsTeamFb()||GameMap.IsMaterialFb()||GameMap.IsChaosBttle()?t.ins().close(UIView1_1):t.ins().open(UIView1_1),this.isShow(GameSceneView)||this.openEasy(GameSceneView),this.openOneRecordPanel())},t.prototype.checkHaveMainUILayerUI=function(){for(var e=this._openList.values,t=0;t<e.length;t++){var i=this._view.get(e[t]);if(i.parent==LayerManager.UI_Main)return!0}return!1},t.prototype.openOneRecordPanel=function(){var e=GameMap.fubenID;if(GameLogic.ins().showEseBtn(0!=e),0!=e)t.ins().close(PlayFunView);else if((this.isShow(PlayFunView)||t.ins().open(PlayFunView))&&this.recordLastPanel.length>0){var i=this.recordLastPanel.shift(),o=this.recordLastPanel.shift();this.recordLastPanel.length=0,t.ins().open(i,o?o:0)}},t.prototype.getView=function(e){var t=this.getKey(e);return this._view.get(t)},t.prototype.releaseView=function(e){var t=this.getKey(e),i=this._view.remove(t);i&&(DisplayUtils.dispose(i),i=null)},t.prototype.closeAll=function(){for(var e=0;e<this._openList.values.length;e++)this.closeEasy(this._openList.values[e],[]);this.checkCloseView()},t.prototype.currOpenNum=function(){return this._openList.values.length},t.prototype.isShow=function(e){var t=this.getKey(e),i=this._openList.get(t);return i?!0:!1},t.prototype.closePartPanel=function(e){void 0===e&&(e=!0);for(var t=[],i=0;i<this._openList.values.length;i++){var o=this._openList.values[i];o!=this.getKey(UIView2)&&o!=this.getKey(UIView1)&&t.push(o)}for(var i=t.length-1;i>=0;i--){var s=t[i],n=this.getView(s);(n.parent==LayerManager.UI_Popup||n.parent==LayerManager.UI_Main||n.parent==LayerManager.UI_Main_2)&&this.closeEasy(s)}e&&this.checkCloseView()},t.AdjustIndex=function(e,t){return e==ViewIndexDef.BossWin&&(0==t?t=1:1==t&&(t=0)),[e,t]},t._CheckActivity=function(e){return null==ActivityModel.ins().GetActivityDataByType(e)?(UserTips.ins().showTips("活动已经结束！！！"),!1):!0},t.Guide=function(e,i){if(t.ins().hideAllPopView(),e==ViewIndexDef.ActivityWin&&i==ActivityModel.TYPE_03){if(!t._CheckActivity(ActivityModel.TYPE_03))return!1}else if(e==ViewIndexDef.ActivityWin&&i==ActivityModel.TYPE_01){if(!t._CheckActivity(ActivityModel.TYPE_01))return!1}else if(e==ViewIndexDef.DayLoginPanel){if(!t._CheckActivity(ActivityModel.TYPE_05))return!1}else if(e==ViewIndexDef.EGG_BROKEN_PANEL)return EggBroken.IsOpen()?(t.ins().open(ActivityWin,ActivityModel.CUS_ACT_3.type),!0):!1;if(this._GotoView(e))return!0;if(r=this.AdjustIndex(e,i),e=r[0],i=r[1],-1!=this.INVAILD_NAME.indexOf(e))return console.error("ViewManager:Guide",e,"invaild"),!1;if(!this.GUIDE_LIST){this.GUIDE_LIST={};for(var o in ViewIndexDef){var s=ViewIndexDef[o];this.GUIDE_LIST[s]=o}}var n=this.GUIDE_LIST[e];return n?null!=t.ins().open(n,i):(console.error("ViewManager:Guide",e,"undefine"),!1);var r},t._GotoView=function(e){switch(UserTask.ins().checkUIMissonComplet(e),e){case ViewIndexDef.Recharge1Win:FirstRechargeIconRule.EnterFirstRecharge();break;case ViewIndexDef.PUBLIC_BOSS:t.ins().open(BossWin,1);break;case ViewIndexDef.PERSONAL_BOSS:t.ins().open(BossWin,0);break;case ViewIndexDef.TREASURE_HUNT:t.ins().isShow(TreasureHuntWin)?t.ins().getView(TreasureHuntWin).SetTableIndex(0):t.ins().open(TreasureHuntWin);break;case ViewIndexDef.ACT_GIFT:t.ins().open(ActivityWin,ActivityModel.TYPE_02,null,3);break;case ViewIndexDef.DayLoginPanel:t.ins().open(FuliWin,1,9);break;case ViewIndexDef.DAY_TOTAL_RECHARGE:t.ins().open(ActivityWin,ActivityModel.CUS_ACT_1.type);break;case ViewIndexDef.PK:t.ins().open(LadderWin);break;case ViewIndexDef.LONG_ZHU:t.ins().open(LoongSoulWin,0);break;case ViewIndexDef.LONG_LING:t.ins().open(LoongSoulWin,1);break;case ViewIndexDef.LONG_WEN:t.ins().open(LoongSoulWin,2);break;case ViewIndexDef.LONG_HUN:t.ins().open(LoongSoulWin,3);break;case ViewIndexDef.MONEY_TREE:MoneyTreeModel.CheckOpen(!0)&&t.ins().open(FuliWin,1,2);break;case ViewIndexDef.FB_CHALLENGE_PANEL:t.ins().open(FbWin,1);break;case ViewIndexDef.GUILD_FB_PANEL:GameLogic.ins().actorModel.HasGuild()?t.ins().open(GuildActivityWin,1):UserTips.ins().showTips("没有公会");break;case ViewIndexDef.GEM_PANEL:t.ins().open(ForgeWin,2);break;case ViewIndexDef.JING_MAI_PANEL:t.ins().open(ZsWin,3);break;case ViewIndexDef.WING:t.ins().open(RoleWin,2);break;case ViewIndexDef.BLESS_PANEL:t.ins().open(ForgeWin,1);break;case ViewIndexDef.ENCOUNTER_ITEM_PANEL:t.ins().open(LadderWin);break;case ViewIndexDef.SKILL_BREAK_PANEL:Deblocking.Check(DeblockingType.TYPE_08)&&t.ins().open(ZsWin,2);break;case ViewIndexDef.SKILL_UP_PANEL:t.ins().open(ZsWin);break;case ViewIndexDef.SHOP_MEDAL:t.ins().open(ShopWin,2);break;case ViewIndexDef.LEGEND_EQUIP_PANEL:t.ins().open(OrangeEquipWin,1);break;case ViewIndexDef.ZS_PANEL:t.ins().open(RoleWin,3);break;case ViewIndexDef.NewRoleWin:t.ins().open(NewRoleWin);break;case ViewIndexDef.GuanQiaRewardWin:t.ins().open(GuanQiaWin);break;case ViewIndexDef.PetWin:t.ins().open(PetWin);break;case ViewIndexDef.GadWin:t.ins().open(GadWin);break;case ViewIndexDef.GuanQiaMapWin:t.ins().open(GuanQiaMapWin);break;case ViewIndexDef.MountMainPanel:t.ins().open(RoleWin,1);break;case ViewIndexDef.GuanQiaBossWin:t.ins().open(GuanQiaBossWin);break;case ViewIndexDef.SyBossPanel:t.ins().open(BossWin,5);break;case ViewIndexDef.ForgeZhulingPanel:t.ins().open(ForgeWin,3);break;case ViewIndexDef.ArtifactWin:t.ins().open(ArtifactMainWin);break;case ViewIndexDef.GuildMap:t.ins().open(GuildMap);break;case ViewIndexDef.GuildWin:t.ins().open(GuildWin);break;case ViewIndexDef.GuildSkillWin:t.ins().open(GuildSkillWin);break;case ViewIndexDef.GuildActivityWin:t.ins().open(GuildActivityWin);break;case ViewIndexDef.GuildWarMainBgWin:t.ins().open(GuildWarMainBgWin);break;case ViewIndexDef.GuildShopWin:t.ins().open(GuildShopWin);break;case ViewIndexDef.WingPanel:t.ins().open(RoleWin,2);break;case ViewIndexDef.NeiGongPanel:t.ins().open(ZsWin,3);break;case ViewIndexDef.ShenQiFBPanel:t.ins().open(ArtifactMainWin,2);break;case ViewIndexDef.ShareMissionWin:t.ins().open(ShareMissionWin);break;case ViewIndexDef.ShareFirstWin:t.ins().open(ShareFirstWin);break;case ViewIndexDef.PetClimbPanel:t.ins().open(FbWin,3);break;case ViewIndexDef.PetTreasurePanel:t.ins().open(PetTreasureWin);break;case ViewIndexDef.ZhuanZhiTaskWin:t.ins().open(ZhuanZhiTaskWin);break;case ViewIndexDef.OrangePanle:t.ins().open(OrangeEquipWin);break;case ViewIndexDef.MountClimbPanel:t.ins().open(FbWin,4);break;case ViewIndexDef.drillPanel:t.ins().open(FbWin,5);break;case ViewIndexDef.expWelPanel:t.ins().open(LiLianWin,1);break;case ViewIndexDef.petSmeltSelectPanel:t.ins().open(PetDebrisWin,1);break;case ViewIndexDef.guildActityPanel:t.ins().open(GuildActivityWin,2);break;case ViewIndexDef.teamFbPanel:t.ins().open(FbWin,2);break;case ViewIndexDef.chaosBattlePanel:t.ins().open(LadderWin,3);break;case ViewIndexDef.LiLianWin:t.ins().open(LiLianWin);break;case ViewIndexDef.monthSingPanel:t.ins().open(FuliWin,1);break;case ViewIndexDef.acrossLadderPanel:t.ins().open(LadderWin,5);break;case ViewIndexDef.kfBoss:t.ins().open(BossWin,4);break;case ViewIndexDef.dressMount:t.ins().open(DressWin,0,3);break;case ViewIndexDef.chat:var i=t.ins().getView(GameSceneView);i instanceof GameSceneView&&i.miniChat.viewChange();break;case ViewIndexDef.couponTr:t.ins().open(CouponWin,1);break;case ViewIndexDef.couponMain:t.ins().open(CouponWin);break;case ViewIndexDef.zsPanel:Deblocking.Check(DeblockingType.TYPE_90)&&t.ins().open(RoleWin,3);break;default:return!1}return!0},t.prototype.createEff=function(e,t,i,o,s){return void 0===o&&(o=1),void 0===s&&(s=1),e||(e=new MovieClip,e.touchEnabled=!1),t.addChild(e),e.x=t.width/2,e.y=t.height/2,e.visible=!0,e.loadUrl(ResDataPath.GetPathBuyType(i,s),!0,o,function(){e.visible=!1
}),e},t.prototype.setLab=function(e,t,i){i>t?e.textFlow=[{text:t+"",style:{textColor:Color.Red}},{text:"/"+i,style:{textColor:Color.FontColor}}]:e.textFlow=[{text:t+"",style:{textColor:Color.Green}},{text:"/"+i,style:{textColor:Color.FontColor}}]},t.openCheckTip=!1,t.INVAILD_NAME=[],t}(BaseClass);__reflect(ViewManager.prototype,"ViewManager");var ViewIndexDef;!function(e){e[e.RoleWin=0]="RoleWin",e[e.BagWin=1]="BagWin",e[e.EncounterWin=2]="EncounterWin",e[e.SmeltEquipTotalWin=3]="SmeltEquipTotalWin",e[e.MailWin=4]="MailWin",e[e.GuanQiaRewardWin=5]="GuanQiaRewardWin",e[e.BossWin=6]="BossWin",e[e.FbWin=7]="FbWin",e[e.ZsWin=8]="ZsWin",e[e.TaskWin=9]="TaskWin",e[e.ForgeWin=10]="ForgeWin",e[e.ShopWin=11]="ShopWin",e[e.TreasureHuntWin=12]="TreasureHuntWin",e[e.VipWin=13]="VipWin",e[e.Ranking=14]="Ranking",e[e.WildBossJoinWin=15]="WildBossJoinWin",e[e.WildBossWin=16]="WildBossWin",e[e.LiLianWin=17]="LiLianWin",e[e.ActivityWin=18]="ActivityWin",e[e.DayLoginPanel=19]="DayLoginPanel",e[e.ArtifactWin=20]="ArtifactWin",e[e.CustomServiceWin=21]="CustomServiceWin",e[e.Recharge1GetWin=22]="Recharge1GetWin",e[e.Recharge2Win=23]="Recharge2Win",e[e.Recharge3Win=24]="Recharge3Win",e[e.NewRoleWin=25]="NewRoleWin",e[e.ChargeFirstWin=26]="ChargeFirstWin",e[e.ExpGoldWin=27]="ExpGoldWin",e[e.MonthCardWin=28]="MonthCardWin",e[e.CDKeyWin=29]="CDKeyWin",e[e.FbAndLevelsRankWin=30]="FbAndLevelsRankWin",e[e.ChatWin=31]="ChatWin",e[e.ZhuZaiEquipWin=32]="ZhuZaiEquipWin",e[e.LadderWin=33]="LadderWin",e[e.fuliwin=34]="fuliwin",e[e.RandBoss=35]="RandBoss",e[e.VIP3WIn=36]="VIP3WIn",e[e.GuildWin=37]="GuildWin",e[e.GuildApplyWin=38]="GuildApplyWin",e[e.GuildMap=39]="GuildMap",e[e.GuildSkillWin=40]="GuildSkillWin",e[e.GuildAvtivityWin=41]="GuildAvtivityWin",e[e.WingPanel=42]="WingPanel",e[e.TitleWin=43]="TitleWin",e[e.WarSpiritWin=44]="WarSpiritWin",e[e.DressWin=45]="DressWin",e[e.YbTurntableWin=46]="YbTurntableWin",e[e.FriendsWin=47]="FriendsWin",e[e.FriendsAppListWin=48]="FriendsAppListWin",e[e.BlackListWin=49]="BlackListWin",e[e.FriendsAddWin=50]="FriendsAddWin",e[e.yellowVipWin=51]="yellowVipWin",e[e.GuildWarMainWin=52]="GuildWarMainWin",e[e.BlessOrangeWin=53]="BlessOrangeWin",e[e.GainZsWin=54]="GainZsWin",e[e.LunHuiWin=55]="LunHuiWin",e[e.GainWhirligigsWin=56]="GainWhirligigsWin",e[e.TipsSkillDescPanel=57]="TipsSkillDescPanel",e[e.topLevelWinCount=58]="topLevelWinCount",e[e.XinFaWin=59]="XinFaWin",e[e.GuildActivityWin=60]="GuildActivityWin",e[e.GuildWarMainBgWin=61]="GuildWarMainBgWin",e[e.WorldBossWin=62]="WorldBossWin",e[e.RingMainWin=63]="RingMainWin",e[e.ChangeOfBodyWin=64]="ChangeOfBodyWin",e[e.ArtifactMainWin=65]="ArtifactMainWin",e[e.RoleAddAttrPointWin=66]="RoleAddAttrPointWin",e[e.Recharge1Win=100]="Recharge1Win",e[e.PUBLIC_BOSS=102]="PUBLIC_BOSS",e[e.PERSONAL_BOSS=101]="PERSONAL_BOSS",e[e.TREASURE_HUNT=104]="TREASURE_HUNT",e[e.ACT_GIFT=105]="ACT_GIFT",e[e.DAY_TOTAL_RECHARGE=106]="DAY_TOTAL_RECHARGE",e[e.PK=107]="PK",e[e.LONG_ZHU=108]="LONG_ZHU",e[e.LONG_LING=109]="LONG_LING",e[e.LONG_WEN=116]="LONG_WEN",e[e.LONG_HUN=115]="LONG_HUN",e[e.MONEY_TREE=110]="MONEY_TREE",e[e.FB_CHALLENGE_PANEL=111]="FB_CHALLENGE_PANEL",e[e.GUILD_FB_PANEL=112]="GUILD_FB_PANEL",e[e.GEM_PANEL=113]="GEM_PANEL",e[e.JING_MAI_PANEL=114]="JING_MAI_PANEL",e[e.WING=117]="WING",e[e.BLESS_PANEL=118]="BLESS_PANEL",e[e.ENCOUNTER_ITEM_PANEL=119]="ENCOUNTER_ITEM_PANEL",e[e.SKILL_BREAK_PANEL=120]="SKILL_BREAK_PANEL",e[e.SHOP_MEDAL=121]="SHOP_MEDAL",e[e.LEGEND_EQUIP_PANEL=122]="LEGEND_EQUIP_PANEL",e[e.ZS_PANEL=123]="ZS_PANEL",e[e.GUILD_BOSS_PANEL=124]="GUILD_BOSS_PANEL",e[e.EGG_BROKEN_PANEL=125]="EGG_BROKEN_PANEL",e[e.SKILL_UP_PANEL=126]="SKILL_UP_PANEL",e[e.Loading=1e4]="Loading",e[e.GameScene=2e4]="GameScene",e[e.PlayFun=20001]="PlayFun",e[e.StartGame=20002]="StartGame",e[e.CreateRole=20003]="CreateRole",e[e.SelectServer=20004]="SelectServer",e[e.GameUI1=20005]="GameUI1",e[e.GameUI2=20006]="GameUI2",e[e.ResultWin=20007]="ResultWin",e[e.PubResultWin=20008]="PubResultWin",e[e.Tips=20009]="Tips",e[e.BoostPower=20010]="BoostPower",e[e.SmeltSelectWin=20011]="SmeltSelectWin",e[e.MailDetailedWin=20012]="MailDetailedWin",e[e.ItemDetailedWin=20013]="ItemDetailedWin",e[e.WarnWin=20014]="WarnWin",e[e.TaskAwardswarnWin=20015]="TaskAwardswarnWin",e[e.PubBossRemindWin=20016]="PubBossRemindWin",e[e.WildBossRecordWin=20017]="WildBossRecordWin",e[e.PublicBossRank=20018]="PublicBossRank",e[e.EmptyWin1=20019]="EmptyWin1",e[e.BreakDwonView=20020]="BreakDwonView",e[e.SpecialRingWin=20021]="SpecialRingWin",e[e.BuyWin=20022]="BuyWin",e[e.BlackMarketPanel=20023]="BlackMarketPanel",e[e.ItemShopPanel=20024]="ItemShopPanel",e[e.LoongSoulWin=20025]="LoongSoulWin",e[e.Notice=20026]="Notice",e[e.RRoleWin=20027]="RRoleWin",e[e.HuntResult=20028]="HuntResult",e[e.ShopGoodsWarn=20029]="ShopGoodsWarn",e[e.BagAddItemWarn=20030]="BagAddItemWarn",e[e.BossBloodPanel=20031]="BossBloodPanel",e[e.RoleAttrWin=20032]="RoleAttrWin",e[e.ZaoyuRecordWin=20033]="ZaoyuRecordWin",e[e.FindEnemyWin=20034]="FindEnemyWin",e[e.OfflineRewardWin=20035]="OfflineRewardWin",e[e.EffectivenessTip=20036]="EffectivenessTip",e[e.WorldBossGold=20037]="WorldBossGold",e[e.UIView1_1=20038]="UIView1_1",e[e.EquipDetailedWin=20039]="EquipDetailedWin",e[e.WelcomeWin=20040]="WelcomeWin",e[e.FuncNoticeWin=20041]="FuncNoticeWin",e[e.ZsBossRank=20042]="ZsBossRank",e[e.ZsBossRewardShow=20043]="ZsBossRewardShow",e[e.ZSBossLottery=20044]="ZSBossLottery",e[e.ZSBossCD=20045]="ZSBossCD",e[e.ZSBossResult=20046]="ZSBossResult",e[e.ZhuzaiEquipDecom=20047]="ZhuzaiEquipDecom",e[e.WanBaGiftWin=20048]="WanBaGiftWin",e[e.ChatMainUI=20049]="ChatMainUI",e[e.ItemUseTips=20050]="ItemUseTips",e[e.ZsBossRuleSpeak=20051]="ZsBossRuleSpeak",e[e.LadderChallenge=20052]="LadderChallenge",e[e.LadderResult=20053]="LadderResult",e[e.EmptyWin=20054]="EmptyWin",e[e.MijiLearnWin=20055]="MijiLearnWin",e[e.MijiZhWin=20056]="MijiZhWin",e[e.MijiTipWin=20057]="MijiTipWin",e[e.MoneyTreeBox=20058]="MoneyTreeBox",e[e.YqWin=20059]="YqWin",e[e.KssjPanel=20060]="KssjPanel",e[e.GuildConWin=20061]="GuildConWin",e[e.GuildNoticeWin=20062]="GuildNoticeWin",e[e.GuildCreateWin=20063]="GuildCreateWin",e[e.GuildApplyListWin=20064]="GuildApplyListWin",e[e.WeiBoShareWin=20065]="WeiBoShareWin",e[e.BlessBackGood=20066]="BlessBackGood",e[e.RenameWin=20067]="RenameWin",e[e.GuildFBRewardInfoWin=20068]="GuildFBRewardInfoWin",e[e.MiJiTujianWin=20069]="MiJiTujianWin",e[e.ForgeTipsWin=20070]="ForgeTipsWin",e[e.GuildShopWin=20071]="GuildShopWin",e[e.GuildShopRecordWin=20072]="GuildShopRecordWin",e[e.WarSpiritSkillTipWin=20074]="WarSpiritSkillTipWin",e[e.DevilSquareRewardWin=20075]="DevilSquareRewardWin",e[e.GuildWarRewardWin=20076]="GuildWarRewardWin",e[e.RedBagWin=20077]="RedBagWin",e[e.RedBagDetailsWin=20078]="RedBagDetailsWin",e[e.GuildWarUiInfo=20079]="GuildWarUiInfo",e[e.GuileWarReliveWin=20080]="GuileWarReliveWin",e[e.GuildWarMemWin=20081]="GuildWarMemWin",e[e.GuildWarResultWin=20082]="GuildWarResultWin",e[e.SelectMemberRewardWin=20083]="SelectMemberRewardWin",e[e.SelectMemberPanelWin=20084]="SelectMemberPanelWin",e[e.GuildWarRulesWin=20085]="GuildWarRulesWin",e[e.DailyAwardPanel=20086]="DailyAwardPanel",e[e.SelectRoleWin=20087]="SelectRoleWin",e[e.GuildwarTipsPanel=20088]="GuildwarTipsPanel",e[e.MixResultWin=20089]="MixResultWin",e[e.MineRefushWin=20090]="MineRefushWin",e[e.MineRobWin=20091]="MineRobWin",e[e.MineReportInfoWin=20092]="MineReportInfoWin",e[e.MineRevengeWin=20093]="MineRevengeWin",e[e.MineSettledWin=20094]="MineSettledWin",e[e.HeadUpImg=20095]="HeadUpImg",e[e.HeadSysImg=20096]="HeadSysImg",e[e.GuildRenameWin=20097]="GuildRenameWin",e[e.TaskReachWin=20098]="TaskReachWin",e[e.AcChristmas=20099]="AcChristmas",e[e.ChristmasResult=20100]="ChristmasResult",e[e.LunHuiEquipReset=20101]="LunHuiEquipReset",e[e.LunHuiEquipTuPo=20102]="LunHuiEquipTuPo",e[e.LunHuiEquipChooseWin=20103]="LunHuiEquipChooseWin",e[e.LunhuiEquipDetailWin=20104]="LunhuiEquipDetailWin",e[e.LunHuiAttrTipPanel=20105]="LunHuiAttrTipPanel",e[e.ActivityBuyWin=20106]="ActivityBuyWin",e[e.ChooseItemWin=20107]="ChooseItemWin",e[e.GuildWarNewRule=20108]="GuildWarNewRule",e[e.PetWin=30001]="PetWin",e[e.GadWin=30002]="GadWin",e[e.GuanQiaMapWin=30003]="GuanQiaMapWin",e[e.GuanQiaBossWin=30004]="GuanQiaBossWin",e[e.MountMainPanel=30005]="MountMainPanel",e[e.SyBossPanel=30006]="SyBossPanel",e[e.ForgeZhulingPanel=30007]="ForgeZhulingPanel",e[e.NeiGongPanel=30008]="NeiGongPanel",e[e.ShenQiFBPanel=30009]="ShenQiFBPanel",e[e.ShareMissionWin=30010]="ShareMissionWin",e[e.ShareFirstWin=30011]="ShareFirstWin",e[e.PetClimbPanel=30012]="PetClimbPanel",e[e.PetTreasurePanel=30013]="PetTreasurePanel",e[e.ZhuanZhiTaskWin=30014]="ZhuanZhiTaskWin",e[e.OrangePanle=30015]="OrangePanle",e[e.MountClimbPanel=30016]="MountClimbPanel",e[e.drillPanel=30017]="drillPanel",e[e.expWelPanel=30018]="expWelPanel",e[e.petSmeltSelectPanel=30019]="petSmeltSelectPanel",e[e.guildActityPanel=30020]="guildActityPanel",e[e.teamFbPanel=30021]="teamFbPanel",e[e.chaosBattlePanel=30022]="chaosBattlePanel",e[e.monthSingPanel=30023]="monthSingPanel",e[e.acrossLadderPanel=30024]="acrossLadderPanel",e[e.kfBoss=30025]="kfBoss",e[e.dressMount=30026]="dressMount",e[e.chat=30027]="chat",e[e.couponTr=30028]="couponTr",e[e.couponMain=30029]="couponMain",e[e.zsPanel=30030]="zsPanel"}(ViewIndexDef||(ViewIndexDef={})),window.ViewManager=ViewManager;var IRedPoint=function(){function e(){this.mInValid=!1}return e.prototype.Init=function(){return!0},e.prototype.GetMessageDef=function(){return[]},e.prototype.IsRed=function(){return!1},e.prototype.IsRedByRole=function(e){return!1},e.prototype.DoUpdate=function(e){},e.prototype._CheckArray=function(e){for(var t=0,i=e;t<i.length;t++){var o=i[t];if(this._CheckSinge(o))return!0}return!1},e.prototype._CheckArrayIndex=function(e,t){var i=t[e];return i?this._CheckSinge(i):!1},e.prototype._CheckSinge=function(e){for(var t in e)if(e[t])return!0;return!1},e}();__reflect(IRedPoint.prototype,"IRedPoint"),window.IRedPoint=IRedPoint;var SDKTYPE;!function(e){e[e.Wzt=1]="Wzt",e[e.Down=2]="Down",e[e.Wanba=3]="Wanba"}(SDKTYPE||(SDKTYPE={}));var SdkMgr=function(){function e(){}return e.isWxGame=function(){return!window.isWebGame&&!window.tt&&window.wx&&!window.qq},e.isTTGame=function(){return!window.isWebGame&&window.tt},e.pay=function(t){Main.isDebug||(e.isWxGame()?WxSdk.ins().pay(t):h5_sdk["Sdk_"+e.currSdk].ins()["pay_"+e.currSdk](t))},e.setExtData=function(t){return e.isWxGame()&&t==e.extDataType_1||Main.isDebug?void 0:0==e.createTime?(e.setInfoList.push(t),void(t==e.extDataType_2&&e.getActorCreateTime())):void(h5_sdk["Sdk_"+e.currSdk]&&h5_sdk["Sdk_"+e.currSdk].ins()["setExtData_"+e.currSdk](t))},e.share=function(){h5_sdk["Sdk_"+e.currSdk]&&h5_sdk["Sdk_"+e.currSdk].ins()["share_"+e.currSdk]()},e.Qrcode=function(){h5_sdk["Sdk_"+e.currSdk]&&h5_sdk["Sdk_"+e.currSdk].ins()["collection_"+e.currSdk]()},e.loginOut=function(){h5_sdk["Sdk_"+e.currSdk].ins()["loginOut_"+e.currSdk]()},e.requestPhpLogin=function(t){var i="";StartGetUserInfo.urlData=t,i="https://wdws-api.shouyougu.cn/api/server/getGameUrl?ver="+e.serverUrl;var o=new egret.HttpRequest;o.responseType=egret.HttpResponseType.TEXT,o.open(i,egret.HttpMethod.GET),o.send(),o.addEventListener(egret.Event.COMPLETE,this.sendServerUrl,this),egret.log("请求服务器地址："+i)},e.requestComplete=function(t){var i=t.currentTarget;i.removeEventListener(egret.Event.COMPLETE,this.requestComplete,this),egret.log("登录返回"+i.response);var o=JSON.parse(i.response);200==o.code?(egret.log(o.code+o.data),e.ver=o.data.ver,StartGetUserInfo.manageServerList(o)):alert("结果："+o.message)},e.sendServerUrl=function(){var t=new egret.HttpRequest,i=Const.SERVER_LIST_URL+"api/"+e.functionUrl+"?"+StartGetUserInfo.urlData;t.open(i,egret.HttpMethod.GET),t.send(),t.addEventListener(egret.Event.COMPLETE,this.requestComplete,this),egret.log("请求php>2"+i)},e.uuid=function(e,t){var i,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=[];if(t=t||o.length,e)for(i=0;e>i;i++)s[i]=o[0|Math.random()*t];else{var n;for(s[8]=s[13]=s[18]=s[23]="-",s[14]="4",i=0;36>i;i++)s[i]||(n=0|16*Math.random(),s[i]=o[19==i?3&n|8:n])}return s.join("")},e.getActorCreateTime=function(){if(!Main.isDebug&&0==e.createTime){var t="";t=e.isWxGame()||1==e.requestType?Const.SERVER_LIST_URL+"get_actor_create_time?platformid="+e.platformid+"&serverid="+GameServer.serverID+"&account="+StartGetUserInfo.uid:Const.SERVER_LIST_URL+"api/server/getActorCreateTime?platformid="+e.platformid+"&serverid="+GameServer.serverID+"&account="+StartGetUserInfo.uid+"&ver="+e.ver;var i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.open(t,egret.HttpMethod.GET),i.send(),i.addEventListener(egret.Event.COMPLETE,this.requestCreateComplete,this)}},e.requestCreateComplete=function(t){var i=t.currentTarget;i.removeEventListener(egret.Event.COMPLETE,this.requestCreateComplete,this);var o=JSON.parse(i.response);this.createTime=o.data;for(var s=0;s<e.setInfoList.length;s++)e.setExtData(e.setInfoList.shift())},e.objectUrlParam=function(e){var t="";for(var i in e)t+=i+"="+e[i]+"&";return t.substr(0,t.length-1)},e.mobileVersions=function(){var e=navigator.userAgent,t=(navigator.appVersion,{});return t.trident=e.indexOf("Trident")>-1,t.presto=e.indexOf("Presto")>-1,t.webKit=e.indexOf("AppleWebKit")>-1,t.gecko=e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),t.mobile=!!e.match(/AppleWebKit.*Mobile.*/),t.ios=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),t.android=e.indexOf("Android")>-1||e.indexOf("Linux")>-1,t.iPhone=e.indexOf("iPhone")>-1,t.iPad=e.indexOf("iPad")>-1,t.webApp=-1==e.indexOf("Safari"),t},e.getParam=function(){null==e.functionUrl&&(e.functionUrl="wdws/LezhongTwo/wanbaVerify"),h5_sdk["Sdk_"+e.currSdk]&&h5_sdk["Sdk_"+e.currSdk].ins()["getParam_"+e.currSdk]()},e.sendCdkey=function(t){if(!Main.isDebug&&!e.isSendCdkey){e.isSendCdkey=!0;var i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var o=Const.BG_SERVER_URL+"api/code/useCode?code="+t+"&platform_id="+e.platformid+"&server_id="+GameServer.serverID+"&channel_id="+e.channelid+"&dbid="+RoleMgr.actorid+"&account="+StartGetUserInfo.uid+"&actor_name="+GameLogic.ins().actorModel.name;i.open(o,egret.HttpMethod.GET),i.send(),i.addEventListener(egret.Event.COMPLETE,e.getCdk,this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),i.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this)}},e.getCdk=function(t){setTimeout(function(){egret.log("恢复"),e.isSendCdkey=!1},2e3);var i=t.currentTarget,o=JSON.parse(i.response);UserTips.ins().showTips(o.message)},e.onGetIOError=function(e){egret.log(e)},e.onGetProgress=function(e){egret.log(e)},e.currSdk=0,e.appid=0,e.extDataType_1=1,e.extDataType_2=2,e.extDataType_3=3,e.extDataType_4=4,e.extDataType_5=5,e.P_TYPE_1=1,e.P_TYPE_6=6,e.P_TYPE_7=7,e.P_TYPE_8=8,e.P_TYPE_9=9,e.P_TYPE_10=10,e.P_TYPE_11=11,e.P_TYPE_12=12,e.channelid=0,e.platformid=0,e.requestType=2,e.ver="",e.createTime=0,e.setInfoList=[],e.functionUrl="",e.serverUrl="",e.version="",e.tag="",e.isSendCdkey=!1,e}();__reflect(SdkMgr.prototype,"SdkMgr"),window.SdkMgr=SdkMgr;var Sproto;!function(e){var t=function(){function t(){this.Protocol=new e.ProtocolFunctionDictionary}return t.prototype.GetProtocol=function(){return this.Protocol},t}();e.ProtocolBase=t,__reflect(t.prototype,"Sproto.ProtocolBase")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(){function t(t,i){void 0===i&&(i=null),this.se=new e.SprotoTypeSerialize(t),null!=i?(this.de=e.SprotoTypeDeserialize.CreateByArray(i),this.Decode()):this.de=e.SprotoTypeDeserialize.Create()}return t.prototype.InitReader=function(e){return this.Clear(),this.de.InitReader(e),this.Decode(),this.de.Size()},t.prototype.InitArray=function(e,t){return void 0===t&&(t=0),this.Clear(),this.de.InitArray(e,t),this.Decode(),this.de.Size()},t.prototype.Encode=function(){var t=new e.SprotoStream;this.EncodeStream(t);var i=t.Position,o=new Uint8Array(i);return t.Seek(0,e.SeekOrigin.Begin),t.Read(o,0,i),o},t.prototype.Clear=function(){this.de.Clear()},t}();e.SprotoTypeBase=t,__reflect(t.prototype,"Sproto.SprotoTypeBase")}(Sproto||(Sproto={}));var enPropEntity;!function(e){e[e.P_ID=0]="P_ID",e[e.P_POS_X=1]="P_POS_X",e[e.P_POS_Y=2]="P_POS_Y",e[e.P_MODELID=3]="P_MODELID",e[e.P_ICON=4]="P_ICON",e[e.P_DIR=5]="P_DIR",e[e.P_MAX_ENTITY=6]="P_MAX_ENTITY"}(enPropEntity||(enPropEntity={}));var enPropAnimal;!function(e){e[e.P_LEVEL=6]="P_LEVEL",e[e.P_HP=7]="P_HP",e[e.P_MP=8]="P_MP",e[e.P_SPEED=9]="P_SPEED",e[e.P_MAXHP=10]="P_MAXHP",e[e.P_MAXMP=11]="P_MAXMP",e[e.P_OUT_ATTACK=12]="P_OUT_ATTACK",e[e.P_OUT_DEFENCE=13]="P_OUT_DEFENCE",e[e.P_DEFCRITICALSTRIKES=14]="P_DEFCRITICALSTRIKES",e[e.P_ALL_ATTACK=15]="P_ALL_ATTACK",e[e.P_SUB_DEF=16]="P_SUB_DEF",e[e.P_IN_ATTACK=17]="P_IN_ATTACK",e[e.P_IN_DEFENCE=18]="P_IN_DEFENCE",e[e.P_CRITICALSTRIKES=19]="P_CRITICALSTRIKES",e[e.P_DODGERATE=20]="P_DODGERATE",e[e.P_HITRATE=21]="P_HITRATE",e[e.P_ATTACK_ADD=22]="P_ATTACK_ADD",e[e.P_HP_RENEW=23]="P_HP_RENEW",e[e.P_MP_RENEW=24]="P_MP_RENEW",e[e.P_ATTACK_SPEED=25]="P_ATTACK_SPEED",e[e.P_IN_ATTACK_DAMAGE_ADD=26]="P_IN_ATTACK_DAMAGE_ADD",e[e.P_OUT_ATTACK_DAMAGE_ADD=27]="P_OUT_ATTACK_DAMAGE_ADD",e[e.P_THUNDER_ATTACK=28]="P_THUNDER_ATTACK",e[e.P_THUNDER_DEFENCE=29]="P_THUNDER_DEFENCE",e[e.P_POISON_ATTACK=30]="P_POISON_ATTACK",e[e.P_POISON_DEFENCE=31]="P_POISON_DEFENCE",e[e.P_ICE_ATTACK=32]="P_ICE_ATTACK",e[e.P_ICE_DEFENCE=33]="P_ICE_DEFENCE",e[e.P_FIRE_ATTACK=34]="P_FIRE_ATTACK",e[e.P_FIRE_DEFENCE=35]="P_FIRE_DEFENCE",e[e.P_STATE=36]="P_STATE",e[e.P_BASE_MAXHP=37]="P_BASE_MAXHP",e[e.P_BASE_MAXMP=38]="P_BASE_MAXMP",e[e.P_STAND_POINT=39]="P_STAND_POINT",e[e.P_MAX_ANIMAL=40]="P_MAX_ANIMAL"}(enPropAnimal||(enPropAnimal={}));var enPropActor;!function(e){e[e.P_WEAPON=40]="P_WEAPON",e[e.P_MOUNT=41]="P_MOUNT",e[e.P_DIZZY_RATE11=42]="P_DIZZY_RATE11",e[e.P_DIZZY_TIME1=43]="P_DIZZY_TIME1",e[e.P_HP_STORE=44]="P_HP_STORE",e[e.P_MP_STORE=45]="P_MP_STORE",e[e.P_SPIRIT=46]="P_SPIRIT",e[e.P_PK_MOD=47]="P_PK_MOD",e[e.P_STRONG_EFFECT=48]="P_STRONG_EFFECT",e[e.P_WING=49]="P_WING",e[e.P_STAGE_EFFECT=50]="P_STAGE_EFFECT",e[e.P_PET_HP_STORE=51]="P_PET_HP_STORE",e[e.PROP_ACTOR_XIUWEI_RENEW_RATE=52]="PROP_ACTOR_XIUWEI_RENEW_RATE",e[e.P_SEX=53]="P_SEX",e[e.P_VOCATION=54]="P_VOCATION",e[e.P_EXP=55]="P_EXP",e[e.P_PK_VALUE=57]="P_PK_VALUE",e[e.P_BAG_GRID=58]="P_BAG_GRID",e[e.P_WEEK_CHARM=59]="P_WEEK_CHARM",e[e.P_BIND_COIN=60]="P_BIND_COIN",e[e.P_COIN=61]="P_COIN",e[e.P_BIND_YB=62]="P_BIND_YB",e[e.P_YB=63]="P_YB",e[e.P_SHENGWANG=64]="P_SHENGWANG",e[e.P_CHARM=65]="P_CHARM",e[e.P_SPIRIT_SLOT=66]="P_SPIRIT_SLOT",e[e.P_RENOWN=67]="P_RENOWN",e[e.P_GUILD_ID=68]="P_GUILD_ID",e[e.P_TEAM_ID=69]="P_TEAM_ID",e[e.P_SOCIAL=70]="P_SOCIAL",e[e.P_GUILD_EXP=71]="P_GUILD_EXP",e[e.P_LUCKY=72]="P_LUCKY",e[e.P_SYS_OPEN=73]="P_SYS_OPEN",e[e.P_ROOT_EXP_POWER=74]="P_ROOT_EXP_POWER",e[e.P_CHANGE_MODEL=75]="P_CHANGE_MODEL",e[e.PROP_BANGBANGTANG_EXP=76]="PROP_BANGBANGTANG_EXP",e[e.P_GIVE_YB=77]="P_GIVE_YB",e[e.P_CRITICAL_STRIKE=78]="P_CRITICAL_STRIKE",e[e.P_EXP_RATE=79]="P_EXP_RATE",e[e.P_DEPOT_GRID=80]="P_DEPOT_GRID",e[e.P_ANGER=81]="P_ANGER",e[e.P_ROOT_EXP=82]="P_ROOT_EXP",e[e.P_ACHIEVEPOINT=83]="P_ACHIEVEPOINT",e[e.P_ZYCONT=84]="P_ZYCONT",e[e.P_QQ_VIP=85]="P_QQ_VIP",e[e.P_WING_ID=86]="P_WING_ID",e[e.P_WING_SCORE=87]="P_WING_SCORE",e[e.P_PET_SCORE=88]="P_PET_SCORE",e[e.PROP_ACTOR_VIPFLAG=89]="PROP_ACTOR_VIPFLAG",e[e.P_CAMP=90]="P_CAMP",e[e.P_PET_SLOT=91]="P_PET_SLOT",e[e.P_HONOR=92]="P_HONOR",e[e.P_QING_YUAN=93]="P_QING_YUAN",e[e.PROP_ACTOR_DUR_KILLTIMES=94]="PROP_ACTOR_DUR_KILLTIMES",e[e.PROP_ACTOR_BASE_FIGHT=95]="PROP_ACTOR_BASE_FIGHT",e[e.P_FIGHT_VALUE=96]="P_FIGHT_VALUE",e[e.P_MAX_RENOWN=97]="P_MAX_RENOWN",e[e.P_RECHARGE=98]="P_RECHARGE",e[e.P_VIP_LEVEL=99]="P_VIP_LEVEL",e[e.P_BEAST_LEVEL=100]="P_BEAST_LEVEL",e[e.P_FOOT_EFFECT=101]="P_FOOT_EFFECT",e[e.P_EQUIP_SCORE=102]="P_EQUIP_SCORE",e[e.P_HAIR_MODEL=103]="P_HAIR_MODEL",e[e.P_BUBBLE=104]="P_BUBBLE",e[e.P_ACTOR_STATE=105]="P_ACTOR_STATE",e[e.P_JINGJIE_TITLE=106]="P_JINGJIE_TITLE",e[e.P_ZHUMOBI=107]="P_ZHUMOBI",e[e.P_WARSPIRIT=108]="P_WARSPIRIT",e[e.P_GUILDFB_SCORE=109]="P_GUILDFB_SCORE",e[e.P_SYS_OPENEX=110]="P_SYS_OPENEX",e[e.P_MAX_ACTOR=111]="P_MAX_ACTOR"}(enPropActor||(enPropActor={}));var AttributeType;!function(e){e[e.atHp=0]="atHp",e[e.atMp=1]="atMp",e[e.atMaxHp=2]="atMaxHp",e[e.atMaxMp=3]="atMaxMp",e[e.atAttack=4]="atAttack",e[e.atDef=5]="atDef",e[e.atRes=6]="atRes",e[e.atCrit=7]="atCrit",e[e.atTough=8]="atTough",e[e.atMoveSpeed=9]="atMoveSpeed",e[e.atAttackSpeed=10]="atAttackSpeed",e[e.atHpEx=11]="atHpEx",e[e.atAtkEx=12]="atAtkEx",e[e.atStunPower=13]="atStunPower",e[e.atStunRes=14]="atStunRes",e[e.atStunTime=15]="atStunTime",e[e.atDamageReduction=16]="atDamageReduction",e[e.atCritHurt=17]="atCritHurt",e[e.atRegeneration=18]="atRegeneration",e[e.atCritEnhance=19]="atCritEnhance",e[e.atPenetrate=20]="atPenetrate",e[e.atRoleDamageEnhance=21]="atRoleDamageEnhance",e[e.atRoleDamageReduction=22]="atRoleDamageReduction",e[e.atJob1DamageEnhance=23]="atJob1DamageEnhance",e[e.atJob2DamageEnhance=24]="atJob2DamageEnhance",e[e.atJob3DamageEnhance=25]="atJob3DamageEnhance",e[e.atJob1DamageReduction=26]="atJob1DamageReduction",e[e.atJob2DamageReduction=27]="atJob2DamageReduction",e[e.atJob3DamageReduction=28]="atJob3DamageReduction",e[e.atTianzhuCrit=29]="atTianzhuCrit",e[e.atTianzhuCritTime=30]="atTianzhuCritTime",e[e.atDefEx=31]="atDefEx",e[e.atResEx=32]="atResEx",e[e.atRingBuff=33]="atRingBuff",e[e.atTargetComaWhenBeAttackedRate=34]="atTargetComaWhenBeAttackedRate",e[e.atTargetComaWhenBeAttackedDuringSec=35]="atTargetComaWhenBeAttackedDuringSec",e[e.atTargetDamageExWhenSelfDeathRate=36]="atTargetDamageExWhenSelfDeathRate",e[e.atTargetDamageExWhenSelfDeathValue=37]="atTargetDamageExWhenSelfDeathValue",e[e.atDodgeProb=38]="atDodgeProb",e[e.atDamageReboundProb=39]="atDamageReboundProb",e[e.atDamageReboundValue=40]="atDamageReboundValue",e[e.atSuperManByHitProb=41]="atSuperManByHitProb",e[e.atSuperManByHitSec=42]="atSuperManByHitSec",e[e.atMpEx=43]="atMpEx",e[e.atShield=44]="atShield",e[e.atShieldRep=45]="atShieldRep",e[e.atShieldRelief=46]="atShieldRelief",e[e.atMaxShield=47]="atMaxShield",e[e.atStrength=48]="atStrength",e[e.atFaster=49]="atFaster",e[e.atIntelligence=50]="atIntelligence",e[e.atPhysical=51]="atPhysical",e[e.atMpRecove=52]="atMpRecove",e[e.atMpRecoveEx=53]="atMpRecoveEx",e[e.atCount=54]="atCount",e[e.WATER=101]="WATER",e[e.FIRE=102]="FIRE",e[e.WIND=103]="WIND",e[e.LIGHT=104]="LIGHT",e[e.DARK=105]="DARK",e[e.ANTIWATER=106]="ANTIWATER",e[e.ANTIFIRE=107]="ANTIFIRE",e[e.ANTIWIND=108]="ANTIWIND",e[e.ANTILIGHT=109]="ANTILIGHT",e[e.ANTIDARK=110]="ANTIDARK"}(AttributeType||(AttributeType={}));var ElementType;!function(e){e[e.WATER=1]="WATER",e[e.FIRE=2]="FIRE",e[e.WIND=3]="WIND",e[e.LIGHT=4]="LIGHT",e[e.DARK=5]="DARK"}(ElementType||(ElementType={}));var ElementRestrainType;!function(e){e[e.NOTYPE=0]="NOTYPE",e[e.KTYPE=1]="KTYPE",e[e.BKTYPE=2]="BKTYPE"}(ElementRestrainType||(ElementRestrainType={}));var BaseScene=function(){function e(){this._layers=new Array}return e.prototype.onEnter=function(){},e.prototype.onExit=function(){ViewManager.ins().closeAll(),this.removeAllLayer()},e.prototype.addLayer=function(e){e instanceof BaseSpriteLayer?(StageUtils.ins().getStage().addChild(e),this._layers.push(e)):e instanceof BaseEuiLayer&&(StageUtils.ins().getUIStage().addChild(e),this._layers.push(e))},e.prototype.addLayerAt=function(e,t){e instanceof BaseSpriteLayer?(StageUtils.ins().getStage().addChildAt(e,t),this._layers.push(e)):e instanceof BaseEuiLayer&&(StageUtils.ins().getUIStage().addChildAt(e,t),this._layers.push(e))},e.prototype.removeLayer=function(e){e instanceof BaseSpriteLayer?(StageUtils.ins().getStage().removeChild(e),this._layers.splice(this._layers.indexOf(e),1)):e instanceof BaseEuiLayer&&(StageUtils.ins().getUIStage().removeChild(e),this._layers.splice(this._layers.indexOf(e),1))},e.prototype.layerRemoveAllChild=function(e){e instanceof BaseSpriteLayer?e.removeChildren():e instanceof BaseEuiLayer&&e.removeChildren()},e.prototype.removeAllLayer=function(){for(;this._layers.length;){var e=this._layers[0];this.layerRemoveAllChild(e),this.removeLayer(e)}},e}();__reflect(BaseScene.prototype,"BaseScene"),window.BaseScene=BaseScene;var EntityModel=function(){function e(){this.attributeData=[],this.attributeExData=[],this._attrElementData=[],this.index=0,this.inRoleId=-1}return e.prototype.Parser=function(e,t){this.inRoleId=-1,this.parserBase(e),this.parserAtt(t)},e.prototype.parserBase=function(e){this.type=e.type,this.handle=e.handle,this.configID=e.configID,this.setElementByConfig(),this.masterHandle=e.masterHandle,this.x=e.x,this.y=e.y,GlobalConfig.monstersConfig[this.configID]&&(this.monstersType=GlobalConfig.monstersConfig[this.configID].type)},Object.defineProperty(e.prototype,"attrElementData",{get:function(){return this._attrElementData},set:function(e){e&&(this._attrElementData=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attrElementMianType",{get:function(){return this._attrElementMianType},set:function(e){e&&(this._attrElementMianType=e)},enumerable:!0,configurable:!0}),e.prototype.parserAtt=function(e){this.attributeData=e},e.prototype.getAtt=function(e){if(100>e)return this.attributeData[e]||0;var t=e-101;return this.attrElementData[t]||0},e.prototype.setAtt=function(e,t){this.attributeData[e]=t},Object.defineProperty(e.prototype,"getattributeData",{get:function(){return this.attributeData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatarFileName",{get:function(){return null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig),this.monstersConfig[this.configID].avatar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name?this._name:(null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig),3==this.monstersConfig[this.configID].type?this._name:this.monstersConfig[this.configID].name)},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lv",{get:function(){return null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig),3==this.monstersConfig[this.configID].type?this._lv:this.monstersConfig[this.configID].level},set:function(e){this._lv=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"configType",{get:function(){return null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig),this.configID?this.monstersConfig[this.configID].type:null},enumerable:!0,configurable:!0}),e.prototype.setPos=function(e,t){this.x=e,this.y=t},e.prototype.getAttEx=function(e){return this.attributeExData[e]||0},e.prototype.setAttEx=function(e,t){this.attributeExData[e]=t},e.prototype.GetHeadImgName=function(){return""},e.prototype.GetHeadImgName2=function(){return""},Object.defineProperty(e.prototype,"isPet",{get:function(){return null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig),this.monstersConfig[this.configID]&&3==this.monstersConfig[this.configID].type?!0:!1},enumerable:!0,configurable:!0}),e.prototype.setElementByConfig=function(){if(!this._attrElementMianType||this._attrElementData){null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig);var e=this.monstersConfig[this.configID];if(e){this.attrElementMianType=e.elementType;for(var t=[],i=0;i<e.elementValue.length;i++)t.push(e.elementValue[i]);this.attrElementData=t}}},e}();__reflect(EntityModel.prototype,"EntityModel"),window.EntityModel=EntityModel;var DeviceUtils=function(){function e(){}return Object.defineProperty(e,"IsHtml5",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsNative",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsMobile",{get:function(){return egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsPC",{get:function(){return!egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsQQBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MQQBrowser")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsIEBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MSIE")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsFirefoxBrowse",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Firefox")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsChromeBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Chrome")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsSafariBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Safari")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsOperaBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Opera")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isLocation",{get:function(){return location.href.indexOf("192.168.201")>=0||location.href.indexOf("127.0.0.1")>=0||location.href.indexOf("localhost")>=0||location.href.indexOf("cq.api.com")>=0},enumerable:!0,configurable:!0}),e.isIOS=function(){return e.os==e.IOS},e.IOS="iOS",e.Android="Android",e.WindowsPhone="Windows Phone",e.WindowsPC="Windows PC",e.MacOS="Mac OS",e.Unknown="Unknown",e.os=egret.Capabilities.os,e}();__reflect(DeviceUtils.prototype,"DeviceUtils"),window.DeviceUtils=DeviceUtils;var RES_DIR="",RES_DIR_BLOOD=RES_DIR+"",RES_DIR_BODY=RES_DIR+"",RES_DIR_EFF=RES_DIR+"",RES_DIR_ITEM=RES_DIR+"",RES_DIR_MONSTER=RES_DIR+"",RES_DIR_SKILL=RES_DIR+"",RES_DIR_SKILLEFF=RES_DIR+"",RES_DIR_WARSPIRIT=RES_DIR+"",RES_DIR_WEAPON=RES_DIR+"",RES_DIR_WING=RES_DIR+"",RES_DIR_FOOTSTEP=RES_DIR+"",WIDTH=480,HEIGHT=800,Const=function(){function e(){}return Object.defineProperty(e,"IsLoadType01",{get:function(){return 1==this.LOAD_TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsLoadType02",{get:function(){return 2==this.LOAD_TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RES_URL",{get:function(){return SdkMgr.isWxGame()?e._RES_URL="https://wdwsfile.h5aiwan.com/wxgame_q5/jifeng1.8.9/":SdkMgr.currSdk==SdkMgr.P_TYPE_11||SdkMgr.currSdk==SdkMgr.P_TYPE_12?e._RES_URL="https://wdwsfile.h5aiwan.com/qb_by_vivo/":e._RES_URL},set:function(t){e._RES_URL=t},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SERVER_LIST_URL",{get:function(){return SdkMgr.isWxGame()?e.wxServerUrl:e._SERVER_LIST_URL},set:function(t){e._SERVER_LIST_URL=t},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BG_SERVER_URL",{get:function(){return e._BG_SERVER_URL},set:function(t){e._BG_SERVER_URL=t},enumerable:!0,configurable:!0}),Object.defineProperty(e,"QQ",{get:function(){switch(SdkMgr.currSdk){default:return""}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isInfoUpPlatform",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isShare",{get:function(){return SdkMgr.currSdk==SDKTYPE.Wanba||SdkMgr.currSdk==SdkMgr.P_TYPE_8||SdkMgr.currSdk==SdkMgr.P_TYPE_10&&"4179"==StartGetUserInfo.channelId2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isQrcode",{get:function(){return Main.isDebug||SdkMgr.currSdk==SDKTYPE.Wanba||SdkMgr.currSdk==SdkMgr.P_TYPE_8},enumerable:!0,configurable:!0}),e.PosToPixel=function(e){return 64*e},e.PixelToPos=function(e){return Math.floor(e/64)},Object.defineProperty(e,"IsTestIpList",{get:function(){return window.IsTestIpList},enumerable:!0,configurable:!0}),e.LOAD_TYPE=1,e._RES_URL="",e._BG_SERVER_URL="https://ro-bg.h5aiwan.com/",e.PRODUCT_CODE="362788327978525856751 62453706540",e._SERVER_LIST_URL="https://xmsy-platform.shouyougu.cn/",e.wxServerUrl="",e.SMELT_COUNT=50,e.CELL_SIZE=64,e.zidanBuff=30003,e}();__reflect(Const.prototype,"Const");var GuildSkillType;!function(e){e[e.NORMAL=1]="NORMAL",e[e.PRACTICE=2]="PRACTICE"
}(GuildSkillType||(GuildSkillType={}));var EffectAddType;!function(e){e[e.EFF_TYPE_SKILL=1]="EFF_TYPE_SKILL",e[e.EFF_TYPE_UI=2]="EFF_TYPE_UI"}(EffectAddType||(EffectAddType={}));var EffectAdd;!function(e){e[e.NORMAL=1]="NORMAL",e[e.ADD=2]="ADD",e[e.ERASE=3]="ERASE"}(EffectAdd||(EffectAdd={}));var GuildRobberState;!function(e){e[e.NORMAL=1]="NORMAL",e[e.FIGHT=2]="FIGHT",e[e.DEAD=3]="DEAD"}(GuildRobberState||(GuildRobberState={})),window.Const=Const;var ItemBase=function(e){function t(){var t=e.call(this)||this;return t.isDataShowName=!0,t.isCheckEff=!1,t.skinName="ItemSkin",t.touchEnabled=!1,t.touchChildren=!0,t.init(),t}return __extends(t,e),t.prototype.destroy=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.EquipEffect&&(DisplayUtils.dispose(this.EquipEffect),this.EquipEffect=null)},t.prototype.init=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.setItemImg=function(e){this.itemIcon.setItemImg(e)},t.prototype.setItemBg=function(e){this.itemIcon.setItemBg(e)},t.prototype.setDataByConfig=function(e){if(null!=e){if(this.itemIcon.setData(e),e.type==ItemType.EQUIP||e.type==ItemType.FUWEN){var t=e.zsLevel>0?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[e.zsLevel]):LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[e.level]);ItemConfig.IsLegendItem(e)&&(t=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101439,[LegendModel.GetStage(e.id)])),this.nameTxt.text=t}else this.nameTxt.text=e.name;void 0!=this.num&&this.setCount(this.num+"")}},t.prototype.dataChanged=function(){if(this.clear(),this.data.isShowName&&2==this.data.isShowName?this.isShowName(!1):this.isShowName(!0),isNaN(this.data)){if(this.data instanceof ItemData){if(this.itemConfig=this.data.itemConfig,!this.itemConfig)return;this.setDataByConfig(this.itemConfig),this.data.count>1?this.setCount(this.data.count+""):this.setCount("")}else if(0==this.data.type){this.itemIcon.setItemBg(ResDataPath.GetItemQualityName(MoneyManger.MoneyConstToQuality(this.data.id))),this.itemIcon.setItemImg(MoneyManger.MoneyConstToSource(this.data.id)),this.nameTxt.text=MoneyManger.MoneyConstToName(this.data.id);var e=this.data.count;void 0!=e&&e>1?this.setCount(e+""):this.setCount("")}else if(1==this.data.type){if(this.itemConfig=GlobalConfig.itemConfig[this.data.id],!this.itemConfig)return;this.setDataByConfig(this.itemConfig);var e=this.data.count;e>1?this.setCount(e+""):this.setCount("")}}else this.itemConfig=GlobalConfig.itemConfig[this.data],this.itemConfig?this.setDataByConfig(this.itemConfig):(this.itemIcon.setItemImg(MoneyManger.MoneyConstToSource(this.data)),this.nameTxt.text=MoneyManger.MoneyConstToName(this.data),this.setCount(""));this.isCheckEff&&this.showItemEffect(),this._UpdateRedPoint()},t.prototype._UpdateRedPoint=function(){this.data&&(this.redPoint.visible=this.data.canbeUsed)},t.prototype.IsShowRedPoint=function(e){this.redPoint.visible=e},t.prototype.clear=function(){this.itemConfig=null,null!=this.itemIcon.setData?this.itemIcon.setData(null):console.log("itemicon setdata data error"),this.count.text="",this.nameTxt.text=""},t.prototype.destruct=function(){this.mCallback=null,this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this)},t.prototype.isShowJob=function(e){this.itemIcon.isShowJob(e)},t.prototype.onClick=function(){return this.mCallback?void this.mCallback(this):void this.showDetail()},t.prototype.showDetail=function(){if(void 0!=this.itemConfig&&this.itemConfig&&void 0!=this.itemConfig.type)if(null==this.jingyanyuCommonConfig&&(this.jingyanyuCommonConfig=GlobalConfig.ins("JingyanyuCommonConfig")),this.itemConfig.id==this.jingyanyuCommonConfig.fullItemID)ViewManager.ins().open(ExpjadePanel);else if(this.itemConfig.type==ItemType.EQUIP||this.itemConfig.type==ItemType.ZHUANZHI||this.itemConfig.type==ItemType.WING||this.itemConfig.type==ItemType.FUWEN||this.itemConfig.type==ItemType.RINGSOUL||this.itemConfig.type==ItemType.MOUNTEQUIP)this.openEquipsTips();else if(this.itemConfig.type==ItemType.GAD){var e=this.data,t=GadModel.getInstance.gadBagDic.get(e.handle);if(null==t)for(var i=0,o=GadModel.getInstance.gadBagDic.values;i<o.length;i++){var s=o[i];if(s.configID==e.id){t=s;break}}null==t?ViewManager.ins().open(ItemDetailedWin,0,this.itemConfig.id):ViewManager.ins().open(GadStateWin,t)}else ViewManager.ins().open(ItemDetailedWin,0,this.itemConfig.id);else isNaN(this.data)?this.data&&this.data.id&&ViewManager.ins().open(ItemDetailedWin,0,null,null,this.data.id):this.data&&this.data<100&&ViewManager.ins().open(ItemDetailedWin,0,null,null,this.data)},t.prototype.setCount=function(e){if(e.length>4){var t=Math.floor(Number(e)/1e3);e=t/10+GlobalConfig.jifengTiaoyueLg.st100066}this.count.text=e},t.prototype.openEquipsTips=function(){ViewManager.ins().open(EquipDetailedWin,1,this.data.handle,this.itemConfig.id,this.data)},t.prototype.isShowName=function(e){this.nameTxt&&(this.nameTxt.visible=e)},t.prototype.getItemSoure=function(){var e="";if(0==this.data.type)switch(this.data.id){case MoneyConst.exp:e="";break;case MoneyConst.gold:e="icgoods117_png";break;case MoneyConst.yuanbao:e="icgoods121_png"}else e=""+this.data.id;return e},t.prototype.getText=function(){return this.nameTxt.text},t.prototype.getItemName=function(){return this.itemConfig.name},t.prototype.showEquipEffect=function(){return!this.itemConfig||this.itemConfig.quality<=3||0!=this.itemConfig.type?void this.clearEffect():void this.showEffect(this.itemConfig.quality)},t.prototype.showEffect=function(e){this.EquipEffect||(this.EquipEffect=new MovieClip),this.EquipEffect.touchEnabled=!1,e>=4?(this.EquipEffect.loadUrl(ResDataPath.GetUIEffePath("quaeff"+e),!0),this.EquipEffect.x=4==e?35:36,this.EquipEffect.y=31):(this.EquipEffect.loadUrl(ResDataPath.GetUIEffePath("quality_0"+e),!0),this.EquipEffect.x=35,this.EquipEffect.y=29),this.addChild(this.EquipEffect)},t.prototype.clearEffect=function(){this.EquipEffect&&(DisplayUtils.dispose(this.EquipEffect),this.EquipEffect=null)},t.prototype.getTextColor=function(){return this.nameTxt.textColor},t.prototype.showItemEffect=function(){!this.itemConfig||this.itemConfig.quality<=3?this.clearEffect():this.showEffect(this.itemConfig.quality)},t.prototype.showZhuZaiItemEffect=function(e){e.growlevel>0&&e.quality>3?this.showEffect(e.quality):this.clearEffect()},t.prototype.showLegendEffe=function(){this.itemConfig&&this.itemConfig.quality>=4?this.showEffect(this.itemConfig.quality):this.clearEffect()},t.prototype.setRight=function(){this.count.horizontalCenter=void 0,this.count.right=8},t.QUALITY_COLOR=[Color.Black,Color.Green,Color.Blue,Color.Purple,Color.Orange,Color.Red],t.QUALITY_TIPS_COLOR=[Color.Black,Color.GreenTips,Color.BlueTips,Color.PurpleTips,Color.OrangeTips,Color.RedTips],t.QUALITY_COLOR_STR=["0x3b3b3b","0x51fa07","0x31ceff","0xd36cef","0xffa700","0xff0c00"],t}(eui.ItemRenderer);__reflect(ItemBase.prototype,"ItemBase"),window.ItemBase=ItemBase;var CharEnum;!function(e){e[e.NORTH=0]="NORTH",e[e.NORTH_EAST=1]="NORTH_EAST",e[e.EAST=2]="EAST",e[e.SOUTH_EAST=3]="SOUTH_EAST",e[e.SOUTH=4]="SOUTH",e[e.SOUTH_WEST=5]="SOUTH_WEST",e[e.WEST=6]="WEST",e[e.NORTH_WEST=7]="NORTH_WEST"}(CharEnum||(CharEnum={}));var CharMcOrder=function(){function e(){}return e.SHOWDOW="0",e.BODY="1",e.WEAPON="2",e.WING="3",e.FOUR="4",e}();__reflect(CharMcOrder.prototype,"CharMcOrder"),window.CharMcOrder=CharMcOrder;var CharMonster=function(e){function t(){var t=e.call(this)||this;return t.AI_STATE=0,t._dir=3,t._state=EntityAction.STAND,t.publicCD=0,t.atkHardTime=0,t.atk2=!1,t.atkOne=!0,t.buffList={},t.buffEff={},t.damageOverTimeList={},t.damageOverTimeValueList={},t.effs={},t.upPoin=new egret.Point,t.saveHp=123123,t.m_LoadResFoce=!0,t.dirArr=[1,1,3,3,3,3,3,1],t.recordScaleX=1,t.touchEnabled=!1,t.touchChildren=!1,t._bodyContainer=new egret.DisplayObjectContainer,t.addChild(t._bodyContainer),t._shadow=new eui.Image,t._shadow.source=ResDataPath.GetAssets("movie/yingzi"),t._shadow.anchorOffsetX=28,t._shadow.anchorOffsetY=18,t._bodyContainer.addChild(t._shadow),t.substituteImg=new eui.Image,t.substituteImg.source="comp_roleshadow_png",t.substituteImg.anchorOffsetX=21,t.substituteImg.anchorOffsetY=44.5,t._bodyContainer.addChild(t.substituteImg),t._body=new MovieClip,t._bodyContainer.addChild(t._body),t.charMonsterBlood=new CharMonsterBlood,t.charMonsterBlood.currentState="state2",t.charMonsterBlood.anchorOffsetX=t.charMonsterBlood.width/2,t.charMonsterBlood.anchorOffsetY=t.charMonsterBlood.height/2,t.charMonsterBlood.y=-52,t.charMonsterBlood.x=0,t.charMonsterBlood.initData(),t.addChild(t.charMonsterBlood),t.setScale(1),t.hideBloodTime(),t._body.addEventListener(egret.Event.COMPLETE,t.playStandAction,t),t._body.addEventListener(egret.Event.CHANGE,t.playBody,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"handle",{get:function(){return this._infoModel?this._infoModel.handle:-99},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"infoModel",{get:function(){return this._infoModel},set:function(e){this._infoModel=e},enumerable:!0,configurable:!0}),t.prototype.setCharName=function(e){this.charMonsterBlood.m_Name.textFlow=TextFlowMaker.generateTextFlow(e)},t.prototype.showCharName=function(e){this.charMonsterBlood.m_Name.visible=e},t.prototype.setElementImg=function(e){var t=ResDataPath.GetElementImgName(e);this.charMonsterBlood.m_ElemtImg.source=t},t.prototype.hideBlood=function(e){void 0===e&&(e=!1),this.charMonsterBlood.m_HpBlood.visible=e},t.prototype.hideHpComp=function(e){void 0===e&&(e=!1),this.charMonsterBlood.visible=e},t.prototype.playAction=function(e){null!=e&&0!=e.length&&(this._state!=e||this.isAtkAction())&&(this._state=e,this.loadBody())},t.prototype.playStandAction=function(){this.playAction(EntityAction.STAND)},t.prototype.stopMove=function(){if(this.moveTween){this.moveTween.pause();for(var e=egret.Tween._tweens,t=e.length-1;t>=0;t--){var i=e[t];if(i._target==this&&i==this.moveTween){i.paused=!0,e.splice(t,1);break}}this.moveTween=null}},Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir},set:function(e){this._dir!=e&&(this._dir=e,this.loadBody())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"action",{get:function(){return this._state},set:function(e){this._state=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"moveSpeed",{get:function(){return this.infoModel?this.infoModel.getAtt(AttributeType.atMoveSpeed)/1e3*GameMap.CELL_SIZE:0},enumerable:!0,configurable:!0}),t.prototype.hram=function(e){this.charMonsterBlood.m_HpBlood.value=this.charMonsterBlood.m_HpBlood.value-e,0==this.infoModel.inRoleId?this.showBloodTime():this.saveHp!=this.charMonsterBlood.m_HpBlood.value&&(this.saveHp=this.charMonsterBlood.m_HpBlood.value,this.showBloodTime(),this.setBloodTime())},t.prototype.setBloodTime=function(){TimerManager.ins().remove(this.hideBloodTime,this),TimerManager.ins().doTimer(1e3,1,this.hideBloodTime,this)},t.prototype.showBloodTime=function(){this.charMonsterBlood.m_HpBlood.visible=!0,this.charMonsterBlood.m_ElemtImg.visible=!0,0==this.infoModel.inRoleId?this.charMonsterBlood.m_Name.visible=!0:this.charMonsterBlood.m_Name.visible=!1},t.prototype.hideBloodTime=function(){this.infoModel&&0!=this.infoModel.inRoleId&&(this.charMonsterBlood.m_HpBlood.visible=!1,this.charMonsterBlood.m_ElemtImg.visible=!1,this.charMonsterBlood.m_Name.visible=!1,this.charMonsterBlood.m_MpBlood.visible=!1,this.charMonsterBlood.m_NeiGongBlood.visible=!1)},t.prototype.getHP=function(){return this.infoModel.getAtt(AttributeType.atHp)},t.prototype.reset=function(){this.visible=!0,this.alpha=1,this._state=EntityAction.STAND,this.dir=4,this.charMonsterBlood.m_HpBlood.slideDuration=500},t.prototype.destruct=function(e){void 0===e&&(e=!1),this.m_LoadResFoce=!0,this._dir=0,this.AI_STATE=AI_State.Stand,this.alpha=1,this.charMonsterBlood.initData(),this.isMy(!1),this._body.stop(),this._body.clearCache(),this.stopMove(),egret.Tween.removeTweens(this),this.removeHardStraight();for(var t in this.damageOverTimeList){var i=this.damageOverTimeList[t];this.deleteDamageOverTimer(i)}this.removeAllBuff(),this.notRemove=!1,this._body.filters=[],this.charMonsterBlood.m_Name.visible=!1,this.charMonsterBlood.m_ElemtImg.visible=!1,this.atking=!1,this.charMonsterBlood.m_ElemtImg.visible=!1,TimerManager.ins().removeAll(this),this._bodyContainer.alpha=1,this.deleteFootRingContainer(),this._bodyContainer.scaleX=this._bodyContainer.scaleY=1,ObjectPool.ins().push(this)},t.prototype.addHardStraight=function(e){this.isHardStraight=!0,TimerManager.ins().doTimer(e,1,this.removeHardStraight,this)},t.prototype.removeHardStraight=function(){this.isHardStraight=!1},t.prototype.initBody=function(e){this._fileName=e,this.changeFileName=e,this.loadBody()},t.prototype.loadBody=function(){this.loadFile(this._body,this.GetBodyAssetPath(),this._fileName)},t.prototype.loadFile=function(e,t,i,o){0==this._dir||4==this.dir?e.scaleX=this.recordScaleX:this._dir>4?e.scaleX=-1:e.scaleX=1,this.recordScaleX=e.scaleX;var s=this.dirArr[this._dir],n=i+"_"+s+(o?o:this._state);if(this._state!=EntityAction.DIE&&this._fileName){var r=ResDataPath.GetMoviePath(n,t);e.loadUrl(r);var a=i.split("_");r.indexOf("monster")>=0?ResMgr.ins().saveMonster(r,a[0]):r.indexOf("body")>=0?ResMgr.ins().saveRole(r,a[0]):r.indexOf("wing")>=0?ResMgr.ins().saveWing(r,a[0]):r.indexOf("weapon")>=0&&ResMgr.ins().saveWeapon(r,a[0])}},t.prototype.GetBodyAssetPath=function(){return"monster"},Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this._body.isPlaying},enumerable:!0,configurable:!0}),t.prototype.isAtkAction=function(){return this._state==EntityAction.ATTACK||this._state==EntityAction.CAST},t.prototype.stopFrame=function(e){this._state!=EntityAction.STAND&&this.loadFile(this._body,this.GetBodyAssetPath(),this._fileName,EntityAction.STAND)},t.prototype.playBody=function(e){this.substituteImg.visible=!1;var t=1;this._body.movieClipData.frames&&this._body.movieClipData.frames.length>0?this._body.gotoAndPlay(t,this.atkOne&&this.isAtkAction()?1:-1):this._body.play(-1)},t.prototype.resetStand=function(){this.atking=!1,this.playAction(EntityAction.STAND)},t.prototype.updateBlood=function(e){void 0===e&&(e=!1),this.infoModel&&(this.charMonsterBlood.m_HpBlood.maximum=this.infoModel.getAtt(AttributeType.atMaxHp),(e||!(EntityManager.ins().getTeamCount(Team.WillEntity)>0&&0==GameMap.fubenID))&&(this.charMonsterBlood.m_HpBlood.value=this.infoModel.getAtt(AttributeType.atHp)),0==this._infoModel.inRoleId?this.showBloodTime():this.charMonsterBlood.m_HpBlood.maximum==this.charMonsterBlood.m_HpBlood.value?this.hideBloodTime():this.saveHp!=this.charMonsterBlood.m_HpBlood.value&&(this.saveHp=this.charMonsterBlood.m_HpBlood.value,this.showBloodTime(),this.setBloodTime()))},Object.defineProperty(t.prototype,"isCanAddBlood",{get:function(){return this.charMonsterBlood.m_HpBlood.value/this.charMonsterBlood.m_HpBlood.maximum<.8},enumerable:!0,configurable:!0}),t.prototype.poisoning=function(e,t,i){var o=this.damageOverTimeList[e.group]||new egret.Timer(0,0);o.delay=e.interval,o.repeatCount=Math.floor(e.duration/e.interval),o.stop(),o.reset(),o.addEventListener(egret.TimerEvent.TIMER,this.damageOverTime,this),o.start(),i&&(this.aa=this.aa||new egret.ColorMatrixFilter,this.aa.matrix=i,this._body.filters=[this.aa]),this.damageOverTimeList[e.group]=o,this.damageOverTimeValueList[o.hashCode]=t},t.prototype.damageOverTime=function(e){var t=e instanceof egret.Timer?e:e.currentTarget;t.currentCount==t.repeatCount&&(this.deleteDamageOverTimer(t),this._body.filters=[])},t.prototype.deleteDamageOverTimer=function(e){for(var t in this.damageOverTimeList)this.damageOverTimeList[t]==e&&(delete this.damageOverTimeList[t],e.stop(),e.removeEventListener(egret.TimerEvent.TIMER,this.damageOverTime,this))},t.prototype.isMy=function(e){void 0===e&&(e=!0),this.charMonsterBlood.m_HpBlood.thumb.source=e?"boolGreen_png":"boolRed_png"},t.prototype.addEffect=function(e){var t=GlobalConfig.effectConfig[e];if(t){if(0==t.type||1==t.type){var i=ObjectPool.ins().pop("eui.Image");i.scaleX=i.scaleY=1,i.x=i.y=0,i.alpha=1,i.source=t.fileName,this.addChild(i),egret.Tween.removeTweens(i);var o=egret.Tween.get(i);return i.x=i.x-23,0==t.type?o.to({y:-100},2e3).call(function(){egret.Tween.removeTweens(i),DisplayUtils.removeFromParent(i)}):BloodView.TweenType1(o,0,-50),void o.call(function(){egret.Tween.removeTweens(i),DisplayUtils.removeFromParent(i),ObjectPool.ins().push(i)})}var s=this.effs[e]||new MovieClip;s.loadFile(t.fileName,!0),this.addChild(s),this.effs[e]=s}},t.prototype.removeEffect=function(e){var t=GlobalConfig.effectConfig[e];if(t&&0!=t.type){var i=this.effs[e];i&&(DisplayUtils.removeFromParent(i),delete this.effs[e])}},t.prototype.hasBuff=function(e){return this.buffList[e]?!0:!1},t.prototype.addBuff=function(e,t){void 0===t&&(t=0);var i=e.effConfig;if(null!=i&&void 0!=i){var o=i.group;if(o!=Const.zidanBuff||!this.buffList[o]&&!this.isZidanClear){this.buffList[o]&&this.removeBuff(this.buffList[o]),this.buffList[o]=e;if(GameMap.IsNoramlLevel()&&this.addEffect(i.id),i.effName){var s=this.buffEff[o]||new MovieClip;s.loadUrl(ResDataPath.GetSkillPath(i.effName),!0),this.buffScale||(SdkMgr.isWxGame()?this.buffScale=GlobalConfig.ins("UniversalConfig").buffRatewx:this.buffScale=GlobalConfig.ins("UniversalConfig").buffRate),s.scaleX=this.buffScale,s.scaleY=this.buffScale,this.parent&&this.addChild(s),this.buffEff[o]=s}i.type==SkillEffType.INVISIBLE?this._bodyContainer.alpha=0:(i.type==SkillEffType.GHOST||i.type==SkillEffType.BULLETTIME)&&!DeviceUtils.isIOS(),100001==e.effConfig.id&&GameGlobal.MessageCenter.dispatch(MessageDef.BOSS_TIME_HUDUN,e.effConfig.duration)}}},t.prototype.startCanYing=function(){var e=ObjectPool.ins().pop("GhostShadow");e.start(this)},t.prototype.removeBuff=function(e){var t=this,i=e.effConfig,o=i.group;this.buffList[o]==e&&((e.effConfig.type==SkillEffType.GHOST||e.effConfig.type==SkillEffType.BULLETTIME)&&(TimerManager.ins().remove(this.startCanYing,this),e.effConfig.type==SkillEffType.BULLETTIME&&(this.isZidanClear=!0,egret.setTimeout(function(){t.isZidanClear=!1},this,5e3))),this._bodyContainer.alpha=1,this.buffList[o].source=null,ObjectPool.ins().push(this.buffList[o]),this.buffEff[o]&&DisplayUtils.dispose(this.buffEff[o]),this.buffEff[o]=null,delete this.buffEff[o],delete this.buffList[o])},t.prototype.removeAllBuff=function(){for(var e in this.buffList)this.removeBuff(this.buffList[e]),this.buffList[e]=null;this.buffList={}},Object.defineProperty(t.prototype,"curPlayTime",{get:function(){return this._body.playTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"team",{get:function(){return this._infoModel?this._infoModel.team:Team.NotAtk},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"monsterType",{get:function(){return this._infoModel?this._infoModel.configType:null},enumerable:!0,configurable:!0}),t.prototype.setScale=function(e){},Object.defineProperty(t.prototype,"getBodyCon",{get:function(){return this._bodyContainer},enumerable:!0,configurable:!0}),t.prototype.getFootRingContainer=function(){return this.footRingContainer||(this.footRingContainer=new egret.DisplayObjectContainer,this.addChildAt(this.footRingContainer,0)),this.footRingContainer},t.prototype.deleteFootRingContainer=function(){this.footRingContainer&&(egret.Tween.removeTweens(this.footRingContainer),this.removeChild(this.footRingContainer),this.footRingContainer.removeChildren(),this.footRingContainer.visible=!1,this.footRingContainer=null)},t.prototype.setFootRing=function(e){if(e==t.FOOT_RING_TYPE_LEVEL_BOSS){var i=this.getFootRingContainer();i.removeChildren();var o=new eui.Image;i.addChild(o),o.y=-50,o.source=ResDataPath.GetAssets("ress/component/comp_203_104_1"),o.addEventListener(egret.Event.RESIZE,this.onRingResize,this),this.ringTween(this.footRingContainer)}},t.prototype.onRingResize=function(e){if(e&&e.currentTarget){var t=e.currentTarget;t.removeEventListener(egret.Event.RESIZE,this.onRingResize,this),t.x=-t.width>>1,t.y=-t.height>>1}},t.prototype.ringTween=function(e){if(egret.Tween.removeTweens(e),e){var t=egret.Tween.get(e);t&&t.to({scaleX:.8,scaleY:.8},1e3).to({scaleX:1,scaleY:1},1e3).call(this.ringTween,this,[e])}},t.FOOT_RING_TYPE_NONE=0,t.FOOT_RING_TYPE_LEVEL_BOSS=1,t}(egret.DisplayObjectContainer);__reflect(CharMonster.prototype,"CharMonster"),window.CharMonster=CharMonster;var ActivityModel=function(e){function t(){var t=e.call(this)||this;return t.palyEffList=[],t.rankInfoList=[],t.arrRank=[],t.activityData={},t.m_TempBtnList={},t.regNetMsg(S2cProtocol.sc_activity_init_info,t.doActivityData),t.regNetMsg(S2cProtocol.sc_activity_reward_result,t.doRewardResult),t.regNetMsg(S2cProtocol.sc_activity_dabiao_info,t.doDaBiaoInfo),t.regNetMsg(S2cProtocol.sc_activity_dabiao_reward,t.doDaBiaoRewardStatu),t.regNetMsg(S2cProtocol.sc_activity_update_info,t.doActivityUpdate),t.regNetMsg(S2cProtocol.sc_activityw_update_info,t._DoActivityWUpdate),t.regNetMsg(S2cProtocol.sc_activityw_dresshunt_ret,t._DoDressHunt),t.regNetMsg(S2cProtocol.sc_record_datas,t._DoRecordAll),t.regNetMsg(S2cProtocol.sc_record_add,t._DoRecord),t.regNetMsg(S2cProtocol.sc_luckypackage_res,t.luckypackage),t.regNetMsg(S2cProtocol.sc_luckypackage_active_res,t.luckypackageTips),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.Init=function(){},t.GetActivityData=function(e){for(var t=1;50>=t;++t){var i=e["type"+(10>t?"0"+t:t)];if(i)return i}for(var o=301;304>o;o++){var i=e["type"+o];if(i)return i}return null},t.prototype.doActivityData=function(e){for(var i=0,o=e.datas;i<o.length;i++){var s=o[i];if(s.type35&&s.type35 instanceof Sproto.activity_type35)WarOrderModel.getInstance.setData(s.type35);else{var n=t.GetActivityData(s);if(n){var r=n.baseData.id;if(this.activityData[r])this.activityData[r].UpdateBase(n.baseData),this.activityData[r].update(n),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_ACTIVITY_PANEL,r);else{var a=ActivityDataFactory.create(n);a&&(this.activityData[a.id]=a)}}}}GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_IS_AWARDS)},t.prototype.doRewardResult=function(e){var i=e.id;if(this.activityData[i]){var o=t.GetActivityData(e.data);this.activityData[i].UpdateBase(o.baseData),this.activityData[i].update(o),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_ACTIVITY_PANEL,i),GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_IS_AWARDS)}},t.prototype.SendGetHuntRecord=function(e){var t=new Sproto.cs_baserecord_info_request;t.type=e,this.Rpc(C2sProtocol.cs_baserecord_info,t)},t.prototype.SendLevelInfo=function(e){var t=new Sproto.cs_activity_send_level_info_request;t.activityID=e,this.Rpc(C2sProtocol.cs_activity_send_level_info,t)},t.prototype.sendReward=function(e,t){var i=new Sproto.cs_activity_send_reward_request;i.id=e,i.index=t,this.Rpc(C2sProtocol.cs_activity_send_reward,i)},t.prototype.doDaBiaoInfo=function(e){e.acId;this.isDaBiao=e.draw,this.indexCurrDabiao=e.index,this.myDabiaoInfo=e.value,this.rankInfoList=[];for(var t=0;e.rankInfo.length>t;t++){this.rankInfoList[t]||this.rankInfoList.push(new DabiaoRankData);var i=this.rankInfoList[t];i.prase(e.rankInfo[t],null)}GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY4_UPDATE)},t.prototype.sendDabiaoInfo=function(e){var t=new Sproto.cs_activity_send_dabiao_info_request;t.activityID=e,this.Rpc(C2sProtocol.cs_activity_send_dabiao_info,t)},t.prototype.doDaBiaoRewardStatu=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY4_IS_GET_AWARDS)},t.prototype.doActivityUpdate=function(e){var i=e.index;if(this.activityData[i]){var o=t.GetActivityData(e.data);this.activityData[i].UpdateBase(o.baseData),this.activityData[i].update(o),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_ACTIVITY_PANEL,i),GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_IS_AWARDS)}},t.prototype._DoActivityWUpdate=function(e){var t=e.baseData.id;if(this.activityData[t]){var i=this.activityData[t];i.UpdateBase(e.baseData),1==i.openState&&i.update(e)}else{var o=ActivityDataFactory.create(e);o&&(this.activityData[o.id]=o)}GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_ACTIVITY_PANEL,t),GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_IS_AWARDS)},t.prototype._DoDressHunt=function(e){for(var t=[],i=0,o=e.items.length;o>i;i++)t[i]=[e.items[i].id,e.items[i].count];ViewManager.ins().open(ActivityType2003ResultPanel,e.type,t)},t.prototype._DoRecordAll=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_HUNT_INIT_RECORD,e.type,e.record)},t.prototype._DoRecord=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_HUNT_ADD_RECORD,e.type,e.record)},t.prototype.getbtnInfo=function(e){var t=this.m_TempBtnList[e];return t||(null==this.activityBtnConfig&&(this.activityBtnConfig=GlobalConfig.ins("ActivityBtnConfig")),t=this.activityBtnConfig[e],t||("20"==e?t={id:20,icon:"act_5",type:1,acTime:"",acDesc:"",light:1,onPlace:0}:(null==this.activitySumBtnConfig&&(this.activitySumBtnConfig=GlobalConfig.ins("ActivitySumBtnConfig")),t=this.activitySumBtnConfig[e])),t||(null==this.activityBtnAConfig&&(this.activityBtnAConfig=GlobalConfig.ins("ActivityBtnAConfig")),t=this.activityBtnAConfig[e]),t&&(this.m_TempBtnList[e]=t)),t?t:null},t.prototype.getbtnListByType=function(e){void 0===e&&(e=0);var i=[];for(var o in this.activityData){var s=this.activityData[o];if(5!=s.type&&this.IsOpen(s)){var n=this.getbtnInfo(o);n&&n.onPlace==e&&(n.actType=s.type,i.push(n))}}return e==t.BTN_TYPE_00&&(ActivityGuildWinnerPanel.IsShowAct()&&i.push(t.CUS_ACT_4),Recharge.ins().rechargeData[1].day<=Recharge.ins().getChongZhi2ConfigDay()&&i.push(t.CUS_ACT_1),i.push(t.CUS_ACT_2),EggBroken.IsOpen()&&i.push(t.CUS_ACT_3)),i.length>0&&e==t.BTN_TYPE_04&&i.push(t.CUS_ACT_4),i.length>0&&e==t.BTN_TYPE_01&&i.push(t.CUS_ACT_5),i},t.prototype.getTargetKFActivity=function(){var e=[],i=t.BTN_TYPE_01;for(var o in this.activityData){var s=this.activityData[o];if(this.IsOpen(s)){var n=this.getbtnInfo(o);n&&n.onPlace==i&&(n.actType=s.type,e.push(n))}}return e.sort(function(e,t){return e.type>t.type?1:e.type<t.type?-1:0}),e},t.prototype.IsOpen=function(e){return null==e?!1:e.isOpenActivity()&&1==e.openState?!0:!1},t.prototype.checkAcCanGet=function(e){var t=this.activityData;for(var i in t)if(i==e&&t[i].isOpenActivity()&&t[i].canReward())return!0;return!1},t.prototype.checkOtherCharge2CanGet=function(){var e=GameGlobal.rechargeData[1],t=Recharge.ins().GetConfig2();for(var i in t)if(!BitUtil.Has(e.isAwards,t[i].index)&&e.num>=t[i].pay)return!0;return!1},t.prototype.getisCangetDabiao=function(e){for(var t=1;t<=this.indexCurrDabiao;++t)if(!BitUtil.Has(this.isDaBiao,t))return!0;return!1},t.prototype.GetActivityDataById=function(e){return this.activityData[e]},t.prototype.GetActivityDataByType=function(e){for(var t in this.activityData){var i=this.activityData[t];if(e==i.type)return i}return null},t.SendLevelInfo=function(){var e=t.ins().GetActivityDataByType(1);e&&t.ins().SendLevelInfo(e.id)},t.GetCusActData=function(e){for(var t=0;t<this.CUS_ACT_LIST.length;++t)if(this.CUS_ACT_LIST[t].id==e)return this.CUS_ACT_LIST[t];return null},t.GetActivityConfig=function(e){var t=GlobalConfig.ins("ActivityConfig")[e];return t||(t=GlobalConfig.ins("ActivitySumConfig")[e]),t||(t=GlobalConfig.ins("ActivityAConfig")[e]),t},t.prototype.checkMonthSingRedPoint=function(){var e=GameGlobal.activityData[201];return e&&0==e.todaySigan?!0:!1},t.prototype.luckypackage=function(e){e.datas&&(LuckGiftBagModel.getInstance.setLuckGiftData(e.datas),GameGlobal.MessageCenter.dispatch(MessageDef.LUCKGIFTBAG_DATA_UPDATE))},t.prototype.luckypackageTips=function(e){var t=e.id;ViewManager.ins().open(LuckGiftTips,[t])},t.prototype.luckypackagebuy=function(e){var t=new Sproto.cs_luckypackage_testbuy_req_request;t.id=e,this.Rpc(C2sProtocol.cs_luckypackage_testbuy_req,t)},t.BTN_TYPE_00=0,t.BTN_TYPE_01=1,t.BTN_TYPE_02=2,t.BTN_TYPE_03=3,t.BTN_TYPE_04=4,t.BTN_TYPE_05=5,t.TYPE_01=1,t.TYPE_02=2,t.TYPE_04=4,t.TYPE_03=3,t.TYPE_05=5,t.TYPE_07=7,t.TYPE_302=302,t.CUS_ACT_1={id:20001,icon:"ui_ljcz_icon",type:20001,actType:20001,acTime:"",acDesc:"每日累充",light:1,onPlace:0,canReward:function(){return t.ins().checkOtherCharge2CanGet()}},t.CUS_ACT_2={id:20002,icon:"ui_lchl_icon",type:20002,actType:20002,acTime:"",acDesc:"充值返利",light:1,onPlace:0,canReward:function(){return MoneyTreeModel.HasRechargeGift()}},t.CUS_ACT_3={id:-1001,icon:"ui_zjd_icon_jd",type:-1001,actType:-1001,acTime:"",acDesc:"砸金蛋",light:1,onPlace:0,canReward:function(){return EggBroken.ins().HasAward()}},t.CUS_ACT_4={id:-1e3,icon:"ui_scbz_icon",type:-1e3,actType:-1e3,acTime:"",acDesc:"遗迹争霸",light:1,onPlace:0,canReward:function(){return GuildReward.ins().GetFirstRewardState()==RewardState.CanGet}},t.CUS_ACT_5={id:-1002,icon:"",type:2,actType:-1002,acTime:"",acDesc:"每日目标",light:1,onPlace:t.BTN_TYPE_01,canReward:function(){return!1}},t.CUS_ACT_LIST=[t.CUS_ACT_1,t.CUS_ACT_2,t.CUS_ACT_3,t.CUS_ACT_4,t.CUS_ACT_5],t}(BaseSystem);__reflect(ActivityModel.prototype,"ActivityModel");var ActBtnData=function(){function e(){}return e}();__reflect(ActBtnData.prototype,"ActBtnData"),window.ActivityModel=ActivityModel,window.ActBtnData=ActBtnData;var BaseComponent=function(e){function t(){var t=e.call(this)||this;return t.className="组件必须填写逻辑类名",t.initFinish=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);try{if(!this.mCustomObject){var t=egret.getDefinitionByName(this.className),i=new t;if(null!=i)for(var o in i)("open"==o||"close"==o||null==this[o]&&"data"!=o)&&(this[o]=i[o])}this.init&&!this.initFinish&&(this.init(),this.initFinish=!0)}catch(s){null!=this.className&&console.log("未实现的类 "+this.className),console.log(s),console.log("错误className为空：<ns1:"+egret.getQualifiedClassName(this))}},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"data"),this.dataChanged&&this.dataChanged()},enumerable:!0,configurable:!0}),t.prototype.tostring=function(){return"[BaseComponent] "+this.className},t}(BaseView);__reflect(BaseComponent.prototype,"BaseComponent"),window.BaseComponent=BaseComponent;var ActivityType2Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buyData=[0,0,0,0],t}return __extends(t,e),t.prototype.update=function(e){this.buyData=[];for(var t=e.buyData.length,i=0;t>i;i++)this.buyData.push(e.buyData[i]);MessageCenter.ins().dispatch(MessageDef.UPDATE_ACTIVITY2_MSG)},t.prototype.canReward=function(){return this.isOpenActivity()&&this.IsRedpointType2()},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.GetConfigData=function(){return t.GetConfig(this.id)},t.prototype.IsRedpointType2=function(){var e=!1,t=this.GetConfigData();try{for(var i=0;i<t.length&&!(e=this.IsRedpointType2Item(i));i++);}catch(o){egret.log("获取限购可购布尔值报错！"),egret.warn(o)}return e},t.prototype.IsRedpointType2Item=function(e){var t=!1;try{var i=this.GetConfigData(),o=i[e],s=this.buyData[e]||0,n=1==o.currencyType?GameGlobal.actorModel.gold:GameGlobal.actorModel.yb,r=1==o.currencyType,a=parseInt(n+"")>=o.price,l=s>0;UserVip.ins().lv>=o.vip&&r&&a&&l&&(t=!0)}catch(h){egret.log("获取限购可购布尔值报错！"),egret.warn(h)}return t},t.GetConfig=function(e){var t=GlobalConfig.ins("ActivityType9Config")[e];return t||(t=GlobalConfig.ins("ActivityType2Config")[e]),t||(t=GlobalConfig.ins("ActivityType2AConfig")[e]),t},t}(ActivityBaseData);__reflect(ActivityType2Data.prototype,"ActivityType2Data"),window.ActivityType2Data=ActivityType2Data;var ActivityPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"activityID",{get:function(){return this._activityID},set:function(e){this._activityID=e;var t=ActivityModel.GetActivityConfig(e);this.name=t.tabName},enumerable:!0,configurable:!0}),t.create=function(e){var t=ActivityModel.GetActivityConfig(e),i=t.activityType;
9==i&&(i=2);var o;return o=17==e?ObjectPool.ins().pop("HfActivityType3Panel"):21==i||22==i?ObjectPool.ins().pop("ActivityType21Panel"):ObjectPool.ins().pop("ActivityType"+i+"Panel"),o.activityID=e,o.initUI(),o},t.prototype.initUI=function(){},t.prototype.updateData=function(){},t.prototype.GetActData=function(){return ActivityModel.ins().GetActivityDataById(this.activityID)},t}(BaseEuiPanel);__reflect(ActivityPanel.prototype,"ActivityPanel"),window.ActivityPanel=ActivityPanel;var ActivityWin=function(e){function t(){var t=e.call(this)||this;return t.type=0,t.activityPanelList=[],t}return __extends(t,e),t.prototype._InitUI=function(){this.commonWindowBg.helpBtn.visible=!1,this.menuList.itemRenderer=ActivityBtnRenderer,this.commonWindowBg.tabBar.visible=!1,this.commonWindowBg.closeBtn.visible=!1,this.commonWindowBg.returnBtn.visible=!1,this.commonWindowBg.imgNav.visible=!1,this.menuScroller.horizontalScrollBar.autoVisibility=!1,this.menuScroller.horizontalScrollBar.visible=!1,this.commonWindowBg.nameIcon.text=GlobalConfig.jifengTiaoyueLg.st101273},t.prototype.changeSkinByType=function(e){switch(this.type){case 0:this.skinName="ActivityWinSkin"}},t.prototype._UpdateTitleImg=function(){},t.prototype._SetActWinType=function(e){this.type=null==e?0:e},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=void 0==e[0]?0:e[0],o=e[2];this._SetActWinType(e[1]),this.changeSkinByType(this.type),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101274,this._UpdateTitleImg(),this._InitUI(),this.updateView(i,o),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.closeBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.menuList.addEventListener(egret.Event.CHANGE,this.onClickMenu,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.updatePanel,this),GameGlobal.MessageCenter.addListener(MessageDef.ACTIVITY_IS_AWARDS,this.refushRedPoint,this),GameGlobal.MessageCenter.addListener(MessageDef.MONEY_RECHARGE_GIFT_CHANGE,this.refushRedPoint,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_RECHARGE,this.refushRedPoint,this),GameGlobal.MessageCenter.addListener(MessageDef.ACTIVITY4_UPDATE,this.refushRedPoint,this),this.menuScroller.addEventListener(egret.Event.CHANGE,this.onChange,this)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.closeBtn0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.menuList.removeEventListener(egret.Event.CHANGE,this.onClickMenu,this),GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.updatePanel,this),GameGlobal.MessageCenter.removeListener(MessageDef.ACTIVITY_IS_AWARDS,this.refushRedPoint,this),GameGlobal.MessageCenter.removeListener(MessageDef.MONEY_RECHARGE_GIFT_CHANGE,this.refushRedPoint,this),GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_RECHARGE,this.refushRedPoint,this),GameGlobal.MessageCenter.removeListener(MessageDef.ACTIVITY4_UPDATE,this.refushRedPoint,this),this.menuScroller.removeEventListener(egret.Event.CHANGE,this.onChange,this),TimerManager.ins().removeAll(this);for(var i=0;i<this.activityPanelList.length;i++)this.activityPanelList[i].close()},t.prototype.refushRedPoint=function(){this.dataArr.replaceAll(this._datas),this.menuList.dataProvider=this.dataArr},t.prototype.updateView=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=null),this.viewStack&&this.viewStack.numElements)for(var i=0;i<this.viewStack.numElements;i++)ObjectPool.ins().push(this.viewStack.getElementAt(i));this.viewStack.removeChildren(),this.activityPanelList=[];var o=0;this._datas=GameGlobal.activityModel.getbtnListByType(this.type),this._datas.sort(this.sort);for(var s=0;s<this._datas.length;++s){var n=this._datas[s];if(n.id==ActivityModel.CUS_ACT_4.id){this._datas.splice(s,1),this._datas.push(n);break}}var r=0;for(var a in this._datas){var l=this._datas[a].id,h=void 0;if(l==ActivityModel.CUS_ACT_1.id){var c=new Recharge3Win;h=ActivityModel.CUS_ACT_1.type,c.activityID=l,this.activityPanelList[o]=c}else if(l==ActivityModel.CUS_ACT_2.id){var c=new RechargeGiftPanel;h=ActivityModel.CUS_ACT_2.type,c.activityID=l,this.activityPanelList[o]=c}else if(l==ActivityModel.CUS_ACT_3.id){var c=new EggBrokenPanel;h=ActivityModel.CUS_ACT_3.type,c.activityID=l,this.activityPanelList[o]=c}else if(l==ActivityModel.CUS_ACT_4.id){var c=new ActivityGuildWinnerPanel;h=ActivityModel.CUS_ACT_4.type,c.activityID=l,this.activityPanelList[o]=c}else if(l==ActivityModel.CUS_ACT_5.id){var c=new DayTargetPanel;h=ActivityModel.CUS_ACT_5.type,c.activityID=l,this.activityPanelList[o]=c}else h=this._datas[a].actType,this.activityPanelList[o]=ActivityPanel.create(l);h==e&&(e==ActivityModel.TYPE_02?ActivityType2Panel.IsGift(l)&&(r=o):r=o),this.viewStack.addChild(this.activityPanelList[o]),o++}this.dataArr=new eui.ArrayCollection(this._datas),this.menuList.dataProvider=this.dataArr,this.onChange(),this.viewStack.numElements>0&&this.setOpenIndex(r,t)},t.prototype.updatePanel=function(e){for(var t in this.activityPanelList)this.activityPanelList[t].activityID==e&&this.activityPanelList[t]&&this.activityPanelList[t].updateData&&this.activityPanelList[t].updateData();this.refushRedPoint()},t.prototype.onClick=function(e){switch(e.currentTarget){case this.closeBtn:case this.closeBtn0:ViewManager.ins().close(this)}},t.prototype.setOpenIndex=function(e,t){void 0===t&&(t=null);for(var i=this.activityPanelList[e],o=0;o<this.activityPanelList.length;o++){var s=this.activityPanelList[o];s instanceof ActivityType31Panel&&i!=s&&s.close()}this.descGrop&&(this.descGrop.visible=!0,(8==i.activityID||20001==i.activityID||20002==i.activityID||-1e3==i.activityID)&&(this.descGrop.visible=!1));var n=i.activityID;i.open(t),this.viewStack.selectedIndex=e,this.menuList.selectedIndex=e,GameGlobal.activityModel.palyEffList[n]=!0,this.refushRedPoint();var r,a=null;if(i.GetActivityTimeAndDes&&(c=i.GetActivityTimeAndDes(),r=c[0],a=c[1]),null==r){var l=GameGlobal.activityData[n];l&&(r=l.getRemindTimeString(),a=ActivityModel.GetActivityConfig(n).desc)}var h=ActivityModel.GetActivityConfig(n);!r||ActivityWinSummer.onPlace==ActivityModel.BTN_TYPE_04||h&&12==h.activityType?this.activityGroup.visible=!1:(this.activityGroup.visible=!0,this.date.text=GlobalConfig.jifengTiaoyueLg.st100025+r,this.desc.text=a),r&&303!=h.activityType||(this.activityGroup.visible=!1,MessageCenter.ins().dispatch(MessageDef.UPDATE_ACTIVITY303_PANEL)),h&&31==h.activityType&&(this.activityGroup.visible=!1);var c},t.prototype.onClickMenu=function(e){this.setOpenIndex(e.currentTarget.selectedIndex)},t.prototype.onChange=function(){this.menuScroller&&(this.m_RightBtnRedPoint.visible=this.dataArr.length>4,0!=this.m_RightBtnRedPoint.visible&&(this.menuScroller&&this.menuScroller.viewport&&0==this.menuScroller.viewport.scrollH?this.m_RightBtnRedPoint.source="cycle_btn_01_01_png":this.menuScroller&&this.menuScroller.viewport&&this.menuScroller.viewport.scrollH==this.menuScroller.viewport.contentWidth-this.menuScroller.width&&(this.m_RightBtnRedPoint.source="cycle_btn_01_02_png")))},t.prototype.sort=function(e,t){return e.type>t.type?1:e.type<t.type?-1:0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(ActivityWin.prototype,"ActivityWin",["ICommonWindow"]),window.ActivityWin=ActivityWin;var ChaosBattleLayerItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="MountLvUpAwardItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_GetBtn.label=GlobalConfig.jifengTiaoyueLg.st101076,this.m_GetTxt.text=GlobalConfig.jifengTiaoyueLg.st100680,this.m_ItemList.itemRenderer=ItemBase,this.listData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.listData,this.m_GetBtn.visible=!1,this.m_GetTxt.visible=!1,this.m_GetImg.visible=!1},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=GlobalConfig.ins("CompetitionStageAward")[this.itemIndex+1];t&&(this.listData.removeAll(),this.listData.replaceAll(t.award),this.listData.refresh(),this.m_Cont.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102021,[t.id]))},t}(eui.ItemRenderer);__reflect(ChaosBattleLayerItem.prototype,"ChaosBattleLayerItem"),window.ChaosBattleLayerItem=ChaosBattleLayerItem;var BaseChatPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.defaultText=GlobalConfig.jifengTiaoyueLg.st101711,this.chatInput&&(this.chatInput.maxChars=40)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._selectIndex=e[0],this.addEvent(egret.FocusEvent.FOCUS_IN,this.textFocusIn,this,this.chatInput),this.addEvent(eui.CollectionEvent.COLLECTION_CHANGE,this.collectionChange,this,this.chatList.dataProvider),this.addTouchEvent(this,this.onTap,this.sendBtn),this.addItemTapEvent(this,this.onTapChatList,this.chatList),this.observe(Chat.ins().postSendInfoSuccess,this.textInOn),this.refresh()},t.prototype.close=function(){},t.prototype.release=function(){this.removeObserve(),this.barList.stopAnimation()},t.prototype.onTapChatList=function(e){},t.prototype.textInOn=function(){this.chatInput&&(this.chatInput.text="")},t.prototype.textFocusIn=function(){this.chatInput&&GlobalConfig.jifengTiaoyueLg.st101405==this.chatInput.text&&(this.chatInput.text="")},t.prototype.onTap=function(e){var i=this;t.Send(this._selectIndex,this.chatInput.text,function(){i.textInOn()})},t.Send=function(e,t,i){void 0===i&&(i=null);var o=Chat.ins().speakState(e),s=function(){return t.length<1||GlobalConfig.jifengTiaoyueLg.st101405==t?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101400):(2==e?(Guild.ins().sendGuildMessage(t),Chat.ins().startupSpeakTime(e)):(Chat.ins().checkRepeatString(t)&&(1==e?Chat.ins().sendChatInfo(8,t,0,o>0):Chat.ins().sendChatInfo(7,t,0,o>0)),Chat.ins().UpSpeak=t,Chat.ins().startupSpeakTime(e)),void(i&&i()))};return 0>o?void UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101712,[Math.abs(o)])):void(o>0?0==e?Chat.ins().isNoShowTipsPanel||ViewManager.ins().open(ChatTipsWin,o,s):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101713):s())},t.prototype.collectionChange=function(e){this.refresh()},t.prototype.refresh=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.refushBarList,this)},t.prototype.refushBarList=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.refushBarList,this),this.barList&&this.barList.viewport&&this.barList.viewport.contentHeight>this.barList.height&&(this.barList.viewport.scrollV=this.barList.viewport.contentHeight-this.barList.height)},t}(BaseView);__reflect(BaseChatPanel.prototype,"BaseChatPanel"),window.BaseChatPanel=BaseChatPanel;var EquipPos;!function(e){e[e.WEAPON=0]="WEAPON",e[e.HEAD=1]="HEAD",e[e.CLOTHES=2]="CLOTHES",e[e.NECKLACE=3]="NECKLACE",e[e.BRACELET1=4]="BRACELET1",e[e.BRACELET2=5]="BRACELET2",e[e.RING1=6]="RING1",e[e.RING2=7]="RING2",e[e.MAX=8]="MAX",e[e.SHOULDER=8]="SHOULDER",e[e.UNDERCLOTHES=9]="UNDERCLOTHES",e[e.ASSISTANT=10]="ASSISTANT",e[e.BELT=11]="BELT",e[e.KNEE=12]="KNEE",e[e.PENDANT=13]="PENDANT"}(EquipPos||(EquipPos={}));var EquipType;!function(e){e[e.WEAPON=0]="WEAPON",e[e.HEAD=1]="HEAD",e[e.CLOTHES=2]="CLOTHES",e[e.NECKLACE=3]="NECKLACE",e[e.BRACELET=4]="BRACELET",e[e.RING=5]="RING",e[e.SHOULDER=6]="SHOULDER",e[e.UNDERCLOTHES=7]="UNDERCLOTHES",e[e.ASSISTANT=8]="ASSISTANT",e[e.BELT=9]="BELT",e[e.KNEE=10]="KNEE",e[e.PENDANT=11]="PENDANT"}(EquipType||(EquipType={}));var ForgeBasePanel=function(e){function t(){var t=e.call(this)||this;return t.pos=0,t.lv=0,t.itemNum=0,t.cost=0,t.mForgeType=0,t.windowTitleIconName="",t}return __extends(t,e),t.prototype.SetComp=function(e,t,i,o,s,n,r,a){this.powerLabel=e,this.consumeLabel=t,this.upGradeBtn=i,this.btnAutoUp=o,this.maxLvTF=s,this.getItem=n,this.group=r,this.m_AutoBuy=a},t.prototype.setPower=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()),t=e.getForgeTotalPower(this.mForgeType);this.powerLabel.text=t},t.prototype.Init=function(){},t.prototype.open=function(){this.maxLvTF.visible=!0,this.group.visible=!0,this.powerLabel.visible=!0,this.upGradeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.btnAutoUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAutoUpClick,this),this.getItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetWay,this),this.observe(UserBag.postItemChange,this.setCount),this.observe(UserBag.postItemAdd,this.setCount),this.observe(GameLogic.ins().postSoulChange,this.setCount),this.checkAttr.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCheckAttr,this),this.AddClick(this.m_DashiBtn,this.onClickDaShi)},t.prototype.close=function(){this.upGradeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.btnAutoUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAutoUpClick,this),this.getItem.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetWay,this),this.checkAttr.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickCheckAttr,this),this.clear()},t.prototype.UpdateContent=function(){this.Init();var e=this.m_RoleSelectPanel.getCurRole();null!=this.saveCurRole&&this.saveCurRole!=e&&this.stopAutoUp(),this.saveCurRole=e;var t=SubRoles.ins().getSubRoleByIndex(e),i=t.getMinEquipIndexByType(this.mForgeType);this.pos=i,this.lv=t.GetEquipLevelByType(this.pos,this.mForgeType),this.config=UserForge.ins().getForgeConfigByPos(this.pos,this.lv,this.mForgeType),this.nextConfig=UserForge.ins().getForgeConfigByPos(this.pos,this.lv+1,this.mForgeType),this.setPower(),this.nextConfig?(this.setCount(),this.btnAutoUp.visible=!0,this.upGradeBtn.visible=!0,this.consumeLabel.visible=!0,this.maxLvTF.visible=!1):(this.upGradeBtn.visible=!1,this.consumeLabel.visible=!1,this.maxLvTF.visible=!0,this.btnAutoUp.visible=!1),this.setAttrData(this.config,this.nextConfig)},t.prototype.playEffectPic=function(e,t){if(-1!=[0].indexOf(e)){this.m_RoleSelectPanel.getCurRole();for(var i=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()),o=i.getMinEquipIndexByType(e),s=0;8>s;s++){var n=!1;o==s&&(n=!0),t["imgPart"+s].visible=n}}},t.prototype.setCount=function(){this.SetItemCount(),this.consumeLabel.consumeValue=this.cost,this.consumeLabel.curValue=this.itemNum},t.prototype.SetItemCount=function(){},t.prototype.curRole=function(){return this.m_RoleSelectPanel.getCurRole()},t.prototype.setAttrData=function(e,t){},t.prototype.onTouch=function(){},t.prototype.onGetWay=function(){},t.prototype.moveAttr=function(){},t.prototype.btnAutoUpClick=function(){},t.prototype.clear=function(){},t.prototype.onClickCheckAttr=function(){},t.prototype.stopAutoUp=function(){},t.prototype.onClickDaShi=function(){},t}(BaseView);__reflect(ForgeBasePanel.prototype,"ForgeBasePanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]);var ForgeType;!function(e){e[e.TYPE0=0]="TYPE0",e[e.TYPE1=1]="TYPE1",e[e.TYPE2=2]="TYPE2"}(ForgeType||(ForgeType={})),window.ForgeBasePanel=ForgeBasePanel;var FuliActBtnRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActBtnSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.activityName.text=this.data.desc,this.UpdateRedPoint()},t.prototype.UpdateRedPoint=function(){if(null!=this.$stage&&null!=this.redPoint){var e=!1;switch(this.data.type){case 2:e=MoneyTreeModel.ins().isHaveReward();break;case 3:e=!1;break;case 4:e=Recharge.ins().HasMonthCardReward();break;case 6:e=MoneyTreeModel.HasRechargeGift();break;case 7:e=FindAssetsModel.ins().HasFindAssets();break;case 8:e=ActivityModel.ins().checkOtherCharge2CanGet();break;case 9:e=DayLoginIconRule.ShowRedPoint();break;case 11:e=ActivityModel.ins().checkMonthSingRedPoint()}this.redPoint.visible=e}},t}(eui.ItemRenderer);__reflect(FuliActBtnRenderer.prototype,"FuliActBtnRenderer"),window.FuliActBtnRenderer=FuliActBtnRenderer;var RechargeGiftPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="AchieveSkin",t.listTop.itemRenderer=RechargeGiftPanelItem,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101993;for(var t=GlobalConfig.ins("RechargeGiftPoolConfig"),i=[],o=[],s=1;6>s;s++)i.push(t[s].id);for(var s=6;10>s;s++)o.push(t[s].id);this.m_ItemList1.dataProvider=new eui.ArrayCollection(i),this.m_ItemList2.dataProvider=new eui.ArrayCollection(o)},t.prototype.updateData=function(){},t.prototype.open=function(e){this.updateView(),GameGlobal.MessageCenter.addListener(MessageDef.MONEY_RECHARGE_GIFT_CHANGE,this.updateView,this)},t.prototype.close=function(){GameGlobal.MessageCenter.removeListener(MessageDef.MONEY_RECHARGE_GIFT_CHANGE,this.updateView,this)},t.prototype.onChange=function(){this.updateTopList()},t.prototype.updateView=function(){this.updateTopList()},t.prototype.updateTopList=function(){var e=GlobalConfig.ins("RechargeGiftConfig"),t=[];for(var i in e)t.push(e[i]);var o=MoneyTreeModel.ins(),s=function(e){return e==RewardState.CanGet?0:e==RewardState.Gotten?3:e==RewardState.NotReached?1:e==RewardState.Undo?2:3};t.sort(function(e,t){var i=s(o.GetRechargeGiftState(e.index)),n=s(o.GetRechargeGiftState(t.index));return i==n?e.index-t.index:i-n}),this.listTop.dataProvider=new eui.ArrayCollection(t)},t}(eui.Component);__reflect(RechargeGiftPanel.prototype,"RechargeGiftPanel");var RechargeGiftPanelItem=function(e){function t(){var t=e.call(this)||this;return t.m_Award=[],t._SetSkin(),t}return __extends(t,e),t.prototype._SetSkin=function(){this.skinName="AchieveItemSkin",this.labelUndo.text=GlobalConfig.jifengTiaoyueLg.st100680,this.btnGet.label=GlobalConfig.jifengTiaoyueLg.st101076,this.labelGo.text=GlobalConfig.jifengTiaoyueLg.st101077},t.prototype.childrenCreated=function(){this.labelGo.name="go",UIHelper.SetLinkStyleLabel(this.labelGo),this.btnGet.name="get",this.list.itemRenderer=ItemBaseEffe,this.labelGo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)},t.prototype.OnClick=function(e){switch(e.currentTarget){case this.labelGo:this.OnClickClose(),ViewManager.ins().open(ChargeFirstWin);break;case this.btnGet:for(var t=0,i=0,o=this.m_Award;i<o.length;i++){var s=o[i];2==s.type&&(t+=s.count)}if(UserBag.ins().getSurplusCount()<t){var n=GlobalConfig.jifengTiaoyueLg.st101072;UserTips.ins().showTips(n);break}this.OnGetAward(e)}},t.prototype.OnClickClose=function(){ViewManager.ins().close(FuliWin)},t.prototype.OnGetAward=function(e){var t=e.target.parent.data;MoneyTreeModel.ins().GetRechargeGift(t.index)},t.prototype.dataChanged=function(){var e=this.data;if(!ErrorLog.Assert(e,"AchievementTaskConfig no such id:"+e.index)){var t=e.desc;this.labelInfo.textFlow=TextFlowMaker.generateTextFlow1(t);var i=null;i=e&&e.awardList?e.awardList:[],this.m_Award=i,this.list.dataProvider=new eui.ArrayCollection(i),this.currentState=""+MoneyTreeModel.ins().GetRechargeGiftState(e.index)}},t}(eui.ItemRenderer);__reflect(RechargeGiftPanelItem.prototype,"RechargeGiftPanelItem"),window.RechargeGiftPanel=RechargeGiftPanel,window.RechargeGiftPanelItem=RechargeGiftPanelItem;var Guild=function(e){function t(){var t=e.call(this)||this;t.guildListInfos=[],t._guildMembers=[],t.applyGuilds=[],t.applyPlayers=[],t._guillRoleSkillInfo=[],t._memberSortType=0,t.pageMax=1,t._hasApply=!1,t.attrLimit=1e5,t._conCount=[],t._buildingLevels=[],t.money=0,t.guildTaskInfos=[],t.myCon=0,t.myTotalCon=0,t.records=[],t.sysId=PackageID.Guild,t.regNetMsg(S2cProtocol.sc_guild_info,t.postGuildInfo),t.regNetMsg(S2cProtocol.sc_guild_members,t.doGuildMembers),t.regNetMsg(S2cProtocol.sc_guild_list,t.postGuildList),t.regNetMsg(S2cProtocol.sc_guild_create_ret,t.doGuildCreate),t.regNetMsg(S2cProtocol.sc_guild_join_info,t.doJoinGuild),t.regNetMsg(S2cProtocol.sc_guild_apply,t.doApplyInfos),t.regNetMsg(S2cProtocol.sc_guild_notice_apply,t.doProcessJoin),t.regNetMsg(S2cProtocol.sc_guild_change_office_ret,t.doChangeOffice),t.regNetMsg(S2cProtocol.sc_guild_kick_ret,t.doQuitGuild),t.regNetMsg(S2cProtocol.sc_guild_fund,t.postGuildMoney),t.regNetMsg(S2cProtocol.sc_guild_change_notice_ret,t.postChangeNotice),t.regNetMsg(S2cProtocol.sc_guild_skillinfo,t.doGuildSkillInfo),t.regNetMsg(S2cProtocol.sc_guild_learnskill_ret,t.doLearnGuildSkill),t.regNetMsg(S2cProtocol.sc_guild_upbuilding_ret,t.postUpBuilding),t.regNetMsg(S2cProtocol.sc_guild_temperskill_ret,t.doPracticeGuildSkill),t.regNetMsg(S2cProtocol.sc_guild_taskinfo,t.doGuildTaskInfos),t.regNetMsg(S2cProtocol.sc_guild_onetask,t.doGuildTaskUpdate),t.regNetMsg(S2cProtocol.sc_guild_history,t.postManageList),t.regNetMsg(S2cProtocol.sc_guild_addhistory,t.doManage),t.regNetMsg(S2cProtocol.sc_guild_concount,t.postConCount),t.regNetMsg(S2cProtocol.sc_guild_playerinfo,t.doMyGuildInfo),t.regNetMsg(S2cProtocol.sc_guild_broadcastchat,t.doGuildMessage),t.regNetMsg(S2cProtocol.sc_guild_allchat,t.postAllGuildMessage),t.regNetMsg(S2cProtocol.sc_guild_autoadd_ret,t.doAddGuildlimit);for(var i=0;i<SubRoles.MAX_COUNT;++i){for(var o=new GuildRoleSkillInfo,s=0;3>s;++s){var n=new GuildSkillInfo;n.level=0,o.guildSkillInfo.push(n)}for(var r=0;2>r;++r){var n=new GuildSkillInfo;n.level=0,n.exp=0,o.practiceSkillInfo.push(n)}t._guillRoleSkillInfo.push(o)}for(var i=0;i<GuildBuilding.MAX-1;++i)t._buildingLevels[i]=0;return t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getSkllInfoByIndex=function(e){return this._guillRoleSkillInfo[e]},t.prototype.getGuildMembersByIndex=function(e){return this._guildMembers[e]},t.prototype.getGuildTaskInfosByIndex=function(e){return this.guildTaskInfos[e]},t.prototype.getBuildingLevels=function(e){return void 0===e&&(e=-1),-1==e?this._buildingLevels:this._buildingLevels[e]},t.prototype.GetBuildingLevel=function(e){return this._buildingLevels[e]||0},t.prototype.SetBuildingLevel=function(e,t){var i=this._buildingLevels[e];i?this._buildingLevels[e]=Math.max(i,t):this._buildingLevels[e]=t},t.prototype.sendGuildInfo=function(){GameSocket.ins().Rpc(C2sProtocol.cs_guild_getinfo)},t.prototype.postGuildInfo=function(e){if(0!=e.id){this.guildID=e.id,this.guildName=e.name;for(var i=e.variable.building.length,o=0;i>o;o++)this._buildingLevels[o]=e.variable.building[o]||0;this.money=e.variable.fund,this.notice=e.variable.notice,this.doAddGuildlimit(e.variable),this.guildLv=this._buildingLevels[0],t.ins().sendGuildMembers()}},t.prototype.sendGuildMembers=function(){GameSocket.ins().Rpc(C2sProtocol.cs_guild_getmembers)},t.prototype.doGuildMembers=function(e){var t,i=e.members.length;this._guildMembers=[];for(var o=0;i>o;o++){t=new GuildMemberInfo;var s=e.members[o];t.roleID=s.actorid,t.name=s.actorname,t.office=s.office,t.job=s.job,t.sex=s.sex,t.vipLevel=s.vip_level,t.monthCard=s.monthcard,t.superMonthCard=s.monthcard_super,t.contribution=s.contribute,t.curContribution=s.todayContri||0,t.attack=s.power,t.downTime=s.logouttime,this._guildMembers.push(t)}this._guildMembers.sort(this.memberSortFunc),this.postGuildMembers()},t.prototype.postGuildMembers=function(){},t.prototype.sendGuildList=function(){GameSocket.ins().Rpc(C2sProtocol.cs_guild_getlist)},t.prototype.postGuildList=function(e){this.guildListInfos=[];for(var t,i=e.guilds.length,o=0;i>o;o++){t=new GuildListInfo;var s=e.guilds[o];t.guildID=s.id,t.guildLevel=s.level,t.guildMember=s.actorcount,t.guildName=s.name,t.guildPresident=s.leadername,t.attr=s.needPower,t.totalpower=s.totalpower,this.guildListInfos.push(t)}this.guildListInfos.sort(function(e,t){return t.totalpower-e.totalpower});for(var n=0;n<this.guildListInfos.length;++n)this.guildListInfos[n].guildRank=n+1},t.prototype.sendGuildCreate=function(e,t){var i=new Sproto.cs_guild_create_request;i.id=e,i.name=t,GameSocket.ins().Rpc(C2sProtocol.cs_guild_create,i)},t.prototype.doGuildCreate=function(e){var t=e.result;if(0==t){e.id;UserTips.ins().showTips("公会创建成功"),this.sendGuildInfo()}else{var i="";5==t?i=GlobalConfig.jifengTiaoyueLg.st101634:2==t?i=GlobalConfig.jifengTiaoyueLg.st100913:4==t&&(i=GlobalConfig.jifengTiaoyueLg.st100008),""!=i&&UserTips.ErrorTip(i)}},t.prototype.sendQuitGuild=function(){GameSocket.ins().Rpc(C2sProtocol.cs_guild_quit)},t.prototype.sendJoinGuild=function(e){var t=new Sproto.cs_guild_join_request;t.id=e,GameSocket.ins().Rpc(C2sProtocol.cs_guild_join,t)},t.prototype.doJoinGuild=function(e){this.myOffice>=GuildOffice.GUILD_FUBANGZHU&&(this.hasApply=!0,this.postGuildJoinResult(),this.postGuildApplysInfos())},t.prototype.postGuildJoinResult=function(){},t.prototype.postGuildApplysInfos=function(){},t.prototype.sendApplyInfos=function(){GameSocket.ins().Rpc(C2sProtocol.cs_guild_getapply)},t.prototype.doApplyInfos=function(e){var t=e.applyinfo.length;this.applyPlayers=[];for(var i,o=0;t>o;o++){i=new GuildApplyInfo;var s=e.applyinfo[o];i.roleID=s.actorid,i.vipLevel=s.vip_level,i.job=s.job,i.sex=s.sex,i.attack=s.power,i.name=s.actorname,this.applyPlayers.push(i)}this._hasApply=t>0,this.postGuildApplysInfos()},t.prototype.sendProcessJoin=function(e,t){var i=new Sproto.cs_guild_setapply_request;i.actorid=e,i.result=t,GameSocket.ins().Rpc(C2sProtocol.cs_guild_setapply,i)},t.prototype.doProcessJoin=function(e){var t=e.id,i=(e.result,this.applyGuilds),o=i.indexOf(t);-1!=o&&i.splice(o,1),this.postGuildJoinResult()},t.prototype.sendChangeOffice=function(e,t){var i=new Sproto.cs_guild_change_office_request;i.actorid=e,i.office=t,GameSocket.ins().Rpc(C2sProtocol.cs_guild_change_office,i)},t.prototype.doChangeOffice=function(e){var t=e.actorid,i=e.office;t==GameGlobal.actorModel.actorID&&(this.myOffice=i,this.postMyGuildInfo());for(var o=0;o<this._guildMembers.length;o++){var s=this.getGuildMembersByIndex(o);if(s.roleID==t)return s.office=i,void this.postGuildMembers()}},t.prototype.sendDemise=function(){GameSocket.ins().Rpc(C2sProtocol.cs_guild_demise)},t.prototype.sendKick=function(e){var t=new Sproto.cs_guild_kick_request;t.actorid=e,GameSocket.ins().Rpc(C2sProtocol.cs_guild_kick,t)},t.prototype.doQuitGuild=function(e){var t=e.actorid;if(t==GameLogic.ins().actorModel.actorID)this.clearGuildInfo(),ViewManager.ins().close(GuildWin),ViewManager.ins().close(GuildMap);else if(this.myOffice>=GuildOffice.GUILD_FUBANGZHU)for(var i=0;i<this._guildMembers.length;i++){var o=this.getGuildMembersByIndex(i);if(o.roleID==t)return this._guildMembers.splice(i,1),void this.postGuildMembers()}},t.prototype.sendCon=function(e){var t=new Sproto.cs_guild_contribute_request;t.type=e,this.Rpc(C2sProtocol.cs_guild_contribute,t)},t.prototype.postGuildMoney=function(e){var t=this.money;this.money=e.fund,t=this.money-t},t.prototype.sendChangeNotice=function(e){var t=new Sproto.cs_guild_change_notice_request;t.text=e,GameSocket.ins().Rpc(C2sProtocol.cs_guild_change_notice,t)},t.prototype.postChangeNotice=function(e){var i=e.result;0==i&&(t.ins().notice=e.text)},t.prototype.sendGuildSkillInfo=function(){this.Rpc(C2sProtocol.cs_guild_getskillinfo)},t.prototype.doGuildSkillInfo=function(e){if(null!=e.skills){for(var t=0,i=e.skills.length;i>t;++t){for(var o=e.skills[t],s=this._guillRoleSkillInfo[t],n=0;n<o.skill1.length;++n){var r=o.skill1[n],a=s.guildSkillInfo[n];a.level=r}for(var n=0;n<o.skill2.length;++n){var r=o.skill2[n],a=s.practiceSkillInfo[n];a.level=r.level,a.exp=r.exp}}this.postGuildSkillInfo()}},t.prototype.postGuildSkillInfo=function(){},t.prototype.sendLearnGuildSkill=function(e,t){var i=new Sproto.cs_guild_learnskill_request;i.roleid=e,i.skillid=t,this.Rpc(C2sProtocol.cs_guild_learnskill,i)},t.prototype.doLearnGuildSkill=function(e){var t=e.roleid,i=e.skillid;this.getSkllInfoByIndex(t).guildSkillInfo[i-1].level=e.level,this.postGuildSkillInfo(),UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100638)},t.prototype.sendPracticeGuildSkill=function(e,t){var i=new Sproto.cs_guild_temperskill_request;i.roleid=e,i.skillid=t,this.Rpc(C2sProtocol.cs_guild_temperskill,i)},t.prototype.doPracticeGuildSkill=function(e){var t=e.roleid,i=e.skillid;this.getSkllInfoByIndex(t).practiceSkillInfo[i-1].level=e.level,this.getSkllInfoByIndex(t).practiceSkillInfo[i-1].exp=e.exp;var o=e.addexp;this.postGuildSkillInfo(),UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101854,[o]))},t.prototype.sendUpBuilding=function(e){var t=new Sproto.cs_guild_upbuilding_request;t.buildtype=e,this.Rpc(C2sProtocol.cs_guild_upbuilding,t)},t.prototype.postUpBuilding=function(e){var t=e.buildtype,i=e.level;this._buildingLevels[t-1]=i,this.guildLv=this._buildingLevels[0]},t.prototype.doGuildTaskInfos=function(e){this.initTaskInfos();for(var t=0,i=e.task.length;i>t;t++){var o=e.task[t],s=o.id;for(var n in this.guildTaskInfos)if(this.guildTaskInfos.hasOwnProperty(n)){var r=this.guildTaskInfos[n];if(s==r.taskID){r.param=o.value,r.state=o.state;continue}}}this.guildTaskInfos.sort(this.taskInfosSortFunc),this.postGuildTaskUpdate()},t.prototype.postGuildTaskUpdate=function(){},t.prototype.doGuildTaskUpdate=function(e){var t=e.task.id,i=e.task.value,o=e.task.state;for(var s in this.guildTaskInfos)if(this.guildTaskInfos.hasOwnProperty(s)){var n=this.guildTaskInfos[s];if(n.taskID==t)return n.param=i,n.state=o,this.guildTaskInfos.sort(this.taskInfosSortFunc),void this.postGuildTaskUpdate()}},t.prototype.sendGetTaskAward=function(e){var t=new Sproto.cs_guild_gettaskaward_request;t.taskid=e,this.Rpc(C2sProtocol.cs_guild_gettaskaward,t)},t.prototype.sendManageList=function(){this.Rpc(C2sProtocol.cs_guild_gethistory)},t.prototype.postManageList=function(e){this.records=[];for(var t=e.historys.length,i=0;t>i;i++)this.parserManage(e.historys[i])},t.prototype.doManage=function(e){this.parserManage(e.history)},t.prototype.sendConCount=function(){this.Rpc(C2sProtocol.cs_guild_getconcount)},t.prototype.postConCount=function(e){for(var t=e.counts.length,i=0;t>i;i++)this._conCount[i]=e.counts[i]},t.prototype.GetSurplusConCount=function(e){var t=this._conCount[e];return null==t?0:Math.max(this.GetMaxConCount(e)-t,0)},t.prototype.GetConCount=function(e){var t=this._conCount[e];return null==t?this.GetMaxConCount(e):t},t.prototype.GetMaxConCount=function(e){return 0==e?GlobalConfig.ins("GuildDonateConfig")[1].dayCount[UserVip.ins().lv]:1==e?GlobalConfig.ins("GuildDonateConfig")[2].dayCount:0},t.prototype.sendMyGuildInfo=function(){GameSocket.ins().Rpc(C2sProtocol.cs_guild_getplayerinfo)},t.prototype.doMyGuildInfo=function(e){this.myCon=e.curcontribute,this.myTotalCon=e.contribute,this.myOffice=e.office,this.postMyGuildInfo()},t.prototype.postMyGuildInfo=function(){},t.prototype.sendGuildMessage=function(e){var t=new Sproto.cs_guild_sendchat_request;t.str=e,this.Rpc(C2sProtocol.cs_guild_sendchat,t)},t.prototype.doGuildMessage=function(e){var t=new GuildMessageInfo;if(t.parserMessage(e.chat),void 0!=t.name){var i=new ChatInfoData(null);i.name=t.name,i.type=ChatType.Guild,i.str=t.content,i.vip=t.vipLevel,i.monthCard=t.monthCard,i.superMonthCard=t.superMonthCard,i.office=t.office,i.time=t.time,Chat.ins().setGuildchatData(i),(1==t.type||2==t.type)&&this.postGuildBossHaveRelive(!0,t.content)}},t.prototype.postGetNewGuildMessage=function(e){return e},t.prototype.postGuildBossHaveRelive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.prototype.sendAllGuildMessage=function(){this.Rpc(C2sProtocol.cs_guild_getallchat)},t.prototype.postAllGuildMessage=function(e){Chat.ins().guildchatList.removeAll();for(var t=e.chats,i=0,o=t.length;o>i;i++){var s=new ChatInfoData(null);t[i].type?(s.name=t[i].name,s.type=ChatType.Guild,s.vip=GameGlobal.actorModel.vipLv,s.office=t[i].office,s.monthCard=t[i].monthCard,s.superMonthCard=t[i].superMonthCard):s.type=ChatType.GuildPublic,s.str=t[i].content,s.time=t[i].time,Chat.ins().setGuildchatData(s)}},t.prototype.sendAddGuildLimit=function(e,t){var i=new Sproto.cs_guild_setautoadd_request;i.auto=e,i.power=t,GameSocket.ins().Rpc(C2sProtocol.cs_guild_setautoadd,i)
},t.prototype.doAddGuildlimit=function(e){this.isAuto=e.autoJoin,this.attrLimit=e.needPower},t.prototype.parserManage=function(e){if(this.records){var t="",i=StringUtils.complementByChar(DateUtils.getFormatBySecond(e.time,DateUtils.TIME_FORMAT_8),16),o=e.type,s=e.param1,n=e.param2,r=(e.param3,e.name1);e.name2;switch(o){case 1:t=i+"  ["+r+"]"+GlobalConfig.jifengTiaoyueLg.st101523;break;case 2:t=i+"  ["+r+"]"+GlobalConfig.jifengTiaoyueLg.st101524;break;case 3:t=i+"  ["+r+"]"+GlobalConfig.jifengTiaoyueLg.st101525;break;case 4:t=i+"  ["+r+"]"+GlobalConfig.jifengTiaoyueLg.st101526;break;case 5:t=i+"  ["+r+"]"+GlobalConfig.jifengTiaoyueLg.st101527;break;case 6:t=i+"  ["+r+"]"+GlobalConfig.jifengTiaoyueLg.st101528;break;case 7:t=i+"  ["+r+"]"+GlobalConfig.jifengTiaoyueLg.st101529+n+(2==s?GlobalConfig.jifengTiaoyueLg.st100050:GlobalConfig.jifengTiaoyueLg.st100018);break;case 8:t=i+"  ["+r+"]"+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101530,[GlobalConfig.ins("GuildConfig").buildingNames[s-1],n]);break;case 9:var a=GlobalConfig.itemConfig[s];t=i+"  ["+r+"]"+GlobalConfig.jifengTiaoyueLg.st101531+"<font color="+ItemBase.QUALITY_COLOR[a.quality]+">"+a.name+"</font>";break;case 10:t=i+"  <font color='#00ff00'>"+GlobalConfig.jifengTiaoyueLg.st101532+"</font>"}this.records.unshift(t)}},Object.defineProperty(t.prototype,"hasApply",{set:function(e){this._hasApply=e},enumerable:!0,configurable:!0}),t.prototype.hasApplys=function(){return this.myOffice>=GuildOffice.GUILD_FUBANGZHU&&this._hasApply},t.prototype.clearGuildInfo=function(){this.guildID=0,this.guildName="",this.guildListInfos=[],this._guildMembers=[],this.applyGuilds=[],this.applyPlayers=[],this.pageMax=1},t.prototype.initTaskInfos=function(){if(!(this.guildTaskInfos.length>0)){this.guildTaskInfos=[],null==this.guildTaskConfig&&(this.guildTaskConfig=GlobalConfig.ins("GuildTaskConfig"));var e=this.guildTaskConfig;for(var t in e)if(e.hasOwnProperty(t)){var i=e[t],o=new GuildTaskInfo;o.taskID=i.id,o.param=0,o.state=0,o.stdTask=i,this.guildTaskInfos.push(o)}}},t.prototype.taskInfosSortFunc=function(e,t){if(e.state==t.state)return e.taskID<t.taskID?-1:e.taskID>t.taskID?1:0;if(e.state!=RewardState.NotReached)return 1;if(t.state!=RewardState.NotReached)return-1;if(2!=e.state&&2!=t.state){if(e.taskID<t.taskID)return-1;if(e.taskID>t.taskID)return 1}return 0},t.prototype.getMemberNum=function(){return this._guildMembers.length},t.prototype.getGuildMembers=function(e){return 0==e||this._memberSortType==e?this._guildMembers:1==e?this._guildMembers.sort(this.memberSortFunc):2==e?this._guildMembers.sort(this.memberSortFunc2):this._guildMembers},t.prototype.getOfficeNum=function(e){for(var t=this._guildMembers.length,i=0,o=0;t>o;o++){var s=this._guildMembers[o];s.office==e&&i++}return i},t.prototype.canAppointFHZ=function(){return this.getOfficeNum(GuildOffice.GUILD_FUBANGZHU)<GlobalConfig.ins("GuildConfig").posCounts[this.guildLv-1][1]},t.prototype.memberSortFunc=function(e,t){return e.office>t.office?-1:e.office<t.office?1:e.office==t.office?e.contribution==t.contribution?0:e.contribution>t.contribution?-1:1:0},t.prototype.memberSortFunc2=function(e,t){return e.curContribution==t.curContribution?0:e.curContribution>t.curContribution?-1:1},t.prototype.GetMaxMember=function(){return GameServer.serverMergeTime>0?GlobalConfig.ins("GuildConfig").maxHeFuMember[(this.guildLv||1)-1]:GlobalConfig.ins("GuildConfig").maxMember[(this.guildLv||1)-1]},t.prototype.IsRedPoint=function(){return this.IsTaskRedPoint()?!0:t.ins().myOffice>=GuildOffice.GUILD_FUBANGZHU&&t.ins().hasApplys()?!0:GuildFB.ins().hasbtn()?!0:(void 0==GameLogic.ins().actorModel.guildID||0==GameLogic.ins().actorModel.guildID)&&GameLogic.ins().actorModel.level>69?!0:GuildRobber.ins().hasbtn()?!0:!1},t.prototype.IsTaskRedPoint=function(){if(!GameGlobal.actorModel.guildID)return!1;for(var e in this.guildTaskInfos)if(this.guildTaskInfos.hasOwnProperty(e)){var t=this.guildTaskInfos[e];if(2==t.taskID){if(t.state==RewardState.NotReached)return!0;break}}return!1},t.prototype.checkIsInGuild=function(e){for(var t in this._guildMembers){var i=this._guildMembers[t];if(i.roleID==e)return!0}return!1},t}(BaseSystem);__reflect(Guild.prototype,"Guild"),MessageCenter.compile(Guild),window.Guild=Guild;var GuildBuilding;!function(e){e[e.GUILD_HALL=1]="GUILD_HALL",e[e.GUILD_LIANGONGFANG=2]="GUILD_LIANGONGFANG",e[e.GUILD_SHOP=3]="GUILD_SHOP",e[e.GUILD_BOSS=4]="GUILD_BOSS",e[e.MAX=5]="MAX"}(GuildBuilding||(GuildBuilding={}));var PetStarWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetStarWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101170,this.m_StarFullLab.text=GlobalConfig.jifengTiaoyueLg.st101171,this.m_UpStarBtn.label=GlobalConfig.jifengTiaoyueLg.st100211,this.m_bg.init("PetStarWin",GlobalConfig.jifengTiaoyueLg.st101169)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addViewEvent(),this.m_PetAnim.shPower(),this.petData=e[0],this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){DisplayUtils.dispose(this.m_NewEff),this.m_NewEff=null,DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null,this.removeViewEvent(),this.m_PetAnim.release()},t.prototype.addViewEvent=function(){this.m_NeedItem.addEvent(),this.AddClick(this.m_UpStarBtn,this.onClickUpStar),this.observe(PetEvt.PET_DATAUPDATE_MSG,this.setData),this.observe(PetEvt.PET_STARUPEFF_MSG,this.playUpEff)},t.prototype.removeViewEvent=function(){this.m_NeedItem.removeEvent()},t.prototype.setData=function(){var e=PetModel.getInstance,t=this.petData,i=GlobalConfig.ins("PetConfig")[t.petid];if(t&&i){this.m_Power.text=t.power,this.m_PetAnim.setPetData(t.petid);var o=GlobalConfig.ins("PetStarLevelExpConfig")[t.star+1];if(o&&t.star<i.maxstarLevel){var s=0;t.isCanCarStarUp?(this.needItemId=i.activationItem,s=o.itemNum2):(this.needItemId=i.starItem,s=o.itemNum),this.m_NeedItem.setData(this.needItemId,s),this.m_LeftLab.text=AttributeData.getAttStr(e.getStarAttr(t.petid,t.star),1),this.m_RightLab.text=AttributeData.getAttStr(e.getStarAttr(t.petid,t.star+1),1),this.m_StarFullLab.visible=!1,this.m_CanUpStarGroup.visible=!0,this.m_ArrImg.visible=!0,this.m_RightGroup.visible=!0,this.m_LeftGroup.horizontalCenter=-116}else this.m_LeftLab.text=AttributeData.getAttStr(e.getStarAttr(t.petid,t.star),1),this.m_ArrImg.visible=!1,this.m_RightGroup.visible=!1,this.m_LeftGroup.horizontalCenter=0,this.m_StarFullLab.visible=!0,this.m_CanUpStarGroup.visible=!1;e.setStar(this.m_LeftStarGroup,t.star),e.setStar(this.m_RightStarGroup,t.star+1)}this.checkStarGuide()},t.prototype.onClickUpStar=function(){var e=this.petData,t=GlobalConfig.ins("PetConfig")[e.petid];if(e&&t){var i=GlobalConfig.ins("PetStarLevelExpConfig")[e.star+1];if(i){var o=0,s=0;e.isCanCarStarUp?(o=t.activationItem,s=i.itemNum2):(o=t.starItem,s=i.itemNum);var n=UserBag.ins().getBagGoodsCountById(0,o);n>=s?PetSproto.ins().sendPetUpStarMsg(e.petid):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100217)}else UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101168)}},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.playUpEff=function(){this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_icon"),this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_EffGroup,"eff_ui_upgrade")},t.prototype.onClickGetLab=function(){this.needItemId&&UserWarn.ins().setBuyGoodsWarn(this.needItemId)},t.prototype.checkStarGuide=function(){PetModel.getInstance.checkGuideStar()&&27==Setting.currPart&&2==Setting.currStep?(GuideUtils.ins().show(this.m_UpStarBtn,27,2),this.m_UpStarBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickStarGuide,this,!0,10)):27==Setting.currPart&&3==Setting.currStep&&(GuideUtils.ins().show(this.m_bg.closeButtomBtn,27,3),this.m_bg.closeButtomBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGuideClose,this,!0,10),ViewManager.ins().close(PetNewWin))},t.prototype.onClickStarGuide=function(){GuideUtils.ins().next(this.m_UpStarBtn),this.m_UpStarBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickStarGuide,this,!0)},t.prototype.onClickGuideClose=function(){GuideUtils.ins().next(this.m_bg.closeButtomBtn),this.m_bg.closeButtomBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGuideClose,this,!0),MessageCenter.ins().dispatch(PetEvt.PET_GUIDE_MSG_END)},t}(BaseEuiPanel);__reflect(PetStarWin.prototype,"PetStarWin"),ViewManager.ins().reg(PetStarWin,LayerManager.UI_Popup),window.PetStarWin=PetStarWin;var RuleIconBase=function(){function e(e){this.layerCount=0,this.effX=0,this.effY=0,this.tar=e,this.parentGpuop=e.parent}return e.prototype.checkShowIcon=function(){return!0},e.prototype.checkShowRedPoint=function(){return null},e.prototype.getEffName=function(e){return null},e.prototype.tapExecute=function(){},e.prototype.update=function(){e.thisObj&&e.thisObj.getChildIndex(this.parentGpuop)>-1?e.thisUpdate.call(e.thisObj,this):e.thisObjCity&&e.thisObjCity.getChildIndex(this.parentGpuop)>-1&&e.thisUpdateCity.call(e.thisObjCity,this)},e.prototype.addEvent=function(){for(var e=0,t=this.updateMessage;e<t.length;e++){var i=t[e];"function"==typeof i?MessageCenter.addListener(i,this.update,this):MessageCenter.ins().addListener(i,this.update,this)}},e.prototype.removeEvent=function(){MessageCenter.ins().removeAll(this)},e.prototype.DestoryMc=function(){null!=this._mc&&(DisplayUtils.dispose(this._mc),ObjectPool.ins().push(this._mc),this._mc=null)},e.prototype.DefEffe=function(e){return this.firstTap||e?(this.effX=33,this.effY=33,"eff_main_icon02"):void 0},e.prototype.onTimer=function(){},e}();__reflect(RuleIconBase.prototype,"RuleIconBase"),window.RuleIconBase=RuleIconBase;var RankDataBase=function(){function e(){}return e.prototype.parser=function(e,t){var i=this;t.forEach(function(t){i[t]=e[t]})},e}();__reflect(RankDataBase.prototype,"RankDataBase"),window.RankDataBase=RankDataBase;var RankDataType=function(){function e(){}return e.TYPE_POWER=0,e.TYPE_ARENA=1,e.TYPE_SKIRMISH=2,e.TYPE_PASS=3,e.TYPE_COPY=4,e.TYPE_LEVEL=5,e.TYPE_WING=6,e.TYPE_JOB_ZS=7,e.TYPE_JOB_FS=8,e.TYPE_JOB_DS=9,e.TYPE_LILIAN=10,e.TYPE_LADDER=11,e.TYPE_BAOSHI=12,e.TYPE_PRESTIGE=20,e.TYPE_KFRECHARGE=114,e.TYPE_KFSPEND=115,e.TYPE_HFRECHARGE=116,e.TYPE_HFSPEND=117,e.TYPE_CHONGZHI=122,e.TYPE_LUCK=133,e.DATA_POS="pos",e.DATA_ID="id",e.DATA_PLAYER="player",e.DATA_LEVEL="level",e.DATA_ZHUAN="zhuan",e.DATA_VIP="vip",e.DATA_MONTH="month",e.DATA_POWER="power",e.DATA_COUNT="count",e.DATA_EXP="exp",e.DATA_JOB="job",e.DATA_SEX="sex",e.DATA_BG2="xphb_json.phb_7",e.DATA_BG3="xphb_json.phb_8",e.ITEMS=[],e.readFunc={},e.TYPE_ZHANLING=13,e.TYPE_LONGHUN=14,e.TYPE_XIAOFEI=16,e}();__reflect(RankDataType.prototype,"RankDataType"),RankDataType.ITEMS[RankDataType.TYPE_POWER]=RankDataType.ITEMS[RankDataType.TYPE_WING]=RankDataType.ITEMS[RankDataType.TYPE_JOB_ZS]=RankDataType.ITEMS[RankDataType.TYPE_JOB_FS]=RankDataType.ITEMS[RankDataType.TYPE_JOB_DS]=RankDataType.ITEMS[RankDataType.TYPE_CHONGZHI]=RankDataType.ITEMS[RankDataType.TYPE_LUCK]=[RankDataType.DATA_POS,RankDataType.DATA_ID,RankDataType.DATA_PLAYER,RankDataType.DATA_LEVEL,RankDataType.DATA_ZHUAN,RankDataType.DATA_VIP,RankDataType.DATA_MONTH,RankDataType.DATA_POWER],RankDataType.ITEMS[RankDataType.TYPE_SKIRMISH]=[RankDataType.DATA_POS,RankDataType.DATA_ID,RankDataType.DATA_PLAYER,RankDataType.DATA_JOB,RankDataType.DATA_SEX,RankDataType.DATA_LEVEL,RankDataType.DATA_ZHUAN,RankDataType.DATA_VIP,RankDataType.DATA_COUNT,RankDataType.DATA_MONTH],RankDataType.ITEMS[RankDataType.TYPE_LEVEL]=[RankDataType.DATA_POS,RankDataType.DATA_ID,RankDataType.DATA_PLAYER,RankDataType.DATA_LEVEL,RankDataType.DATA_ZHUAN,RankDataType.DATA_VIP,RankDataType.DATA_MONTH],RankDataType.ITEMS[RankDataType.TYPE_PASS]=RankDataType.ITEMS[RankDataType.TYPE_COPY]=[RankDataType.DATA_POS,RankDataType.DATA_ID,RankDataType.DATA_PLAYER,RankDataType.DATA_POWER,RankDataType.DATA_VIP,RankDataType.DATA_COUNT,RankDataType.DATA_MONTH],RankDataType.ITEMS[RankDataType.TYPE_LILIAN]=[RankDataType.DATA_POS,RankDataType.DATA_ID,RankDataType.DATA_PLAYER,RankDataType.DATA_LEVEL,RankDataType.DATA_ZHUAN,RankDataType.DATA_VIP,RankDataType.DATA_MONTH,RankDataType.DATA_COUNT,RankDataType.DATA_EXP],RankDataType.ITEMS[RankDataType.TYPE_PRESTIGE]=[RankDataType.DATA_POS,RankDataType.DATA_ID,RankDataType.DATA_PLAYER,RankDataType.DATA_LEVEL,RankDataType.DATA_ZHUAN,RankDataType.DATA_VIP,RankDataType.DATA_MONTH,RankDataType.DATA_POWER],RankDataType.ITEMS[RankDataType.TYPE_LADDER]=[RankDataType.DATA_POS,RankDataType.DATA_ID,RankDataType.DATA_PLAYER,RankDataType.DATA_JOB,RankDataType.DATA_SEX,RankDataType.DATA_LEVEL,RankDataType.DATA_ZHUAN,RankDataType.DATA_VIP,RankDataType.DATA_COUNT,RankDataType.DATA_MONTH],RankDataType.readFunc[RankDataType.DATA_JOB]=RankDataType.readFunc[RankDataType.DATA_SEX]="readByte",RankDataType.readFunc[RankDataType.DATA_POS]=RankDataType.readFunc[RankDataType.DATA_LEVEL]=RankDataType.readFunc[RankDataType.DATA_ZHUAN]=RankDataType.readFunc[RankDataType.DATA_VIP]=RankDataType.readFunc[RankDataType.DATA_MONTH]="readShort",RankDataType.readFunc[RankDataType.DATA_ID]=RankDataType.readFunc[RankDataType.DATA_POWER]=RankDataType.readFunc[RankDataType.DATA_COUNT]=RankDataType.readFunc[RankDataType.DATA_EXP]="readInt",RankDataType.readFunc[RankDataType.DATA_POWER]="readDouble",RankDataType.readFunc[RankDataType.DATA_PLAYER]="readString",window.RankDataType=RankDataType;var RechargeBaseWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){this.setSkinName(),this.list.itemRenderer=ItemBase},t.prototype.GetLayerLevel=function(){return LayerManager.UI_Main},t.prototype.setSkinName=function(){this.skinName="FirstChargeSkin"},t.prototype.GetRewardData=function(){return GameGlobal.rechargeData[0]},t.prototype.GetRewardDataIndex=function(){return 0},t.prototype.GetRewardIndex=function(){return 0},t.prototype.open=function(){this.awardsBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.returnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_RECHARGE,this.setWinData,this)},t.prototype.resetCommonReBtn=function(){},t.prototype.close=function(){this.awardsBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.returnBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_RECHARGE,this.setWinData,this)},t.prototype.onTouch=function(e){switch(e.currentTarget){case this.awardsBtn:for(var t=this.getConfig(this.GetRewardIndex()),i=0,o=0;o<t.awardList.length;o++)1==t.awardList[o].type&&t.awardList[o].id<2e5&&i++;if(i>UserBag.ins().getSurplusCount())return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100051);Recharge.ins().sendGetAwards(this.GetRewardDataIndex(),this.GetRewardIndex());break;case this.returnBtn:ViewManager.ins().close(this)}},t.prototype.setEff=function(e){this.list.validateNow();for(var t=0;t<this.list.numChildren;++t){var i=this.list.getChildAt(t);i&&i.showEffect(6)}},t.prototype.setWinData=function(){var e=this.GetRewardData(),t=this.getRemindByIndex(this.GetRewardIndex()),i=(this.GetRewardIndex()+1,this.getConfig(this.GetRewardIndex()));if(i){GameGlobal.rolesModel[0].job;this.list.dataProvider=new eui.ArrayCollection(i.awardList),this._SetGoBtnState(e.num<i.pay),this.awardsBtn.visible=e.num>=i.pay&&!t,this.setEff(this.GetRewardIndex())}},t.prototype._SetGoBtnState=function(e){},t.prototype._OpenRecharge=function(){ViewManager.ins().close(this),ViewManager.ins().open(ChargeFirstWin)},t.prototype.getConfig=function(e){null==this.chongZhi1Config&&(this.chongZhi1Config=GlobalConfig.ins("ChongZhi1Config"));var t,i=this.GetRewardData();if(i.isFirst)t=GameServer.serverMergeTime>0?this.chongZhi1Config[99][0][e]:this.chongZhi1Config[0][0][e];else{var o=i.day/9>=1?2:1;t=1==o?this.chongZhi1Config[o][i.day%9][e]:this.chongZhi1Config[o][(i.day-9)%7][e]}return t},t.prototype.getRemindByIndex=function(e){return 1==(this.GetRewardData().isAwards>>e&1)},t}(BaseEuiPanel);__reflect(RechargeBaseWin.prototype,"RechargeBaseWin",["ICommonWindow"]),window.RechargeBaseWin=RechargeBaseWin;var WxSdk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.appid="wx0dac204c9f71bc99",t.pf="android",t.appkey="70a3ed1d4df378f88c6f3561be1b2b63",t.payAppid="wx29dcdbb2f113f761",t.gameid="nuhuoyidao20181101",t.game_id="59",t.channel="",t.IsLoinged=!1,t.shareTagList=[],t.shareLinJoin=!1,t.shareOffineReward=!1,t.SDKVersion="",t.priceCanArr=[1,3,6,8,12,18,25,30,40,45,50,60,68,73,78,88,98,108,118,128,148,168,188,198,328,648],t.shareImg={6:{tupian:"fenxiang_006",Index:6,wenan:"成功捕获【橙宠·紫龙王】，横行全服无人能挡！"},2:{tupian:"fenxiang_002",Index:2,wenan:"你的好友赠送你一只【火龙王】"},3:{tupian:"fenxiang_003",Index:3,wenan:"四系转职，天赋技能，自由加点，超高自由度放置手游！"},1:{tupian:"fenxiang_001",Index:1,wenan:"你的好友赠送你一只【火龙王】"},4:{tupian:"fenxiang_004",Index:4,wenan:"谁说牧师只能奶？暴力加点全攻牧师颠覆你的想象！"},5:{tupian:"fenxiang_005",Index:5,wenan:"不思议冒险正式开启！冒险天团C位就等你了！"},7:{tupian:"fenxiang_007",Index:7,wenan:"成功捕获一只[风暴·冰霜巨龙]"}},t.shareTitle="山海大陆传送门就此打开，修仙炼们响应传唤吧",t.wxUserButton=null,t}return __extends(t,e),t.ins=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.ins.call(this)},t.prototype.wxLoging=function(){wx.login({success:function(e){t.ins().js_code=e.code,StartGetUserInfo.urlData=Const.SERVER_LIST_URL+"get_player_serverinfo_xiangjiao?appid="+t.ins().appid+"&js_code="+t.ins().js_code,StartGetUserInfo.GetUserInfo()}})},t.prototype.isHidePay=function(){return SdkMgr.isWxGame()&&Main.wxsystemInfo&&"ios"==Main.wxsystemInfo.platform&&0==t.ins().pay_type},t.prototype.wxRequestMidasPayment=function(e){if(SdkMgr.isWxGame()){console.log(">>>>>>>>>>>>>>>>需要支付>>"+e.amount);var i=t.ins().wxBuyQuantity(parseInt(e.amount));console.log(">>>>>>>>>>>>>>>>转换有效价格等级,得到buyQuantity >>"+10*i),wx.requestMidasPayment({mode:"game",offerId:"1450022404",buyQuantity:10*i,zoneId:1,platform:t.ins().pf,env:1,currencyType:"CNY",success:function(){console.log(">>>>>>>>>>>>>支付成功");({openid:t.ins().openid,orderId:t.ins().order.orderid,payAmount:t.ins().order.amount,payTradeNo:"",payInfo:{}});t.ins().pay(t.ins().order,i)},fail:function(e){var o=e.errMsg,s=e.errCode;console.log(">>>>>>>>>>>>>支付失败"),console.log(o,s),6==s&&t.ins().pay(t.ins().order,i)}})}},t.prototype.wxBuyQuantity=function(e){if(SdkMgr.isWxGame()){for(var i=t.ins().priceCanArr.length,o=0;i>o;o++)if(e<=t.ins().priceCanArr[o])return e=t.ins().priceCanArr[o];return e}},t.prototype.setKeepScreenOn=function(){Main.wxsystemInfo||t.ins().getSystemInfo();var e=Main.wxsystemInfo.SDKVersion.split(".");return parseInt(e[0])<1?void egret.log("库主版本太低，不支持设置常亮，当前版本："+Main.wxsystemInfo.SDKVersion):parseInt(e[1])<4?void egret.log("库版本低于1.4.0，不支持设置常亮，当前版本："+Main.wxsystemInfo.SDKVersion):void wx.setKeepScreenOn({keepScreenOn:!0,success:function(){egret.log("设置常亮成功")},fail:function(){egret.log("设置常亮失败")}})},t.prototype.getSystemInfo=function(){SdkMgr.isWxGame()&&!Main.wxsystemInfo&&wx.getSystemInfo({success:function(e){Main.wxsystemInfo=new WxSystemInfo,Main.wxsystemInfo.brand=e.brand,Main.wxsystemInfo.model=e.model,Main.wxsystemInfo.pixelRatio=e.pixelRatio,Main.wxsystemInfo.screenWidth=e.screenWidth,Main.wxsystemInfo.screenHeight=e.screenHeight,Main.wxsystemInfo.windowWidth=e.windowWidth,Main.wxsystemInfo.windowHeight=e.windowHeight,Main.wxsystemInfo.language=e.language,Main.wxsystemInfo.version=e.version,Main.wxsystemInfo.system=e.system,Main.wxsystemInfo.platform=e.platform,Main.wxsystemInfo.fontSizeSetting=e.fontSizeSetting,Main.wxsystemInfo.SDKVersion=e.SDKVersion,t.ins().SDKVersion=e.SDKVersion,Main.wxsystemInfo.benchmarkLevel=e.benchmarkLevel,Main.wxsystemInfo.battery=e.battery,Main.wxsystemInfo.wifiSignal=e.wifiSignal,console.log("输出手机型号等信息>>>>>>>"),Main.instance.startBg.scaleX=1.43,Main.instance.startBg.scaleY=1.43,Main.instance.startBg.width=Main.instance.startBg.width*e.screenWidth/StageUtils.ins().getWidth(),Main.instance.startBg.height=Main.instance.startBg.height*e.screenHeight/StageUtils.ins().getHeight(),Main.instance.startBg.horizontalCenter=0,Main.instance.startBg.verticalCenter=0,Main.instance.addChildAt(Main.instance.startBg,0),t.ins().SDKVersion=e.SDKVersion,StageUtils.ins().autoPos.x=Main.instance.startBg.x,StageUtils.ins().autoPos.y=Main.instance.startBg.y,StageUtils.ins().autoWidth=Main.instance.startBg.width,StageUtils.ins().autoHeight=Main.instance.startBg.height},fail:function(){console.log("微信获取机型失败")},complete:function(){console.log(Main.wxsystemInfo)}})},t.prototype.pay=function(e,i){if(void 0===i&&(i=0),SdkMgr.isWxGame()){if(Main.wxsystemInfo||t.ins().getSystemInfo(),e.amount="0.01",t.ins().order=e,SdkMgr.isWxGame()&&Main.wxsystemInfo&&"ios"==Main.wxsystemInfo.platform)return 0==t.ins().pay_type?void WarnWin.show(TextFlowMaker.generateTextFlow("受政策影响，充值暂未开放"),function(){},this,null,null,"sure",{btnName:"确定",title:"L温馨提示R"}):void t.ins().wxRequestMidasPaymentForIos();var o=new Sproto.cs_buy_xiaoyouxi_item_request;o.goodsid=e.goodsId,o.appid=t.ins().appid,o.openid=t.ins().openid,o.pf=t.ins().pf,o.session_key=t.ins().session_key,o.orderid=e.orderid,o.pay_amount=i,GameSocket.ins().Rpc(C2sProtocol.cs_buy_xiaoyouxi_item,o,t.ins().rpcRspHandler,t.ins())}},t.prototype.onError=function(){SdkMgr.isWxGame()&&window.wx.onError(function(e){console.log("捕获错误:",e)})},t.prototype.rpcRspHandler=function(e){SdkMgr.isWxGame()&&(0==e.ret?UserTips.ins().showTips("购买商品成功"):1==e.ret?(console.log(">>>>>>>>>>>>>>>余额不足，购买商品失败，重新发送支付请求"),t.ins().order.orderid=e.orderid,t.ins().wxRequestMidasPayment(t.ins().order)):2==e.ret?console.log(">>>>>>>>>>>>>>2，内部服务器错误"):3==e.ret&&console.log(">>>>>>>>>>>>>>3，获取微信服务器信息失败"))},t.prototype.showOrHiedeShare=function(e){e?(window.wx.showShareMenu({withShareTicket:!1}),window.wx.updateShareMenu({withShareTicket:!1})):window.wx.hideShareMenu()},t.prototype.onShareAppMessage=function(){SdkMgr.isWxGame()&&window.wx.onShareAppMessage(function(e){var i=Math.random(),o=GlobalConfig.share6Config,s=[];if(!o){o=t.ins().shareImg;for(var n in o)o[n]&&s.push(o[n]);return i=Math.floor(i*s.length)%s.length,{title:s[i].wenan,imageUrl:Const.RES_URL+"resource/assets/ress/share/"+s[i].tupian+".jpg?v="+Math.random()}}for(var n in o)o[n]&&s.push(o[n]);return i=Math.floor(i*s.length)%s.length,console.log(">>>>>>>>>>>>>>>>>跳转图片："+Const.RES_URL+"resource/assets/ress/share/"+s[i].tupian+".jpg",s[i]),{title:s[i].wenan,imageUrl:Const.RES_URL+"resource/assets/ress/share/"+s[i].tupian+".jpg?v="+Math.random(),query:"heId="+RoleMgr.actorid+"&imgtag="+s[i].tupian+".jpg&shareTag="+t.ins().getShareTag()+"&openid="+t.ins().openid,success:t.ins().shareSuccess,fail:function(e){console.log(e+"分享失败")},complete:function(e){console.log(e,"shareAppMessage complete222")}}})},t.prototype.wxOnShow=function(){SdkMgr.isWxGame()&&window.wx.onShow(function(e){console.log(">>>>>>>>游戏切换到》》前台>>res = "+e.scene,e),e.scene&&(t.ins().scene=e.scene),e.query&&(t.ins().query=e.query,t.ins().query.shareTag&&t.ins().query.heId&&t.ins().getShareCount(t.ins().query.shareTag,t.ins().query.heId)),t.ins().IsLoinged||t.ins().wxLoging()})},t.prototype.onMemoryWarning=function(){SdkMgr.isWxGame()&&window.wx.onMemoryWarning(function(){UserTips.ins().showTips("微信内存不足"),egret.log("微信内存不足，强制清理内存，可能导致显示问题"),ResMgr.ins().memoryWarning()})},t.prototype.exitMiniProgram=function(){SdkMgr.isWxGame()&&window.wx.exitMiniProgram({success:function(e){},fail:function(e){},complete:function(e){}})},t.prototype.getShareTag=function(){var e=Math.random();return t.ins().shareTagList.push(e),e},t.prototype.getShareCount=function(e,i){if(RoleMgr.actorid==i){console.log(">>>>>>>>>>>>>>>进入分享次数匹配tag = "+e+"//count="+t.ins().shareTagList.length+"//////WxSdk.ins().shareTagList=",t.ins().shareTagList);for(var o=t.ins().shareTagList,s=0;s<o.length;s++)if(e==o[s]){console.log(">>>>>>>>>>>>>>>tag="+e+"///temp[i]="+o[s]),t.ins().shareTagList.splice(s,1),console.log("**************GameSocket.ins().GetSocketState() = "+GameSocket.ins().GetSocketState()),GameSocket.STATUS_COMMUNICATION==GameSocket.ins().GetSocketState()?t.ins().shareSend():t.ins().shareLinJoin=!0;break}console.log(">>>>>>>>>>>>>>>进入分享次数匹配count=",t.ins().shareTagList)}},t.prototype.shareSend=function(){console.log("*******************发送分享协议前分享数据",ShareModel.ins().infos);var e=ShareModel.ins().infos.firstshare;if(0==e){var i=new Sproto.cs_share_event_request;GameSocket.ins().Rpc(C2sProtocol.cs_share_event,i,null,this),console.log(">>>>>>>>发送首次分享>>>>>>>>>>C2sProtocol.cs_share_event")}else{var o=ShareModel.ins().infos.dailyshare;if(1==o.reward){var s=GlobalConfig.share2Config,n=Object.keys(s).length;if(o.count>=n)return console.log(">>>>>>>>每日分享不能超过总次数>>>>>>>>>dailyshare.count = "+o.count+"//max = "+n+"//cfgs=",s),!0;if(0<ShareModel.ins().getCd())return!0;var i=new Sproto.cs_share_event_request;GameSocket.ins().Rpc(C2sProtocol.cs_share_event,i,null,this),console.log(">>>>>>>>发送每日分享>>>>>>>>>>C2sProtocol.cs_share_event")}}t.ins().shareOffineReward&&(console.log(">>>>>>获取双倍经验>>>>>>>>>>Sproto.cs_offline_apply_req_request"),GameGlobal.MessageCenter.dispatch(MessageDef.OFFLIN_SHAREJONIN_SUCCESS))},t.prototype.shareSuccess=function(e){console.log(e.shareTickets+"分享成功")},t.prototype.shareAppMessage=function(){if(SdkMgr.isWxGame()){var e=Math.random(),i=GlobalConfig.share6Config,o=[];for(var s in i)i[s]&&o.push(i[s]);e=Math.floor(e*o.length)%o.length,console.log(">>>>>>>>>>>>>>>>>跳转图片："+Const.RES_URL+"resource/assets/ress/share/"+o[e].tupian+".jpg?v="+Math.random(),o[e]),window.wx.shareAppMessage({title:o[e].wenan,imageUrl:Const.RES_URL+"resource/assets/ress/share/"+o[e].tupian+".jpg?v="+Math.random(),query:"heId="+RoleMgr.actorid+"&imgtag="+o[e].tupian+".jpg&shareTag="+t.ins().getShareTag()+"&openid="+t.ins().openid,success:t.ins().shareSuccess,fail:function(e){console.log(e+"分享失败")},complete:function(e){console.log(e,"shareAppMessage complete222")}})}},t.prototype.getLaunchOptionsSync=function(){if(SdkMgr.isWxGame()){var e=wx.getLaunchOptionsSync();t.ins().options=e,e.scene&&(t.ins().loginscene=e.scene),e.query&&(t.ins().query=e.query,t.ins().query.channel&&(t.ins().channel=t.ins().query.channel),console.log(">>>>>>>>>>>>>>>启动页面的参数: channel = "+t.ins().query.channel,t.ins().query,e,e.shareTicket))}},t.prototype.sendHeadImg=function(e){var t=new Sproto.UpdateHead_request;t.imgurl=e,GameSocket.ins().Rpc(C2sProtocol.UpdateHead,t,null,this)},t.prototype.getUserWx=function(){wx.getUserInfo({withCredentials:!0,success:function(e){console.log("getUserWx success",e)},fail:function(e){},complete:function(e){console.log("getUserWx complete",e),"getUserInfo:ok"==e.errMsg?e.userInfo&&e.userInfo.avatarUrl&&(t.ins().imgURL=e.userInfo.avatarUrl,t.ins().sendHeadImg(e.userInfo.avatarUrl),console.log(">>>>>>>>>>>>>>>>>>>>获取到了用户信息，抛出更新头像事件")):t.ins().wxUserButton||t.ins().creatUserButton()}})},t.prototype.creatUserButton=function(){t.ins().wxUserButton=wx.createUserInfoButton({type:"image",image:"../GetUserInfoBtn.png",style:{left:0,top:0,width:window.innerWidth,height:window.innerHeight,lineHeight:40,backgroundColor:"",color:"",textAlign:"center",fontSize:16,borderRadius:4}}),t.ins().wxUserButton.onTap(function(e){console.log("wxUserButton",e),"getUserInfo:ok"==e.errMsg?(e.userInfo&&e.userInfo.avatarUrl&&(t.ins().imgURL=e.userInfo.avatarUrl,t.ins().sendHeadImg(e.userInfo.avatarUrl),console.log(">>>>>>>>>>>>>>>>>>>>获取到了用户信息，抛出更新头像事件")),console.log("wxuser授权success"),t.ins().wxUserButton.destroy(),t.ins().wxUserButton=null,t.ins().sdkLogin()):console.log("wxuser拒绝授权")})},t.prototype.destroyUserButton=function(){SdkMgr.isWxGame()&&t.ins().wxUserButton.destroy()},t.prototype.navigateToMiniProgram=function(e,t){void 0===t&&(t=null),SdkMgr.isWxGame()&&window.wx.navigateToMiniProgram({appId:e,path:t,extraData:{},envVersion:"",success:function(){console.log(">>>>>>>>>>>>>跳转成功")},fail:function(){console.log(">>>>>>>>>>>>>跳转失败")},complete:function(){}})},t.prototype.sdkInit=function(){var e=function(e){console.log(e)};window.xiangjiaoSDK.init(t.ins().appkey,t.ins().openid,t.ins().options,e),console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>上报 sdkInit")},t.prototype.sdkLogin=function(){window.xiangjiaoSDK.login(),console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>上报 sdkLogin")},t.prototype.sdkLoad=function(){window.xiangjiaoSDK.load(),console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>上报 sdkLoad")},t.prototype.sdkRole=function(){window.xiangjiaoSDK.role(),console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>上报 sdkRole")},t.prototype.sdkReportCustomEvent=function(){},t.prototype.gameUserPay=function(e,i,o,s,n,r){window.xiangjiaoSDK.gameUserPay(t.ins().openid,e,1,o,s,n,r);window.wx.openCustomerServiceConversation({showMessageCard:!0,sessionFrom:"game",sendMessagePath:"gift",sendMessageTitle:"充值",sendMessageImg:Const.RES_URL+"resource/assets/ress/wxgame/xiangjiaoIos.jpg?v="+Math.random(),success:function(){console.log("打开客服成功！")}})},t.prototype.wxRequestMidasPaymentForIos=function(){if(SdkMgr.isWxGame()){var e={appid:t.ins().appid,openid:t.ins().openid,goodsid:t.ins().order.goodsId,serverid:StartGetUserInfo.mServerData.id,total_fee:100*parseInt(t.ins().order.amount),channelid:t.ins().channel,goods_name:100*parseInt(t.ins().order.amount)+"元宝"};HttpClient.get(function(e){e=JSON.parse(e).data,console.log(),t.ins().gameUserPay(e.out_trade_no,e.total_fee,e.goods_id,e.goods_name,e.notify_url,e.extra)},this,e,egret.HttpResponseType.TEXT,Const.SERVER_LIST_URL+"get_ordersign_xiangjiao")}},t}(BaseClass);__reflect(WxSdk.prototype,"WxSdk"),window.WxSdk=WxSdk;var h5_sdk;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getParam_1=function(){egret.log("调用sdk登录"),window.WZTSDK.login(function(e){egret.log("收到参数》》》"+e),t.ins().loginSucceed(e)},this.quitCall),window.lockResult=this.lockResult},t.prototype.loginOut_1=function(){window.WZTSDK.func(),egret.log("退出")},t.prototype.loginSucceed=function(e){var t="",i=JSON.parse(e);for(var o in i)t+=o+"="+i[o]+"&";egret.log(i),t+="tag="+LocationProperty.urlParam.tag,t+="&auditServer="+LocationProperty.urlParam.auditServer,StartGetUserInfo.urlData=t,SdkMgr.sendServerUrl()},t.prototype.lockResult=function(e){if("string"==typeof e)if("false"==e)SoundUtils.getInstance().stopSoundByID(1);else{var t=SoundSetPanel.getSoundLocalData("soundBg");t&&SoundUtils.getInstance().playSound(1)}else if("boolean"==typeof e&&!e)if(e){var t=SoundSetPanel.getSoundLocalData("soundBg");t&&SoundUtils.getInstance().playSound(1)}else SoundUtils.getInstance().stopSoundByID(1)},t.prototype.quitCall=function(e){alert("退出"+e),"success"==e&&window.location.reload()},t.prototype.pay_1=function(e){if("bsymx_baoyu_ppl_android"==SdkMgr.tag)return void WarnWin.show("本次测试暂未开放充值系统",null,this);var t={},i=(new Date).getTime();t.serverid=GameServer.serverID,t.goodsid=e.goodsId,t.amount=e.amount,t.uid=StartGetUserInfo.uid,t.tag=LocationProperty.urlParam.tag,t.timestamp=i,t.auditServer=LocationProperty.urlParam.auditServer;var o=new egret.ByteArray,s=JSON.stringify(t);o.writeUTFBytes(s);var n={};n.billno=SdkMgr.uuid(18,16),n.amount=e.amount;var r="",a=e.subject.indexOf("=");r=-1!=a?e.subject.substr(0,a)+"获得"+e.subject.substr(a+1,e.subject.length):e.subject;var l="";a=e.desc?e.desc.indexOf("="):-1,l=-1!=a?e.desc.substr(0,a)+"获得"+e.desc.substr(a+1,e.desc.length):e.desc,n.subject=r,null!=LocationProperty.urlParam.iosid?null!=LocationProperty.urlParam.tag&&"wdws_lezhong_dataeye_ios_cqtlby"==LocationProperty.urlParam.tag?n.productId=n.iosPayId=LocationProperty.urlParam.iosid+e.amount:n.productId=n.iosPayId=LocationProperty.urlParam.iosid+e.amount+"0":n.productId=n.iosPayId=e.goodsId,n.extraInfo=egret.Base64Util.encode(o.buffer),n.uid=StartGetUserInfo.uid,n.isTest="",n.rolename=GameLogic.ins().actorModel.name,n.rolelevel=GameLogic.ins().actorModel.level,n.serverid=GameServer.serverID,n.cpOrderNo=SdkMgr.uuid(18,16)+"",n.productDesc=e.desc?l:r,n.roleID=GameLogic.ins().actorModel.actorID,n.vip=GameLogic.ins().actorModel.vipLv,n.coinNum=GameLogic.ins().actorModel.yb,egret.log(JSON.stringify(n)),window.WZTSDK.pay(n,function(e){egret.log("支付状态》"+e)
})},t.prototype.setExtData_1=function(e){var t={};t.scene_Id=e,t.roleId=GameLogic.ins().actorModel.actorID,t.roleName=GameLogic.ins().actorModel.name,t.roleLevel=GameLogic.ins().actorModel.level,t.zoneId=GameServer.serverID,t.zoneName=GameServer.serverID+"区",t.balance=GameLogic.ins().actorModel.yb,t.vip=GameLogic.ins().actorModel.vipLv?GameLogic.ins().actorModel.vipLv:0,t.partyName=""!=GameLogic.ins().actorModel.guildName?GameLogic.ins().actorModel.guildName:"无",t.roleCtiem=SdkMgr.createTime,t.roleLeveMTimE=GameServer._serverTime,t.coinNum=GameLogic.ins().actorModel.yb,window.WZTSDK.setExtData(t)},t}(BaseClass);e.Sdk_1=t,__reflect(t.prototype,"h5_sdk.Sdk_1");var i=function(e){function t(){var t=e.call(this)||this;return t.productCode="99936258951302565905224499833313",t.productKey="21684263",t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getParam_2=function(){StartGetUserInfo.urlData="token="+LocationProperty.urlParam.token+"&tag="+LocationProperty.urlParam.tag,SdkMgr.sendServerUrl(),egret.log("调用服务器")},t.prototype.initSkd_2=function(){egret.log(this),egret.log(this.productCode),egret.log("channelId"+StartGetUserInfo.channelId2),window.QuickSDK.init(this.productCode,this.productKey,!0,StartGetUserInfo.channelId2)},t.prototype.sdkLogin=function(){egret.log("调用登录"),window.QuickSDK.login(function(e){egret.log("quick登录状态"+e.status);var i;if(e.status){i="GameDemo:QuickSDK登录成功: uid=>"+e.data.uid;var o="";for(var s in e.data)o+=s+"="+e.data[s]+"&";StartGetUserInfo.urlData=o.substr(0,o.length-1),SdkMgr.sendServerUrl(),StartGetUserInfo.uid=e.data.uid,t.ins().info=e.data,window.QuickSDK.setSwitchAccountNotification(function(e){window.location.reload()}),window.QuickSDK.setLogoutNotification(function(e){window.location.reload()})}else t.ins().sdkLogin()})},t.prototype.pay_2=function(e){var t={};t.serverid=GameServer.serverID+"",t.goodsid=e.goodsId+"",t.amount=e.amount+"",t.tag=LocationProperty.urlParam.tag;var i="",o=e.subject.indexOf("=");i=-1!=o?e.subject.substr(0,o-1)+"等于"+e.subject.substr(o+1,e.subject.length):e.subject;var s=new egret.ByteArray,n=JSON.stringify(t);s.writeUTFBytes(n);var r=new Object;r.productCode=this.productCode,r.serverId=GameServer.serverID,r.uid=StartGetUserInfo.uid2,r.userRoleId=GameLogic.ins().actorModel.actorID+"",r.userRoleName=GameLogic.ins().actorModel.name+"",r.userServer=GameServer.serverID+"区",r.userLevel=GameLogic.ins().actorModel.level,r.cpOrderNo=SdkMgr.uuid(18,16)+"",r.amount=e.amount+"",r.subject=i,r.desc="",r.callbackUrl="",r.extrasParams=egret.Base64Util.encode(s.buffer)+"",r.goodsId=e.goodsId+"",r.count=1,r.quantifier="个";var a=JSON.stringify(r);window.QuickSDK.pay(a,function(e){egret.log("GameDemo:下单通知"+JSON.stringify(e))})},t.prototype.setExtData_2=function(e){var t=new Object;t.isCreateRole=e==SdkMgr.extDataType_2?!0:!1,t.roleCreateTime=SdkMgr.createTime,t.uid=StartGetUserInfo.uid2+"",t.username=StartGetUserInfo.username2,t.serverId=GameServer.serverID,t.serverName=GameServer.serverName+"",t.userRoleId=GameLogic.ins().actorModel.actorID+"",t.userRoleName=GameLogic.ins().actorModel.name,t.userRoleBalance=GameLogic.ins().actorModel.yb,t.vipLevel=GameLogic.ins().actorModel.vipLv,t.userRoleLevel=GameLogic.ins().actorModel.level,t.partyId=GameLogic.ins().actorModel.guildID,t.partyName=GameLogic.ins().actorModel.guildName,t.gameRoleGender="",t.gameRolePower=GameLogic.ins().actorModel.power,t.partyRoleId=1,t.partyRoleName="",t.professionId="",t.profession="",t.friendlist="",t.roleCreateTime=SdkMgr.createTime;var i=JSON.stringify(t);window.QuickSDK.uploadGameRoleInfo(i,function(e){e.status?egret.log("提交信息成功"):egret.log(e.message)})},t}(BaseClass);e.Sdk_2=i,__reflect(i.prototype,"h5_sdk.Sdk_2");var o=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getParam_3=function(){var e=this;egret.log("调用服务器"),window.__paySuccess=t.ins().paySuccess,window.__payError=t.ins().payError,window.__payClose=t.ins().payClose,window.getOpenKey(function(t){if(0==t.code){SdkMgr.appid=t.data.appid,e.openid=t.data.openid,e.openkey=t.data.openkey,StartGetUserInfo.uid=e.openid,StartGetUserInfo.pwd=e.openkey,e.platform=window.OPEN_DATA.platform,e.pf=window.OPEN_DATA.pf;var i=JSON.stringify(t);egret.log("参数》"+i);var o="openid="+e.openid+"&openkey="+e.openkey+"&pf="+e.pf+"&tag=wdws_tanggu_h5_wanba&zoneid="+e.platform;SdkMgr.requestPhpLogin(o)}});var i=window.mqq;i.invoke("ui","setOnShareHandler",function(e){egret.log("type==="+e+"app="+window.OPEN_DATA.qua.app),"SQ"==window.OPEN_DATA.qua.app&&0==e?i.ui.shareArkMessage({title:"《万道武神》游戏分享",desc:"仙侠ARPG挂机游戏，魔幻仙侠与战斗融为一体；嗜血PK、王者荣耀、夺旗等创新玩法",share_url:window.OPEN_DATA.shareurl,image_url:"https://wdwsfile.h5aiwan.com/wdws2/resource/assets/atlas2_ui/denglu/share_wdws.png",back:!0},function(e){egret.log("状态返回"+e),egret.log(e),0==e.retCode&&(egret.log("shareArkMessage分享成功"),this.shareRewardreq())}):i.invoke("ui","shareMessage",{title:"《万道武神》H5游戏分享",desc:"仙侠ARPG挂机游戏，魔幻仙侠与战斗融为一体；嗜血PK、王者荣耀、夺旗等创新玩法",share_type:e,share_url:window.OPEN_DATA.shareurl,image_url:window.OPEN_DATA.appicon,back:!0},function(e){e&&0==e.retCode&&this.shareRewardreq()})})},t.prototype.share_3=function(){egret.log("分享");var e=window.mqq;e.ui.showShareMenu()},t.prototype.pay_3=function(e){this.order=e;var t="https://wdws2-api.h5aiwan.com/api/wdws/lezhongTwo/wanbaPay?zoneid="+this.platform+"&openid="+this.openid+"&openkey="+this.openkey+"&pf="+this.pf+"&tag=wdws_tanggu_h5_wanba&goodsid="+this.order.goodsId+"&money="+this.order.amount+"&serverid="+GameServer.serverID,i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.open(t,egret.HttpMethod.GET),i.send(),i.addEventListener(egret.Event.COMPLETE,this.requestpayComplete,this),egret.log("请求phppay>"+t)},t.prototype.setExtData_3=function(e){},t.prototype.shareRewardreq=function(){var e=new Sproto.cs_wanba_share_use_request;GameSocket.ins().Rpc(C2sProtocol.cs_wanba_share_use,e,this.shareRewardResult,this)},t.prototype.shareRewardResult=function(e){0==e.ret&&UserTips.ins().showTips("领取奖励成功")},t.prototype.requestpayComplete=function(e){var t=e.currentTarget;t.removeEventListener(egret.Event.COMPLETE,this.requestpayComplete,this),egret.log("支付返回"+t.response);var i=JSON.parse(t.response);2==i.code?(egret.log("支付----"),window.popPayTips({version:"v2",defaultScore:10*parseInt(this.order.amount),appid:SdkMgr.appid})):200==i.code?(UserTips.ins().showTips("购买商品成功"),this.order=null):4==i.code?(UserTips.ins().showTips("发货失败"),this.order=null):3==i.code&&(UserTips.ins().showTips("购买失败"),this.order=null)},t.prototype.paySuccess=function(){egret.log("支付成功!"),UserTips.ins().showTips("您已充值成功"),this.pay_3(this.order)},t.prototype.payError=function(){WarnWin.show(TextFlowMaker.generateTextFlow("支付失败"),function(){},this,null,null,"sure",{btnName:"确定",title:"L温馨提示R"})},t.prototype.payClose=function(){WarnWin.show(TextFlowMaker.generateTextFlow("已取消支付"),function(){},this,null,null,"sure",{btnName:"确定",title:"L温馨提示R"})},t.prototype.collection_3=function(){egret.log("请求收藏");var e=window.mqq;e.ui.addShortcut({action:"web",title:"万道武神",icon:"https://wdwsfile.h5aiwan.com/wdws2/resource/assets/atlas2_ui/denglu/share_wdws.png",url:window.OPEN_DATA.jumpurl,callback:function(e){}});var t=new Sproto.cs_channel_share_use_request;t.shareType=3,GameSocket.ins().Rpc(C2sProtocol.cs_channel_share_use,t,function(e){var t="";t=0==e.ret?"领取收藏成功，奖励已经发送到邮件！":"您已经领取过收藏奖励，不再发送奖励！",WarnWin.show(TextFlowMaker.generateTextFlow(t),function(){},this,null,null,"sure",{btnName:"确定",title:"L温馨提示R"})},this)},t}(BaseClass);e.Sdk_3=o,__reflect(o.prototype,"h5_sdk.Sdk_3");var s=function(e){function t(){var t=e.call(this)||this;return t.productCode="76407950625787305789811613324862",t.productKey="41210726",t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getParam_4=function(){window.QuickSDK.init(this.productCode,this.productKey,!0),window.QuickSDK.login(function(e){var i;if(e.status){i="GameDemo:QuickSDK登录成功: uid=>"+e.data.uid;var o="";for(var s in e.data)o+=s+"="+e.data[s]+"&";StartGetUserInfo.urlData=o+"&tag="+LocationProperty.urlParam.tag,SdkMgr.sendServerUrl(),t.ins().info=e.data,egret.log("初始化sdk"),window.QuickSDK.setSwitchAccountNotification(function(e){window.location.reload()}),window.QuickSDK.setLogoutNotification(function(e){window.location.reload()})}else i="GameDemo:QuickSDK登录失败:"+e.message})},t.prototype.pay_4=function(e){var i={};i.serverid=GameServer.serverID+"",i.goodsid=e.goodsId+"",i.amount=e.amount+"",i.tag=LocationProperty.urlParam.tag;var o=new egret.ByteArray,s=JSON.stringify(i);o.writeUTFBytes(s);var n={};n.productCode="04943838744090570821883811669650",n.uid=t.ins().info.uid+"",n.userRoleName=GameLogic.ins().actorModel.name+"",n.userRoleId=GameLogic.ins().actorModel.actorID+"",n.serverId=GameServer.serverID+"",n.userServer=GameServer.serverID+"区",n.userLevel=GameLogic.ins().actorModel.level,n.cpOrderNo=SdkMgr.uuid(18,16)+"",n.amount=e.amount+"",n.count=1,n.subject=e.subject,n.desc="",n.callbackUrl="",n.extrasParams=egret.Base64Util.encode(o.buffer),n.goodsId=e.goodsId+"",n.quantifier="个";var r=JSON.stringify(n);egret.log(r),window.QuickSDK.pay(r,function(e){egret.log("GameDemo:下单通知"+JSON.stringify(e))})},t.prototype.setExtData_4=function(e){var i=new Object;i.isCreateRole=e==SdkMgr.extDataType_2?!0:!1,i.roleCreateTime=SdkMgr.createTime,i.uid=t.ins().info.uid,i.username=t.ins().info.username,i.serverId=GameServer.serverID+"",i.serverName=GameServer.serverID+"区",i.userRoleId=GameLogic.ins().actorModel.actorID+"",i.userRoleName=GameLogic.ins().actorModel.name,i.userRoleBalance=GameLogic.ins().actorModel.yb+"",i.vipLevel=GameLogic.ins().actorModel.vipLv+"",i.userRoleLevel=GameLogic.ins().actorModel.level+"",i.partyId=GameLogic.ins().actorModel.guildID+"",i.partyName=GameLogic.ins().actorModel.guildName,i.gameRoleGender="",i.gameRolePower=GameLogic.ins().actorModel.power+"",i.partyRoleId="",i.partyRoleName="",i.professionId="",i.profession="",i.friendlist="";var o=JSON.stringify(i);window.QuickSDK.uploadGameRoleInfo(o,function(e){e.status?egret.log("提交信息成功"):egret.log(e.message)})},t}(BaseClass);e.Sdk_4=s,__reflect(s.prototype,"h5_sdk.Sdk_4");var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getParam_5=function(){var e="";for(var t in LocationProperty.urlParam)e+=t+"="+LocationProperty.urlParam[t]+"&";if(this.info=window.ZmSdk.getInstance().getUserInfo(),null!=e)for(t in this.info.userdata)e+=t+"="+this.info.userdata[t]+"&";StartGetUserInfo.urlData=e.substr(0,e.length-1),SdkMgr.sendServerUrl()},t.prototype.pay_5=function(e){var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT,t.open(Const.SERVER_LIST_URL+"api/wdws/soeasy/createH5PaySign?feeid="+e.goodsId+"&fee="+parseInt(e.amount)+"&serverid="+GameServer.serverID+"&goods_id="+e.goodsId,egret.HttpMethod.GET),t.send(),t.addEventListener(egret.Event.COMPLETE,this.sendServerSign,this);var i={};i.serverid=GameServer.serverID+"",i.goodsid=e.goodsId+"",i.tag=LocationProperty.urlParam.tag;var o=new egret.ByteArray,s=JSON.stringify(i);o.writeUTFBytes(s);var n={};n.fee=parseInt(e.amount),n.feeid=e.goodsId+"",n.feename=e.subject,n.extradata=egret.Base64Util.encode(o.buffer),n.serverid=GameServer.serverID+"",n.rolename=GameLogic.ins().actorModel.name,n.roleid=GameLogic.ins().actorModel.actorID+"",n.servername=GameServer.serverID+"区",this.payObj=n},t.prototype.sendServerSign=function(e){var t=e.currentTarget;t.removeEventListener(egret.Event.CONNECT,this.sendServerSign,this);var i=JSON.parse(t.response);this.payObj.check=i.data.sign,window.ZmSdk.getInstance().pay(this.payObj,this.onPayCallBackFn)},t.prototype.onPayCallBackFn=function(e){egret.log(e.retcode+"msg=="+e.msg)},t.prototype.setExtData_5=function(e){},t}(BaseClass);e.Sdk_5=n,__reflect(n.prototype,"h5_sdk.Sdk_5");var r=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getParam_6=function(){var e=this,t={shareTitle:"幻想勇者",shareImg:"https://h5game.qianxiyou.com/minigame/images/huangxiangyongzhe/icon.png"},i={isLandscape:!1,dubug:!1,shareInfo:t};window.gameSDK.init(i).then(function(t){console.log("小游戏初始化结果"+t),0==t.statusCode&&e.login()}),setTimeout(function(){window.gameSDK.on("flymeChangeAccount",function(e){console.log("成功调用listen:flymeChangeAccount:",e),window.gameSDK.changeAccount().then(function(e){console.log("成功调用changeAccount:",e),window.location.reload()})},!0)},1e3)},t.prototype.login=function(){window.gameSDK.login().then(function(e){if(console.log("登录成功：",e),0==e.statusCode){var t="";for(var i in e.loginParams)t+=i+"="+e.loginParams[i]+"&";t+="tag="+SdkMgr.tag,StartGetUserInfo.urlData=t,SdkMgr.sendServerUrl()}else window.location.reload()})},t.prototype.pay_6=function(e){var t={};t.serverid=GameServer.serverID+"",t.goodsid=e.goodsId+"",t.amount=e.amount+"",t.tag=LocationProperty.urlParam.tag,t.uid=StartGetUserInfo.uid;var i="",o=e.subject.indexOf("=");i=-1!=o?e.subject.substr(0,o-1)+"等于"+e.subject.substr(o+1,e.subject.length):e.subject;var s=new egret.ByteArray,n=JSON.stringify(t);s.writeUTFBytes(n);var r={amount:e.amount+"00",cpProductId:e.goodsId,productName:e.subject,callbackURL:Const.SERVER_LIST_URL+"api/bsymx/daqian/h5Pay",callbackInfo:egret.Base64Util.encode(s.buffer),serverId:GameServer.serverID,serverName:GameServer.serverName+"区",roleName:GameLogic.ins().actorModel.name,roleId:GameLogic.ins().actorModel.actorID+"",rate:100,roleLevel:GameLogic.ins().actorModel.level,sociaty:GameLogic.ins().actorModel.guildName,lastMoney:GameLogic.ins().actorModel.yb+"",vipLevel:GameLogic.ins().actorModel.vipLv};window.gameSDK.recharge(r).then(function(e){console.log("充值：",e)})},t.prototype.setExtData_6=function(e){var t={roleId:GameLogic.ins().actorModel.actorID+"",roleName:GameLogic.ins().actorModel.name,roleLevel:GameLogic.ins().actorModel.level,serverId:GameServer.serverID,serverName:GameServer.serverName+"区",vipLevel:GameLogic.ins().actorModel.vipLv?GameLogic.ins().actorModel.vipLv:"0",userMoney:GameLogic.ins().actorModel.yb?GameLogic.ins().actorModel.yb:"0",roleCTime:SdkMgr.createTime,gender:"",professionId:"0",profession:"",power:GameLogic.ins().actorModel.power,partyid:GameLogic.ins().actorModel.guildID,partyname:GameLogic.ins().actorModel.guildName,partyroleid:"0",partyrolename:"",payTotal:"",roleLevelUpTime:e==SdkMgr.extDataType_3?GameServer._serverTime:"",task_id:"",task_name:"",task_status:"",honor_id:"",honor_name:""};switch(egret.log("角色上报"+JSON.stringify(t)),e){case SdkMgr.extDataType_1:window.gameSDK.changeRole(t).then(function(e){console.log("切换角色登录：",e)});break;case SdkMgr.extDataType_2:window.gameSDK.createRole(t).then(function(e){console.log("角色创建：",e)});break;case SdkMgr.extDataType_3:window.gameSDK.upgradeRole(t).then(function(e){console.log("角色升级：",e)});break;case SdkMgr.extDataType_5:window.gameSDK.slectServe().then(function(e){console.log("选择服务器：",e)})}},t}(BaseClass);e.Sdk_6=r,__reflect(r.prototype,"h5_sdk.Sdk_6");var a=function(e){function t(){var t=e.call(this)||this;return t.productCode="86526461240369773215048491299087",t.productKey="64028630",t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getParam_7=function(){Const.BG_SERVER_URL="https://ro-bg.h5aiwan.com/",QuickH5SDK.ins().getParam(this.productCode,this.productKey)},t.prototype.pay_7=function(e){QuickH5SDK.ins().pay(e)},t.prototype.setExtData_7=function(e){QuickH5SDK.ins().setExtData(e)},t}(BaseClass);e.Sdk_7=a,__reflect(a.prototype,"h5_sdk.Sdk_7");var l=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.ins=function(){return t.ins.call(this)},i.prototype.getParam_8=function(){SdkMgr.requestType=1,egret.log("调用服务器"),i.GIFT=LocationProperty.urlParam.GIFT,window.__paySuccess=i.ins().paySuccess,window.__payError=i.ins().payError,window.__payClose=i.ins().payClose,window.getOpenKey(function(e){if(0==e.code){i.appid=SdkMgr.appid=e.data.appid,i.openid=e.data.openid,i.openkey=e.data.openkey,StartGetUserInfo.uid=i.openid,StartGetUserInfo.pwd=i.openkey,i.platform=window.OPEN_DATA.platform,i.pf=window.OPEN_DATA.pf;var t=JSON.stringify(e);egret.log("参数》"+t),StartGetUserInfo.urlData=Const.SERVER_LIST_URL+"get_player_serverinfo_qqwanba?openid="+i.openid+"&openkey="+i.openkey+"&pf="+i.pf+"&zoneid="+i.platform+"&appid="+SdkMgr.appid,StartGetUserInfo.GetUserInfo()}});var e=window.mqq;e.invoke("ui","setOnShareHandler",function(t){egret.log("type==="+t+"app="+window.OPEN_DATA.qua.app),"SQ"==window.OPEN_DATA.qua.app&&0==t?e.ui.shareArkMessage({title:"《苍元战记》游戏分享",desc:"超萌日系幻想MMO放置手游，邀您展开不思议冒险之旅！全民VIP即登即送！零氪金也能爽翻天！",share_url:window.OPEN_DATA.shareurl,image_url:window.OPEN_DATA.appicon,back:!0},function(e){egret.log("状态返回"+e),egret.log(e),e&&0==e.retCode&&(egret.log("shareArkMessage分享成功"),i.ins().shareRewardreq())}):e.invoke("ui","shareMessage",{title:"《苍元战记》H5游戏分享",desc:"超萌日系幻想MMO放置手游，邀您展开不思议冒险之旅！全民VIP即登即送！零氪金也能爽翻天！",share_type:t,share_url:window.OPEN_DATA.shareurl,image_url:window.OPEN_DATA.appicon,back:!0},function(e){egret.log("状态返回"+e),egret.log(e),e&&0==e.retCode?(egret.log("分享成功"),i.ins().shareRewardreq()):egret.log("分享取消")})})},i.prototype.share_8=function(){egret.log("分享");var e=window.mqq;e.ui.showShareMenu()},i.prototype.pay_8=function(e){i.order=e;var t=SdkMgr.appid,o=new Sproto.cs_buy_wanba_item_request;o.goodsid=e.goodsId,o.zoneid=i.platform,o.appid=t,o.openid=i.openid,o.pf=i.pf,o.openkey=i.openkey,1==parseInt(e.amount)?o.money=1:o.money=parseInt(e.amount),GameSocket.ins().Rpc(C2sProtocol.cs_buy_wanba_item,o,this.rpcRspHandler,i.ins())},i.prototype.rpcRspHandler=function(e){egret.log("ret="+e.ret+">>>type="+i.type+"price="+e.price),1==e.ret?(egret.log("支付----appid"+SdkMgr.appid+"价格"+10*parseInt(i.order.amount)),window.popPayTips({version:"v2",defaultScore:10*parseInt(i.order.amount),appid:SdkMgr.appid})):0==e.ret&&(UserTips.ins().showTips("购买商品成功"),i.order=null)},i.prototype.setExtData_8=function(e){egret.log("数据上报"),1==e?window.reportLogin():2==e&&window.reportRegister()},i.prototype.shareRewardreq=function(){egret.log("分享请求");var e=new Sproto.cs_channel_share_use_request;e.shareType=14,egret.log("分享请求"+e),GameSocket.ins().Rpc(C2sProtocol.cs_channel_share_use,e,function(e){var t="";t=0==e.ret?"领取分享成功，奖励已经发送到邮件！":"您已经领取过分享奖励，不再发送奖励！",WarnWin.show(TextFlowMaker.generateTextFlow(t),function(){},this,null,null,"sure",{btnName:"确定",title:"L温馨提示R"})},this)},i.prototype.requestpayComplete=function(e){var t=e.currentTarget;t.removeEventListener(egret.Event.COMPLETE,this.requestpayComplete,this),egret.log("支付返回"+t.response);var o=JSON.parse(t.response);2==o.code?(egret.log("支付----"),window.popPayTips({version:"v2",defaultScore:10*parseInt(i.order.amount),appid:SdkMgr.appid})):200==o.code?(UserTips.ins().showTips("购买商品成功"),i.order=null):4==o.code?(UserTips.ins().showTips("发货失败"),i.order=null):3==o.code&&(UserTips.ins().showTips("购买失败"),i.order=null)},i.prototype.paySuccess=function(){egret.log("支付成功!"),e.Sdk_8.ins().pay_8(i.order),egret.log("支付成功2"),i.type=!0},i.prototype.payError=function(){WarnWin.show(TextFlowMaker.generateTextFlow("支付失败"),function(){},this,null,null,"sure",{btnName:"确定",title:"L温馨提示R"})},i.prototype.payClose=function(){WarnWin.show(TextFlowMaker.generateTextFlow("已取消支付"),function(){},this,null,null,"sure",{btnName:"确定",title:"L温馨提示R"})},i.prototype.collection_8=function(){egret.log("请求收藏");var e=window.mqq;e.ui.addShortcut({action:"web",title:"苍元战记",icon:window.OPEN_DATA.appicon,url:window.OPEN_DATA.jumpurl,callback:function(e){}});var t=new Sproto.cs_channel_share_use_request;t.shareType=13,GameSocket.ins().Rpc(C2sProtocol.cs_channel_share_use,t,function(e){var t="";t=0==e.ret?"领取收藏成功，奖励已经发送到邮件！":"您已经领取过收藏奖励，不再发送奖励！",WarnWin.show(TextFlowMaker.generateTextFlow(t),function(){},this,null,null,"sure",{btnName:"确定",title:"L温馨提示R"})},this)},i.type=!1,i}(BaseClass);e.Sdk_8=l,__reflect(l.prototype,"h5_sdk.Sdk_8");var h=function(e){function t(){var t=e.call(this)||this;return t.game_key="e078dedf41fbe074ca03e0b3989adf21",t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getParam_9=function(){this.hgame=new window.xqhGame,SdkMgr.requestType=2;var e="";for(var t in LocationProperty.urlParam)e+=t+"="+LocationProperty.urlParam[t]+"&";StartGetUserInfo.urlData=e+"tag="+SdkMgr.tag,SdkMgr.sendServerUrl()},t.prototype.pay_9=function(e){var t={};t.serverid=GameServer.serverID+"",t.goodsid=e.goodsId+"",t.amount=e.amount+"",t.tag=SdkMgr.tag;var i=new egret.ByteArray,o=JSON.stringify(t);i.writeUTFBytes(o);var s={};s.description=e.subject,s.extends_data=egret.Base64Util.encode(i.buffer),s.game_area=GameServer.serverID,s.game_group=GameServer.serverName,s.game_key=this.game_key,s.game_level=GameLogic.ins().actorModel.level,s.game_orderid=SdkMgr.uuid(18,16)+"",s.game_price=e.amount,s.game_role_id=GameLogic.ins().actorModel.actorID+"",s.notify_id="-1",s.subject=e.subject,s.user_id=StartGetUserInfo.uid2;var o="";for(var n in s)o+=n+"="+s[n]+"&";var r=new egret.HttpRequest;r.responseType=egret.HttpResponseType.TEXT,r.open(Const.SERVER_LIST_URL+"api/bsymx/baoyuzxdl/getPaySign?"+o.substr(0,o.length-1),egret.HttpMethod.GET),r.send(),r.addEventListener(egret.Event.COMPLETE,this.getPaySign,this)},t.prototype.getPaySign=function(e){var t=e.currentTarget;t.removeEventListener(egret.Event.CONNECT,this.getPaySign,this);var i=JSON.parse(t.response);i=i.data;var o={};o.complete=this.payCallBack,o.pay_obj=i.pay_obj,this.hgame.pay(o)},t.prototype.payCallBack=function(e){egret.log("支付"+e.errorno=="0"?"成功":e.complete)},t.prototype.setExtData_9=function(e){if(2==e){var t={};t.game_key=this.game_key,t.user_id=StartGetUserInfo.uid2,t.role_name=GameLogic.ins().actorModel.name,t.game_area=GameServer.serverName;var i="";for(var o in t)i+=o+"="+t[o]+"&";var s=Const.SERVER_LIST_URL+"api/bsymx/baoyuzxdl/getRoleSign?"+i.substr(0,i.length-1),n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open(s,egret.HttpMethod.GET),n.send(),n.addEventListener(egret.Event.COMPLETE,this.getUpdateSign,this),egret.log("创建"+s)}},t.prototype.getUpdateSign=function(e){var t=e.currentTarget;t.removeEventListener(egret.Event.CONNECT,this.getUpdateSign,this);var i=JSON.parse(t.response);i=i.data;var o={};o=i.role_obj,o.complete=this.complete,this.hgame.game_role_callback(o)},t.prototype.complete=function(e){egret.log("0"==e.errorno?"成功":e.complete)},t}(BaseClass);e.Sdk_9=h,__reflect(h.prototype,"h5_sdk.Sdk_9");var c=function(e){function t(){var t=e.call(this)||this;return t.productCode="49618624822552987326879360917331",t.productKey="20216465",t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getParam_10=function(){QuickH5SDK.ins().getParam(this.productCode,this.productKey)},t.prototype.pay_10=function(e){QuickH5SDK.ins().pay(e)},t.prototype.setExtData_10=function(e){QuickH5SDK.ins().setExtData(e)},t.prototype.share_10=function(){window.qhsdk.share(),setTimeout(function(){var e=new Sproto.cs_channel_share_use_request;e.shareType=14,egret.log("分享请求"+e),GameSocket.ins().Rpc(C2sProtocol.cs_channel_share_use,e,function(e){var t="";t=0==e.ret?"领取分享成功，奖励已经发送到邮件！":"您已经领取过分享奖励，不再发送奖励！",WarnWin.show(TextFlowMaker.generateTextFlow(t),function(){},this,null,null,"sure",{btnName:"确定",title:"L温馨提示R"})},this)},1e4)},t}(BaseClass);e.Sdk_10=c,__reflect(c.prototype,"h5_sdk.Sdk_10");var u=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getParam_11=function(){this._vivoGame=window.qg,this._vivoGame.authorize({type:"code",success:function(e){var t="";for(var i in e)t+=i+"="+e[i]+"&";egret.log(e),t+="tag="+SdkMgr.tag,StartGetUserInfo.urlData=t,SdkMgr.sendServerUrl()},fail:function(e,i){egret.log("登录失败"),t.ins().getParam_11()}})},t.prototype.pay_11=function(e){var t=(new Date).getTime(),i="";i=GameServer.serverID+"_"+e.goodsId+"_"+GameLogic.ins().actorModel.actorID+"_"+t;var o=new egret.ByteArray,s=JSON.stringify(i);o.writeUTFBytes(s);var n={};n.version="1.0.0",n.signMethod="MD5",n.packageName="com.ld.jfty.vivominigame",n.cpOrderNumber=egret.Base64Util.encode(o.buffer),n.notifyUrl=Const.SERVER_LIST_URL+"api/Bsymx/Baoyujfty/vivoPay",n.orderAmount=e.amount+".00",n.orderTitle=e.subject,n.orderDesc=e.subject;var s="";for(var r in n)s+=r+"="+n[r]+"&";var a=Const.SERVER_LIST_URL+"api/Bsymx/Baoyujfty/vivoSignature?"+s.substr(0,s.length-1);egret.log("支付"+a);var l=new egret.HttpRequest;l.responseType=egret.HttpResponseType.TEXT,l.open(a,egret.HttpMethod.GET),l.send(),l.addEventListener(egret.Event.COMPLETE,this.getPaySign,this)},t.prototype.getPaySign=function(e){var t=e.currentTarget;t.removeEventListener(egret.Event.CONNECT,this.getPaySign,this);var i=JSON.parse(t.response);i=i.data;var o=JSON.stringify(i);egret.log("支付支付串"+o),this._vivoGame.pay({orderInfo:o,success:function(e){},fail:function(e,t){egret.log("支付失败"+e+t)},cancel:function(){egret.log("取消")}})},t.prototype.setExtData_11=function(e){},t}(BaseClass);e.Sdk_11=u,__reflect(u.prototype,"h5_sdk.Sdk_11");var d=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getParam_12=function(){this._vivoGame=window.qg,this._vivoGame.authorize({type:"code",success:function(e){var t="";for(var i in e)t+=i+"="+e[i]+"&";egret.log(e),t+="tag="+SdkMgr.tag,StartGetUserInfo.urlData=t,SdkMgr.sendServerUrl()},fail:function(e,t){egret.log("登录失败"),u.ins().getParam_11()}})},t.prototype.pay_12=function(e){},t.prototype.setExtData_12=function(e){},t}(BaseClass);e.Sdk_12=d,__reflect(d.prototype,"h5_sdk.Sdk_12")}(h5_sdk||(h5_sdk={}));var WxSdkEvt=function(){function e(){}return e.WX_HIDEIOSPAY_FORBUTTON="WX_HIDEIOSPAY_FORBUTTON",e}();__reflect(WxSdkEvt.prototype,"WxSdkEvt"),window.WxSdkEvt=WxSdkEvt;var SoundUtils=function(){function e(){this.m_BGMVolume=1,this.m_effectVolume=1,this.m_effectEnable=!0,this.m_musicEnable=!0,this.m_sounds=new Dictionary,this.m_loadings=new Dictionary,this.m_channels=new Dictionary,this.m_curBGM=new Dictionary,this.m_curEffect=new Dictionary,this.m_callbacks=new Dictionary,this.m_playChannel=new Dictionary;var e=egret.localStorage.getItem("soundEffect");e&&(this.m_effectVolume=parseInt(e)),e=egret.localStorage.getItem("soundBGM"),e&&(this.m_BGMVolume=parseInt(e))}return e.getInstance=function(){return null==e.s_instance&&(e.s_instance=new e),e.s_instance},e.prototype.onPlayComplete=function(e){var t=e.currentTarget,i=this.m_callbacks.get(t.hashCode);i&&i(),t.count++,t.count>=t.maxCount&&this.stop(t.owner)},e.prototype.stopSound=function(e){var t=this.m_playChannel.get(e);t&&this.stop(t)},e.prototype.stop=function(e){var t=this.m_channels.get(e.hashCode);t&&t&&(t.stop(),t.hasEventListener(egret.Event.SOUND_COMPLETE)&&t.removeEventListener(egret.Event.SOUND_COMPLETE,this.onPlayComplete,this),this.m_callbacks.remove(t.hashCode),this.m_channels.remove(e.hashCode)),this.m_playChannel.remove(e.cover),e.type==egret.Sound.EFFECT?this.m_curEffect.remove(this.m_sounds.getKeyByValue(e)):this.m_curBGM.remove(this.m_sounds.getKeyByValue(e))},e.prototype.stopAllMusic=function(){for(var e=this.m_curBGM.values,t=0,i=e.length;i>t;t++){var o=e[t];o&&this.stop(o)}},e.prototype.stopAllEffect=function(){for(var e=this.m_curEffect.values,t=0,i=e.length;i>t;t++){var o=e[t];o&&this.stop(o)}},e.prototype.playSound=function(e,t,i,o){var s=this;void 0===t&&(t=1),void 0===o&&(o=!0);var n=GlobalConfig.ins("soundConfig")[e];if(!n)return void egret.warn("ID为"+e+"的音效在SoundConfig中不存在");if((!this.isSoundPlaying(e)||1!=n.soundType||1!=o)&&(this.stopSound(n.coverKey),(0!=n.soundType||this.m_effectEnable)&&(0==n.soundType||this.m_musicEnable))){var r=this.m_sounds.get(e);if(!r)if(r=RES.getRes(n.soundResource+"_mp3"))r.type=0==n.soundType?egret.Sound.EFFECT:egret.Sound.MUSIC,this.m_sounds.set(e,r);else{var a={config:n,loop:t,callback:i};n.soundType>=0&&this.m_loadings.set(e,a),RES.getResAsync(n.soundResource+"_mp3",function(){s.m_loadings.remove(e)&&s.playSound(e,t,i)},this)}if(r){r.type==egret.Sound.EFFECT?this.m_curEffect.set(e,r):this.m_curBGM.set(e,r),this.m_playChannel.set(n.coverKey,r),r.cover=n.coverKey,r.cover=n.id;var l=r.play(0,t);l&&(l.owner=r,l.maxCount=t>0?t:Number.MAX_VALUE,l.count=0,r.type==egret.Sound.EFFECT?l.volume=this.m_effectVolume:l.volume=this.m_BGMVolume,i&&this.m_callbacks.set(l.hashCode,i),l.addEventListener(egret.Event.SOUND_COMPLETE,this.onPlayComplete,this),this.m_channels.set(r.hashCode,l))}}},e.prototype.stopSoundByID=function(e){var t=this.m_sounds.get(e);t&&(this.stop(t),this.m_loadings.remove(e))},e.prototype.stopAllSound=function(){this.stopAllEffect(),this.stopAllMusic(),this.m_loadings&&this.m_loadings.clear()},e.prototype.setBGMValume=function(e){egret.localStorage.setItem("soundBGM",e.toString()),this.m_BGMVolume=e;for(var t=this.m_curBGM.values,i=0,o=t.length;o>i;i++){var s=t[i];if(s){var n=this.m_channels.get(s.hashCode);n&&(n.volume=this.m_musicEnable?e:0)}}},e.prototype.getBGMValue=function(){return this.m_BGMVolume},e.prototype.setEffectValume=function(e){egret.localStorage.setItem("soundEffect",e.toString()),this.m_effectVolume=e;for(var t=this.m_curEffect.values,i=0,o=t.length;o>i;i++){var s=t[i];if(s){var n=this.m_channels.get(s.hashCode);n&&(n.volume=this.m_effectEnable?e:0)}}},e.prototype.getEffectValue=function(){return this.m_effectVolume},e.prototype.setEffectEnable=function(e){this.m_effectEnable=e,this.setEffectValume(this.m_effectVolume)},e.prototype.setMusicEnable=function(e){this.m_musicEnable=e,this.setBGMValume(this.m_BGMVolume)},e.prototype.isSoundPlaying=function(e){var t=this.m_sounds.get(e);if(t){var i=this.m_channels.get(t.hashCode);if(i)return!0}return!1},e}();__reflect(SoundUtils.prototype,"SoundUtils"),window.SoundUtils=SoundUtils;var BitUtil=function(){function e(){}return e.Has=function(e,t){return(e&1<<t)>0},e.Set=function(e,t,i){return i?e|=1<<(255&t):e&=~(1<<(255&t)),e},e.decoderError=function(e,t){return e&&egret.$error(1027),t||65533},e.encoderError=function(e){egret.$error(1026,e)},e.inRange=function(e,t,i){return e>=t&&i>=e},e.div=function(e,t){return Math.floor(e/t)},e.decodeUTF8=function(e){for(var t,i=!1,o=0,s="",n=0,r=0,a=0,l=0;e.length>o;){var h=e[o++];if(h==this.EOF_byte)t=0!=r?this.decoderError(i):this.EOF_code_point;else if(0==r)this.inRange(h,0,127)?t=h:(this.inRange(h,194,223)?(r=1,l=128,n=h-192):this.inRange(h,224,239)?(r=2,l=2048,n=h-224):this.inRange(h,240,244)?(r=3,l=65536,n=h-240):this.decoderError(i),n*=Math.pow(64,r),t=null);else if(this.inRange(h,128,191))if(a+=1,n+=(h-128)*Math.pow(64,r-a),a!==r)t=null;else{var c=n,u=l;n=0,r=0,a=0,l=0,t=this.inRange(c,u,1114111)&&!this.inRange(c,55296,57343)?c:this.decoderError(i,h)}else n=0,r=0,a=0,l=0,o--,t=this.decoderError(i,h);null!==t&&t!==this.EOF_code_point&&(65535>=t?t>0&&(s+=String.fromCharCode(t)):(t-=65536,s+=String.fromCharCode(55296+(t>>10&1023)),s+=String.fromCharCode(56320+(1023&t))))}return s},e.encodeUTF8=function(t){for(var i=0,o=e.stringToCodePoints(t),s=[];o.length>i;){var n=o[i++];if(e.inRange(n,55296,57343))e.encoderError(n);else if(e.inRange(n,0,127))s.push(n);else{var r=void 0,a=void 0;for(e.inRange(n,128,2047)?(r=1,a=192):e.inRange(n,2048,65535)?(r=2,a=224):e.inRange(n,65536,1114111)&&(r=3,a=240),s.push(e.div(n,Math.pow(64,r))+a);r>0;){var l=e.div(n,Math.pow(64,r-1));s.push(128+l%64),r-=1}}}return new Uint8Array(s)},e.UTF8ByteCount=function(e){return this.encodeUTF8(e).length},e.stringToCodePoints=function(t){for(var i=[],o=0,s=t.length;o<t.length;){var n=t.charCodeAt(o);if(e.inRange(n,55296,57343))if(e.inRange(n,56320,57343))i.push(65533);else if(o==s-1)i.push(65533);else{var r=t.charCodeAt(o+1);if(e.inRange(r,56320,57343)){var a=1023&n,l=1023&r;o+=1,i.push(65536+(a<<10)+l)}else i.push(65533)}else i.push(n);o+=1}return i},e.EOF_byte=-1,e.EOF_code_point=-1,e}();__reflect(BitUtil.prototype,"BitUtil"),window.BitUtil=BitUtil;var StatisticsUtils=function(){function e(){}return e.create=function(){if(e.open){var t=["counter","channel","account","network_type"];
t.sort();var i={};i.counter="create",i.channel="android",i.account=StartGetUserInfo.username,i.network_type="4G";var o=e.getObjStrParam(i,t),s=o+e.secretKey,n=md5.hex_md5(s),r=o+"&sign="+n;HttpClient.post(function(e){console.log("玩家注册返回"+e)},this,r)}},e.login=function(){if(e.open){var t=["counter","channel","server_id","account","actor_id","actor_name","user_level","user_level"];t.sort();var i={};i.counter="login",i.channel="android",i.server_id=StartGetUserInfo.ServerId,i.account=StartGetUserInfo.username,i.actor_id=StartGetUserInfo.uid,i.actor_name=StartGetUserInfo.username,i.user_level="14";var o=e.getObjStrParam(i,t),s=o+e.secretKey,n=md5.hex_md5(s),r=o+"&sign="+n;HttpClient.post(function(e){console.log("玩家登录返回"+e)},this,r)}},e.debugInfoLogPhp=function(e){var t="pfrom_id="+SdkMgr.platformid;t+="&server_id="+GameServer.serverID,t+="&account="+StartGetUserInfo.uid,t+="&actor_name="+GameLogic.ins().actorModel.name,t+="&message="+e+">>>>手机型号：系统信息："+SdkMgr.osInfo,HttpClient.post(function(e){console.log("通知php成功返回"+e.message)},this,t,"JSON","https://wdws2-api.h5aiwan.com/api/changyu/noseError")},e.setPhpLoading=function(e){if(0!=this.isSetdata||0!=Main.isDebug){var t={};t.pfrom_id=SdkMgr.platformid,t.server_id=GameServer.serverID,t.channel=StartGetUserInfo.channelId2,t.account=StartGetUserInfo.uid,t.actor_name=GameLogic.ins().actorModel.name,t.schedule=e,t.click_count=2==e?this.clickNum:0,t.load_time=egret.getTimer()-this.time;var i="";for(var o in t)i+=o+"="+t[o]+"&";i=i.substr(0,i.length-1),egret.log("上报"+i),HttpClient.get(function(e){console.log("通知php上报返回"+e.code)},this,i,"JSON","https://wdws2-api.h5aiwan.com/api/changyu/noseLoad")}},e.setPhpClick=function(e){if(0!=this.isSetdata){var t={};t.pfrom_id=SdkMgr.platformid,t.server_id=GameServer.serverID,t.channel=StartGetUserInfo.channelId2,t.account=StartGetUserInfo.uid,t.actor_name=GameLogic.ins().actorModel.name,t.schedule=1,t.click_type=e,t.click_time=egret.getTimer()-CreateRoleView.startTime;var i="";for(var o in t)i+=o+"="+t[o]+"&";i=i.substr(0,i.length-1),egret.log("上报"+i),HttpClient.get(function(e){console.log("通知php上报返回"+e.code)},this,i,"JSON","https://wdws2-api.h5aiwan.com/api/changyu/noseClick")}},e.getObjStrParam=function(e,t){for(var i="",o=t.length,s=0;o>s;s++)i+=s!=o-1?t[s]+"="+e[t[s]]+"&":t[s]+"="+e[t[s]];return i},e.loginErrorLogPhp=function(e){},e.prototype.test=function(){var e=new egret.HttpRequest;e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var t="http://192.168.1.38:7071/api/report";console.log(t),e.responseType=egret.HttpResponseType.TEXT,e.open(t,egret.HttpMethod.GET),e.send(),e.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),e.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this)},e.prototype.onGetComplete=function(e){e.currentTarget},e.prototype.onGetIOError=function(e){console.log("get error : "+e)},e.prototype.onGetProgress=function(e){console.log("get progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},e.playerSetData=function(t,i){if(!Main.isDebug){var o="";o+="account="+GameLogic.ins().actorModel.actorID+"-"+StartGetUserInfo.uid,o+="&actor_name="+GameLogic.ins().actorModel.name,o+="&channel=7",o+="&counter=load_client",o+="&load_time="+(egret.getTimer()-i),o+="&pfrom_id="+SdkMgr.platformid,o+="&schedule="+t,o+="&server_id="+GameServer.serverID;var s=o+e.secretKey,n=md5.hex_md5(s);o=o+"&sign="+n}},e.open=!1,e.secretKey="yonghengxianyu#123!@#$%^&*",e.clickNum=0,e.time=0,e.isSetdata=!1,e.time1=0,e.time2=0,e.time3=0,e.time4=0,e.time5=0,e}();__reflect(StatisticsUtils.prototype,"StatisticsUtils"),window.StatisticsUtils=StatisticsUtils;var Sproto;!function(e){var t=function(){function e(){}return e}();e.MetaInfo=t,__reflect(t.prototype,"Sproto.MetaInfo");var i=function(){function e(){this.MetaDictionary={}}return e.prototype._GetMeta=function(e){var i=this.MetaDictionary[e];return null==i&&(i=new t,this.MetaDictionary[e]=i),i},e.prototype.SetProtocol=function(e){var t=this._GetMeta(e);t.ProtocolType=e},e.prototype.SetRequest=function(e,t){var i=this._GetMeta(e);i.RequestType=t},e.prototype.SetResponse=function(e,t){var i=this._GetMeta(e);i.ResponseType=t},e.prototype._Gen=function(e,t,i,o){void 0===o&&(o=0);var s=new e;return s.InitArray(i,o),s},e.prototype.GenResponse=function(e,t,i){void 0===i&&(i=0);var o=this.MetaDictionary[e];return this._Gen(o.ResponseType,e,t,i)},e.prototype.GenRequest=function(e,t,i){void 0===i&&(i=0);var o=this.MetaDictionary[e];return null==o.RequestType?null:this._Gen(o.RequestType,e,t,i)},e.prototype.Get=function(e){return this.MetaDictionary[e]},e}();e.ProtocolFunctionDictionary=i,__reflect(i.prototype,"Sproto.ProtocolFunctionDictionary")}(Sproto||(Sproto={}));var Sproto;!function(e){var t;!function(e){e[e.Begin=0]="Begin",e[e.Current=1]="Current",e[e.End=2]="End"}(t=e.SeekOrigin||(e.SeekOrigin={}));var i=function(){function e(){this.m_Data=new DataView(new ArrayBuffer(0))}return Object.defineProperty(e.prototype,"Position",{get:function(){return this.m_Position},set:function(e){this.m_Position=e,this.write_position=e>this.write_position?e:this.write_position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Buffer",{get:function(){return this.m_Data.buffer},set:function(e){this.m_Data=new DataView(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Length",{get:function(){return this.write_position},set:function(e){this.write_position=e;var t=new Uint8Array(new ArrayBuffer(e)),i=this.m_Data.buffer.byteLength;i>e&&(this.m_Position=e);var o=Math.min(i,e);t.set(new Uint8Array(this.m_Data.buffer,0,o)),this.Buffer=t.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mBytesAvailable",{get:function(){return this.m_Data.byteLength-this.m_Position},enumerable:!0,configurable:!0}),e.prototype.Seek=function(e,i){switch(i){case t.Begin:this.Position=e;break;case t.Current:this.Position+=e;break;case t.End:this.Position=this.Length+e}},e.prototype.WriteByte=function(e){this.ValidateBuffer(1),this.m_Data.setInt8(this.Position++,e)},e.prototype.ValidateBuffer=function(e,t){if(void 0===t&&(t=!1),this.write_position=e>this.write_position?e:this.write_position,e+=this.m_Position,this.m_Data.byteLength<e||t){var i=new Uint8Array(new ArrayBuffer(e)),o=Math.min(this.m_Data.buffer.byteLength,e);i.set(new Uint8Array(this.m_Data.buffer,0,o)),this.Buffer=i.buffer}},e.prototype.WriteBytes=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var o;if(!(0>t)&&!(0>i)&&(o=0==i?e.length-t:Math.min(e.length-t,i),o>0)){this.ValidateBuffer(o);for(var s=new DataView(e.buffer),n=o,r=4;n>r;n-=r)this.m_Data.setUint32(this.m_Position,s.getUint32(t)),this.Position+=r,t+=r;for(;n>0;n--)this.m_Data.setUint8(this.Position++,s.getUint8(t++))}},e.prototype.ReadBytes=function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),0==i)i=this.mBytesAvailable;else if(!this.Validate(i))return null;for(var o=0;i>o;o++)e[o+t]=this.m_Data.getUint8(this.Position++)},e.prototype.Validate=function(e){return this.m_Data.byteLength>0&&this.m_Position+e<=this.m_Data.byteLength?!0:void egret.$error(1025)},e}();e.SByteArray=i,__reflect(i.prototype,"Sproto.SByteArray")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(){return e.call(this,2)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.session=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.session&&this.se.wi(this.session,1),this.se.Close()},t}(e.SprotoTypeBase);e.Spackage=t,__reflect(t.prototype,"Sproto.Spackage")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(){function t(){}return t.Init=function(){t.m_ParserPack=new e.SprotoPack,t.m_Pkg=new e.Spackage},t.Dispatch=function(i){var o=t.m_ParserPack,s=o.Unpack(i),n=t.m_Pkg;n.type=void 0,n.session=void 0;var r=n.InitArray(s);if(n.type){var a=e.SprotoReceiver.HandlerType(n.type,n.session,s,r);if(null!=a)return e.SprotoSender.SendData(a,n.session,n.type)}else e.SprotoSender.HandlerSession(n.session,s,r);return null},t}();e.SprotoCore=t,__reflect(t.prototype,"Sproto.SprotoCore")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(){function t(){this.m_Buffer=new e.SByteArray,this.m_Tmp=new Uint8Array([0,0,0,0,0,0,0,0])}return t.prototype._Writeff=function(t,i,o,s){var n=s+7&-8,r=this.m_Buffer.Position;this.m_Buffer.Seek(o,e.SeekOrigin.Begin),this.m_Buffer.WriteByte(255),this.m_Buffer.WriteByte(n/8-1),this.m_Buffer.WriteBytes(t,i,s);for(var a=0;n-s>a;a++)this.m_Buffer.WriteByte(0);this.m_Buffer.Seek(r,e.SeekOrigin.Begin)},t.prototype.PackSeg=function(t,i,o){var s=0,n=0,r=this.m_Buffer.Position;this.m_Buffer.Seek(1,e.SeekOrigin.Current);for(var a=0;8>a;a++)0!=t[i+a]&&(n++,s|=1<<a,this.m_Buffer.WriteByte(t[i+a]));return(7==n||6==n)&&o>0&&(n=8),8==n?o>0?(this.m_Buffer.Seek(r,e.SeekOrigin.Begin),8):(this.m_Buffer.Seek(r,e.SeekOrigin.Begin),10):(this.m_Buffer.Seek(r,e.SeekOrigin.Begin),this.m_Buffer.WriteByte(s),this.m_Buffer.Seek(r,e.SeekOrigin.Begin),n+1)},t.prototype.Pack=function(t,i){void 0===i&&(i=0),this.Clear();for(var o=0==i?t.length:i,s=null,n=0,r=0,a=0,l=t,h=0,c=0;o>c;c+=8){h=c;var u=c+8-o;if(u>0){for(var d=0;8-u>d;d++)this.m_Tmp[d]=l[c+d];for(var d=0;u>d;d++)this.m_Tmp[7-d]=0;l=this.m_Tmp,h=0}var p=this.PackSeg(l,h,a);10==p?(s=l,n=h,r=this.m_Buffer.Position,a=1):8==p&&a>0?(++a,256==a&&(this._Writeff(s,n,r,2048),a=0)):a>0&&(this._Writeff(s,n,r,8*a),a=0),this.m_Buffer.Seek(p,e.SeekOrigin.Current)}if(1==a)this._Writeff(s,n,r,8);else if(a>1){var f=s==t?o:s.length;this._Writeff(s,n,r,f-n)}var g=(o+2047)/2048*2+o+2;g<this.m_Buffer.Position&&e.SprotoTypeSize.error("packing error, return size="+this.m_Buffer.Position);var _=new Uint8Array(this.m_Buffer.Position);return this.m_Buffer.Seek(0,e.SeekOrigin.Begin),this.m_Buffer.ReadBytes(_,0,_.length),_},t.prototype.Unpack=function(t,i){void 0===i&&(i=0),this.Clear(),i=0==i?t.length:i;for(var o=i;o>0;){var s=t[i-o];if(--o,255==s){0>o&&e.SprotoTypeSize.error("invalid unpack stream.");var n=8*(t[i-o]+1);n+1>o&&e.SprotoTypeSize.error("invalid unpack stream."),this.m_Buffer.WriteBytes(t,i-o+1,n),o-=n+1}else for(var r=0;8>r;r++){var a=s>>r&1;1==a?(0>o&&e.SprotoTypeSize.error("invalid unpack stream."),this.m_Buffer.WriteByte(t[i-o]),--o):this.m_Buffer.WriteByte(0)}}var l=new Uint8Array(this.m_Buffer.Position);return this.m_Buffer.Seek(0,e.SeekOrigin.Begin),this.m_Buffer.ReadBytes(l,0,l.length),l},t.prototype.Clear=function(){this.m_Buffer.Seek(0,e.SeekOrigin.Begin);for(var t=0;t<this.m_Tmp.length;t++)this.m_Tmp[t]=0},t}();e.SprotoPack=t,__reflect(t.prototype,"Sproto.SprotoPack")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(){function e(){}return e.Init=function(t){e.m_RpcReqHandlerDict=[],e.mProtocol=t},e.AddHandler=function(t,i,o){i&&(e.m_RpcReqHandlerDict[t]=o?i.bind(o):i)},e.HandlerType=function(t,i,o,s){var n=e.m_RpcReqHandlerDict[t];if(null==n)return egret.log("无法处理消息",t),null;var r=n(e.mProtocol.GenRequest(t,o,s));return null!=i?r:null},e.sprotoLogNo=[4200,4201,4202,4203],e}();e.SprotoReceiver=t,__reflect(t.prototype,"Sproto.SprotoReceiver")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(){function t(){}return t.Init=function(i){t.m_Session=0,t.m_RpcRspHandlerDict=[],t.m_SessionDict=[],t.m_SendPack=new e.SprotoPack,t.m_SendStream=new e.SprotoStream,t.m_Protocol=i},t.Pack=function(e,i,o,s){if(void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),null!=o){var n=++t.m_Session;return t.m_RpcRspHandlerDict[n]=s&&o.bind(s)||o,t.m_SessionDict[n]=t.m_Protocol.Get(e).ResponseType,t.SendData(i,n,e)}return t.SendData(i,null,e)},t.SendData=function(i,o,s){var n=new e.Spackage;n.type=s,null!=o&&(n.session=o);var r=t.m_SendStream;r.Seek(0,e.SeekOrigin.Begin);var a=n.EncodeStream(r);null!=i&&(a+=i.EncodeStream(r));var l=t.m_SendPack.Pack(r.Buffer,a);return l.length>t.MAX_PACK_LEN?(console.log("data.Length > "+t.MAX_PACK_LEN+" => "+l.length),null):new egret.ByteArray(l.buffer)},t.HandlerSession=function(e,i,o){var s=t.m_SessionDict[e],n=t.m_RpcRspHandlerDict[e];if(s&&n){var r=new s;r.InitArray(i,o),n(r)}else console.warn("SprotoSender.Handler not found => "+e);t.m_SessionDict[e]=null,t.m_RpcRspHandlerDict[e]=null},t.MAX_PACK_LEN=65535,t.sprotoLogNo=[4200,4201,4202,4203],t}();e.SprotoSender=t,__reflect(t.prototype,"Sproto.SprotoSender")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(){function t(){this.size=128,this.pos=0,this.buffer=new Uint8Array(this.size)}return Object.defineProperty(t.prototype,"Position",{get:function(){return this.pos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Buffer",{get:function(){return this.buffer},enumerable:!0,configurable:!0}),t.prototype._Expand=function(t){if(void 0===t&&(t=0),this.size-this.pos<t){for(var i=this.size;this.size-this.pos<t;)this.size=2*this.size;this.size>=e.SprotoTypeSize.ENCODE_MAX_SIZE&&e.SprotoTypeSize.error("object is too large (>"+e.SprotoTypeSize.ENCODE_MAX_SIZE+")");for(var o=new Uint8Array(this.size),s=0;i>s;s++)o[s]=this.buffer[s];this.buffer=o}},t.prototype.WriteByte=function(e){this._Expand(1),this.buffer[this.pos++]=e},t.prototype.Write=function(e,t,i){this._Expand(i);for(var o=0;i>o;o++)this.buffer[this.pos++]=e[t+o]},t.prototype.Seek=function(t,i){switch(i){case e.SeekOrigin.Begin:this.pos=t;break;case e.SeekOrigin.Current:this.pos+=t;break;case e.SeekOrigin.End:this.pos=this.size+t}return this._Expand(),this.pos},t.prototype.Read=function(e,t,i){for(var o=0;i>o;o++)e[t+o]=this.buffer[this.pos++]},t.prototype.MoveUp=function(e,t){if(!(0>=t)){for(var i=this.pos-e,o=0;i>o;o++)this.buffer[e-t+o]=this.buffer[e+o];this.pos-=t}},t.prototype.Get=function(e){return(0>e||e>=this.size)&&egret.error("invalid idx:"+e+"@get"),this.buffer[e]},t.prototype.Set=function(e,t){(0>e||e>=this.size)&&egret.error("invalid idx:"+e+"@set"),this.buffer[e]=t},t}();e.SprotoStream=t,__reflect(t.prototype,"Sproto.SprotoStream")}(Sproto||(Sproto={}));var EventListenerData=function(){function e(e,t,i,o,s,n){this.addObject=e,this.type=t,this.listener=i,this.thisObject=o,this.useCapture=s,this.priority=n,e?e.addEventListener(t,i,o,s,n):console.log("不存在增加侦听事件的对象")}return e.prototype.clean=function(){this.addObject&&this.addObject.hasEventListener(this.type)&&(this.addObject.removeEventListener(this.type,this.listener,this.thisObject,this.useCapture),this.addObject=null,this.type=null,this.listener=null,this.useCapture=null,this.priority=null)},e}();__reflect(EventListenerData.prototype,"EventListenerData"),window.EventListenerData=EventListenerData;var Sproto;!function(e){var t=function(){function t(){this.tag=-1}return t.Create=function(){return new t},t.CreateByArray=function(e){var i=new t;return i.InitArray(e),i},t.CreateByReader=function(e){var i=new t;return i.InitReader(e),i},t.prototype.InitArray=function(t,i){void 0===i&&(i=0),this.Clear(),this.reader=e.SprotoTypeReader.CreateByArg(t,i,t.length),this._DoInit()},t.prototype.InitReader=function(e){this.Clear(),this.reader=e,this._DoInit()},t.prototype._DoInit=function(){this.fn=this._ReadWord();var t=e.SprotoTypeSize.SIZEOF_HEADER+this.fn*e.SprotoTypeSize.SIZEOF_FIELD;this.begin_data_pos=t,this.cur_field_pos=this.reader.Position,this.reader.Length<t&&e.SprotoTypeSize.error("invalid decode header."),this.reader.Seek(this.begin_data_pos)},t.prototype._Expand64=function(e){var t=e;return 0!=(2147483648&t)&&(t|=0xfffffff873720000),t},t.prototype._ReadWord=function(){var e=this.reader.ReadByte(),t=this.reader.ReadByte();return Math.pow(2,8)*t+e},t.prototype._ReadDword=function(){var e=this.reader.ReadByte(),t=this.reader.ReadByte(),i=this.reader.ReadByte(),o=this.reader.ReadByte();return o*Math.pow(2,24)+i*Math.pow(2,16)+t*Math.pow(2,8)+e},t.prototype._ReadDouble=function(){var e=this.reader.ReadByte(),t=this.reader.ReadByte(),i=this.reader.ReadByte(),o=this.reader.ReadByte(),s=this.reader.ReadByte(),n=this.reader.ReadByte(),r=this.reader.ReadByte(),a=this.reader.ReadByte();return a*Math.pow(2,56)+r*Math.pow(2,48)+n*Math.pow(2,40)+s*Math.pow(2,32)+o*Math.pow(2,24)+i*Math.pow(2,16)+t*Math.pow(2,8)+e},t.prototype._ReadArraySize=function(){this.value>=0&&e.SprotoTypeSize.error("invalid array value.");var t=this._ReadDword();return 0>t&&e.SprotoTypeSize.error("error array size("+t+")"),t},t.prototype.rt=function(){var e=this.reader.Position;for(this.reader.Seek(this.cur_field_pos);this.reader.Position<this.begin_data_pos;){this.tag++;var t=this._ReadWord();if(0==(1&t))return this.cur_field_pos=this.reader.Position,this.reader.Seek(e),this.value=Math.floor(.5*t)-1,this.tag;this.tag+=Math.floor(.5*t)}return this.reader.Seek(e),-1},t.prototype.ri=function(){if(this.value>=0)return this.value;var i=this._ReadDword();if(i==t.sizeof_uint32){var o=this._Expand64(this._ReadDword());return o}return i==t.sizeof_uint64?this._ReadDouble():(e.SprotoTypeSize.error("read invalid integer size ("+i+")"),0)},t.prototype.ria=function(){var i=null,o=this._ReadArraySize();if(0==o)return[];var s=this.reader.ReadByte();if(o--,s==t.sizeof_uint32){o%t.sizeof_uint32!=0&&e.SprotoTypeSize.error("error array size("+o+")@sizeof(Uint32)"),i=[];for(var n=0;n<o/t.sizeof_uint32;n++){var r=this._Expand64(this._ReadDword());i.push(r)}}else if(s==t.sizeof_uint64){o%t.sizeof_uint64!=0&&e.SprotoTypeSize.error("error array size("+o+")@sizeof(Uint64)"),i=[];for(var n=0;n<o/t.sizeof_uint64;n++){var a=this._ReadDouble();i.push(a)}}else e.SprotoTypeSize.error("error intlen("+s+")");return i},t.prototype.rb=function(){return this.value<0?(e.SprotoTypeSize.error("read invalid boolean."),!1):0==this.value?!1:!0},t.prototype.rba=function(){for(var e=this._ReadArraySize(),t=[],i=0;e>i;i++){var o=0==this.reader.ReadByte()?!1:!0;t.push(o)}return t},t.prototype.rs=function(){var e=this._ReadDword(),t=new Uint8Array(e);return this.reader.Read(t,0,t.length),BitUtil.decodeUTF8(t)},t.prototype.rsa=function(){for(var t=this._ReadArraySize(),i=[],o=0;t>0;o++){t<e.SprotoTypeSize.SIZEOF_LENGTH&&e.SprotoTypeSize.error("error array size.");var s=this._ReadDword();t-=e.SprotoTypeSize.SIZEOF_LENGTH,s>t&&e.SprotoTypeSize.error("error array object.");var n=new Uint8Array(s);this.reader.Read(n,0,n.length);var r=BitUtil.decodeUTF8(n);i.push(r),t-=s}return i},t.prototype.ro=function(t){var i=this._ReadDword(),o=e.SprotoTypeReader.CreateByArg(this.reader.Buffer,this.reader.Offset,i);this.reader.Seek(this.reader.Position+i);var s=new t;return s.InitReader(o),s},t.prototype._ReadElement=function(t,i,o){var s=0;o<e.SprotoTypeSize.SIZEOF_LENGTH&&e.SprotoTypeSize.error("error array size.");var n=this._ReadDword();o-=e.SprotoTypeSize.SIZEOF_LENGTH,s+=e.SprotoTypeSize.SIZEOF_LENGTH,n>o&&e.SprotoTypeSize.error("error array object."),i.Init(this.reader.Buffer,this.reader.Offset,n),this.reader.Seek(this.reader.Position+n);var r=new t;return r.InitReader(i),s+=n,[r,s]},t.prototype.roa=function(t){for(var i=this._ReadArraySize(),o=[],s=e.SprotoTypeReader.Create(),n=0;i>0;n++){var r=this._ReadElement(t,s,i),a=r[0],l=r[1];o.push(a),i-=l}return o},t.prototype.ReadMap=function(t,i){for(var o=this._ReadArraySize(),s={},n=e.SprotoTypeReader.Create(),r=0;o>0;r++){var a=this._ReadElement(t,n,o),l=a[0],h=a[1],c=i(l);s[c]=l,o-=h}return s},t.prototype.ReadUnknowData=function(){if(this.value<0){var e=this._ReadDword();this.reader.Seek(e+this.reader.Position)}},t.prototype.Size=function(){return this.reader.Position},t.prototype.Clear=function(){this.fn=0,this.tag=-1,this.value=0,null!=this.reader&&this.reader.Seek(0)},t.sizeof_uint64=8,t.sizeof_uint32=4,t}();e.SprotoTypeDeserialize=t,__reflect(t.prototype,"Sproto.SprotoTypeDeserialize")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(){function e(t){var i=t/e.SLOT_BITS_SIZE;t%e.SLOT_BITS_SIZE>0&&i++,this.HasBits=[];for(var o=0;i>o;++o)this.HasBits.push(0)}return e.prototype._GetArrayIdx=function(t){var i=(this.HasBits.length,t/e.SLOT_BITS_SIZE);return i},e.prototype._GetSlotbitIdx=function(t){var i=(this.HasBits.length,t%e.SLOT_BITS_SIZE);return i},e.prototype.HasField=function(e){var t=this._GetArrayIdx(e),i=this._GetSlotbitIdx(e),o=this.HasBits[t],s=1<<i;return 0!=(o&s)},e.prototype.SetField=function(e,t){var i=this._GetArrayIdx(e),o=this._GetSlotbitIdx(e),s=this.HasBits[i];if(t){var n=1<<o;this.HasBits[i]=s|n}else{var n=~(1<<o);this.HasBits[i]=s&n}},e.prototype.ClearField=function(){for(var e=0;e<this.HasBits.length;e++)this.HasBits[e]=0},e.SLOT_BITS_SIZE=32,e}();e.SprotoTypeFieldOP=t,__reflect(t.prototype,"Sproto.SprotoTypeFieldOP")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(){function t(){}return t.Create=function(){return new t},t.CreateByArg=function(e,i,o){var s=new t;return s.Init(e,i,o),s},Object.defineProperty(t.prototype,"Buffer",{get:function(){return this.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Position",{get:function(){return this.pos-this.begin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Offset",{get:function(){return this.pos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Length",{get:function(){return this.size-this.begin},enumerable:!0,configurable:!0}),t.prototype.Init=function(e,t,i){this.begin=t,this.pos=t,this.buffer=e,this.size=t+i,this.check()},t.prototype.check=function(){(this.pos>this.size||this.begin>this.pos)&&e.SprotoTypeSize.error("invalid pos.")},t.prototype.ReadByte=function(){return this.check(),this.buffer[this.pos++]},t.prototype.Seek=function(e){this.pos=this.begin+e,this.check()},t.prototype.Read=function(e,t,i){var o=this.pos;this.pos+=i,this.check();for(var s=o;s<this.pos;s++)e[t+s-o]=this.buffer[s]},t}();e.SprotoTypeReader=t,__reflect(t.prototype,"Sproto.SprotoTypeReader")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(){function t(t){this.m_HeaderCap=e.SprotoTypeSize.SIZEOF_HEADER,this.m_Lasttag=-1,this.m_Index=0,this.m_HeaderSz=e.SprotoTypeSize.SIZEOF_HEADER+t*e.SprotoTypeSize.SIZEOF_FIELD,this.m_DataView=new DataView(new ArrayBuffer(8))}return t.prototype._SetHeaderFn=function(e){this.m_Data.Set(this.m_HeaderIdx-2,255&e),this.m_Data.Set(this.m_HeaderIdx-1,e>>8&255)},t.prototype._WriteHeaderRecord=function(e){this.m_Data.Set(this.m_HeaderIdx+this.m_HeaderCap-2,255&e),this.m_Data.Set(this.m_HeaderIdx+this.m_HeaderCap-1,e>>8&255),this.m_HeaderCap+=2,this.m_Index++},t.prototype._WriteUint32ToUint64Sign=function(e){var t=e?255:0;this.m_Data.WriteByte(t),this.m_Data.WriteByte(t),this.m_Data.WriteByte(t),this.m_Data.WriteByte(t)},t.prototype._WriteTag=function(t,i){var o=t-this.m_Lasttag-1;o>0&&(o=2*(o-1)+1,o>65535&&e.SprotoTypeSize.error("tag is too big."),this._WriteHeaderRecord(o)),this._WriteHeaderRecord(i),this.m_Lasttag=t},t.prototype._WriteInt32=function(e){this.m_DataView.setInt32(0,e),this.m_Data.WriteByte(this.m_DataView.getUint8(3)),this.m_Data.WriteByte(this.m_DataView.getUint8(2)),this.m_Data.WriteByte(this.m_DataView.getUint8(1)),this.m_Data.WriteByte(this.m_DataView.getUint8(0))},t.prototype._WriteUint64=function(e){this.m_Data.WriteByte(255&e),this.m_Data.WriteByte(e/Math.pow(2,8)&255),this.m_Data.WriteByte(e/Math.pow(2,16)&255),this.m_Data.WriteByte(e/Math.pow(2,24)&255),this.m_Data.WriteByte(e/Math.pow(2,32)&255),this.m_Data.WriteByte(e/Math.pow(2,40)&255),this.m_Data.WriteByte(e/Math.pow(2,48)&255),this.m_Data.WriteByte(e/Math.pow(2,56)&255)},t.prototype._FillSize=function(t){0>t&&e.SprotoTypeSize.error("fill invaild size."),this._WriteInt32(t)},t.prototype._EncodeInteger=function(t){return this._FillSize(4),this._WriteInt32(t),e.SprotoTypeSize.SIZEOF_LENGTH+4},t.prototype._EncodeUint64=function(i){return this._FillSize(t.sizeof_uint64),this._WriteUint64(i),e.SprotoTypeSize.SIZEOF_LENGTH+t.sizeof_uint64},t.prototype._EncodeString=function(t){var i=BitUtil.encodeUTF8(t);return this._FillSize(i.length),this.m_Data.Write(i,0,i.length),e.SprotoTypeSize.SIZEOF_LENGTH+i.length},t.prototype._EncodeStruct=function(t){var i=this.m_Data.Position;this.m_Data.Seek(e.SprotoTypeSize.SIZEOF_LENGTH,e.SeekOrigin.Current);var o=t.EncodeStream(this.m_Data),s=this.m_Data.Position;return this.m_Data.Seek(i,e.SeekOrigin.Begin),this._FillSize(o),this.m_Data.Seek(s,e.SeekOrigin.Begin),e.SprotoTypeSize.SIZEOF_LENGTH+o},t.prototype._Clear=function(){this.m_Index=0,this.m_HeaderIdx=2,this.m_Lasttag=-1,this.m_Data=null,this.m_HeaderCap=e.SprotoTypeSize.SIZEOF_HEADER},t.prototype.wi=function(i,o){this.m_DataView.setInt32(0,i);var s=this.m_DataView.getInt32(0)==i?t.sizeof_uint32:t.sizeof_uint64,n=0;if(s==t.sizeof_uint32){var r=i;0==r||1==r?(n=2*(r+1),s=2):s=this._EncodeInteger(r)}else if(s==t.sizeof_uint64){var r=i;s=this._EncodeUint64(r)}else e.SprotoTypeSize.error("invaild integer size.");this._WriteTag(o,n)},t.prototype.wia=function(i,o){if(!(null==i||i.length<=0)){var s=this.m_Data.Position;this.m_Data.Seek(s+e.SprotoTypeSize.SIZEOF_LENGTH,e.SeekOrigin.Begin);var n=this.m_Data.Position,r=t.sizeof_uint32;this.m_Data.Seek(n+1,e.SeekOrigin.Begin);for(var a=0;a<i.length;a++){var l=i[a],h=l;this.m_DataView.setInt32(0,h);var c=this.m_DataView.getInt32(0)==h?t.sizeof_uint32:t.sizeof_uint64;if(c==t.sizeof_uint32){if(this._WriteInt32(l),r==t.sizeof_uint64){var u=0==(2147483648&l)?!1:!0;this._WriteUint32ToUint64Sign(u)}}else if(c==t.sizeof_uint64){if(r==t.sizeof_uint32){this.m_Data.Seek(n+1,e.SeekOrigin.Begin);for(var d=0;a>d;d++){var p=i[d];this._WriteUint64(p)}r=t.sizeof_uint64}this._WriteUint64(l)}else e.SprotoTypeSize.error("invalid integer size("+c+")")}var f=this.m_Data.Position;this.m_Data.Seek(n,e.SeekOrigin.Begin),this.m_Data.WriteByte(r);var g=f-n;this.m_Data.Seek(s,e.SeekOrigin.Begin),this._FillSize(g),this.m_Data.Seek(f,e.SeekOrigin.Begin),this._WriteTag(o,0)}},t.prototype.wb=function(e,t){var i=e?1:0;this.wi(i,t)},t.prototype.wba=function(e,t){if(!(null==e||e.length<=0)){this._FillSize(e.length);for(var i=0;i<e.length;i++){var o=e[i]?1:0;this.m_Data.WriteByte(o)}this._WriteTag(t,0)}},t.prototype.ws=function(e,t){this._EncodeString(e),this._WriteTag(t,0)},t.prototype.wsa=function(t,i){if(!(null==t||t.length<=0)){var o=0;for(var s in t)o+=e.SprotoTypeSize.SIZEOF_LENGTH+BitUtil.UTF8ByteCount(s);this._FillSize(o);for(var s in t)this._EncodeString(s);this._WriteTag(i,0)}},t.prototype.wo=function(e,t){this._EncodeStruct(e),this._WriteTag(t,0)},t.prototype.WriteSet=function(t,i){var o=this.m_Data.Position;this.m_Data.Seek(e.SprotoTypeSize.SIZEOF_LENGTH,e.SeekOrigin.Current),t();var s=this.m_Data.Position,n=s-o-e.SprotoTypeSize.SIZEOF_LENGTH;this.m_Data.Seek(o,e.SeekOrigin.Begin),this._FillSize(n),this.m_Data.Seek(s,e.SeekOrigin.Begin),this._WriteTag(i,0)},t.prototype.woa=function(e,t){var i=this;if(!(null==e||e.length<=0)){var o=function(){for(var t=0,o=e;t<o.length;t++){var s=o[t];i._EncodeStruct(s)}};this.WriteSet(o,t)}},t.prototype.wod=function(e,t){var i=this;if(!(null==e||e.length<=0)){var o=function(){for(var t=0,o=e;t<o.length;t++){var s=o[t];i._EncodeStruct(e[s])}};this.WriteSet(o,t)}},t.prototype.Open=function(t){this._Clear(),this.m_Data=t,this.m_HeaderIdx=t.Position+this.m_HeaderCap,this.m_DataIdx=this.m_Data.Seek(this.m_HeaderSz,e.SeekOrigin.Current)},t.prototype.Close=function(){this._SetHeaderFn(this.m_Index);var t=this.m_HeaderSz-this.m_HeaderCap;this.m_Data.MoveUp(this.m_DataIdx,t);var i=this.m_Data.Position-this.m_HeaderIdx+e.SprotoTypeSize.SIZEOF_HEADER;return this._Clear(),i},t.sizeof_uint64=8,t.sizeof_uint32=4,t}();e.SprotoTypeSerialize=t,__reflect(t.prototype,"Sproto.SprotoTypeSerialize")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(){function e(){}return e.error=function(e){egret.error(e)},e.SIZEOF_HEADER=2,e.SIZEOF_LENGTH=4,e.SIZEOF_FIELD=2,e.ENCODE_MAX_SIZE=16777216,e}();e.SprotoTypeSize=t,__reflect(t.prototype,"Sproto.SprotoTypeSize")}(Sproto||(Sproto={}));var AverageUtils=function(){function e(e){this.nums=[],this.numsLen=0,this.numSum=0,this.maxNum=0,void 0===e&&(e=10),this.maxNum=e}return e.prototype.push=function(e){this.numsLen>this.maxNum&&(this.numsLen--,this.numSum-=this.nums.shift()),this.nums.push(e),this.numSum+=e,this.numsLen++},e.prototype.getValue=function(){return this.numSum/this.numsLen},e.prototype.clear=function(){this.nums.splice(0),this.numsLen=0,this.numSum=0},e}();__reflect(AverageUtils.prototype,"AverageUtils"),window.AverageUtils=AverageUtils;var FrameTick=function(){function e(){this.list=[]}return e.prototype.tick=function(e){this.list[e]=TimerManager.ins().getFrameId()},e.prototype.isTick=function(e){return this.list[e]==TimerManager.ins().getFrameId()},e.prototype.checkAndTick=function(e){return this.isTick(e)?!0:(this.tick(e),!1)},e}();__reflect(FrameTick.prototype,"FrameTick"),window.FrameTick=FrameTick;var CommonUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.addLableStrokeColor=function(e,t,i){e.strokeColor=t,e.stroke=i},t.getObjectLength=function(e){var t=0;for(var i in e)t++;return t},t.copyDataHandler=function(e){var t;if(e instanceof Array)t=[];else{if(!(e instanceof Object))return e;t={}}for(var i=Object.keys(e),o=0,s=i.length;s>o;o++){var n=i[o];t[n]=this.copyDataHandler(e[n])}return t},t.cloneObj=function(e){var t={};for(var i in e)t[i]=e[i];return t},t.lock=function(){StageUtils.ins().getStage().touchEnabled=StageUtils.ins().getStage().touchChildren=!1},t.unlock=function(){StageUtils.ins().getStage().touchEnabled=StageUtils.ins().getStage().touchChildren=!0},t.labelIsOverLenght=function(e,t){e.text=this.overLength(t)},t.overLength=function(e){var t=null;return 1e5>e?t=e:e>1e8?(e/=1e8,e=Math.floor(10*e)/10,t=e+GlobalConfig.jifengTiaoyueLg.st100704):(e/=1e4,e=Math.floor(10*e)/10,t=e+GlobalConfig.jifengTiaoyueLg.st100066),t},t.GetArray=function(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=!0),null==e)return[];var o=[];for(var s in e){var n=e[s];o.push(n)}if(t)try{i?o.sort(function(e,i){return e[t]-i[t]}):o.sort(function(e,i){return i[t]-e[t]})}catch(r){}},t.toGrayScale=function(e){var t=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],i=new egret.ColorMatrixFilter(t);e.filters=[i]},t.toOriginalColors=function(e){var t=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],i=new egret.ColorMatrixFilter(t);e.filters=[i]},t}(BaseClass);__reflect(CommonUtils.prototype,"CommonUtils"),window.CommonUtils=CommonUtils;var DateUtils=function(){function e(){}return e.formatMiniDateTime=function(t){return e.MINI_DATE_TIME_BASE+(2147483647&t)*e.MS_PER_SECOND},e.formatServerTime=function(t){return(t-e.MINI_DATE_TIME_BASE)/e.MS_PER_SECOND},e.GetFormatSecond=function(t,i){return void 0===i&&(i=1),e.getFormatBySecond(t,i)},e.getFormatBySecond=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=2);var o="",s=1e3*e;switch(t){case this.TIME_FORMAT_1:o=this.format_1(s);break;case this.TIME_FORMAT_2:o=this.format_2(s);break;case this.TIME_FORMAT_3:o=this.format_3(s);break;case this.TIME_FORMAT_4:o=this.format_4(s);break;case this.TIME_FORMAT_5:o=this.format_5(s,i);break;case this.TIME_FORMAT_6:o=this.format_6(s);break;case this.TIME_FORMAT_7:o=this.format_7(s);break;case this.TIME_FORMAT_8:o=this.format_8(s);break;case this.TIME_FORMAT_9:o=this.format_9(s);break;case this.TIME_FORMAT_11:o=this.format_11(s)}return o},e.format_1=function(t){var i=0,o="##:##:##";return i=Math.floor(t/e.MS_PER_HOUR),o=o.replace("##",e.formatTimeNum(i)),i&&(t-=i*e.MS_PER_HOUR),i=Math.floor(t/e.MS_PER_MINUTE),o=o.replace("##",e.formatTimeNum(i)),i&&(t-=i*e.MS_PER_MINUTE),i=Math.floor(t/1e3),o=o.replace("##",e.formatTimeNum(i))},e.format_2=function(e){e-=this.TIME_ZONE_OFFSET;var t=new Date(e),i=t.getFullYear(),o=t.getMonth()+1,s=t.getDate(),n=t.getHours(),r=t.getMinutes(),a=t.getSeconds();return i+"-"+o+"-"+s+" "+n+":"+r+":"+a},e.format_3=function(e){var t=this.format_1(e),i=t.split(":");return i[1]+":"+i[2]},e.format_4=function(e){return e<this.MS_PER_HOUR?Math.floor(e/this.MS_PER_MINUTE)+GlobalConfig.jifengTiaoyueLg.st101515:e<this.MS_PER_DAY?Math.floor(e/this.MS_PER_HOUR)+GlobalConfig.jifengTiaoyueLg.st101516:Math.floor(e/this.MS_PER_DAY)+GlobalConfig.jifengTiaoyueLg.st101517
},e.format_5=function(e,t){void 0===t&&(t=2);var i="";if(t>=4){var o=Math.floor(e/this.MS_PER_DAY);o>0&&(e-=o*this.MS_PER_DAY,i+=(i.length>0?this.formatTimeNum(o):o)+GlobalConfig.jifengTiaoyueLg.st100006)}if(t>=3){var s=Math.floor(e/this.MS_PER_HOUR);s>0&&(e-=s*this.MS_PER_HOUR,i+=(i.length>0?this.formatTimeNum(s):s)+GlobalConfig.jifengTiaoyueLg.st101518)}if(t>=2){var n=Math.floor(e/this.MS_PER_MINUTE);n>0&&(e-=n*this.MS_PER_MINUTE,i+=(i.length>0?this.formatTimeNum(n):n)+GlobalConfig.jifengTiaoyueLg.st101519)}var r=Math.floor(e/1e3);return i+=this.formatTimeNum(r)+GlobalConfig.jifengTiaoyueLg.st100141},e.format_12=function(e,t){void 0===t&&(t=2);var i="";if(t>=4){var o=Math.floor(e/this.MS_PER_DAY);o>0&&(e-=o*this.MS_PER_DAY,i+=(i.length>0?this.formatTimeNum(o):o)+GlobalConfig.jifengTiaoyueLg.st100006)}if(t>=3){var s=Math.floor(e/this.MS_PER_HOUR);s>0&&(e-=s*this.MS_PER_HOUR,i+=(i.length>0?this.formatTimeNum(s):s)+GlobalConfig.jifengTiaoyueLg.st101518)}var n=Math.floor(e/this.MS_PER_MINUTE);return n>0&&(e-=n*this.MS_PER_MINUTE,i+=(i.length>0?this.formatTimeNum(n):n)+GlobalConfig.jifengTiaoyueLg.st101519),i},e.format_6=function(e){e-=this.TIME_ZONE_OFFSET;var t=new Date(e),i=t.getHours(),o=t.getMinutes(),s=t.getSeconds();return this.formatTimeNum(i)+":"+this.formatTimeNum(o)+":"+this.formatTimeNum(s)},e.format_7=function(e){return e<this.MS_PER_HOUR?GlobalConfig.jifengTiaoyueLg.st101520:e<this.MS_PER_DAY?Math.floor(e/this.MS_PER_HOUR)+GlobalConfig.jifengTiaoyueLg.st101518:Math.floor(e/this.MS_PER_DAY)+GlobalConfig.jifengTiaoyueLg.st100006},e.format_8=function(e){e-=this.TIME_ZONE_OFFSET;var t=new Date(e),i=t.getFullYear(),o=t.getMonth()+1,s=t.getDate(),n=t.getHours(),r=t.getMinutes();return i+"-"+o+"-"+s+" "+n+":"+r},e.format_9=function(e){var t=Math.floor(e/this.MS_PER_HOUR);e-=t*this.MS_PER_HOUR;var i=Math.floor(e/this.MS_PER_MINUTE);e-=i*this.MS_PER_MINUTE;var o=Math.floor(e/1e3);return t+GlobalConfig.jifengTiaoyueLg.st101518+i+GlobalConfig.jifengTiaoyueLg.st101074+o+GlobalConfig.jifengTiaoyueLg.st100141},e.isOpenDayPreWeek=function(){var e=GameServer.serverOpenDay,t=new Date,i=t.getDay(),o=!1;switch(i){case 1:e>1&&(o=!0);break;case 2:e>2&&(o=!0);break;case 3:e>3&&(o=!0);break;case 4:e>4&&(o=!0);break;case 5:e>5&&(o=!0);break;case 6:e>6&&(o=!0);break;case 7:e>7&&(o=!0)}return o},e.format_11=function(e){var t=Math.floor(e/this.MS_PER_HOUR);e-=t*this.MS_PER_HOUR;var i=Math.floor(e/this.MS_PER_MINUTE);e-=i*this.MS_PER_MINUTE;var o=Math.floor(e/1e3);return t+":"+i+":"+o},e.formatTimeNum=function(e){return e>=10?e.toString():"0"+e},e.TIME_FORMAT_1=1,e.TIME_FORMAT_2=2,e.TIME_FORMAT_3=3,e.TIME_FORMAT_4=4,e.TIME_FORMAT_5=5,e.TIME_FORMAT_6=6,e.TIME_FORMAT_7=7,e.TIME_FORMAT_8=8,e.TIME_FORMAT_9=9,e.TIME_FORMAT_11=11,e.DAYS_OF_WEEK=7,e.HOURS_PER_DAY=24,e.SECONDS_PER_HOUR=3600,e.MS_PER_SECOND=1e3,e.MS_PER_MINUTE=6e4,e.MS_PER_HOUR=36e5,e.MS_PER_DAY=864e5,e.MS_PER_MONTH=30*e.MS_PER_DAY,e.MS_PER_YEAR=12*e.MS_PER_MONTH,e.MINI_DATE_TIME_BASE=Date.UTC(2010,0)+(new Date).getTimezoneOffset()*e.MS_PER_MINUTE,e.TIME_ZONE_OFFSET=0,e}();__reflect(DateUtils.prototype,"DateUtils"),window.DateUtils=DateUtils;var DebugUtils=function(){function e(){}return e.isOpen=function(e){this._isOpen=e},Object.defineProperty(e,"isDebug",{get:function(){return!0},enumerable:!0,configurable:!0}),e.start=function(e){this._isOpen&&(this._startTimes[e]=egret.getTimer())},e.stop=function(e){if(!this._isOpen)return 0;if(!this._startTimes[e])return 0;var t=egret.getTimer()-this._startTimes[e];return t>this._threshold&&Logger.trace(e+": "+t),t},e.setThreshold=function(e){this._threshold=e},e._startTimes={},e._threshold=3,e}();__reflect(DebugUtils.prototype,"DebugUtils"),window.DebugUtils=DebugUtils;var DelayOptManager=function(e){function t(){var t=e.call(this)||this;return t._delayOpts=[],t.TIME_THRESHOLD=2,TimerManager.ins().doFrame(1,0,t.runCachedFun,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.addDelayOptFunction=function(e,t,i,o,s){void 0===o&&(o=null),void 0===s&&(s=null),this._delayOpts.push({fun:t,funPara:i,thisObj:e,callBack:o,para:s})},t.prototype.clear=function(){this._delayOpts.length=0},t.prototype.stop=function(){TimerManager.ins().remove(this.runCachedFun,this)},t.prototype.runCachedFun=function(){if(0!=this._delayOpts.length)for(var e,t=egret.getTimer();this._delayOpts.length&&(e=this._delayOpts.shift(),e.funPara?e.fun.call(e.thisObj,e.funPara):e.fun.call(e.thisObj),e.callBack&&(void 0!=e.para?e.callBack.call(e.thisObj,e.para):e.callBack()),!(egret.getTimer()-t>this.TIME_THRESHOLD)););},t}(BaseClass);__reflect(DelayOptManager.prototype,"DelayOptManager"),window.DelayOptManager=DelayOptManager;var DirUtil=function(){function e(){}return e.get8DirBy2Point=function(e,t){var i=MathUtils.getAngle(MathUtils.getRadian2(e.x,e.y,t.x,t.y));return this.angle2dir(i)},e.get4DirBy2Point=function(e,t){var i=e.x,o=e.y,s=t.x,n=t.y,r=new egret.Point(i,o),a=new egret.Point(s,n),l=this.getAngle(r,a);return this.angle2dirGet4Dir(l)},e.getAngle=function(e,t){var i=e.x-t.x,o=e.y-t.y,s=0;return 0!=i||0!=o?(i>=0&&o>=0?s=180*Math.atan(o/i)/Math.PI+270:0>=i&&o>=0?s=180*Math.atan(Math.abs(i)/o)/Math.PI:0>=i&&0>=o?s=180*Math.atan(Math.abs(o)/Math.abs(i))/Math.PI+90:i>=0&&0>=o&&(s=180*Math.atan(i/Math.abs(o))/Math.PI+180),s):void 0},e.dir2angle=function(e){return e*=45,e-=90},e.angle2dir=function(e){return-90>e&&(e+=360),Math.round((e+90)/45)%8},e.angle2dirGet4Dir=function(e){return e>=0&&90>e?1:e>=90&&180>e?3:e>=180&&270>e?5:e>=270&&360>e?7:0},e.dirOpposit=function(e){return 4>e?e+4:e-4},e.get5DirBy8Dir=function(e){var t=2*(e-4);return 0>t&&(t=0),e-t},e.get2DirScaleX=function(e){return 4>=e?1:-1},e.get2Dir=function(e){switch(e){case 0:case 1:case 7:return 1;default:return 3}},e.getGridByDir=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=null);var o=this.dir2angle(this.dirOpposit(e)),s=i||new egret.Point;return MathUtils.getDirMove(o,t*GameMap.CELL_SIZE,s),s},e}();__reflect(DirUtil.prototype,"DirUtil"),window.DirUtil=DirUtil;var DisplayUtils=function(){function e(){}return e.createBitmap=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},e.createEuiImage=function(e){var t=new eui.Image,i=RES.getRes(e);return t.source=i,t},e.removeFromParent=function(e){return e&&null!=e.parent?(e.parent.removeChild(e),e instanceof MovieClip&&e.clearCache(),void(e=null)):void(e=null)},e.disposeAll=function(e){if(null!=e){if(e instanceof eui.List)e.removeChildren();else if(e instanceof egret.DisplayObjectContainer)for(var t=void 0;e.numChildren>0;)t=e.getChildAt(0),this.dispose(t),t=null;else if(e instanceof MovieClip)e.clearCache();else if(e instanceof eui.Image){var i=e.source,o=ResMgr.ins().destroyRes(i);egret.log("Image dispose = "+o+"   "+i),e.texture&&e.texture.dispose(),i=null,e.source=null}else e instanceof eui.Label&&(e.text=null);TimerManager.ins().removeAll(e),e.parent&&(e.parent.removeChild(e),e=null)}},e.dispose=function(e){if(null!=e){if(e instanceof CharRole||e instanceof CharMonster)e.destruct();else if(e instanceof egret.DisplayObjectContainer)for(;e.numChildren>0;)this.dispose(e.getChildAt(0));else e instanceof MovieClip?e.clearCache():e instanceof eui.Image?e.source=null:e instanceof eui.Label&&(e.text=null);TimerManager.ins().removeAll(e),e.parent&&(e.parent.removeChild(e),e=null)}},e.drawCir=function(e,t,i,o){return null==e&&(e=new egret.Shape),e.graphics.clear(),e.graphics.beginFill(65535,1),e.graphics.moveTo(0,0),e.graphics.lineTo(t,0),e.graphics.drawArc(0,0,t,0,i*Math.PI/180,o),e.graphics.lineTo(0,0),e.graphics.endFill(),e},e.drawLine=function(e,t,i,o,s,n,r){return null==e&&(e=new egret.Shape),e.graphics.clear(),e.graphics.lineStyle(n,r),e.graphics.moveTo(t,i),e.graphics.lineTo(o,s),e.graphics.endFill(),e},e.shakeIt=function(t,i,o,s,n){if(void 0===s&&(s=1),void 0===n&&(n=null),null==n&&(n=e.EMPTY_FUNC),t&&s>=1&&n()){var r=[{anchorOffsetX:0,anchorOffsetY:-i},{anchorOffsetX:-i,anchorOffsetY:0},{anchorOffsetX:i,anchorOffsetY:0},{anchorOffsetX:0,anchorOffsetY:i},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(t);var a=o/5;egret.Tween.get(t).to(r[0],a).to(r[1],a).to(r[2],a).to(r[3],a).to(r[4],a).call(function(){e.shakeIt(t,i,o,--s)},this)}},e.prototype.flashingObj=function(e,t,i){void 0===i&&(i=300);var o=function(){if(t){e.visible=!0;var s=1==e.alpha?0:1;egret.Tween.removeTweens(e),egret.Tween.get(e).to({alpha:s},i).call(o)}else egret.Tween.removeTweens(e),e.alpha=1,e.visible=!1};o()},e.SetParent=function(t,i){if(t&&i){var o=e.POINT,s=t.parent;s?(s.localToGlobal(t.x,t.y,o),s.removeChild(t)):(o.x=t.x,o.y=t.y),i.globalToLocal(o.x,o.y,o),i.addChild(t),null!=t.bottom?(t.x=o.x,t.bottom=i.height-o.y-t.height):(t.x=o.x,t.y=o.y)}},e.ChangeParent=function(e,t){e&&t&&(e.parent&&e.parent.removeChild(e),t.addChild(e))},e.forDestroy=function(e){for(var t;e.numChildren;)t=e.removeChildAt(0),this.twoDestroy(t);e.parent&&e.parent.removeChild(e),e=null},e.twoDestroy=function(e){if(egret.is(e,"eui.Image")){RES.destroyRes(e.source);e.texture=null}else if(egret.is(e,"eui.Label"))e.text=e.textFlow=null;else if(egret.is(e,"eui.TextInput"));else if(egret.is(e,"eui.Button"))egret.log("按钮");else if(egret.is(e,"eui.Component"))e.removeChildren();else if(egret.is(e,"egret.DisplayObjectContainer"))return this.forDestroy(e),void egret.log(egret.getQualifiedSuperclassName(e));e.parent&&e.parent.removeChild(e),e=null},e.shakingList={},e.EMPTY_FUNC=function(){return!0},e.POINT=new egret.Point,e}();__reflect(DisplayUtils.prototype,"DisplayUtils"),window.DisplayUtils=DisplayUtils;var FilterUtil=function(){function e(){}return e.setNormalFilter=function(t){t.filters=[e.normalColorFilter]},e.setGayFilter=function(t){t.filters=[e.grayColorFilter]},e.setGayFilter2=function(t){t.filters=[e.grayColorFilter2]},e.setHighLightFilter=function(t){t.filters=[e.highLightColorFilter]},e.setBlackFilter=function(t){t.filters=[e.blackLightFilter]},e.normalColorFilter=new egret.ColorMatrixFilter([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),e.grayColorFilter=new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0]),e.grayColorFilter2=new egret.ColorMatrixFilter([.3,.6,0,0,30,.3,.6,0,0,30,.3,.6,0,0,30,0,0,0,1,0]),e.highLightColorFilter=new egret.ColorMatrixFilter([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),e.blackLightFilter=new egret.ColorMatrixFilter([.3,0,0,0,0,0,.3,0,0,0,0,0,.3,0,0,0,0,0,1,0]),e}();__reflect(FilterUtil.prototype,"FilterUtil"),window.FilterUtil=FilterUtil;var __ref_field__=DeviceUtils,KeyboardUtils=function(e){function t(){var t=e.call(this)||this;if(t.key_ups=new Array,t.key_downs=new Array,DeviceUtils.IsHtml5){var i=t;document.addEventListener("keyup",function(e){for(var t=0,o=i.key_ups.length;o>t;t++){var s=i.key_ups[t][0],n=i.key_ups[t][1];n?s.call(n,e.keyCode):s(e.keyCode)}}),document.addEventListener("keydown",function(e){for(var t=0,o=i.key_downs.length;o>t;t++){var s=i.key_downs[t][0],n=i.key_downs[t][1];n?s.call(n,e.keyCode):s(e.keyCode)}})}return t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.addKeyUp=function(e,t){this.key_ups.push([e,t])},t.prototype.addKeyDown=function(e,t){this.key_downs.push([e,t])},t.prototype.removeKeyUp=function(e,t){for(var i=0;i<this.key_ups.length;i++)this.key_ups[i][0]==e&&this.key_ups[i][1]==t&&(this.key_ups.splice(i,1),i--)},t.prototype.removeKeyDown=function(e,t){for(var i=0;i<this.key_downs.length;i++)this.key_downs[i][0]==e&&this.key_downs[i][1]==t&&(this.key_downs.splice(i,1),i--)},t}(BaseClass);__reflect(KeyboardUtils.prototype,"KeyboardUtils"),window.KeyboardUtils=KeyboardUtils;var LocalStorageData=function(){function e(){}return e.setHashID=function(t){e.hashID=t,e.setItem("hashID",t,!0)},e.getHashID=function(){return e.getItem("hashID",!0)},e.setItem=function(t,i,o){void 0===o&&(o=!1),o?egret.localStorage.setItem(t,i):egret.localStorage.setItem(e.hashID+"_"+t,i)},e.getItem=function(t,i){return void 0===i&&(i=!1),i?egret.localStorage.getItem(t):egret.localStorage.getItem(e.hashID+"_"+t)},e.removeItem=function(t,i){void 0===i&&(i=!1),i?egret.localStorage.removeItem(t):egret.localStorage.removeItem(e.hashID+"_"+t)},e.clearAll=function(){egret.localStorage.clear()},e}();__reflect(LocalStorageData.prototype,"LocalStorageData");var LocalDataKey;!function(e){e[e.guanqiaId=0]="guanqiaId",e[e.job=1]="job",e[e.sex=2]="sex",e[e.zhuangbei0=3]="zhuangbei0",e[e.zhuangbei4=4]="zhuangbei4",e[e.zhuanzhiLv=5]="zhuanzhiLv",e[e.mountLv=6]="mountLv"}(LocalDataKey||(LocalDataKey={})),window.LocalDataKey=LocalDataKey,window.LocalStorageData=LocalStorageData;var LocationProperty=function(){function e(){}return e.init=function(){this.urlParam={};var e=window.location.search;if(e){var t=e.indexOf("?");if(-1!=t)for(var i=e.slice(t+1).split("&"),o=void 0,s=0;s<i.length;s++)o=i[s].split("="),this.urlParam[o[0]]=o[1]}},Object.defineProperty(e,"resAdd",{get:function(){return this.urlParam.hosts||""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"openID",{get:function(){return this.urlParam.user},enumerable:!0,configurable:!0}),Object.defineProperty(e,"openKey",{get:function(){return this.urlParam.openkey},enumerable:!0,configurable:!0}),Object.defineProperty(e,"password",{get:function(){return this.urlParam.spverify||"e10adc3949ba59abbe56e057f20f883e"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"serverIP",{get:function(){return this.urlParam.srvaddr},enumerable:!0,configurable:!0}),Object.defineProperty(e,"serverPort",{get:function(){return this.urlParam.srvport},enumerable:!0,configurable:!0}),Object.defineProperty(e,"serverID",{get:function(){return this.urlParam.serverid},enumerable:!0,configurable:!0}),Object.defineProperty(e,"srvid",{get:function(){return this.urlParam.srvid},enumerable:!0,configurable:!0}),Object.defineProperty(e,"appid",{get:function(){return this.urlParam.appid||""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"app_openid",{get:function(){return this.urlParam.app_openid||""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isSubscribe",{get:function(){return this.urlParam.isSubscribe},enumerable:!0,configurable:!0}),Object.defineProperty(e,"nickName",{get:function(){var e=this.urlParam.nickName||"";return e.length?decodeURIComponent(e):e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"callUrl",{get:function(){var e=this.urlParam.callUrl||"";return e.length?decodeURIComponent(e):e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"gifi",{get:function(){return this.urlParam.gifi},enumerable:!0,configurable:!0}),Object.defineProperty(e,"roleCount",{get:function(){return this.urlParam.roleCount||"0"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isnew",{get:function(){return this.urlParam.isnew},enumerable:!0,configurable:!0}),Object.defineProperty(e,"login_ip",{get:function(){return this.urlParam.login_ip},enumerable:!0,configurable:!0}),Object.defineProperty(e,"is_attention",{get:function(){return this.urlParam.is_attention},enumerable:!0,configurable:!0}),Object.defineProperty(e,"token",{get:function(){return"111"},enumerable:!0,configurable:!0}),e.isCanLogin=function(){return null!=this.openID&&null!=this.password&&null!=this.srvid&&null!=this.serverIP&&null!=this.serverPort},e.prototype.getPara=function(e,t){if(egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE)return null;var i=t||location.href,o=i.indexOf("?");if(-1!=o){var s="&"+i.slice(o+1),n=new RegExp("&"+e+"=.*?(?:&|$)"),r=n.exec(s);if(r){var a=r[0];return a.split("&")[1].split("=")[1]}}return null},e.prototype.setProperty=function(e,t,i){var o=i||location.href;"&"+o.split("?")[1];if(-1==o.indexOf("?"))return o+="?"+e+"="+t;var s=o.split("?")[1];if(""==s)return o+=e+"="+t;var n=new RegExp("(?:^|&)"+e+"=.*?(?:&|$)"),r=n.exec(s);if(r&&""!=r[0]){var a=r[0],l=new RegExp("=.*$"),h=a.replace(l,"="+t);return o.replace(a,h)}return o+="&"+e+"="+t},e.prototype.hasProperty=function(e,t){var i=t||location.href,o="&"+i.split("?")[1];return-1!=o.indexOf("&"+e+"=")},e.urlParam={},e}();__reflect(LocationProperty.prototype,"LocationProperty"),window.LocationProperty=LocationProperty;var Log=function(){function e(){}return e.trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];DebugUtils.isDebug&&(e[0]="[DebugLog]"+e[0],console.log.apply(console,e))},e}();__reflect(Log.prototype,"Log"),window.Log=Log;var Logger=function(){function e(){}return e.trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];DebugUtils.isDebug&&(e[0]="[DebugLog] "+e[0],console.log.apply(console,e))},e.Log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},e.Warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)},e.Error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,e)},e}();__reflect(Logger.prototype,"Logger");var _Log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)};window.Logger=Logger;var MathUtils=function(){function e(){}return e.getAngle=function(e){return 180*e/Math.PI},e.getRadian=function(e){return e/180*Math.PI},e.getRadian2=function(e,t,i,o){var s=i-e,n=o-t;return Math.atan2(n,s)},e.getDistance=function(e,t,i,o){var s=i-e,n=o-t,r=s*s+n*n;return Math.sqrt(r)},e.getDirMove=function(e,t,i){return i=i||new egret.Point,i.x=Math.cos(e*Math.PI/180)*t,i.y=Math.sin(e*Math.PI/180)*t,i},e.limit=function(e,t){e=Math.min(e,t),t=Math.max(e,t);var i=t-e;return e+Math.random()*i},e.limitInteger=function(e,t){return Math.round(this.limit(e,t))},e.randomArray=function(e){var t=Math.floor(Math.random()*e.length);return e[t]},e}();__reflect(MathUtils.prototype,"MathUtils"),window.MathUtils=MathUtils;var md5=function(){function e(){}return e.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},e.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},e.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},e.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.any_hmac_md5=function(e,t,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),i)},e.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},e.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},e.rstr_hmac_md5=function(e,t){var i=this.rstr2binl(e);i.length>16&&(i=this.binl_md5(i,8*e.length));for(var o=Array(16),s=Array(16),n=0;16>n;n++)o[n]=909522486^i[n],s[n]=1549556828^i[n];var r=this.binl_md5(o.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(s.concat(r),640))},e.rstr2hex=function(e){try{this.hexcase}catch(t){this.hexcase=0}for(var i,o=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",s="",n=0;n<e.length;n++)i=e.charCodeAt(n),s+=o.charAt(i>>>4&15)+o.charAt(15&i);return s},e.rstr2b64=function(e){try{this.b64pad}catch(t){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",s=e.length,n=0;s>n;n+=3)for(var r=e.charCodeAt(n)<<16|(s>n+1?e.charCodeAt(n+1)<<8:0)|(s>n+2?e.charCodeAt(n+2):0),a=0;4>a;a++)o+=8*n+6*a>8*e.length?this.b64pad:i.charAt(r>>>6*(3-a)&63);return o},e.rstr2any=function(e,t){var i,o,s,n,r,a=t.length,l=Array(Math.ceil(e.length/2));for(i=0;i<l.length;i++)l[i]=e.charCodeAt(2*i)<<8|e.charCodeAt(2*i+1);var h=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),c=Array(h);for(o=0;h>o;o++){for(r=Array(),n=0,i=0;i<l.length;i++)n=(n<<16)+l[i],s=Math.floor(n/a),n-=s*a,(r.length>0||s>0)&&(r[r.length]=s);c[o]=n,l=r}var u="";for(i=c.length-1;i>=0;i--)u+=t.charAt(c[i]);return u},e.str2rstr_utf8=function(e){for(var t,i,o="",s=-1;++s<e.length;)t=e.charCodeAt(s),i=s+1<e.length?e.charCodeAt(s+1):0,t>=55296&&56319>=t&&i>=56320&&57343>=i&&(t=65536+((1023&t)<<10)+(1023&i),s++),127>=t?o+=String.fromCharCode(t):2047>=t?o+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?o+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(o+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return o},e.str2rstr_utf16le=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(255&e.charCodeAt(i),e.charCodeAt(i)>>>8&255);return t},e.str2rstr_utf16be=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e.charCodeAt(i)>>>8&255,255&e.charCodeAt(i));return t},e.rstr2binl=function(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(var i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return t},e.binl2rstr=function(e){for(var t="",i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t},e.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,o=-271733879,s=-1732584194,n=271733878,r=0;r<e.length;r+=16){var a=i,l=o,h=s,c=n;i=this.md5_ff(i,o,s,n,e[r+0],7,-680876936),n=this.md5_ff(n,i,o,s,e[r+1],12,-389564586),s=this.md5_ff(s,n,i,o,e[r+2],17,606105819),o=this.md5_ff(o,s,n,i,e[r+3],22,-1044525330),i=this.md5_ff(i,o,s,n,e[r+4],7,-176418897),n=this.md5_ff(n,i,o,s,e[r+5],12,1200080426),s=this.md5_ff(s,n,i,o,e[r+6],17,-1473231341),o=this.md5_ff(o,s,n,i,e[r+7],22,-45705983),i=this.md5_ff(i,o,s,n,e[r+8],7,1770035416),n=this.md5_ff(n,i,o,s,e[r+9],12,-1958414417),s=this.md5_ff(s,n,i,o,e[r+10],17,-42063),o=this.md5_ff(o,s,n,i,e[r+11],22,-1990404162),i=this.md5_ff(i,o,s,n,e[r+12],7,1804603682),n=this.md5_ff(n,i,o,s,e[r+13],12,-40341101),s=this.md5_ff(s,n,i,o,e[r+14],17,-1502002290),o=this.md5_ff(o,s,n,i,e[r+15],22,1236535329),i=this.md5_gg(i,o,s,n,e[r+1],5,-165796510),n=this.md5_gg(n,i,o,s,e[r+6],9,-1069501632),s=this.md5_gg(s,n,i,o,e[r+11],14,643717713),o=this.md5_gg(o,s,n,i,e[r+0],20,-373897302),i=this.md5_gg(i,o,s,n,e[r+5],5,-701558691),n=this.md5_gg(n,i,o,s,e[r+10],9,38016083),s=this.md5_gg(s,n,i,o,e[r+15],14,-660478335),o=this.md5_gg(o,s,n,i,e[r+4],20,-405537848),i=this.md5_gg(i,o,s,n,e[r+9],5,568446438),n=this.md5_gg(n,i,o,s,e[r+14],9,-1019803690),s=this.md5_gg(s,n,i,o,e[r+3],14,-187363961),o=this.md5_gg(o,s,n,i,e[r+8],20,1163531501),i=this.md5_gg(i,o,s,n,e[r+13],5,-1444681467),n=this.md5_gg(n,i,o,s,e[r+2],9,-51403784),s=this.md5_gg(s,n,i,o,e[r+7],14,1735328473),o=this.md5_gg(o,s,n,i,e[r+12],20,-1926607734),i=this.md5_hh(i,o,s,n,e[r+5],4,-378558),n=this.md5_hh(n,i,o,s,e[r+8],11,-2022574463),s=this.md5_hh(s,n,i,o,e[r+11],16,1839030562),o=this.md5_hh(o,s,n,i,e[r+14],23,-35309556),i=this.md5_hh(i,o,s,n,e[r+1],4,-1530992060),n=this.md5_hh(n,i,o,s,e[r+4],11,1272893353),s=this.md5_hh(s,n,i,o,e[r+7],16,-155497632),o=this.md5_hh(o,s,n,i,e[r+10],23,-1094730640),i=this.md5_hh(i,o,s,n,e[r+13],4,681279174),n=this.md5_hh(n,i,o,s,e[r+0],11,-358537222),s=this.md5_hh(s,n,i,o,e[r+3],16,-722521979),o=this.md5_hh(o,s,n,i,e[r+6],23,76029189),i=this.md5_hh(i,o,s,n,e[r+9],4,-640364487),n=this.md5_hh(n,i,o,s,e[r+12],11,-421815835),s=this.md5_hh(s,n,i,o,e[r+15],16,530742520),o=this.md5_hh(o,s,n,i,e[r+2],23,-995338651),i=this.md5_ii(i,o,s,n,e[r+0],6,-198630844),n=this.md5_ii(n,i,o,s,e[r+7],10,1126891415),s=this.md5_ii(s,n,i,o,e[r+14],15,-1416354905),o=this.md5_ii(o,s,n,i,e[r+5],21,-57434055),i=this.md5_ii(i,o,s,n,e[r+12],6,1700485571),n=this.md5_ii(n,i,o,s,e[r+3],10,-1894986606),s=this.md5_ii(s,n,i,o,e[r+10],15,-1051523),o=this.md5_ii(o,s,n,i,e[r+1],21,-2054922799),i=this.md5_ii(i,o,s,n,e[r+8],6,1873313359),n=this.md5_ii(n,i,o,s,e[r+15],10,-30611744),s=this.md5_ii(s,n,i,o,e[r+6],15,-1560198380),o=this.md5_ii(o,s,n,i,e[r+13],21,1309151649),i=this.md5_ii(i,o,s,n,e[r+4],6,-145523070),n=this.md5_ii(n,i,o,s,e[r+11],10,-1120210379),s=this.md5_ii(s,n,i,o,e[r+2],15,718787259),o=this.md5_ii(o,s,n,i,e[r+9],21,-343485551),i=this.safe_add(i,a),o=this.safe_add(o,l),s=this.safe_add(s,h),n=this.safe_add(n,c)}return[i,o,s,n]},e.md5_cmn=function(e,t,i,o,s,n){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(o,n)),s),i)},e.md5_ff=function(e,t,i,o,s,n,r){return this.md5_cmn(t&i|~t&o,e,t,s,n,r)},e.md5_gg=function(e,t,i,o,s,n,r){return this.md5_cmn(t&o|i&~o,e,t,s,n,r)},e.md5_hh=function(e,t,i,o,s,n,r){return this.md5_cmn(t^i^o,e,t,s,n,r)},e.md5_ii=function(e,t,i,o,s,n,r){return this.md5_cmn(i^(t|~o),e,t,s,n,r)},e.safe_add=function(e,t){var i=(65535&e)+(65535&t),o=(e>>16)+(t>>16)+(i>>16);return o<<16|65535&i},e.bit_rol=function(e,t){return e<<t|e>>>32-t},e.hexcase=0,e.b64pad="",e}();__reflect(md5.prototype,"md5"),window.md5=md5;var ObjectPool=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cx=0,t._content={},t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.length=function(e){return this._content[e]?this._content[e].length:0},t.prototype.pop=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this._content[e]||(this._content[e]=[]);var o=this._content[e];if(o.length){var s=o.pop();return s}var n=egret.getDefinitionByName(e),r=t.length,a=void 0;return 0==r?a=new n:1==r?a=new n(t[0]):2==r?a=new n(t[0],t[1]):3==r?a=new n(t[0],t[1],t[2]):4==r?a=new n(t[0],t[1],t[2],t[3]):5==r&&(a=new n(t[0],t[1],t[2],t[3],t[4])),a.ObjectPoolKey=e,a},t.prototype.push=function(e){if(null==e)return!1;var t=e.ObjectPoolKey;return!this._content[t]||this._content[t].indexOf(e)>-1?!1:(this._content[t].push(e),!0)},t.prototype.create=function(){var e,t=50,i=10,o=3,s=8;for(e=0;t>e;e++)this.push(new MovieClip);for(e=0;i>e;e++)this.push(new eui.Image);for(e=0;o>e;e++)this.push(new CharRole);for(e=0;s>e;e++)this.push(new CharMonster)},t}(BaseClass);__reflect(ObjectPool.prototype,"ObjectPool"),window.ObjectPool=ObjectPool;var ResourceUtils=function(e){function t(){var t=e.call(this)||this;return t._groupIndex=0,t._configs=new Array,t._groups={},t._urlResorce={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,t.onResourceLoadComplete,t),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,t.onResourceLoadProgress,t),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,t.onResourceLoadError,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.addConfig=function(e,t){this._configs.push([e,t])},t.prototype.loadConfig=function(e,t){this._onConfigComplete=e,this._onConfigCompleteTarget=t,this.loadNextConfig()},t.prototype.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var e=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(e[0],e[1])},t.prototype.onConfigCompleteHandle=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},t.prototype.loadGroup=function(e,t,i,o){this._groups[e]=[t,i,o],RES.loadGroup(e)},t.prototype.loadGroups=function(e,t,i,o,s){RES.createGroup(e,t,!0),this.loadGroup(e,i,o,s)},t.prototype.pilfererLoadGroup=function(e,t){void 0===t&&(t=null);var i="pilferer_"+e;t||(t=[e]),RES.createGroup(i,t,!0),RES.loadGroup(i,-1)},t.prototype.onResourceLoadComplete=function(e){var t=e.groupName;if(this._groups[t]){var i=this._groups[t][0],o=this._groups[t][2];null!=i&&i.call(o),this._groups[t]=null,delete this._groups[t]}},t.prototype.onResourceLoadProgress=function(e){var t=e.groupName;if(this._groups[t]){var i=this._groups[t][1],o=this._groups[t][2];null!=i&&i.call(o,e.itemsLoaded,e.itemsTotal)}},t.prototype.onResourceLoadError=function(e){Logger.trace(e.groupName+"资源组有资源加载失败"),this.onResourceLoadComplete(e)},t.prototype.loadResource=function(e,t,i,o,s){void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null);var n=e.concat(t),r="loadGroup"+this._groupIndex++;RES.createGroup(r,n,!0),this._groups[r]=[i,o,s],RES.loadGroup(r)},t.prototype.loadUrlResource=function(e,t,i,o){var s=this,n=this._urlResorce[e];return null==n&&(n={data:null,listener:[],state:0},this._urlResorce[e]=n),2==n.state?void(null!=i&&i.call(o,n.data,e)):(n.listener.push({fun:i,obj:o}),void(1!=n.state&&(n.state=1,RES.getResByUrl(e,function(t){var i=s._urlResorce[e];i.state=2,i.data=t;for(var o=0,n=i.listener;o<n.length;o++){var r=n[o];r.fun&&r.fun.call(r.obj,t,e)}i.listener=[]},this,t))))},t.prototype.getUrlResource=function(e){return null==this._urlResorce[e]?(console.log("资源未加载",e),null):this._urlResorce[e].data},t}(BaseClass);__reflect(ResourceUtils.prototype,"ResourceUtils"),window.ResourceUtils=ResourceUtils;var ResVersionManager=function(e){function t(){var t=e.call(this)||this;return t.tempDict={},t.resVersionData=window.verData,t.res_loadByVersion(),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype._GetVer=function(e){if(null==e||0==e.length||null==this.resVersionData)return 0;var t=this.tempDict[e];if(null==t){for(var i=e.split("/"),o=this.resVersionData,s=0,n=i;s<n.length;s++){var r=n[s];if(o=o[r],null==o)break}t=null==o||"number"!=typeof o?0:o,this.tempDict[e]=t}return t},t.prototype.res_loadByVersion=function(){},t}(BaseClass);__reflect(ResVersionManager.prototype,"ResVersionManager"),window.ResVersionManager=ResVersionManager;var ScreenMovies;!function(e){function t(e){function t(e){if(egret.Tween.removeTweens(e),v++,v==r)for(i.removeChild(n);n.$children.length;)g=n.$children.pop(),g.texture.dispose(),g.texture=null,g=null}var i=StageUtils.ins().getUIStage(),o=StageUtils.ins().getWidth(),s=StageUtils.ins().getHeight(),n=new eui.Group;n.width=o,n.height=s,i.addChild(n);for(var r=40,a=5,l=r/a,h=0;r>h;h++){var c=o/a,u=s/l,d=h%a*c,p=Math.floor(h/a)*u,f=new egret.RenderTexture,g=(f.drawToTexture(i,new egret.Rectangle(d,p,c,u)),new egret.Bitmap);switch(g.texture=f,g.anchorOffsetX=c/2,g.anchorOffsetY=u/2,g.x=d+c/2,g.y=p+u/2,n.addChild(g),5==e&&(e=Math.ceil(4*Math.random())),e){case 1:var _=egret.Tween.get(g);_.to({scaleX:0,scaleY:0,alpha:0,rotation:359},800,egret.Ease.circIn).call(t,this,[g]);break;case 2:var m=-o;h%2||(m=2*o);var _=egret.Tween.get(g);_.to({x:m,alpha:0},800,egret.Ease.circIn).call(t,this,[g]);break;case 3:var _=egret.Tween.get(g);_.to({scaleX:.2,scaleY:1,alpha:0,blurFliter:0},800,egret.Ease.backInOut).call(t,this,[g]);break;case 4:var _=egret.Tween.get(g);_.to({alpha:0},900,egret.Ease.circIn).call(t,this,[g]);break;default:var _=egret.Tween.get(g);_.to({scaleX:1,scaleY:0,alpha:0},800,egret.Ease.circIn).call(t,this,[g])}}var v=0}function i(e){function t(e){1==h?(g.uniforms.customUniform+=.1,g.uniforms.customUniform>2*Math.PI&&(g.uniforms.customUniform=0,i(l,r))):2==h?(_.uniforms.time+=.008,_.uniforms.time>1&&(_.uniforms.time=0,i(l,r))):3==h?(m.uniforms.time+=.01,m.uniforms.time>1&&(m.uniforms.time=0,i(l,r))):4==h&&(v.uniforms.offset+=.01,v.uniforms.offset>1&&(v.uniforms.offset=0,i(l,r)))}function i(e,i){e.removeEventListener(egret.Event.ENTER_FRAME,t,this),e.texture.dispose(),e.parent&&e.parent.removeChild(e),e=null,i.parent&&i.parent.removeChild(i),i=null}void 0===e&&(e=-1);var o=StageUtils.ins().getUIStage(),s=StageUtils.ins().getWidth(),n=StageUtils.ins().getHeight(),r=new eui.Group;r.width=s,r.height=n,o.addChild(r);var a=new egret.RenderTexture;a.drawToTexture(o,new egret.Rectangle(0,0,s,n));var l=new egret.Bitmap;l.texture=a,r.addChild(l);var h,c="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( (aVertexPosition / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}",u="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nuniform float customUniform;\nvoid main(void) {\nvec2 uvs = vTextureCoord.xy;\nvec4 fg = texture2D(uSampler, vTextureCoord);\nfg.rgb += sin(customUniform + uvs.x * 2. + uvs.y * 2.) * 0.2;\ngl_FragColor = fg * vColor;\n}",d=["precision lowp float;","varying vec2 vTextureCoord;","uniform float time;","uniform sampler2D uSampler;","void main() {","vec3 p = (vec3(vTextureCoord.xy,.0) - 0.5) * abs(sin(time/10.0)) * 50.0;","float d = sin(length(p)+time), a = sin(mod(atan(p.y, p.x) + time + sin(d+time), 3.1416/3.)*3.), v = a + d, m = sin(length(p)*4.0-a+time);","float _r = -v*sin(m*sin(-d)+time*.1);","float _g = v*m*sin(tan(sin(-a))*sin(-a*3.)*3.+time*.5);","float _b = mod(v,m);","float _a = 1.0;","if(_r < 0.1 && _g < 0.1 && _b < 0.1) {","_a = 0.0;","}","gl_FragColor = vec4(_r * _a, _g * _a, _b * _a, _a);","}"].join("\n"),p=["precision lowp float;\nvarying vec2 vTextureCoord;","varying vec4 vColor;\n","uniform sampler2D uSampler;","uniform vec2 center;","uniform vec3 params;","uniform float time;","void main()","{","vec2 uv = vTextureCoord.xy;","vec2 texCoord = uv;","float dist = distance(uv, center);","if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )","{","float diff = (dist - time);","float powDiff = 1.0 - pow(abs(diff*params.x), params.y);","float diffTime = diff  * powDiff;","vec2 diffUV = normalize(uv - center);","texCoord = uv + (diffUV * diffTime);","}","gl_FragColor = texture2D(uSampler, texCoord);","}"].join("\n"),f=["precision lowp float;\nvarying vec2 vTextureCoord;","varying vec4 vColor;\n","uniform sampler2D uSampler;","uniform float lineWidth;","uniform float offset;","void main()","{","vec2 uv = vTextureCoord.xy;","vec2 texCoord = uv;","float modPart = mod(vTextureCoord.y, lineWidth);","float solidPart = (1.0 - offset) * lineWidth;","if(modPart > solidPart) {","gl_FragColor = texture2D(uSampler, texCoord);","} else {","gl_FragColor = vec4(0., 0., 0., 0.);","}","}"].join("\n"),g=new egret.CustomFilter(c,u,{customUniform:0}),_=new egret.CustomFilter(c,d,{time:0}),m=new egret.CustomFilter(c,p,{center:{x:.5,y:.5},params:{x:10,y:.8,z:.1},time:0}),v=new egret.CustomFilter(c,f,{lineWidth:.1,offset:0}),y=[null,g,_,m,v];
-1==e&&(h=Math.ceil(4*Math.random())),l.filters=[y[h]],l.addEventListener(egret.Event.ENTER_FRAME,t,this)}e.MovieStart=t,e.av=i}(ScreenMovies||(ScreenMovies={}));var StageUtils=function(e){function t(){var i=e.call(this)||this;return i.autoWidth=800,i.autoHeight=1386,i.autoPos=new egret.Point,null==t._uiStage&&(t._uiStage=new eui.UILayer,t._uiStage.touchEnabled=!1,t._uiStage.percentHeight=100,t._uiStage.percentWidth=100,i.getStage().addChild(t._uiStage)),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getHeight=function(){return this.getStage().stageHeight},t.prototype.getWidth=function(){return this.getStage().stageWidth},t.prototype.setTouchChildren=function(e){this.getStage().touchChildren=e},t.prototype.setMaxTouches=function(e){this.getStage().maxTouches=e},t.prototype.setFrameRate=function(e){this.getStage().frameRate=e},t.prototype.setScaleMode=function(e){this.getStage().scaleMode=e},t.prototype.getStage=function(){return egret.MainContext.instance.stage},t.prototype.getUIStage=function(){return t._uiStage},t.prototype.startFullscreenAdaptation=function(e,t,i){this.designWidth=e,this.designHeight=t,this.resizeCallback=i,this.stageOnResize()},t.prototype.stageOnResize=function(){this.getStage().removeEventListener(egret.Event.RESIZE,this.stageOnResize,this);var e=(navigator.userAgent,this.designWidth),i=this.designHeight,o=window.innerWidth,s=window.innerHeight,n=o/s,r=e/i,a=n/r;if(n>r){var l=a,h=a;e=Math.floor(e*l),i=Math.floor(i*h)}console.log(n,r,a),console.log(e,i),this.resizeCallback&&this.resizeCallback(),this.IsPC()?(t.ins().setScaleMode(egret.StageScaleMode.SHOW_ALL),t.ins().getStage().orientation=egret.OrientationMode.AUTO):(t.ins().setScaleMode(egret.StageScaleMode.FIXED_WIDTH),this.getStage().setContentSize(e,i),this.getUIStage().setContentSize(e,i)),this.getStage().addEventListener(egret.Event.RESIZE,this.stageOnResize,this)},t.prototype.IsPC=function(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],i=!0,o=0;o<t.length;o++)if(e.indexOf(t[o])>0){i=!1;break}return i},t}(BaseClass);__reflect(StageUtils.prototype,"StageUtils"),window.StageUtils=StageUtils;var StringUtils=function(){function e(){}return e.trimSpace=function(e){return e.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},e.getStringLength=function(e){for(var t=e.split(""),i=0,o=0;o<t.length;o++){var s=t[o];i+=this.isChinese(s)?2:1}return i},e.IsNullOrEmpty=function(e){return null==e||""==e},e.isChinese=function(e){var t=/^[\u4E00-\u9FA5]+$/;return t.test(e)?!1:!0},e.strByteLen=function(e){for(var t=0,i=e.length,o=0;i>o;o++)t+=e.charCodeAt(o)>=127?2:1;return t},e.complementByChar=function(t,i,o,s){void 0===o&&(o=" "),void 0===s&&(s=!0);var n=this.strByteLen(s?t.replace(e.HTML,""):t);return t+this.repeatStr(o,i-n)},e.repeatStr=function(e,t){for(var i="",o=0;t>o;o++)i+=e;return i},e.addColor=function(e,t){var i;return"string"==typeof t?i=String(t):"number"==typeof t&&(i="0x"+Number(t).toString(16)),"|C:"+i+"&T:"+e+"|"},e.Format=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=e;if(t.length>0)if(1==t.length){var s=t[0];for(var n in s)if(void 0!=s[n]){var r=new RegExp("({"+n+"})","g");o=o.replace(r,s[n])}}else for(var a=0;a<t.length;++a)if(void 0!=t[a]){var r=new RegExp("({)"+a+"(})","g");o=o.replace(r,t[a])}return o},e.ToSingleHex=function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},e.numberToEnglishLetter=function(e){var t=String.fromCharCode(64+e);return t},e.isEmojiCharacter=function(e){for(var t=0;t<e.length;t++){var i=e.charCodeAt(t);if(i>=55296&&56319>=i){if(e.length>1){var o=e.charCodeAt(t+1),s=1024*(i-55296)+(o-56320)+65536;if(s>=118784&&128895>=s)return!0}}else if(e.length>1){var o=e.charCodeAt(t+1);if(8419==o)return!0}else{if(i>=8448&&10239>=i)return!0;if(i>=11013&&11015>=i)return!0;if(i>=10548&&10549>=i)return!0;if(i>=12951&&12953>=i)return!0;if(169==i||174==i||12349==i||12336==i||11093==i||11036==i||11035==i||11088==i)return!0}}},e.isSpecialCharacter=function(e){var t=/['";{}()+\-*\/!%！@#￥……&。，？#$?,.·|@~`^}]/;return t.test(e)},e.isDot=function(e){var t=e.toString().indexOf(".");return-1==t},e.HTML=/<[^>]+>/g,e}();__reflect(StringUtils.prototype,"StringUtils"),window.StringUtils=StringUtils;var TextFlowMaker=function(){function e(){}return e.generateTextFlow=function(e,t){if(void 0===t&&(t=0),!e)return this.EMPTY_TABLE;for(var i=e.split("|"),o="",s=0,n=i.length;n>s;s++){var r=i[s];r&&0!=r.length&&(o+=this.getSingleTextFlow1(r,t))}return(new egret.HtmlTextParser).parser(o)},e.generateTextFlow1=function(e){for(var t=e.split("|"),i=[],o=0,s=t.length;s>o;o++)i.push(this.getSingleTextFlow(t[o]));return i},e.getSingleTextFlow1=function(e,t){void 0===t&&(t=0);for(var i,o="<font",s=this.Match(e),n=0,r=s.length;r>n;n++){var a=s[n].type,l=s[n].value;a==this.PROP_TEXT?i=l:a==this.STYLE_SIZE?o+=' size="'+parseInt(l)+'"':a==this.STYLE_COLOR?o+=' color="'+parseInt(l)+'"':i=l}return o+=1==t&&-1!=i.indexOf("/")?" color='#535557'>"+i+"</font>":">"+i+"</font>"},e.getSingleTextFlow=function(e){for(var t=this.Match(e),i={style:{}},o=0,s=t.length;s>o;o++){var n=t[o].type,r=t[o].value;n==this.PROP_TEXT?i.text=r:n==this.STYLE_SIZE?i.style.size=parseInt(r):n==this.STYLE_COLOR?i.style.textColor=parseInt(r):i.text=r}return i},e.Match=function(e){if(null!=e){var t=null;this.LIST.length=0;for(var i=0;99>i;++i){var o=e.match(this._REG);if(null==o||-1==o.index){this.LIST.push({type:t,value:e});break}null!=t&&this.LIST.push({type:t,value:e.substr(0,o.index)}),t=o[0].replace("&","").replace(":",""),e=e.substr(o.index+o[0].length)}return this.LIST}},e.getCStr=function(e){return this.numberList[e]?this.numberList[e]:""},e.getTextFlowByHtml=function(t){return null==t?null:(null==e._htmlTextParser&&(e._htmlTextParser=new egret.HtmlTextParser),e._htmlTextParser.parse(t))},e.EMPTY_TABLE=[],e._REG=new RegExp("&?[SCTU]:"),e.LIST=[],e.STYLE_COLOR="C",e.STYLE_SIZE="S",e.PROP_TEXT="T",e.UNDERLINE_TEXT="U",e.numberList=["零","一","二","三","四","五","六","七","八","九","十","十一","十二","十三","十四"],e}();__reflect(TextFlowMaker.prototype,"TextFlowMaker"),window.TextFlowMaker=TextFlowMaker;var uint64=function(){function e(e){this._lowUint=0,this._highUint=0,this.value=e}return e.prototype.isEqual=function(e){return e?this._lowUint==e._lowUint&&this._highUint==e._highUint:!1},e.prototype.isGreaterThan=function(t){if(t instanceof e)return this._highUint>t._highUint||this._highUint==t._highUint&&this._lowUint>t._lowUint;var i=new e;return"string"==typeof t?(i.value=t,this.isGreaterThanOrEqual(i)):"number"==typeof t?(i.value=t.toString(),this.isGreaterThanOrEqual(i)):void 0},e.prototype.isGreaterThanOrEqual=function(t){if(t instanceof e)return this._highUint>t._highUint||this._highUint==t._highUint&&this._lowUint>=t._lowUint;var i=new e;return"string"==typeof t?(i.value=t,this.isGreaterThanOrEqual(i)):"number"==typeof t?(i.value=t.toString(),this.isGreaterThanOrEqual(i)):void 0},Object.defineProperty(e.prototype,"isZero",{get:function(){return 0==this._lowUint&&0==this._highUint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGreaterThanZero",{get:function(){return this._lowUint>0||this._highUint>0},enumerable:!0,configurable:!0}),e.prototype.writeByte=function(e){e.writeUnsignedInt(this._lowUint),e.writeUnsignedInt(this._highUint)},e.prototype.setValue=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._lowUint=e,this._highUint=t},Object.defineProperty(e.prototype,"value",{set:function(t){t instanceof egret.ByteArray?(this._lowUint=t.readUnsignedInt(),this._highUint=t.readUnsignedInt()):"string"==typeof t&&e.stringToUint64(t,10,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueByString",{set:function(e){},enumerable:!0,configurable:!0}),e.prototype.leftMove=function(t,i){void 0===i&&(i=null),i=i||this;var o=e.LeftMoveMask[t],s=o&this._lowUint;s>>>=32-t,i._lowUint=this._lowUint<<t,i._highUint=this._highUint<<t,i._highUint=i._highUint|s},e.prototype.add=function(t,i){void 0===i&&(i=null),i=i||this;var o=this._lowUint+t._lowUint;i._highUint=this._highUint+t._highUint,o>=e.MaxLowUint?(i._highUint++,i._lowUint=o-e.MaxLowUint):i._lowUint=o},e.prototype.subtraction=function(t,i){void 0===i&&(i=null),i=i||this;var o=this._lowUint-t._lowUint;i._highUint=this._highUint-t._highUint,0>o?(i._highUint--,i._lowUint=o+e.MaxLowUint):i._lowUint=o},e.prototype.scale=function(t,i){void 0===i&&(i=null),i=i||this;var o=this._lowUint*t;i._highUint=this._highUint*t,i._highUint+=Math.floor(Math.abs(o/e.MaxLowUint)),i._lowUint=o%e.MaxLowUint},e.prototype.toString=function(t){void 0===t&&(t=10);for(var i,o,s,n="",r=this._lowUint,a=this._highUint;0!=a||0!=r;)i=a%t,s=i*e.MaxLowUint+r,o=s%t,n=o+n,a=(a-i)/t,r=(s-o)/t;return n.length?n:"0"},e.stringToUint64=function(t,i,o){void 0===i&&(i=10),void 0===o&&(o=null),o=o||new e;for(var s,n,r=0,a=0,l=t.length,h=0;l>h;h++)n=parseInt(t.charAt(h)),s=r*i+n,a=a*i+Math.floor(s/e.MaxLowUint),r=s%e.MaxLowUint;return o.setValue(r,a),o},e.LeftMoveMask=[0,2147483648,1073741824,536870912,268435456,134217728,67108864,33554432,16777216,8388608,4194304,2097152,1048576,524288,262144,131072,65536,32768,16384,8192,4096,2048,1024,512,256,128,64,32,16,8,4,2,1],e.MaxLowUint=4294967296,e}();__reflect(uint64.prototype,"uint64"),window.uint64=uint64,SdkMgr.isWxGame()&&(window.alert=function(e){wx.showModal({title:e})},window.xiangjiaoSDK=require("../wx_xj_sdk.min.js"));var Main=function(e){function t(){var i=e.call(this)||this;return t.instance=i,i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStageFun,i),i}return __extends(t,e),t.prototype.onAddToStageFun=function(e){var i=this;this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStageFun,this),t.isLiuhai=2.05<window.innerHeight/window.innerWidth,SdkMgr.isWxGame()?WxSdk.ins().onError():(t.isDebug=window.isDebug,t.isRelease=window.isRelease,LocationProperty.init(),StartGetUserInfo.isOne=LocationProperty.urlParam.isOne?Boolean(LocationProperty.urlParam.isOne):!1,egret.log("debug"+t.isDebug+"isOne"+StartGetUserInfo.isOne),SdkMgr.currSdk=LocationProperty.urlParam.currSdk,SdkMgr.tag=LocationProperty.urlParam.tag,SdkMgr.serverUrl=LocationProperty.urlParam.serverUrl,SdkMgr.functionUrl=LocationProperty.urlParam.functionName,window.location.href.indexOf("1109022409")>0&&null==SdkMgr.currSdk&&(SdkMgr.currSdk=SdkMgr.P_TYPE_8,SdkMgr.serverUrl="bsymx_busiyi_wanba"),SdkMgr.currSdk==SdkMgr.P_TYPE_9&&(SdkMgr.serverUrl="bsymx_baoyu_ppl_xiaoqi",SdkMgr.tag="bsymx_baoyu_zxdl_h5",SdkMgr.functionUrl="bsymx/baoyuzxdl/xqH5Verify",t.isLiuhai=!1),SdkMgr.currSdk==SdkMgr.P_TYPE_10&&(SdkMgr.serverUrl="bsymx_baoyu_jfty_h5",SdkMgr.tag="bsymx_baoyu_jfty_h5",SdkMgr.functionUrl="bsymx/baoyujfty/h5Verify"),window.qg&&null==SdkMgr.currSdk&&(window.alert=function(e){window.qg.showToast({message:e})},egret.log("vivo小游戏"),t.isDebug=!1,SdkMgr.currSdk=SdkMgr.P_TYPE_11,SdkMgr.serverUrl="bsymx_vivomini",SdkMgr.tag="bsymx_vivomini",SdkMgr.functionUrl="Bsymx/Baoyujfty/vivoVerify",SdkMgr.requestType=2,require("../js/language.js")),window.qq&&null==SdkMgr.currSdk&&(window.alert=function(e){window.qq.showModal({title:e})},egret.log("qq小游戏"),SdkMgr.serverUrl="bsymx_qqgame",SdkMgr.currSdk=SdkMgr.P_TYPE_12,require("../js/language.js"),t.isDebug=!0),SdkMgr.deviceModel=LocationProperty.urlParam.deviceModel),ResMgr.ins().saveLoadingRes("pic_bj_22_png"),ResMgr.ins().saveLoadingRes("comp_500_433_04_png"),ResMgr.ins().saveLoadingRes("comp_500_433_01_png"),ResMgr.ins().saveLoadingRes("comp_500_433_03_png"),ResMgr.ins().saveLoadingRes("comp_500_433_05_png"),ResMgr.ins().saveLoadingRes("comp_500_433_06_png"),t.isDebug||SdkMgr.isWxGame()?this.addDefault():(this.getServerUrl(),this.intervalID=setInterval(function(){i.getServerUrl()},3e3))},t.prototype.getServerUrl=function(){var e="";e="https://ro-api.h5aiwan.com/api/server/getGameUrl?ver="+SdkMgr.serverUrl;var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT,t.open(e,egret.HttpMethod.GET),t.send(),t.addEventListener(egret.Event.COMPLETE,this.sendServerUrl,this),egret.log("请求服务器地址："+e)},t.prototype.sendServerUrl=function(e){var t=e.currentTarget;t.removeEventListener(egret.Event.COMPLETE,this.sendServerUrl,this);var i=JSON.parse(t.response);egret.log("返回服务器地址信息》》"+t.response),200==i.code?(clearInterval(this.intervalID),egret.log("请求成功，清除定时器"+this.intervalID),Const.SERVER_LIST_URL=i.data.url,Const.RES_URL=i.data.resource,SdkMgr.version=i.data.version,this.addDefault()):alert("请求地址结果："+i.message)},t.errorBack=function(e){if(!t.isDebug){var i="";GameLogic.ins()&&GameLogic.ins().actorModel&&(i+=null==GameLogic.ins().actorModel.name?"玩家账号："+StartGetUserInfo.uid+">>>":"玩家名字："+GameLogic.ins().actorModel.name+">>>"),i+="服务器id"+GameServer.serverID+">>>",i+=e,StatisticsUtils.debugInfoLogPhp(i)}},t.prototype.Init2=function(){if(SdkMgr.isWxGame()?GameSocket.httpsProtocol=GameSocket.HTTPS:SdkMgr.currSdk==SdkMgr.P_TYPE_11||SdkMgr.currSdk==SdkMgr.P_TYPE_12?GameSocket.httpsProtocol=GameSocket.HTTPS:GameSocket.httpsProtocol=GameSocket.HTTP,SdkMgr.isWxGame()&&(WxSdk.ins().getLaunchOptionsSync(),WxSdk.ins().showOrHiedeShare(!0),WxSdk.ins().onShareAppMessage(),WxSdk.ins().onMemoryWarning(),WxSdk.ins().wxOnShow()),t.isDebug?t.isPlatform=window.isPlatform:t.isPlatform=!0,egret.TextField.default_fontFamily="Microsoft YaHei,SimSun,Arial",egret.DisplayObject.defaultTouchEnabled=!1,StageUtils.ins().startFullscreenAdaptation(480,800,null),Sproto.SprotoCore.Init(),Sproto.SprotoSender.Init((new C2sProtocol).GetProtocol()),Sproto.SprotoReceiver.Init((new S2cProtocol).GetProtocol()),this.initModule(),egret.ImageLoader.crossOrigin="anonymous",RES.setMaxLoadingThread(4),t.isDebug){var e=window.resList;e&&e.length&&e.length>0&&(euiextension.DropDownList.resData=e[0])}ResVersionManager.ins(),this.mStartView=new StartGameView(this),Const.IsLoadType01?(StartGetUserInfo.mResult=function(){t.instance.addChild(t.instance.mStartView),egret.log("添加startgame"),StartGetUserInfo.mAutoEnterGame?StartGetUserInfo.Login():t.instance.mStartView.callbackFun=function(e){return GameSocket.ins().GetSocketState()==GameSocket.STATUS_CONNECTING?void egret.log("正在连接"):RoleMgr.Checking?void egret.log("正在检查账号"):(GameSocket.ins().close(),void StartGetUserInfo.Login())}},t.isDebug?StartGetUserInfo.GetUserInfo():SdkMgr.isWxGame()?(WxSdk.ins().getUserWx(),WxSdk.ins().wxLoging()):SdkMgr.getParam()):(StartGetUserInfo.mServerData={id:LocationProperty.urlParam.serverid,name:LocationProperty.urlParam.name,version:LocationProperty.urlParam.version,ip:LocationProperty.urlParam.url,status:LocationProperty.urlParam.status},t.LoadResVersionComplate()),egret.log("运行引擎:"+navigator.userAgent)},t.AddCreateRoleView=function(){null!=t.instance&&(t.instance.createRoleView=new CreateRoleView,t.instance.addChild(t.instance.createRoleView),t.instance.mStartView&&(DisplayUtils.disposeAll(t.instance.mStartView),t.instance.mStartView=null))},t.CloseView=function(){null!=t.instance&&null!=t.instance.mStartView&&(egret.log("新用户，加载创角资源"),t.instance.mStartView.close&&t.instance.mStartView.close(),DisplayUtils.disposeAll(t.instance.mStartView),t.instance.mStartView=null)},t.LoadResVersionComplate=function(){if(null==t.instance)return void console.log("main is null");t.instance.createRoleView&&(t.instance.createRoleView.close(),DisplayUtils.disposeAll(t.instance.createRoleView),t.instance.createRoleView=null);var e;Const.IsLoadType01&&(e=new GameLoadingView(t.instance.onThemeLoadComplete)),SdkMgr.isWxGame()||SdkMgr.getActorCreateTime()},t.prototype.addDefault=function(){this.stage.registerImplementation("eui.IAssetAdapter",new AssetAdapter),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),ResourceUtils.ins().addConfig(Const.RES_URL+"resource/default.res.json?v="+Math.random(),Const.RES_URL+"resource/"),SdkMgr.isWxGame()?ResourceUtils.ins().loadConfig(t.instance.configLoadComp,t.instance):ResourceUtils.ins().loadConfig(t.instance.onConfigComplete,t.instance)},t.prototype.configLoadComp=function(){RES.getResAsync("conf_json",this.selectServer,this)},t.prototype.selectServer=function(e,i){Const.wxServerUrl=e.isTest?e.testpath:e.path,WxSdk.ins().isShowLog=e.isLog,egret.log("调试输出信息:"+(e.isLog?"开启":"关闭")+" 连接["+(e.isTest?"测试服":"正式服")+"]="+Const.wxServerUrl),WxSdk.ins().showNavigateTo=e.showNavigateTo,WxSdk.ins().pay_type=e.payType,t.instance.onConfigComplete()},t.prototype.onConfigComplete=function(){var e=this;SdkMgr.isWxGame()&&(RES.getResByUrl("lunchLoad.jpg",this.addBackBg,this,RES.ResourceItem.TYPE_IMAGE),ResMgr.ins().saveLoadingRes("lunchLoad.jpg"));var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,function(){e.Init2()},this)},t.prototype.onThemeLoadComplete=function(){var e=new GameApp(this);e.callbackFun=function(e){egret.log("请求进入游戏"),Const.IsLoadType01?(RoleMgr.EnterGame(),SdkMgr.isWxGame()&&WxSdk.ins().sdkLoad()):StartGetUserInfo.Login()}},t.prototype.addBackBg=function(e,i){var o=e;o&&(this.startBg=new eui.Image,this.startBg.texture=o,t.instance.addChildAt(this.startBg,0),t.wxsystemInfo||WxSdk.ins().getSystemInfo())},t.prototype.removeBackBg=function(){if(this.startBg&&-1<t.instance.getChildIndex(this.startBg)){t.instance.removeChild(this.startBg);ResMgr.ins().saveLoadingRes(""+this.startBg.source)}},t.prototype.initModule=function(){StageUtils.ins(),NewFunNotice.ins(),GameLogic.ins(),UserBag.ins(),Bless.ins(),UserBoss.ins(),Chat.ins(),Encounter.ins(),UserFb.ins(),UserForge.ins(),UserGem.ins(),UserZhuLing.ins(),Guild.ins(),GuildFB.ins(),GuildRobber.ins(),GuildStore.ins(),UserJingMai.ins(),Ladder.ins(),LongHun.ins(),PlayFun.ins(),Rank.ins(),Recharge.ins(),UserEquip.ins(),UserRole.ins(),UserSkill.ins(),Wing.ins(),Setting.ins(),Shop.ins(),SpecialRing.ins(),UserTask.ins(),UserTips.ins(),Title.ins(),Hunt.ins(),UserVip.ins(),UserWarn.ins(),ZhuzaiEquip.ins(),UserZs.ins(),ZsBoss.ins(),UserFb2.ins(),MineModel.ins(),MoneyTreeModel.ins(),MailModel.ins(),ActivityModel.ins(),PrestigeModel.ins(),GameServer.ins(),Notice.ins(),FuwenModel.ins(),FindAssetsModel.ins(),ExpjadeModel.ins(),DressModel.ins(),LegendModel.ins(),YbTurntableModel.ins(),FuncOpenModel.ins(),RaidMgr.ins(),GuildWar.ins(),GuildReward.ins(),GuildBoss.ins(),EggBroken.ins(),DrillModel.ins(),DartCarModel.ins(),DayOneActivityController.ins(),ZhuanZhiModel.ins(),RingSoulModel.ins(),TenKillSproto.ins(),OnlineRewardsModel.ins(),PetSproto.ins(),MountSproto.ins(),ArtifactSproto.ins(),ClimbTowerSproto.ins(),GadSproto.ins(),SyBossSproto.ins(),ShareModel.ins(),Activity303Sproto.ins(),RoleAddAttrPointModel.ins(),ShareMissionSproto.ins(),NeiGongControl.ins(),EasyLoading.ins(),TeamFbSproto.ins(),OmGifBagSproto.ins(),ChaosBattleSproto.ins(),TheGunSproto.ins(),ActivityType31Model.ins(),WarOrderSproto.ins(),CouponSproto.ins()},t}(eui.UILayer);__reflect(Main.prototype,"Main"),window.Main=Main;var MessageDef=function(){function e(){}return e.SHOP_REFRESH="SHOP_REFRESH",e.MINI_CHAT_PANEL_STATE="MINI_CHAT_PANEL_STATE",e.RANDOEM_NAME="RANDOEM_NAME",e.START_GAME_SERVER_LIST="START_GAME_SERVER_LIST",e.YB_TURNTABLE_UPDATE="YB_TURNTABLE_UPDATE",e.RAID_KILL_MONSTER_COUNT="RAID_KILL_MONSTER_COUNT",e.FIND_ASSETS_UPDATE="FIND_ASSETS_UPDATE",e.ACTOR_PRESTIGE_UPDATE="ACTOR_PRESTIGE_UPDATE",e.LEVEL_CHANGE="LEVEL_CHANGE",e.GOLD_CHANGE="GOLD_CHANGE",e.YB_CHANGE="YB_CHANGE",e.EXP_CHANGE="EXP_CHANGE",e.NAME_CHANGE="NAME_CHANGE",e.POWER_CHANGE="POWER_CHANGE",e.SOUL_CHANGE="SOUL_CHANGE",e.POWER_BOOST="POWER_BOOST",e.GUANQIA_CHANGE="GUANQIA_CHANGE",e.FUNC_OPEN_UPDATE="FUNC_OPEN_UPDATE",e.CHECK_HAVE_CAN="CHECK_HAVE_CAN",e.VIP_LEVEL_CHANGE="VIP_LEVEL_CHANGE",e.UPDATA_VIP_AWARDS="UPDATA_VIP_AWARDS",e.UPDATA_VIP_EXP="UPDATA_VIP_EXP",e.TITLE_SHOW="TITLE_SHOW",e.SUB_ROLE_CHANGE="SUB_ROLE_CHANGE",e.FUBEN_CHANGE="FUBEN_CHANGE",e.ROLE_HINT="ROLE_HINT",e.FB_COUNT_UPDATE="FB_COUNT_UPDATE",e.PUBLIC_BOSS_LIST_DATA="PUBLIC_BOSS_LIST_DATA",e.PUBLIC_BOSS_RANK_UPDATE="PUBLIC_BOSS_RANK_UPDATE",e.PUBLIC_BOSS_RECORD_UPDATE="PUBLIC_BOSS_RECORD_UPDATE",e.PUBLIC_BOSS_RELIVE_UPDATE="PUBLIC_BOSS_RELIVE_UPDATE",e.PUBLIC_BOSS_OWNER_CHNAGE="PUBLIC_BOSS_OWNER_CHNAGE",e.SKILL_UPGRADE="SKILL_UPGRADE",e.SKILL_GREWUPALL="SKILL_GREWUPALL",e.MIJI_NIFO="MIJI_NIFO",e.MIJI_LEARN_UPDATE="MIJI_LEARN_UPDATE",e.MIJI_CHANGE_RESULT="MIJI_CHANGE_RESULT",e.MIJI_LOCK_STATE_CHANGE="MIJI_LOCK_STATE_CHANGE",e.XINFA_ITEM_SELECT="XINFA_ITEM_SELECT",e.XINFA_INFO="XINFA_INFO",e.MIX_REUSLT="MIX_REUSLT",e.DELETE_ITEM="DELETE_ITEM",e.ADD_ITEM="ADD_ITEM",e.CHANGE_ITEM="CHANGE_ITEM",e.ITEM_COUNT_CHANGE="ITEM_COUNT_CHANGE",e.BAG_ITEM_COUNT_CHANGE="BAG_ITEM_COUNT_CHANGE",e.BAG_WILL_FULL="BAG_WILL_FULL",e.BAG_HAS_ITEM_CAN_USE="BAG_HAS_ITEM_CAN_USE",e.LOONGSOUL_LV_CHANGE="LOONGSOUL_LV_CHANGE",e.ZS_BOSS_GETMY_LOTTERY_POINT="ZS_BOSS_GETMY_LOTTERY_POINT",e.ZS_BOSS_LOTTERY_MAX_POINT="ZS_BOSS_LOTTERY_MAX_POINT",e.ZS_BOSS_HUDUN_POINT="ZS_BOSS_HUDUN_POINT",e.ZS_BOSS_REMAIN_TIME="ZS_BOSS_REMAIN_TIME",e.ZS_BOSS_OPEN="ZS_BOSS_OPEN",e.BOSS_TIME_HUDUN="BOSS_TIME_HUDUN",e.ZHUZAI_DATA_UPDATE="ZHUZAI_DATA_UPDATE",e.ZHUZAI_UP_RESULT="ZHUZAI_UP_RESULT",e.SHOP_MEADAL_RESULT="SHOP_MEADAL_RESULT",e.SHOP_MEADAL_BUY_RESULT="SHOP_MEADAL_BUY_RESULT",e.SHOP_MEADAL_OPEN_STATE="SHOP_MEADAL_OPEN_STATE",e.SHOP_HONOR_RESULT="SHOP_HONOR_RESULT",e.MINE_STATU_CHANGE="MINE_STATU_CHANGE",e.REFUSH_MINE_SUCCESS="REFUSH_MINE_SUCCESS",e.MINE_UPDATE_TIME="MINE_UDPATE_TIME",e.MINE_REVENGE_LIST="MINE_REVENGE_LIST",e.UPDATE_MINE_LIST="UPDATE_MINE_LIST",e.REFUSHMINE_RED_INFO="REFUSHMINE_RED_INFO",e.MONEY_INFO_CHANGE="MONEY_INFO_CHANGE",e.MONEY_RECHARGE_GIFT_CHANGE="MONEY_RECHARGE_GIFT_CHANGE",e.GAME_NOTICE_OPEN="GAME_NOTICE_OPEN",e.UPDATA_TASK="UPDATA_TASK",e.UPDATE_VITALITY="UPDATE_VITALITY",e.DOUBLE_MINING_NOTICE="DOUBLE_MINING_NOTICE",e.MAIL_DATA_CHANGE="MAIL_DATA_CHANG",e.OPEN_MAIL="OPEN_MAIL",e.MAIL_GET_ITEM="MAIL_GET_ITEM",e.MAIL_RED_POINT="MAIL_RED_POINT",e.MAIL_SYSTEM_MAIL="MAIL_SYSTEM_MAIL",e.HUNT_ADDRECORD="HUNT_ADDRECORD",e.HUNT_RESULT="HUNT_RESULT",e.HUNT_BOX_INFO="HUNT_BOX_INFO",e.EggBroken_ADDRECORD="EggBroken_ADDRECORD",e.ACTIVITY10_LIST_REFUSH="ACTIVITY10_LIST_REFUSH",e.ACTIVITY_IS_AWARDS="ACTIVITY_IS_AWARDS",e.UPDATE_ACTIVITY_PANEL="UPDATE_ACTIVITY_PANEL",e.UPDATE_ACTIVITY303_PANEL="UPDATE_ACTIVITY303_PANEL",e.ACTIVITY4_UPDATE="ACTIVITY4_UPDATE",e.ACTIVITY4_IS_GET_AWARDS="ACTIVITY4_IS_GET_AWARDS",e.UPDATE_RECHARGE="UPDATE_RECHARGE",e.RECHARGE_UPDATE_MONTH_DAY="RECHARGE_UPDATE_MONTH_DAY",e.RECHARGE_UPDATE_MONTH_REWARD="RECHARGE_UPDATE_MONTH_REWARD",e.YBTURNTABLE_RECORD_MSG="YBTURNTABLE_RECORD_MSG",e.YBTURNTABLE_START="YBTURNTABLE_START",e.ACTIVITY_HUNT_INIT_RECORD="ACTIVITY_HUNT_INIT_RECORD",e.ACTIVITY_HUNT_ADD_RECORD="ACTIVITY_HUNT_ADD_RECORD",e.CHANGE_EQUIP="CHANGE_EQUIP",e.CHANGE_WING="CHANGE_WING",e.WING_BOOST="WING_BOOST",e.WING_UPGRADE="WING_UPGRADE",e.WING_ACTIVATE="WING_ACTIVATE",e.WING_CHANGESHOW_MSG="WING_CHANGESHOW_MSG",e.DRESS_INFO="DRESS_INFO",e.DRESS_UN_INFO="DRESS_UN_INFO",e.DRESS_JIHUORES="DRESS_JIHUORES",e.FUWEN_EQUIP_UPDATE="FUWEN_EQUIP_UPDATE",e.FUWEN_EQUIP_OPEN="FUWEN_EQUIP_OPEN",e.FUWEN_EQUIP_REPLACE="FUWEN_EQUIP_REPLACE",e.RING_BUFF_UPDATE="RING_BUFF_UPDATE",e.RING_BOSS_UPDATE="RING_BOSS_UPDATE",e.PRESTIGE_RESULT="PRESTIGE_RESULT",e.PRESTIGE_RANK_TOPTHREE="PRESTIGE_RANK_TOPTHREE",e.ENCOUNTER_ITEM_INFO_UPDATE="ENCOUNTER_ITEM_INFO_UPDATE",e.ENCOUNTER_DATA_CHANGE="ENCOUNTER_ITEM_INFO_UPDATE",e.ENCOUNTER_PLAYER_ROB="ENCOUNTER_PLAYER_ROB",e.ENCOUNTER_NEWS="ENCOUNTER_NEWS",e.ENCOUNTER_NEWS_LIST="ENCOUNTER_NEWS_LIST",e.EXPJADE_UPDATE="EXPJADE_UPDATE",e.SHOW_OTHER_ACTOR="SHOW_OTHER_ACTOR",e.SHOW_RANK_OTHER_ACTOR="SHOW_RANK_OTHER_ACTOR",e.CHALLENGE_UPDATE_INFO="CHALLENGE_UPDATE_INFO",e.LADDER_UPWEEK_RANK_UPDATE="LADDER_UPWEEK_RANK_UPDATE",e.LADDER_PRE_WEEK_REWARD="LADDER_PRE_WEEK_REWARD",e.LEGEND_UPDATE_DRESS="LEGEND_UPDATE_DRESS",e.LEGEND_UPDATE_SALE="LEGEND_UPDATE_SALE",e.GUILD_ROBBER_NOTICE="GUILD_ROBBER_NOTICE",e.GUILD_WAR_UPDATE_TARGETS="GUILD_WAR_UPDATE_TARGETS",e.GUILD_WAR_UPDATE_ENEMIES="GUILD_WAR_UPDATE_ENEMIES",e.GUILD_WAR_DOORSTATU_CHANGE="GUILD_WAR_DOORSTATU_CHANGE",e.GUILD_WAR_CITYOWN_CHANGE="GUILD_WAR_CITYOWN_CHANGE",e.GUILDWAR_REDBAGINFO_CHANGE="GUILDWAR_REDBAGINFO_CHANGE",e.GUILDWAR_GETDAY_REWARD="GUILDWAR_GETDAY_REWARD",e.GUILDWAR_STARTSTATU_CHANGE="GUILDWAR_STARTSTATU_CHANGE",e.GUILDWAR_POINT_UPDATE="GUILDWAR_POINT_UPDATE",e.GUILDWAR_WEIXIE_CHANGE="GUILDWAR_WEIXIE_CHANGE",e.GUILDWAR_HUDUN_INFO="GUILDWAR_HUDUN_INFO",e.GUILDWAR_RANK_INFO="GUILDWAR_RANK_INFO",e.GUILDWAR_PERSONAL_RANK_INFO="GUILDWAR_PERSONAL_RANK_INFO",e.GUILDWAR_ACTOR_UPDATE="GUILDWAR_ACTOR_UPDATE",e.GUILDWAR_SENDREWARD_SUCCESS="GUILDWAR_SENDREWARD_SUCCESS",e.GUILDWAR_MYRANK_CHANGE="GUILDWAR_MYRANK_CHANGE",e.GUILDWAR_SENDLIST_CHANGE="GUILDWAR_SENDLIST_CHANGE",e.GUILDWAR_UPDATE_BASE_INFO="GUILDWAR_UPDATE_BASE_INFO",e.GUILDWAR_FIRST_WINNER="GUILDWAR_FIRST_WINNER",e.GUILDWAR_FLAG_NOTICE="GUILDWAR_FLAG_NOTICE",e.GUILD_BOSS_CALL_INFO="GUILD_BOSS_CALL_INFO",e.GUILD_BOSS_OPEN_INFO="GUILD_BOSS_OPEN_INFO",e.GUILD_REWARD_WINNER_INFO="GUILD_REWARD_WINNER_INFO",e.GUILD_REWARD_UPDATE_DISP_INFO="GUILD_REWARD_UPDATE_DISP_INFO",e.KF_GUILD_GROUPING_INFO="KF_GUILD_GROUPING_INFO",e.KF_GUILD_LAST_GROUPING_INFO="KF_GUILD_LAST_GROUPING_INFO",e.GAME_SCENE_WORD="GAME_SCENE_WORD",e.RING_UPDATE_DATA="RING_UPDATE_DATA",e.RING_INIT_DATA="RING_INIT_DATA",e.RING_UPDATE_OPEN_DATA="RING_UPDATE_OPEN_DATA",e.RING_UPDATE_TASK_DATA="RING_UPDATE_TASK_DATA",e.RAID_RELIVE_TIME_GD_BOSS="RAID_RELIVE_TIME_GD_BOSS",e.EGG_BROKEN_RESULT="EGG_BROKEN_RESULT",e.OPEN_SERVER="OPEN_SERVER",e.DISCOUNT_GIFT_BAG_INFO="DISCOUNT_GIFT_BAG_INFO",e.KF_BOSS_LIST_DATA="KF_BOSS_LIST_DATA",e.WORLD_BOSS_OPEN="WORLD_BOSS_OPEN",e.AUTO_OPENSHOUCHONG_COMPLET="AUTO_OPENSHOUCHONG_COMPLET",e.AUTO_OPENSHOUCHONGANIM_COMPLET="AUTO_OPENSHOUCHONGANIM_COMPLET",e.TRYROAD_DATAS="TRYROAD_DATAS",e.TRYROAD_RANK="TRYROAD_RANK",e.UPDATA_DARTCAR_LIST="UPDATA_DARTCAR_LIST",e.DARTCAR_REVENGE_LIST="DARTCAR_REVENGE_LIST",e.DOUBLE_DARTCAR_NOTICE="DOUBLE_DARTCAR_NOTICE",e.DARTCAR_STATU_CHANGE="DARTCAR_STATU_CHANGE",e.REFUSH_DARTCAR_SUCCESS="REFUSH_DARTCAR_SUCCESS",e.ACROSSLADDER_REFRESH_PLAYER_INFO="ACROSSLADDER_REFRESH_PLAYER_INFO",e.ACROSSLADDER_REFRESH_ITEMS="ACROSSLADDER_REFRESH_ITEMS",e.ACROSSLADDER_CHALLENGE_CONFIRM="ACROSSLADDER_CHALLENGE_CONFIRM",e.ACROSSLADDER_HISTORY_RANK="ACROSSLADDER_HISTORY_RANK",e.DAYONE_ACTIVITY="DAYONE_ACTIVITY",e.ON_HOOK_DETAILES="ON_HOOK_DETAILES",e.ON_HOOK_BOOS="ON_HOOK_BOOS",e.ON_HOOK_BOOS_BLOOD="ON_HOOK_BOOS_BLOOD",e.ON_HOOK_BOOS_VANISH="ON_HOOK_BOOS_VANISH",e.ON_HOOK_KILL_MONSTER="ON_HOOK_KILL_MONSTER",e.ON_HOOK_ROLE_UPDATE="ON_HOOK_ROLE_UPDATE",e.ZHUANZHI_UPLEVEL_RESULT="ZHUANZHI_UPLEVEL_RESULT",e.ZHUANZHI_TASKLIST="ZHUANZHI_TASKLIST",e.ZHUANZHI_JM_ITEM_SELECT="ZHUANZHI_JM_ITEM_SELECT",e.ZHUANZHI_EQUIP_ITEM_SELECT="ZHUANZHI_EQUIP_ITEM_SELECT",e.HOMEBOSS_PANEL_CHANGE="HOMEBOSS_PANEL_CHANGE",e.HOMEBOSS_BOSSMSG_UPDATE="HOMEBOSS_BOSSMSG_UPDATE",e.HOMEBOSS_REMIND_UPDATE="HOMEBOSS_REMIND_UPDATE",e.HOMEBOSS_REF_MSG="HOMEBOSS_REF_MSG",e.LUCKGIFTBAG_DATA_UPDATE="LUCKGIFTBAG_DATA_UPDATE",e.TENKILLBUFF_UPDATE="TENKILLBUFF_UPDATE",e.TENKILL_PANEL_UPDATE="TENKILL_PANEL_UPDATE",e.TENKILL_BLOOD_UPDATE="TENKILL_BOOL_UPDATE",e.TENKILL_BOSS_INIT="TENKILL_BOSS_BLOOD",e.DANYAO_UPDATE="DANYAO_UPDATE",e.MODULE_PROMPT_CLOSE="MODULE_PROMPT_CLOSE",e.ONLINE_REWARDS_STATE="ONLINE_REWARDS_STATE",e.REDPOINT_STATE="REDPOINT_STATE",e.MIJING_DATA_UPDATE="MIJING_DATA_UPDATE",e.MIJING_REF_DATA_UPDATE="MIJING_REF_DATA_UPDATE",e.MIJING_MOVE_MSG="MIJING_MOVE_MSG",e.MIJING_BUFF_UPDATE="MIJING_BUFF_UPDATE",e.MIJING_POINT_UPDATE="MIJING_POINT_UPDATE",e.MIJING_DICE_RESULT="MIJING_DICE_RESULT",e.MIJING_GOLD_UPDATE="MIJING_GOLD_UPDATE",e.MIJING_RANK_UPDATE="MIJING_RANK_UPDATE",e.MIJING_SHOP_UPDATE="MIJING_SHOP_UPDATE",e.MIJING_EVT_UPDATE="MIJING_EVT_UPDATE",e.MIJING_MOVEEND_MSG="MIJING_MOVEEND_MSG",e.MIJING_MOVEPOINT_MSG="MIJING_MOVEPOINT_MSG",e.MIJING_PLAYEFF_MSG="MIJING_PLAYEFF_MSG",e.MIJING_PLAYDICEFLY_MSG="MIJING_PLAYDICEFLY_MSG",e.MJBT_UPDATE_ROLE="MJBT_UPDATE_ROLE",e.MIJING_PLAYHEARTANIM_MSG="MIJING_PLAYHEARTANIM_MSG",e.MIJING_CARDEVTEND_MSG="MIJING_CARDEVTEND_MSG",e.MIJING_BOSSBLOOD_UPDATE="MIJING_BOSSBLOOD_UPDATE",e.EXPWEL_INIT_MSG="EXPWEL_INIT_MSG",e.CHAT_SEND_SUCCESS_UPDATE="CHAT_SEND_SUCCESS_UPDATE",e.CHAT_RECEIVE_SUCCESS_UPDATE="CHAT_RECEIVE_SUCCESS_UPDATE",e.WILLBOSS_AWARD_UPDATE="WILLBOSS_AWARD_UPDATE",e.SKILL_UPDATE="SKILL_UPDATE",e.UPDATE_MAINELEMENT="UPDATE_MAINELEMENT",e.CLOSE_SKILLSHOWWIN_MSG="CLOSE_SKILLSHOWWIN_MSG",e.GUIDE_SKILL_END="GUIDE_SKILL_END",e.GUIDE_SKILLBATTLE_END="GUIDE_SKILLBATTLE_END",e.GUIDE_ADDEQUIP_END="GUIDE_ADDEQUIP_END",e.SHENQI_FBCOUNT_UPDATE="SHENQI_FBCOUNT_UPDATE",e.UPDATE_FIRSTRECHARGE="UPDATE_FIRSTRECHARGE",e.UPDATE_ACTIVITY2_MSG="UPDATE_ACTIVITY2_MSG",e.ROLE_ADD_ATTR_POINT_INFO="ROLE_ADD_ATTR_POINT_INFO",e.NEIGONG_UPDATE="NEIGONG_UPDATE",e.PUBLIC_BOSS_REBIRTHT_TIPS="PUBLIC_BOSS_REBIRTHT_TIPS",e.HEROWAY_MSG="HEROWAY_MSG",e.UPDATE_BOSS_HP="UPDATE_BOSS_HP",e.CHANGE_MAP_MSG="CHANGE_MAP_MSG",e.SOCKE_RENEECTED_SUCCESS="SOCKE_RENEECTED_SUCCESS",e.OFFLIN_SHAREJONIN_SUCCESS="OFFLIN_SHAREJONIN_SUCCESS",e.EQUIP_ITEM_RESOLVE_MSG="EQUIP_ITEM_RESOLVE_MSG",e.REDPOINT_NAVIGATE_UPDATE="REDPOINT_NAVIGATE_UPDATE",e.PK_BOX_OPEN="PK_BOX_OPEN",e.CREATE_CHARO_MSG="CREATE_CHARO_MSG",e.PAY_SPEND_RANK_UPDATE="PAY_SPEND_RANK_UPDATE",e.HUNT_LUCK_ADDLOG="HUNT_LUCK_ADDLOG",e.HUNT_LUCK_REWARD="HUNT_LUCK_REWARD",e.HUNT_LUCK_RANK="HUNT_LUCK_RANK",e.HUNT_LUCK_GOODPOOL="HUNT_LUCK_GOODPOOL",e}();__reflect(MessageDef.prototype,"MessageDef"),window.MessageDef=MessageDef;var BasePopupView=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.GetLayerLevel=function(){return LayerManager.UI_Popup},t}(BaseEuiView);__reflect(BasePopupView.prototype,"BasePopupView"),window.BasePopupView=BasePopupView;var SimpleResMgr=function(){function e(){}return e.Unload=function(e){return e&&egret.is(e,"IResObject")?e.OnResUnload():!1},e.DestroyRes=function(e){return RES.destroyRes(e)},e}();__reflect(SimpleResMgr.prototype,"SimpleResMgr"),window.SimpleResMgr=SimpleResMgr;var ActorName=function(e){function t(){var t=e.call(this)||this;return t.m_IsMonth01=!1,t.m_IsMonth02=!1,t.m_VipLv=0,t.m_Name="",t.m_Align=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"actorName",{set:function(e){this.m_Name=e,this._UpdateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"month",{set:function(e){this.m_IsMonth02=Boolean(e),this._UpdateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zun",{set:function(e){this.m_IsMonth01=Boolean(e),this._UpdateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vipLv",{set:function(e){this.m_VipLv=Number(e),this._UpdateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{set:function(e){this.m_Align=Boolean(e),this._UpdateContent()},enumerable:!0,configurable:!0}),t.prototype.Set=function(e,t,i,o){this.m_Name=e,this.m_VipLv=t,this.m_IsMonth02=i?!0:!1,this.m_IsMonth01=o?!0:!1,this._UpdateContent()},t.prototype._UpdateContent=function(){if(this.$stage){var e=.9;if(this.m1.width=this.m_IsMonth01?Math.floor(19*e):0,this.m2.width=this.m_IsMonth02?Math.floor(18*e):0,this.m_VipLv>0?(this.vip.width=Math.floor(43*e),this.lv.text=this.m_VipLv+"",this.lv.width=12*this.lv.text.length):(this.lv.text="",this.vip.width=0,this.lv.width=0),this.title.validateNow(),this.label)if(null==this.m_Name?this.label.text="":"string"==typeof this.m_Name?this.label.text=this.m_Name:this.label.textFlow=this.m_Name,this.label.x=this.title.width>0?this.title.width+1:0,this.m_Align){var t=this.label.x+this.label.width;this.pos.x=Math.floor(.5*(this.width-t))}else this.pos.x=0}},t}(eui.Component);__reflect(ActorName.prototype,"ActorName",["eui.UIComponent","egret.DisplayObject"]),window.ActorName=ActorName;var AttrLabel=function(e){function t(){var i=e.call(this)||this;return i.m_Gap=t.GAP,i}return __extends(t,e),t.prototype.showBg=function(){this.attrBg.visible=!0},Object.defineProperty(t.prototype,"hideBg",{set:function(e){this.m_HideBg=!0
},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gap",{set:function(e){this.m_Gap=parseInt(e),this._UpdateGap()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{set:function(e){this.m_Text=e,this._UpdateText()},enumerable:!0,configurable:!0}),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_HideBg&&(this.attrBg.visible=!1),null!=this.m_Gap&&this._UpdateGap(),null!=this.m_Text&&this._UpdateText(),this.leftSolaAttr.visible=!1},t.prototype.ShowSolaAttr=function(e,t){this.leftSolaAttr.visible=!0;var i=2<e.length?77:44;this.leftSolaAttr.height=this.attrLabel.height,this.leftSolaAttr.x=this.attrLabel.x-i,this.leftSolaAttr.y=this.attrLabel.y;for(var o=0;t>o;o++)e="\n <font color = '0xffcc00'>"+e+"</font>";this.leftSolaAttr.textFlow=(new egret.HtmlTextParser).parse(e),this.leftSolaAttr.verticalCenter=this.attrLabel.verticalCenter},t.prototype._UpdateGap=function(){if(this.$stage){var e=(this.m_Gap||t.GAP)+t.ARROW_WIDTH;this.nextAttrLabel.visible?(this.nextAttrLabel.x=t.MIDDLE_POS+e,this.attrLabel.x=t.MIDDLE_POS-e-this.attrLabel.width):this.attrLabel.x=t.MIDDLE_POS-.5*this.attrLabel.width}},t.prototype._UpdateText=function(){this.$stage&&null!=this.m_Text&&(this.attrLabel.text=this.m_Text,this.arrows.visible=!1,this.nextAttrLabel.visible=!1)},t.prototype.SetCurAttr=function(e){this.attrLabel.textFlow=(new egret.HtmlTextParser).parse(e),this.arrows.visible=!1,this.nextAttrLabel.visible=!1,this._UpdateGap()},t.prototype.SetNextAttr=function(e){this.nextAttrLabel.textFlow=(new egret.HtmlTextParser).parse(e),this.arrows.visible=!0,this.nextAttrLabel.visible=!0,this._UpdateGap()},t.prototype.SetCurAttrNew=function(e){this.attrLabel.text=e,this.arrows.visible=!1,this.nextAttrLabel.visible=!1,0==this.attrBg.visible&&(this.attrBg.visible=!0)},t.prototype.SetNextAttrNew=function(e){this.nextAttrLabel.text=e,this.arrows.visible=!0,this.nextAttrLabel.visible=!0,0==this.attrBg.visible&&(this.attrBg.visible=!0)},t.prototype.SetCurAttrByAddType=function(e,t){var i=AttributeData.getAttStr(AttributeData.AttrAddition(e.attr,t.attr),1);this.SetCurAttr(i)},t.prototype.SetNextAttrByAddType=function(e,t){var i=AttributeData.getAttStr(AttributeData.AttrAddition(e.attr,t.attr),1);this.SetNextAttr(i)},t.prototype.moveAttr=function(){var e=egret.Tween.get(this.attrLabel),t=this.attrLabel.x,i=this.nextAttrLabel.x;e.to({x:t+200,alpha:0},100).to({x:t-200},100).to({x:t,alpha:1},100);var o=egret.Tween.get(this.nextAttrLabel);o.to({x:i+200,alpha:0},100).to({x:i-200},100).to({x:i,alpha:1},100)},t.GAP=20,t.MIDDLE_POS=240,t.ARROW_WIDTH=20,t}(eui.Component);__reflect(AttrLabel.prototype,"AttrLabel",["eui.UIComponent","egret.DisplayObject"]),window.AttrLabel=AttrLabel;var CommonDialog=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"title",{set:function(e){this.m_Title=e,this._UpdateTitle()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideBtn",{set:function(e){this.m_HideBtn=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topBtn",{set:function(e){this.m_TopBtn=!0},enumerable:!0,configurable:!0}),t.prototype._UpdateTitle=function(){this.titleLabel&&this.m_Title&&this.$stage&&(this.titleLabel.text=this.m_Title)},t.prototype.SetReturnButton=function(e){return e?(this.dialogReturnBtn&&(this.cacheReturnBtn=this.dialogReturnBtn,this.dialogReturnBtn.visible=!1),void(this.dialogReturnBtn=e)):void(this.cacheReturnBtn&&(this.dialogReturnBtn=this.cacheReturnBtn,this.dialogReturnBtn.visible=!0,this.cacheReturnBtn=null))},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this._UpdateTitle(),this.m_HideBtn&&(this.dialogCloseBtn.visible=!1),this.m_TopBtn&&this.parent&&(this.m_TempTimer=Timer.TimeOut(function(){DisplayUtils.SetParent(t.dialogReturnBtn,t.parent)},50))},t.prototype.OnAdded=function(e){for(var i=0,o=t.SHOW_DIALOG_LIST;i<o.length;i++){var s=o[i];s!=this&&(s.dialogMask.visible=!1)}t.SHOW_DIALOG_LIST.push(this),this.m_Target=e,this.dialogCloseBtn&&this.dialogCloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.dialogReturnBtn&&this.dialogReturnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.dialogMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype.OnRemoved=function(){for(var e=t.SHOW_DIALOG_LIST.length-1;e>=0;--e){var i=t.SHOW_DIALOG_LIST[e];if(null!=i&&i!=this){i.dialogMask.visible=!0;break}t.SHOW_DIALOG_LIST.splice(e,1)}this.dialogReturnBtn&&this.dialogReturnBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.dialogCloseBtn&&this.dialogCloseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.dialogMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.m_TempTimer&&this.m_TempTimer.Stop()},t.prototype._Close=function(){return this.mCallback?void this.mCallback():void(this.m_Target&&ViewManager.ins().close(this.m_Target))},t.prototype._OnClick=function(e){if(this.dialogReturnBtn&&e.currentTarget==this.dialogReturnBtn&&this._Close(),!this.m_HideBtn)switch(e.currentTarget){case this.dialogMask:if(this.notClickMask)break;case this.dialogCloseBtn:this._Close()}},t.SHOW_DIALOG_LIST=[],t}(eui.Component);__reflect(CommonDialog.prototype,"CommonDialog",["eui.UIComponent","egret.DisplayObject"]),window.CommonDialog=CommonDialog;var CommonWindowBg=function(e){function t(){var t=e.call(this)||this;return t.mHelpId=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"title",{set:function(e){this.m_Title=e},enumerable:!0,configurable:!0}),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.touchEnabled=!1,this.viewStack&&(this.viewStack.touchEnabled=!1),this.m_TabDatas=this.viewStack,null==this.roleSelect&&(this.roleSelect=t.EMPTY_CLS),null==this.viewStack&&(this.viewStack=t.EMPTY_CLS),null==this.tabBar&&(this.tabBar=t.EMPTY_CLS),this.closeBtn.label=GlobalConfig.jifengTiaoyueLg.st100588},t.prototype.OnTap=function(e){var t=e.target;if(t==this.helpBtn&&this.mHelpId)return void ViewManager.ins().open(ZsBossRuleSpeak,this.mHelpId);var i=0;switch(t){case this.returnBtn:i=0,GuideUtils.ins().next(this.returnBtn);break;case this.closeBtn:i=1}this.m_CommonWindow&&this.m_CommonWindow.OnBackClick?0==this.m_CommonWindow.OnBackClick(i)&&ViewManager.ins().close(this.m_CommonWindow):ViewManager.ins().close(this.m_CommonWindow)},t.prototype._OnTabTouch=function(){var e=Util.GetClass(this.viewStack.getElementAt(this.tabBar.selectedIndex));if(e&&e.openCheck&&!e.openCheck())return void(this.tabBar.selectedIndex=this.m_OldIndex);var t=this.m_CommonWindow.OnOpenIndex?this.m_CommonWindow.OnOpenIndex(this.tabBar.selectedIndex):!1;t?this.tabBar.selectedIndex!=this.m_OldIndex&&(this.m_OldIndex=this.tabBar.selectedIndex,this._UpdateRoleSelectVisible(),this._UpdateTitle(),this._UpdateHelpBtn(),this._SetCurShowView(this._GetCurViewStackElement()),this._UpdateViewContent()):this.tabBar.selectedIndex=this.m_OldIndex},t.prototype.SetTabIndex=function(e){this.tabBar.selectedIndex=e,this.viewStack.selectedIndex=e,this._OnTabTouch()},t.prototype._OnRoleSelect=function(){this._UpdateViewContent()},t.prototype._GetCurViewStackElement=function(){var e=this.viewStack.getElementAt(this.tabBar.selectedIndex);return egret.is(e,"ICommonWindowTitle")?e:null},t.prototype.GetCurViewStackElement=function(){return this.viewStack.getElementAt(this.tabBar.selectedIndex)},t.prototype.GetCurViewStackElementByIndex=function(e){return this.viewStack.getElementAt(e)},t.prototype.ActivityWinBgUpdate=function(e){},t.prototype._UpdateTitle=function(){var e,t,i=this._GetCurViewStackElement();i&&(e=i.windowTitleIconName,e||(e=i.name),t=i.windowCommonBg),e||egret.is(this.m_CommonWindow,"ICommonWindowTitle")&&(e=this.m_CommonWindow.windowTitleIconName,t=this.m_CommonWindow.windowCommonBg),e||(e=this.m_Title),e&&this.nameIcon&&(e=e.replace("L",""),e=e.replace("R",""),egret.is(this.nameIcon,"eui.Label")?this.nameIcon.text=e:this.nameIcon.source=e),this.imgBg&&(this.imgBg.source=t?t:"base_2_2_04_png")},t.prototype._UpdateViewContent=function(){var e=this._GetCurViewStackElement();e?e.UpdateContent():egret.is(this.m_CommonWindow,"ICommonWindowTitle")&&this.m_CommonWindow.UpdateContent()},t.prototype._CallViewStack=function(e){for(var t=0;t<this.viewStack.numChildren;++t){var i=this.viewStack.getElementAt(t);null!=i&&i[e]&&i[e]()}},t.prototype._SetCurShowView=function(e){this.m_CurShowView&&this.m_CurShowView.DoClose&&(this.m_CurShowView.DoClose(),this.m_CurShowView=null),this.m_CurShowView=e,this.m_CurShowView&&this.m_CurShowView.DoOpen&&this.m_CurShowView.DoOpen()},t.prototype._UpdateRoleSelectVisible=function(){var e=this._GetCurViewStackElement();e&&egret.is(e,"ICommonWindowRoleSelect")?(this.roleSelect.visible=!0,this.roleSelect.clearRedPoint()):egret.is(this.m_CommonWindow,"ICommonWindowRoleSelect")?this.roleSelect.visible=!0:this.roleSelect.visible=!1},t.prototype.SetViewStack=function(e){return null==e?void console.error("commonwindowbg:setviewstack stack is null!!!"):(this.viewStack=e,this.addChildAt(e,this.getChildIndex(this.roleSelect)-1),void(this.m_TabDatas=e))},t.prototype.setRoleSelectPost=function(e,t){e&&(this.roleSelect.x=e),t&&(this.roleSelect.y=t)},t.prototype.SetTabDatas=function(e){this.m_TabDatas=e},t.prototype.AddChildStack=function(e){this.viewStack.addChild(e)},t.prototype.OnAdded=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),t||(t=0),i||(i=0),this.m_CommonWindow=e,this.m_OldIndex=t,this.viewStack.selectedIndex=t,this.tabBar.dataProvider=this.m_TabDatas,this.tabBar.selectedIndex=t,this.tabBar.validateNow(),this.returnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnTap,this),this.helpBtn&&this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnTap,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnTap,this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this._OnTabTouch,this),this.roleSelect.addEventListener(egret.TouchEvent.CHANGE,this._OnRoleSelect,this),this.scroller&&this.scroller.addEventListener(eui.UIEvent.CHANGE_END,this._OnChangeEnd,this);for(var o=0;o<this.viewStack.numElements;++o){var s=this.viewStack.getElementAt(o);s&&egret.is(s,"ICommonWindowRoleSelect")&&(s.m_RoleSelectPanel=this.roleSelect)}egret.is(this.m_CommonWindow,"ICommonWindowRoleSelect")&&(this.m_CommonWindow.m_RoleSelectPanel=this.roleSelect),this._UpdateTitle(),this._UpdateHelpBtn(),this._UpdateRoleSelectVisible(),this.roleSelect.DoOpen(i),this._SetCurShowView(this._GetCurViewStackElement()),this._UpdateViewContent(),this.m_CommonWindow&&(DisplayUtils.ChangeParent(this.closeBtn,this.m_CommonWindow),DisplayUtils.ChangeParent(this.returnBtn,this.m_CommonWindow)),this._OnChangeEnd()},t.prototype._OnChangeEnd=function(){this.scroller&&this.m_TabDatas&&(this.imgNav.visible=this.m_TabDatas.length>4,0!=this.imgNav.visible&&(this.scroller&&this.scroller.viewport&&0==this.scroller.viewport.scrollH?this.imgNav.source="cycle_btn_01_01_png":this.scroller&&this.scroller.viewport&&this.scroller.viewport.scrollH==this.scroller.viewport.contentWidth-this.scroller.width&&(this.imgNav.source="cycle_btn_01_02_png")))},t.prototype.OnRemoved=function(){this.returnBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnTap,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnTap,this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this._OnTabTouch,this),this.roleSelect.removeEventListener(egret.TouchEvent.CHANGE,this._OnRoleSelect,this),this.scroller.addEventListener(eui.UIEvent.CHANGE_END,this._OnChangeEnd,this),this.helpBtn&&this.helpBtn.removeEventListener(egret.TouchEvent.CHANGE,this.OnTap,this),this._SetCurShowView(null),this.roleSelect.DoClose()},t.prototype._UpdateHelpBtn=function(){if(this.helpBtn){var e,t=this._GetCurViewStackElement();t&&(e=t.mWindowHelpId),e||(e=this.m_CommonWindow.mWindowHelpId),this.helpBtn.visible=e,this.mHelpId=e}},t.prototype.GetSelectedIndex=function(){return this.tabBar.selectedIndex},t.prototype.CloseStack=function(e){this.viewStack.getElementAt(e).DoClose()},t.prototype.getCurRole=function(){return this.roleSelect.getCurRole()},t.prototype.clearRedPoint=function(){this.roleSelect.clearRedPoint()},t.prototype.showRedPoint=function(e,t){this.roleSelect.showRedPoint(e,t)},Object.defineProperty(t.prototype,"roleSelectPanel",{get:function(){return this.roleSelect},enumerable:!0,configurable:!0}),t.prototype.ClearTalRedPoint=function(){for(var e=0;e<this.tabBar.numChildren;++e)this.ShowTalRedPoint(e,!1)},t.prototype._GetTalRedTarget=function(e){if(!(e>=this.tabBar.numElements)){var t=this.tabBar.getElementAt(e);if(t)return t.redPoint}},t.prototype.ShowTalRedPoint=function(e,t){var i=this._GetTalRedTarget(e);i&&(i.visible=t)},t.prototype.CheckShowTalRedPoint=function(e,t){var i=this._GetTalRedTarget(e);i&&!i.visible&&(i.visible=t)},t.prototype.CheckTabRedPoint=function(){for(var e=!1,t=0;t<this.viewStack.numElements;++t){var i=this.viewStack.getElementAt(t);if(i.CheckRedPoint){var o=i.CheckRedPoint();this.ShowTalRedPoint(t,o),o&&(e=!0)}}return e},t.prototype.initItemImage=function(e,t){if(!(e>=this.tabBar.numElements)){var i=this.tabBar.getElementAt(e);i&&(i.item_image.source=ResDataPath.GetItemFullName(t+""))}},t.prototype.loadIconBG=function(e,t){if(!(e>=this.tabBar.numElements)){var i=this.tabBar.getElementAt(e);i&&(i.bg_image.source=ResDataPath.GetItemQualityName(t))}},Object.defineProperty(t.prototype,"comViewStack",{get:function(){return this.viewStack},set:function(e){this.viewStack=e},enumerable:!0,configurable:!0}),t.prototype.RemoveChildStack=function(){this.viewStack.removeChildren()},t.EMPTY_CLS={getCurRole:function(){return 0},DoOpen:function(){},DoClose:function(){},addEventListener:function(){},removeEventListener:function(){},visible:!1,numElements:0,numChildren:0,selectedIndex:0,validateNow:function(){},getElementAt:function(){}},t}(eui.Component);__reflect(CommonWindowBg.prototype,"CommonWindowBg",["eui.UIComponent","egret.DisplayObject"]),window.CommonWindowBg=CommonWindowBg;var ConsumeLabel=function(e){function t(){var t=e.call(this)||this;return t.m_Types=[],t.m_Icons=[],t}return __extends(t,e),Object.defineProperty(t.prototype,"consumeType",{set:function(e){this.m_ConsumeType=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"consumeRich",{set:function(e){if(this.m_ConsumeRich=[],"string"==typeof e)for(var t=e.split("|"),i=0,o=t;i<o.length;i++){var s=o[i];this.m_ConsumeRich.push(s.split(","))}else{if(e.length>0&&"string"==typeof e[0]){var n=[];n.push(e),e=n}this.m_ConsumeRich=e}this._UpdateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxTip",{set:function(e){null!=this.richGroup&&(this.richGroup.visible=!1),null!=this.label&&(this.label.visible=!0,this.label.visible=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"consumeValue",{get:function(){return this.m_ConsumeValue},set:function(e){this.m_ConsumeValue=parseInt(e),this._UpdateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"curValue",{get:function(){return this.m_CurValue},set:function(e){this.m_CurValue=parseInt(e),this._UpdateContent()},enumerable:!0,configurable:!0}),t.prototype._UpdateRich=function(){this.label.visible=!1,this.richGroup.visible=!0,this.m_Types=[],this.m_Icons=[];for(var e=0;e<this.richGroup.numChildren;++e){var t=this.richGroup.getChildAt(e);egret.is(t,"eui.Label")?this.m_Types.push(t):egret.is(t,"eui.Image")?this.m_Icons.push(t):console.warn("ConsumeLabel:_UpdateContent Not Define Type",t)}this.richGroup.removeChildren();var i=this._GetTypelabel();i.text=(this.m_ConsumeType?this.m_ConsumeType:GlobalConfig.jifengTiaoyueLg.st100218)+"：",this.richGroup.addChild(i);for(var e=0,o=this.m_ConsumeRich.length;o>e;++e){var s=this.m_ConsumeRich[e],n=s[0],r=s[1],a=s[2];a?r+=" ":(a=" "+r,r=null);var l=this._GetTypeIcon();if(l.source=n,this.richGroup.addChild(l),r){var h=this._GetTypelabel();h.text=r+"/",this.richGroup.addChild(h)}if(a){var c=this._GetTypelabel();e!=o-1&&(a+="        "),c.text=a,this.richGroup.addChild(c)}}egret.callLater(this._CallLater,this)},t.prototype._CallLater=function(){this.richGroup.x=.5*(480-this.richGroup.width)},t.prototype._GetTypelabel=function(){var e=this.m_Types.length>0?this.m_Types.pop():null;return e||(e=new eui.Label,e.size=13,e.textColor=5461335),e},t.prototype._GetTypeIcon=function(){var e=this.m_Icons.length>0?this.m_Icons.pop():null;return e||(e=new eui.Image,e.maxWidth=30,e.maxHeight=30),e},t.prototype._UpdateContent=function(){if(this.m_ConsumeRich)return void this._UpdateRich();this.label.visible=!0,this.richGroup.visible=!1;var e=GlobalConfig.jifengTiaoyueLg.st100218;this.m_ConsumeType&&(e+=this.m_ConsumeType),e+="：","bg"==this.currentState&&null!=this.label0&&(this.label0.textFlow=TextFlowMaker.generateTextFlow(e),e=""),null!=this.m_CurValue&&(e+=null!=this.m_ConsumeValue?(this.m_CurValue<this.m_ConsumeValue?"|C:0xf87372&T:":"|C:0x008f22&T:")+CommonUtils.overLength(this.m_CurValue)+"|C:0x535557&T:|/":CommonUtils.overLength(this.m_CurValue)+"/"),e+=null!=this.m_ConsumeValue?"|C:0x535557&T:"+CommonUtils.overLength(this.m_ConsumeValue):0,this.m_ConsumeType==GlobalConfig.jifengTiaoyueLg.st100655||this.m_ConsumeType==GlobalConfig.jifengTiaoyueLg.st100656||this.m_ConsumeType==GlobalConfig.jifengTiaoyueLg.st100657||this.m_ConsumeType==GlobalConfig.jifengTiaoyueLg.st100496||this.m_ConsumeType==GlobalConfig.jifengTiaoyueLg.st100658||this.m_ConsumeType==GlobalConfig.jifengTiaoyueLg.st100659||this.m_ConsumeType==GlobalConfig.jifengTiaoyueLg.st100660||this.m_ConsumeType==GlobalConfig.jifengTiaoyueLg.st100661?this.label.textFlow=TextFlowMaker.generateTextFlow(e,1):this.label.textFlow=TextFlowMaker.generateTextFlow(e)},t.GetValueColor=function(e,t){return e=e||0,TextFlowMaker.generateTextFlow(StringUtils.addColor(e,e>=t?36642:Color.Red)+"/"+t)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._UpdateContent()},t.prototype.ShowMaxTip=function(e){e&&(this.m_CacheValue=this.label.text,this.label.text=e)},t}(eui.Component);__reflect(ConsumeLabel.prototype,"ConsumeLabel",["eui.UIComponent","egret.DisplayObject"]),window.ConsumeLabel=ConsumeLabel;var FightResultPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.skinName="FightResultBg",this.m_Double.visible=!1,this.closeBtn1.label=GlobalConfig.jifengTiaoyueLg.st101997},t.prototype.SetState=function(e){this.currentState=e,"win"==e&&(this._mc=ObjectPool.ins().pop("MovieClip"),this._mc.x=this.groupEff.width>>1,this._mc.y=this.groupEff.height>>1,this._mc.loadUrl(ResDataPath.GetUIEffePath("eff_jiesuan"),!0,-1),this.groupEff.addChild(this._mc))},t.prototype.open=function(){},t.prototype.close=function(){},t.prototype.$onRemoveFromStage=function(){DisplayUtils.removeFromParent(this._mc),ObjectPool.ins().push(this._mc)},t}(eui.Component);__reflect(FightResultPanel.prototype,"FightResultPanel"),window.FightResultPanel=FightResultPanel;var GetwayLabel=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this.m_Text},set:function(e){this.m_Text=e,this._Update()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textColor",{set:function(e){this.m_TextColor=e,this._Update()},enumerable:!0,configurable:!0}),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._Update(),this.m_TextColor&&(this.label.textColor=this.m_TextColor)},t.prototype._Update=function(){this.$stage&&(this.label.textFlow=(new egret.HtmlTextParser).parser('<a href="event:"><u>'+this.m_Text+"</u></a>"),this.m_TextColor&&(this.label.textColor=this.m_TextColor))},t.prototype.SetUnLabel=function(e){this.label.text=e,this.label.textColor=16282482},t.prototype.SetDefault=function(){this.textColor=3066402},t.prototype.PlayEff=function(e){if(!e)return void(this.m_Eff&&(this.m_Eff.visible=!1));var t=this.m_Eff;t||(t=this.m_Eff=new MovieClip,t.touchEnabled=!1,this.m_Text.length>4?t.loadUrl(ResDataPath.GetUIEffePath("eff_ui_wzlj_002"),!0,-1):t.loadUrl(ResDataPath.GetUIEffePath("eff_ui_wzlj_001"),!0,-1),this.addChild(t)),this.m_Text.length>4?(t.x=50,t.y=13):(t.x=32,t.y=8),t.visible=!0},t.GainItemLabel=function(e){null==t.gainItemConfig&&(t.gainItemConfig=GlobalConfig.ins("GainItemConfig"));var i=t.gainItemConfig[e];return i?i.gainWay[0][0]:null},t.GainItemWay=function(e){null==t.gainItemConfig&&(t.gainItemConfig=GlobalConfig.ins("GainItemConfig"));var i=t.gainItemConfig[e];return i?i.gainWay[0][1][0]:null},t}(eui.Component);__reflect(GetwayLabel.prototype,"GetwayLabel",["eui.UIComponent","egret.DisplayObject"]),window.GetwayLabel=GetwayLabel;var PowerLabel=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"text",{set:function(e){this.m_Value=e.toString(),this._SetText()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideBg",{set:function(e){this.m_HideBg=!0},enumerable:!0,configurable:!0}),t.prototype._SetText=function(){this.m_Value&&(this.bg?this.label.text=""+this.m_Value:this.label.text=""+this.m_Value)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._SetText(),this.m_HideBg&&(this.bg.visible=!0)},t}(eui.Component);__reflect(PowerLabel.prototype,"PowerLabel",["eui.UIComponent","egret.DisplayObject"]),window.PowerLabel=PowerLabel;var RoleShowPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.skinName="RoleShowPanelSkin"},t.prototype.SetWeapon=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),this.weaponDress=i,null==this.zhuangBanId&&(this.zhuangBanId=GlobalConfig.ins("ZhuangBanId")),e){null==this.EquipConfig&&(this.EquipConfig=GlobalConfig.equipConfig);var o=t?this.zhuangBanId[e]:this.EquipConfig[e];o?this.m_Weapon=t?o.res:o.appearance:this.m_Weapon=e}else this.m_Weapon=null;this._Update()},t.prototype.SetBody=function(e,t,i,o){if(void 0===t&&(t=null),void 0===i&&(i=!1),void 0===o&&(o=!1),this.bodyDress=o,null==this.zhuangBanId&&(this.zhuangBanId=GlobalConfig.ins("ZhuangBanId")),null!=e)if("number"==typeof e){null==this.EquipConfig&&(this.EquipConfig=GlobalConfig.equipConfig);var s=i?this.zhuangBanId[e]:this.EquipConfig[e];s?this.m_Body=(i?s.res:s.appearance)+"_"+t:this.m_Body="body000_"+t}else this.m_Body=e+(null!=t?"_"+t:"");else this.m_Body=null;this._Update()},t.prototype.SetWing=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),this.wingDress=i,null==this.zhuangBanId&&(this.zhuangBanId=GlobalConfig.ins("ZhuangBanId")),null!=e){var o=t?this.zhuangBanId[e]:GlobalConfig.wingLevelConfig[e];o?this.m_Wing=t?o.res:o.appearance:this.m_Wing=e}else this.m_Wing=null;this._Update()},t.prototype._AddChild=function(e){e.x=.5*this.width,e.y=this.height/2-15,this.addChild(e)},t.prototype._Update=function(){if(this.$stage){if(this.wingDress){var e=this.m_WingClip;e||(e=this.m_WingClip=new MovieClip,this._AddChild(e)),e.loadUrl(this.m_Wing,!0,-1)}else this.wingImg.source=this.m_Wing?this.m_Wing+"_png":"";if(this.bodyDress){var e=this.m_BodyClip;e||(e=this.m_BodyClip=new MovieClip,this._AddChild(e)),e.loadUrl(this.m_Body,!0,-1)}else this.bodyImg.source=this.m_Body?this.m_Body+"_c_png":"";if(this.weaponDress){var e=this.m_WeaponClip;e||(e=this.m_WeaponClip=new MovieClip,this._AddChild(e)),e.loadUrl(this.m_Weapon,!0,-1)}else this.weaponImg.source=this.m_Weapon?this.m_Weapon+"_c_png":""}},t.prototype.Set=function(e,t){var i;if(i=egret.is(t,"Role")?t.GetSubRoleData():t,e==DressType.ARM){if(null==i)return void this.SetWeapon(null);if(null!=i.legendDress)this.SetWeapon(GlobalConfig.ins("LegendSuitConfig")[i.legendDress+1].weapon);else{var o=i.zhuangbei?i.zhuangbei[1]:0;o>0?this.SetWeapon(o,!0):0!=i.swordID?this.SetWeapon(i.swordID):this.SetWeapon(null)}}else if(e==DressType.ROLE){if(null==i)return void this.SetBody(null);if(null!=i.legendDress)this.SetBody(GlobalConfig.ins("LegendSuitConfig")[i.legendDress+1].body,i.sex);else{var o=i.zhuangbei?i.zhuangbei[0]:0;o>0?this.SetBody(o,i.sex,!0):0!=i.clothID?this.SetBody(i.clothID,i.sex):this.SetBody(0,i.sex)}}else if(e==DressType.WING){if(null==i)return void this.SetWing(null);var s=i.zhuangbei?i.zhuangbei[2]:0;s>0?this.SetWing(s,!0):null!=i.wingLevel?this.SetWing(i.wingLevel):this.SetWing(null)}else console.log("roleshowpanel not type "+e)},t.prototype.OffsetBody=function(e){this.m_BodyClip.y+=e},t.prototype.OffsetWeapon=function(e){this.m_WeaponClip.y+=e},t.prototype.OffsetWing=function(e,t){this.m_WingClip.y+=t,this.m_WingClip.x+=e},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._Update()},t.prototype.creatAnim=function(e){e instanceof Role?this.initRoleData(e):this.initSubRoleData(e),this.addTime()},t.prototype.initSubRoleData=function(e){this.release(),this.wingImg.visible=!1,this.bodyImg.visible=!1,this.weaponImg.visible=!1;var t=new Role;t.zhuangbei=e.zhuangbei,t.wingsData=new WingsData,t.wingsData.lv=e.wingLevel,t.wingsData.showLv=e.wingShowLevel,t.wingsData.openStatus=e.wingOpenStatus,t.equipsData=new Array;var i=new EquipsData;t.equipsData.push(i);var o=new EquipsData;t.equipsData.push(null),t.equipsData.push(o),i.item.configID=e.swordID,o.item.configID=e.clothID,t.mountsLevel=e.mountLv,t.mountsShowLv=e.moubtShowLv,t.sex=e.sex,t.job=e.job,t.zhuanzhiLv=e.zhuanzhiLv,this.m_ElementImg.source=ResDataPath.GetElementImgName(e.mainEle),this.charRole||(this.charRole=ObjectPool.ins().pop("CharRole")),this.charRole.infoModel=t,this.charRole.dir=3,this.charRole.updateModel(),this.charRole.playAction(EntityAction.ATTACK),this.charRole._state==EntityAction.ATTACK&&(this.charRole._body.removeEventListener(egret.Event.COMPLETE,this.onChangeState,this),this.charRole._body.addEventListener(egret.Event.COMPLETE,this.onChangeState,this)),this.m_AnimGroup.addChild(this.charRole),this.charRole.x=this.m_AnimGroup.width/2,this.charRole.y=this.m_AnimGroup.height/2,this.charRole.hideHpComp(),this.charRole._body.alpha=1,this.charRole._body.visible=!0,this.charRole._titleMc&&(this.charRole._titleMc.visible=!1)},t.prototype.initRoleData=function(e){this.release(),this.charRole,this.wingImg.visible=!1,this.bodyImg.visible=!1,this.weaponImg.visible=!1;var t=new Role,i=[];t.bianShen=e.bianShen;for(var o=0;o<e.zhuangbei.length;o++)i.push(e.zhuangbei[o]);t.zhuangbei=i;for(var s=[],o=0;o<e.equipsData.length;o++){var n=new EquipsData;n.item.configID=e.equipsData[o].item.configID,s.push(n)}t.equipsData=s;var r=new WingsData;r.lv=e.wingsData.lv,r.showLv=e.wingsData.showLv,r.openStatus=e.wingsData.openStatus,t.wingsData=r,t.mountsLevel=e.mountsLevel,t.mountsShowLv=e.mountsShowLv,t.sex=e.sex,t.job=e.job,t.attrElementMianType=e.attrElementMianType,t.zhuanzhiLv=e.zhuanzhiLv,this.m_ElementImg.source=ResDataPath.GetElementImgName(t.attrElementMianType),this.charRole||(this.charRole=ObjectPool.ins().pop("CharRole")),this.charRole.infoModel=t,this.charRole.dir=3,this.charRole.updateModel(),this.charRole.playAction(EntityAction.ATTACK),this.charRole._state==EntityAction.ATTACK&&(this.charRole._body.removeEventListener(egret.Event.COMPLETE,this.onChangeState,this),this.charRole._body.addEventListener(egret.Event.COMPLETE,this.onChangeState,this)),this.m_AnimGroup.addChild(this.charRole),this.charRole.x=this.m_AnimGroup.width/2,this.charRole.y=this.m_AnimGroup.height/2,this.charRole.hideHpComp(),this.charRole._body.alpha=1,this.charRole._body.visible=!0,this.charRole._titleMc&&(this.charRole._titleMc.visible=!1)},t.prototype.clearRole=function(){this.charRole&&(this.charRole._titleMc&&(this.charRole._titleMc.visible=!0),this.charRole._body&&this.charRole._body.removeEventListener(egret.Event.COMPLETE,this.onChangeState,this),this.charRole.scaleX=1,this.charRole.scaleY=1,this.charRole.hideHpComp(!0),DisplayUtils.dispose(this.charRole),this.charRole._infoModel=null,this.charRole=null)},t.prototype.setCharRoleWing=function(e,t){this.charRole.infoModel.zhuangbei[2]=e,this.charRole.infoModel.wingsData.lv=t,this.charRole.infoModel.wingsData.showLv=t,this.charRole.updateModel()},t.prototype.setCharRoleBody=function(e,t){void 0===t&&(t=!1),0==t&&(this.charRole.infoModel.bianShen=0),this.charRole.infoModel.zhuangbei[0]=e,this.charRole.updateModel()},t.prototype.setCharRoleWeapon=function(e){this.charRole.infoModel.zhuangbei[1]=e,this.charRole.updateModel()},t.prototype.setCharRoleMount=function(e){this.charRole.infoModel.zhuangbei[3]=e,this.charRole.updateModel()},t.prototype.setCharRoleMountLv=function(e){this.charRole.infoModel.mountsLevel=e,this.charRole.infoModel.mountsShowLv=e,this.charRole.updateModel()},t.prototype.setCharRoleTao=function(e){this.charRole.infoModel.zhuangbei[4]=e,this.charRole.updateModel()},t.prototype.setCharRoleTitle=function(e){this.charRole.infoModel.title=e,this.charRole.updateModel(),this.charRole._titleMc&&(this.charRole._titleMc.y=-80,this.charRole._titleMc.x=-20)},t.prototype.setCharSexJob=function(e,t,i,o,s,n){void 0===n&&(n=null),this.charRole.infoModel.sex=e,this.charRole.infoModel.job=t,this.charRole.initBody(ResDataPath.GetBodyName01(i,e)),this.charRole.setWeaponFileName(ResDataPath.GetWeaponName01(o,e)),this.charRole.setmountsFileName(s),n&&this.charRole.setWingFileName(n),this.m_ElementImg.source=""},t.prototype.onChangeState=function(){this.charRole._body.removeEventListener(egret.Event.COMPLETE,this.onChangeState,this),this.charRole.playAction(EntityAction.STAND)},t.prototype.addTime=function(){TimerManager.ins().removeAll(this),TimerManager.ins().doTimer(500,10,function(){this.charRole&&this.charRole._body&&0==this.charRole._body.visible&&(this.charRole._body.visible=!0,this.charRole.playAction(EntityAction.STAND))},this)},t.prototype.release=function(){TimerManager.ins().removeAll(this),this.clearRole()},t}(eui.Component);__reflect(RoleShowPanel.prototype,"RoleShowPanel",["eui.UIComponent","egret.DisplayObject"]),window.RoleShowPanel=RoleShowPanel;var SimpleRankPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"rankType",{set:function(e){this.m_RankType=e},enumerable:!0,configurable:!0}),t.prototype._UpdateRank=function(){this.m_RankType&&(this.updataFirstThree(Rank.ins().rankModel[this.m_RankType]),Rank.ins().sendGetRankingData(this.m_RankType))},t.prototype.childrenCreated=function(){this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100380,this.seeRank.text=GlobalConfig.jifengTiaoyueLg.st100381},t.prototype.open=function(){UIHelper.SetLinkStyleLabel(this.seeRank),this.visible=GameGlobal.actorModel.level>=60,MessageCenter.addListener(Rank.postRankingData,this.updataFirstThree,this),this.seeRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this._UpdateRank()},t.prototype.close=function(){MessageCenter.ins().removeAll(this),this.seeRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype.updataFirstThree=function(e){if(e){if(e.type==this.m_RankType)for(var t=0;3>t;t++){var i=e.getDataList(t);this._SetRankName(t,i?i[RankDataType.DATA_PLAYER]:null),this._SetRankHarm(t,i?i[RankDataType.DATA_COUNT]:null)}}else for(var t=0;3>t;t++)this._SetRankName(t,null),this._SetRankHarm(t,null)},t.prototype._SetRankName=function(e,t){this["name"+e].text=t||GlobalConfig.jifengTiaoyueLg.st100378
},t.prototype._SetRankHarm=function(e,t){void 0===t&&(t="0");var i=this["harm"+e];t?(i.visible=!0,i.text=t+GlobalConfig.jifengTiaoyueLg.st100369):i.visible=!1},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.seeRank:if(!this.m_RankType)return;var t=Rank.ins().rankModel[this.m_RankType];t&&t.getDataList.length>0?GameGlobal.actorModel.level<60?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100379):ViewManager.ins().open(FbAndLevelsRankWin,this.m_RankType):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100370)}},t}(eui.Component);__reflect(SimpleRankPanel.prototype,"SimpleRankPanel",["eui.UIComponent","egret.DisplayObject"]),window.SimpleRankPanel=SimpleRankPanel;var StarList=function(e){function t(t,i){void 0===t&&(t=10),void 0===i&&(i=0);var o=e.call(this)||this;return o._m_StarItem=[],o.m_StatListLength=t,o.m_StarNum=i,o.mcList=[],o}return __extends(t,e),Object.defineProperty(t.prototype,"m_StarItem",{get:function(){return this._m_StarItem},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{set:function(e){parseInt(e)||0;this._UpdateStarCount()},enumerable:!0,configurable:!0}),t.prototype._UpdateStarCount=function(){if(this.$stage){for(var e=0;e<this.m_StatListLength;++e){var t=this.m_StarItem[e];t.visible=!0,DisplayUtils.ChangeParent(t,this.group)}for(var e=this.m_StatListLength;e<this.m_StarItem.length;++e){var t=this.m_StarItem[e];t.visible=!1,DisplayUtils.ChangeParent(t,this)}}},t.prototype._UpdateStarState=function(){if(this.$stage)for(var e=0,t=Math.min(this.m_StarItem.length,this.m_StatListLength);t>e;++e)e<this.m_StarNum?(this.m_StarItem[e].currentState="light",null==this.mcList[e]&&(this.mcList[e]=new MovieClip,this.mcList[e].x=(this.m_StarItem[e].width>>1)-2,this.mcList[e].y=(this.m_StarItem[e].height>>1)-2),this.mcList[e].loadUrl(ResDataPath.GetUIEffePath("eff_wing_star"),!0,-1),this.m_StarItem[e].addChild(this.mcList[e])):(this.m_StarItem[e].currentState="gray",this.mcList[e]&&(DisplayUtils.dispose(this.mcList[e]),this.mcList[e]=null))},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){for(var e=this.group,t=0;t<e.numChildren;++t)this.m_StarItem[t]=e.getChildAt(t);this._UpdateStarCount(),this._UpdateStarState()},Object.defineProperty(t.prototype,"starNum",{get:function(){return this.m_StarNum},set:function(e){this.m_StarNum!=e&&(this.m_StarNum=e,this._UpdateStarState())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"listLength",{get:function(){return this.m_StatListLength},set:function(e){this.m_StatListLength!=e&&(this.m_StatListLength=e,this._UpdateStarCount())},enumerable:!0,configurable:!0}),t}(eui.Component);__reflect(StarList.prototype,"StarList",["eui.UIComponent","egret.DisplayObject"]),window.StarList=StarList;var GameApp=function(){function e(e){this.cfgSuffix="",this.type="json",this.maxNum=0,this.nowNum=0,this.main=e;var t="preload";this.type=Main.isDebug?"json":"zz";var i=Main.isDebug?"":"_zz";null!=LocationProperty.urlParam.iosiddd?(t="ios",this.cfgSuffix="ios_"):(t="preload",this.cfgSuffix=""),egret.log("读取配置表"+t+" 后缀："+i),ResourceUtils.ins().loadGroups("basepreload",[t+i,"basepreload"],this.advanceData,this.onResourceLoadProgress,this)}return e.prototype.onResBase=function(){},e.prototype.onResourceLoadComplete=function(){egret.log("资源组加载完成"),e.IsLoadComplete=!0,this.callbackFun(this.main)},e.prototype.callbackFun=function(e){},e.prototype.advanceData=function(){this.init();for(var e=[],t=0;3>t;t++){var i=parseInt(LocalStorageData.getItem(LocalDataKey.job+"_"+t)),o=parseInt(LocalStorageData.getItem(LocalDataKey.sex+"_"+t))||0,s=parseInt(LocalStorageData.getItem(LocalDataKey.zhuangbei4+"_"+t))||0,n=parseInt(LocalStorageData.getItem(LocalDataKey.zhuangbei0+"_"+t))||0,r=parseInt(LocalStorageData.getItem(LocalDataKey.zhuanzhiLv+"_"+t))||0,a=parseInt(LocalStorageData.getItem(LocalDataKey.mountLv+"_"+t))||1,l=GlobalConfig.ins("ZhuangBanId");if(0!=t||i||(i=1),!i)break;var h="";if(s>0){var c=l[s].res;h=ResDataPath.GetBodyName01(c,o)}else if(n>0){var c=l[n].res;h=ResDataPath.GetBodyName01(c,o)}else if(r>0){var u=GlobalConfig.ins("TransferAppearanceConfig")[i][r];if(u){var d=u.bodyAppearance;h=ResDataPath.GetBodyName01(d,o)}}else h=ResDataPath.GetBodyName01(ResDataPath.GetDefaultBodyName(i,0),o);e=this.geAdvanceDatatList(e,ResDataPath.GetRoleBodyPath(h),4);var p=GlobalConfig.ins("MountsLevelConfig")[a];p&&(e=this.geAdvanceDatatList(e,ResDataPath.GetMountBodyPath(p.appearance),4))}var f=parseInt(LocalStorageData.getItem(LocalDataKey.guanqiaId+"_"))||1,g=GlobalConfig.ins("ChaptersConfig")[f],_=g.waveMonsterId;if(_){var m=GlobalConfig.ins("MonstersConfig")[_].avatar;e=this.geAdvanceDatatList(e,ResDataPath.GetMonsterBodyPath(m))}var v=g.bossId;if(v){var m=GlobalConfig.ins("MonstersConfig")[v].avatar;e=this.geAdvanceDatatList(e,ResDataPath.GetMonsterBodyPath(m))}var y=g.sid;if(y)for(var b=GlobalConfig.ins("ScenesConfig")[y].mapfilename,C=ResDataPath.ROOT_MAP+b+"/image/",t=0;3>t;t++)for(var T=0;3>T;T++){var S=C+t+"_"+T+".jpg";e.push(S)}this.maxNum=e.length;for(var t=0;t<e.length;t++)this.onGetResByUrl(e[t])},e.prototype.geAdvanceDatatList=function(e,t,i){void 0===i&&(i=3);for(var o=0;i>o;o++){var s="s";switch(o){case 0:s="s";break;case 1:s="r";break;case 2:s="a";break;case 3:s="c"}for(var n=0;2>n;n++){var r="json";switch(n){case 0:r="json";break;case 1:r="png"}for(var a=0;2>a;a++){var l=1;switch(a){case 0:l=1;break;case 1:l=3}e.push(t+"_"+l+s+"."+r)}}}return e},e.prototype.onGetResByUrl=function(e){RES.getResByUrl(e,this.onAdvanceDataLoadComplete,this)},e.prototype.onAdvanceDataLoadComplete=function(e){this.nowNum++,GameLoadingView.m_Instance.removeTime(),GameLoadingView.m_Instance.ShowLoadProgress2(this.nowNum,this.maxNum),this.nowNum==this.maxNum&&this.onResourceLoadComplete()},e.prototype.init=function(){var e=this;if(Main.isDebug)GlobalConfig.config1=RES.getRes("config1_"+this.cfgSuffix+this.type),GlobalConfig.config2=RES.getRes("config2_"+this.cfgSuffix+this.type),GlobalConfig.config3=RES.getRes("config3_"+this.cfgSuffix+this.type),GlobalConfig.config4=RES.getRes("config4_"+this.cfgSuffix+this.type),GlobalConfig.config5=RES.getRes("config5_"+this.cfgSuffix+this.type),GlobalConfig.config6=RES.getRes("config6_"+this.cfgSuffix+this.type),GlobalConfig.config7=RES.getRes("config7_"+this.cfgSuffix+this.type),GlobalConfig.config8=RES.getRes("config8_"+this.cfgSuffix+this.type),GlobalConfig.config9=RES.getRes("config9_"+this.cfgSuffix+this.type),GlobalConfig.config10=RES.getRes("config10_"+this.cfgSuffix+this.type);else{var t=new JSZip(RES.getRes("config1_"+this.cfgSuffix+"zz"));GlobalConfig.config1=JSON.parse(t.file("config.json").asText());var i=new JSZip(RES.getRes("config2_"+this.cfgSuffix+"zz"));GlobalConfig.config2=JSON.parse(i.file("config.json").asText());var o=new JSZip(RES.getRes("config3_"+this.cfgSuffix+"zz"));GlobalConfig.config3=JSON.parse(o.file("config.json").asText());var s=new JSZip(RES.getRes("config4_"+this.cfgSuffix+"zz"));GlobalConfig.config4=JSON.parse(s.file("config.json").asText());var n=new JSZip(RES.getRes("config5_"+this.cfgSuffix+"zz"));GlobalConfig.config5=JSON.parse(n.file("config.json").asText());var r=new JSZip(RES.getRes("config6_"+this.cfgSuffix+"zz"));GlobalConfig.config6=JSON.parse(r.file("config.json").asText());var a=new JSZip(RES.getRes("config7_"+this.cfgSuffix+"zz"));GlobalConfig.config7=JSON.parse(a.file("config.json").asText());var l=new JSZip(RES.getRes("config8_"+this.cfgSuffix+"zz"));GlobalConfig.config8=JSON.parse(l.file("config.json").asText());var h=new JSZip(RES.getRes("config9_"+this.cfgSuffix+"zz"));GlobalConfig.config9=JSON.parse(h.file("config.json").asText());var c=new JSZip(RES.getRes("config10_"+this.cfgSuffix+"zz"));GlobalConfig.config10=JSON.parse(c.file("config.json").asText())}var u=egret.setTimeout(function(){egret.clearTimeout(u),RES.destroyRes("config1_"+e.cfgSuffix+e.type),RES.destroyRes("config2_"+e.cfgSuffix+e.type),RES.destroyRes("config3_"+e.cfgSuffix+e.type),RES.destroyRes("config4_"+e.cfgSuffix+e.type),RES.destroyRes("config5_"+e.cfgSuffix+e.type),RES.destroyRes("config6_"+e.cfgSuffix+e.type),RES.destroyRes("config7_"+e.cfgSuffix+e.type),RES.destroyRes("config8_"+e.cfgSuffix+e.type),RES.destroyRes("config9_"+e.cfgSuffix+e.type),RES.destroyRes("config10_"+e.cfgSuffix+e.type)},this,1e4);GameMap.init()},e.prototype.onResourceLoadProgress=function(e,t){GameLoadingView.m_Instance.ShowLoadProgress(e,t,"资源加载")},e.IsLoadComplete=!1,e}();__reflect(GameApp.prototype,"GameApp"),window.GameApp=GameApp;var GameGlobal=function(){function e(){}return Object.defineProperty(e,"ybTurntableModel",{get:function(){return YbTurntableModel.ins()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"dressmodel",{get:function(){return DressModel.ins()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"taskModel",{get:function(){return UserTask.ins()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"activityData",{get:function(){return ActivityModel.ins().activityData},enumerable:!0,configurable:!0}),Object.defineProperty(e,"rechargeData",{get:function(){return Recharge.ins().rechargeData},enumerable:!0,configurable:!0}),Object.defineProperty(e,"firstRechargeData",{get:function(){return Recharge.ins().firstRechargeData},enumerable:!0,configurable:!0}),Object.defineProperty(e,"activityModel",{get:function(){return ActivityModel.ins()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"serverOpenDay",{get:function(){return GameServer.serverOpenDay},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BitmapNumber",{get:function(){return BitmapNumber.ins()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MessageCenter",{get:function(){return MessageCenter.ins()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"vipModel",{get:function(){return UserVip.ins()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"zsModel",{get:function(){return UserZs.ins()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"actorModel",{get:function(){return GameLogic.ins().actorModel},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ViewManager",{get:function(){return ViewManager.ins()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ZsBossModel",{get:function(){return ZsBoss.ins()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"zhuZaiModel",{get:function(){return ZhuzaiEquip.ins()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"mineModel",{get:function(){return MineModel.ins()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"rolesModel",{get:function(){return SubRoles.ins().rolesModel},enumerable:!0,configurable:!0}),e.roleHintCheck=function(e,t){var i=1,o=0,s=0,n=0;switch(t){case 0:i=e.exRingsData[0];var r=GlobalConfig.ins("ExRing0Config")[i];r&&(o=r.cost,n=GlobalConfig.ins("ExRingConfig")[0].costItem);break;case 1:i=e.exRingsData[1];var a=GlobalConfig.ins("ExRing1Config")[i];a&&(o=a.cost,n=GlobalConfig.ins("ExRingConfig")[1].costItem);break;case 2:i+=e.loongSoul;var l=GlobalConfig.ins("LoongSoulConfig")[i];l&&(o=l.count,n=l.itemId);break;case 3:i+=e.shield;var h=GlobalConfig.ins("ShieldConfig")[i];h&&(o=h.count,n=h.itemId);break;case 4:i=e.jingMaiData.level;var c=GlobalConfig.jingMaiLevelConfig[i];c&&(o=c.count,n=c.itemId)}return o&&(s=UserBag.ins().getBagGoodsCountById(0,n),s>=o)?!0:!1},e.getAttrPower=function(e){return UserBag.getAttrPower(e)},e.GetItemName=function(e){var t=GlobalConfig.itemConfig[e];return t?t.name:" "},e.TEST_FUNC=!1,e}();__reflect(GameGlobal.prototype,"GameGlobal"),window.GameGlobal=GameGlobal;var newAI=function(e){function t(){var i=e.call(this)||this;return i.isLog=!1,i.skillCD={},i.teamAction={},i.aiList={},i.curSkill={},i.curTarget={},i.cacheEntityPos={},i.m_NextPowerSkillTimer=Number.MAX_VALUE,i.m_PowerSkillProgress=0,i.m_NextBorn=0,i.m_ReqRankTimer=0,i.m_StartTime=0,i.m_PreStartTime=99999999,i.time=t.AI_UPDATE_TIME,i.starting=!1,i.startingRole=!1,i}return __extends(t,e),t.prototype._DispatchPowerSkill=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mPowerSkillAction&&this.mPowerSkillAction.apply(null,e)},t.prototype.ChangeMap=function(){return this.m_PowerSkillProgress=0,this.m_NextPowerSkillTimer=egret.getTimer(),this._DispatchPowerSkill(PowerSkillState.INIT),GameMap.IsNoramlLevel()?void(TimerManager.ins().isExists(this._UpdatePowerProgress,this)||TimerManager.ins().doTimer(t.AI_UPDATE_TIME,0,this._UpdatePowerProgress,this)):void TimerManager.ins().remove(this._UpdatePowerProgress,this)},t.ins=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.ins.call(this,t)},t.prototype.init=function(){this.inited||(this.skillCD={},this.inited=!0,TimerManager.ins().isExists(this._UpdatePowerProgress,this)||TimerManager.ins().doTimer(t.AI_UPDATE_TIME,0,this._UpdatePowerProgress,this))},t.prototype.start=function(){this.isStartAtk=!1,GameLogic.ins().postHookStateChange(GameLogic.HOOK_STATE_FIND_ENMENY),this.teamAction={},this.starting=!1,this.starting||(this.inited||this.init(),TimerManager.ins().isExists(this.timeOpenAI,this)||TimerManager.ins().doTimer(t.AI_UPDATEROLE_TIME,0,this.timeOpenAI,this))},t.prototype.timeOpenAI=function(){this.time+=t.AI_UPDATEROLE_TIME,this.time>=t.AI_UPDATE_TIME&&(this.time=0,this.startAI(),this._UpdatePowerProgress()),this.startRoleAI()},t.prototype.togglePause=function(){TimerManager.ins().isExists(this.timeOpenAI,this)?(TimerManager.ins().remove(this.timeOpenAI,this),UserTips.ins().showTips("暂停挂机!")):(TimerManager.ins().doTimer(t.AI_UPDATEROLE_TIME,0,this.timeOpenAI,this),UserTips.ins().showTips("继续挂机!"))},t.prototype.stop=function(){OtherAIModel.getInstance.releaseAll(),this.aiList={},this.curSkill={},this.curTarget={},this.starting=!1,TimerManager.ins().removeAll(this),GameLogic.ins().ClearRepeatCreate(),this.m_NextPowerSkillTimer=Number.MAX_VALUE},t.prototype.destruct=function(){this.skillCD={},this.stop(),this.inited&&TimerManager.ins().remove(this.timeOpenAI,this)},t.prototype.add=function(e){this.aiList[e.infoModel.handle]=e},t.prototype.remove=function(e){delete this.aiList[e.infoModel.handle]},t.prototype.startAI=function(){if(this.starting)return void egret.log("AI 正在执行");this.starting=!0;var e=this.aiList;this._UsePowerSkill();for(var t in e){var i=e[t];if(!(i instanceof CharRole)){var o=this.loop1(t);if("continue"!==o&&"break"===o)break}}var s=OtherAIModel.getInstance.aiMonsterList.values;for(var n in s){var i=s[n];if(!(i instanceof CharRole)){var o=this.loop1(i.handle+"",2);if("continue"!==o&&"break"===o)break}}this.starting=!1},t.prototype.startRoleAI=function(){if(this.startingRole)return void egret.log("AI 角色  正在执行");this.startingRole=!0;var e=this.aiList;for(var t in e){var i=e[t];if(i instanceof CharRole){var o=this.loop1(t);if("continue"===o)continue;if("break"===o)break}}var s=OtherAIModel.getInstance.aiRoleList.values;for(var n in s){var i=s[n];if(i instanceof CharRole){var o=this.loop1(i.handle+"",1);if("continue"===o)continue;if("break"===o)break}}this.startingRole=!1},t.prototype.loop1=function(e,i){void 0===i&&(i=0);var o,s;0==i?(o=this.aiList,s=o[e]):s=1==i?OtherAIModel.getInstance.aiRoleList.get(parseInt(e)):OtherAIModel.getInstance.aiMonsterList.get(parseInt(e));var n=["0","剑士","法师","牧师"],r=s instanceof CharRole;if(!s.infoModel)return"continue";var a=s.infoModel.handle,l="";r&&(l=n[s.infoModel.job]);var h=s.buffList;for(var c in h){if(s.AI_STATE==AI_State.Die)break;var u=h[c],d=egret.getTimer();if(u.effConfig.type==SkillEffType.ADD_HP||u.effConfig.type==SkillEffType.DAMAGE){var p=d-u.addTime>u.step*u.effConfig.interval;if(p){u.step++;var f=this.hramedDie(s,u.value);this.showHram(f,DamageTypes.HIT,s,u.source,u.value,!1,!0,"buff伤害"+u.effConfig.id),u.step>=u.count&&s.removeBuff(u)}}u.effConfig.type!=SkillEffType.SUMMON&&d>=u.endTime&&s.removeBuff(u)}if(s.AI_STATE==AI_State.Die)return"continue";if(s.isHardStraight||s.hasBuff(51001))return"continue";if(s.publicCD&&egret.getTimer()-s.publicCD<=s.atkHardTime)return s.isPlaying||s.playAction(EntityAction.STAND),"continue";switch(s.AI_STATE){case AI_State.Stand:if(this.screeningSkill(a),!this.curSkill[a])return"continue";this.screeningTarget(s);var g=this.curTarget[a];if(!g)return GameLogic.ins().StartRepeatMonster(),"continue";var _=this.cacheEntityPos[g.handle];_||(_=new egret.Point,this.cacheEntityPos[g.handle]=_),_.x=g.x,_.y=g.y,this.tryUseSkill(s)?(s.stopMove(),s.AI_STATE=AI_State.Atk):(t.IsMyTeam(s.team)||s.team==Team.WillEntity||this.teamAction[s.team])&&(s.infoModel.isPet?GameMap.moveEntity(s,this.curTarget[a].x,this.curTarget[a].y+(100*Math.random()+100*-Math.random())):GameMap.moveEntity(s,this.curTarget[a].x,this.curTarget[a].y),s.AI_STATE=AI_State.Run);break;case AI_State.Run:var g=this.curTarget[a];if(!g||g.AI_STATE==AI_State.Die)return s.stopMove(),s.playAction(EntityAction.STAND),s.AI_STATE=AI_State.Stand,delete this.curTarget[a],"continue";var _=this.cacheEntityPos[g.handle];_&&(Math.abs(_.x-g.x)>10||Math.abs(_.y-g.y)>10)&&(_.x=g.x,_.y=g.y,GameMap.moveEntity(s,g.x,g.y),s.AI_STATE=AI_State.Run),this.targetStartMove(s)&&(this.teamAction[g.team]=!0),this.tryUseSkill(s)&&(s.stopMove(),s.AI_STATE=AI_State.Atk),s.action==EntityAction.STAND&&(s.AI_STATE=AI_State.Stand);break;case AI_State.Atk:s.stopMove(),this.isStartAtk||GameLogic.ins().postHookStateChange(GameLogic.HOOK_STATE_HOOK),this.isStartAtk=!0;var g=this.curTarget[a];if(!g||g.AI_STATE==AI_State.Die)return s.playAction(EntityAction.STAND),s.AI_STATE=AI_State.Stand,delete this.curTarget[a],"continue";if(GameLogic.ins().StartRepeatMonster(),this.teamAction[g.team]=!0,s.atking)return"continue";var m=this.curSkill[a];if(null==m)return"continue";var v=GameLogic.ins().playSkillEff(m,s,g);s instanceof CharRole&&1==s.isPlayRandomSkill&&m.skillType!=SkillType.TYPE7?s.isPlayRandomSkill=!1:this.skillCD[a][m.id]=egret.getTimer(),s.atking=!0,r?(s.AI_STATE==AI_State.Atk&&(s.AI_STATE=AI_State.Stand),s.atking=!1):TimerManager.ins().doTimer(s.curPlayTime,1,function(){r||s.playAction(EntityAction.STAND),s.AI_STATE==AI_State.Atk&&(s.AI_STATE=AI_State.Stand),s.atking=!1},Math.random()),s.publicCD=egret.getTimer();var y=!1;if(r&&0==s.atk2&&m.skillType==SkillType.TYPE1){for(var b=s.infoModel,C=b.getAllPassSkillId(),T=GlobalConfig.ins("EffectsConfig"),S=0;S<C.length;S++){var w=T[C[S]];if(w.type==SkillEffType.STATE&&w.args.i==RoleStateType.DOUBLE_ATK){var I=GlobalConfig.ins("SkillsConfig")[w.id];100*Math.random()<I.args.prob/100&&(y=!0,s.atk2=!0)}}if(1==y)s.atkHardTime=200;else if(s.infoModel&&m.skillType==SkillType.TYPE1){var G=GameLogic.calculateRealAttribute(s,AttributeType.atAttackSpeed);G>1e4&&(G=1e4),s.atkHardTime=1e6/G}}else if(s.infoModel&&m.skillType==SkillType.TYPE1){var G=GameLogic.calculateRealAttribute(s,AttributeType.atAttackSpeed);G>1e4&&(G=1e4),s.atkHardTime=1e6/G}if(r){var b=s.infoModel,L=1,P=1,k=0;for(var c in h){var u=h[c];if(u.effConfig.type==SkillEffType.RECOVER_MP&&(L=1+u.effConfig.args.a/100),u.effConfig.type==SkillEffType.COST_MP&&(P=1-u.effConfig.args.a/100),u.effConfig.type==SkillEffType.STATE&&u.effConfig.args.i==RoleStateType.MP_RECOVER&&100*Math.random()<u.effConfig.args.a){m.skillArgs.skillCost*(u.effConfig.args.b/100)}for(var C=b.getAllPassSkillId(),T=GlobalConfig.ins("EffectsConfig"),S=0;S<C.length;S++){var w=T[C[S]];if(w.type==SkillEffType.RECOVER_MP&&(L=1+w.args.a/100),w.type==SkillEffType.COST_MP&&(P=1-w.args.a/100),w.type==SkillEffType.STATE&&w.args.i==RoleStateType.MP_RECOVER&&100*Math.random()<w.args.a){m.skillArgs.skillCost*(w.args.b/100)}}var E=s.infoModel.getAtt(AttributeType.atMp)-m.skillArgs.skillCost*P+m.skillArgs.skillResume*L+k,R=Math.min(s.infoModel.getAtt(AttributeType.atMaxMp),E);s.infoModel.setAtt(AttributeType.atMp,R),s.updateBlood()}}null==this.effectsConfig&&(this.effectsConfig=GlobalConfig.ins("EffectsConfig"));var D=m.tarEff?this.effectsConfig[m.tarEff[0]]:null,M=m.targetType==TargetType.My?s:g,A=void 0;if(4==m.targetType){A=EntityManager.ins().screeningTargetByPos(s,!0);for(var B=0;B<A.length;B++)if(A[B].isCanAddBlood){A[0]=A[B];break}}else A=m.targetType==TargetType.My?[s]:m.affectCount>1?EntityManager.ins().screeningTargetByPos(M,M==g,m.affectRange):[g];for(var x=0;x<m.affectCount;x++){var U=this.loot2(x,A,s,D,m,v);if("break"===U)break}null==this.effectsConfig&&(this.effectsConfig=GlobalConfig.ins("EffectsConfig"));for(var O=m.selfEff?m.selfEff:[],N=0;N<O.length;N++){var q=this.effectsConfig[O[N]];this.addBuff(s,s,q,this.skillEffValue(s))}if(this.repel(s),null!=s.buffList[Const.zidanBuff])return;y?s.AI_STATE=AI_State.Atk:(delete this.curSkill[a],(s.atk2=!0)&&(s.atk2=!1));break;case AI_State.Die:s.stopMove()}},t.prototype.loot2=function(e,t,i,o,s,n){if(!t[e])return"break";var r=t[e],a=void 0;if(r.team!=Team.My){var l=void 0;this.triggerAttr(i,AttributeType.atStunPower)&&(l=ObjectPool.ins().pop("EntityBuff"),null==this.effectsConfig&&(this.effectsConfig=GlobalConfig.ins("EffectsConfig")),l.effConfig=this.effectsConfig[51001],l.value=i.infoModel.getAtt(AttributeType.atStunTime),l.addTime=egret.getTimer(),l.endTime=l.addTime+l.value,r.addBuff(l)),this.triggerExAttr(i,ExAttributeType.eatDeathCurseProbability)&&(l=ObjectPool.ins().pop("EntityBuff"),null==this.effectsConfig&&(this.effectsConfig=GlobalConfig.ins("EffectsConfig")),l.effConfig=this.effectsConfig[52001],l.addTime=egret.getTimer(),l.endTime=l.effConfig.args.d?i.infoModel.getAttEx(ExAttributeType.eatDeathCurseTime):l.effConfig.duration,r.addBuff(l),a=!0)}var h=this.triggerAttr(i,AttributeType.atCrit),c=this.damageBaseCalculation(i,r);if(o&&o.type==SkillEffType.STATE&&o.args&&(o.args.i==RoleStateType.ANTIDES?c=c*(o.args.a/100)+Math.floor(i.infoModel.getAtt(AttributeType.atDef)/100)*o.args.b:o.args.i==RoleStateType.GODKILL&&(c*=o.args.a/100)),o&&o.type==SkillEffType.SELFKILL){var u=i.infoModel.getAtt(AttributeType.atHp),d=0;o.valueArgs&&(d=o.valueArgs.a*o.valueArgs.b+o.valueArgs.c);var p=u*((o.args.a+d)/100);c+=p*(o.args.b/100)}var f=i.buffList;for(var g in f){var _=f[g];s.skillType==SkillType.TYPE1&&_.effConfig.type==SkillEffType.DAMAGE_EX&&_.effConfig.args.a==SkillType.TYPE1?c+=c*(_.effConfig.args.b/100):s.skillType==SkillType.TYPE2&&_.effConfig.type==SkillEffType.DAMAGE_EX&&_.effConfig.args.a==SkillType.TYPE2?c+=c*(_.effConfig.args.b/100):s.skillType==SkillType.TYPE3&&_.effConfig.type==SkillEffType.DAMAGE_EX&&_.effConfig.args.a==SkillType.TYPE3&&(c+=c*(_.effConfig.args.b/100))}if(i instanceof CharRole)for(var m=i.infoModel,v=m.getAllPassSkillId(),y=GlobalConfig.ins("EffectsConfig"),b=0;b<v.length;b++){var C=y[v[b]];s.skillType==SkillType.TYPE1&&C.type==SkillEffType.DAMAGE_EX&&C.args.a==SkillType.TYPE1?c+=c*(C.args.b/100):s.skillType==SkillType.TYPE2&&C.type==SkillEffType.DAMAGE_EX&&C.args.a==SkillType.TYPE2?c+=c*(C.args.b/100):s.skillType==SkillType.TYPE3&&C.type==SkillEffType.DAMAGE_EX&&C.args.a==SkillType.TYPE3&&(c+=c*(C.args.b/100))}h&&1==s.skillArgs.crits&&(c=c*(i.infoModel.getAtt(AttributeType.atCritEnhance)+15e3)/1e4+i.infoModel.getAtt(AttributeType.atCritHurt));var T=this.damageElement(i,r),S=T.damage;s&&0==s.calcType&&(S=0),a&&(c*=1+i.infoModel.getAttEx(ExAttributeType.eatDeathCurseDamageIncrease)/1e4),c>>=0;var w=this.skillEffValue(i);if(o){null==this.effectsConfig&&(this.effectsConfig=GlobalConfig.ins("EffectsConfig"));for(var I=0;s.tarEff&&I<s.tarEff.length;I++){var G=this.effectsConfig[s.tarEff[I]],_=ObjectPool.ins().pop("EntityBuff");_.effConfig=G,_.value=w,_.addTime=egret.getTimer(),_.endTime=_.addTime+G.duration,_.count=G.duration/G.interval>>0,_.step=0,_.source=i,r.addBuff(_)}}var L=this.hramedDie(r,c);S>0&&egret.setTimeout(function(){if(r.infoModel.getAtt(AttributeType.atHp)>0){var e=this.hramedDie(r,S);this.showHram(e,h?DamageTypes.CRIT:DamageTypes.HIT,r,i,S,!0,!0,s.skinName,s.hitCount,T.elementRestrainType,s.skillType)}},this,UserSkill.EN_TIME);var P=function(){this.showHram(L,h?DamageTypes.CRIT:DamageTypes.HIT,r,i,c,!0,!0,s.skinName,s.hitCount,null,s.skillType)}.bind(this);n?TimerManager.ins().doTimer(n,1,P,this):P()},t.prototype._UpdatePowerProgress=function(){if(EntityManager.ins().CanUseHeji()){null==this.skillConfig&&(this.skillConfig=GlobalConfig.skillsConfig);var e=this.skillConfig[UserSkill.POWER_SKILL];this.m_PowerSkillProgress=(egret.getTimer()-this.m_NextPowerSkillTimer)/e.cd,this._DispatchPowerSkill(PowerSkillState.LOADING,this.m_PowerSkillProgress)}},t.prototype._UsePowerSkill=function(){if(!(this.m_PowerSkillProgress<1)){this.m_PowerSkillProgress=1;var e=EntityManager.ins().getNoDieRole();if(e){null==this.skillConfig&&(this.skillConfig=GlobalConfig.skillsConfig);var t=this.skillConfig[UserSkill.POWER_SKILL],i=t.targetType,o=EntityManager.ins().screeningTargetByPos(e,i==TargetType.Friendly),s=o?o[0]:null;if(s){var n=MathUtils.getDistance(e.x,e.y,s.x,s.y);if(!(n>t.castRange*Const.CELL_SIZE)&&(this.m_NextPowerSkillTimer=egret.getTimer(),GameGlobal.MessageCenter.dispatch(MessageDef.GAME_SCENE_WORD,"comp_164_47_01_png"),GameLogic.ins().playSkillEff(t,e,s),this._DispatchPowerSkill(PowerSkillState.USE),t.tarEff&&0!=t.tarEff.length)){null==this.effectsConfig&&(this.effectsConfig=GlobalConfig.ins("EffectsConfig"));var r=this.effectsConfig[t.tarEff[0]];if(r){var a=r.args,l=0;l=1==a.type?e.infoModel.getAtt(AttributeType.atDef):e.infoModel.getAtt(AttributeType.atRes);for(var h=0,c=.01*e.infoModel.getAtt(AttributeType.atMaxHp),u=EntityManager.ins().GetRoles(),d=0,p=0,f=u;p<f.length;p++){var g=f[p];g.infoModel&&(d+=g.infoModel.getAtt(a.attr),h+=g.infoModel.getAttEx(ExAttributeType.eatHejiDamageMonstor))}for(var _=(d*a.a+a.b)*h/1e4-l,m=Math.floor(Math.max(_,c)),v=Math.ceil(a.p*m),y=EntityManager.ins().screeningTargetByPos(s,!0,t.affectRange),b=0,C=y;b<C.length;b++){var T=C[b],S=this.hramedDie(T,v);this.showHram(S,DamageTypes.HEJI,T,e,v,!0,!0,t.skinName,t.hitCount)}}}}}}},t.prototype.addBuff=function(e,t,i,o){var s=ObjectPool.ins().pop("EntityBuff");s.effConfig=i,s.value=o,s.addTime=egret.getTimer(),s.endTime=s.addTime+i.duration,s.count=i.duration/i.interval>>0,s.step=0,s.source=e,t.addBuff(s)},t.prototype.repel=function(e){var t=new egret.Point,i=e.infoModel.handle,o=this.curSkill[i],s=this.curTarget[i];if(o.repelDistance){s.stopMove(),s.playAction(EntityAction.STAND);var n=s.infoModel.handle;delete this.curTarget[n];var r=MathUtils.getAngle(MathUtils.getRadian2(e.x,e.y,s.x,s.y)),a=MathUtils.getDirMove(r,o.repelDistance,t);a.x=s.x+a.x,a.y=s.y+a.y;var l=BresenhamLine.isAbleToThrough(Math.floor(s.x/GameMap.CELL_SIZE),Math.floor(s.y/GameMap.CELL_SIZE),Math.floor(a.x/GameMap.CELL_SIZE),Math.floor(a.y/GameMap.CELL_SIZE),GameMap.checkWalkable);0==l[0]&&(l[1]>3&&console.error("通过格子超过3个，检查是否有异常"+l[2]+","+l[3],a),a.x=l[2]*GameMap.CELL_SIZE,a.y=l[3]*GameMap.CELL_SIZE),a.x=Math.max(Math.min(a.x,GameMap.MAX_WIDTH),0),a.y=Math.max(Math.min(a.y,GameMap.MAX_HEIGHT),0);var h=a.x-s.x,c=a.y-s.y,u=Math.sqrt(h*h+c*c)/(e.moveSpeed/1e3);null==this.effectsConfig&&(this.effectsConfig=GlobalConfig.ins("EffectsConfig"));var d,p=this.effectsConfig[o.tarEff[0]].duration;14001==o.tarEff[0]&&(u=700),14001!=o.icon&&(d=egret.Tween.get(s,s.team==Team.My?{onChange:function(){GameLogic.ins().postMoveCamera()}}:null).call(function(){egret.Tween.removeTweens(s)}),d.to({x:a.x,y:a.y},u)),s.addHardStraight(p),1==o.teleport&&(e.playAction(EntityAction.ATTACK),d=egret.Tween.get(e,e.team==Team.My?{onChange:function(){GameLogic.ins().postMoveCamera()}}:null),d.to({x:e.x-(s.x-a.x),y:e.y-(s.y-a.y)},u).call(function(){egret.Tween.removeTweens(e),e.resetStand()}),e.addHardStraight(u))}},t.prototype.hramedDie=function(e,t){return e.infoModel.setAtt(AttributeType.atHp,e.infoModel.getAtt(AttributeType.atHp)-t),e.infoModel.getAtt(AttributeType.atHp)<=0?(e.AI_STATE=AI_State.Die,e.stopMove(),!0):!1},t.prototype.showHram=function(e,t,i,o,s,n,r,a,l,h,c){var u=this;if(void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===a&&(a=""),void 0===l&&(l=1),void 0===h&&(h=ElementRestrainType.NOTYPE),void 0===c&&(c=!1),i.hram(s),0==s&&(s=1,n=!1),GameLogic.ins().postEntityHpChange(i,n?o:null,t,s,l,[h,c]),e)if(i.stopMove(),!i.hasBuff(52001)&&this.triggerExAttr(i,ExAttributeType.eatGodBlessProbability)){i.AI_STATE=AI_State.Stand,i.removeAllBuff();var d=i.infoModel.getAtt(AttributeType.atMaxHp)*i.infoModel.getAttEx(ExAttributeType.eatGodBlessRate)/1e4;i.infoModel.setAtt(AttributeType.atHp,d),i.hram(-d),this.trace("复活后剩余血量"+i.getHP())}else{this.trace(i.infoModel.handle+" -- 死亡，等待删除形象");var p=500;if(i.team==Team.Monster&&egret.Tween.get(i).to({alpha:0},p).call(function(){egret.Tween.removeTweens(i)}),TimerManager.ins().doTimer(p,1,function(){u.trace(i.infoModel.handle+" -- 删除"),EntityManager.ins().removeByHandle(i.infoModel.handle),OtherAIModel.getInstance.releaseMonster(i.infoModel.handle),OtherAIModel.getInstance.releaseRole(i.infoModel.handle),u.checkAIend(o.team,i.team)},this),i.team==Team.Monster){for(var f=Math.floor(i.x/GameMap.CELL_SIZE),g=Math.floor(i.y/GameMap.CELL_SIZE),_=GameLogic.ins().GetReward(i.handle),m=0;_&&m<_.length;m++)Encounter.postCreateDrop(f,g,_[m]);GameMap.IsNoramlLevel()&&i.infoModel.type!=EntityType.WillDummyMonster&&UserFb.ins().sendWaveMonster()}}else i.AI_STATE!=AI_State.Die&&r&&s>0},t.IsMyTeam=function(e){return e==Team.My||e==Team.PASSERBY},t.prototype.checkAIend=function(e,i){var o=EntityManager.ins().getTeamCount(i);if(!o&&(!t.IsMyTeam(e)||GameLogic.ins().IsRepeatCreateFinish())&&!o){switch(e){case Team.My:case Team.PASSERBY:switch(EntityManager.ins().resetRole(),i){case Team.Monster:DropHelp.start(),this.trace("开始捡东西");break;case Team.WillBoss:Encounter.ins().sendResult(!0),this.trace("pkboss成功");break;case Team.WillEntity:}break;case Team.WillBoss:Encounter.ins().sendResult(!1),this.trace("pkboss失败");break;case Team.WillEntity:break;case Team.Monster:EntityManager.ins().resetRole()}this.inited}},t.prototype.damageBaseCalculation=function(e,t){var i=e.infoModel.handle,o=this.curSkill[i],s=0,n=0,r=0;if(o.targetType==TargetType.Enemy&&o.args){SkillsConfig.isPhysical(o)?s=GameLogic.calculateRealAttribute(t,AttributeType.atDef):SkillsConfig.isMagic(o)&&(s=GameLogic.calculateRealAttribute(t,AttributeType.atRes)),n=s*(1-e.infoModel.getAtt(AttributeType.atPenetrate)/1e4);var a=0;o.valueArgs&&(a=o.valueArgs.a*o.valueArgs.attr+o.valueArgs.b);var l=e.infoModel.getAtt(AttributeType.atAttack);l+=Math.floor(l*e.infoModel.getAtt(AttributeType.atAtkEx)/1e4),r=l*(o.args.a+a)-n+o.args.b,r=Math.max(r,1)}e instanceof CharMonster&&(e.team==Team.Monster||e.team==Team.WillBoss)&&"神兽"!=e.infoModel.name&&(r=0);var h=t.buffList[19001];if(h){var c=h.effConfig,u=Math.floor(r*c.args.a);h.value-=u,h.value<=0&&t.removeBuff(h),r=r-u+(h.value<0?-h.value:0)}return r},t.prototype.damageElement=function(e,t){var i=e.infoModel.attrElementMianType,o=t.infoModel.attrElementMianType,s=0,n=e.infoModel.attrElementData[i-1],r=t.infoModel.attrElementData[i-1+5],a=!1,l=!1,h=0,c=ElementRestrainType.NOTYPE;AttributeData.getElementKType(i)==o?(a=!0,c=ElementRestrainType.KTYPE):AttributeData.getElementBKType(i)==o&&(l=!0,c=ElementRestrainType.BKTYPE);var u=GlobalConfig.ins("elementConfig");a?h=u.elementEffect1/100:l&&(h=-(u.elementEffect2/100)),s=(n-r)*(1+h),0>s&&(s=0);var d={elementRestrainType:c,damage:s};return d},t.prototype.skillEffValue=function(e){var t=e.infoModel.handle,i=this.curSkill[t],o=0;null==this.effectsConfig&&(this.effectsConfig=GlobalConfig.ins("EffectsConfig"));var s=i.selfEff?this.effectsConfig[i.selfEff[0]]:null;if(s){if(s.args)switch(s.type){case SkillEffType.DAMAGE:o=e.infoModel.getAtt(s.args.b)*s.args.a+s.args.c;break;case SkillEffType.ADD_HP:o=e.infoModel.getAtt(s.args.b)*s.args.a+s.args.c,o=-o;break;case SkillEffType.ADD_ATTR:var n=0;s.valueArgs&&(n=s.valueArgs.a*s.valueArgs.b+s.valueArgs.c),o=e.infoModel.getAtt(s.args.b)*(s.args.a+n)+s.args.c;break;case SkillEffType.STATE:o=e.infoModel.getAtt(s.args.b)*s.args.c}o>>=0}return o},t.prototype.triggerAttr=function(e,t){var i,o=e.infoModel.getAtt(t),s=e.buffList;for(var n in s)i=s[n],i.effConfig.type==SkillEffType.ADD_ATTR&&i.effConfig.args.d==t&&(o+=i.value);if(o){var r=Math.random();
if(o/1e4>r)return!0}return!1},t.prototype.triggerExAttr=function(e,t){var i=e.infoModel.getAttEx(t);if(i){var o=Math.random();if(i/1e4>o)return!0}return!1},t.prototype.tryUseSkill=function(e){var t=e.infoModel.handle,i=this.curSkill[t];if(!i)return!1;var o=this.curTarget[t],s=MathUtils.getDistance(e.x,e.y,o.x,o.y);return s<=i.castRange*Const.CELL_SIZE},t.prototype.targetStartMove=function(e){var t=e.infoModel.handle,i=this.curSkill[t];if(!i)return!1;var o=this.curTarget[t],s=MathUtils.getDistance(e.x,e.y,o.x,o.y);return s<i.castRange*Const.CELL_SIZE*3},t.prototype.screeningSkill=function(e){if(e){var i=t.ins().aiList[e];i||(i=OtherAIModel.getInstance.aiRoleList.get(e)),i||(i=OtherAIModel.getInstance.aiMonsterList.get(e));var o=i instanceof CharRole;if(this.skillCD[e]=this.skillCD[e]||{},!o)return null==this.skillConfig&&(this.skillConfig=GlobalConfig.skillsConfig),void(i.infoModel.summonSkillId>0?this.curSkill[e]=this.skillConfig[i.infoModel.summonSkillId]:this.curSkill[e]=this.skillConfig[5e4]);var s=this.curSkill[e];if(!s){var n=i,r=[];r=n.team==Team.PASSERBY?n.infoModel.getpPasserbySkillIDs():n.infoModel.getSkillIDs();var a=r.length,l=[];if(null==this.skillConfig&&(this.skillConfig=GlobalConfig.skillsConfig),1==n.isCanRandomSkill)for(var h=0;a>h;h++){var c=this.skillConfig[r[h]];if(c.skillType==SkillType.TYPE7){l.push(c),n.isPlayRandomSkill=!0;break}}else for(var h=0;a>h;h++){var c=this.skillConfig[r[h]];if((1!=n.isPlayRandomSkill||c.skillType==n.playRandomType)&&c.skillType!=SkillType.TYPE4&&c.skillType!=SkillType.TYPE5&&c.skillType!=SkillType.TYPE7){var u=0,d=n.buffList;for(var p in d){var f=d[p];f.effConfig.type==SkillEffType.CHANGE_CD&&c.skillType==f.effConfig.args.a&&(u=f.effConfig.args.b)}for(var g=i.infoModel,_=g.getAllPassSkillId(),m=GlobalConfig.ins("EffectsConfig"),v=0;v<_.length;v++){var y=m[_[v]];y.type==SkillEffType.CHANGE_CD&&c.skillType==y.args.a&&(u=y.args.b)}if(!n.isPlayRandomSkill){if(egret.getTimer()-this.skillCD[e][c.id]<c.cd+c.cd*(u/100))continue;if(c.skillType!=SkillType.TYPE5&&c.skillArgs.skillCost>n.infoModel.getAtt(AttributeType.atMp)&&0!=c.skillArgs.skillCost)continue}l.push(c)}}l.sort(this.sortFunc);var b,C=0;1==n.isPlayRandomSkill&&(C=Math.floor(Math.random()*l.length)),s=l[C],null==this.effectsConfig&&(this.effectsConfig=GlobalConfig.ins("EffectsConfig")),b=s&&s.tarEff?this.effectsConfig[s.tarEff[0]]:null;var T=s&&s.selfEff?this.effectsConfig[s.selfEff[0]]:null;if(T&&T.type==SkillEffType.SUMMON&&n.hasBuff(T.group)&&(s=l[++C]),b=s&&s.tarEff?this.effectsConfig[s.tarEff[0]]:null,b&&b.type==SkillEffType.ADD_HP&&(EntityManager.ins().checkCanAddBlood(n.team)||(s=l[++C]),T=s&&s.selfEff?this.effectsConfig[s.selfEff[0]]:null,T&&T.type==SkillEffType.SUMMON&&n.hasBuff(T.group)&&(s=l[++C])),s&&23001==s.icon&&(EntityManager.ins().checkCount(n,s.affectRange)||(s=l[++C])),s&&13001==s.icon&&(EntityManager.ins().checkCount(n,s.affectRange,2)||(s=l[++C])),n.isCanRandomSkill=!1,!n.isPlayRandomSkill&&s&&s.skillType==SkillType.TYPE2)for(var h=0;h<r.length;h++){var c=this.skillConfig[r[h]];if(c.skillType==SkillType.TYPE7){var S=GlobalConfig.ins("EffectsConfig")[c.id];if(S){if(c.type==egret.getTimer()-this.skillCD[e][c.id]<c.cd+c.cd)break;var w=100*Math.random();if(w<S.args.a){for(var I=!1,h=0;h<r.length;h++){var G=this.skillConfig[r[h]];if(G.skillType==S.args.b){I=!0,n.playRandomType=S.args.b;break}}I&&(n.isCanRandomSkill=!0)}}break}}this.curSkill[e]=s}}},t.prototype.sortFunc=function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0},t.prototype.screeningTarget=function(e){var t=e.infoModel.handle,i=this.curSkill[t],o=i.targetType,s=EntityManager.ins().screeningTargetByPos(e,o==TargetType.Friendly);this.curTarget[t]=s?s[0]:null},t.prototype.trace=function(e){this.aaa==Team.Monster;this.isLog&&console.log(e)},t.AI_UPDATE_TIME=200,t.AI_UPDATEROLE_TIME=100,t.OTHER_UPDATE_TIME=300,t}(BaseClass);__reflect(newAI.prototype,"newAI");var Team;!function(e){e[e.My=0]="My",e[e.Monster=1]="Monster",e[e.WillEntity=2]="WillEntity",e[e.WillBoss=3]="WillBoss",e[e.NotAtk=4]="NotAtk",e[e.PASSERBY=5]="PASSERBY",e[e.MyTeamMenber=6]="MyTeamMenber"}(Team||(Team={}));var TargetType;!function(e){e[e.Friendly=1]="Friendly",e[e.Enemy=2]="Enemy",e[e.My=3]="My"}(TargetType||(TargetType={}));var AI_State;!function(e){e[e.Stand=0]="Stand",e[e.Run=1]="Run",e[e.Atk=2]="Atk",e[e.Die=3]="Die"}(AI_State||(AI_State={})),window.newAI=newAI;var OtherAIModel=function(){function e(){this.isSHowAi=!0,this.attr=[1,2,3],this.aiRoleList=new Dictionary,this.aiMonsterList=new Dictionary,this.aiNum=0,this.isCanAiCreateMonsters=!0,this.attr.sort(function(){return Math.random()-.5})}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.createMonsters=function(e){if(this.isSHowAi){var t=this.aiRoleList.values;if(!(t.length<=0)){for(var i=0;i<t.length;i++){var o=t[i];o&&o.AI_STATE==AI_State.Die&&(o.AI_STATE=AI_State.Stand,o.alpha=1,o.visible=!0)}if(!(this.aiRoleList.values.length<=0)&&GameMap.IsNoramlLevel()&&!(this.aiMonsterList.values.length>6)&&this.isCanAiCreateMonsters){e.type=EntityType.WillDummyMonster;var s=EntityManager.ins().createEntity(e);if(s){s.infoModel.handle=s.hashCode,this.aiMonsterList.set(s.infoModel.handle,s);var n=ViewManager.ins().getView(GameSceneView);n.map.addEntity(s)}}}}},e.prototype.creatorAIRole=function(){if(this.isSHowAi&&GameMap.IsNoramlLevel()){if(0==this.aiNum){for(var e=GlobalConfig.ins("AiBaseConfig"),t=100*Math.random(),i=0,o=0;o<e.aiRefresh.length;o++)if(i+=e.aiRefresh[o][1],!(t>=i)){this.aiNum=e.aiRefresh[o][0];break}0==this.aiNum&&(this.aiNum=3)}for(var s=SubRoles.ins().rolesModel,n=0;n<this.aiNum;n++){var r=this.aiRoleList.values[n];if(!r){var a=s[n];a||(a=s[0]);for(var l=new Role,h=this.attr[n],c=GlobalConfig.ins("AiRoleConfig")[h],u=Math.floor(100*Math.random()),d=0,p=0,o=0;o<c.length;o++)if(d+=c[o].rate,!(u>=d)){p=o;break}var f=c[p];l.zhuangbei=f.zhuangbei;for(var g=[],o=0;o<a.equipsData.length;o++){var _=new EquipsData;_.item.configID=f.appearance[o],g.push(_)}l.equipsData=g;var m=new WingsData;m.lv=f.wing,m.showLv=f.wing,f.wing<=0?m.openStatus=!1:m.openStatus=!0,l.wingsData=m,l.mountsLevel=f.mounts,l.mountsShowLv=f.mounts,l.sex=f.sex,l.job=f.job,l.zhuanzhiLv=f.transferLevel,l.attrElementMianType=f.element,l.attrElementData=a.attrElementData,l.parserAtt(a.getattributeData),l.setAtt(AttributeType.atHp,l.getAtt(AttributeType.atMaxHp));var v=Rank.ins().getRankModel(0);l.name="";var y=Math.floor(Math.random()*v._dataList.length),b=v._dataList[y];b&&(l.name=b.player),l.type=EntityType.WillDummy,l.skillsData=f.skillLevel,l.skillsDataIndex=f.skill;var C=GlobalConfig.ins("ChaptersConfig")[UserFb.ins().guanqiaID];if(C){var T=GlobalConfig.ins("ScenesConfig")[C.sid];l.x=Const.PosToPixel(T.aIEnterX),l.y=Const.PosToPixel(T.aIEnterY)}else l.x=a.x,l.y=a.y;l.title=f.title,l.roleID=0;var S=EntityManager.ins().createEntity(l);if(S){S.infoModel.handle=S.hashCode,this.aiRoleList.set(S.infoModel.handle,S);var w=ViewManager.ins().getView(GameSceneView);w.map.addEntity(S),S.visible=!0,S.alpha=1,S.AI_STATE=AI_State.Stand}}}}},e.prototype.releaseRole=function(e){var t=this.aiRoleList.remove(e);t&&(t.alpha=1,egret.Tween.removeTweens(t),DisplayUtils.dispose(t),t=null)},e.prototype.releaseMonster=function(e){var t=this.aiMonsterList.remove(e);if(t){if(GameMap.IsNoramlLevel()&&this.aiMonsterList.values.length<=2){var i=t.infoModel.getAtt(AttributeType.atMaxHp);t.infoModel.setAtt(AttributeType.atHp,i),this.createMonsters(t.infoModel)}t.alpha=1,egret.Tween.removeTweens(t),DisplayUtils.dispose(t),t=null}},e.prototype.releaseAllMonster=function(e){var t=this.aiMonsterList.remove(e);t&&(t.alpha=1,egret.Tween.removeTweens(t),DisplayUtils.dispose(t),t=null)},e.prototype.releaseAll=function(){for(var e=0;e<this.aiRoleList.keys.length;e++)this.releaseRole(this.aiRoleList.keys[e]);for(var e=0;e<this.aiMonsterList.keys.length;e++)this.releaseAllMonster(this.aiMonsterList.keys[e]);this.attr.sort(function(){return Math.random()-.5}),this.aiNum=0},e.prototype.setName=function(){for(var e=this.aiRoleList.values,t=0;t<e.length;t++){var i=e[t];if(i&&(!i.infoModel.name||""==i.infoModel.name)){var o=Rank.ins().getRankModel(0),s=this.getName(o);i.infoModel.name=s,i.setCharName(s),i.showCharName(!0)}}},e.prototype.getName=function(e){if(e&&e._dataList.length>0){var t=Math.floor(Math.random()*e._dataList.length),i=e._dataList[t];return i&&i.player!=GameLogic.ins().actorModel.name?i.player:this.getName(e)}return""},e.prototype.setPoint=function(){var e=this.aiRoleList.values,t=GlobalConfig.ins("ChaptersConfig")[UserFb.ins().guanqiaID];if(t)for(var i=GlobalConfig.ins("ScenesConfig")[t.sid],o=0;o<e.length;o++)e[o].x=Const.PosToPixel(i.aIEnterX),e[o].y=Const.PosToPixel(i.aIEnterY)},e.prototype.refreshAll=function(){this.isCanAiCreateMonsters=!1;for(var e=this.aiMonsterList.values,t=0;t<e.length;t++){var i=e[t];i&&(i.AI_STATE=AI_State.Die,i.stopMove(),egret.Tween.get(i).to({alpha:0},1e3))}for(var o=this.aiRoleList.values,t=0;t<o.length;t++){var s=o[t];s&&(s.AI_STATE=AI_State.Die,s.stopMove(),egret.Tween.get(s).to({alpha:0},1e3))}egret.setTimeout(function(){this.releaseAll(),this.creatorAIRole(),this.isCanAiCreateMonsters=!0},this,4e3)},e}();__reflect(OtherAIModel.prototype,"OtherAIModel"),window.OtherAIModel=OtherAIModel;var __ref_field__=AttributeType,AttributeData=function(){function e(e){void 0===e&&(e=null),e&&(this.type=e.type,this.value=e.value)}return e.prototype.parser=function(e){this.type=e.type,this.value=e.value},e.AttrStringAddition2=function(t,i,o){for(var s={},n=1;o>n;n++)for(var r=i[n].attr,a=0;a<r.length;a++){var l=r[a];void 0==s[l.type]?s[l.type]=l.value:s[l.type]=s[l.type]+l.value}for(var h=0;h<t.length;h++){var l=t[h];void 0==s[l.type]?s[l.type]=l.value:s[l.type]=s[l.type]+l.value}var c=[];for(var u in s){var d=new e;d.type=parseInt(u),d.value=s[u],c.push(d)}return c},e.AttrAddition=function(t,i){var o=[],s=[];for(var n in t)s[t[n].type]=t[n].value;for(var n in i)s[i[n].type]=(s[i[n].type]||0)+i[n].value;for(var n in s){var r=new e;r.type=parseInt(n),r.value=s[n],o.push(r)}return o},e.transformAttr=function(t){var i=[];for(var o in t){var s=new e;s.type=t[o].type,s.value=t[o].value,i.push(s)}for(var n=0;n<i.length-1;n++)for(var r=0;r<i.length-n-1;r++)if(i[r]<i[r+1]){var a=i[r+1];i[r+1]=i[r],i[r]=a}return i},e.getAttStr=function(t,i,o,s,n,r,a){void 0===i&&(i=4),void 0===o&&(o=1),void 0===s&&(s="+"),void 0===n&&(n=!1),void 0===r&&(r="#4c78db"),void 0===a&&(a=!0);var l="";if(t instanceof e)return this.getAttStrByType(t,i,s,n,r,a);if(!(t instanceof Array)){var h=[];for(var c in this.translate)if(!isNaN(t[c])){var u=new e;u.type=parseInt(this.translate[c]),u.value=t[c],h.push(u)}return this.getAttStr(h,i,o,s,n)}for(var d=t,p=0;p<d.length;p++)if(l+=this.getAttStrByType(d[p],i,s,n,r,a),p<d.length-1)for(var f=0;o>f;f++)l+="\n";return l},e.getAttStrForZhuzai=function(e,t,i,o,s,n){void 0===t&&(t=4),void 0===i&&(i=1),void 0===o&&(o="+"),void 0===s&&(s=!1),void 0===n&&(n="#ffffff");var r="",a=e;return r+=this.getAttStrByTypeForZhuzai(a[0],t,o,s,n)},e.getAttStrForRing=function(t){var i="",o=[];if(t instanceof Array){for(var s=0,n=t;s<n.length;s++){var r=n[s];r.type!=AttributeType.atRingBuff&&o.push(r)}i=e.getAttStr(o,0,1,": ")}return i},e.getAttStrByType=function(t,i,o,s,n,r){void 0===i&&(i=4),void 0===o&&(o="+"),void 0===s&&(s=!1),void 0===n&&(n=null),void 0===r&&(r=!0);var a="";return n&&r&&(a=StringUtils.complementByChar(e.getAttrStrByType(t.type),8*i)),a+=t.type==AttributeType.atCrit||t.type==AttributeType.atTough?o+t.value/100+"%":t.type>10?15==t.type?o+t.value/1e3+GlobalConfig.jifengTiaoyueLg.st100141:AttributeType.atAtkEx==t.type?o+t.value/100+"%":AttributeType.atCritHurt==t.type||AttributeType.atRegeneration==t.type?o+t.value:o+t.value/100+"%":o+t.value},e.getAttStrByTypeForZhuzai=function(e,t,i,o,s){void 0===t&&(t=4),void 0===i&&(i="+"),void 0===o&&(o=!1),void 0===s&&(s=null);var n=GlobalConfig.jifengTiaoyueLg.st100142;return n+=e.type==AttributeType.atMaxHp||e.type==AttributeType.atAttack||e.type==AttributeType.atDef||e.type==AttributeType.atRes||e.type==AttributeType.atCrit||e.type==AttributeType.atTough?i+e.value/100+"%":e.type>10?15==e.type?i+e.value/1e3+GlobalConfig.jifengTiaoyueLg.st100141:AttributeType.atAtkEx==e.type?i+e.value/100+"%":AttributeType.atCritHurt==e.type||AttributeType.atRegeneration==e.type?i+e.value:i+e.value/100+"%":i+e.value},e.inserteBlank=function(e,t,i){void 0===i&&(i=1);for(var o=e.length,s="";t--;)s+=" ";var n="";switch(i){case 0:n=s+e;break;case 1:n=e.slice(0,o/2)+s+e.slice(o/2);break;case 2:n=e+s}return n},e.GetAttrValueByItemId=function(t,i){null==this.EquipConfig&&(this.EquipConfig=GlobalConfig.equipConfig);var o=this.EquipConfig[t],s="";for(var n in this.translate)if(this.translate[n]==i){var r=o[n];return e.getAttrStrByType(i)+": "+r}return s},e.getAttrStrByType=function(e){var t="";switch(e){case AttributeType.atHp:t=GlobalConfig.jifengTiaoyueLg.st100143;break;case AttributeType.atMp:t=GlobalConfig.jifengTiaoyueLg.st100144;break;case AttributeType.atMaxHp:t=GlobalConfig.jifengTiaoyueLg.st100145;break;case AttributeType.atMaxMp:t=GlobalConfig.jifengTiaoyueLg.st100146;break;case AttributeType.atAttack:t=GlobalConfig.jifengTiaoyueLg.st100147;break;case AttributeType.atDef:t=GlobalConfig.jifengTiaoyueLg.st100148;break;case AttributeType.atRes:t=GlobalConfig.jifengTiaoyueLg.st100149;break;case AttributeType.atCrit:t=GlobalConfig.jifengTiaoyueLg.st100150;break;case AttributeType.atTough:t=GlobalConfig.jifengTiaoyueLg.st100151;break;case AttributeType.atMoveSpeed:t=GlobalConfig.jifengTiaoyueLg.st100152;break;case AttributeType.atAttackSpeed:t=GlobalConfig.jifengTiaoyueLg.st100153;break;case AttributeType.atHpEx:t=GlobalConfig.jifengTiaoyueLg.st100154;break;case AttributeType.atAtkEx:t=GlobalConfig.jifengTiaoyueLg.st100155;break;case AttributeType.atStunPower:t=GlobalConfig.jifengTiaoyueLg.st100156;break;case AttributeType.atStunRes:t=GlobalConfig.jifengTiaoyueLg.st100157;break;case AttributeType.atStunTime:t=GlobalConfig.jifengTiaoyueLg.st100158;break;case AttributeType.atDamageReduction:t=GlobalConfig.jifengTiaoyueLg.st100159;break;case AttributeType.atCritHurt:t=GlobalConfig.jifengTiaoyueLg.st100160;break;case AttributeType.atRegeneration:t=GlobalConfig.jifengTiaoyueLg.st100161;break;case AttributeType.atCritEnhance:t=GlobalConfig.jifengTiaoyueLg.st100162;break;case AttributeType.atPenetrate:t=GlobalConfig.jifengTiaoyueLg.st100163;break;case AttributeType.atRoleDamageEnhance:t=GlobalConfig.jifengTiaoyueLg.st100164;break;case AttributeType.atRoleDamageReduction:t=GlobalConfig.jifengTiaoyueLg.st100165;break;case AttributeType.atJob1DamageEnhance:t=GlobalConfig.jifengTiaoyueLg.st100166;break;case AttributeType.atJob2DamageEnhance:t=GlobalConfig.jifengTiaoyueLg.st100167;break;case AttributeType.atJob3DamageEnhance:t=GlobalConfig.jifengTiaoyueLg.st100168;break;case AttributeType.atJob1DamageReduction:t=GlobalConfig.jifengTiaoyueLg.st100169;break;case AttributeType.atJob2DamageReduction:t=GlobalConfig.jifengTiaoyueLg.st100170;break;case AttributeType.atJob3DamageReduction:t=GlobalConfig.jifengTiaoyueLg.st100171;break;case AttributeType.atDefEx:t=GlobalConfig.jifengTiaoyueLg.st100148;break;case AttributeType.atResEx:t=GlobalConfig.jifengTiaoyueLg.st100149;break;case AttributeType.atDodgeProb:t=GlobalConfig.jifengTiaoyueLg.st100172;break;case AttributeType.atStrength:t=GlobalConfig.jifengTiaoyueLg.st100173;break;case AttributeType.atFaster:t=GlobalConfig.jifengTiaoyueLg.st100174;break;case AttributeType.atIntelligence:t=GlobalConfig.jifengTiaoyueLg.st100175;break;case AttributeType.atPhysical:t=GlobalConfig.jifengTiaoyueLg.st100176;break;case AttributeType.atMpRecove:t=GlobalConfig.jifengTiaoyueLg.st100177;break;case AttributeType.atMpRecoveEx:t=GlobalConfig.jifengTiaoyueLg.st100177;break;case AttributeType.WATER:t=GlobalConfig.jifengTiaoyueLg.st100178;break;case AttributeType.FIRE:t=GlobalConfig.jifengTiaoyueLg.st100179;break;case AttributeType.WIND:t=GlobalConfig.jifengTiaoyueLg.st100180;break;case AttributeType.LIGHT:t=GlobalConfig.jifengTiaoyueLg.st100181;break;case AttributeType.DARK:t=GlobalConfig.jifengTiaoyueLg.st100182;break;case AttributeType.ANTIWATER:t=GlobalConfig.jifengTiaoyueLg.st100183;break;case AttributeType.ANTIFIRE:t=GlobalConfig.jifengTiaoyueLg.st100184;break;case AttributeType.ANTIWIND:t=GlobalConfig.jifengTiaoyueLg.st100185;break;case AttributeType.ANTILIGHT:t=GlobalConfig.jifengTiaoyueLg.st100186;break;case AttributeType.ANTIDARK:t=GlobalConfig.jifengTiaoyueLg.st100187}return t},e.getAttrStrAdd=function(t,i){var o=[];if(UserVip.ins().lv>=i){var s=GlobalConfig.ins("VipConfig")[i].attrAddition.percent||0;t.forEach(function(t){var i=new e;i.type=t.type,i.value=t.value*(100+s)/100>>0,o.push(i)})}else o=t;return o},e.setAttrGroup=function(e,t,i,o,s,n,r,a){void 0===i&&(i=18),void 0===o&&(o=Color.FontColor),void 0===s&&(s=!1),void 0===n&&(n=Color.Green),void 0===r&&(r=[]),void 0===a&&(a=!1);var l=t.numChildren,h=[];e.sort(this.sorType);for(var c=0;l>c;c++){var u=t.removeChildAt(0);u&&u instanceof eui.Label&&(0==c&&(i=u.size),h.push(u))}if(e.length<=0){var d=this.createLab(i,o,h[0]);d.text="",t.addChild(d)}else{for(var p=[],c=0;c<e.length;c++){var f="",g=e[c].value;switch(e[c].type){case AttributeType.atCrit:case AttributeType.atTough:case AttributeType.atHpEx:case AttributeType.atAtkEx:case AttributeType.atDamageReduction:case AttributeType.atCritEnhance:case AttributeType.atPenetrate:case AttributeType.atRoleDamageEnhance:case AttributeType.atRoleDamageReduction:case AttributeType.atJob1DamageReduction:case AttributeType.atJob2DamageReduction:case AttributeType.atJob3DamageReduction:case AttributeType.atDefEx:case AttributeType.atResEx:case AttributeType.atDodgeProb:case AttributeType.atDamageReboundProb:case AttributeType.atMpEx:g=(g/100).toFixed(2),f="%"}var _=this.getAttrStrByType(e[c].type),m=this.createLab(i,o,h[c]);if(n){var v="";r&&r[c]&&(v=r[c]);var y=" "+g+f+v;m.textFlow=[{text:_,style:{textColor:o}},{text:y,style:{textColor:n}}]}else{var y=_+" "+g+f;m.textFlow=[{text:y},{text:""}]}if(m){var b=Math.max(m.textWidth,m.measuredWidth);b>0?m.width=b+15:m.width=void 0}p.push(m),t.addChild(m)}if(1==s){p.sort(this.sorLvUp);for(var c=0;c<p.length;c++){var C=p[c];t.addChildAt(C,c)}}if(a){for(var T=0,c=0;c<p.length;c++){var C=p[c],S=Math.max(C.textWidth,C.measuredWidth);T=Math.max(T,S)}t.width=T}}},e.sorLvUp=function(e,t){return t.text.length-e.text.length},e.sorType=function(e,t){return e.type-t.type},e.createLab=function(e,t,i){void 0===e&&(e=18),void 0===t&&(t=3881787),void 0===i&&(i=null);var o=i;return o||(o=new eui.Label),o.width=0,o.width=void 0,o.fontFamily="Microsoft YaHei",o.size=e,o.textColor=t,o.height=e,o},e.getAttr=function(t){for(var i=new Dictionary,o=0;o<t.length;o++)for(var s=t[o],n=0;n<s.length;n++){var r=s[n].type,a=i.get(r);if(a)a.value+=s[n].value;else{var l={type:s[n].type,value:s[n].value};i.set(r,l)}}if(i.values.length>0){for(var a=[],o=0;o<i.values.length;o++)0!=i.values[o].value&&a.push(i.values[o]);return a.length>0?a:e.minAttr()}return e.minAttr()},e.minAttr=function(){var e=[],t={type:2,value:0},i={type:4,value:0},o={type:5,value:0},s={type:6,value:0};return e.push(t,i,o,s),e},e.getPower=function(e,t,i,o,s,n,r,a){var l=e+t*i*(o+s*Math.pow(n*r/(r+a),a-1));return Math.floor(l)},e.getNowPower=function(t,i,o,s,n,r,a,l,h){if(0==i)return[];0>=t&&(t=1);var c,u=0;return c=null==s?1+Math.floor(t/5):1+Math.floor(t/s),u=e.getPower(o,c,n,r,a,l,h,t),t>=i||0==i?Math.floor(u):(t+=1,e.getNowPower(t,i,u,s,n,r,a,l,h))},e.getAttrByPower=function(e,t,i,o,s){var n=[],r=GlobalConfig.ins("AttrPowerConfig"),a=Math.floor(s*e/(r[AttributeType.atMaxHp].power/100)),l=Math.floor(s*t/(r[AttributeType.atAttack].power/100)),h=Math.floor(s*i/(r[AttributeType.atDef].power/100)),c=Math.floor(s*o/(r[AttributeType.atRes].power/100)),u={type:AttributeType.atMaxHp,value:a},d={type:AttributeType.atAttack,value:l},p={type:AttributeType.atDef,value:h},f={type:AttributeType.atRes,value:c};return n.push(u,d,p,f),n},e.getAttrElementByPower=function(e,t,i,o,s){var n=[],r=GlobalConfig.ins("AttrPowerConfig"),a=Math.floor(e*o/(r[t].power/100)),l=Math.floor(e*s/(r[i].power/100)),h={type:t,value:a},c={type:i,value:l};return n.push(h,c),n},e.removeZeroAttr=function(e){for(var t=[],i=0;i<e.length;i++)e[i].value>0&&t.push(e[i]);return t.length>0?t:e},e.getElementName=function(e){var t=GlobalConfig.jifengTiaoyueLg.st100198;switch(e){case ElementType.WATER:t=GlobalConfig.jifengTiaoyueLg.st100199;break;case ElementType.FIRE:t=GlobalConfig.jifengTiaoyueLg.st100200;break;case ElementType.WIND:t=GlobalConfig.jifengTiaoyueLg.st100201;break;case ElementType.LIGHT:t=GlobalConfig.jifengTiaoyueLg.st100202;break;case ElementType.DARK:t=GlobalConfig.jifengTiaoyueLg.st100203}return t},e.getElementKType=function(e){var t=e+1;return t>ElementType.DARK&&(t=ElementType.WATER),t},e.getElementBKType=function(e){var t=e-1;return t<ElementType.WATER&&(t=ElementType.DARK),t},e.translate={hp:AttributeType.atMaxHp,atk:AttributeType.atAttack,def:AttributeType.atDef,res:AttributeType.atRes,crit:AttributeType.atCrit,tough:AttributeType.atTough},e}();__reflect(AttributeData.prototype,"AttributeData"),window.AttributeData=AttributeData;var Timer=function(){function e(){this.m_Timer=-1}return e.TimeOut=function(t,i){var o=new e,s=function(){-1!=o.m_Timer&&(t(),o.m_Timer=-1)};return o.m_Timer=egret.setTimeout(s,this,i),o},e.prototype.Stop=function(){-1!=this.m_Timer&&egret.clearTimeout(this.m_Timer),this.m_Timer=-1},e}();__reflect(Timer.prototype,"Timer"),window.Timer=Timer;var TimerManager=function(e){function t(){var t=e.call(this)||this;return t._chackTime=0,t._haveremove=!1,t._handlers=new Array,t._currTime=egret.getTimer(),t._currFrame=0,t._timeScale=1,egret.startTick(t.onEnterFrame,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getFrameId=function(){return this._currFrame},t.prototype.setTimeScale=function(e){this._timeScale=e},t.prototype.onEnterFrame=function(e){if(this._currFrame++,DeviceUtils.IsPC){var t=egret.getTimer();this._chackTime>t&&WarnWin.show("检测到加速外挂",function(){window.location.reload()},this,function(){window.location.reload()},this,"sure2"),this._chackTime=t}if(this._currTime=e,this._currFrame%2!=0||!DeviceUtils.IsMobile){DebugUtils.start("TimerManager:");for(var i=egret.getTimer(),o=0,s=this._handlers;o<s.length;o++){var n=s[o];if(n.remove)this._haveremove=!0;else{var r=n.userFrame?this._currFrame:this._currTime;r>=n.exeTime&&(DebugUtils.start(n.method.toString()),n.method.call(n.methodObj,(this._currTime-n.dealTime)*this._timeScale),DebugUtils.stop(n.method.toString()),n.dealTime=this._currTime,n.exeTime+=n.delay,n.repeat||(n.repeatCount>1?n.repeatCount--:(n.complateMethod&&n.complateMethod.apply(n.complateMethodObj),n.remove=!0,this._haveremove=!0)));var a=egret.getTimer()-i;if(a>60)break}}if(this._haveremove)for(var l=this._handlers.length-1;l>=0;--l){var n=this._handlers[l];n.remove&&(n.clear(),this._handlers.splice(l,1),ObjectPool.ins().push(n))}return this._haveremove=!1,DebugUtils.stop("TimerManager:"),!1}},t.prototype.create=function(e,t,i,o,s,n,r){if(!(0>t||0>i||null==o)){this.remove(o,s);var a=ObjectPool.ins().pop("TimerHandler");a.userFrame=e,a.repeat=0==i,a.repeatCount=i,a.delay=t,a.method=o,a.methodObj=s,a.complateMethod=n,a.complateMethodObj=r,a.exeTime=t+(e?this._currFrame:this._currTime),a.dealTime=this._currTime,a.remove=!1,this._handlers.push(a)}},t.prototype.doTimer=function(e,t,i,o,s,n){void 0===s&&(s=null),void 0===n&&(n=null),this.create(!1,e,t,i,o,s,n)},t.prototype.doFrame=function(e,t,i,o,s,n){void 0===s&&(s=null),void 0===n&&(n=null),this.create(!0,e,t,i,o,s,n)},t.prototype.doNext=function(e,t){this.create(!0,1,1,e,t,null,null)},t.prototype.remove=function(e,t){for(var i=0,o=this._handlers;i<o.length;i++){var s=o[i];s.remove||s.method!=e||s.methodObj!=t||(s.remove=!0,this._haveremove=!0)}},t.prototype.removeAll=function(e){for(var t=0,i=this._handlers;t<i.length;t++){var o=i[t];o.methodObj==e&&(o.remove=!0,this._haveremove=!0)}},t.prototype.isExists=function(e,t){for(var i=0,o=this._handlers;i<o.length;i++){var s=o[i];if(!s.remove&&s.method==e&&s.methodObj==t)return!0}return!1},t}(BaseClass);__reflect(TimerManager.prototype,"TimerManager");var TimerHandler=function(){function e(){this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0,this.remove=!1}return e.prototype.clear=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null,this.remove=!1},e}();__reflect(TimerHandler.prototype,"TimerHandler"),window.TimerManager=TimerManager,window.TimerHandler=TimerHandler;var Checker=function(){function e(){}return e.Level=function(e,t,i){void 0===i&&(i=!0);var o=GameLogic.ins().actorModel.level,s=UserZs.ins().lv;return e&&e>s?(i&&UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100219),!1):t&&t>o?(i&&UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100220),!1):!0},e.Money=function(t,i,o,s){void 0===o&&(o=!0),void 0===s&&(s=null);var n=0,r=GameLogic.ins().actorModel,a=null;switch(t){case MoneyConst.yuanbao:n=r.yb,a=GlobalConfig.jifengTiaoyueLg.st100008;break;case MoneyConst.gold:n=r.gold,a=GlobalConfig.jifengTiaoyueLg.st100222;break;case MoneyConst.XIUWEI:n=UserZs.ins().exp,a=GlobalConfig.jifengTiaoyueLg.st100223;break;case MoneyConst.COUPON:n=r.coupon,a=GlobalConfig.jifengTiaoyueLg.st102103;break;default:console.warn("未定义的货币类型",t)}return i>n?(1==o?(UserTips.ins().showTips(a),t==MoneyConst.COUPON&&UserWarn.ins().setBuyGoodsWarn(t)):t==MoneyConst.yuanbao&&o==e.YUNBAO_FRAME&&(StartGetUserInfo.isOne?UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st100224):e.YunbaoTip(s)),!1):!0},e.YunbaoTip=function(e){void 0===e&&(e=null);var t="",i=Recharge.ins().ToDayRechargeState();0!=i&&(t="\n"+GlobalConfig.jifengTiaoyueLg.st100231+"：",Color.Blue,Recharge.ins().getFirstRechargeState()?t+=StringUtils.addColor(GlobalConfig.jifengTiaoyueLg.st100230,Color.Yellow):2==i?t+=StringUtils.addColor(GlobalConfig.jifengTiaoyueLg.st100229,Color.Yellow):t="");var o=e||GlobalConfig.jifengTiaoyueLg.st100228;WarnWin.show(TextFlowMaker.generateTextFlow(o+t),function(){ViewManager.ins().open(ChargeFirstWin),ViewManager.ins().close(ActivityType2003ResultPanel)},this,null,null,"sure",{btnName:1==i?GlobalConfig.jifengTiaoyueLg.st100226:GlobalConfig.jifengTiaoyueLg.st100227,title:GlobalConfig.jifengTiaoyueLg.st100221})},e.OpenDay=function(e,t){return void 0===t&&(t=!0),GameServer.serverOpenDay<e?(t&&UserTips.ErrorTip(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100225,[e])),!1):!0},e.YUNBAO_FRAME=2,e}();__reflect(Checker.prototype,"Checker"),window.Checker=Checker;var DeblockingType;!function(e){e[e.TYEP_01=1]="TYEP_01",e[e.TYPE_02=2]="TYPE_02",e[e.TYPE_03=3]="TYPE_03",e[e.TYPE_04=4]="TYPE_04",e[e.TYPE_05=5]="TYPE_05",e[e.TYPE_06=6]="TYPE_06",e[e.TYPE_07=7]="TYPE_07",e[e.TYPE_08=8]="TYPE_08",e[e.TYPE_09=9]="TYPE_09",e[e.TYPE_10=10]="TYPE_10",e[e.TYPE_14=14]="TYPE_14",e[e.TYPE_15=15]="TYPE_15",e[e.TYPE_17=17]="TYPE_17",e[e.TYPE_18=18]="TYPE_18",e[e.TYPE_19=19]="TYPE_19",e[e.TYPE_20=20]="TYPE_20",e[e.TYPE_21=21]="TYPE_21",e[e.TYPE_22=22]="TYPE_22",e[e.TYPE_23=23]="TYPE_23",e[e.TYPE_24=24]="TYPE_24",e[e.TYPE_25=25]="TYPE_25",e[e.TYPE_26=26]="TYPE_26",e[e.TYPE_27=27]="TYPE_27",e[e.TYPE_28=28]="TYPE_28",e[e.TYPE_29=29]="TYPE_29",e[e.TYPE_30=30]="TYPE_30",e[e.TYPE_31=31]="TYPE_31",e[e.TYPE_32=32]="TYPE_32",e[e.TYPE_33=33]="TYPE_33",e[e.TYPE_34=34]="TYPE_34",e[e.TYPE_35=35]="TYPE_35",e[e.TYPE_43=43]="TYPE_43",e[e.TYPE_44=44]="TYPE_44",e[e.TYPE_45=45]="TYPE_45",e[e.TYPE_47=47]="TYPE_47",e[e.TYPE_48=48]="TYPE_48",e[e.TYPE_60=60]="TYPE_60",e[e.TYPE_61=61]="TYPE_61",e[e.TYPE_62=62]="TYPE_62",e[e.TYPE_63=63]="TYPE_63",e[e.TYPE_73=73]="TYPE_73",e[e.TYPE_74=74]="TYPE_74",e[e.TYPE_75=75]="TYPE_75",e[e.TYPE_76=76]="TYPE_76",e[e.TYPE_77=77]="TYPE_77",e[e.TYPE_78=78]="TYPE_78",e[e.TYPE_79=79]="TYPE_79",e[e.TYPE_80=80]="TYPE_80",e[e.TYPE_81=81]="TYPE_81",e[e.TYPE_82=82]="TYPE_82",e[e.TYPE_83=83]="TYPE_83",e[e.TYPE_84=84]="TYPE_84",e[e.TYPE_85=85]="TYPE_85",e[e.TYPE_86=86]="TYPE_86",e[e.TYPE_87=87]="TYPE_87",e[e.TYPE_88=88]="TYPE_88",e[e.TYPE_89=89]="TYPE_89",e[e.TYPE_90=90]="TYPE_90",e[e.TYPE_91=91]="TYPE_91",e[e.TYPE_92=92]="TYPE_92",e[e.TYPE_94=94]="TYPE_94"}(DeblockingType||(DeblockingType={}));var FUN_OPEN_CONDITION;!function(e){e[e.GUAN_QIA_NUM=1]="GUAN_QIA_NUM",e[e.ACTOR_LEVEL=2]="ACTOR_LEVEL",e[e.VIP_LEVEL=3]="VIP_LEVEL",e[e.OPEN_SERVER_DAY=4]="OPEN_SERVER_DAY",e[e.LOGIN_DAY=5]="LOGIN_DAY",e[e.ZHUAN_ZHI_LEVEL=6]="ZHUAN_ZHI_LEVEL",e[e.SPECIAL_RING=7]="SPECIAL_RING",e[e.JOIN_IN_GANG=8]="JOIN_IN_GANG"}(FUN_OPEN_CONDITION||(FUN_OPEN_CONDITION={}));var Deblocking=function(){function e(){}return e.CheckSinge=function(e,t){if(!e||!t)return!0;switch(e){case FUN_OPEN_CONDITION.GUAN_QIA_NUM:return UserFb.ins().guanqiaID>=t;case FUN_OPEN_CONDITION.ACTOR_LEVEL:return 1e3*UserZs.ins().lv+GameGlobal.actorModel.level>=t;case FUN_OPEN_CONDITION.VIP_LEVEL:return UserVip.ins().lv>=t;case FUN_OPEN_CONDITION.OPEN_SERVER_DAY:return GameServer.serverOpenDay>=t;case FUN_OPEN_CONDITION.LOGIN_DAY:return GameServer.loginDay>=t;case FUN_OPEN_CONDITION.ZHUAN_ZHI_LEVEL:for(var i=0;3>i;i++)if(ZhuanZhiModel.ins().getZhuanZhiLevel(i)>=t)return!0;return!1;case FUN_OPEN_CONDITION.SPECIAL_RING:return RingSoulModel.ins().isOpen;case FUN_OPEN_CONDITION.JOIN_IN_GANG:return!(void 0==GameLogic.ins().actorModel.guildID||0==GameLogic.ins().actorModel.guildID)}return!0},e.Check=function(t,i){void 0===i&&(i=!1),null==e.funcOpenConfig&&(e.funcOpenConfig=GlobalConfig.ins("FuncOpenConfig"));var o=e.funcOpenConfig[t];if(!o||!o.conditionkind)return!0;for(var s=!0,n=0;n<this.KEYS.length;++n){var r=this.KEYS[n],a=this.VALUES[n];if(!this.CheckSinge(o[r],o[a])){s=!1;break}}return s?!0:(i||UserTips.ins().showTips("|C:0xf87372&T:"+o.opencondition+"|"),!1)},e._ShowTip=function(e,t,i,o){if(void 0===i&&(i=!1),!i){var s=o;if(!s)switch(e){case 1:s=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101423,[t]);break;case 2:s=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101424,[t]);break;case 3:s=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101425,[t])}s&&UserTips.ins().showTips("|C:0xf87372&T:"+s+"|")}},e.IsHide=function(t){if(this.Check(t,!0))return!1;null==e.funcOpenConfig&&(e.funcOpenConfig=GlobalConfig.ins("FuncOpenConfig"));var i=e.funcOpenConfig[t];return i&&1==i.isHide?!0:!1},e.IsRedDotBossBtn=function(){if(!e.Check(DeblockingType.TYPE_06,!0))return!1;var t=GlobalConfig.ins("PublicBossBaseConfig").openCheck;return UserFb.ins().guanqiaID<t?!1:DailyFubenConfig.isCanChallenge()||UserBoss.ins().isCanChalleng()||UserBoss.ins().isCanChallengKf()||HomeBossModel.getInstance.checkAllRedPoint()||SyBossModel.getInstance.checkAllRedPoint()?!0:!1},e.IsRedDotGuildBtn=function(){return Guild.ins().myOffice>=GuildOffice.GUILD_FUBANGZHU&&Guild.ins().hasApplys()?!0:GuildFB.ins().hasbtn()?!0:(void 0==GameLogic.ins().actorModel.guildID||0==GameLogic.ins().actorModel.guildID)&&GameLogic.ins().actorModel.level>69?!0:GuildRobber.ins().hasbtn()?!0:!1},e.IsRedDotLadderBtn=function(){return e.Check(DeblockingType.TYPE_07,!0)?Encounter.CheckRedPoint()||1==Ladder.ins().checkRedShow()||MineModel.ins().mRedPoint.IsRed()||DartCarModel.ins().carRedPoint.IsRed()||AcrossLadderCenter.ins().rankRewardRedPoint()||TenKillModel.getInstance.checkRedPoint():!1},e.IsRedDotGadrBtn=function(){var e=!1;return(GadModel.getInstance.checkAllRoleCanChangeItem()||GadModel.getInstance.checkAllRoleCanLvUp())&&(e=!0),e},e.IsRedDotFubenBtn=function(){return e.Check(DeblockingType.TYPE_03,!0)?UserFb.ins().getCount()>0||UserFb2.ins().IsRed()||DrillModel.ins().isRed()||TeamFbModel.getInstance.isShowRedPoint():!1},e.IsRedDotArtifactBtn=function(){return e.Check(DeblockingType.TYPE_15,!0)?ArtifactModel.getInstance.checkAllLvUpAndActivate()||ArtifactModel.getInstance.checkAllLayerUp():!1
},e.IsRedDotZhuanZhiBtn=function(){return e.Check(DeblockingType.TYPE_30,!0)?ZhuanZhiModel.ins().zhuanZhiEquipAllRedPoint()||ZhuanZhiModel.ins().zhuanZhiIsRed():!1},e.IsRedDotSkillBtn=function(){return e.Check(DeblockingType.TYPE_61,!0)?UserSkill.ins().checkAllSkillRedPoint()||FuwenModel.ins().CalculationFuwenRedPoint()||NeiGongControl.ins().checkRed()||UserJingMai.ins().IsRed()||PrestigeModel.CheckRedPoint():!1},e.KEYS=["conditionkind","conditionkind2"],e.VALUES=["conditionnum","conditionnum2"],e}();__reflect(Deblocking.prototype,"Deblocking"),window.Deblocking=Deblocking;var EntityManager=function(e){function t(){var t=e.call(this)||this;return t.entityList={},t.distances=[],t.listCount=[],MessageCenter.addListener(UserFb.ins().postGuanKaIdChange,t.updateEncounter,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.updateEncounter=function(){},t.prototype.resetRole=function(){for(var e=SubRoles.ins().subRolesLen,t=0;e>t;t++){var i=SubRoles.ins().getSubRoleByIndex(t);this.getEntityByHandle(i.handle)||(i.setPos(Const.PosToPixel(DropHelp.tempDropPoint.x),Const.PosToPixel(DropHelp.tempDropPoint.y)),GameLogic.ins().createEntityByModel(i))}},t.prototype.isMySubRole=function(e){for(var t=SubRoles.ins().subRolesLen,i=0;t>i;i++)if(SubRoles.ins().getSubRoleByIndex(i).handle==e)return!0;return!1},t.prototype.addList=function(e){e.infoModel.handle||(e.infoModel.handle=e.hashCode),this.entityList[e.infoModel.handle]=e;var t=this.listCount[e.team]||0;this.listCount[e.team]=++t},t.prototype.IsHideMap=function(){return GameMap.fbType==UserFb.FB_TYPE_ZHUANSHENGBOSS?!0:GameMap.fbType==UserFb.FB_TYPE_WORLDBOSS?!0:GameMap.fubenID==UserFb.FB_ID_TYPE_WAR?!0:!1},t.prototype.createEntity=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];switch(e.type){case EntityType.Role:case EntityType.LadderPlayer:var s=e;GameMap.IsTeamFb()?s.team=Team.My:e.masterHandle&&e.masterHandle==GameLogic.ins().actorModel.handle?s.team=Team.My:s.team=Team.WillEntity;var n=ObjectPool.ins().pop("CharRole");if(n.substituteImg.visible=!0,n.scaleX=n.scaleY=.8,s.team==Team.My){var r=SubRoles.ins().getSubRoleByIndex(s.roleID);r&&(s=r.mergeData(s))}if(n.setCharName(s.guildAndName),n.setElementImg(s.attrElementMianType),n.infoModel=s,GameMap.IsGuildWar()?n.isMy(s.guildID==GameGlobal.actorModel.guildID):n.isMy(n.team==Team.My),n.x=s.x,n.y=s.y,n.updateBlood(!0),n.m_LoadResFoce=!1,n.team==Team.My&&(GameLogic.ins().postHpChange(),GameLogic.ins().postMpChange()),this.addList(n),newAI.ins().add(n),this.IsHideMap()&&s.team!=Team.My){if(this.isHideOther)return null;if(this.countShowNum()>t.MAX_SHOW_NUM)return null}return n.m_LoadResFoce=!0,n.updateModel(),n.team==Team.My&&GameLogic.ins().postMoveCamera(),OtherAIModel.getInstance.creatorAIRole(),n.AI_STATE=AI_State.Stand,MessageCenter.ins().dispatch(MessageDef.CREATE_CHARO_MSG),n;case EntityType.Pet:case EntityType.Monster:e.masterHandle&&0!=e.masterHandle?this.isMySubRole(e.masterHandle)?e.team=Team.My:e.team=Team.WillEntity:e.team=Team.Monster;var a=ObjectPool.ins().pop("CharMonster");if(a.substituteImg.visible=!0,a.scaleX=a.scaleY=.8,a.infoModel=e,a.x=e.x,a.y=e.y,a._dir=3,a.updateBlood(!0),a.setCharName(e.name+" lv"+e.lv),e.attrElementMianType||e.setElementByConfig(),a.setElementImg(e.attrElementMianType),a.initBody(e.avatarFileName),-1!=e.avatarFileName.indexOf("monster20026")&&egret.log(e.avatarFileName),a.m_LoadResFoce=!1,a.isMy(e.team==Team.My),this.addList(a),newAI.ins().add(a),e.teamId=a.infoModel.handle,this.IsHideMap()&&(a.team==Team.My||a.team==Team.WillEntity)){if(this.isHideOther)return null;if(this.countShowNum()>t.MAX_SHOW_NUM)return null}if(a.m_LoadResFoce=!0,1==e.monstersType&&a.setFootRing(CharMonster.FOOT_RING_TYPE_LEVEL_BOSS),a.infoModel.isPet){var l=GlobalConfig.ins("PetConfig");for(var h in l){var c=l[h];c.monsterId==a.infoModel.configID&&(a.infoModel.summonSkillId=c.skill[0])}}return a.AI_STATE=AI_State.Stand,MessageCenter.ins().dispatch(MessageDef.CREATE_CHARO_MSG),a;case EntityType.Encounter:break;case EntityType.WillDummy:var s=e;s.team=Team.My;var n=ObjectPool.ins().pop("CharRole");if(n.scaleX=n.scaleY=.8,n.setCharName(s.guildAndName),n.setElementImg(s.attrElementMianType),n.infoModel=s,GameMap.IsGuildWar()?n.isMy(s.guildID==GameGlobal.actorModel.guildID):n.isMy(n.team==Team.My),n.x=s.x,n.y=s.y,n.updateBlood(!0),n.m_LoadResFoce=!1,n.team==Team.My&&(GameLogic.ins().postHpChange(),GameLogic.ins().postMpChange()),this.IsHideMap()&&s.team!=Team.My){if(this.isHideOther)return null;if(this.countShowNum()>t.MAX_SHOW_NUM)return null}return n.m_LoadResFoce=!0,n.updateModel(),n.AI_STATE=AI_State.Stand,n;case EntityType.WillDummyMonster:e.team=Team.Monster;var a=ObjectPool.ins().pop("CharMonster");if(a.scaleX=a.scaleY=.8,a.infoModel=e,a.x=e.x,a.y=e.y,a.updateBlood(!0),a.isMy(!1),a.setCharName(e.name+" lv"+e.lv),e.attrElementMianType||e.setElementByConfig(),a.setElementImg(e.attrElementMianType),a.initBody(e.avatarFileName),-1!=e.avatarFileName.indexOf("monster20026")&&egret.log(e.avatarFileName),a.m_LoadResFoce=!1,this.IsHideMap()&&(a.team==Team.My||a.team==Team.WillEntity)){if(this.isHideOther)return null;if(this.countShowNum()>t.MAX_SHOW_NUM)return null}return a.m_LoadResFoce=!0,a.AI_STATE=AI_State.Stand,a;case EntityType.WillBoss:var a=ObjectPool.ins().pop("CharMonster");return a.scaleX=a.scaleY=.8,a.infoModel=e,a.x=e.x,a.y=e.y,a.updateBlood(!0),a.setCharName(e.name+" lv"+e.lv),e.attrElementMianType||e.setElementByConfig(),a.setElementImg(e.attrElementMianType),a.initBody(e.avatarFileName),this.removeWillBoss(),this.willBoss=a,this.willBoss.touchEnabled=!0,this.willBoss.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),a.AI_STATE=AI_State.Stand,a;case EntityType.WillBossMonster:e.team=Team.WillBoss;var a=ObjectPool.ins().pop("CharMonster");return a.scaleX=a.scaleY=.8,a.infoModel=e,a.x=e.x,a.y=e.y,a.updateBlood(!0),a.setCharName(e.name+" lv"+e.lv),a.setElementImg(e.attrElementMianType),a.initBody(e.avatarFileName),a.isMy(!1),e.handle||(e.handle=a.hashCode),this.addList(a),newAI.ins().add(a),a.AI_STATE=AI_State.Stand,a}return null},t.prototype.onTouchBegin=function(e){return this.getTeamCount(Team.WillBoss)>0?void UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st101822+"|"):0!=GameMap.fubenID?void UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st100545+"|"):(e.stopPropagation(),newAI.ins().stop(),DropHelp.clearDrop(),this.removeAllEnemy(),OtherAIModel.getInstance.releaseAll(),this.willBoss.infoModel.type=EntityType.WillBossMonster,GameLogic.ins().createEntityByModel(this.willBoss.infoModel),this.removeWillBoss(),void newAI.ins().start())},t.prototype.removeWillBoss=function(){this.willBoss&&(this.willBoss.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.willBoss.parent&&DisplayUtils.dispose(this.willBoss),this.willBoss=null)},t.prototype.removeAll=function(){for(var e in this.entityList)this.removeByHandle(Number(e),!0,!0);this.removeWillBoss(),this.entityList={},OtherAIModel.getInstance.releaseAll()},t.prototype.removeAllEnemy=function(){for(var e in this.entityList)newAI.IsMyTeam(this.entityList[e].team)?(this.entityList[e].stopMove(),this.entityList[e].atking=!1,this.entityList[e].playAction(EntityAction.STAND),this.entityList[e].AI_STATE=AI_State.Stand,newAI.ins().add(this.entityList[e])):this.removeByHandle(Number(e))},t.prototype.hideOtherEntity=function(e){this.isHideOther=e;for(var t in this.entityList)null!=this.entityList[t]&&this.entityList[t].team==Team.WillEntity&&(e?null!=this.entityList[t].parent&&DisplayUtils.removeFromParent(this.entityList[t]):null==this.entityList[t].parent&&GameLogic.ins().addEntity(this.entityList[t]))},t.prototype.removeByHandle=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!1);var o=this.entityList[e];if(o){var s=this.entityList[e];s&&s.stopMove(),delete this.entityList[e];var n=this.listCount[o.team]||0;this.listCount[o.team]=--n,newAI.ins().remove(o),t&&DropHelp.setTempDropPoint(Const.PixelToPos(o.x),Const.PixelToPos(o.y)),DisplayUtils.dispose(o),o=null}},t.prototype.RemoveFromList=function(e){var t=this.entityList[e];return t?void delete this.entityList[e]:void console.warn("entitymanager.removebyhandle entity is null ["+e+"]")},t.prototype.getEntityByHandle=function(e){return this.entityList[e]},t.prototype.getMainRole=function(e){return this.getEntityByHandle(SubRoles.ins().getSubRoleByIndex(e).handle)},t.prototype.getNoDieRoleIndex=function(){for(var e,i=SubRoles.ins().subRolesLen,o=0;i>o;o++)if(e=t.ins().getMainRole(o))return o;return-1},t.prototype.GetRoles=function(){for(var e=[],i=0,o=SubRoles.ins().subRolesLen;o>i;i++){var s=t.ins().getMainRole(i);s&&e.push(s)}return e},t.prototype.getRolesList=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!0);var i,o=[],s="",n={};for(var r in this.entityList)if(i=this.entityList[r],i&&i instanceof CharRole){if(s=i.infoModel.name,s==GameLogic.ins().actorModel.name&&!e)continue;if(s!=GameLogic.ins().actorModel.name&&!t)continue;null==n[s]&&(n[s]=[]),n[s].push(i)}for(r in n)o[o.length]=n[r];return o},t.prototype.getMyBaseRole=function(){for(var e in this.entityList){var t=this.entityList[e];if(t&&t instanceof CharRole){var i=t.infoModel.name;if(i==GameLogic.ins().actorModel.name&&0==t.infoModel.roleID)return t}}return null},t.prototype.getMyRoleList=function(){var e=[];for(var t in this.entityList){var i=this.entityList[t];if(i&&i instanceof CharRole){var o=i.infoModel.name;o==GameLogic.ins().actorModel.name&&e.push(i)}}return e},t.prototype.getMJRolesList=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!0);var i,o=[],s="",n={};for(var r in this.entityList)if(i=this.entityList[r],i&&i instanceof CharRole){if(s=i.infoModel.name,s==GameLogic.ins().actorModel.name&&i.infoModel.roleID>=0&&!e)continue;if(s==GameLogic.ins().actorModel.name&&i.infoModel.roleID<0&&!t)continue;null==n[s]&&(n[s]=[]),n[s].push(i)}for(r in n)o[o.length]=n[r];return o},t.prototype.getMonstersList=function(){var e,t=[];for(var i in this.entityList)e=this.entityList[i],e&&e instanceof CharMonster&&t.push(e);return t},t.prototype.GetRoleCount=function(){for(var e=0,t=0,i=SubRoles.ins().subRolesLen;i>t;t++)null!=this.entityList[SubRoles.ins().getSubRoleByIndex(t).handle]&&++e;return e},t.prototype.CanUseHeji=function(){return GameLogic.ins().actorModel.level>=20},t.prototype.getNoDieRole=function(){for(var e,i=SubRoles.ins().subRolesLen,o=0;i>o;o++)if(e=t.ins().getMainRole(o))return e;return null},t.prototype.getTeamCount=function(e){return this.listCount[e]||0},t.prototype.checkCount=function(e,t,i){void 0===i&&(i=1);var o=0;for(var s in this.entityList){var n=this.entityList[s];if(n.team!=e.team&&MathUtils.getDistance(e.x,e.y,n.x,n.y)<=t*GameMap.CELL_SIZE&&(o++,o>=i))break}return o>=i},t.prototype.checkCanAddBlood=function(e){var t=!1;for(var i in this.entityList)this.entityList[i].team==e&&this.entityList[i].isCanAddBlood&&(t=!0);return t},t.prototype.screeningTargetByPos=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=Number.MAX_VALUE);var o=MathUtils.getDistance;this.distances.length=0;var s;if(e.infoModel.type==EntityType.WillDummy||e.infoModel.type==EntityType.WillDummyMonster)for(var n=OtherAIModel.getInstance.aiMonsterList.values.concat(OtherAIModel.getInstance.aiRoleList.values),r=0;r<n.length;r++){var a=n[r];a.infoModel&&(e.team!=Team.PASSERBY||a.team!=Team.My)&&(e.team!=Team.My||a.team!=Team.PASSERBY)&&(t&&a.team!=e.team||(t||a.team!=e.team)&&(a instanceof CharRole||a.team==Team.Monster||a.team==Team.WillBoss)&&a.AI_STATE!=AI_State.Die&&a.team!=Team.NotAtk&&(s=o(e.x,e.y,a.x,a.y),s>i*GameMap.CELL_SIZE||this.distances.push({priority:s,target:a})))}else{var l=this.entityList;for(var h in l){var a=l[h];a.infoModel&&(e.team!=Team.PASSERBY||a.team!=Team.My)&&(e.team!=Team.My||a.team!=Team.PASSERBY)&&(t&&a.team!=e.team||(t||a.team!=e.team)&&(a instanceof CharRole||a.team==Team.Monster||a.team==Team.WillBoss)&&a.AI_STATE!=AI_State.Die&&a.team!=Team.NotAtk&&(s=o(e.x,e.y,a.x,a.y),s>i*GameMap.CELL_SIZE||this.distances.push({priority:s,target:a})))}}this.distances.sort(this.sortFunc);for(var c=[],u=0;u<this.distances.length;u++)c[u]=this.distances[u].target;return c},t.prototype.sortFunc=function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0},t.prototype.getEntityBymasterhHandle=function(e){for(var t in this.entityList){var i=this.entityList[t];if(i.infoModel&&i.infoModel.masterHandle&&i.infoModel.masterHandle==e)return i}return null},t.prototype.showHideSomeOne=function(e){this.hideByHandle(e);for(var t in this.entityList){var i=this.entityList[t];i.parent||i.infoModel.team!=Team.WillEntity||!i.infoModel.masterHandle||i.infoModel.masterHandle==e||GameLogic.ins().createEntityByModel(i.infoModel)}},t.prototype.hideByHandle=function(e){var i=0;if(!(this.countShowNum()<t.MAX_SHOW_NUM))for(var o in this.entityList){var s=this.entityList[o];if(s.parent&&s.infoModel.team==Team.WillEntity&&s.infoModel.masterHandle&&!s.infoModel.masterHandle==e){if(i>3)break;++i,DisplayUtils.removeFromParent(s)}}},t.prototype.countShowNum=function(){var e=0;for(var t in this.entityList){var i=this.entityList[t];i&&i.parent&&i.infoModel&&i.infoModel.masterHandle&&i.infoModel.masterHandle!=GameGlobal.actorModel.handle&&(egret.is(i.infoModel,"Role")||GlobalConfig.jifengTiaoyueLg.st101823==i.infoModel.name||i.infoModel.avatarFileName==SkillConst.MOON_SOUL_RESOURCE)&&++e}return e},t.prototype.randomGetMonster=function(){for(var e in this.entityList)if(this.entityList[e].team!=Team.My)return this.entityList[e]},t.prototype.getPet=function(){var e=[];for(var t in this.entityList)this.entityList[t].team==Team.My&&3==this.entityList[t].monsterType&&e.push(this.entityList[t]);return e},t.prototype.checkHaveEnemy=function(){var e=this.randomGetMonster();return e?!0:!1},t.MAX_SHOW_NUM=10,t}(BaseClass);__reflect(EntityManager.prototype,"EntityManager"),window.EntityManager=EntityManager;var TPS=function(e){function t(){var t=e.call(this)||this,i=egret.setTimeout(function(){egret.clearTimeout(i)},t,5e3);return t}return __extends(t,e),t.prototype.initUI=function(){var e=new egret.Shape;e.graphics.beginFill(15,.5),e.graphics.drawRect(0,420,400,340),e.graphics.endFill(),this.addChild(e),this.Game_Bg=new eui.Label,this.Game_Bg.x=10,this.Game_Bg.y=430,this.addChild(this.Game_Bg),this.Game_Main=new eui.Label,this.Game_Main.x=10,this.Game_Main.y=460,this.addChild(this.Game_Main),this.UI_HUD=new eui.Label,this.UI_HUD.x=10,this.UI_HUD.y=490,this.addChild(this.UI_HUD),this.UI_USER_INFO=new eui.Label,this.UI_USER_INFO.x=10,this.UI_USER_INFO.y=520,this.addChild(this.UI_USER_INFO),this.UI_Main=new eui.Label,this.UI_Main.x=10,this.UI_Main.y=550,this.addChild(this.UI_Main),this.UI_NAVIGATION=new eui.Label,this.UI_NAVIGATION.x=10,this.UI_NAVIGATION.y=580,this.addChild(this.UI_NAVIGATION),this.UI_Main_2=new eui.Label,this.UI_Main_2.x=10,this.UI_Main_2.y=610,this.addChild(this.UI_Main_2),this.UI_Popup=new eui.Label,this.UI_Popup.x=10,this.UI_Popup.y=640,this.addChild(this.UI_Popup),this.UI_Tips=new eui.Label,this.UI_Tips.x=10,this.UI_Tips.y=670,this.addChild(this.UI_Tips)},t.prototype.update=function(){this.resList=[];var e=this.calculateTexture(LayerManager.Game_Bg);this.Game_Bg.textFlow=[{text:"游戏地图:",style:{textColor:16777215,size:18}},{text:"Game_Bg:",style:{textColor:16282482,size:18}},{text:"纹理数量:"+e.count,style:{textColor:65280,size:18}},{text:"内存占用:"+e.total,style:{textColor:3407871,size:18}}],e=this.calculateTexture(LayerManager.Game_Main),this.Game_Main.textFlow=[{text:"游戏场景:",style:{textColor:16777215,size:18}},{text:"Game_Main:",style:{textColor:16282482,size:18}},{text:"纹理数量:"+e.count,style:{textColor:65280,size:18}},{text:"内存占用:"+e.total,style:{textColor:3407871,size:18}}],e=this.calculateTexture(LayerManager.UI_HUD),this.UI_HUD.textFlow=[{text:"游戏场景:",style:{textColor:16777215,size:18}},{text:"UI_HUD:",style:{textColor:16282482,size:18}},{text:"纹理数量:"+e.count,style:{textColor:65280,size:18}},{text:"内存占用:"+e.total,style:{textColor:3407871,size:18}}],e=this.calculateTexture(LayerManager.UI_USER_INFO),this.UI_USER_INFO.textFlow=[{text:"游戏场景:",style:{textColor:16777215,size:18}},{text:"USER_INFO:",style:{textColor:16282482,size:18}},{text:"纹理数量:"+e.count,style:{textColor:65280,size:18}},{text:"内存占用:"+e.total,style:{textColor:3407871,size:18}}],e=this.calculateTexture(LayerManager.UI_Main),this.UI_Main.textFlow=[{text:"游戏场景:",style:{textColor:16777215,size:18}},{text:"UI_Main:",style:{textColor:16282482,size:18}},{text:"纹理数量:"+e.count,style:{textColor:65280,size:18}},{text:"内存占用:"+e.total,style:{textColor:3407871,size:18}}],e=this.calculateTexture(LayerManager.UI_NAVIGATION),this.UI_NAVIGATION.textFlow=[{text:"游戏导航:",style:{textColor:16777215,size:18}},{text:"NAVIGATION:",style:{textColor:16282482,size:18}},{text:"纹理数量:"+e.count,style:{textColor:65280,size:18}},{text:"内存占用:"+e.total,style:{textColor:3407871,size:18}}],e=this.calculateTexture(LayerManager.UI_Main_2),this.UI_Main_2.textFlow=[{text:"游戏场景:",style:{textColor:16777215,size:18}},{text:"Main_2:",style:{textColor:16282482,size:18}},{text:"纹理数量:"+e.count,style:{textColor:65280,size:18}},{text:"内存占用:"+e.total,style:{textColor:3407871,size:18}}],e=this.calculateTexture(LayerManager.UI_Popup),this.UI_Popup.textFlow=[{text:"游戏场景:",style:{textColor:16777215,size:18}},{text:"Popup:",style:{textColor:16282482,size:18}},{text:"纹理数量:"+e.count,style:{textColor:65280,size:18}},{text:"内存占用:"+e.total,style:{textColor:3407871,size:18}}],e=this.calculateTexture(LayerManager.UI_Tips),this.UI_Tips.textFlow=[{text:"游戏场景:",style:{textColor:16777215,size:18}},{text:"Tips:",style:{textColor:16282482,size:18}},{text:"纹理数量:"+e.count,style:{textColor:65280,size:18}},{text:"内存占用:"+e.total,style:{textColor:3407871,size:18}}]},t.prototype.calculateTexture=function(e){for(var t,i=e.numChildren,o=0,s={count:0,total:0},n=0;i>o;){if(t=e.getChildAt(o),t instanceof eui.Image)s.count++,n=Math.ceil(t.width*t.height*4/1024/1024),s.total+=n;else if(t instanceof egret.DisplayObjectContainer){var r=this.forObj(t);s.count+=r.count,s.total+=r.total}o++}return s},t.prototype.hasRes=function(e){for(var t in this.resList)if(e==t)return!0;return!1},t.prototype.forObj=function(e){for(var t,i=e.numChildren,o=0,s={count:0,total:0},n=0,r=GameMap.getFileName()+"_jpg";i>o;){if(t=e.getChildAt(o),t instanceof eui.Image)null!=t.source&&(t.source.toString()==r||this.hasRes(t.source.toString())||(this.resList.push(t.source.toString()),s.count++,n=Math.ceil(e.width*e.height*4/1024/1024),s.total+=n));else if(t instanceof egret.DisplayObjectContainer){var a=this.forObj(t);s.count+=a.count,s.total+=a.total}o++}return s},t}(egret.DisplayObjectContainer);__reflect(TPS.prototype,"TPS"),window.TPS=TPS;var EntityType;!function(e){e[e.Actor=0]="Actor",e[e.Role=1]="Role",e[e.Monster=2]="Monster",e[e.Encounter=3]="Encounter",e[e.LadderPlayer=4]="LadderPlayer",e[e.WillBoss=5]="WillBoss",e[e.WillBossMonster=6]="WillBossMonster",e[e.Pet=7]="Pet",e[e.WillDummy=100]="WillDummy",e[e.WillDummyMonster=101]="WillDummyMonster"}(EntityType||(EntityType={}));var GameString=function(){function e(){}return e.GetLvName=function(e,t){return e>0?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101443,[e,t]):LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[t])},e.GetThirdPerson=function(e){return 0==e?GlobalConfig.jifengTiaoyueLg.st101444:GlobalConfig.jifengTiaoyueLg.st101445},e}();__reflect(GameString.prototype,"GameString"),window.GameString=GameString;var RedPointInfo=function(){function e(){this.id=0,this.state=[]}return e.prototype.parse=function(e){e&&(this.id=e.id,this.state=e.state)},e}();__reflect(RedPointInfo.prototype,"RedPointInfo"),window.RedPointInfo=RedPointInfo;var LanguageString=function(){function e(){}return e.jifengTiaoyueCh=function(e,t){if(null!=e){for(var i=e.split("}"),o="",s=0;s<i.length-1;s++)i[s]=i[s].substring(0,i[s].indexOf("{"))+[t[s]],o+=i[s];var n=o+e.split("}")[e.split("}").length-1];return n}},e}();__reflect(LanguageString.prototype,"LanguageString"),window.LanguageString=LanguageString;var MoneyManger=function(){function e(){}return e.MoneyConstToSource=function(e){var t=GlobalConfig.ins("LanResourcesConfig")[e];return t?t.icon:""},e.MoneyConstToName=function(e){var t=GlobalConfig.ins("LanResourcesConfig")[e];return t?t.name:""},e.MoneyConstToQuality=function(e){var t=GlobalConfig.ins("LanResourcesConfig")[e];return t?t.useLevel:1},e}();__reflect(MoneyManger.prototype,"MoneyManger");var MoneyConst;!function(e){e[e.exp=0]="exp",e[e.gold=1]="gold",e[e.yuanbao=2]="yuanbao",e[e.fame=3]="fame",e[e.soul=4]="soul",e[e.GuildContrib=5]="GuildContrib",e[e.GuildFund=6]="GuildFund",e[e.FEATS=7]="FEATS",e[e.RedNameScore=8]="RedNameScore",e[e.PRESTIGE=10]="PRESTIGE",e[e.XIUWEI=11]="XIUWEI",e[e.HONOR=12]="HONOR",e[e.ZHENQI=14]="ZHENQI",e[e.VIPEXP=15]="VIPEXP",e[e.MiJing=16]="MiJing",e[e.sharecoin=17]="sharecoin",e[e.RECHARGE=99]="RECHARGE",e[e.PETCREDIT=20]="PETCREDIT",e[e.RIDECREDIT=21]="RIDECREDIT",e[e.CROSSCREDIT=22]="CROSSCREDIT",e[e.ARTIFACTCREDIT=23]="ARTIFACTCREDIT",e[e.WARORDER=24]="WARORDER",e[e.COUPON=25]="COUPON"}(MoneyConst||(MoneyConst={}));var __ref_field__=EquipPos,ResDataPath=function(){function e(){}return e.GetDefaultBodyName=function(e,t){var i=GlobalConfig.ins("roleAppearanceConfig");switch(t){case 0:return i[e].initialBody;case 1:return i[e].initialWeapon;case 2:return i[e].initialMounts}},e.GetMineNameByType=function(e){return"comp_64_64_0"+(e+4)+"_png"},e.GetDartCarNameByType=function(e){return"comp_63_60_0"+e+"_png"},e.GetDartCarBodyByType=function(t){return e.ROOT_MOVIE+"eff/chedui0"+t},e.GetCaiQuan=function(t){return e.ROOT_MOVIE+"eff/caiquan0"+t},e.GetMapThumbnailPath=function(e){return Const.RES_URL+"resource/assets/map/"+e+"/small.jpg"},e.getMapIamge=function(e){return Const.RES_URL+"resource/assets/mapTest/"+e+"-min.jpg"},e.GetMapPreviewPath=function(e){return Const.RES_URL+"resource/assets/map/"+e+"/pk_preview.jpg"},e.GetMapData=function(e){return"map/"+e+"/mdata.txt"},e.GetMapPath=function(e,t,i){return Const.RES_URL+"resource/assets/map/"+e+"/image/"+i+"_"+t+".jpg"},e.GetBodyName01=function(e,t){return e+"_"+t},e.GetWeaponName01=function(e,t){return e+"_"+t},e.GetItemFullName=function(e){return null==e?"":e+"_png"},e.GetLvName=function(e,t){return GameString.GetLvName(e,t)},e.GetItemQualityName=function(t){return e.ITEM_BG_QUALITY[t]},e.GetItemQualityEffeName=function(e){return"quality_0"+e},e.GetHeadMiniImgName=function(e,t){return void 0===t&&(t=null),null==t&&(t=e%10,e=Math.floor(e/10)),"role_01_"+(e||1)+"_"+(t||0)+"_png"},e.GetElementImgName=function(e){return e?"element_"+e+"_png":""},e.GetHeadMiniImgNameById=function(e){return this.GetHeadMiniImgName(Math.floor(e%100*.1),e%10)},e.GetHeadMiniImgName2=function(e,t){return"role_01_"+(e||1)+"_"+(t||0)+"_png"},e.GetHeadMiniImgName2ById=function(e){return this.GetHeadMiniImgName2(Math.floor(e%100*.1),e%10)},e.GetHeadImgName=function(e,t){return"role_03_"+e+"_"+t+"_png"},e.getBossHeadImage=function(t){return e.ROOT+"ress/bossHead/"+t+".png"},e.GetEquipDefaultIcon=function(t){return e._EquipDefaultIcon[t]},e.GetEquipDefaultPIcon=function(t){return e._EquipDefaultPIcon[t]},e.GetAssets=function(t){return e.ROOT+t+".png"},e.GetMoviePath=function(t,i){return e.ROOT_MOVIE+i+"/"+t},e.GetMonsterBodyPath=function(t){return e.ROOT_MOVIE+"monster/"+t},e.GetMountBodyPath=function(t){return e.ROOT_MOVIE+"mounts/"+t},e.GetRoleBodyPath=function(t){return e.ROOT_MOVIE+"body/"+t},e.GetSkillPathByID=function(t){t&&"undefined"!=t||egret.log("技能id不存在:"+t);var i=e.ROOT_MOVIE+"skillEff/skill"+t;return SdkMgr.isWxGame()&&(i=e.ROOT_MOVIE+"skillEff_wx/skill"+t),i},e.GetSkillPath=function(t){t||egret.log("技能特效名字不存在:"+t);var i=e.ROOT_MOVIE+"skillEff/"+t;return SdkMgr.isWxGame()&&(i=e.ROOT_MOVIE+"skillEff_wx/"+t),i},e.GetUIEffePath=function(t){return e.ROOT_MOVIE+"uiEffe/"+t},e.GetRoleWingPath=function(t){return e.ROOT_MOVIE+"wing/"+t},e.GetPathBuyType=function(e,t){switch(t){case ResAnimType.TYPE1:return this.GetUIEffePath(e);case ResAnimType.TYPE2:return this.GetMonsterBodyPath(e);case ResAnimType.TYPE3:return this.GetMountBodyPath(e)}},e.ROOT=Const.RES_URL+"resource/assets/",e.ROOT_MOVIE=e.ROOT+"movie/",e.ROOT_MAP=e.ROOT+"map/",e.EMPTY_STR="",e.DEFAULT_QUALITY="pf_black_01_png",e.MINER=e.ROOT_MOVIE+"eff/kuanggong",e.MINE_ROB_EFFE=e.ROOT_MOVIE+"eff/kelveduo",e.ITEM_BG_QUALITY=["pf_black_01_png","pf_green_01_png","pf_blue_01_png","pf_purple_01_png","pf_orange_01_png","pf_red_01_png"],e._EquipDefaultIcon=(_a={},_a[EquipPos.WEAPON]="propIcon_021_png",_a[EquipPos.HEAD]="propIcon_019_png",_a[EquipPos.CLOTHES]="propIcon_007_png",_a[EquipPos.NECKLACE]="propIcon_009_png",_a[EquipPos.BRACELET1]="propIcon_015_png",_a[EquipPos.BRACELET2]="propIcon_017_png",_a[EquipPos.RING1]="propIcon_011_png",_a[EquipPos.RING2]="propIcon_013_png",_a),e._EquipDefaultPIcon=(_b={},_b[EquipPos.WEAPON]="propIcon_022_png",_b[EquipPos.HEAD]="propIcon_020_png",_b[EquipPos.CLOTHES]="propIcon_008_png",_b[EquipPos.NECKLACE]="propIcon_010_png",_b[EquipPos.BRACELET1]="propIcon_016_png",_b[EquipPos.BRACELET2]="propIcon_018_png",_b[EquipPos.RING1]="propIcon_012_png",_b[EquipPos.RING2]="propIcon_014_png",_b),e}();__reflect(ResDataPath.prototype,"ResDataPath");var ResAnimType;!function(e){e[e.TYPE1=1]="TYPE1",e[e.TYPE2=2]="TYPE2",e[e.TYPE3=3]="TYPE3",e[e.TYPE4=4]="TYPE4"}(ResAnimType||(ResAnimType={})),window.ResAnimType=ResAnimType,window.ResDataPath=ResDataPath;var _a,_b,ResInfo=function(){function e(){this.useTimer=0,this.filename=""}return e.prototype.dispose=function(){this.useTimer=0,this.texture&&this.texture.dispose(),this.texture=null,this.mcDataSet=null,RES.destroyRes(this.texturePath),this.dataSetPath=null,this.texturePath=null,this.filename=null},e}();__reflect(ResInfo.prototype,"ResInfo"),window.ResInfo=ResInfo;var ResMgr=function(e){function t(){var t=e.call(this)||this;return t.resList={},t.objList={},t.mapList=[],t.monsterList=[],t.wingList=[],t.weaponList=[],t.roleList=[],t.textureJsonDataList={},t.loadingList={},t.pool={},t.cacheNum=6,t._isLog=!1,t.configList=[],t.loadObject=null,t.loading=!1,t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.clearConfig=function(){},t.prototype.getCache=function(e){return this.pool[e]},t.prototype.setCache=function(e,t){this.pool[e]=t},t.prototype.delCache=function(e){delete this.pool[e]},t.prototype.testCheck=function(){return},t.prototype.saveLoadingRes=function(e){this.loadingList[e]=e},t.prototype.clearLoadingRes=function(){for(var e in this.loadingList)if(this._isLog){var t=RES.destroyRes(e);delete this.loadingList[e],egret.log("释放登录资源["+e+"]="+t)}else RES.destroyRes(e),delete this.loadingList[e];RES.destroyRes("createrole")&&console.log("destroty createrole res"),GameLogic.ins().sendReadyComple()},t.prototype.saveRole=function(e,t){var i=this.hasRoleRes(t);if(-1!=i)this.roleList[i].time=egret.getTimer(),this.roleList[i][e]=e;else{var o={time:egret.getTimer(),roleName:t};if(o[e]=e,this.roleList.push(o),this.roleList.length>7){this.roleList.sort(this.sort);var s=this.roleList.pop();this._isLog&&egret.log("销毁："+s.roleName),this.clear(s,"roleName")}}},t.prototype.saveWing=function(e,t){var i=this.hasWingRes(t);if(-1!=i)this.wingList[i].time=egret.getTimer(),this.wingList[i][e]=e;else{var o={time:egret.getTimer(),wingName:t};if(o[e]=e,this.wingList.push(o),this.wingList.length>this.cacheNum){this.wingList.sort(this.sort);var s=this.wingList.pop();this._isLog&&egret.log("销毁："+s.wingName),this.clear(s,"wingName")}}},t.prototype.saveWeapon=function(e,t){var i=this.hasWeaponRes(t);if(-1!=i)this.weaponList[i].time=egret.getTimer(),this.weaponList[i][e]=e;else{var o={time:egret.getTimer(),weaponName:t};if(o[e]=e,this.weaponList.push(o),this.weaponList.length>this.cacheNum){this.weaponList.sort(this.sort);var s=this.weaponList.pop();this._isLog&&egret.log("销毁："+s.weaponName),this.clear(s,"weaponName")}}},t.prototype.saveMonster=function(e,t){var i=this.hasMonsterRes(t);if(-1!=i)this.monsterList[i].time=egret.getTimer(),this.monsterList[i][e]=e;else{var o={time:egret.getTimer(),monsterName:t};if(o[e]=e,this.monsterList.push(o),this.monsterList.length>4){this.monsterList.sort(this.sort);var s=this.monsterList.pop();this._isLog&&egret.log("销毁："+s.monsterName),this.clearMonster(s)}}},t.prototype.memoryWarning=function(){for(egret.log("内存预警................"),this.monsterList.sort(this.sort);this.monsterList.length>2;){var e=this.monsterList.pop();this._isLog&&egret.log("销毁："+e.monsterName),this.clearMonster(e)}for(this.mapList.sort(this.sort);this.mapList.length>1;){var e=this.mapList.pop();this._isLog&&egret.log("销毁地图："+e.mapName),this.clearMap(e)}for(this.roleList.sort(this.sort);this.roleList.length>3;){var e=this.roleList.pop();this._isLog&&egret.log("销毁角色："+e.roleName),this.clear(e,"roleName")}for(this.weaponList.sort(this.sort);this.weaponList.length>3;){var e=this.weaponList.pop();this._isLog&&egret.log("销毁武器："+e.weaponName),this.clear(e,"weaponName")}for(this.wingList.sort(this.sort);this.wingList.length>3;){var e=this.wingList.pop();this._isLog&&egret.log("销毁翅膀："+e.wingName),this.clear(e,"wingName")}},t.prototype.hasMonsterRes=function(e){for(var t=this.monsterList.length,i=null,o=0;t>o;o++)if(i=this.monsterList[o],i.monsterName==e)return o;return-1},t.prototype.hasRoleRes=function(e){for(var t=this.roleList.length,i=null,o=0;t>o;o++)if(i=this.roleList[o],i.roleName==e)return o;return-1},t.prototype.hasWingRes=function(e){for(var t=this.wingList.length,i=null,o=0;t>o;o++)if(i=this.wingList[o],i.wingName==e)return o;return-1},t.prototype.hasWeaponRes=function(e){for(var t=this.weaponList.length,i=null,o=0;t>o;o++)if(i=this.weaponList[o],i.weaponName==e)return o;return-1},t.prototype.hasMapRes=function(e){for(var t=this.mapList.length,i=null,o=0;t>o;o++)if(i=this.mapList[o],i.mapName==e)return o;return-1},t.prototype.saveMap=function(e,t){var i=this.hasMapRes(e);if(-1!=i)this.mapList[i].time=egret.getTimer(),this.mapList[i][t]=t;else{var o={time:egret.getTimer(),mapName:e};if(this.mapList.push(o),o[t]=t,this.mapList.length>3){this.mapList.sort(this.sort);var s=this.mapList.pop();this._isLog&&egret.log("销毁地图："+s.mapName),this.clearMap(s)}}},t.prototype.sort=function(e,t){return t.time-e.time},t.prototype.clear=function(e,t){if(null!=e){var i=EntityManager.ins().getNoDieRole();if(i&&i.infoModel){var o=i._fileName,s=i._wingFileName,n=i._weaponFileName;if(e[t]==o||e[t]==s||e[t]==n)return void(e.time=egret.getTimer())}for(var r in e)if("time"!=r&&r!=t){if(this._isLog){var a=RES.destroyRes(r+".png");egret.log("释放["+r+"]资源："+a.toString())}else RES.destroyRes(r+".png");this.delCache(r+".png")}}},t.prototype.clearMonster=function(e){if(null!=e){var t=GameMap.IsGuildCopy();for(var i in e)if("time"!=i&&"monsterName"!=i){if(t&&i.indexOf("monster20026")>=0){e.time=egret.getTimer(),this.monsterList.push(e);break}if(this._isLog){var o=RES.destroyRes(i+".png");egret.log("释放["+i+"]资源："+o.toString())}else RES.destroyRes(i+".png");this.delCache(i+".png")}}},t.prototype.clearMap=function(e){if(null!=e){var t=GameMap.getFileName();for(var i in e)if("time"!=i&&"mapName"!=i){if(i.indexOf(t)>=0)return;if(this._isLog){var o=RES.destroyRes(i);egret.log("释放["+i+"]地图资源："+o.toString())}else RES.destroyRes(i);this.delCache(i)}}},t.prototype.delRes=function(e){var i=t.ins().resList[e];delete t.ins().resList[e],i.dispose(),i=null},t.prototype.destroyRes=function(e){if(null==e)return void egret.log("资源回收失败");if(this._isLog){var t=RES.destroyRes(e,!1);egret.log("销毁资源："+e+"--->"+t)}else RES.destroyRes(e,!1)},t.prototype.destroyConfig=function(e,t){if(null!=e){var i=t-10,o=t+500,s=egret.getTimer(),n=!0;for(var r in e)if((e[r].cid<i||e[r].cid>o)&&(n=!1,this._isLog&&egret.log("删除数据：第"+e[r].cid+"关 "+e[r].desc),e[r]=null,delete e[r],egret.getTimer()-s>5))break;return n}},t.prototype.loadConfig=function(e,t){var i={groupName:e,onComplte:t};if(!(this.loadObject&&this.loadObject.groupName==e||this.hasLoaded(i))){if(this.configList.push(i),this.loading)return void egret.log("正在加载[ "+this.loadObject.groupName+" ]");
this.loading=!0,this.loadObject=this.configList.length?this.configList.pop():i,this.loadStart()}},t.prototype.hasLoaded=function(e){for(var t=0;t<this.configList.length;t++){var i=this.configList[t];if(i.groupName==e.groupName)return!0}return!1},t.prototype.loadStart=function(){this.loading=!0,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onConfigCompleteHandle,this),RES.loadGroup(this.loadObject.groupName)},t.prototype.onConfigLoadError=function(e){e.currentTarget;egret.log("target")},t.prototype.onConfigCompleteHandle=function(e){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onConfigCompleteHandle,this);e.currentTarget;this.loadObject.onComplte(e.groupName),this.loading=!1,this.configList.length&&(this.loadObject=this.configList.pop(),this.loadStart())},t}(BaseClass);__reflect(ResMgr.prototype,"ResMgr"),window.ResMgr=ResMgr;var SimpleTimeout=function(){function e(){this.m_Timer=null}return e.prototype.SetTimeout=function(e,t,i){this.ClearTimeOut(),egret.setTimeout(e,t,i)},e.prototype.ClearTimeOut=function(){this.m_Timer&&(egret.clearTimeout(this.m_Timer),this.m_Timer=null)},e}();__reflect(SimpleTimeout.prototype,"SimpleTimeout"),window.SimpleTimeout=SimpleTimeout;var Util=function(){function e(){}return e.GetClass=function(e){if(!e)return null;var t=e.__class__;return t?egret.getDefinitionByName(t):null},e}();__reflect(Util.prototype,"Util"),window.Util=Util;var DailyFubenConfig=function(){function e(){}return e.getPersonalBossFbIds=function(){var e=[];null==this.dailyFubenConfig&&(this.dailyFubenConfig=GlobalConfig.dailyFubenConfig);for(var t in this.dailyFubenConfig){var i=this.dailyFubenConfig[t];i&&i.bossId&&e.push(i)}return e},e.isContains=function(e){null==this.dailyFubenConfig&&(this.dailyFubenConfig=GlobalConfig.dailyFubenConfig);for(var t in this.dailyFubenConfig){var i=this.dailyFubenConfig[t];if(e==i)return!0}return!1},e.isCanChallenge=function(){for(var e,t,i=this.getPersonalBossFbIds(),o=i.length,s=0;o>s;s++)if(e=i[s],UserFb.ins().getFbDataById(e.id)&&(t=UserFb.ins().getFbDataById(e.id).getCount(),t>0))if(e.zsLevel>0){if(UserZs.ins().lv>=e.zsLevel)return!0}else if(GameLogic.ins().actorModel.level>=e.levelLimit)return!0;return!1},e}();__reflect(DailyFubenConfig.prototype,"DailyFubenConfig"),window.DailyFubenConfig=DailyFubenConfig;var GlobalConfig=function(){function e(){}return Object.defineProperty(e,"jifengTiaoyueLg",{get:function(){return e._languageConfig||(e._languageConfig=e.ins("multilingual")),e._languageConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"itemConfig",{get:function(){return null==e._itemConfig&&(e._itemConfig=e.ins("ItemConfig")),e._itemConfig},enumerable:!0,configurable:!0}),e.getGamePlayConfigByType=function(t){null==e.GamePlayConfig&&(e.GamePlayConfig=e.ins("GamePlayConfig"));var i,o=[];for(var s in e.GamePlayConfig)i=e.GamePlayConfig[s],i.type==t&&o.push(i);return o},e.hasEffAddSkill=function(t){if(null!=t){if(null==e._effAddConfig&&(e._effAddConfig=e.ins("AddOneConfig")),null==e._effAddConfig)return null;null==e.skillAddOneConfig&&(e.skillAddOneConfig=[]),e.skillAddOneConfig.forEach(function(e){return e.nId==t?e:void 0});var i;for(var o in e._effAddConfig)if(i=e._effAddConfig[o],i.typeID==EffectAddType.EFF_TYPE_SKILL&&i.nId==t)return e.skillAddOneConfig.push(i),i;return null}},Object.defineProperty(e,"smeltequipConfig",{get:function(){return null==e._smeltequipConfig&&(e._smeltequipConfig=e.ins("SmeltConfig")),e._smeltequipConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"equipPointResolveConfig",{get:function(){return null==e._equipPointResolveConfig&&(e._equipPointResolveConfig=e.ins("EquipPointResolveConfig")),e._equipPointResolveConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"monstersConfig",{get:function(){return null==e._monstersConfig&&(e._monstersConfig=e.ins("MonstersConfig")),e._monstersConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"equipConfig",{get:function(){return null==e._equipConfig&&(e._equipConfig=e.ins("EquipConfig")),e._equipConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"chaptersCommonConfig",{get:function(){return null==e._chaptersCommonConfig&&(e._chaptersCommonConfig=e.ins("ChaptersCommonConfig")),e._chaptersCommonConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"jingMaiLevelConfig",{get:function(){return null==e._jingMaiLevelConfig&&(e._jingMaiLevelConfig=e.ins("JingMaiLevelConfig")),e._jingMaiLevelConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"dailyFubenConfig",{get:function(){return null==e._dailyFubenConfig&&(e._dailyFubenConfig=e.ins("DailyFubenConfig")),e._dailyFubenConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clientGlobalConfig",{get:function(){return null==e._clientGlobalConfig&&(e._clientGlobalConfig=e.ins("ClientGlobalConfig")),e._clientGlobalConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"effectConfig",{get:function(){return null==e._effectConfig&&(e._effectConfig=e.ins("EffectConfig")),e._effectConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"guildfbconfig",{get:function(){return null==e._guildfbconfig&&(e._guildfbconfig=e.ins("guildfbconfig")),e._guildfbconfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"publicBossConfig",{get:function(){return null==e._publicBossConfig&&(e._publicBossConfig=e.ins("PublicBossConfig")),e._publicBossConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"kuafuBossConfig",{get:function(){return null==e._kuafuBossConfig&&(e._kuafuBossConfig=e.ins("KuafuBossConfig")),e._kuafuBossConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"robberfbconfig",{get:function(){return null==e._robberfbconfig&&(e._robberfbconfig=e.ins("robberfbconfig")),e._robberfbconfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"skillsConfig",{get:function(){return null==e._skillsConfig&&(e._skillsConfig=e.ins("SkillsConfig")),e._skillsConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"zhuanShengLevelConfig",{get:function(){return null==e._zhuanShengLevelConfig&&(e._zhuanShengLevelConfig=e.ins("ZhuanShengLevelConfig")),e._zhuanShengLevelConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"wingLevelConfig",{get:function(){return null==e._wingLevelConfig&&(e._wingLevelConfig=e.ins("WingLevelConfig")),e._wingLevelConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"fbChallengeConfig",{get:function(){return null==e._fbChallengeConfig&&(e._fbChallengeConfig=e.ins("FbChallengeConfig")),e._fbChallengeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"skillPowerConfig",{get:function(){return null==e._skillPowerConfig&&(e._skillPowerConfig=e.ins("SkillPowerConfig")),e._skillPowerConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"wingStarConfig",{get:function(){return null==e._wingStarConfig&&(e._wingStarConfig=e.ins("WingStarConfig")),e._wingStarConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"welfareConfig",{get:function(){return null==e._welfareConfig&&(e._welfareConfig=e.ins("WelfareConfig")),e._welfareConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"publicSpeRRConfig",{get:function(){return null==e._publicSpeRRConfig&&(e._publicSpeRRConfig=e.ins("PublicSpeRRConfig")),e._publicSpeRRConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"legendLevelupConfig",{get:function(){return null==e._legendLevelupConfig&&(e._legendLevelupConfig=e.ins("LegendLevelupConfig")),e._legendLevelupConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"longzhuangLevelConfig",{get:function(){return null==e._longzhuangLevelConfig&&(e._longzhuangLevelConfig=e.ins("LongzhuangLevelConfig")),e._longzhuangLevelConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"equipPointBasicConfig",{get:function(){return null==e._equipPointBasicConfig&&(e._equipPointBasicConfig=e.ins("EquipPointBasicConfig")),e._equipPointBasicConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"miJiSkillConfig",{get:function(){return null==e._miJiSkillConfig&&(e._miJiSkillConfig=e.ins("MiJiSkillConfig")),e._miJiSkillConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"miJiGridConfig",{get:function(){return null==e._miJiGridConfig&&(e._miJiGridConfig=e.ins("MiJiGridConfig")),e._miJiGridConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"meridianLevelConfig",{get:function(){return null==e._meridianLevelConfig&&(e._meridianLevelConfig=e.ins("MeridianLevelConfig")),e._meridianLevelConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"meridianStageConfig",{get:function(){return null==e._meridianStageConfig&&(e._meridianStageConfig=e.ins("MeridianStageConfig")),e._meridianStageConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"transferTalentConfig",{get:function(){return null==e._transferTalentConfig&&(e._transferTalentConfig=e.ins("TransferTalentConfig")),e._transferTalentConfig},enumerable:!0,configurable:!0}),e.ins=function(t){return e.config1&&e.config1[t]?e.config1[t]:e.config2&&e.config2[t]?e.config2[t]:e.config4&&e.config4[t]?e.config4[t]:e.config3&&e.config3[t]?e.config3[t]:e.config5&&e.config5[t]?e.config5[t]:e.config6&&e.config6[t]?e.config6[t]:e.config7&&e.config7[t]?e.config7[t]:e.config8&&e.config8[t]?e.config8[t]:e.config9&&e.config9[t]?e.config9[t]:e.config10&&e.config10[t]?e.config10[t]:null},Object.defineProperty(e,"share1Config",{get:function(){return null==e._share1Config&&(e._share1Config=e.ins("Share1Config")),e._share1Config},enumerable:!0,configurable:!0}),Object.defineProperty(e,"share2Config",{get:function(){return null==e._share2Config&&(e._share2Config=e.ins("Share2Config")),e._share2Config},enumerable:!0,configurable:!0}),Object.defineProperty(e,"share3Config",{get:function(){return null==e._share3Config&&(e._share3Config=e.ins("Share3Config")),e._share3Config},enumerable:!0,configurable:!0}),Object.defineProperty(e,"share4Config",{get:function(){return null==e._share4Config&&(e._share4Config=e.ins("Share4Config")),e._share4Config},enumerable:!0,configurable:!0}),Object.defineProperty(e,"share5Config",{get:function(){return null==e._share5Config&&(e._share5Config=e.ins("Share5Config")),e._share5Config},enumerable:!0,configurable:!0}),Object.defineProperty(e,"share6Config",{get:function(){return null==e._share6Config&&(e._share6Config=e.ins("Share6Config")),e._share6Config},enumerable:!0,configurable:!0}),Object.defineProperty(e,"share7Config",{get:function(){return null==e._share7Config&&(e._share7Config=e.ins("Share7Config")),e._share7Config},enumerable:!0,configurable:!0}),Object.defineProperty(e,"serverTips",{get:function(){return null==e._serverTips&&(e._serverTips=e.ins("ServerTips")),e._serverTips},enumerable:!0,configurable:!0}),Object.defineProperty(e,"fuwenLevelConfig",{get:function(){return null==e._fuwenLevelConfig&&(e._fuwenLevelConfig=e.ins("FuwenLevelConfig")),e._fuwenLevelConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"funcNoticeConfig",{get:function(){return null==e._funcNoticeConfig&&(e._funcNoticeConfig=e.ins("FuncNoticeConfig")),e._funcNoticeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"activityType302Config",{get:function(){return null==e._activityType302Config&&(e._activityType302Config=e.ins("ActivityType302Config")[302]),e._activityType302Config},enumerable:!0,configurable:!0}),Object.defineProperty(e,"zhuanShengValuePointConfig",{get:function(){return null==e._zhuanShengValuePointConfig&&(e._zhuanShengValuePointConfig=e.ins("ZhuanShengValuePointConfig")),e._zhuanShengValuePointConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"soundConfig",{get:function(){return null==e._soundConfig&&(e._soundConfig=e.ins("soundConfig")),e._soundConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"zhuangBanId",{get:function(){return null==e._zhuangBanId&&(e._zhuangBanId=e.ins("ZhuangBanId")),e._zhuangBanId},enumerable:!0,configurable:!0}),Object.defineProperty(e,"scenesConfig",{get:function(){return null==e._scenesConfig&&(e._scenesConfig=e.ins("ScenesConfig")),e._scenesConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"chaptersConfig",{get:function(){return null==e._chaptersConfig&&(e._chaptersConfig=e.ins("ChaptersConfig")),e._chaptersConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"activityType17Config",{get:function(){return null==e._activityType17Config&&(e._activityType17Config=e.ins("ActivityType17Config")),e._activityType17Config},enumerable:!0,configurable:!0}),Object.defineProperty(e,"activityType17AConfig",{get:function(){return null==e._activityType17AConfig&&(e._activityType17AConfig=e.ins("ActivityType17AConfig")),e._activityType17AConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"activityType17BConfig",{get:function(){return null==e._activityType17BConfig&&(e._activityType17BConfig=e.ins("ActivityType17BConfig")),e._activityType17BConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"activityType4Config",{get:function(){return null==e._activityType4Config&&(e._activityType4Config=e.ins("ActivityType4Config")),e._activityType4Config},enumerable:!0,configurable:!0}),Object.defineProperty(e,"activityType4AConfig",{get:function(){return null==e._activityType4AConfig&&(e._activityType4AConfig=e.ins("ActivityType4AConfig")),e._activityType4AConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"activityType4BConfig",{get:function(){return null==e._activityType4BConfig&&(e._activityType4BConfig=e.ins("ActivityType4BConfig")),e._activityType4BConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"activityConfig",{get:function(){return null==e._activityConfig&&(e._activityConfig=e.ins("ActivityConfig")),e._activityConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"activityAConfig",{get:function(){return null==e._activityAConfig&&(e._activityAConfig=e.ins("ActivityAConfig")),e._activityAConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e,"activitySumConfig",{get:function(){return null==e._activitySumConfig&&(e._activitySumConfig=e.ins("ActivitySumConfig")),e._activitySumConfig},enumerable:!0,configurable:!0}),e.testItemCheck=!1,e}();__reflect(GlobalConfig.prototype,"GlobalConfig"),window.GlobalConfig=GlobalConfig;var ItemConfig=function(){function e(){}return e.InitConfig=function(){e.equipConfig=GlobalConfig.equipConfig,e.powerConfig=GlobalConfig.ins("AttrPowerConfig")},e.IsLegendItem=function(e){return e&&e.type==ItemType.EQUIP&&5==e.quality?!0:!1},e.calcItemLevel=function(e){return e.itemConfig.zsLevel&&1e3*e.itemConfig.zsLevel||e.itemConfig.level},e.calcAttrScore=function(t){var i=0;null==e.powerConfig&&e.InitConfig();for(var o=0,s=t;o<s.length;o++){var n=s[o];this.powerConfig[n.type]&&(i+=this.powerConfig[n.type].power*n.value)}return i},e.CalcAttrScoreValue=function(e){return Math.floor(.01*this.calcAttrScore(e))},e.calculateBagItemScore=function(t){var i=GlobalConfig.equipConfig[t.itemConfig.id];if(!i)return 0;var o=GlobalConfig.ins("AttrPowerConfig"),s=e.calcAttrScore(t.att);i.baseAttr&&(s+=e.calcAttrScore(i.baseAttr));for(var n in AttributeData.translate)o[AttributeData.translate[n]]&&(s+=o[AttributeData.translate[n]].power*i[n]);return Math.floor(s/100)},e.CalculateItemScore=function(t){null==e.equipConfig&&e.InitConfig();var i=e.equipConfig[t],o=[];for(var s in Role.translate)if(!(i[s]<=0)){var n=new AttributeData;n.type=Role.getAttrTypeByName(s),n.value=i[s],o.push(n)}return Math.floor(UserBag.getAttrPower(o))},e.pointCalNumber=function(t){var i=0;null==e.equipConfig&&e.InitConfig();var o=e.equipConfig[t.id];for(var s in e.powerConfig){var n=o[this.TRANSFROM[e.powerConfig[s].type]]||0;i+=(n+Math.floor(.01*n))*e.powerConfig[s].power}return Math.floor(.01*i)},e.FuwenEquipSlot={Slot0:0,Slot1:1,Slot2:2,Slot3:3,Slot4:4,Slot5:5,Slot6:6,Slot7:7,Slot8:8,Count:9},e.TRANSFROM=["","","hp","","atk","def","res"],e}();__reflect(ItemConfig.prototype,"ItemConfig"),window.ItemConfig=ItemConfig;var ItemStoreConfig=function(){function e(){}return e.getStoreByItemID=function(e){var t=GlobalConfig.ins("ItemStoreConfig");for(var i in t){var o=t[i];if(o.itemId==e)return o}return null},e}();__reflect(ItemStoreConfig.prototype,"ItemStoreConfig"),window.ItemStoreConfig=ItemStoreConfig;var MiJiSkillConfig=function(){function e(){}return e.getSkillIDByItem=function(e){var t=GlobalConfig.ins("MiJiSkillConfig");for(var i in t)if(t[i].item==e)return t[i].id;return-1},e.getXinFaByItemId=function(e){var t=GlobalConfig.miJiSkillConfig;for(var i in t)for(var o=t[parseInt(i)],s=0,n=o;s<n.length;s++){var r=n[s];if(r.id==e)return r}return null},e}();__reflect(MiJiSkillConfig.prototype,"MiJiSkillConfig"),window.MiJiSkillConfig=MiJiSkillConfig;var MonstersConfig=function(){function e(){}return e.createModel=function(e,t){void 0===t&&(t=null);var i=new EntityModel;i.type=EntityType.Monster,i.configID=e.id,i.monstersType=e.type;var o=t?Math.round(t*e.hp):e.hp;return i.setAtt(AttributeType.atHp,o),i.setAtt(AttributeType.atMaxHp,o),i.setAtt(AttributeType.atAttack,e.atk),i.setAtt(AttributeType.atDef,e.def),i.setAtt(AttributeType.atRes,e.res),i.setAtt(AttributeType.atCrit,e.crit),i.setAtt(AttributeType.atTough,e.tough),i.setAtt(AttributeType.atMoveSpeed,e.ms),i.setAtt(AttributeType.atAttackSpeed,e.as),i},e}();__reflect(MonstersConfig.prototype,"MonstersConfig"),window.MonstersConfig=MonstersConfig;var SkillsConfig=function(){function e(){}return e.isPhysical=function(e){return 1==e.args.type},e.isMagic=function(e){return 2==e.args.type},e}();__reflect(SkillsConfig.prototype,"SkillsConfig"),window.SkillsConfig=SkillsConfig;var TianTiDanConfig=function(){function e(){this.danAward=[]}return e}();__reflect(TianTiDanConfig.prototype,"TianTiDanConfig"),window.TianTiDanConfig=TianTiDanConfig;var Keyboard=function(){function e(){}return e.CTRL=17,e.LEFT=37,e.RIGHT=39,e.UP=38,e.DOWN=40,e.W=87,e.A=65,e.S=83,e.D=68,e.J=74,e.K=75,e.L=76,e.U=85,e.I=73,e.O=79,e.P=80,e.SPACE=32,e.BRACE_L=219,e.BACKSLASH=220,e.BRACE_R=221,e.BACK_QUOTE=192,e.ENTER=13,e.ESC=27,e}();__reflect(Keyboard.prototype,"Keyboard"),window.Keyboard=Keyboard;var ErrorLog=function(){function e(){}return e.ins=function(){return null==this._ins&&(this._ins=new e),this._ins},e.prototype.show=function(e){var t=this,i=new BaseView;i.skinName="ErrorSkin";var o=function(){DisplayUtils.removeFromParent(t)};o.bind(i),i.notBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,o,i),i.lab.text=e,StageUtils.ins().getUIStage().addChild(i)},e.Assert=function(t,i){return t?!1:(DebugUtils.isDebug&&(e.ins().show(i),e.httpLog),!0)},e.httpLog=!1,e}();__reflect(ErrorLog.prototype,"ErrorLog");var Assert=ErrorLog.Assert;window.ErrorLog=ErrorLog;var ForgeConst=function(){function e(){}return e.CAN_FORGE_EQUIP=[EquipPos.WEAPON,EquipPos.HEAD,EquipPos.CLOTHES,EquipPos.NECKLACE,EquipPos.BRACELET1,EquipPos.BRACELET2,EquipPos.RING1,EquipPos.RING2],e.EQUIP_POS_TO_SUB=(_a={},_a[EquipPos.WEAPON]=0,_a[EquipPos.HEAD]=1,_a[EquipPos.CLOTHES]=2,_a[EquipPos.NECKLACE]=3,_a[EquipPos.BRACELET1]=4,_a[EquipPos.BRACELET2]=4,_a[EquipPos.RING1]=5,_a[EquipPos.RING2]=5,_a),e}();__reflect(ForgeConst.prototype,"ForgeConst");var ForgeType;!function(e){e[e.BOOST=0]="BOOST",e[e.GEM=1]="GEM",e[e.ZHULING=2]="ZHULING",e[e.TUPO=3]="TUPO"}(ForgeType||(ForgeType={})),window.ForgeConst=ForgeConst;var _a,ItemConst;!function(e){e[e.RENAME=450001]="RENAME",e[e.EXP_JADE=202016]="EXP_JADE",e[e.SUMMON_BOSS_01=230001]="SUMMON_BOSS_01",e[e.SUMMON_BOSS_02=230002]="SUMMON_BOSS_02",e[e.SUMMON_BOSS_03=230003]="SUMMON_BOSS_03",e[e.TREASURE_HUNT=200015]="TREASURE_HUNT",e[e.LEGEND_FRAGMENT=200008]="LEGEND_FRAGMENT",e[e.ZHUZAI_01=200072]="ZHUZAI_01",e[e.ZHUZAI_02=200073]="ZHUZAI_02",e[e.ZHUZAI_03=200074]="ZHUZAI_03",e[e.ZHUZAI_04=200075]="ZHUZAI_04",e[e.ITEM_ICE=201001]="ITEM_ICE"}(ItemConst||(ItemConst={}));var ItemType;!function(e){e[e.EQUIP=0]="EQUIP",e[e.MATERIAL=1]="MATERIAL",e[e.MIJI=2]="MIJI",e[e.TYPE3=3]="TYPE3",e[e.WING=4]="WING",e[e.FUWEN=5]="FUWEN",e[e.ZHUANZHI=6]="ZHUANZHI",e[e.RINGSOUL=7]="RINGSOUL",e[e.RINGBUFF=8]="RINGBUFF",e[e.TYPE9=9]="TYPE9",e[e.MOUNTEQUIP=10]="MOUNTEQUIP",e[e.TYPE11=11]="TYPE11",e[e.TYPE12=12]="TYPE12",e[e.TYPE13=13]="TYPE13",e[e.GAD=14]="GAD",e[e.TYPE15=15]="TYPE15",e[e.TYPE16=16]="TYPE16"}(ItemType||(ItemType={}));var ItemUseType;!function(e){e[e.TYPE00=0]="TYPE00",e[e.TYPE01=1]="TYPE01",e[e.TYPE02=2]="TYPE02",e[e.TYPE03=3]="TYPE03",e[e.TYPE04=4]="TYPE04",e[e.TYPE05=5]="TYPE05"}(ItemUseType||(ItemUseType={}));var JobConst;!function(e){e[e.ZhanShi=1]="ZhanShi",e[e.FaShi=2]="FaShi",e[e.DaoShi=3]="DaoShi"}(JobConst||(JobConst={}));var JobItemIconConst=function(){function e(){}return e}();__reflect(JobItemIconConst.prototype,"JobItemIconConst"),JobItemIconConst[0]="",JobItemIconConst[1]="comp_21_22_01_png",JobItemIconConst[2]="comp_21_22_02_png",JobItemIconConst[3]="comp_21_22_03_png";var JobHeadIconConst=function(){function e(){}return e.GetIcon=function(e,t){return ResDataPath.GetHeadMiniImgName(e,t)},e}();__reflect(JobHeadIconConst.prototype,"JobHeadIconConst"),window.JobItemIconConst=JobItemIconConst,window.JobHeadIconConst=JobHeadIconConst;var VIEW_LAYER_LEVEL;!function(e){e[e.BOTTOM=0]="BOTTOM",e[e.MIDDLE=1]="MIDDLE",e[e.TOP=2]="TOP"}(VIEW_LAYER_LEVEL||(VIEW_LAYER_LEVEL={}));var BagItemBase=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.isShowJob(!0)},t.prototype._UpdateRedPoint=function(){return this.data.getCanbeHc&&this.data.getCanbeHc()?void(this.redPoint.visible=!0):void(this.data.getCanbeUsed?this.redPoint.visible=this.data.getCanbeUsed():e.prototype._UpdateRedPoint.call(this))},t.prototype.showDetail=function(){if(this.itemConfig.synthesis)return void ViewManager.ins().open(ItemHcTipsWin,0,this.itemConfig.id);if(this.itemConfig.useType==ItemUseType.TYPE00)e.prototype.showDetail.call(this);else if(this.itemConfig.useType==ItemUseType.TYPE01||this.itemConfig.useType==ItemUseType.TYPE02||this.itemConfig.useType==ItemUseType.TYPE05){if(!ItemData.IsNotTimeLimitUse(this.itemConfig))return void e.prototype.showDetail.call(this);ViewManager.ins().open(ItemUseTipsWin,0,this.itemConfig.id)}this.itemConfig.useType==ItemUseType.TYPE03&&ViewManager.ins().open(AttrTipsWin,0,this.data.handle,this.itemConfig.id,this.data),this.itemConfig.type==ItemType.TYPE11?ViewManager.ins().open(MountDanYaoUseWin,this.data,ItemType.TYPE11,!0):this.itemConfig.type==ItemType.TYPE16&&ViewManager.ins().open(MountDanYaoUseWin,this.data,ItemType.TYPE16,!0)},t}(ItemBase);__reflect(BagItemBase.prototype,"BagItemBase"),window.BagItemBase=BagItemBase;var DropDown=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.touchEnabled=!0,this.currentState="up",this.list.addEventListener(egret.Event.CHANGE,this.listSelect,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeStage,this)},t.prototype.listSelect=function(e){this.value.text=this.list.selectedItem.name},t.prototype.removeStage=function(){this.stage&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(e){this.currentState="up"==this.currentState?"down":"up",e.stopPropagation(),this.stage&&("down"==this.currentState?this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this):this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this))},t.prototype.setData=function(e){this.list.dataProvider=e},t.prototype.setSelectedIndex=function(e){this.list.selectedIndex=e},t.prototype.getSelectedIndex=function(){return this.list.selectedIndex},t.prototype.setLabel=function(e){this.value.text=e},t.prototype.getLabel=function(){return this.value.text},t.prototype.setEnabled=function(e){this.list.touchEnabled=e,this.list.touchChildren=e},t.prototype.getEnabled=function(){return this.list.touchEnabled},t.prototype.destructor=function(){this.list.removeEventListener(egret.Event.CHANGE,this.listSelect,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeStage,this),this.removeStage()},t}(eui.Component);__reflect(DropDown.prototype,"DropDown"),window.DropDown=DropDown;var euiextension;!function(e){var t=function(e){function t(){var t=e.call(this)||this,o=new eui.Label;o.textColor=16777215,o.size=24,o.y=20,o.text="请输入账号",t.addChild(o),t.listIP=new eui.List,t.listIP.y=50,t.listIP.itemRenderer=i,t.scrollerIP=new eui.Scroller,t.scrollerIP.y=t.listIP.y,t.scrollerIP.height=400,t.scrollerIP.viewport=t.listIP,t.scrollerIP.bounces=!1,t.addChild(t.scrollerIP);var s=new eui.Label;return s.textColor=16777215,s.size=24,s.x=250,s.y=20,t.addChild(s),t.listRES=new eui.List,t.listRES.x=s.x,t.listRES.y=50,t.listRES.itemRenderer=i,t.scrollerRES=new eui.Scroller,t.scrollerRES.x=t.listRES.x,t.scrollerRES.y=t.listRES.y,t.scrollerRES.height=t.scrollerIP.height,t.scrollerRES.viewport=t.listRES,t.scrollerRES.bounces=!1,t.addChild(t.scrollerRES),t.scrollerRES.visible=!1,t.listIP.addEventListener(egret.Event.CHANGE,t.setSelectIP,t),t.listRES.addEventListener(egret.Event.CHANGE,t.setSelectRES,t),t}return __extends(t,e),t.prototype.setDataIP=function(e){this.listIP.dataProvider=new eui.ArrayCollection(e);var t=parseInt(egret.localStorage.getItem("listIP"))||0;this.listIP.selectedIndex=t>e.length?0:t,this.setSelectIP()},t.prototype.setDataRES=function(e){this.listRES.dataProvider=new eui.ArrayCollection(e);var t=parseInt(egret.localStorage.getItem("listRES"))||0;this.listRES.selectedIndex=t>e.length?0:t,this.setSelectRES()},t.prototype.destructor=function(){this.listIP.removeEventListener(egret.Event.CHANGE,this.setSelectIP,this),this.listRES.removeEventListener(egret.Event.CHANGE,this.setSelectRES,this)},t.prototype.setSelectIP=function(){t.ipData=this.listIP.selectedItem,egret.localStorage.setItem("listIP",this.listIP.selectedIndex.toString())},t.prototype.setSelectRES=function(){t.resData=this.listRES.selectedItem,egret.localStorage.setItem("listRES",this.listRES.selectedIndex.toString())},t.ipData="",t.resData="",t}(eui.ItemRenderer);e.DropDownList=t,__reflect(t.prototype,"euiextension.DropDownList");var i=function(e){function t(){var t=e.call(this)||this,i='<?xml version="1.0" encoding="utf-8" ?><e:Skin xmlns:e="http://ns.egret.com/eui"></e:Skin>';return t.skinName=i,t.label=new eui.Label,t.label.textColor=65280,t.label.size=12,t.label.y=10,t.addChild(t.label),t.height=23,t}return __extends(t,e),t.prototype.dataChanged=function(){this.label.text=this.data},Object.defineProperty(t.prototype,"selected",{set:function(e){this._selected!=e&&(this._selected=e,this.invalidateState(),e?this.label.textColor=16282482:this.label.textColor=65280)},enumerable:!0,configurable:!0}),t}(eui.ItemRenderer);e.IPItemRenderer=i,__reflect(i.prototype,"euiextension.IPItemRenderer"),window.DropDownList=t,window.IPItemRenderer=i}(euiextension||(euiextension={}));var FbItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.starValue=0},t.prototype.starSaoDang=function(){TimerManager.ins().doTimer(50,20,this.refushBar,this,this.overPlay,this),this.bar.visible=!0,this.bar.labelFunction=function(){return GlobalConfig.jifengTiaoyueLg.st100350}},t.prototype.refushBar=function(){this.challengeBtn.enabled=!1,this.starValue+=5,this.bar.value=this.starValue},t.prototype.overPlay=function(){0!=this.starValue&&(this.bar.visible=!1,this.barbg.visible=!1,this.challengeBtn.enabled=!0,this.starValue=0,UserFb.ins().sendAddCount(this.data))},t.prototype.dataChanged=function(){parseInt(this.data)%1e3>>0;null==this.dailyFubenConfig&&(this.dailyFubenConfig=GlobalConfig.dailyFubenConfig);var e=this.dailyFubenConfig[this.data];this.item.data=e.showItem[0],this.titleTxt.text=e.name,e.funcOpenId&&(Deblocking.Check(e.funcOpenId,!0)?this.currentState="canChallenge":(this.currentState="noChallenge",null==Deblocking.funcOpenConfig&&(Deblocking.funcOpenConfig=GlobalConfig.ins("FuncOpenConfig")),this.levelRequire.text=Deblocking.funcOpenConfig[e.funcOpenId].opencondition));var t=UserFb.ins().getFbDataById(this.data);if(null==t)return void console.error("FB"+this.data+" data not found");this.lableReward.textFlow=(new egret.HtmlTextParser).parser(e.des+'<font color="#40D016">'+t.getNextReward()+"</font>");var i=t.getCount(),o=0;0>=i&&(o=2),this.redPoint.visible=i>0;var s=0==o?GlobalConfig.jifengTiaoyueLg.st100351:1==o?GlobalConfig.jifengTiaoyueLg.st100352:GlobalConfig.jifengTiaoyueLg.st100353,n=i;2==o?(n=t.getSaoDangCount(),this.m_RewardsLab.visible=!0,this.m_RewardsLabBg.visible=!0,this.m_RewardsLab.textFlow=(new egret.HtmlTextParser).parser(e.des2+'<font color="#40D016">'+e.desParam2+"</font>")):(this.m_RewardsLab.visible=!1,this.m_RewardsLabBg.visible=!1),"noChallenge"==this.currentState?(this.m_RewardsLab.visible=!1,this.m_RewardsLabBg.visible=!1):2==o&&(this.m_RewardsLab.visible=!0,this.m_RewardsLabBg.visible=!0);var r=n>0?"#40D016":"#DFD1B5",a=UserVip.ins().lv;if(this.challengeBtn.enabled=!0,this.count.textFlow=(new egret.HtmlTextParser).parser(s+GlobalConfig.jifengTiaoyueLg.st100356+'：<font color="'+r+'">'+n+GlobalConfig.jifengTiaoyueLg.st100024+"</font>"),a<e.vipxz&&2==o){var l="VIP"+e.vipxz;this.count.textFlow=(new egret.HtmlTextParser).parser('<font color="#e40202">'+l+"</font>"+GlobalConfig.jifengTiaoyueLg.st100357),this.challengeBtn.enabled=!1}if(this.price.visible=2==o&&"canChallenge"==this.currentState,this.challengeBtn.label=0==o?GlobalConfig.jifengTiaoyueLg.st100354:GlobalConfig.jifengTiaoyueLg.st100355,this.challengeBtn.name=0==o?"":"add",this.lableReward.visible=0==o||"noChallenge"==this.currentState?!1:!0,this.lableRewardBg.visible=0==o||"noChallenge"==this.currentState?!1:!0,2==o&&0>=n){var h=t.getNextVip();switch(h){case-1:this.count.text=GlobalConfig.jifengTiaoyueLg.st100358,this.challengeBtn.visible=!1,this.price.visible=!1,this.lableReward.visible=!1;break;default:this.challengeBtn.enabled=!0;var c=t.getVipResetCount(h);a>=e.vipxz?this.count.textFlow=(new egret.HtmlTextParser).parser('<font color="#e40202">VIP'+h+"</font>"+GlobalConfig.jifengTiaoyueLg.st100359+(""+c)+GlobalConfig.jifengTiaoyueLg.st100024):(this.count.textFlow=(new egret.HtmlTextParser).parser('<font color="#e40202">VIP4</font>'+GlobalConfig.jifengTiaoyueLg.st100357),this.challengeBtn.enabled=!1),this.price.visible=!1,this.challengeBtn.label=GlobalConfig.jifengTiaoyueLg.st100360,this.challengeBtn.name="vip"}}this.priceTxt.text=e.buyPrice[t.vipBuyCount]+""},t}(eui.ItemRenderer);__reflect(FbItem.prototype,"FbItem"),window.FbItem=FbItem;var GuildInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100896,t.skinName="GuildInfoSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.userGuild=Guild.ins(),this.list.itemRenderer=GuildMemberItem1Render,this.guildName0.text=GlobalConfig.jifengTiaoyueLg.st100896,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100923,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100899,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100924,this.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st100925,this.m_Lan5.text=GlobalConfig.jifengTiaoyueLg.st100926,this.m_Lan6.text=GlobalConfig.jifengTiaoyueLg.st100927,this.lbchange.label=GlobalConfig.jifengTiaoyueLg.st100928,this.m_Lan7.text=GlobalConfig.jifengTiaoyueLg.st100929,this.checkJoin.label=GlobalConfig.jifengTiaoyueLg.st100930,this.conBtn.label=GlobalConfig.jifengTiaoyueLg.st100931},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.checkJoin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLinkApply,this),this.lbchange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLinkChange,this),this.conBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.addListener(Guild.ins().postGuildInfo,this.onGuildInit,this),MessageCenter.addListener(Guild.ins().postGuildMembers,this.updateMember,this),MessageCenter.addListener(Guild.ins().postMyGuildInfo,this.updateMyInfo,this),MessageCenter.addListener(Guild.ins().postChangeNotice,this.onGuildInit,this),MessageCenter.addListener(Guild.ins().postGuildMoney,this.updateGuild,this),MessageCenter.addListener(Guild.ins().postGuildApplysInfos,this.updateApplys,this),Guild.ins().sendGuildInfo(),this.updateApplys(),this.updateMyInfo()
},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.checkJoin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLinkApply,this),this.lbchange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLinkChange,this),this.conBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.conBtn:ViewManager.ins().open(GuildConWin)}},t.prototype.updateMyInfo=function(){this.myCon.text=this.userGuild.myCon+"",this.checkJoin.visible=this.userGuild.myOffice>=GuildOffice.GUILD_FUBANGZHU,this.lbchange.visible=this.userGuild.myOffice>=GuildOffice.GUILD_FUBANGZHU},t.prototype.onGuildInit=function(){this.updateGuild()},t.prototype.updateGuild=function(){this.guildName.text=this.userGuild.guildName,this.guildLevel.text=this.userGuild.guildLv.toString(),this.guildMoney.text=this.userGuild.money.toString(),this.notice.text=this.userGuild.notice},t.prototype.updateMember=function(){var e=GlobalConfig.ins("GuildConfig"),t=GameServer.serverMergeTime>0?e.maxHeFuMember[Guild.ins().guildLv-1]:e.maxMember[Guild.ins().guildLv-1];this.guildMember.text=this.userGuild.getMemberNum()+"/"+t,this.list.dataProvider=new eui.ArrayCollection(this.userGuild.getGuildMembers(1))},t.prototype.onLinkChange=function(){ViewManager.ins().open(GuildNoticeWin)},t.prototype.onLinkApply=function(){ViewManager.ins().open(GuildApplyListWin)},t.prototype.updateApplys=function(){UIHelper.ShowRedPoint(this.checkJoin,this.userGuild.hasApplys())},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(GuildInfoPanel.prototype,"GuildInfoPanel",["ICommonWindowTitle"]),window.GuildInfoPanel=GuildInfoPanel;var BitmapNumber=function(e){function t(){var t=e.call(this)||this;return t._imgPool=[],t._containerPool=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.createNumPic=function(e,t,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var s,n=this.getContainer(),r=e.toString(),a=0;for(a;a<r.length;a++)s=this.getSingleNumPic(r.charAt(a),t),n.addChild(s);return this.repositionNumPic(n,i,o),n},t.prototype.desstroyNumPic=function(e){this.clearContainer(e),e.parent&&e.parent.removeChild(e),this._containerPool.push(e)},t.prototype.changeNum=function(e,t,i,o,s){void 0===o&&(o=0),void 0===s&&(s=0);var n=t.toString();if(e.numChildren>n.length)for(;e.numChildren>n.length;)this.recycleBM(e.getChildAt(e.numChildren-1));var r,a=0;for(a;a<n.length;a++)a>=e.numChildren&&e.addChild(this.getBitmap()),r=n.charAt(a),r="."==r?"dot":r,e.getChildAt(a).texture=this.getTexture(r,i);this.repositionNumPic(e,o,s)},t.prototype.repositionNumPic=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var o,s=0,n=0;for(s;s<e.numChildren;s++)o=e.getChildAt(s),null!=o&&(o.x=n-t,o.y=i,n=o.x+o.width)},t.prototype.clearContainer=function(e){for(;e.numChildren;)this.recycleBM(e.removeChildAt(0))},t.prototype.recycleBM=function(e){e&&e.parent&&(e.parent.removeChild(e),e.texture=null,this._imgPool.push(e))},t.prototype.getContainer=function(){return this._containerPool.length?this._containerPool.shift():new egret.DisplayObjectContainer},t.prototype.getSingleNumPic=function(e,t){"."==e&&(e="dot");var i=this.getBitmap();return i.texture=this.getTexture(e,t),i},t.prototype.getTexture=function(e,t){return RES.getRes(t+e+"_png")},t.prototype.getBitmap=function(){return this._imgPool.length?this._imgPool.shift():new egret.Bitmap},t}(BaseClass);__reflect(BitmapNumber.prototype,"BitmapNumber"),window.BitmapNumber=BitmapNumber;var ItemBaseEffe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.showItemEffect()},t}(ItemBase);__reflect(ItemBaseEffe.prototype,"ItemBaseEffe"),window.ItemBaseEffe=ItemBaseEffe;var ItemIcon=function(e){function t(){var t=e.call(this)||this;return t.imgBg=null,t.imgIcon=null,t.imgJob=null,t.effect=null,t.skinName="ItemIconSkin",t}return __extends(t,e),t.prototype.ResetScale=function(){this.imgIcon&&(this.imgIcon.scaleX=this.imgIcon.scaleY=1)},t.prototype.setItemImg=function(e){this.imgIcon.source=e},t.prototype.setItemBg=function(e){this.imgBg.source=e},t.prototype.hideItemBg=function(e){this.imgBg.visible=e},t.prototype.setJobImg=function(e){this.imgJob.source=e},t.prototype.isShowJob=function(e){this.imgJob.visible=e},t.prototype.setData=function(e){if(null!=e)if(this.imgIcon.source=ResDataPath.GetItemFullName(e.icon),this.imgBg.source=ResDataPath.GetItemQualityName(e.quality),this.imgJob.source=(10==e.type||0==e.type||4==e.type||5==e.type||6==e.type||e.useType==ItemUseType.TYPE03)&&e.job&&this.imgJob.visible?JobItemIconConst[e.job]:ResDataPath.EMPTY_STR,GlobalConfig.clientGlobalConfig.effectItems.indexOf(e.id)>=0){null==this.effect&&(this.effect=new MovieClip,this.effect.x=35,this.effect.y=35,this.addChildAt(this.effect,2),this.effect.addEventListener(egret.Event.ADDED_TO_STAGE,this.resumePlay,this));var t=ResDataPath.GetItemQualityEffeName(e.quality);this.effect.loadUrl(ResDataPath.GetUIEffePath(t),!0)}else null!=this.effect&&(DisplayUtils.dispose(this.effect),this.effect=null);else this.imgIcon.source=ResDataPath.EMPTY_STR,this.imgBg.source=ResDataPath.DEFAULT_QUALITY,this.imgJob.source=ResDataPath.EMPTY_STR,null!=this.effect&&(DisplayUtils.dispose(this.effect),this.effect=null)},t.prototype.resumePlay=function(){this.effect&&this.effect.play(-1)},t}(eui.Component);__reflect(ItemIcon.prototype,"ItemIcon"),window.ItemIcon=ItemIcon;var ItemSmall=function(e){function t(){var t=e.call(this)||this;return t.skinName="ItemSmallSkin",t}return __extends(t,e),t.prototype.ResetScale=function(){this.imgIcon&&(this.imgIcon.scaleX=this.imgIcon.scaleY=1)},t.prototype.setItemImg=function(e){this.imgIcon.source=e},t.prototype.setItemBg=function(e){this.imgBg.source=e},t.prototype.setJobImg=function(e){this.imgJob.source=e},t.prototype.isShowJob=function(e){this.imgJob.visible=e},t.prototype.setImgBottom=function(e){this.imgBottom.source=e},t.prototype.showImgBottom=function(e){this.imgBottom.visible=e},t.prototype.showRedPoint=function(e){this.redPoint.visible=e},t.prototype.setData=function(e){if(null!=e)if(this.imgIcon.source=ResDataPath.GetItemFullName(e.icon),this.imgBg.source=ResDataPath.GetItemQualityName(e.quality),this.imgJob.source=(0==e.type||4==e.type||5==e.type||6==e.type)&&e.job&&this.imgJob.visible?JobItemIconConst[e.job]:ResDataPath.EMPTY_STR,GlobalConfig.clientGlobalConfig.effectItems.indexOf(e.id)>=0){null==this.effect&&(this.effect=new MovieClip,this.effect.x=35,this.effect.y=35,this.addChildAt(this.effect,2),this.effect.addEventListener(egret.Event.ADDED_TO_STAGE,this.resumePlay,this));var t=ResDataPath.GetItemQualityEffeName(e.quality);this.effect.loadUrl(ResDataPath.GetUIEffePath(t),!0)}else null!=this.effect&&(DisplayUtils.dispose(this.effect),this.effect=null);else this.imgIcon.source=ResDataPath.EMPTY_STR,this.imgBg.source=ResDataPath.DEFAULT_QUALITY,this.imgJob.source=ResDataPath.EMPTY_STR,null!=this.effect&&(DisplayUtils.dispose(this.effect),this.effect=null)},t.prototype.resumePlay=function(){this.effect&&this.effect.play(-1)},t}(eui.Component);__reflect(ItemSmall.prototype,"ItemSmall"),window.ItemSmall=ItemSmall;var PriceIcon=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getPrice=function(){return this._price},Object.defineProperty(t.prototype,"price",{get:function(){return this._price},set:function(e){this.setPrice(e)},enumerable:!0,configurable:!0}),t.prototype.setPrice=function(e){e!=this._price&&(this._price=e,this.priceLabel.text=CommonUtils.overLength(this._price)+"")},Object.defineProperty(t.prototype,"text",{set:function(e){this.priceLabel.textFlow=(new egret.HtmlTextParser).parser(e)},enumerable:!0,configurable:!0}),t.prototype.setText=function(e){this.priceLabel.textFlow=(new egret.HtmlTextParser).parser(e)},t.prototype.setData=function(e){var t="";if(egret.is(e,"RewardData")){var i=e;if(0==i.type)t=MoneyManger.MoneyConstToSource(i.id);else if(1==i.type)switch(i.id){case 200001:t="little_icon_04_png";break;case 200002:t="forge";break;case 200003:t="gem";break;case 200004:t="spirit";break;case 200005:t="vigor";break;case 200006:t="shield";break;case 200015:t="200015_png"}this._type=i.id,this.setPrice(i.count)}else if(e){var o=e;switch(o.itemConfig.id){case 200001:t="little_icon_04_png";break;case 200002:t="yuanbao";break;case 200003:t="yuanbao";break;case 200004:t="yuanbao";break;case 200005:t="yuanbao";break;case 200006:t="yuanbao";break;case 200015:t="200015_png"}this._type=o.itemConfig.id,this.setPrice(o.count)}this.iconImg.source=t},Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){this.setType(e)},enumerable:!0,configurable:!0}),t.prototype.getType=function(){return this._type},t.prototype.setType=function(e){if(this._type!=e){this._type=e;var t=MoneyManger.MoneyConstToSource(this._type);this.iconImg.source=t}},Object.defineProperty(t.prototype,"labelColor",{get:function(){return this._labelColor},set:function(e){this._labelColor!=e&&(this._labelColor=e,this.priceLabel.textColor=this._labelColor)},enumerable:!0,configurable:!0}),t}(eui.Component);__reflect(PriceIcon.prototype,"PriceIcon"),window.PriceIcon=PriceIcon;var RoleElementChangeWin=function(e){function t(){var t=e.call(this)||this;return t.m_ElemTypeName=[GlobalConfig.jifengTiaoyueLg.st101956,GlobalConfig.jifengTiaoyueLg.st101957,GlobalConfig.jifengTiaoyueLg.st101958,GlobalConfig.jifengTiaoyueLg.st101959,GlobalConfig.jifengTiaoyueLg.st101960],t.skinName="RoleElementChangeWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.m_ContLab.text=GlobalConfig.jifengTiaoyueLg.st100205,this.m_ContLab1.text=GlobalConfig.jifengTiaoyueLg.st100206,this.m_bg.init("RoleElementChangeWin",GlobalConfig.jifengTiaoyueLg.st100204)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.curRole=e[0],this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release();for(var e=this.m_MainGroup.numChildren,t=0;e>t;t++){var i=this.m_MainGroup.getChildAt(t);i&&i instanceof RoleElementIcon&&(i.filters=null)}},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.AddClick(this.helpBtn,this.onClickHelp),this.observe(MessageDef.UPDATE_MAINELEMENT,this.setData)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){for(var e=this.m_MainGroup.numChildren,t=SubRoles.ins().getSubRoleByIndex(this.curRole),i=0;e>i;i++){var o=this.m_MainGroup.getChildAt(i);o&&o instanceof RoleElementIcon&&(o.type=i+1,o.curRole=this.curRole,o.setData())}var s=this.m_ElemTypeName[t.attrElementMianType-1];this.m_ElemTypeLab.text=s},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.onClickHelp=function(){ViewManager.ins().open(ZsBossRuleSpeak,34)},t}(BaseEuiPanel);__reflect(RoleElementChangeWin.prototype,"RoleElementChangeWin"),ViewManager.ins().reg(RoleElementChangeWin,LayerManager.UI_Popup),window.RoleElementChangeWin=RoleElementChangeWin;var RoleElementIcon=function(e){function t(){var t=e.call(this)||this;return t.type=0,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.setData=function(){var e=SubRoles.ins().getSubRoleByIndex(this.curRole);e.attrElementMianType==this.type?(this.m_SelectImg.visible=!0,this.filters=null,this.m_Activate.visible=!0):(this.m_SelectImg.visible=!1,FilterUtil.setGayFilter(this),this.m_Activate.visible=!1),this.m_ElementImg.source=ResDataPath.GetElementImgName(this.type)},t.prototype.onClick=function(){0==this.m_SelectImg.visible&&GameLogic.ins().sendChangElement(this.curRole,this.type)},t.prototype.release=function(){this.filters=null},t}(eui.Component);__reflect(RoleElementIcon.prototype,"RoleElementIcon"),window.RoleElementIcon=RoleElementIcon;var RoleInfoPanel=function(e){function t(t){var i=e.call(this)||this;return i.m_tabGroup=[],i.windowCommonBg="pic_bj_20_png",i.skinName="RoleInfoSkin",i.m_Context=t,i.roleShowPanel.m_ElementImg.visible=!1,i.m_DanyaoBar.visible=!1,i.m_DanYaoLab.visible=!1,i}return __extends(t,e),Object.defineProperty(t.prototype,"curRole",{get:function(){return this.m_RoleSelectPanel.getCurRole()},enumerable:!0,configurable:!0}),t.prototype.childrenCreated=function(){this.touchEnabled=!1,this.touchChildren=!0,this.m_DanyaoBar.slideDuration=0,this.m_DanyaoBar.labelDisplay.visible=!1,this.equips=[];for(var e=0;e<EquipPos.MAX;e++)this.equips[e]=this["item"+e],this.equips[e].touchEnabled=!0,this.equips[e].isShowJob(!1);this.zhuzaiArr=[];for(var e=0;4>e;e++)this.zhuzaiArr[e]=this["zhuzai"+e];for(var e=0;e<this.tabGroup.numChildren;e++)this.m_tabGroup[e]=this["tab"+e];this.m_DanyaoBtn.label=GlobalConfig.jifengTiaoyueLg.st100105,this.oneKeyChange.label=GlobalConfig.jifengTiaoyueLg.st100106},t.prototype.open=function(){this.setDanyaoData(),this.setElement();for(var e=0;e<this.m_tabGroup.length;e++)this.AddClick(this.m_tabGroup[e],this.onTouchTab);this.AddClick(this.tab9,this.onTouchTab),this.AddClick(this.checkAttr,this.onClick),this.AddClick(this.oneKeyChange,this.onClick);for(var e=0;e<this.equips.length;e++)this.AddClick(this.equips[e],this.onClick);for(var e=0;e<this.zhuzaiArr.length;e++)this.AddClick(this.zhuzaiArr[e],this.onClick);this.observe(MessageDef.CHANGE_EQUIP,this.updataEquip),this.observe(MessageDef.CHANGE_WING,this.setWing),this.observe(MessageDef.ZHUZAI_DATA_UPDATE,this.updatazhuzaiEquip),this.observe(Bless.ins().postBelssUpdate,this.refushBlessInfO),this.observe(MessageDef.SKILL_UPDATE,this.setRetPoint),this.observe(MessageDef.DELETE_ITEM,this.setRetPoint),this.observe(MessageDef.ADD_ITEM,this.setRetPoint),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.setRetPoint),this.observe(TheGunEvt.THEGUN_DATAUPDATE_MSG,this.setRetPoint),this.observe(MessageDef.DANYAO_UPDATE,this.setDanyaoData),this.observe(MessageDef.UPDATE_MAINELEMENT,this.setElement),this.observe(MessageDef.POWER_CHANGE,this._updatePower),this.m_DanyaoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickDanyaoBtn,this),this.addTouchEvent(this,this.onClickElement,this.m_ElementGroup);for(var e=0;e<this.zhuzaiArr.length;e++)this.zhuzaiArr[e].count.text="";this.m_Context&&(this.m_Context.updateRedPoint(),this.setRetPoint()),this.checkGuide()},t.prototype._updatePower=function(){var e=SubRoles.ins().getSubRoleByIndex(this.curRole);e&&(this.totalPower.text=e.power.toString())},t.prototype.setDanyaoData=function(){var e=UserBag.ins().eatCnt,t=GlobalConfig.ins("ShuXingDanjcConfig");t&&(e<t.Num?(this.m_DanyaoBtn.visible=!1,this.m_DanYaoLab.text=e+"/"+t.Num,this.removeDanyYaoTick()):(this.m_DanyaoBtn.visible=!0,this.addDanyaoTick()),this.m_DanyaoBar.maximum=t.Num,this.m_DanyaoBar.value=e)},t.prototype.onClickDanyaoBtn=function(){var e=GlobalConfig.ins("ShuXingDanjcConfig");if(e){var t=GameLogic.ins().actorModel.yb;if(t<e.money)ViewManager.ins().open(ChargeFirstWin);else{var i=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100101,[e.money]);WarnWin.show(i,function(){var t=GameLogic.ins().actorModel.yb;e&&(t>=e.money?UserBag.ins().sendRefCDDanyaoMsg():UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008))},this)}}},t.prototype.addDanyaoTick=function(){this.removeDanyYaoTick(),TimerManager.ins().doTimer(1e3,0,this.setDanyaoTime,this),this.setDanyaoTime()},t.prototype.removeDanyYaoTick=function(){TimerManager.ins().remove(this.setDanyaoTime,this)},t.prototype.setDanyaoTime=function(){var e=UserBag.ins().eatTime,t=GameServer.GetSurplusTime(e,DateUtils.TIME_FORMAT_11);this.m_DanYaoLab.text=t+GlobalConfig.jifengTiaoyueLg.st100102},t.prototype.onTouchTab=function(e){switch(e.currentTarget){case this.tab0:ViewManager.ins().open(OrangeEquipWin,0,this.curRole);break;case this.tab1:ViewManager.ins().open(ZhuanZhiEquipWin,0,this.curRole);break;case this.tab2:ViewManager.ins().open(DressWin,this.curRole);break;case this.tab3:GuideUtils.ins().next(this.tab3),Deblocking.Check(DeblockingType.TYPE_61)&&ViewManager.ins().open(ZsWin);break;case this.tab4:Deblocking.Check(DeblockingType.TYPE_62)&&ViewManager.ins().open(GadWin,0,this.curRole);break;case this.tab5:ViewManager.ins().open(OrangeEquipWin,1,this.curRole);break;case this.tab6:Deblocking.Check(DeblockingType.TYPE_15)&&ViewManager.ins().open(ArtifactMainWin);break;case this.tab7:ViewManager.ins().open(LoongSoulWin,0,this.curRole);break;case this.tab9:Deblocking.Check(DeblockingType.TYPE_81)&&ViewManager.ins().open(RoleAddAttrPointWin,0,this.curRole);break;case this.tab8:Deblocking.Check(DeblockingType.TYPE_92)&&ViewManager.ins().open(TheGunWin)}},t.prototype.close=function(){this.removeDanyYaoTick(),this.removeObserve(),this.removeEvents(),this.roleShowPanel.release();for(var e=0;8>e;e++)this.equips[e]&&this.equips[e].clearEffect()},t.prototype.refushBlessInfO=function(){this.updataEquip(),this.setRetPoint()},t.prototype.updataEquip=function(){var e=SubRoles.ins().getSubRoleByIndex(this.curRole);this.setEquip(e),this.setEquipPoint(e),UserRole.ins().setCanChange(),Wing.ins().setCanWingEquipChange()},t.prototype.updatazhuzaiEquip=function(){var e=SubRoles.ins().getSubRoleByIndex(this.curRole);this.setEquipPoint(e)},t.prototype.setEquip=function(e){if(e){for(var t=e.getEquipLen2(),i=0;t>i;i++){var o=e.getEquipByIndex(i);this.equips[i].model=e,this.equips[i].data=o.item,this.equips[i].showItemEffect(),this.equips[i].isShowName(!1),0==o.item.configID&&this.equips[i].setItemImg(i>=8?"role_25":ResDataPath.GetEquipDefaultIcon(i))}this.roleShowPanel.creatAnim(e),this.totalPower.text=e.power.toString()}},t.prototype.setEquipPoint=function(e,t){void 0===t&&(t=!1);var i=GlobalConfig.equipPointBasicConfig;null==this.EquipPointConstConfig&&(this.EquipPointConstConfig=GlobalConfig.ins("EquipPointGrowUpConfig"));for(var o=0;4>o;o++){var s=e.getZhuZaiDataByIndex(o);if(s.lv){var n=this.EquipPointConstConfig[s.id][s.lv];n&&(this.zhuzaiArr[o].zhuZaiEquipLv.text=n.rank+GlobalConfig.jifengTiaoyueLg.st100103,this.zhuzaiArr[o].isShowName(!1))}else this.zhuzaiArr[o].nameTxt.text=(i[o+1].activationLevel/1e3>>0)+GlobalConfig.jifengTiaoyueLg.st100104;var r=ZhuzaiEquip.GetBgIconByData(s),a=r[0],l=r[1];this.zhuzaiArr[o].setItemImg(a),this.zhuzaiArr[o].setItemBg(l),this.zhuzaiArr[o].showZhuZaiItemEffect(n),t||this.zhuzaiArr[o].IsShowRedPoint(s.canLevelup()&&s.canAdvance())}},t.prototype.onClick=function(e){switch(e.currentTarget){case this.checkAttr:ViewManager.ins().open(RoleAttrWin,this.curRole);break;case this.oneKeyChange:UserRole.ins().checkHaveCan(!0,this.curRole),this.setCanChange(),GuideUtils.ins().next(this.oneKeyChange);var t=ViewManager.ins().getView(RoleWin).closeBtn0;GuideUtils.ins().show(t,1,4);break;default:var i=this.zhuzaiArr.indexOf(e.currentTarget);i>=0&&ViewManager.ins().open(ZhuZaiEquipWin,0,this.curRole,i)}},t.prototype.setWing=function(){var e=SubRoles.ins().getSubRoleByIndex(this.curRole);this.roleShowPanel.creatAnim(e)},t.prototype.setRetPoint=function(){for(var e=[UserEquip.ins().checkOrangeRedPointZy(),Deblocking.IsRedDotZhuanZhiBtn(),DressModel.ins().mDressModelRedPoint.IsRed(),Deblocking.IsRedDotSkillBtn(),GadModel.getInstance.checkAllRoleCanChangeItem()||GadModel.getInstance.checkAllRoleCanLvUp(),LegendModel.ins().IsRedPointLegend(),Deblocking.IsRedDotArtifactBtn(),LongHun.ins().CheckRedPoint(),TheGunModel.getInstance.checkAllRedPoint(),PlayFun.ins().getFuncRedById(DeblockingType.TYPE_81)],t=0;t<this.m_tabGroup.length;t++){var i=this["tab"+t];i&&(i.redPoint.visible=e[t])}},t.prototype.setCanChange=function(e){void 0===e&&(e=null);for(var t,i=e&&e[this.curRole]?e[this.curRole]:[],o=this.equips.length,s=0;o>s;s++)this.equips[s].IsShowRedPoint(i[s]?i[s]:!1),t||(t=i[s]?i[s]:!1);UIHelper.SetBtnNormalEffe(this.oneKeyChange,t)},t.prototype.UpdateContent=function(){this.setRetPoint(),this.setWing(),this.updataEquip(),this.setElement()},t.prototype.onClickElement=function(){var e=this.m_RoleSelectPanel.getCurRole();ViewManager.ins().open(RoleElementChangeWin,e)},t.prototype.setElement=function(){var e=(this.m_RoleSelectPanel.getCurRole(),SubRoles.ins().getSubRoleByIndex(this.curRole));this.m_ElementImg.source=ResDataPath.GetElementImgName(e.attrElementMianType)},t.prototype.checkGuide=function(){3==Setting.currStep&&1==Setting.currPart?GuideUtils.ins().show(this.oneKeyChange,1,3):1==Setting.currStep&&18==Setting.currPart?GuideUtils.ins().show(this.tab3,18,1):1==Setting.currStep&&23==Setting.currPart&&GuideUtils.ins().show(this.tab3,23,1)},t}(BaseView);__reflect(RoleInfoPanel.prototype,"RoleInfoPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.RoleInfoPanel=RoleInfoPanel;var RoleItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.boostLv=new eui.BitmapLabel,this.boostLv.right=5,this.boostLv.bottom=18,this.boostLv.font="font_item_lv_1_fnt",this.zhulingLv=new eui.BitmapLabel,this.zhulingLv.left=5,this.zhulingLv.bottom=18,this.zhulingLv.font="font_item_lv_2_fnt",this.tupoLv=new eui.BitmapLabel,this.tupoLv.right=5,this.tupoLv.top=5,this.tupoLv.font="font_item_lv_2_fnt",this.equipLv=new eui.BitmapLabel,this.equipLv.left=5,this.equipLv.top=5,this.equipLv.font="font_item_lv_3_fnt",this.zhuZaiEquipLv=new eui.BitmapLabel,this.zhuZaiEquipLv.horizontalCenter=0,this.zhuZaiEquipLv.verticalCenter=-5,this.zhuZaiEquipLv.font="font_item_lv_3_fnt",this.boostLv.textAlign=this.tupoLv.textAlign="right",this.addChild(this.boostLv),this.addChild(this.zhulingLv),this.addChild(this.tupoLv),this.addChild(this.equipLv),this.addChild(this.zhuZaiEquipLv),this.mc=new MovieClip,this.mc.x=34,this.mc.y=34},t.prototype.dataChanged=function(){this.playEff(),e.prototype.dataChanged.call(this);var t=this.data.itemConfig;if(this.bless.visible=!1,t&&!this.wings){for(var i=this.model.equipsData,o=void 0,s=0;s<i.length;s++)if(this.data.handle==i[s].item.handle){o=i[s];break}this.boostLv.text=o.strengthen>0?"+"+o.strengthen:"",this.zhulingLv.text=o.zhuling>0?o.zhuling+"":"",this.tupoLv.text=o.tupo>0?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101446,[o.tupo]):"",this.bless.visible=o.bless>0,this.setEquipTxt(t)}this._lastData=this.data,this._lastModel=this._model},t.prototype.setEquipTxt=function(e){if(null!=e){if(this.itemIcon.setData(e),e.type==ItemType.EQUIP||e.type==ItemType.FUWEN){var t=e.zsLevel>0?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[e.zsLevel]):LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[e.level]);ItemConfig.IsLegendItem(e)&&(t=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101439,[LegendModel.GetStage(e.id)])),this.equipLv.text=t}else this.equipLv.text=e.name;0!=e.type}},t.prototype.clear=function(){e.prototype.clear.call(this),this.boostLv.text=this.zhulingLv.text=this.tupoLv.text=this.equipLv.text=this.zhuZaiEquipLv.text="",this.playEff()},t.prototype.openEquipsTips=function(){ViewManager.ins().open(EquipDetailedWin,1,this.data.handle,this.itemConfig.id,this.data,this._model)},Object.defineProperty(t.prototype,"model",{get:function(){return this._model},set:function(e){this._model=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wings",{get:function(){return this._wings},set:function(e){this._wings=e},enumerable:!0,configurable:!0}),t.prototype.playEff=function(){var e=this;this._lastData&&this._lastData!=this.data&&this.model==this._lastModel&&this.mc&&(this.mc.loadUrl(ResDataPath.GetUIEffePath("litboom"),!0,1,function(){DisplayUtils.dispose(e.mc),e.mc=null}),this.addChild(this.mc))},t}(ItemBase);__reflect(RoleItem.prototype,"RoleItem"),window.RoleItem=RoleItem;var RoleSelectPanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._curRole=0,t}return __extends(t,e),Object.defineProperty(t,"NAME_TXT",{get:function(){var e=["",GlobalConfig.jifengTiaoyueLg.st101408,GlobalConfig.jifengTiaoyueLg.st101409,GlobalConfig.jifengTiaoyueLg.st101410];return e},enumerable:!0,configurable:!0}),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.roles=[this.role0,this.role1,this.role2],null==this.roleMovie){this.roleMovie=[];for(var i=0;2>i;i++){var o=new MovieClip;o.touchEnabled=!1,o.x=30,o.y=25,this.roles[i+1].addChild(o),this.roleMovie.push(o)}}this.setCurRole(e&&e.length>0?e[0]:0,!1),this.updateRole(),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.updateRole,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),MessageCenter.addListener(GameLogic.ins().postSubRoleChange,this.updateRole,this),MessageCenter.addListener(GameLogic.ins().postLevelChange,this.updateRole,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATA_VIP_AWARDS,this.updateRole,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.updateRole,this),MessageCenter.ins().removeAll(this);for(var e=this.roleMovie.length,t=0;e>t;t++)DisplayUtils.dispose(this.roleMovie[t]),this.roleMovie[t]=null;this.roleMovie=null},t.prototype.getCurRole=function(){return this._curRole},Object.defineProperty(t.prototype,"curRole",{get:function(){return this._curRole},set:function(e){this._curRole=e},enumerable:!0,configurable:!0}),t.prototype.setCurRole=function(e,t){void 0===t&&(t=!0),this._curRole=e;for(var i=0;i<this.roles.length;i++){var o=this.roles[i];o.select.visible=i==e}t&&this.dispatchEventWith(egret.Event.CHANGE,!1,this._curRole)},t.prototype.onClick=function(e){var t=this.roles.indexOf(e.target);if(t>-1){if(e.localY<10||e.localY>e.target.height-12)return;var i=e.target,o=this.mRoleData?this.mRoleData[t]:SubRoles.ins().getSubRoleByIndex(t);if(o)this.setCurRole(t);else{if(this.mRoleData)return void UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101411);ViewManager.ins().open(NewRoleWin),i.select.visible=!1}}},t.prototype.updateRole=function(){for(var e,i,o=this.roles.length,s=0;o>s;s++){if(e=this.roles[s],i=this.mRoleData?this.mRoleData[s]:SubRoles.ins().getSubRoleByIndex(s))e.groupName.visible=!0,e.name.text=t.NAME_TXT[i.job],e.txt.visible=!1,e.icon=ResDataPath.GetHeadMiniImgName2(i.job,i.sex),this.roleMovie[s-1]&&(DisplayUtils.dispose(this.roleMovie[s-1]),this.roleMovie.splice(s-1,1));else{var n=GlobalConfig.ins("NewRoleConfig")[s];e.groupName.visible=!1,e.txt.visible=!0,n?(n.zsLevel?UserZs.ins().lv<n.zsLevel?e.txt.text=n.zsLevel+GlobalConfig.jifengTiaoyueLg.st101412:e.txt.text=GlobalConfig.jifengTiaoyueLg.st101413:GameLogic.ins().actorModel.level<n.level?e.txt.text=n.level+GlobalConfig.jifengTiaoyueLg.st101414:e.txt.text=GlobalConfig.jifengTiaoyueLg.st101413,n.vip&&UserVip.ins().lv>=n.vip&&(e.txt.text=GlobalConfig.jifengTiaoyueLg.st101413),e.icon=""):Main.errorBack("配置表NewRoleConfig id="+s+" 错误")}e.txt.text==GlobalConfig.jifengTiaoyueLg.st101413&&this.roleMovie[s-1]&&this.roleMovie[s-1].loadUrl(ResDataPath.GetUIEffePath("eff_openrole"),!0)}},t.prototype.showRedPoint=function(e,t){if(null!=this.roles){var i=this.roles[e];i&&(i.redPoint.visible=t)}},t.prototype.clearRedPoint=function(){if(null!=this.roles)for(var e=0;e<this.roles.length;e++)this.roles[e].redPoint.visible=!1},t}(BaseView);__reflect(RoleSelectPanel.prototype,"RoleSelectPanel"),window.RoleSelectPanel=RoleSelectPanel;var SmeltEquipNormalPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101447,t.viewIndex=0,t.skinName="SmeltMainSkin",t}return __extends(t,e),t.prototype.UpdateContent=function(){this.setItemData()},t.prototype.childrenCreated=function(){this.name=GlobalConfig.jifengTiaoyueLg.st101447,this.smeltEquips=[],this.smeltEquips.length=Const.SMELT_COUNT,this.blockList=[],this.itemList.itemRenderer=SmeltEquipItemForRonglu,this.dataInfo=new eui.ArrayCollection(this.smeltEquips),this.itemList.dataProvider=this.dataInfo,UIHelper.SetLinkStyleLabel(this.descTf,GlobalConfig.jifengTiaoyueLg.st101448),this.itemScroller.viewport=this.itemList,this.autoCheck.label=GlobalConfig.jifengTiaoyueLg.st101453,this.smeltBtn.label=GlobalConfig.jifengTiaoyueLg.st101454,this.descTf.text=GlobalConfig.jifengTiaoyueLg.st101455,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101456},t.prototype.open=function(){this.smeltBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.itemList.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.addListener(UserEquip.ins().postSmeltEquipComplete,this.smeltComplete,this),MessageCenter.addListener(UserEquip.ins().postEquipCheckList,this.setItemList,this),this.autoCheck.addEventListener(egret.Event.CHANGE,this.checkChange,this),this.descTf.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.autoCheck.selected=UserBag.ins().isAuto},t.prototype.close=function(){this.smeltBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.itemList.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.autoCheck.removeEventListener(egret.Event.CHANGE,this.checkChange,this),this.descTf.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this)},t.prototype.checkChange=function(e){return GameLogic.ins().actorModel.vipLv<6?(UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101449),void(this.autoCheck.selected=!1)):void UserBag.ins().setAutoBag(this.autoCheck.selected)},t.prototype.smeltComplete=function(){for(var e=this,t=this.itemList.numChildren,i=0;t>i;i++){var o=this.itemList.getChildAt(i);o&&o instanceof SmeltEquipItemForRonglu&&o.playEff()}null==this.effectMc&&(this.effectMc=new MovieClip,this.effectMc.x=240,this.effectMc.y=340,this.addChild(this.effectMc),this.effectMc.loadUrl(ResDataPath.GetUIEffePath("eff_power_fire"),!0,1,function(){DisplayUtils.dispose(e.effectMc),e.effectMc=null})),this.setItemData()},t.prototype.setItemData=function(){if(this.blockList.length=0,this.BlockItemConfig=GlobalConfig.ins("RongLuUnlockConfig"),this.BlockItemConfig){var e=GameLogic.ins().actorModel.level,t=GameLogic.ins().actorModel.zsLv,i=0,o=0,s=this.BlockItemConfig;Object.keys(s).forEach(function(n){var r=s[n],a=1e3<=r.param?r.param/1e3<=t:r.param<=e;a&&i<r.nId&&(i=r.nId),o<r.nId&&(o=r.nId)}),Const.SMELT_COUNT=i;var n=UserBag.ins().getOutEquips();if(n.length<Const.SMELT_COUNT){for(var r=UserBag.ins().getOutFuwenEquips(Const.SMELT_COUNT-n.length),a=0;a<r.length;++a)n.push(r[a]);UserBag.ins().creatListLength(n)}for(this.smeltEquips=n;o>i;){var l=s[i+1];n.push(l),this.blockList.push(l),i++}this.dataInfo.replaceAll(n)}},t.prototype.setItemList=function(e){var t=e.concat(this.blockList);this.dataInfo.replaceAll(t),this.itemList.dataProvider=this.dataInfo},t.prototype.onTap=function(e){switch(e.currentTarget){case this.smeltBtn:UserEquip.ins().sendSmeltEquip(this.viewIndex,this.smeltEquips);break;case this.descTf:var i=GlobalConfig.jifengTiaoyueLg.st101450;WarnWin.show(i,function(){},this,null,null,"sure",{btnName:GlobalConfig.jifengTiaoyueLg.st100040,title:GlobalConfig.jifengTiaoyueLg.st100367});break;case this.itemList:var o=e.target;if(o&&o.data){var s=this.smeltEquips.indexOf(o.data);s>=0&&(this.smeltEquips.splice(s,1),o.data=null)}else{if(!t.currentClickCanshow){UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101451);break}var n=UserBag.ins().getCanSmeltEquips();if(n.length>0){ViewManager.ins().open(SmeltSelectWin,n,Const.SMELT_COUNT,this.smeltEquips)}else UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101452)}}},t}(BaseView);__reflect(SmeltEquipNormalPanel.prototype,"SmeltEquipNormalPanel",["ICommonWindowTitle"]),window.SmeltEquipNormalPanel=SmeltEquipNormalPanel;var SmeltEquipRongluPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101457,t.lastNum=-1,t.lastlevel=0,t.skinName="SmeltMain1Skin",t.smeltBtn0.label=GlobalConfig.jifengTiaoyueLg.st101460,t.smeltBtn.label=GlobalConfig.jifengTiaoyueLg.st101454,t
}return __extends(t,e),t.prototype.UpdateContent=function(){this.smeltComplete()},t.prototype.childrenCreated=function(){this.name=GlobalConfig.jifengTiaoyueLg.st101457,this.smeltEquips=[],this.smeltEquips.length=10,this.itemList.itemRenderer=SmeltEquipItem,this.dataInfo=new eui.ArrayCollection(this.smeltEquips),this.itemList.dataProvider=this.dataInfo},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];MessageCenter.addListener(Bless.ins().postBlessRongluSuccess,this.smeltComplete,this),MessageCenter.addListener(UserEquip.ins().postEquipCheckList,this.setItemList,this),this.smeltBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.itemList.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.smeltBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.smeltBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.smeltBtn0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.itemList.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this)},t.prototype.smeltComplete=function(){var e=this,t=GlobalConfig.ins("RongLuLevelConfig")[Bless.ins().level];this.attrLabel.SetCurAttr(AttributeData.getAttStr(AttributeData.transformAttr(t.attr),1)),this.powerLabel.text=UserBag.getAttrPower(AttributeData.transformAttr(t.attr))*SubRoles.ins().subRolesLen;var i=GlobalConfig.ins("RongLuLevelConfig")[Bless.ins().level+1];i?this.attrLabel.SetNextAttr(AttributeData.getAttStr(AttributeData.transformAttr(i.attr),1)):(this.smeltBtn.visible=!1,this.smeltBtn0.visible=!1,this.maxTips=new eui.Label,this.maxTips.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st101458),this.maxTips.size=20,this.maxTips.fontFamily="Microsoft YaHei",this.maxTips.x=175,this.maxTips.y=566,this.addChild(this.maxTips)),this.attrTxt0.text="("+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[Bless.ins().level])+")",this.expBar.maximum=t.exp,this.expBar.value=Bless.ins().exp;var o=this.itemList.getChildAt(0).data;if(null==this.effectMc&&null!=o&&(this.effectMc=new MovieClip,this.m_EffGroup.addChild(this.effectMc),this.effectMc.loadUrl(ResDataPath.GetUIEffePath("effe_ui_uppower_floor"),!0,1,function(){DisplayUtils.dispose(e.effectMc),e.effectMc=null})),this.setItemData(),-1!=this.lastNum){var s=0;if(Bless.ins().level>this.lastlevel){for(var n=Bless.ins().level-1;n>=this.lastlevel;n--)s+=GlobalConfig.ins("RongLuLevelConfig")[n].exp;s+=Bless.ins().exp-this.lastNum,this.showBoost(s)}Bless.ins().exp>this.lastNum&&this.showBoost(Bless.ins().exp-this.lastNum)}this.lastNum=Bless.ins().exp,this.lastlevel=Bless.ins().level},t.prototype.showBoost=function(e){UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101459,[e]))},t.prototype.setItemList=function(e){this.dataInfo.replaceAll(e),this.itemList.dataProvider=this.dataInfo},t.prototype.setItemData=function(){var e=10;this.smeltEquips.length=0,this.smeltEquips.length=e,this.dataInfo.replaceAll(this.smeltEquips)},t.prototype.setyijian=function(){var e=UserBag.ins().getWingZhuEquip(),t=[];if(e.length>0){if(e.forEach(function(e){t.length<10&&t.push(e)}),t.length<10)for(var i=t.length;10>i;i++)t.push(null);this.dataInfo.replaceAll(t),this.itemList.dataProvider=this.dataInfo}},t.prototype.onTap=function(e){switch(e.currentTarget){case this.smeltBtn:Bless.ins().sendRonglu(this.smeltEquips);break;case this.smeltBtn0:this.setyijian();break;case this.itemList:var t=e.target;if(t&&t.data){var i=this.smeltEquips.indexOf(t.data);i>=0&&(this.smeltEquips.splice(i,1),t.data=null)}else{var o=UserBag.ins().getBagSortQualityEquips(5,0,0,UserBag.ins().otherEquipSmeltFilter);if(o.length>0){ViewManager.ins().open(SmeltSelectWin,o,Const.SMELT_COUNT,this.smeltEquips)}else UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101452)}}},t}(BaseView);__reflect(SmeltEquipRongluPanel.prototype,"SmeltEquipRongluPanel",["ICommonWindowTitle"]),window.SmeltEquipRongluPanel=SmeltEquipRongluPanel;var UseShopItemPanel=function(e){function t(){var t=e.call(this)||this;t.m_Items=[],t.skinName="UseShopItemPanelSkin";for(var i=0,o=t.cacheGroup.$children;i<o.length;i++){var s=o[i];t.m_Items.push(new UseShopItem(s))}return t}return __extends(t,e),t.Show=function(e,i,o){ViewManager.ins().open(t,e,i,o)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1],s=e[2];if(s)for(var n=0,r=s;n<r.length;n++){var a=r[n];GameGlobal.MessageCenter.addListener(a,this.UpdateContent,this)}this.commonDialog.title=i,this.commonDialog.OnAdded(this),this.showGroup.removeChildren();for(var l=0;l<o.length;++l){var h=this.m_Items[l];h.Init(o[l]),h.Update(),this.showGroup.addChild(h.mItem)}for(var l=o.length;l<this.m_Items.length;++l)this.m_Items[l].visible=!1;egret.callLater(this._LateUpdate,this)},t.prototype.close=function(){for(var e=0,t=this.m_Items;e<t.length;e++){var i=t[e];i.close()}GameGlobal.MessageCenter.removeAll(this),this.commonDialog.OnRemoved()},t.prototype._LateUpdate=function(){this.commonDialog.height=this.showGroup.height+60},t.prototype.UpdateContent=function(){for(var e=0;e<this.m_Items.length;++e){var t=this.m_Items[e];t&&t.visible&&t.Update()}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(UseShopItemPanel.prototype,"UseShopItemPanel");var UseShopItem=function(){function e(e){this.mItem=e,this.mItem.item.isShowName(!1)}return Object.defineProperty(e.prototype,"visible",{get:function(){return this.mItem.visible},set:function(e){this.mItem.visible=e},enumerable:!0,configurable:!0}),e.prototype.Init=function(e){this.m_Adapter=e,this.visible=!0,this.mItem.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},e.prototype.close=function(){this.mItem.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.m_Adapter=null,this.mItem=null},e.prototype._OnClick=function(){if(this.m_Adapter){var e=this.m_Adapter.GetItemId();null==this.itemConfig&&(this.itemConfig=GlobalConfig.itemConfig);var t=(this.itemConfig[e],UserBag.ins().getBagGoodsCountById(UserBag.BAG_TYPE_OTHTER,e));if(t>0)this.m_Adapter.DoUse();else{var i=ItemStoreConfig.getStoreByItemID(e);i&&Checker.Money(MoneyConst.yuanbao,ItemStoreConfig.getStoreByItemID(e).price)&&this.m_Adapter.DoUse()}}},e.prototype.Update=function(){var e=this.m_Adapter.GetItemId(),t=this.m_Adapter.GetToDayStr?this.m_Adapter.GetToDayStr():null,i=this.m_Adapter.GetSurplusCount?this.m_Adapter.GetSurplusCount:null,o=this.m_Adapter.GetDes();null==this.itemConfig&&(this.itemConfig=GlobalConfig.itemConfig);var s=this.itemConfig[e],n=UserBag.ins().getBagGoodsCountById(UserBag.BAG_TYPE_OTHTER,e);if(this.mItem.item.data=e,t&&i?(this.mItem.toDay.visible=!0,this.mItem.toDay.textFlow=(new egret.HtmlTextParser).parser(StringUtils.Format(t,i))):this.mItem.toDay.visible=!1,this.mItem.priceIcon.visible=0==n,this.mItem.redPoint.visible=0!=n,n>0)this.mItem.infoCount.text=s.name+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101828,[n]),this.mItem.btn.label=GlobalConfig.jifengTiaoyueLg.st100272;else{this.mItem.infoCount.text=""+s.name;var r=ItemStoreConfig.getStoreByItemID(e);r?(this.mItem.priceIcon.type=MoneyConst.yuanbao,this.mItem.priceIcon.price=ItemStoreConfig.getStoreByItemID(e).price,this.mItem.priceIcon.name=s.name,this.mItem.btn.label=GlobalConfig.jifengTiaoyueLg.st100718):(this.mItem.priceIcon.visible=!1,this.mItem.btn.visible=!1)}o?this.mItem.infoTxt.textFlow=(new egret.HtmlTextParser).parse(o):this.mItem.infoTxt.text=s.desc},e}();__reflect(UseShopItem.prototype,"UseShopItem"),window.UseShopItemPanel=UseShopItemPanel,window.UseShopItem=UseShopItem;var WingEquipItemrender=function(e){function t(){var t=e.call(this)||this;return t.skinName="WingEquipItemSkin",t.addEventListener(egret.TouchEvent.TOUCH_END,t.onClick,t),t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data,t=e.curRole,i=e.data;this.role=SubRoles.ins().getSubRoleByIndex(t),this.itemConfig=i.itemConfig,this.item0.setData(i.itemConfig),this.equipXuqiu.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100708,[this.itemConfig.level+1]),this.equipXuqiu.textColor=16282482,this.equipName.text=i.itemConfig.name,this.score.text=GlobalConfig.jifengTiaoyueLg.st100070+"："+ItemConfig.calculateBagItemScore(i),this.languageTxt.text="（"+GlobalConfig.jifengTiaoyueLg.st100709+"）"},t.prototype.descut=function(){this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this)},t.prototype.onClick=function(){this.openEquipsTips()},t.prototype.openEquipsTips=function(){ViewManager.ins().open(EquipDetailedWin,1,this.data.data.handle,this.itemConfig.id,this.data.data,this.role)},t}(eui.ItemRenderer);__reflect(WingEquipItemrender.prototype,"WingEquipItemrender"),window.WingEquipItemrender=WingEquipItemrender;var WingEquipPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100707,t.skinName="WingEquipSkin",t}return __extends(t,e),Object.defineProperty(t.prototype,"curRole",{get:function(){return this.m_RoleSelectPanel.getCurRole()},enumerable:!0,configurable:!0}),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.equips=[];for(var t=0;4>t;t++)this.equips[t]=this["item"+t],this.equips[t].touchEnabled=!0,this.equips[t].isShowJob(!1);this.updateEquipList.itemRenderer=WingEquipItemrender,this.boostBtn1.label=GlobalConfig.jifengTiaoyueLg.st100706},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.boostBtn1,this.onTouch),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateContent),this.commonWindowBg.OnAdded(this,0,e[0]||0)},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.UpdateContent=function(){this._wingsData=SubRoles.ins().getSubRoleByIndex(this.curRole).wingsData,this.wingName.text=""+GlobalConfig.wingLevelConfig[this._wingsData.lv].name,this.updateEquip(SubRoles.ins().getSubRoleByIndex(this.curRole));for(var e=[],t=UserBag.ins().getBagEquipByType(4),i=t.length,o=0;i>o;o++){var s=new Object;s.curRole=this.curRole,s.data=t[o],this._wingsData.lv<t[o].itemConfig.level&&e.push(s)}this.updateEquipList.dataProvider=new eui.ArrayCollection(e),this.setCanChange()},t.prototype.updateEquip=function(e){if(null!=e)for(var t=e.wingsData.equipsLen,i=0;t>i;i++){var o=e.wingsData.getEquipByIndex(i);this.equips[i].model=e,this.equips[i].wings=!0,this.equips[i].data=o,0==o.configID&&this.equips[i].setItemImg("winge_"+i+"_png")}},t.prototype.onTouch=function(e){switch(e.target){case this.boostBtn1:this.oneKey?(Wing.ins().checkWingEquip(this.curRole,!0),this.setCanChange()):UserTips.ins().showTips("|C:0x535557&T:"+GlobalConfig.jifengTiaoyueLg.st100705+"！|")}},t.prototype.setCanChange=function(){var e=Wing.ins().mRedPoint.GetEquipState(this.curRole);this.oneKey=!1;for(var t=0;4>t;t++)UIHelper.ShowRedPoint(this.equips[t],e[t]?e[t]:!1),this.oneKey||(this.oneKey=e[t]?e[t]:!1);UIHelper.SetBtnNormalEffe(this.boostBtn1,this.oneKey),this.showreaPoin()},t.prototype.showreaPoin=function(){for(var e=0;e<SubRoles.ins().subRolesLen;++e){var t=Wing.ins().mRedPoint.GetEquipState(e);this.m_RoleSelectPanel.showRedPoint(e,-1!=t.indexOf(!0))}},t}(BaseEuiPanel);__reflect(WingEquipPanel.prototype,"WingEquipPanel",["ICommonWindow","ICommonWindowTitle","ICommonWindowRoleSelect"]),ViewManager.ins().reg(WingEquipPanel,LayerManager.UI_Main),window.WingEquipPanel=WingEquipPanel;var WingPanel=function(e){function t(){var t=e.call(this)||this;return t.windowCommonBg="pic_bj_20_png",t._lastLv=0,t._lastStar=0,t._isAutoUp=!1,t.clearSelect=!0,t.m_NowLv=0,t.m_Lv=0,t.showLVbnt=!0,t.skinName="WingSkin",t}return __extends(t,e),Object.defineProperty(t.prototype,"curRole",{get:function(){return this.m_RoleSelectPanel.getCurRole()},enumerable:!0,configurable:!0}),t.AddPowerEff=function(){var e=new MovieClip;return e.x=240,e.y=27,e.loadUrl(ResDataPath.GetUIEffePath("effe_ui_role_power_floor"),!0,-1),e},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),null==this.wingCommonConfig&&(this.wingCommonConfig=GlobalConfig.ins("WingCommonConfig")),this.danItemID=this.wingCommonConfig.levelItemid,this.mc=new MovieClip,this.openStatusBtn.label=GlobalConfig.jifengTiaoyueLg.st100699,this.upgradeBtn.label=GlobalConfig.jifengTiaoyueLg.st101103,this.boostBtn0.label=GlobalConfig.jifengTiaoyueLg.st100245,this.boostBtn1.label=GlobalConfig.jifengTiaoyueLg.st100700,this.boostBtn2.label=GlobalConfig.jifengTiaoyueLg.st100701,this.imageVip.text=GlobalConfig.jifengTiaoyueLg.st100702,this.bigLevelLab.text=GlobalConfig.jifengTiaoyueLg.st100703,this.boostPrice1.setType(MoneyConst.gold),this.m_AutoBuy.label=GlobalConfig.jifengTiaoyueLg.st101147},t.prototype.open=function(){this.openStatusBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.boostBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.boostBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.m_BuyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.upgradeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.wingEquip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.bigUpLevelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.boostBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.addListener(Wing.ins().postBoost,this.showBoost,this),MessageCenter.addListener(Wing.ins().postWingUpgrade,this.setWingData,this),MessageCenter.addListener(Wing.ins().postActivate,this.setWingData,this),MessageCenter.addListener(Wing.ins().postWingEquipUpdate,this.setWingData,this),MessageCenter.addListener(UserBag.postItemChange,this.updateItemCount,this),MessageCenter.addListener(UserBag.postItemAdd,this.updateItemCount,this),GameGlobal.MessageCenter.addListener(MessageDef.DELETE_ITEM,this.updateItemCount,this),MessageCenter.addListener(GameLogic.ins().postLevelChange,this.updateLevel,this),this.AddClick(this.m_LeftArrImg,this.onClickArrImg),this.AddClick(this.m_RightArrImg,this.onClickArrImg),this.observe(MessageDef.WING_CHANGESHOW_MSG,this.onChangeWinShow),this.AddClick(this.m_FightBtn,this.onClickFight)},t.prototype.close=function(){this.openStatusBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.boostBtn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.boostBtn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.m_BuyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.upgradeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.wingEquip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.bigUpLevelBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.boostBtn0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this),this.roleShowPanel.release()},t.prototype.canShow=function(){var e=UserZs.ins()?UserZs.ins().lv:0;null==this.wingCommonConfig&&(this.wingCommonConfig=GlobalConfig.ins("WingCommonConfig"));var t=this.wingCommonConfig.autoLv;return GameGlobal.actorModel.level>=t[0]||GameGlobal.actorModel.vipLv>=t[1]||e>1},t.prototype.updateLevel=function(){this.boostBtn1.x=170},t.prototype.onTap=function(e){var i=this;switch(null==this.wingCommonConfig&&(this.wingCommonConfig=GlobalConfig.ins("WingCommonConfig")),e.currentTarget){case this.openStatusBtn:GameLogic.ins().actorModel.level>=this.wingCommonConfig.openLevel?Wing.ins().sendActivate(this.curRole):UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st100691+"|");break;case this.boostBtn1:GameLogic.ins().actorModel.gold>=GlobalConfig.wingLevelConfig[this._wingsData.lv].normalCost?Wing.ins().sendBoost(this.curRole,0):UserWarn.ins().setBuyGoodsWarn(1);break;case this.boostBtn2:this.useShenYu();break;case this.upgradeBtn:Wing.ins().sendUpgrade(this.curRole);break;case this.wingEquip:ViewManager.ins().open(WingEquipPanel,this.curRole,this.powerLabel.text);break;case this.bigUpLevelBtn:var o=GlobalConfig.itemConfig[this.danItemID],s=o.name,n=UserBag.ins().getBagGoodsCountById(0,o.id),r=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100692,[s,this.wingCommonConfig.levelItemidStage,this.wingCommonConfig.levelExpChange]);WarnWin.show(r+"<font color='#C42525'>\n"+s+"："+n+"</font>",function(){Wing.ins().sendBigUpLevel(i.curRole)},this);break;case this.boostBtn0:if(!Deblocking.Check(DeblockingType.TYPE_87))return;var a=GlobalConfig.wingLevelConfig[this._wingsData.lv],l=UserBag.ins().getBagGoodsCountById(0,a.itemId);if(l>=a.itemNum)WarnWin.show(GlobalConfig.jifengTiaoyueLg.st100243,function(){Wing.ins().sendWingOneKey(i.curRole)},this);else{if(this.m_AutoBuy.selected){var h=Shop.ins().getShopPrice(a.itemId,a.itemNum);return void(Checker.Money(MoneyConst.yuanbao,h,Checker.YUNBAO_FRAME)&&(0==t.isTips?(t.isTips=!0,WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102089,[h,GlobalConfig.jifengTiaoyueLg.st100208]),function(){Wing.ins().sendBoost(this.curRole,1,!0)},this)):Wing.ins().sendBoost(this.curRole,1,!0)))}UserWarn.ins().setBuyGoodsWarn(a.itemId)}break;case this.m_BuyBtn:var a=GlobalConfig.wingLevelConfig[this._wingsData.lv];UserWarn.ins().setBuyGoodsWarn(a.itemId)}},t.prototype.notOpenStatus=function(){this.starList.visible=!1,this.expBar.visible=!1,this.attrLabel.visible=!1,this.upgradeBtn.visible=!1,this.boostBtn0.visible=!1,this.boostBtn1.visible=!1,this.boostBtn2.visible=!1,this.m_AutoBuy.visible=!1,this.m_BuyBtn.visible=!1,this.boostPrice1.visible=!1,this.boostPrice2.visible=!1,this.powerLabel.visible=!1,this.openStatusBtn.visible=!0,this.notOpenBg.visible=!0,this.imageVip.visible=!1,this.warnLabel.visible=!0,this.warnLabel.y=335,this.warnLabel.text=GlobalConfig.jifengTiaoyueLg.st100693,this.bigUpLevelBtn.visible=!1,this.bigLevelLab.visible=!1,this.bigLevelLabBg.visible=!1,this.roleShowPanel.visible=!1,this.m_HuanHuaGroup.visible=!1,this._wingsData.lv>=this.wingCommonConfig.lvMax&&(this.roleShowPanel.visible=!0,this.m_HuanHuaGroup.visible=!0),null==this.wingCommonConfig&&(this.wingCommonConfig=GlobalConfig.ins("WingCommonConfig")),this._wingsData.lv>=this.wingCommonConfig.lvMax?this.wingEquip.visible=!0:this.wingEquip.visible=!1},t.prototype.openStatusOpen=function(){this.bigLevelLab.visible=!0,this.bigLevelLabBg.visible=!0,this.bigUpLevelBtn.visible=!0,this.roleShowPanel.visible=!0,this.m_HuanHuaGroup.visible=!0,this.openStatusBtn.visible=!1,this.notOpenBg.visible=!1,this.imageVip.visible=!0,this.warnLabel.visible=!1,this.starList.visible=!0,this.expBar.visible=!0,this.attrLabel.visible=!0,this.powerLabel.visible=!0,this.wingEquip.visible=!0,this.wingImg.visible=!1},t.prototype.showBoost=function(e){var t=e[0],i=e[1],o=new eui.Label;o.size=20;var s="";t>1?(o.textColor=16282482,s=GlobalConfig.jifengTiaoyueLg.st100694,o.x=170):(o.textColor=16282482,s=GlobalConfig.jifengTiaoyueLg.st100695,o.x=190),o.y=326,o.text=s+i,o.horizontalCenter=0,this.addChild(o);var n=egret.Tween.get(o);n.to({y:o.y-45},500).call(function(){o&&(egret.Tween.removeTweens(o),DisplayUtils.dispose(o))},this),this.expBarChange(),this.updateAtt(),this.isShowUpGradeBtn(),this._lastStar!=this._wingsData.star&&this._wingsData.star>0&&(this._lastStar=this._wingsData.star,this.playEff())},t.prototype.setWingData=function(){var e=SubRoles.ins().getSubRoleByIndex(this.curRole);return this.roleShowPanel.creatAnim(e),this._wingsData=SubRoles.ins().getSubRoleByIndex(this.curRole).wingsData,this.initAttrImg(this._wingsData.lv),this.wingImg.touchEnabled=!1,this.wingName.text=""+GlobalConfig.wingLevelConfig[this._wingsData.lv].name,this._wingsData.openStatus?(this.openStatusOpen(),this.expBarChange(),this.updateAtt(),this.isShowUpGradeBtn(),0==this._lastLv&&(this._lastLv=this._wingsData.lv),this._lastLv!=this._wingsData.lv&&(this._lastLv=this._wingsData.lv,this.playEff()),this._lastStar=this._wingsData.star,void this.updateRadPoint()):void this.notOpenStatus()},t.prototype.updateRadPoint=function(){UIHelper.ShowRedPoint(this.wingEquip,Wing.ins().mRedPoint.IsEquipState(this.curRole));for(var e=0;e<SubRoles.ins().subRolesLen;++e)this.m_RoleSelectPanel.showRedPoint(e,Wing.ins().mRedPoint.IsRedByRole(e))},t.prototype.updateAtt=function(){null==this.wingCommonConfig&&(this.wingCommonConfig=GlobalConfig.ins("WingCommonConfig"));var e=GlobalConfig.wingLevelConfig[this._wingsData.lv],t=GlobalConfig.wingStarConfig[this._wingsData.star];this.attrLabel.SetCurAttrByAddType(e,t),this._totalPower=UserBag.getAttrPower(AttributeData.AttrAddition(e.attr,t.attr));for(var i=0,o=this._wingsData.equipsLen,s=0;o>s;s++){var n=this._wingsData.getEquipByIndex(s);n.itemConfig&&(i+=ItemConfig.calculateBagItemScore(n))}if(this._totalPower=this._totalPower+i,this.powerLabel.text=this._totalPower,this._wingsData.lv<this.wingCommonConfig.lvMax){var r=void 0,a=void 0;this._wingsData.star>0&&this._wingsData.star%10==0&&this.showLVbnt?(r=GlobalConfig.wingLevelConfig[this._wingsData.lv+1],a=t,this.showLVbnt=!1):this._wingsData.star%10!=0||this.showLVbnt?(r=e,a=GlobalConfig.wingStarConfig[this._wingsData.star+1],this.showLVbnt=!0):(r=e,a=GlobalConfig.wingStarConfig[this._wingsData.star+1]),this.attrLabel.SetNextAttrByAddType(r,a)}},t.prototype.expBarChange=function(){var e=GlobalConfig.wingStarConfig[this._wingsData.star],t=e.exp;this.expBar.maximum=t,this.expBar.value=this._wingsData.exp,Math.floor(this._wingsData.star/10)-this._wingsData.lv>0?(this.expBar.value=this.expBar.maximum=1,this.expBar.labelDisplay.visible=!1):this.expBar.labelDisplay.visible=!0},t.prototype.isShowUpGradeBtn=function(){if(null==this.wingCommonConfig&&(this.wingCommonConfig=GlobalConfig.ins("WingCommonConfig")),this._wingsData.lv>=this.wingCommonConfig.lvMax)return this.notOpenStatus(),this.openStatusBtn.visible=!1,this.notOpenBg.visible=!1,this.imageVip.visible=!0,this.powerLabel.visible=!0,this.warnLabel.visible=!0,this.warnLabel.y=455,this.warnLabel.text=GlobalConfig.jifengTiaoyueLg.st100341,void(this.attrLabel.visible=!0);var e=GlobalConfig.wingLevelConfig[this._wingsData.lv],t=new RewardData;t.type=1,t.count=e.itemNum,t.id=200001,this.boostPrice2.setData(t);var i,o=this._wingsData.star/10-e.level,s=!1;this._wingsData.star>0&&Math.floor(this._wingsData.star/10)-this._wingsData.lv>0&&this._wingsData.lv<this.wingCommonConfig.lvMax&&o?(this.upgradeBtn.visible=!0,this.boostBtn1.visible=!1,this.boostBtn2.visible=!1,this.m_BuyBtn.visible=!1,this.boostPrice1.visible=!1,this.boostPrice2.visible=!1,i=10,s=!0):(this.upgradeBtn.visible=!1,this.boostBtn1.visible=!0,this.boostBtn2.visible=!0,this.m_BuyBtn.visible=!0,this.boostPrice1.visible=!0,this.boostPrice2.visible=!0,this.boostPrice1.setPrice(e.normalCost),GameLogic.ins().actorModel.gold>=e.normalCost?this.boostPrice1.labelColor=36642:this.boostPrice1.labelColor=16282482,i=this._wingsData.star%10),this.updateItemCount(),this.starList.starNum=i,this.boostBtn0.visible=this.boostBtn1.visible,this.m_AutoBuy.visible=this.boostBtn2.visible},t.prototype.updateItemCount=function(){var e=GlobalConfig.wingLevelConfig[this._wingsData.lv],t=UserBag.ins().getBagGoodsCountById(0,e.itemId);this.boostPrice2.setText(e.itemNum<=t?'<font color="#008f22">'+t+"/"+e.itemNum+"</font>":'<font color="#f87372">'+t+"/"+e.itemNum+"</font>");var i=UserBag.ins().getBagGoodsCountById(0,this.danItemID);this.bigUpLevelBtn.redPoint.visible=i?!0:!1,this.bigUpLevelBtn.txt.text=i,this.updateRadPoint()},t.prototype.playEff=function(){var e,t=this;if(!(this._lastStar>0&&this._lastStar%10==0)){e=this._lastStar%10-1;var i=this.starList.m_StarItem[e];this.mc.visible=!0,this.mc.loadUrl(ResDataPath.GetUIEffePath("eff_wing_upgrade"),!0,1,function(){t.mc.visible=!1}),this.mc.x=i.x+(i.width>>1)-2,this.mc.y=i.y+(i.height>>1)-2,this.starList.addChild(this.mc)}},t.prototype.useShenYu=function(){var e=GlobalConfig.wingLevelConfig[this._wingsData.lv],i=UserBag.ins().getBagGoodsCountById(0,e.itemId);if(this.m_AutoBuy.selected&&i<e.itemNum){var o=Shop.ins().getShopPrice(e.itemId,e.itemNum);return void(Checker.Money(MoneyConst.yuanbao,o,Checker.YUNBAO_FRAME)&&(0==t.isTips?(t.isTips=!0,WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102089,[o,GlobalConfig.jifengTiaoyueLg.st100208]),function(){Wing.ins().sendBoost(this.curRole,1,!0)},this)):Wing.ins().sendBoost(this.curRole,1,!0)))}i<e.itemNum?UserWarn.ins().setBuyGoodsWarn(e.itemId):Wing.ins().sendBoost(this.curRole,1,!1)},t.prototype.warnShow=function(){var e=GlobalConfig.wingLevelConfig[this._wingsData.lv],t=UserBag.ins().getBagGoodsCountById(0,e.itemId);if(0>=t)if(this._isShowFrame){var i=GlobalConfig.itemConfig[e.itemId].name;i+=GlobalConfig.jifengTiaoyueLg.st100696+e.itemNum*ItemStoreConfig.getStoreByItemID(e.itemId).price+GlobalConfig.jifengTiaoyueLg.st100050+"\n",i+="<font color='#B18A3D'>("+GlobalConfig.jifengTiaoyueLg.st100697+")</font>",WarnWin.show(i,this.warnSure,this)}else GameLogic.ins().actorModel.yb>=ItemStoreConfig.getStoreByItemID(e.itemId).price*e.itemNum?Wing.ins().sendBoost(this.curRole,1,!0):UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st100698+"|");else Wing.ins().sendBoost(this.curRole,1,!1)},t.prototype.warnSure=function(){var e=GlobalConfig.wingLevelConfig[this._wingsData.lv];GameLogic.ins().actorModel.yb>=ItemStoreConfig.getStoreByItemID(e.itemId).price*e.itemNum?(this._isShowFrame=!1,Wing.ins().sendBoost(this.curRole,1,!0)):UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st100698+"|")},t.prototype.UpdateContent=function(){this.wingImg.visible=!0,this._lastLv=0,this.setWingData(),this._isShowFrame=!0,this.updateLevel();var e=SubRoles.ins().getSubRoleByIndex(this.curRole);this.roleShowPanel.creatAnim(e),this.roleShowPanel.touchEnabled=!1},t.prototype.initAttrImg=function(e){this.m_LeftArrImg.visible=!0,this.m_RightArrImg.visible=!0,this.m_Lv=e,this.m_NowLv=e,0==e&&(this.m_LeftArrImg.visible=!1);var t=GlobalConfig.ins("WingLevelConfig")[e+1];t||(this.m_RightArrImg.visible=!1);var i=SubRoles.ins().getSubRoleByIndex(this.curRole).wingsData;i.showLv==e?(this.m_FightLab.visible=!0,this.m_FightBtn.visible=!1):(this.m_FightLab.visible=!1,this.m_FightBtn.visible=!0)},t.prototype.onClickArrImg=function(e){switch(e.currentTarget){case this.m_LeftArrImg:this.m_RightArrImg.visible=!0,this.m_Lv-=1,this.roleShowPanel.setCharRoleWing(null,this.m_Lv);break;case this.m_RightArrImg:this.m_Lv==this.m_NowLv&&(this.m_RightArrImg.visible=!1),this.m_Lv+=1,this.roleShowPanel.setCharRoleWing(null,this.m_Lv)}this.setArrImg()},t.prototype.setArrImg=function(){var e=SubRoles.ins().getSubRoleByIndex(this.curRole).wingsData,t=GlobalConfig.ins("WingCommonConfig");0==this.m_Lv?this.m_LeftArrImg.visible=!1:this.m_LeftArrImg.visible=!0,this.m_Lv==t.lvMax||this.m_Lv>this.m_NowLv?this.m_RightArrImg.visible=!1:this.m_RightArrImg.visible=!0,e.lv==this.m_Lv?this.m_FightLab.visible=!0:this.m_FightLab.visible=!1,e.showLv==this.m_Lv?(this.m_FightLab.visible=!0,this.m_FightBtn.visible=!1):(this.m_FightLab.visible=!1,this.m_Lv>this.m_NowLv?this.m_FightBtn.visible=!1:this.m_FightBtn.visible=!0)},t.prototype.onChangeWinShow=function(){var e=SubRoles.ins().getSubRoleByIndex(this.curRole).wingsData;e.showLv==this.m_Lv?(this.m_FightLab.visible=!0,this.m_FightBtn.visible=!1):(this.m_FightLab.visible=!1,this.m_Lv>this.m_NowLv?this.m_FightBtn.visible=!1:this.m_FightBtn.visible=!0)},t.prototype.onClickFight=function(){Wing.ins().sendWingChangeShow(this.curRole,this.m_Lv)},t.isTips=!1,t}(BaseView);__reflect(WingPanel.prototype,"WingPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.WingPanel=WingPanel;var ZsPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ZsPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.infoTxts=[this.infoTxt0,this.infoTxt1,this.infoTxt2],this.toDays=[this.toDay0,this.toDay1,this.toDay2],this.items=[this.item0,this.item1,this.item2],this.btns=[this.btn0,this.btn1,this.btn2];for(var t=0;t<this.items.length;t++)this.items[t].isShowName(!1);var i=new RewardData;i.type=0,i.id=0,i.count=0,this.items[0].data=i,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100722+"：",this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st100723,this.languageTxt1.text=GlobalConfig.jifengTiaoyueLg.st100724+"：",this.languageTxt2.text=GlobalConfig.jifengTiaoyueLg.st100725+"：",this.getBtn.label=GlobalConfig.jifengTiaoyueLg.st100465,this.btns[0].label=GlobalConfig.jifengTiaoyueLg.st100726},t.prototype.open=function(){this.AddClick(this.getBtn,this.onTap),this.AddClick(this.m_HelpBtn,this.onTap),this.AddClick(this.btn0,this.onTap),this.AddClick(this.btn1,this.onTap),this.AddClick(this.btn2,this.onTap),this.observe(UserZs.ins().postZsData,this.UpdateContent),this.observe(GameLogic.ins().postLevelChange,this.UpdateContent)},t.prototype.close=function(){},t.prototype.onTap=function(e){switch(e.currentTarget){case this.getBtn:var t=UserZs.ins(),i=GlobalConfig.zhuanShengLevelConfig[t.lv+1];if(!i||t.exp<i.exp)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100223);UserZs.ins().sendZsUpgrade();break;case this.m_HelpBtn:ViewManager.ins().open(ZsBossRuleSpeak,25,GlobalConfig.jifengTiaoyueLg.st100710);break;default:var o=this.btns.indexOf(e.target);if(o>-1)if(0==o)UserZs.ins().sendGetXiuWei(o+1);else if(this.btns[o].label==GlobalConfig.jifengTiaoyueLg.st100711)UserZs.ins().sendGetXiuWei(o+1);else{var s=this["priceIcon"+o].getPrice(),i=this.ZhuanShengConfig,n=void 0;n=1==o?i.normalItem:i.advanceItem;var r=ItemStoreConfig.getStoreByItemID(n);if(Checker.Money(r.costType,s)){null==this.ZhuanShengConfig&&(this.ZhuanShengConfig=GlobalConfig.ins("ZhuanShengConfig"));var a=this.ZhuanShengConfig;a=1==o&&a.normalItem||a.advanceItem,UserZs.ins().sendGetXiuWei(o+1,a)}}}},t.prototype.UpdateContent=function(){this.curAtt.lineSpacing=5,this.nextAtt.lineSpacing=5;var e=UserZs.ins();UIHelper.ShowRedPoint(this.getBtn,e.canUpgrade()),this.curZsLv.text=e.lv+GlobalConfig.jifengTiaoyueLg.st100067;var t=GlobalConfig.zhuanShengLevelConfig[e.lv];this.curAtt.text=AttributeData.getAttStr(t,1);var i=[];for(var o in AttributeData.translate)if(!isNaN(t[o])){var s=new AttributeData;s.type=parseInt(AttributeData.translate[o]),s.value=t[o],i.push(s)}var n=SubRoles.ins().subRolesLen;this._totalPower=UserBag.getAttrPower(i)*n,this.powerLabel.text=this._totalPower;var r=GlobalConfig.zhuanShengLevelConfig[e.lv+1];if(r){this.nextAtt.text=AttributeData.getAttStr(r,1);var a=e.exp>=r.exp?Color.Green:Color.Red;this.curValue.textFlow=TextFlowMaker.generateTextFlow(StringUtils.addColor(e.exp.toString(),a)),this.consumeValue.text=r.exp+"";for(var l=Checker.Level(null,t.levelLimit,!1),h=!0,c=0;3>c;c++)if(ZhuanZhiModel.ins().getZhuanZhiLevel(c)<t.zzLevelLimit){h=!1;break}this.getBtn.visible=l&&h,this.maxTxt.visible=!l||!h,l||(this.maxTxt.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100712,[t.levelLimit,r.level])),l&&!h&&(this.maxTxt.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100713,[r.level,t.zzLevelLimit]))}else this.nextAtt.visible=!1,this.maxTxt.visible=!0,this.maxTxt.text=GlobalConfig.jifengTiaoyueLg.st100714,this.getBtn.visible=!1;this.setData()},t.prototype.setData=function(){null==this.ZhuanShengConfig&&(this.ZhuanShengConfig=GlobalConfig.ins("ZhuanShengConfig"));var e,t=this.ZhuanShengConfig,i=GameLogic.ins().actorModel,o=t.level+1,s=Math.max(i.level,o),n=(GlobalConfig.zhuanShengLevelConfig[s],GlobalConfig.ins("ZhuanShengExpConfig")[s]),r=UserZs.ins();this.toDays[0].textColor=i.level<o?16282482:11050120;var a=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100715,[n.exp]);this.infoTxts[0].textFlow=(new egret.HtmlTextParser).parser(a),e=t.conversionCount-r.upgradeCount[0];var l=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100716,[o-1]),h=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100717,[e]);
this.toDays[0].textFlow=(new egret.HtmlTextParser).parser(i.level<o?l:h),this.btns[0].enabled=e>0;var c=t.normalItem,u=GlobalConfig.itemConfig[c],d=UserBag.ins().getBagGoodsCountById(0,c);this.items[1].data=c,d?(this.btns[1].label=GlobalConfig.jifengTiaoyueLg.st100711,this.btns[1].labelDisplay.size=14):(this.btns[1].label=GlobalConfig.jifengTiaoyueLg.st100718,this.btns[1].labelDisplay.size=14),this.btns[1].name=t.normalExp+"",this.priceIcon1.visible=0==d;var p=ItemStoreConfig.getStoreByItemID(c);this.priceIcon1.setPrice(p.price),this.priceIcon1.setType(p.costType);var f=c;this.item1.mCallback=function(){UserWarn.ins().setBuyGoodsWarn(f)},this.priceIcon1.name=u.name;var g=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100719,[t.normalExp,u.name]),_=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100720,[d]);this.infoTxts[1].textFlow=(new egret.HtmlTextParser).parser(g+(d?_:""));var m=0;m=UserZs.ins().lv>12?12:UserZs.ins().lv,e=t.normalCount[m]-r.upgradeCount[1];var v=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100717,[e]);this.toDays[1].textFlow=(new egret.HtmlTextParser).parser(v),this.btns[1].enabled=e>0,c=t.advanceItem,u=GlobalConfig.itemConfig[c],d=UserBag.ins().getBagGoodsCountById(0,c),this.items[2].data=c,d?(this.btns[2].label=GlobalConfig.jifengTiaoyueLg.st100711,this.btns[2].labelDisplay.size=14):(this.btns[2].label=GlobalConfig.jifengTiaoyueLg.st100718,this.btns[2].labelDisplay.size=14),this.btns[2].name=t.advanceExp+"",this.priceIcon2.visible=0==d;var y=ItemStoreConfig.getStoreByItemID(c);this.priceIcon2.setPrice(y.price),this.priceIcon2.setType(y.costType),this.priceIcon2.name=u.name;var b=c;this.item2.mCallback=function(){UserWarn.ins().setBuyGoodsWarn(b)};var C=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100719,[t.advanceExp,u.name]),T=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100720,[d]);this.infoTxts[2].textFlow=(new egret.HtmlTextParser).parser(C+(d?T:"")),e=t.advanceCount[m]-r.upgradeCount[2];var S=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100717,[e]);this.toDays[2].textFlow=(new egret.HtmlTextParser).parser(S),this.btns[2].enabled=e>0;for(var w=0;3>w;w++)UIHelper.ShowRedPoint(this["btn"+w],UserZs.ins().canGet(w));if(r.lv>=t.maxzslevel)this.m_TurnLab1.visible=!1,this.m_TurnLab2.visible=!1;else{var I=r.lv+1;I>12&&(I=12),this.m_TurnLab1.textFlow=(new egret.HtmlTextParser).parser('<font color="#9de242">'+I+"</font>"+GlobalConfig.jifengTiaoyueLg.st100721+'<font color="#9de242">'+this.ZhuanShengConfig.normalCount[I]+"</font>"),this.m_TurnLab2.textFlow=(new egret.HtmlTextParser).parser('<font color="#9de242">'+I+"</font>"+GlobalConfig.jifengTiaoyueLg.st100721+'<font color="#9de242">'+this.ZhuanShengConfig.advanceCount[I]+"</font>")}},t}(BaseView);__reflect(ZsPanel.prototype,"ZsPanel",["ICommonWindowTitle"]),window.ZsPanel=ZsPanel;var HotspotBitmap=function(e){function t(){var t=e.call(this)||this;return t._hotspot=[],t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onTouch,t),t}return __extends(t,e),t.prototype.addHotspotArea=function(e,t,i,o){this._hotspot.push({rect:e,callBack:t,thisObj:i,para:o})},t.prototype.onTouch=function(e){for(var t,i=e.localX,o=e.localY,s=0;s<this._hotspot.length;s++)t=this._hotspot[s],t.rect.contains(i,o)&&(t.para?t.callBack.call(t.thisObj,t.para):t.callBack.call(t.thisObj))},t}(egret.Bitmap);__reflect(HotspotBitmap.prototype,"HotspotBitmap"),window.HotspotBitmap=HotspotBitmap;var CharItem=function(e){function t(){var i=e.call(this)||this;i.index=t.HANDLE++,i.touchEnabled=!1,i.touchChildren=!1,i._nameTxt=new eui.Label;var o=-17;return i._nameTxt.stroke=1,i._nameTxt.strokeColor=3355443,i._nameTxt.size=14,i._nameTxt.y=-25,i._itemImg=new eui.Image,i._itemImg.x=o,i._itemImg.y=o,i._itemImg.scaleX=i._itemImg.scaleY=.6,i._bgColorImg=new eui.Image,i._bgColorImg.width=180,i._bgColorImg.height=319,i._bgColorImg.x=-88,i._bgColorImg.y=-270,i._bgColorImg.anchorOffsetX=i.width/2,i._bgColorImg.anchorOffsetY=2*i.height,i.addChild(i._bgColorImg),i.addChild(i._itemImg),i.addChild(i._nameTxt),i}return __extends(t,e),Object.defineProperty(t.prototype,"tx",{get:function(){return GameMap.CELL_SIZE*this._tx+(GameMap.CELL_SIZE>>1)},set:function(e){this._tx=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ty",{get:function(){return GameMap.CELL_SIZE*this._ty+(GameMap.CELL_SIZE>>1)},set:function(e){this._ty=e},enumerable:!0,configurable:!0}),t.prototype.addEffect=function(){return},t.prototype.setData=function(e){if(null!=e){if(this._bgColorImg.visible=!1,e.type){var t=GlobalConfig.itemConfig[e.id];if(t)this._nameTxt.text=t.name,this._nameTxt.textColor=ItemBase.QUALITY_COLOR[t.quality],this._itemImg.source=ResDataPath.GetItemFullName(t.icon),t.quality>0&&this.addEffect(),t.quality>=3&&(this._bgColorImg.visible=!0,this._bgColorImg.source="comp_180_319_"+t.quality+"_png");else{this._nameTxt.text="道具名称";var i=" : 掉落报错，不存在的物品ID="+e.id+"  副本名称（ID）："+GameMap.fbName+"("+GameMap.fubenID+")   怪物ID："+UserFb.ins().monsterID+"( BOSSID:"+UserFb.ins().bossID+")";Main.errorBack(i)}}else 1==e.id?(e.count?this._nameTxt.text=""+e.count:this._nameTxt.text="",this._itemImg.source="icgoods117_png"):2==e.id&&(e.count?this._nameTxt.text=""+e.count:this._nameTxt.text="",this._itemImg.source="icgoods121_png");this._nameTxt.x=-this._nameTxt.textWidth>>1}},t.prototype.reset=function(){},t.prototype.destruct=function(){},t.HANDLE=1,t}(egret.DisplayObjectContainer);__reflect(CharItem.prototype,"CharItem"),window.CharItem=CharItem;var MovieBaseObject=function(e){function t(){var t=e.call(this)||this,i=t;return null==i._mcFactory&&(i._mcFactory=new egret.MovieClipDataFactory,i.m_State=!1,i.touchEnabled=!1,i.addEventListener(egret.Event.COMPLETE,i._PlayComp,i),i),t}return __extends(t,e),t.prototype.LoadByUrl=function(e,t,i,o){if(void 0===i&&(i=!0),e==this.m_Url)return void(this.m_State&&this.dispatchEventWith(egret.Event.CHANGE));if(this.ClearCache(),this.m_Url=e,!StringUtils.IsNullOrEmpty(e)){this.Ref(),this.m_CompFunc=o,this._playCount=t||-1,this._autoPlay=i;var s=e.lastIndexOf("/");-1!=s?this._fileName=e.substring(s+1):this._fileName=e;var n=this._Load(this.GetImgUrl(),RES.ResourceItem.TYPE_IMAGE),r=this._Load(this.GetJsonUrl(),RES.ResourceItem.TYPE_JSON);n&&r&&this._OnCreateBody(r,n)}},t.prototype._Load=function(e,t){var i=this._GetRes(e,t);return i?i:(RES.getResByUrl(e,this._CreateBodyByUrl,this,t),null)},t.prototype._GetRes=function(e,t){return RES.getRes(e)},t.prototype.Unref=function(){this.m_Url=null},t.prototype._CreateBodyByUrl=function(e,t){t&&this.GetJsonUrl()!=t&&this.GetImgUrl()!=t||this._OnCreateBody(this._GetRes(this.GetJsonUrl(),RES.ResourceItem.TYPE_JSON),this._GetRes(this.GetImgUrl(),RES.ResourceItem.TYPE_IMAGE))},t.prototype._OnCreateBody=function(e,t){e&&t&&(this.visible=!0,this._mcFactory.mcDataSet=e,this._mcFactory.texture=t,this.movieClipData=this._mcFactory.generateMovieClipData(this._fileName),this._autoPlay&&this.gotoAndPlay(1,this._playCount),this.m_State=!0,this.dispatchEventWith(egret.Event.CHANGE))},t.prototype._PlayComp=function(){var e=this.m_CompFunc;!this.mNotRemove&&this.parent&&this.parent.removeChild(this),e&&e()},t.prototype.DoDispose=function(){this.ClearCache()},t.prototype.Ref=function(){},t.prototype.ClearCache=function(){this.Unref(),this.visible=!1,this.stop(),this.m_State=!1,this.m_CompFunc=null},t.prototype.GetImgUrl=function(){return(this.m_Url||"")+".png"},t.prototype.GetJsonUrl=function(){return(this.m_Url||"")+".json"},t.prototype._SetUrl=function(e){this.m_Url=e},t.prototype.GetLoadUrl=function(){return this.m_Url},t}(egret.MovieClip);__reflect(MovieBaseObject.prototype,"MovieBaseObject"),window.MovieBaseObject=MovieBaseObject;var CharMonsterBlood=function(e){function t(){var t=e.call(this)||this;return t.skinName="CharMonsterBloodSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.initData=function(){this.m_HpBlood.slideDuration=0,this.m_MpBlood.slideDuration=0,this.m_NeiGongBlood.slideDuration=0,this.m_HpBlood.value=100,this.m_HpBlood.maximum=100,this.m_MpBlood.value=0,this.m_MpBlood.maximum=100,this.m_NeiGongBlood.value=0,this.m_NeiGongBlood.maximum=100,this.m_HpBlood.visible=!1,this.m_MpBlood.visible=!1,this.m_NeiGongBlood.visible=!1,this.m_Name.visible=!1,this.m_ElemtImg.visible=!1},t.prototype.show=function(){this.m_HpBlood.visible=!0,this.m_NeiGongBlood.visible=!0,this.m_Name.visible=!0,0==this.m_NeiGongBlood.value&&(this.m_NeiGongBlood.visible=!1)},t}(eui.Component);__reflect(CharMonsterBlood.prototype,"CharMonsterBlood"),window.CharMonsterBlood=CharMonsterBlood;var CharRole=function(e){function t(){var t=e.call(this)||this;return t.isCanRandomSkill=!1,t.isPlayRandomSkill=!1,t.playRandomType=SkillType.TYPE1,t.touchChildren=t.touchEnabled=!1,t.timeout=0,t._weapon=new MovieClip,t._weapon.visible=!1,t._bodyContainer.addChild(t._weapon),t._wing=new MovieClip,t._wing.visible=!1,t.addChildAt(t._wing,3),t._mounts=new MovieClip,t._mounts.visible=!1,t.addChildAt(t._mounts,0),t._disOrder={},t._disOrder[CharMcOrder.SHOWDOW]=t._shadow,t._disOrder[CharMcOrder.BODY]=t._body,t._disOrder[CharMcOrder.WEAPON]=t._weapon,t._disOrder[CharMcOrder.WING]=t._wing,t.charMonsterBlood.currentState="state1",t.charMonsterBlood.y=-75,egret.setTimeout(function(){this.infoModel&&0==this.infoModel.roleID?this.charMonsterBlood.show():this.charMonsterBlood.initData()},t,300),t.setScale(1.3),t}return __extends(t,e),t.prototype.setWeaponFileName=function(e){this._weaponFileName=e,this.loadFile(this._weapon,"weapon",this._weaponFileName)},t.prototype.setWingFileName=function(e){this._wingFileName=e,this.loadFile(this._wing,"wing",this._wingFileName)},t.prototype.setmountsFileName=function(e){this._mountsFileName=e,this.loadFile(this._mounts,"mounts",this._mountsFileName)},t.prototype.syncFrame=function(e){e.currentTarget.movieClipData.frames&&e.currentTarget.movieClipData.frames.length>0?e.currentTarget.gotoAndPlay(this._body.currentFrame,this.atkOne&&this.isAtkAction()?1:-1):e.currentTarget.play(-1)},t.prototype.playBody=function(i){if(e.prototype.playBody.call(this,i),this._wing.stop(),this._weapon.stop(),this._weapon.clearCache(),this._wing.clearCache(),this._mounts.stop(),this._mounts.clearCache(),this.infoModel&&this.infoModel.bianShen>0)return this._weapon.removeEventListener(egret.Event.CHANGE,this.syncFrame,this),void this._wing.removeEventListener(egret.Event.CHANGE,this.syncFrame,this);this._weapon.addEventListener(egret.Event.CHANGE,this.syncFrame,this),this._weaponFileName&&this.loadFile(this._weapon,"weapon",this._weaponFileName),this._wing.addEventListener(egret.Event.CHANGE,this.syncFrame,this),this._wingFileName&&this.loadFile(this._wing,"wing",this._wingFileName),this._mounts.addEventListener(egret.Event.CHANGE,this.syncFrame,this),this._mountsFileName&&this.loadFile(this._mounts,"mounts",this._mountsFileName);for(var o=i.currentTarget._fileName,s=o.slice(o.length-2,o.length-1),n=t.FRAME_ODER[s],r=0,a=0,l=n;a<l.length;a++){var h=l[a];this._bodyContainer.getChildIndex(this._disOrder[h])!=r&&this._bodyContainer.addChildAt(this._disOrder[h],r),++r}this.setScale(1.3)},t.prototype.stopFrame=function(e){this._body.stop(),this._wing.stop(),this._weapon.stop(),this._mounts.stop(),this._body.gotoAndStop(e),this._wing.visible&&this._wing.gotoAndStop(e),this._weapon.visible&&this._weapon.gotoAndStop(e),this._mounts.visible&&this._mounts.gotoAndStop(e)},t.prototype.continuePlay=function(){},t.prototype.hram=function(e){this.charMonsterBlood.m_HpBlood.value=this.charMonsterBlood.m_HpBlood.value-e,0==this.infoModel.roleID?this.showBloodTime():this.saveHp!=this.charMonsterBlood.m_HpBlood.value&&(this.saveHp=this.charMonsterBlood.m_HpBlood.value,this.showBloodTime(),this.setBloodTime())},t.prototype.updateBlood=function(t){void 0===t&&(t=!1),this.infoModel&&(this.charMonsterBlood.m_NeiGongBlood.maximum=this.infoModel.getAtt(AttributeType.atMaxShield),this.charMonsterBlood.m_NeiGongBlood.value=this.infoModel.getAtt(AttributeType.atShield),this.charMonsterBlood.m_MpBlood.maximum=this.infoModel.getAtt(AttributeType.atMaxMp),this.charMonsterBlood.m_MpBlood.value=this.infoModel.getAtt(AttributeType.atMp),e.prototype.updateBlood.call(this,t),0==this.infoModel.roleID?this.showBloodTime():this.charMonsterBlood.m_HpBlood.maximum==this.charMonsterBlood.m_HpBlood.value?this.hideBloodTime():this.saveHp!=this.charMonsterBlood.m_HpBlood.value&&(this.saveHp=this.charMonsterBlood.m_HpBlood.value,this.showBloodTime(),this.setBloodTime()))},t.prototype.loadBody=function(){this.loadFile(this._body,this.GetBodyAssetPath(),this._fileName)},t.prototype.updateModel=function(){var e=this.infoModel,t=e.sex;null==this.zhuangBanId&&(this.zhuangBanId=GlobalConfig.ins("ZhuangBanId"));var i,o=e.zhuanzhiLv;if(e.bianShen>0)this._weaponFileName="",this._wingFileName="",this._weapon.clearCache(),this._wing.clearCache(),this._body.clearCache(),this._wing.visible=!1,this._weapon.visible=!1;else{if(this._wing.visible=!0,this._weapon.visible=!0,this._mounts.visible=!0,null!=e.legendDress)i=GlobalConfig.ins("LegendSuitConfig")[e.legendDress+1],i&&this.setWeaponFileName(ResDataPath.GetWeaponName01(i.weapon,t));else{var s=e.getEquipByIndex(0).item.configID;if(e.zhuangbei[4]>0){var n=this.zhuangBanId[e.zhuangbei[4]].res2;this.setWeaponFileName(ResDataPath.GetWeaponName01(n,t))}else if(e.zhuangbei[1]>0){var n=this.zhuangBanId[e.zhuangbei[1]].res;this.setWeaponFileName(ResDataPath.GetWeaponName01(n,t))}else if(o>0){var r=GlobalConfig.ins("TransferAppearanceConfig")[e.job][o];if(r){var a=r.weaponAppearance;this.setWeaponFileName(ResDataPath.GetWeaponName01(a,t))}}else if(s>0){null==this.EquipConfig&&(this.EquipConfig=GlobalConfig.equipConfig);var l=this.EquipConfig[s].appearance;this.setWeaponFileName(ResDataPath.GetWeaponName01(l,t))}else this.setWeaponFileName(ResDataPath.GetWeaponName01(ResDataPath.GetDefaultBodyName(this.infoModel.job,1),this.infoModel.sex))}if(e.zhuangbei[2]>0){var h=this.zhuangBanId[e.zhuangbei[2]].res;this.setWingFileName(h)}else if(e.wingsData.openStatus){var c=GlobalConfig.wingLevelConfig[e.wingsData.showLv];if(c){var u=c.appearance;e.job;this.setWingFileName(u)}}if(e.zhuangbei[3]>0){var d=this.zhuangBanId[e.zhuangbei[3]].res;this.setmountsFileName(d)}else{var p=GlobalConfig.ins("MountsLevelConfig")[e.mountsShowLv];p&&this.setmountsFileName(p.appearance)}}if(null!=e.legendDress)this.initBody(ResDataPath.GetBodyName01(GlobalConfig.ins("LegendSuitConfig")[e.legendDress+1].body,e.sex)),this.setScale(1.3);else if(e.zhuangbei[4]>0){var h=this.zhuangBanId[e.zhuangbei[4]].res;this.initBody(ResDataPath.GetBodyName01(h,e.sex))}else if(e.zhuangbei[0]>0){var h=this.zhuangBanId[e.zhuangbei[0]].res;this.initBody(ResDataPath.GetBodyName01(h,e.sex)),this.setScale(1.3)}else if(o>0){var r=GlobalConfig.ins("TransferAppearanceConfig")[e.job][o];if(r){var f=r.bodyAppearance;this.initBody(ResDataPath.GetBodyName01(f,e.sex)),this.setScale(1.3)}}else s=e.getEquipByIndex(2).item.configID,null==this.EquipConfig&&(this.EquipConfig=GlobalConfig.equipConfig),this.initBody(ResDataPath.GetBodyName01(s&&s>0?this.EquipConfig[s].appearance:ResDataPath.GetDefaultBodyName(this.infoModel.job,0),e.sex)),this.setScale(1.3);if(e.legendDress){null==this.m_LegendDragon&&(this.m_LegendDragon=new MovieClip,this.m_LegendDragon.blendMode=egret.BlendMode.ADD),this.addChild(this.m_LegendDragon);var g=GlobalConfig.ins("LegendSuitConfig")[e.legendDress+1];g?(this.m_LegendDragon.visible=!0,this.m_LegendDragon.loadUrl(ResDataPath.GetUIEffePath("eff_dragon/"+g.body),!0,-1)):this.m_LegendDragon.visible=!1}else this.m_LegendDragon&&(DisplayUtils.removeFromParent(this.m_LegendDragon),this.m_LegendDragon.visible=!1);this.updateTitle()},t.prototype.GetRingPoint=function(e){var t=100,i=50;Math.sqrt((1-e*e/(t*t))*i*i);return e},t.prototype.destruct=function(){e.prototype.destruct.call(this),this._weaponFileName="",this._wingFileName="",this._mountsFileName="",this._weapon.clearCache(),this._wing.clearCache(),this._mounts.clearCache(),this._weapon.removeEventListener(egret.Event.CHANGE,this.syncFrame,this),this._wing.removeEventListener(egret.Event.CHANGE,this.syncFrame,this),this._mounts.removeEventListener(egret.Event.CHANGE,this.syncFrame,this),this._playerShadow&&this._playerShadow.clearCache(),null!=this._title&&(this._title.source=""),egret.clearTimeout(this.timeID),this._infoModel&&this.team==Team.My&&(this._infoModel.handle=null)},t.prototype.addBuff=function(t){e.prototype.addBuff.call(this,t),null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig);var i=t.effConfig;if(0==GameMap.fubenID)switch(i.type){case SkillEffType.SUMMON:var o=0;if(this.infoModel&&this.infoModel.job==JobConst.DaoShi&&this.infoModel.skillBreakData[4]){var s=this.infoModel.skillBreakData[4],n=GlobalConfig.ins("SkillsBreakConf")[35e3+s];n&&(o=n.args[0].vals[2])}t.monsterList=[];var r=EntityManager.ins().randomGetMonster();if(i.args.a.length>1){for(var a=0;a<i.args.a.length;a++){var l=MonstersConfig.createModel(this.monstersConfig[i.args.a[a]+o]);0==a?(l.x=r.x,l.y=r.y):1==a?(l.x=r.x-64,l.y=r.y+64):2==a&&(l.x=r.x+64,l.y=r.y+64),l.masterHandle=this.infoModel.handle,l.handle=i.args.a[a]+a,l.setAtt(AttributeType.atMoveSpeed,0),GameLogic.ins().createEntityByModel(l,!0),l.summonSkillId=i.args.e[a][0],t.monsterList.push(l.handle)}egret.setTimeout(this.removeBuff,this,t.endTime-t.addTime,t)}else{var l=MonstersConfig.createModel(this.monstersConfig[i.args.a+o]);l.x=this.x,l.y=this.y,l.masterHandle=this.infoModel.handle,GameLogic.ins().createEntityByModel(l,!0)}break;case SkillEffType.SUDDEN_MOVE:this.shanxianIdx=egret.setTimeout(this.buffShanxian,this,t.effConfig.args.s,t)}},t.prototype.buffShanxian=function(e){egret.clearTimeout(this.shanxianIdx);for(var t=GameMap.CELL_SIZE,i=this.x,o=this.y,s=Math.floor((i-e.effConfig.args.c)/t),n=Math.floor((o-e.effConfig.args.c)/t),r=GameMap.checkWalkable(s,n);!r;)s=Math.floor((i-MathUtils.limit(e.effConfig.args.c,Math.abs(e.effConfig.args.c)))/t),n=Math.floor((o-MathUtils.limit(e.effConfig.args.c,Math.abs(e.effConfig.args.c)))/t),r=GameMap.checkWalkable(s,n);r&&(this.x=s*t,this.y=n*t)},t.prototype.removeBuff=function(t){e.prototype.removeBuff.call(this,t);var i=t.effConfig;switch(i.type){case SkillEffType.SUMMON:if(null!=t.monsterList){for(var o=0;o<t.monsterList.length;o++){var s=new Sproto.remove_entity_request;s.handle=t.monsterList[o],GameLogic.ins().doRemoveEntity(s)}t.monsterList=null}}},t.prototype.updateTitle=function(){var e=this.infoModel.title;if(this._title&&(this._title.source=""),this._titleMc&&this._titleMc.parent&&this.removeChild(this._titleMc),e>0){var t=GlobalConfig.ins("TitleConf")[e],i=t?t.img:"";Title.IsEffName(i)?(null==this._titleMc&&(this._titleMc=new MovieClip,this._titleMc.x=0,this._titleMc.y=GameLogic.ins().actorModel.guildID?-135:-120,this._titleMc.scaleX=this._titleMc.scaleY=.5),this._titleMc.loadUrl(ResDataPath.GetUIEffePath(i),!0,-1),this.addChild(this._titleMc)):(null==this._title&&(this._title=new eui.Image,this._title.anchorOffsetX=115,this._title.anchorOffsetY=215,this._title.y=30,this.addChild(this._title)),this._title.source=GlobalConfig.ins("TitleConf")[e].img)}},Object.defineProperty(t.prototype,"infoModel",{get:function(){return this._infoModel},set:function(e){this._infoModel=e,null!=e&&this._infoModel.type==EntityType.Role&&(0==GameMap.fubenID&&e.getAtt(AttributeType.atRegeneration)&&(this.timeID=egret.setTimeout(this.autoAddBlood,this,1e3)),e.team==Team.My,this.charMonsterBlood.m_NeiGongBlood.maximum=e.getAtt(AttributeType.atMaxShield),this.charMonsterBlood.m_NeiGongBlood.value=e.getAtt(AttributeType.atShield),this.charMonsterBlood.m_MpBlood.maximum=e.getAtt(AttributeType.atMaxMp),this.charMonsterBlood.m_MpBlood.value=e.getAtt(AttributeType.atMp))},enumerable:!0,configurable:!0}),t.prototype.autoAddBlood=function(){if(this.action==EntityAction.DIE)return void egret.clearTimeout(this.timeID);if(egret.clearTimeout(this.timeID),this.getHP()<this._infoModel.getAtt(AttributeType.atMaxHp)){var e=-this._infoModel.getAtt(AttributeType.atRegeneration);this.hram(e),this.infoModel.setAtt(AttributeType.atHp,this.infoModel.getAtt(AttributeType.atHp)-e),GameLogic.ins().postEntityHpChange(this,null,DamageTypes.HIT,e),this.timeID=egret.setTimeout(this.autoAddBlood,this,1e3)}},t.prototype.GetBodyAssetPath=function(){return"body"},t.prototype.showBloodTime=function(){this.charMonsterBlood&&(this.charMonsterBlood.m_HpBlood.visible=!0,this.charMonsterBlood.m_ElemtImg.visible=!0,this.infoModel&&0==this.infoModel.roleID?this.charMonsterBlood.m_Name.visible=!0:this.infoModel&&this.infoModel.team!==Team.PASSERBY&&(this.charMonsterBlood.m_Name.visible=!1),this.charMonsterBlood.m_MpBlood&&this.charMonsterBlood.m_NeiGongBlood&&this.charMonsterBlood.m_NeiGongBlood.value>0&&(this.charMonsterBlood.m_NeiGongBlood.visible=!0))},t.prototype.hideBloodTime=function(){this.infoModel&&0!=this.infoModel.roleID&&(this.charMonsterBlood.m_HpBlood.visible=!1,this.charMonsterBlood.m_ElemtImg.visible=!1,this.infoModel.team!==Team.PASSERBY&&(this.charMonsterBlood.m_Name.visible=!1),this.charMonsterBlood.m_MpBlood&&(this.charMonsterBlood.m_MpBlood.visible=!1),this.charMonsterBlood.m_NeiGongBlood&&(this.charMonsterBlood.m_NeiGongBlood.visible=!1))},t.FRAME_ODER=[[CharMcOrder.SHOWDOW,CharMcOrder.BODY,CharMcOrder.WEAPON,CharMcOrder.WING],[CharMcOrder.SHOWDOW,CharMcOrder.BODY,CharMcOrder.WEAPON,CharMcOrder.WING],[CharMcOrder.SHOWDOW,CharMcOrder.BODY,CharMcOrder.WING,CharMcOrder.WEAPON],[CharMcOrder.SHOWDOW,CharMcOrder.WING,CharMcOrder.BODY,CharMcOrder.WEAPON],[CharMcOrder.SHOWDOW,CharMcOrder.WING,CharMcOrder.BODY,CharMcOrder.WEAPON],[CharMcOrder.SHOWDOW,CharMcOrder.WING,CharMcOrder.BODY,CharMcOrder.WEAPON],[CharMcOrder.SHOWDOW,CharMcOrder.BODY,CharMcOrder.WING,CharMcOrder.WEAPON],[CharMcOrder.SHOWDOW,CharMcOrder.BODY,CharMcOrder.WEAPON,CharMcOrder.WING]],t}(CharMonster);__reflect(CharRole.prototype,"CharRole"),window.CharRole=CharRole;var EntityBuff=function(){function e(){}return e}();__reflect(EntityBuff.prototype,"EntityBuff"),window.EntityBuff=EntityBuff;var GhostShadow=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.start=function(e){for(var t,i=this.getBtm(),o=0,s=0,n=e.getBodyCon,r=0;r<n.numChildren;r++)if(n.getChildAt(r)instanceof MovieClip&&(t=n.getChildAt(r),null!=t.movieClipData&&t.currentFrame)){var a=(t.movieClipData.getTextureByFrame(t.currentFrame),t.movieClipData.frames[t.currentFrame-1]);a.x<o&&(o=a.x),a.y<s&&(s=a.y)}i.x=e.x+n.x+o-n.width/2*.3+7,i.y=e.y+n.y+s-.3*n.height+4;var l=new egret.RenderTexture;return l.drawToTexture(n,new egret.Rectangle(o,s,n.width,n.height)),i.texture=l,e.parent?(0!=e.dir?e.parent.addChildAt(i,e.parent.getChildIndex(e)-1):e.parent.addChild(i),void egret.Tween.get(i).to({alpha:0},1e3).call(function(e){egret.Tween.removeTweens(i),e.texture.dispose(),e.parent.removeChild(e),e.alpha=1,ObjectPool.ins().push(this)},this,[i])):void ObjectPool.ins().push(this)},t.prototype.getBtm=function(){if(null==this.bit){this.bit=new egret.Bitmap,this.bit.scaleX=this.bit.scaleY=1.3;var e=[0,0,0,0,0,0,0,0,0,0,0,0,95,0,0,0,0,0,1,0],t=new egret.ColorMatrixFilter(e);this.bit.filters=[t]}return this.bit},t}(egret.DisplayObjectContainer);__reflect(GhostShadow.prototype,"GhostShadow"),window.GhostShadow=GhostShadow;var UIHelper=function(){function e(){}return e.SetHead=function(e,t,i){if(null!=e){var o=e.face;return null==o?void console.log("UIHelper.SetHead face == null"):void(o.source=ResDataPath.GetHeadMiniImgName(t,i))}},e.SetHeadByHeadId=function(e,t){if(null!=e){var i=e.face;return null==i?void console.log("UIHelper.SetHeadByHeadId face == null"):void(i.source=t?ResDataPath.GetHeadMiniImgNameById(t):"")}},e.ShowRedPoint=function(e,t){if(e){var i=e.redPoint;if(null==i){var o=e;o&&(i=o.getChildByName("redPoint"))}return i?void(i&&(i.visible=t)):void console.log("没有设置提示图标"+e.name,e.name)}},e.SetBtnNormalEffe=function(e,t){var i=57,o=6,s=1,n=1,r="eff_btn_orange",a=e.getChildByName(r);a?t?a.loadUrl(ResDataPath.GetUIEffePath(r),!0,-1):DisplayUtils.removeFromParent(a):t&&(a=new MovieClip,a.name=r,a.x=i,a.y=o,a.scaleX=s,a.scaleY=n,e.addChildAt(a,1),a.loadUrl(ResDataPath.GetUIEffePath(r),!0,-1))},e.SetBtn1aSkinEffe=function(e,t){var i=40,o=17,s=1,n=1,r="eff_btn_white",a=e.getChildByName(r);a?t?a.loadUrl(ResDataPath.GetUIEffePath(r),!0,-1):DisplayUtils.removeFromParent(a):t&&(a=new MovieClip,a.name=r,a.x=i,a.y=o,a.scaleX=s,a.scaleY=n,e.addChild(a),a.loadUrl(ResDataPath.GetUIEffePath(r),!0,-1))},e.SetBtnNormalScaleEffe=function(e,t,i,o,s,n){void 0===i&&(i=1.1),void 0===o&&(o=1),void 0===s&&(s=50),void 0===n&&(n=17);var r="normalbtn1",a=e.getChildByName(r);a?t?a.loadUrl(ResDataPath.GetUIEffePath(r),!0,-1):DisplayUtils.removeFromParent(a):t&&(a=new MovieClip,a.name=r,a.x=s,a.y=n,a.scaleX=i,a.scaleY=o,e.addChild(a),a.loadUrl(ResDataPath.GetUIEffePath(r),!0,-1))},e.SetBtnEffe=function(e,t,i,o,s,n,r,a){void 0===o&&(o=null),void 0===s&&(s=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===a&&(a=null);var l=e.getChildByName(t);l?i?l.loadUrl(ResDataPath.GetUIEffePath(t),!0,-1):DisplayUtils.removeFromParent(l):i&&(l=new MovieClip,l.name=t,null==a?e.addChild(l):e.addChildAt(l,a),l.loadUrl(ResDataPath.GetUIEffePath(t),!0,-1)),l&&l.parent&&((o||s)&&(l.scaleX=o||s,l.scaleY=s||o),l.x=n||0,l.y=r||0)},e.SetIconMovie=function(e,t){if(void 0===t&&(t=null),e){t=null!=t?t:e.y,egret.Tween.removeTweens(e);var i=egret.Tween.get(e,{loop:!0});e.y=t;var o=t+20,s=t;i.to({y:o},1500).to({y:s},1500).call(function(){egret.Tween.removeTweens(e)})}},e.RemoveIconMovie=function(e){egret.Tween.removeTweens(e)},e.SetBtnJumpEffe=function(e,t){var i=27,o=7,s="eff_btn_gain",n=e.getChildByName(s);n?t?n.loadUrl(ResDataPath.GetUIEffePath(s),!0,-1):DisplayUtils.removeFromParent(n):t&&(n=new MovieClip,n.name=s,n.x=i,n.y=o,e.addChild(n),n.loadUrl(ResDataPath.GetUIEffePath(s),!0,-1))},e.SetCircleEffe=function(t,i,o,s,n,r,a){void 0===o&&(o=32),void 0===s&&(s=35),void 0===n&&(n=1),void 0===r&&(r=1),void 0===a&&(a=null),e.SetBtnEffe(t,"eff_main_icon02",i,n,r,o,s,a)},e.ScrollHIndex=function(e,t,i,o){null==o&&(o=e.width),e.validateNow();var s=e.numElements*i-o;e.scrollH=Math.min(t*i,s)},e.ScrollHRight=function(e,t,i){null==i&&(i=e.width),e.scrollH=Math.min(e.numElements*t-i,e.scrollH+i)},e.ScrollHLeft=function(e,t){null==t&&(t=e.width),e.scrollH=Math.max(0,e.scrollH-t)},e.ScrollVIndex=function(e,t,i,o){null==o&&(o=e.height),e.validateNow();var s=e.numElements*i-o;e.scrollV=Math.min(t*i,s)},e.ShowItemListEff=function(e){if(null!=e){e.validateNow();for(var t=0;t<e.numChildren;++t){var i=e.getChildAt(t);i&&i.showItemEffect&&i.showItemEffect()}}},e.SetLinkStyleLabel=function(e,t){void 0===t&&(t=null),e.textFlow=(new egret.HtmlTextParser).parser('<a href="event:"><u>'+(null==t?e.text:t)+"</u></a>")},e.SetMonsterMc=function(e,t){if(null!=e){e.scaleX=-1;var i=GlobalConfig.monstersConfig[t];null!=i&&e.loadUrl(ResDataPath.GetMonsterBodyPath(i.avatar+"_3s"),!0,-1)}},e}();__reflect(UIHelper.prototype,"UIHelper"),window.UIHelper=UIHelper;var WxSystemInfo=function(){function e(){}return e}();__reflect(WxSystemInfo.prototype,"WxSystemInfo"),window.WxSystemInfo=WxSystemInfo;var GameGuider=function(){function e(){}return e.taskGuidance=function(t,i){switch(i){case 0:var o=GlobalConfig.ins("DailyConfig")[t];1==o.control&&e.guidance(o.controlTarget[0],o.controlTarget[1]);break;case 1:var s=UserTask.ins().getAchieveConfById(t);1==s.control&&this.checkAndGuideForAchievementTask(s);break;case 2:var n=NewFunNotice.ins().getFunConfByIndex(t);1==n.control&&e.guidance(n.controlTarget[0],n.controlTarget[1])}},e.checkAndGuideForAchievementTask=function(e){if(e){var t=!0;if(3005==e.achievementId){var i=GlobalConfig.ins("JingMaiCommonConfig");i?GameLogic.ins().actorModel.level<i.openLevel&&(UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101464,[i.openLevel])),t=!1):console.error("JingMaiCommonConfig is null")}t&&ViewManager.Guide(e.controlTarget[0],e.controlTarget[1])}},e.guidance=function(e,t){return void 0===t&&(t=0),ViewManager.Guide(e,t)},e}();__reflect(GameGuider.prototype,"GameGuider"),window.GameGuider=GameGuider;var NewFunNotice=function(e){function t(){var t=e.call(this)||this;return t.mainIndex=0,t.mainState=0,t.mainIndex=0,t.mainState=0,t.sysId=PackageID.NewFunNotice,t.regNetMsg(1,t.postFunNoticeInfo),t}return __extends(t,e),t.prototype.postFunNoticeInfo=function(e){this.mainIndex=e.readInt(),this.mainState=e.readUnsignedByte(),this.isHaveReward=e.readBoolean(),console.log("this.mainIndex："+this.mainIndex+"  this.mainState：\n		"+this.mainState+"  this.mainRewardState："+this.isHaveReward)},t.prototype.sendRewardInfo=function(){this.sendBaseProto(1)},t.prototype.sendGetReward=function(e){var t=this.getBytes(2);t.writeInt(e),this.sendToServer(t)},t.prototype.getFunConfByIndex=function(e){null==this.FuncNoticeConfig&&(this.FuncNoticeConfig=GlobalConfig.ins("FuncNoticeConfig"));var t=this.FuncNoticeConfig;if(Assert(t,"FuncNoticeConfig is null"))return null;for(var i in t)if(t[i].index==e)return t[i];return null},t.prototype.getFunOpenConfByIcon=function(e){if(null==this.funcOpenConfig&&(this.funcOpenConfig=GlobalConfig.ins("FuncOpenConfig")),Assert(this.funcOpenConfig,"FuncOpenConfig is null"))return null;for(var t in this.funcOpenConfig)if(this.funcOpenConfig[t].mainicon==e)return this.funcOpenConfig[t];return null},t.prototype.isOpenFunc=function(e){var t=this.getFunOpenConfByIcon(e);if(Assert(t,"FuncOpenConfig data is null"))return!1;var i=0;return t.openlv?(i=GameLogic.ins().actorModel.level,i>=t.openlv):t.openscene?(i=UserFb.ins().guanqiaID,i>=t.openscene):t.openzs?(i=UserZs.ins().lv,i>=t.openzs):!1},t}(BaseSystem);__reflect(NewFunNotice.prototype,"NewFunNotice"),MessageCenter.compile(NewFunNotice),window.NewFunNotice=NewFunNotice;var GameMap=function(){function e(){}return e.init=function(){if(this.grid=this.grid||new MapGrid,this.aStar=this.aStar||new AStar,this.compFuncs=this.compFuncs||[],this.mapZip=this.mapZip||new JSZip(RES.getRes("map")),this.mapZip)var e=egret.setTimeout(function(){egret.clearTimeout(e);var t=RES.destroyRes("map");console.log("地图释放"+t),ResMgr.ins().clearConfig()},this,5e3)},e.update=function(){var t=e.getFileName();null==this.mapZip&&(this.mapZip=new JSZip(RES.getRes("map")),RES.destroyRes("map"));var i=this.mapZip.file(ResDataPath.GetMapData(t));i?this.parserBytes(i.asArrayBuffer()):egret.log("地图资源读取异常:"+t)},e.parserBytes=function(e){var t=new Uint8Array(e),i=new Zlib.Inflate(t),o=i.decompress(),s=new egret.ByteArray(o.buffer);s.readUTF();var n=s.readInt();this.CELL_SIZE=s.readByte(),this.MAX_WIDTH=s.readInt(),this.MAX_HEIGHT=s.readInt(),this.ROW=s.readInt(),this.COL=s.readInt(),this.grid.initGrid(this.ROW,this.COL,s,2==n),this.aStar.initFromMap(this.grid),GameLogic.ins().enterMap();for(var r,a=0;a<this.compFuncs.length;a++)r=this.compFuncs[a],r.func.call(r.obj);this.compFuncs.length=0},e.moveEntity=function(t,i,o,s){void 0===s&&(s=!1);var n,r=e.CELL_SIZE,a=Math.floor(t.x/r),l=Math.floor(t.y/r),h=Math.floor(i/r),c=Math.floor(o/r);n=s||a==i&&l==o?[new AStarNode(h,c,DirUtil.get8DirBy2Point({x:t.x,y:t.y},{x:i,y:o}))]:this.aStar.getPatch(a,l,h,c),GameLogic.ins().postMoveEntity(t,n)},e.myMoveTo=function(e,t,i,o){for(var s,n=SubRoles.ins().subRolesLen,r=0;n>r;r++)s=EntityManager.ins().getMainRole(r),this.moveEntity(s,e,t);var a=function(){for(var r=!0,l=0;n>l;l++)s=EntityManager.ins().getMainRole(l),s.action==EntityAction.RUN&&(MathUtils.getDistance(s.x,s.y,e,t)<100&&(s.stopMove(),s.playAction(EntityAction.STAND)),r=!1);r&&(TimerManager.ins().remove(a,this),i.call(o))};TimerManager.ins().doTimer(500,0,a,this)},e.checkWalkable=function(t,i){var o=!1,s=e.grid.getNode(t,i);return s&&(o=s.walkable),o},e.checkAlpha=function(t,i){var o=!1,s=e.grid.getNode(t,i);return s&&(o=s.hidden),o},e.addCompFunc=function(e,t){this.compFuncs.push({func:e,obj:t})},e.parser=function(e){if(null!=e){this.fubenID=e.fubenID,this.mapID=e.mapID,this.mapX=Const.PosToPixel(e.mapX),this.mapY=Const.PosToPixel(e.mapY),this.fbType=e.fbType,this.fbName=e.fbName,this.fbDesc=e.fbDesc,GameGlobal.MessageCenter.dispatch(MessageDef.FUBEN_CHANGE),RaidMgr.ins().DoFbChange();
var t=SoundSetPanel.getSoundLocalData("soundBg");t&&(this.IsNoramlLevel()?SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[1].id,-1):SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[2].id,-1)),this.IsNoramlLevel()||this.IsGuanQiaBoss()||(ViewManager.ins().isShow(GuildMap)&&ViewManager.ins().close(GuildMap),ViewManager.ins().isShow(GuildActivityWin)&&ViewManager.ins().close(GuildActivityWin),(this.fbType==UserFb.FB_TYPE_GUILD_ROBBER||this.fbType==UserFb.FB_TYPE_GUILD_FB)&&(ViewManager.ins().isShow(LadderWin)&&(ViewManager.ins().close(LadderWin),console.log("auto close ladder window!!!")),ViewManager.ins().isShow(BossWin)&&(ViewManager.ins().close(BossWin),console.log("auto close boss window!!!")),ViewManager.ins().isShow(LadderWin)&&(ViewManager.ins().close(LadderWin),console.log("auto close LadderWin window!!!")),ViewManager.ins().isShow(FbWin)&&(ViewManager.ins().close(FbWin),console.log("auto close fbwin window!!!")))),this.IsGuildWar()&&(this.CloseView(GuildMap),this.CloseView(GuildWarMainBgWin))}},e.CloseView=function(e){return ViewManager.ins().isShow(e)?(ViewManager.ins().close(e),!0):!1},Object.defineProperty(e,"fubenID",{get:function(){return this._fubenID},set:function(e){this._fubenID=e,e>0&&GameLogic.ins().postHookStateChange(GameLogic.HOOK_STATE_HOOK),0!=e&&OtherAIModel.getInstance.releaseAll()},enumerable:!0,configurable:!0}),e.IsNoramlLevel=function(){return 0==this._fubenID},e.IsGuanQiaBoss=function(){return e.fbType==UserFb.FB_TYPE_GUANQIABOSS},e.IsZhuanshengBoss=function(){return e.fbType==UserFb.FB_TYPE_ZHUANSHENGBOSS},e.IsPersonalBoss=function(){return this.fbType==UserFb.FB_TYPE_PERSONAL_BOSS},e.IsCityBoss=function(){return this.fbType==UserFb.FB_TYPE_CITYBOSS},e.IsPublicBoss=function(){return this.fbType==UserFb.FB_TYPE_PUBLIC_BOSS},e.IsGuildBoss=function(){return this.fbType==UserFb.FB_TYPE_GUILD_BOSS},e.IsGuildCopy=function(){return this.fbType==UserFb.FB_TYPE_GUILD_FB},e.getFileName=function(){var e=GlobalConfig.ins("ScenesConfig")[this.mapID];return null==e?(console.log("地图数据异常："+this.mapID),"新手村"):e.mapfilename},e.IsGuildRobber=function(){return this.fbType==UserFb.FB_TYPE_GUILD_ROBBER},e.IsGuildWar=function(){return this.fbType==UserFb.FB_TYPE_GUILD_WAR},e.IsKfBoss=function(){return this.fbType==UserFb.FB_TYPE_KFBOSS},e.IsWorldBoss=function(){return e.fbType==UserFb.FB_TYPE_WORLDBOSS},e.IsXbBoss=function(){return e.fbType==UserFb.FB_TYPE_XBBOSS},e.IsHomeBoss=function(){return e.fbType==UserFb.FB_TYPE_HOME_BOSS},e.IsTenKill=function(){return e.fbType==UserFb.FB_TYPE_TENKILL},e.IsMiJing=function(){return e.fbType==UserFb.FB_TYPE_MIJING},e.IsSyBoss=function(){return e.fbType==UserFb.FB_TYPE_SYBOSS},e.IsHeroBattle=function(){return e.fbType==UserFb.FB_TYPE_HEROBATTLE},e.IsTiaoZhan=function(){return e.fbType==UserFb.FB_TYPE_TIAOZHAN},e.IsTeamFb=function(){return e.fbType==UserFb.FB_TYPE_TEAM},e.IsMaterialFb=function(){return e.fbType==UserFb.FB_TYPE_MATERIAL},e.IsChaosBttle=function(){return e.fbType==UserFb.FB_TYPE_CHAOSBATTLE},e.compFuncs=[],e}();__reflect(GameMap.prototype,"GameMap"),window.GameMap=GameMap;var MapView=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"dropLayer",{get:function(){return this._dropLayer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entityLayer",{get:function(){return this._entityLayer},enumerable:!0,configurable:!0}),t.prototype.initMap=function(){this._stepIndex={},this._mapImage=new MapViewBg,this.addChild(this._mapImage),this._dropLayer=new egret.DisplayObjectContainer,this.addChild(this._dropLayer),this._entityLayer=new egret.DisplayObjectContainer,this.addChild(this._entityLayer),this._bloodLayer=new BloodView,this.addChild(this._bloodLayer),DropHelp.init(this._dropLayer),TimerManager.ins().doTimer(500,0,this.sortEntity,this),MessageCenter.addListener(GameLogic.ins().postMoveEntity,this.moveEntity,this),MessageCenter.addListener(GameLogic.ins().postMoveCamera,this.lookAt,this)},t.prototype.sortEntity=function(){this._entityLayer.$children.sort(this.sortF)},t.prototype.sortF=function(e,t){return e.y>t.y?1:e.y<t.y?-1:0},t.prototype.addEntity=function(e,t){void 0===t&&(t=100),this._entityLayer.addChildAt(e,t)},t.prototype.checkEntityAlpha=function(e){var t=this["this"],i=this.entity,o=Math.floor(i.x/GameMap.CELL_SIZE),s=Math.floor(i.y/GameMap.CELL_SIZE);i.alpha=GameMap.checkAlpha(o,s)?.7:1,i==EntityManager.ins().getNoDieRole()&&t.lookAt()},t.prototype.moveEntity=function(e){var t=e[0],i=e[1];i&&i.length?(this._stepIndex[t.hashCode]=i.length-1,this.moveNextStep(t,i)):t.playAction(EntityAction.STAND)},t.prototype.moveNextStep=function(e,t){var i=this;if(egret.Tween.removeTweens(e),this._stepIndex[e.hashCode]<0)return e.moveTween=null,void e.playAction(EntityAction.STAND);var o=e.moveSpeed/1e3,s=t[this._stepIndex[e.hashCode]],n=new egret.Point(s.nX*GameMap.CELL_SIZE+(GameMap.CELL_SIZE>>1),s.nY*GameMap.CELL_SIZE+(GameMap.CELL_SIZE>>1)),r=n.x-e.x,a=n.y-e.y,l=Math.sqrt(r*r+a*a);e.dir=s.nDir,e.playAction(EntityAction.RUN);var h=egret.Tween.get(e,{onChange:this.checkEntityAlpha,onChangeObj:{"this":this,entity:e}});h.to({x:n.x,y:n.y},l/o).call(function(){i._stepIndex[e.hashCode]--,i.moveNextStep(e,t)},this),e.moveTween=h},t.prototype.onGridClick=function(e){var t=EntityManager.ins().getNoDieRole();null==t||t.isHardStraight||GameMap.moveEntity(t,e.localX,e.localY)},t.prototype.lookAt=function(){var e=EntityManager.ins().getNoDieRole();null!=e&&(this.x=-Math.min(Math.max(e.x-(StageUtils.ins().getWidth()>>1),0),GameMap.MAX_WIDTH-StageUtils.ins().getWidth()),this.y=-Math.min(Math.max(e.y-50-(StageUtils.ins().getHeight()>>1),0),GameMap.MAX_HEIGHT-StageUtils.ins().getHeight())-t.CAMERA_HEI,this._mapImage?this._mapImage.updateHDMap(this):Main.errorBack("MapView lookAt _mapImage=null mapId="+GameMap.fubenID+" "+GameMap.fbName))},t.prototype.looAtTween=function(){var e=this,i=EntityManager.ins().getNoDieRole();if(null!=i){var o=-Math.min(Math.max(i.x-(StageUtils.ins().getWidth()>>1),0),GameMap.MAX_WIDTH-StageUtils.ins().getWidth()),s=-Math.min(Math.max(i.y-50-(StageUtils.ins().getHeight()>>1),0),GameMap.MAX_HEIGHT-StageUtils.ins().getHeight())-t.CAMERA_HEI,n=egret.Tween.get(this,{onChange:this.tweenSyncFun,onChangeObj:this});n.to({x:o,y:s},300).call(function(){egret.Tween.removeTweens(e)})}},t.prototype.tweenSyncFun=function(){this._mapImage.updateHDMap(this)},t.prototype.changeMap=function(){t.DRAW_GRID?this.drawGrid():this._shapeContainer&&this._shapeContainer.parent&&this.removeChild(this._shapeContainer),this._mapImage.initThumbnail(GameMap.MAX_WIDTH,GameMap.MAX_HEIGHT,GameMap.getFileName()),this.x=-Math.min(Math.max(GameMap.mapX-(StageUtils.ins().getWidth()>>1),0),GameMap.MAX_WIDTH-StageUtils.ins().getWidth()),this.y=-Math.min(Math.max(GameMap.mapY-50-(StageUtils.ins().getHeight()>>1),0),GameMap.MAX_HEIGHT-StageUtils.ins().getHeight())-t.CAMERA_HEI,this._mapImage.updateHDMap(this,!0)},t.prototype.drawGrid=function(){var e=this._shape||new egret.Shape;this._shapeContainer=this._shapeContainer||new egret.DisplayObjectContainer,this._shapeContainer.cacheAsBitmap=!0,this._shapeContainer.touchEnabled=!1,this._shapeContainer.touchChildren=!1,e.graphics.clear(),e.graphics.lineStyle(.1);for(var t=GameMap.COL,i=GameMap.ROW,o=0;t>o;o++)for(var s=0;i>s;s++){GameMap.checkAlpha(o,s)?e.graphics.beginFill(65280,.3):GameMap.checkWalkable(o,s)?e.graphics.beginFill(13421772,.3):e.graphics.beginFill(16282482,.3),e.graphics.drawRect(o*GameMap.CELL_SIZE,s*GameMap.CELL_SIZE,GameMap.CELL_SIZE,GameMap.CELL_SIZE),e.graphics.endFill();var n=new eui.Label;n.size=12,n.text=o+","+s,n.x=o*GameMap.CELL_SIZE,n.y=s*GameMap.CELL_SIZE,this._shapeContainer.addChild(n)}this._shapeContainer.addChild(e),this.addChild(this._shapeContainer),this._shape=e},t.prototype.clearBloodLayer=function(){this._bloodLayer.removeChildren()},t.CAMERA_HEI=0,t.DRAW_GRID=!1,t}(egret.DisplayObjectContainer);__reflect(MapView.prototype,"MapView"),window.MapView=MapView;var MapViewBg=function(e){function t(){var t=e.call(this)||this;return t.IMG_SIZE=512,t.lastUpdateX=0,t.lastUpdateY=0,t.touchChildren=!1,t.touchEnabled=!1,t._imageList=[],t}return __extends(t,e),t.prototype.dispose=function(){for(var e=0;e<this._imageList.length;e++)if(null!=this._imageList[e])for(var t=0;t<this._imageList[e].length;t++)this._imageList[e][t]&&(DisplayUtils.dispose(this._imageList[e][t]),this._imageList[e][t]=null);this._imageList=[],this.removeChildren(),this.thumbnail=null},t.prototype.onThumbnailComplete=function(e){this.updateHDMap({x:this.lastUpdateX,y:this.lastUpdateY},!0)},t.prototype.initThumbnail=function(e,t,i){if(this.mapName!=i&&(this.dispose(),this.thumbnail=new eui.Image,this.addChild(this.thumbnail)),null==this.thumbnail)return null;this.mapName=i,this.thumbnail.width=e,this.thumbnail.height=t,this.thumbnail.source=i+"_jpg";var o=this.IMG_SIZE;this.maxImagX=Math.ceil(e/o),this.maxImagY=Math.ceil(t/o),this.updateHDMap({x:this.lastUpdateX,y:this.lastUpdateY},!0)},t.prototype.updateHDMap=function(e,t){if(void 0===t&&(t=!1),t||Math.abs(this.lastUpdateX-e.x)>this.IMG_SIZE/4||Math.abs(this.lastUpdateY-e.y)>this.IMG_SIZE/4||0==this.lastUpdateX){this.lastUpdateX=e.x,this.lastUpdateY=e.y;for(var i=StageUtils.ins().getWidth(),o=StageUtils.ins().getHeight(),s=Math.max(Math.floor(-e.x/this.IMG_SIZE),0),n=Math.max(Math.floor(-e.y/this.IMG_SIZE),0),r=s+Math.floor(i/this.IMG_SIZE)+1,a=n+Math.floor(o/this.IMG_SIZE)+1,l=s;r>=l&&l<this.maxImagX;l++)for(var h=n;a>=h&&h<this.maxImagY;h++){var c=ResDataPath.GetMapPath(this.mapName,l,h);this._imageList[h]=this._imageList[h]||[];var u=this._imageList[h][l]||new eui.Image;u.source!=c&&(u.source=c,u.name=c,u.x=l*this.IMG_SIZE,u.y=h*this.IMG_SIZE,u.width=this.IMG_SIZE,u.height=this.IMG_SIZE,this._imageList[h][l]=u,ResMgr.ins().saveMap(this.mapName,c)),u.parent||this.addChild(u)}}},t}(egret.Sprite);__reflect(MapViewBg.prototype,"MapViewBg"),window.MapViewBg=MapViewBg;var AcrossLadderCenter=function(e){function t(){var t=e.call(this)||this;return t.acrossLadderPanelModel=AcrossLadderPanelData.ins(),t.regNetMsg(S2cProtocol.sc_cross_get_self_info,t.doMsgAcrossLadderSelfInfo),t.regNetMsg(S2cProtocol.sc_get_cross_tianti_list,t.doMsgAcrossLadderList),t.regNetMsg(S2cProtocol.sc_cross_start_combat,t.doMsgAcrossLadderStartCombat),t.regNetMsg(S2cProtocol.sc_cross_combat_result,t.doMsgAcrossLadderCombatResult),t.regNetMsg(S2cProtocol.sc_cross_get_combat_record,t.doMsgAcrossLadderRecord),t.regNetMsg(S2cProtocol.sc_cross_get_tianti_rank_info,t.doMsgAcrossLadderRank),t.regNetMsg(S2cProtocol.sc_cross_get_tianti_history_rank,t.doMsgAcrossLadderHistoryRank),t.regNetMsg(S2cProtocol.sc_cross_gain_tianti_history_award,t.doMsgAcrossLadderHistoryReward),t.regNetMsg(S2cProtocol.sc_cross_buy_combat_num,t.doMsgAcrossLadderBuyCombatNum),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.doMsgAcrossLadderSelfInfo=function(e){this.acrossLadderPanelModel.updateSelfInfoData(e),MessageCenter.ins().dispatch(MessageDef.ACROSSLADDER_REFRESH_PLAYER_INFO)},t.prototype.doMsgAcrossLadderList=function(e){this.acrossLadderPanelModel.updateItemsData(e),MessageCenter.ins().dispatch(MessageDef.ACROSSLADDER_REFRESH_ITEMS)},t.prototype.doMsgAcrossLadderStartCombat=function(e){switch(e.combatState){case 0:UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101681);break;case 1:UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101682);break;case 2:ViewManager.ins().close(AcrossLadderChallengeTip);break;case 10:MessageCenter.ins().dispatch(MessageDef.ACROSSLADDER_CHALLENGE_CONFIRM)}},t.prototype.doMsgAcrossLadderRecord=function(e){this.acrossLadderPanelModel.updateRecordData(e),ViewManager.ins().open(AcrossLadderRecord)},t.prototype.doMsgAcrossLadderRank=function(e){this.acrossLadderPanelModel.updateRankData(e),ViewManager.ins().open(AcrossLadderRank)},t.prototype.doMsgAcrossLadderCombatResult=function(e){e.isWin?ViewManager.ins().open(AcrossLadderResultWin,e.rewardData,e.lastRank,e.nowRank):ViewManager.ins().open(ResultWin,!1)},t.prototype.doMsgAcrossLadderHistoryRank=function(e){this.acrossLadderPanelModel.updateHistoryRankData(e),MessageCenter.ins().dispatch(MessageDef.ACROSSLADDER_HISTORY_RANK)},t.prototype.doMsgAcrossLadderHistoryReward=function(e){},t.prototype.doMsgAcrossLadderBuyCombatNum=function(e){},t.prototype.reqAcrossLadderInfo=function(e){void 0===e&&(e=!1),e||GameSocket.ins().Rpc(C2sProtocol.cs_cross_get_self_info,new Sproto.cs_cross_get_self_info_request),GameSocket.ins().Rpc(C2sProtocol.cs_get_cross_tianti_list,new Sproto.cs_get_cross_tianti_list_request)},t.prototype.reqAcrossLadderStartCombat=function(e,t){var i=new Sproto.cs_cross_start_combat_request;i.dbid=e,i.combat=t,GameSocket.ins().Rpc(C2sProtocol.cs_cross_start_combat,i)},t.prototype.reqAcrossLadderRecord=function(){GameSocket.ins().Rpc(C2sProtocol.cs_cross_get_combat_recode,new Sproto.cs_cross_get_combat_recode_request)},t.prototype.reqAcrossLadderRank=function(){GameSocket.ins().Rpc(C2sProtocol.cs_cross_get_tianti_rank_info,new Sproto.cs_cross_get_tianti_rank_info_request)},t.prototype.reqAcrossLadderHistoryRank=function(){GameSocket.ins().Rpc(C2sProtocol.cs_cross_get_tianti_history_rank,new Sproto.cs_cross_get_tianti_history_rank_request)},t.prototype.reqAcrossLadderHistoryReward=function(e){var t=new Sproto.cs_cross_gain_tianti_history_award_request;t.cfgIndex=e,GameSocket.ins().Rpc(C2sProtocol.cs_cross_gain_tianti_history_award,t)},t.prototype.reqBuyCombatNum=function(e){var t=new Sproto.cs_cross_buy_combat_num_request;t.num=e,GameSocket.ins().Rpc(C2sProtocol.cs_cross_buy_combat_num,t)},t.prototype.rankRewardRedPoint=function(){var e=GlobalConfig.ins("KuafuJingJiBestRankAwardConfig"),t=0,i=AcrossLadderPanelData.ins().rank,o=AcrossLadderPanelData.ins().rewardCfgIdxArr,s=0;for(var n in e)if(s=Number(n),t=o.indexOf(n),o.length>0&&-1==t&&s>=i)return!0;return!1},t}(BaseSystem);__reflect(AcrossLadderCenter.prototype,"AcrossLadderCenter"),MessageCenter.compile(AcrossLadderCenter),window.AcrossLadderCenter=AcrossLadderCenter;var AcrossLadderItemData=function(){function e(){}return e.prototype.parser=function(e){for(var t=e.roles.length,i=0;t>i;i++)this.disposeData(e.roles[i])},e.prototype.disposeData=function(e){this.playerId=e.dbid,this.playerName=e.name,this.zsLv=e.zhuansheng_lv,this.lv=e.level,this.rank=e.rank,this.power=e.power,this.job=e.job,this.sex=e.sex,this.weaponId=e.weaponId,this.clothesId=e.clothesId,this.wingOpenState=e.wingOpenState,this.wingLevel=e.wingLevel,this.combatState=e.combatState,this.m_ElementType=e.mainEle},e}();__reflect(AcrossLadderItemData.prototype,"AcrossLadderItemData"),window.AcrossLadderItemData=AcrossLadderItemData;var AcrossLadderPanelData=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.head="",t.power=0,t.rank=0,t.win=0,t.lost=0,t.challengeNum=0,t.todayBuyTimes=0,t.flagBuyTips=!1,t.rewardCfgIdxArr=[],t.playerList=[],t.recordList=[],t.rankList=[],t.baseConfig=null,t}return __extends(t,e),t.ins=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.ins.call(this)},t.prototype.updateSelfInfoData=function(e){this.head=ResDataPath.GetHeadMiniImgName(e.job,e.sex),this.power=e.power,this.rank=0==e.rank?t.DEFAULT_RANK:e.rank,this.win=e.winNum,this.lost=e.lossNum,this.challengeNum=e.times,this.todayBuyTimes=e.dailyBuyNum,this.m_ElementType=e.mainEle},t.prototype.updateItemsData=function(e){if(this.playerList.length=0,this.setTargetPlayerId(0),null!=e.roles)for(var t=e.roles.length,i=0;t>i;i++){var o=new AcrossLadderItemData;o.disposeData(e.roles[i]),this.playerList.push(o)}},t.prototype.updateRecordData=function(e){if(this.recordList.length=0,null!=e.combatRecord)for(var t=e.combatRecord.length,i=0;t>i;i++){var o=new AcrossLadderRecordItemData;o.disposeData(e.combatRecord[i]),this.recordList.push(o)}},t.prototype.updateRankData=function(e){if(this.rankList.length=0,null!=e.rankInfo)for(var t=e.rankInfo.length,i=0;t>i;i++){var o=new AcrossLadderRankItemData;o.disposeData(e.rankInfo[i]),this.rankList.push(o)}},t.prototype.updateHistoryRankData=function(e){this.rank=e.selfRank,0==this.rank&&(this.rank=t.DEFAULT_RANK),this.rewardCfgIdxArr=[];for(var i=e.award_history_info.length,o=0;i>o;o++)this.rewardCfgIdxArr.push(e.award_history_info[o].cfgIndex.toString())},t.prototype.getTargetPlayerId=function(){return this.targetPlayerId},t.prototype.setTargetPlayerId=function(e){this.targetPlayerId=e},t.prototype.getCurrentPlayerItem=function(){return this.getPlayerItem(this.targetPlayerId)},t.prototype.getPlayerItem=function(e){for(var t=0,i=this.playerList;t<i.length;t++){var o=i[t];if(o.playerId==e)return o}return null},t.prototype.getBaseCfg=function(){return null==this.baseConfig&&(this.baseConfig=GlobalConfig.ins("KuafuJingJiBaseConfig")),this.baseConfig},t.DEFAULT_RANK=1e4,t}(BaseClass);__reflect(AcrossLadderPanelData.prototype,"AcrossLadderPanelData"),window.AcrossLadderPanelData=AcrossLadderPanelData;var AcrossLadderRankItemData=function(){function e(){}return e.prototype.parser=function(e){for(var t=e.rankInfo.length,i=0;t>i;i++)this.disposeData(e.rankInfo[i])},e.prototype.disposeData=function(e){this.playerId=e.serverid,this.name=e.name,this.power=e.power,this.zhLv=e.zhuansheng_lv,this.lv=e.level,this.rank=e.rank},e}();__reflect(AcrossLadderRankItemData.prototype,"AcrossLadderRankItemData"),window.AcrossLadderRankItemData=AcrossLadderRankItemData;var AcrossLadderRecordItemData=function(){function e(){}return e.prototype.parser=function(e){for(var t=e.combatRecord.length,i=0;t>i;i++)this.disposeData(e.combatRecord[i])},e.prototype.disposeData=function(e){this.recordTypeOrg=e.isCombat,this.recordResultOrg=e.isWin,this.opPlayerId=e.revengeDbid,this.opName=e.name,this.opZsLv=e.zhuansheng_lv,this.opLv=e.level,this.rankChange=e.rankChange,this.rankChangeNum=e.selfRankChangeNum,this.recordTime=e.recordTime},e}();__reflect(AcrossLadderRecordItemData.prototype,"AcrossLadderRecordItemData"),window.AcrossLadderRecordItemData=AcrossLadderRecordItemData;var AcrossLadderChallengeTip=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="AcrossLadderChallengeTipSkin",this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101465,this.btnChallenge.label=GlobalConfig.jifengTiaoyueLg.st100046,this.titleLabel.text=GlobalConfig.jifengTiaoyueLg.st101466,this.m_bg.init("AcrossLadderChallengeTip",GlobalConfig.jifengTiaoyueLg.st100367)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.changeNormalState();var i=AcrossLadderPanelData.ins().getCurrentPlayerItem();this.updateDisplay(i),this.btnChallenge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),MessageCenter.ins().addListener(MessageDef.ACROSSLADDER_CHALLENGE_CONFIRM,this.changeTextState,this)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.btnChallenge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.updateDisplay=function(e){this.opHead.source=ResDataPath.GetHeadMiniImgName(e.job,e.sex),this.opName.text=e.playerName,this.opRank.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100868,style:{textColor:12549376}},{text:e.rank.toString(),style:{textColor:5461335}}],this.opLv.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101443,[e.zsLv.toString(),e.lv.toString()]),this.opPower.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100809,style:{textColor:12549376}},{text:e.power.toString(),style:{textColor:5461335}}]},t.prototype.onTouch=function(e){var i=AcrossLadderPanelData.ins().challengeNum;if(i>0){var o=AcrossLadderPanelData.ins().getTargetPlayerId(),s="normal"==this.currentState?0:o;AcrossLadderCenter.ins().reqAcrossLadderStartCombat(o,s),ViewManager.ins().close(t)}else UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101469)},t.prototype.changeNormalState=function(){this.currentState="normal"},t.prototype.changeTextState=function(){this.currentState="text"},t}(BaseEuiPanel);__reflect(AcrossLadderChallengeTip.prototype,"AcrossLadderChallengeTip"),ViewManager.ins().reg(AcrossLadderChallengeTip,LayerManager.UI_Popup),window.AcrossLadderChallengeTip=AcrossLadderChallengeTip;var AcrossLadderPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100873,t.xyList=[{x:240,y:70},{x:0,y:250},{x:460,y:250}],t.skinName="AcrossLadderPanelSkin",t.name=GlobalConfig.jifengTiaoyueLg.st100873,t.itemList=[],t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100867,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100868,t.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100869,t.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st100870,t.m_Lan5.text=GlobalConfig.jifengTiaoyueLg.st100871,t.m_Lan6.text=GlobalConfig.jifengTiaoyueLg.st100872,t.buttonRefresh.label=GlobalConfig.jifengTiaoyueLg.st100877,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.buttonRecord.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buttonRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buttonRankReward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buttonRefresh.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buttonBuyTimes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().addListener(MessageDef.ACROSSLADDER_REFRESH_PLAYER_INFO,this.updateSelfInfo,this),MessageCenter.ins().addListener(MessageDef.ACROSSLADDER_REFRESH_ITEMS,this.updateItemsInfo,this),this.updateItemsInfo(),this.updateSelfInfo(),AcrossLadderCenter.ins().reqAcrossLadderInfo()},t.prototype.updateSelfInfo=function(){var e=AcrossLadderPanelData.ins();this.head.source=e.head,this.m_ElementImg.source=ResDataPath.GetElementImgName(e.m_ElementType),this.labelPower.text=e.power.toString(),this.labelDayWin.text=e.win.toString(),this.labelRank.text=e.rank==AcrossLadderPanelData.DEFAULT_RANK?AcrossLadderPanelData.DEFAULT_RANK+GlobalConfig.jifengTiaoyueLg.st100874:e.rank.toString(),this.labelWinLost.textFlow=[{text:e.win.toString()+GlobalConfig.jifengTiaoyueLg.st100875,style:{textColor:65280}},{text:" / ",style:{textColor:5461335}},{text:e.lost.toString()+GlobalConfig.jifengTiaoyueLg.st100876,style:{textColor:16282482}}],this.labelChallengeNum.text=e.challengeNum.toString()},t.prototype.updateItemsInfo=function(){for(var e=AcrossLadderPanelData.ins().playerList,t=e.length,i=0;t>i;i++)null==this.itemList[i]&&(this.itemList[i]=new AcrossLadderPlayerItem,this.itemsGroup.addChild(this.itemList[i])),this.itemList[i].updateItem(e[i])},t.prototype.buyTimes=function(){var e=AcrossLadderPanelData.ins().getBaseCfg();if(AcrossLadderPanelData.ins().todayBuyTimes==e.vipBuyCount[UserVip.ins().lv])return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100585);if(GameLogic.ins().actorModel.yb<e.buyChallengesCountYuanBao)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100014);if(AcrossLadderPanelData.ins().flagBuyTips)AcrossLadderCenter.ins().reqBuyCombatNum(1);else{var t=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100878,[e.buyChallengesCountYuanBao])+AcrossLadderPanelData.ins().todayBuyTimes+"/"+e.vipBuyCount[UserVip.ins().lv];0==AcrossLadderPanelData.ins().flagBuyTips&&(t=t+"\n\n<font color='#FFB82A'>"+GlobalConfig.jifengTiaoyueLg.st100550),WarnWin.show(t,function(){AcrossLadderPanelData.ins().flagBuyTips=!0,AcrossLadderCenter.ins().reqBuyCombatNum(1)},this)}},t.prototype.onTap=function(e){switch(e.currentTarget){case this.buttonRecord:AcrossLadderCenter.ins().reqAcrossLadderRecord();break;case this.buttonRank:AcrossLadderCenter.ins().reqAcrossLadderRank();break;case this.buttonRankReward:ViewManager.ins().open(AcrossLadderRankReward);break;case this.buttonRefresh:AcrossLadderCenter.ins().reqAcrossLadderInfo(!0);break;case this.buttonBuyTimes:this.buyTimes()}},t.prototype.close=function(){this.buttonRecord.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buttonRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buttonRankReward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buttonRefresh.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buttonBuyTimes.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeListener(MessageDef.ACROSSLADDER_REFRESH_ITEMS,this.updateItemsInfo,this),MessageCenter.ins().removeListener(MessageDef.ACROSSLADDER_REFRESH_PLAYER_INFO,this.updateSelfInfo,this)},t.openCheck=function(){return Deblocking.Check(DeblockingType.TYPE_26)},t.prototype.UpdateContent=function(){},t.prototype.CheckRedPoint=function(){var e=AcrossLadderCenter.ins().rankRewardRedPoint();return UIHelper.ShowRedPoint(this.buttonRankReward,e),e},t}(BaseView);__reflect(AcrossLadderPanel.prototype,"AcrossLadderPanel",["ICommonWindowTitle"]),window.AcrossLadderPanel=AcrossLadderPanel;var AcrossLadderPlayerItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="AcrossLadderPlayerItemSkin",t.m_BattleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTouch,t),t.m_BattleBtn.addEventListener(egret.Event.REMOVED,t.removeEvent,t),t}return __extends(t,e),t.prototype.removeEvent=function(){this.m_BattleBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.m_BattleBtn.removeEventListener(egret.Event.REMOVED,this.removeEvent,this)},t.prototype.release=function(){this.removeEvent()},t.prototype.updateItem=function(e){this.playerId=e.playerId,this.m_RankLab.text=e.rank.toString(),this.m_PowerLab.text=e.power.toString(),this.m_PlayerName.text=e.playerName,this.m_TurnLvLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101443,[e.zsLv.toString(),e.lv.toString()]),this.m_HeadImg.source=ResDataPath.GetHeadMiniImgName(e.job,e.sex),this.m_ElementImg.source=ResDataPath.GetElementImgName(e.m_ElementType)},t.prototype.onTouch=function(e){AcrossLadderPanelData.ins().setTargetPlayerId(this.playerId),ViewManager.ins().open(AcrossLadderChallengeTip)},t}(eui.Component);__reflect(AcrossLadderPlayerItem.prototype,"AcrossLadderPlayerItem"),window.AcrossLadderPlayerItem=AcrossLadderPlayerItem;var AcrossLadderRank=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100879,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="AcrossLadderRankSkin",this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100400,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100401,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100333,this.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st100306},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.rankList.itemRenderer=AcrossLadderRankItem},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnRemoved(),this.m_Scroller.stopAnimation()},t.prototype.UpdateContent=function(){var e=AcrossLadderPanelData.ins().rankList;this.rankList.dataProvider=new eui.ArrayCollection(e.sort(this.sort));var t=AcrossLadderPanelData.ins().rank,i=t==AcrossLadderPanelData.DEFAULT_RANK?AcrossLadderPanelData.DEFAULT_RANK+GlobalConfig.jifengTiaoyueLg.st100874:t.toString();this.myRank.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100811},{text:i+""}]},t.prototype.sort=function(e,t){return e.rank-t.rank},t}(BaseEuiPanel);__reflect(AcrossLadderRank.prototype,"AcrossLadderRank",["ICommonWindowTitle"]),ViewManager.ins().reg(AcrossLadderRank,LayerManager.UI_Popup),window.AcrossLadderRank=AcrossLadderRank;var AcrossLadderRankItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="AcrossLadderRankItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.bg.visible=this.itemIndex%2==1;e.rank;this.rankLabel.text=e.rank+"",this.nameLabel.text=e.name.toString(),this.lvLabel.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101443,[e.zhLv.toString(),e.lv.toString()]),this.powerLabel.text=e.power.toString()},t}(eui.ItemRenderer);__reflect(AcrossLadderRankItem.prototype,"AcrossLadderRankItem"),window.AcrossLadderRankItem=AcrossLadderRankItem;var AcrossLadderRankReward=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101680,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.acrossLadderRankReward01=new AcrossLadderRankReward01,this.acrossLadderRankReward01.name=GlobalConfig.jifengTiaoyueLg.st101026,this.commonWindowBg.AddChildStack(this.acrossLadderRankReward01)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.observe(MessageDef.ACROSSLADDER_HISTORY_RANK,this.refushRed),this.refushRed()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnRemoved(),this.acrossLadderRankReward01.release()},t.prototype.UpdateContent=function(){},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.refushRed=function(){this.commonWindowBg.CheckTabRedPoint()},t}(BaseEuiPanel);__reflect(AcrossLadderRankReward.prototype,"AcrossLadderRankReward",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(AcrossLadderRankReward,LayerManager.UI_Popup),window.AcrossLadderRankReward=AcrossLadderRankReward;var AcrossLadderRankReward01=function(e){function t(){var t=e.call(this)||this;return t.skinName="AcrossLadderRankRewardSkin01",t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100880,t}return __extends(t,e),t.prototype.open=function(){this.list.itemRenderer=AcrossLadderRankRewardItem01;var e=GlobalConfig.ins("KuafuJingJiDayAwardConfig"),t=[];for(var i in e)t.push(e[i]);t.length;this.list.dataProvider=new eui.ArrayCollection(t)},t.prototype.close=function(){},t.prototype.release=function(){this.m_Scroller.stopAnimation()},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(AcrossLadderRankReward01.prototype,"AcrossLadderRankReward01",["ICommonWindowTitle"]),window.AcrossLadderRankReward01=AcrossLadderRankReward01;var AcrossLadderRankReward02=function(e){function t(){var t=e.call(this)||this;return t.skinName="AcrossLadderRankRewardSkin02",t}return __extends(t,e),t.prototype.open=function(){this.list.itemRenderer=AcrossLadderRankRewardItem02,this.list.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.observe(MessageDef.ACROSSLADDER_HISTORY_RANK,this.UpdateContent),AcrossLadderCenter.ins().reqAcrossLadderHistoryRank()},t.prototype.sort=function(e,t){if(-2==e.state&&-2==t.state)return e.data.paixuId>t.data.paixuId?-1:1;if(-2==e.state||-2==t.state){if(-2==e.state)return-1;if(-2==t.state)return 1}else{if(-1==e.state&&-1==t.state||e.state<t.state&&e.state>=0)return e.data.paixuId>t.data.paixuId?-1:1;if(e.state>=0&&t.state>=0)return e.data.paixuId>t.data.paixuId?-1:1}return e.data.paixuId-t.data.paixuId},t.prototype.close=function(){this.removeObserve(),this.list.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.release=function(){this.close(),this.m_Scroller.stopAnimation()},t.prototype.onTap=function(e){var t=e.target.name,i=t.indexOf("m_btn");if(-1!=i){var o=Number(t.substr(5,t.length));AcrossLadderCenter.ins().reqAcrossLadderHistoryReward(o)}},t.prototype.UpdateContent=function(){var e=GlobalConfig.ins("KuafuJingJiBestRankAwardConfig"),t=[],i=0,o=AcrossLadderPanelData.ins().rank,s=AcrossLadderPanelData.ins().rewardCfgIdxArr,n=0;for(var r in e)n=Number(r),i=s.indexOf(r),-1==i&&n>=o&&(i=-2),t.push({data:e[r],state:i,selfRank:o});t.sort(this.sort),this.list.dataProvider=new eui.ArrayCollection(t)},t.prototype.CheckRedPoint=function(){return AcrossLadderCenter.ins().rankRewardRedPoint()
},t}(BaseView);__reflect(AcrossLadderRankReward02.prototype,"AcrossLadderRankReward02",["ICommonWindowTitle"]),window.AcrossLadderRankReward02=AcrossLadderRankReward02;var AcrossLadderRankRewardItem01=function(e){function t(){var t=e.call(this)||this;return t.goodsConfig=GlobalConfig.ins("ItemConfig"),t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=ItemBase,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData},t.prototype.dataChanged=function(){var e="",t=GlobalConfig.ins("KuafuJingJiDayAwardConfig")[this.data.paixuId];t&&(e=t.shuoMing),this.m_rankingTxt.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101635,[e]);var i=this.data.award;this.listData.removeAll(),this.listData.replaceAll(i),this.listData.refresh()},t}(eui.ItemRenderer);__reflect(AcrossLadderRankRewardItem01.prototype,"AcrossLadderRankRewardItem01"),window.AcrossLadderRankRewardItem01=AcrossLadderRankRewardItem01;var AcrossLadderRankRewardItem02=function(e){function t(){var t=e.call(this)||this;return t.goodsConfig=GlobalConfig.ins("ItemConfig"),t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data.data;this.m_titleDesc.text=e.shuoMing.toString(),this.m_btn.name="m_btn"+e.rankMin,this.data.state<0?-2==this.data.state?(this.m_btn.visible=!0,this.m_uncomImg.visible=!1,this.m_progress.visible=!1):(this.m_uncomImg.visible=!0,this.m_btn.visible=!1,this.data.selfRank==AcrossLadderPanelData.DEFAULT_RANK?this.m_progress.visible=!1:(this.m_progress.visible=!0,this.data.selfRank>e.rankMin?this.m_progress.textFlow=[{text:"(",style:{textColor:5461335}},{text:this.data.selfRank+"/",style:{textColor:16282482}},{text:e.rankMin+"",style:{textColor:65280}},{text:")",style:{textColor:5461335}}]:this.m_progress.textFlow=[{text:"(",style:{textColor:5461335}},{text:this.data.selfRank+"/",style:{textColor:65280}},{text:e.rankMin+"",style:{textColor:65280}},{text:")",style:{textColor:5461335}}])):(this.m_btn.visible=!1,this.m_uncomImg.visible=!1,this.m_progress.visible=!1);var t,i=e.award,o=i.length;switch(o){case 0:this.m_reward01.visible=!1,this.m_reward02.visible=!1,this.m_reward03.visible=!1;break;case 1:this.m_reward01.visible=!0,this.m_reward02.visible=!1,this.m_reward03.visible=!1,t=this.goodsConfig[i[0].id],this.updateReward(this.m_reward01,{icon:t.icon,name:t.name,count:i[0].count});break;case 2:this.m_reward01.visible=!0,this.m_reward02.visible=!0,this.m_reward03.visible=!1,t=this.goodsConfig[i[0].id],this.updateReward(this.m_reward01,{icon:t.icon,name:t.name,count:i[0].count}),t=this.goodsConfig[i[1].id],this.updateReward(this.m_reward02,{icon:t.icon,name:t.name,count:i[0].count});break;case 3:this.m_reward01.visible=!0,this.m_reward02.visible=!0,this.m_reward03.visible=!0,t=this.goodsConfig[i[0].id],this.updateReward(this.m_reward01,{icon:t.icon,name:t.name,count:i[0].count}),t=this.goodsConfig[i[1].id],this.updateReward(this.m_reward02,{icon:t.icon,name:t.name,count:i[0].count}),t=this.goodsConfig[i[2].id],this.updateReward(this.m_reward03,{icon:t.icon,name:t.name,count:i[0].count})}},t.prototype.updateReward=function(e,t){e.itemIcon.setItemImg(t.icon.toString()+"_png"),e.count.text=t.count.toString(),e.nameTxt.text=t.name.toString()},t}(eui.ItemRenderer);__reflect(AcrossLadderRankRewardItem02.prototype,"AcrossLadderRankRewardItem02"),window.AcrossLadderRankRewardItem02=AcrossLadderRankRewardItem02;var AcrossLadderRecord=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="AcrossLadderRecordSkin"},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.recordList.itemRenderer=AcrossLadderRecordItem,this.updateRecordInfo(),this.m_bg.init("AcrossLadderRecord",GlobalConfig.jifengTiaoyueLg.st100808)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_Scroller.stopAnimation()},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.updateRecordInfo=function(){var e=AcrossLadderPanelData.ins().recordList;e.sort(this.sort),this.recordList.dataProvider=new eui.ArrayCollection(e)},t.prototype.sort=function(e,t){return t.recordTime-e.recordTime},t}(BaseEuiView);__reflect(AcrossLadderRecord.prototype,"AcrossLadderRecord"),ViewManager.ins().reg(AcrossLadderRecord,LayerManager.UI_Popup),window.AcrossLadderRecord=AcrossLadderRecord;var AcrossLadderRecordItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="AcrossLadderRecordItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){var e=this.data;e.recordTypeOrg&&e.recordResultOrg&&(this.m_MainLab.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100046+" "},{text:e.opName,style:{textColor:16763904}},{text:GlobalConfig.jifengTiaoyueLg.st100881},{text:e.rankChangeNum+"",style:{textColor:65280}},{text:"！"}]),e.recordTypeOrg&&!e.recordResultOrg&&(this.m_MainLab.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100046+" "},{text:e.opName,style:{textColor:16763904}},{text:GlobalConfig.jifengTiaoyueLg.st100882}]),!e.recordTypeOrg&&e.recordResultOrg&&(this.m_MainLab.textFlow=[{text:e.opName,style:{textColor:16763904}},{text:GlobalConfig.jifengTiaoyueLg.st100883}]),e.recordTypeOrg||e.recordResultOrg||(this.m_MainLab.textFlow=[{text:e.opName,style:{textColor:16763904}},{text:GlobalConfig.jifengTiaoyueLg.st100884},{text:e.rankChangeNum+"",style:{textColor:16282482}},{text:"！"}])},t.prototype.onTouch=function(){var e=this.data;AcrossLadderCenter.ins().reqAcrossLadderStartCombat(e.opPlayerId,e.opPlayerId)},t}(eui.ItemRenderer);__reflect(AcrossLadderRecordItem.prototype,"AcrossLadderRecordItem"),window.AcrossLadderRecordItem=AcrossLadderRecordItem;var AcrossLadderResultWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"closeBtn",{get:function(){return this.fightResultBg.closeBtn},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="AcrossLadderResultSkin",this.layerLevel=VIEW_LAYER_LEVEL.TOP,this.closeBtn.labelDisplay.size=18},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.rewardList.dataProvider=new eui.ArrayCollection(e[0]),this.winOldRankLB.text=0==e[1]?AcrossLadderPanelData.DEFAULT_RANK+"名外":e[1],this.winNewRankLB.text=e[2],this.seconds=5,this.updateCloseBtnLabel(),TimerManager.ins().doTimer(1e3,10,this.updateCloseBtnLabel,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.fightResultBg.SetState("win")},t.prototype.close=function(){TimerManager.ins().remove(this.updateCloseBtnLabel,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameMap.fubenID>0&&UserFb.ins().sendExitFb(),ViewManager.ins().isShow(LadderWin)||ViewManager.ins().open(LadderWin,5)},t.prototype.onTap=function(){ViewManager.ins().close(this)},t.prototype.updateCloseBtnLabel=function(){this.seconds--,this.seconds<=0&&ViewManager.ins().close(this),this.closeBtn.label=this.closeBtn.name+"("+this.seconds+"s)"},t}(BaseEuiPanel);__reflect(AcrossLadderResultWin.prototype,"AcrossLadderResultWin"),ViewManager.ins().reg(AcrossLadderResultWin,LayerManager.UI_Popup),window.AcrossLadderResultWin=AcrossLadderResultWin;var AcitityType19BuyWin=function(e){function t(){var t=e.call(this)||this;return t.num=0,t.numLimit=0,t.numCur=0,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e[0]){this.activityId=e[0],this.numLimit=e[1],this.numCur=e[2];var i=GlobalConfig.ins("ActivityConfig")[this.activityId];this.skinName=i.source2,this.input&&this.input.addEventListener(egret.Event.CHANGE,this.onInputChange,this),this.btnAdd&&this.btnAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btnSub&&this.btnSub.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btnClose&&this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btnBuy&&this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.price=GlobalConfig.ins("ActivityType19Config")[this.activityId].currencyNum,this.onNumChange(1)}},t.prototype.close=function(){this.input&&this.input.removeEventListener(egret.Event.CHANGE,this.onInputChange,this),this.btnAdd&&this.btnAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btnSub&&this.btnSub.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btnClose&&this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btnBuy&&this.btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onInputChange=function(e){this.input.text&&""!=this.input.text||this.onNumChange(0);var t=parseInt(this.input.text);!isNaN(t)&&t&&this.onNumChange(t)||e.preventDefault()},t.prototype.onTap=function(e){switch(e.target){case this.btnAdd:this.onNumChange(this.num+1);break;case this.btnSub:this.onNumChange(this.num-1);break;case this.btnBuy:break;case this.btnClose:ViewManager.ins().close(this)}},t.prototype.onNumChange=function(e){return 0>e?!1:(this.num=e,this.num>9999&&(this.num=9999),this.input.text=""+this.num,this.labelPrice.text=""+this.price,this.labelSumPrice.text=""+this.price*this.num,!0)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(AcitityType19BuyWin.prototype,"AcitityType19BuyWin"),window.AcitityType19BuyWin=AcitityType19BuyWin;var ActivityDataFactory=function(){function e(){}return e.create=function(e){var t,i=e.baseData.id,o=e.baseData.openState,s=e.baseData.startTime,n=e.baseData.endTime,r=e.baseData.type;switch(r){case 1:t=new ActivityType1Data;break;case 2:t=new ActivityType2Data;break;case 3:t=new ActivityType3Data;break;case 4:t=new ActivityType4Data;break;case 5:t=new ActivityType5Data;break;case 6:t=new ActivityType6Data;break;case 7:t=new ActivityType7Data;break;case 8:t=new ActivityType8Data;break;case 9:t=new ActivityType9Data;break;case 10:t=new ActivityType10Data;break;case 11:t=new ActivityType11Data;break;case 12:t=new ActivityType12Data;break;case 13:t=new ActivityType13Data;break;case 14:t=new ActivityType14Data;break;case 15:t=new ActivityType15Data;break;case 16:t=new ActivityType16Data;break;case 17:t=new ActivityType17Data;break;case 18:t=new ActivityType18Data;break;case 19:t=new ActivityType19Data;break;case 20:t=new ActivityType20Data;break;case 21:t=new ActivityType21Data;break;case 22:t=new ActivityType21Data;break;case 31:t=new ActivityType31Data;break;case 302:t=new ActivityType302Data;break;case 2e3:t=new ActivityType2000Data;break;case 2001:t=new ActivityType2001Data;break;case 2002:t=new ActivityType2002Data;break;case 2003:t=new ActivityType2003Data;break;case 2004:t=new ActivityType2004Data;break;case 303:t=new ActivityType303Data;break;case 35:break;default:return null}if(t){t.id=i,t.startTime=s,t.endTime=n,t.type=r,t.openState=o,t.init(),t.update(e);t.isOpenActivity()&&1==t.openState}return 6==t.type&&t.isOpenActivity()&&(GameGlobal.ybTurntableModel.data=t,GameGlobal.ybTurntableModel.activityId=t.id),t},e}();__reflect(ActivityDataFactory.prototype,"ActivityDataFactory"),window.ActivityDataFactory=ActivityDataFactory;var MovieClip=function(e){function t(){var t=e.call(this)||this;return t._mcFactory=new egret.MovieClipDataFactory,t.bool=!1,t._mcFactory.enableCache=!1,t.touchEnabled=!1,t}return __extends(t,e),t.prototype.loadFile=function(e,t,i,o){this._autoPlay=t,this._playCount=i||-1,this._compFun=o,this._fileName=e,this.m_Url=e,RES.getResAsync(this._fileName+"_json",this.createBody,this),RES.getResAsync(this._fileName+"_png",this.createBody,this)},t.prototype.loadUrl=function(e,t,i,o,s){if(void 0===s&&(s=0),e){this._autoPlay=t,this._playCount=i||-1,this._compFun=o,this.bool=!0,this.m_Url=e;var n=e.lastIndexOf("/");-1!=n?this._fileName=e.substring(n+1):this._fileName=e,e.indexOf("movie/skillEff")>=0&&(this.scaleX=this.scaleY=GameLogic.SKILL_EFF_SCALE);var r=ResMgr.ins().getCache(e+".png");r||(r=this._Load(e+".png",RES.ResourceItem.TYPE_IMAGE,s));var a=ResMgr.ins().getCache(e+".json");a||(a=this._Load(e+".json",RES.ResourceItem.TYPE_JSON,s)),r&&a&&this.OnCreateBody(a,r)}},t.prototype._Load=function(e,t,i){var o=this,s=this._GetRes(e,t);if(!s){var n=egret.getTimer();return RES.getResByUrl(e,function(e,t){return t&&o.m_Url+".json"!=t&&o.m_Url+".png"!=t?void(t.indexOf("body")>=0&&o.clearCache()):egret.getTimer()-n>i&&0!=i?void o.clearCache():(ResMgr.ins().setCache(t,e),void o.OnCreateBody(o._GetRes(o.m_Url+".json",RES.ResourceItem.TYPE_JSON),o._GetRes(o.m_Url+".png",RES.ResourceItem.TYPE_IMAGE)))},this),null}return s},t.prototype._GetRes=function(e,t){return RES.getRes(e)},t.prototype.clearCache=function(){this._mcFactory.clearCache(),this.scaleX=this.scaleY=1,this.rotation=0,this.movieClipData=null,this.x=this.y=0,this.alpha=1,this.visible=!1,this.stop(),TimerManager.ins().remove(this.playComp,this)},t.prototype.createBody=function(e,t){t&&this._fileName+"_json"!=t&&this._fileName+"_png"!=t||this.OnCreateBody(RES.getRes(this._fileName+"_json"),RES.getRes(this._fileName+"_png"))},t.prototype.createBodyByUrl=function(e,t){return t&&this.m_Url+".json"!=t&&this.m_Url+".png"!=t?void(t.indexOf("body")>=0&&(this.clearCache(),egret.log("加载完成回调"+t+"   当前加载"+this.m_Url))):void this.OnCreateBody(this._GetRes(this.m_Url+".json",RES.ResourceItem.TYPE_JSON),this._GetRes(this.m_Url+".png",RES.ResourceItem.TYPE_IMAGE))},t.prototype.OnCreateBody=function(e,t,i){void 0===i&&(i=null),e&&t&&(null==i&&(i=this),i.visible=!0,i._mcFactory.mcDataSet=e,i._mcFactory.texture=t,i.movieClipData=i._mcFactory.generateMovieClipData(i._fileName),i._autoPlay&&(i.totalFrames>0&&i.gotoAndPlay(1,i._playCount),i._playCount>0&&egret.setTimeout(i.playComp,i,i.playTime*i._playCount,i)),i.dispatchEventWith(egret.Event.CHANGE))},t.prototype.playComp=function(e){e._compFun&&(e._compFun(e),e._compFun=null)},Object.defineProperty(t.prototype,"playTime",{get:function(){return this.movieClipData?1/this.frameRate*this.totalFrames*1e3:0},enumerable:!0,configurable:!0}),t.prototype.OnResUnload=function(){return this.m_Url?SimpleResMgr.DestroyRes(this.m_Url+".png")&&SimpleResMgr.DestroyRes(this.m_Url+".json"):!1},t}(egret.MovieClip);__reflect(MovieClip.prototype,"MovieClip",["IResObject"]),window.MovieClip=MovieClip;var DabiaoRankData=function(){function e(){}return e.prototype.prase=function(e,t){this.name=e.name,this.numType=e.value},e}();__reflect(DabiaoRankData.prototype,"DabiaoRankData"),window.DabiaoRankData=DabiaoRankData;var RankDataInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.create=function(e,t){this.name="",this.value=0,this.activityId=e,this.idx=t,this.serverId=0},t.prototype.parser=function(e,t){this.name=e.player,this.value=e.value,this.activityId=t,this.idx=e.pos,this.serverId=e.serverId},t}(RankDataBase);__reflect(RankDataInfo.prototype,"RankDataInfo"),window.RankDataInfo=RankDataInfo;var RewardState;!function(e){e[e.NotReached=0]="NotReached",e[e.CanGet=1]="CanGet",e[e.Gotten=2]="Gotten",e[e.Undo=3]="Undo"}(RewardState||(RewardState={}));var YbTurntableModel=function(e){function t(){var t=e.call(this)||this;return t.level=1,t.chargeRecord=0,t.msgList=[],t.activityId=0,t.regNetMsg(S2cProtocol.sc_yb_turntable_info,t.doGetInfo),t.regNetMsg(S2cProtocol.sc_yb_turntable_roll_start_cb,t.doRollStartCb),t.regNetMsg(S2cProtocol.sc_yb_turntable_msg,t.doMsg),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_RECHARGE,function(){t.isOpenActivity()&&t.sendGetInfo(t.data.id)},t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendGetInfo=function(e){var t=new Sproto.cs_yb_turntable_info_request;t.activityId=e,this.Rpc(C2sProtocol.cs_yb_turntable_info,t)},t.prototype.doGetInfo=function(e){this.activityId=e.activityId,this.level=e.level,this.chargeRecord=e.chargeRecord,GameGlobal.MessageCenter.dispatch(MessageDef.YB_TURNTABLE_UPDATE)},t.prototype.sendRollStart=function(e){var t=new Sproto.cs_yb_roll_start_request;t.activityId=e,this.Rpc(C2sProtocol.cs_yb_roll_start,t)},t.prototype.doRollStartCb=function(e){if(e.result){e.activityId;GameGlobal.MessageCenter.dispatch(MessageDef.YBTURNTABLE_START,e.resultId)}else egret.log("开始钻石转盘失败")},t.prototype.doMsg=function(e){var t=e.name,i=e.count,o=parseFloat(e.rate),s="<font color=0x00A5FF>"+t+"</font> 投资"+i+"钻石获得",n="<font color=0x08FF00>"+o+"倍返还</font>",r=",共计<font color=0x08FF00>"+Math.floor(i*o)+"钻石</font>",a=s+n+r,l=function(){GameGlobal.ybTurntableModel.msgList.push(a),GameGlobal.ybTurntableModel.msgList.length>50&&(GameGlobal.ybTurntableModel.msgList=GameGlobal.ybTurntableModel.msgList.slice(GameGlobal.ybTurntableModel.msgList.length-49,GameGlobal.ybTurntableModel.msgList.length)),GameGlobal.MessageCenter.dispatch(MessageDef.YBTURNTABLE_RECORD_MSG)};t==GameGlobal.actorModel.name?egret.setTimeout(l,this,5e3):l()},Object.defineProperty(t.prototype,"config",{get:function(){var e=null;try{for(var t=this.getConfig(this.data.id),i=0,o=t;i<o.length;i++){var s=o[i];if(s.level==this.level||t.indexOf(s)==t.length-1){e=s;break}}}catch(n){egret.log("获取钻石轮盘配置错误"),egret.log(n)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLevel",{get:function(){var e=0;try{var t=this.getConfig(this.data.id);e=t.length}catch(i){egret.log("获取钻石轮盘最大等级错误"),egret.log(i)}return e},enumerable:!0,configurable:!0}),t.prototype.isOpenActivity=function(){return this.data&&this.data.isOpenActivity()?!0:!1},t.prototype.canStart=function(){var e=!1;return e},t.prototype.remainTime=function(){var e=0;try{var t=this.data;e=Math.floor(t.endTime-GameServer.serverTime)}catch(i){egret.log("钻石转盘活动剩余时间异常"),egret.log(i)}return e},t.prototype.getConfig=function(e){var t=GlobalConfig.ins("ActivityType6Config")[e];return t||(t=GlobalConfig.ins("ActivityType6AConfig")[e]),t},t}(BaseSystem);__reflect(YbTurntableModel.prototype,"YbTurntableModel"),window.YbTurntableModel=YbTurntableModel;var SimpleMovieClip=function(e){function t(t){var i=e.call(this)||this;i.isStopped=!0,i.frameIntervalTime=.125,i.passedTime=0,i.nextFrameNum=0,i.m_Texture=[],i.m_Urls=t,i.frameIntervalTime=1/t.length*1e3,i.nextFrameNum=0,i.m_Bitmap=new egret.Bitmap,i.addChild(i.m_Bitmap);for(var o=0,s=t;o<s.length;o++){var n=s[o],r=RES.getRes(n);r?i._OnLoaded(r,n):RES.getResByUrl(n,i._OnLoaded,i,RES.ResourceItem.TYPE_IMAGE)}return i}return __extends(t,e),t.prototype._OnLoaded=function(e,t){if(e)for(var i=0;i<this.m_Urls.length;++i)if(this.m_Urls[i]==t){this.m_Texture[i]=e;break}},t.prototype.advanceTime=function(e){var t=this,i=e-t.lastTime;t.lastTime=e;var o=t.frameIntervalTime,s=t.passedTime+i;t.passedTime=s%o;var n=s/o;if(1>n)return!1;for(;n>=1;){n--;var r=this.nextFrameNum++,a=this.m_Texture[r%this.m_Urls.length];a&&(this.m_Bitmap.texture=a)}return!1},t.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.setIsStopped(!1)},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.setIsStopped(!0)},t.prototype.setIsStopped=function(e){this.isStopped!=e&&(this.isStopped=e,e?egret.stopTick(this.advanceTime,this):(this.playTimes=0==this.playTimes?1:this.playTimes,this.lastTime=egret.getTimer(),egret.startTick(this.advanceTime,this)))},t.prototype.OnResUnload=function(){this.setIsStopped(!0);for(var e=0,t=this.m_Urls;e<t.length;e++){var i=t[e];SimpleResMgr.DestroyRes(i)}return this.m_Urls=[],this.m_Texture=[],this.m_Bitmap=new egret.Bitmap,!0},t}(egret.DisplayObjectContainer);__reflect(SimpleMovieClip.prototype,"SimpleMovieClip",["IResObject"]),window.SimpleMovieClip=SimpleMovieClip;var ActivityType10Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cfgids=[],t.recharge=0,t}return __extends(t,e),t.prototype.update=function(e){this.cfgids=e.cfgids,this.recharge=e.recharge},t.prototype.GetRewardState=function(e){for(var i,o=t.getConfig(this.id),s=0,n=o;s<n.length;s++){var r=n[s];if(r.index==e){i=r;break}}if(!i)return RewardState.NotReached;for(var a=0,l=this.cfgids;a<l.length;a++){var h=l[a];if(h.state==e)return RewardState.Gotten}return this.recharge>=i.yuanbao?RewardState.CanGet:RewardState.NotReached},t.prototype.canReward=function(){var e=t.getConfig(this.id);if(!e)return!1;for(var i=0,o=e;i<o.length;i++){var s=o[i],n=this.GetRewardState(s.index);if(n==RewardState.CanGet)return!0}return!1},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.getConfig=function(e){var t=GlobalConfig.ins("ActivityType10Config")[e];return t||(t=GlobalConfig.ins("ActivityType10AConfig")[e]),t},t}(ActivityBaseData);__reflect(ActivityType10Data.prototype,"ActivityType10Data"),window.ActivityType10Data=ActivityType10Data;var ActivityType11Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cfgids=[],t.recharge=0,t}return __extends(t,e),t.prototype.update=function(e){this.cfgids=e.cfgids,this.recharge=e.recharge,t.diffDay=e.diffDay},t.prototype.GetRewardState=function(e){var i,o=t.getConfig(this.id);for(var s in o){var n=o[s];if(n.index==e){i=n;break}}if(!i)return RewardState.NotReached;for(var r=0,a=this.cfgids;r<a.length;r++){var n=a[r];if(n.state==e)return RewardState.Gotten}return this.recharge>=i.pay?RewardState.CanGet:RewardState.NotReached},t.prototype.canReward=function(){var e=t.getConfig(this.id);if(!e)return!1;for(var i=0,o=e;i<o.length;i++){var s=o[i],n=e[s],r=this.GetRewardState(n.index);if(r==RewardState.CanGet)return!0}return!1},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.getConfig=function(e){return GlobalConfig.ins("ChongZhi2AConfig")[e][t.diffDay]},t.diffDay=0,t}(ActivityBaseData);__reflect(ActivityType11Data.prototype,"ActivityType11Data"),window.ActivityType11Data=ActivityType11Data;var ActivityType12Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){EggBroken.ins().awards=e.eggBrokenAwards,EggBroken.ins().count=e.eggBrokenCount,EggBroken.ins().endTime=this.endTime,EggBroken.ins().diffDay=e.diffDay},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.canReward=function(){return EggBroken.ins().HasAward(!1)},t}(ActivityBaseData);__reflect(ActivityType12Data.prototype,"ActivityType12Data"),window.ActivityType12Data=ActivityType12Data;var ActivityType13Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){},t.prototype.canReward=function(){return!1},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.updateMessage=function(e){},t}(ActivityBaseData);__reflect(ActivityType13Data.prototype,"ActivityType13Data"),window.ActivityType13Data=ActivityType13Data;var ActivityType14Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cfgids=[],t.accumulativeConsumption=0,t}return __extends(t,e),t.prototype.update=function(e){this.cfgids=e.cfgids,this.accumulativeConsumption=e.accumulativeConsumption},t.prototype.GetRewardState=function(e){for(var i,o=t.getConfig(this.id),s=0,n=o;s<n.length;s++){var r=n[s];if(r.index==e){i=r;break}}if(!i)return RewardState.NotReached;for(var a=0,l=this.cfgids;a<l.length;a++){var h=l[a];if(h.state==e)return RewardState.Gotten}return this.accumulativeConsumption>=i.play?RewardState.CanGet:RewardState.NotReached},t.prototype.canReward=function(){var e=t.getConfig(this.id);if(!e)return!1;for(var i=0,o=e;i<o.length;i++){var s=o[i],n=this.GetRewardState(s.index);if(n==RewardState.CanGet)return!0}return!1},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.getConfig=function(e){return GlobalConfig.ins("ActivityType2001AConfig")[e]},t}(ActivityBaseData);__reflect(ActivityType14Data.prototype,"ActivityType14Data"),window.ActivityType14Data=ActivityType14Data;var ActivityType15Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buyids=[],t}return __extends(t,e),t.prototype.update=function(e){this.buyids=e.buyids},t.prototype.canReward=function(){return!1},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.updateMessage=function(e){},t}(ActivityBaseData);__reflect(ActivityType15Data.prototype,"ActivityType15Data"),window.ActivityType15Data=ActivityType15Data;var ActivityType16Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.records=e.records},t.prototype.canReward=function(){var e=GlobalConfig.ins("ActivityType16Config")[this.id];for(var t in e){var i=this.records>>e[t].index&1;if(0==i&&this.recharge>=e[t].recharegeyuanbao)return!0}return!1},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.updateMessage=function(e){this.recharge=e.recharge},t}(ActivityBaseData);__reflect(ActivityType16Data.prototype,"ActivityType16Data"),window.ActivityType16Data=ActivityType16Data;var ActivityType17Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){},t.prototype.updateMessage=function(e){this.parse(e)},t.prototype.parse=function(e){this.dayIndex=e.dayIndex,this.isGet=e.isGet,this.canGet=e.canGet},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.canReward=function(){return this.canGet},t}(ActivityBaseData);__reflect(ActivityType17Data.prototype,"ActivityType17Data"),window.ActivityType17Data=ActivityType17Data;var ActivityType18Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){ViewManager.ins().isShow(ActivityWin)&&ViewManager.ins().close(ActivityWin)},t.prototype.canReward=function(){return!1},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.updateMessage=function(e){this.lastTime=e.lastTime},t}(ActivityBaseData);__reflect(ActivityType18Data.prototype,"ActivityType18Data"),window.ActivityType18Data=ActivityType18Data;var Activity19ItemData=function(){function e(){}return e}();__reflect(Activity19ItemData.prototype,"Activity19ItemData");var ActivityType19Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.count=e.count,this.list=[];for(var t=e.itemState.length,i=GlobalConfig.ins("ActivityType19Config")[this.id],o=0;t>o;o++){var s=new Activity19ItemData;s.count=i.awardLimit[o],s.id=i.rewards[o].id,s.numBuy=this.count,s.state=e.itemState[o].state,s.index=o+1,s.icon=i.icon[o],this.list.push(s)}this.list.sort(ActivityBaseData.sort)},t.prototype.init=function(){var e=GlobalConfig.ins("ActivityType19Config")[this.id];this.list=[];for(var t=0;t<e.rewards.length;t++){var i=new Activity19ItemData;i.count=e.awardLimit[t],i.id=e.rewards[t].id,i.numBuy=this.count,i.state=RewardState.NotReached,i.index=t+1,i.icon=e.icon[t],this.list.push(i)}},t.prototype.updateInfo=function(e){var t=e.readShort();this.listInfo=[];for(var i=0;t>i;i++){var o="|C:0x12b2ff&T:",s=e.readString();o+=s+"|在福袋中获得";var n=GlobalConfig.itemConfig[e.readInt()];o+="|C:"+ItemBase.QUALITY_COLOR[n.quality]+"&T:"+n.name+"|",this.listInfo.push(o)}this.listInfo.reverse()},t.prototype.canReward=function(){for(var e=0;e<this.list.length;e++)if(this.list[e].state==RewardState.CanGet)return!0;return!1},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.updateMessage=function(e){},t}(ActivityBaseData);__reflect(ActivityType19Data.prototype,"ActivityType19Data"),window.Activity19ItemData=Activity19ItemData,window.ActivityType19Data=ActivityType19Data;var ActivityType1Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_DrawBin=[],t.mNums=[],t}return __extends(t,e),t.prototype.update=function(e){this.m_DrawBin=e.record,this.mNums=e.nums},t.prototype.canReward=function(){for(var e=0,t=this.m_DrawBin;e<t.length;e++){var i=t[e];if(3==i)return!0}return!1},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.getRewardStateById=function(e){var t=this.m_DrawBin[e];return 1==t?3:2==t?RewardState.NotReached:3==t?RewardState.CanGet:4==t?RewardState.Gotten:RewardState.NotReached},t.RewardWeight=function(e){switch(e){case RewardState.NotReached:return 1;case RewardState.CanGet:return 0;case RewardState.Gotten:return 2;case 4:return 4}return 4},t}(ActivityBaseData);__reflect(ActivityType1Data.prototype,"ActivityType1Data"),window.ActivityType1Data=ActivityType1Data;var ActivityType2000Data=function(e){function t(){var t=e.call(this)||this;return t.m_Day=1,t}return __extends(t,e),t.prototype.update=function(e){this.record=e.status,this.m_Day=e.today},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.canReward=function(){return this.GetRecord(1)?!this.GetRecord(2)&&Recharge.ins().IsMonthCard()?!0:!this.GetRecord(3)&&Recharge.ins().IsZunCard()?!0:!1:!0},t.prototype.GetRewardState=function(e){return this.GetRecord(e)?RewardState.Gotten:1==e?RewardState.CanGet:2==e&&Recharge.ins().IsMonthCard()?RewardState.CanGet:3==e&&Recharge.ins().IsZunCard()?RewardState.CanGet:RewardState.NotReached},t.prototype.GetConfig=function(){var e=null;try{GlobalConfig.ins("ActivityType2000Config")[this.id];e=GlobalConfig.ins("ActivityType2000Config")[this.id][this.m_Day-1]}catch(t){}return e},t.prototype.GetConfigByIndex=function(e){var t=this.GetConfig();return t?t[e]:null},t}(ActivityBaseData);__reflect(ActivityType2000Data.prototype,"ActivityType2000Data"),window.ActivityType2000Data=ActivityType2000Data;var ActivityType2001Data=function(e){function t(){var t=e.call(this)||this;return t.mPay=0,t}return __extends(t,e),t.prototype.update=function(e){this.record=e.status,this.mPay=e.count},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.canReward=function(){var e=this.GetConfig();if(!e)return!1;for(var t in e)if(this.GetRewardState(e[t].index)==RewardState.CanGet)return!0;return!1},t.prototype.GetRewardState=function(e){if(this.GetRecord(e))return RewardState.Gotten;var t=this.GetConfig();return t&&this.mPay>=t[e-1].play?RewardState.CanGet:RewardState.NotReached},t.prototype.GetConfig=function(){return GlobalConfig.ins("ActivityType2001Config")[this.id]},t}(ActivityBaseData);__reflect(ActivityType2001Data.prototype,"ActivityType2001Data"),window.ActivityType2001Data=ActivityType2001Data;var ActivityType2002Data=function(e){function t(){var t=e.call(this)||this;return t.mPoint=0,t}return __extends(t,e),t.prototype.update=function(e){this.record=e.status,this.mPoint=e.count},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.canReward=function(){var e=this.GetConfig();if(!e)return!1;for(var t in e)if(this.GetRewardState(e[t].index)==RewardState.CanGet)return!0;return!1},t.prototype.GetRewardState=function(e){if(this.GetRecord(e))return RewardState.Gotten;var t=this.GetConfig();return t&&this.mPoint>=t[e-1].play?RewardState.CanGet:RewardState.NotReached},t.prototype.GetConfig=function(){return GlobalConfig.ins("ActivityType2002Config")[this.id]},t}(ActivityBaseData);__reflect(ActivityType2002Data.prototype,"ActivityType2002Data"),window.ActivityType2002Data=ActivityType2002Data;var ActivityType2003Data=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.update=function(e){},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.canReward=function(){return!1},t.prototype.GetRewardState=function(e){return RewardState.NotReached},t.prototype.GetConfig=function(){return GlobalConfig.ins("ActivityType2003Config")[this.id]},t}(ActivityBaseData);__reflect(ActivityType2003Data.prototype,"ActivityType2003Data"),window.ActivityType2003Data=ActivityType2003Data;var ActivityType2004Data=function(e){function t(){var t=e.call(this)||this;return t.m_Data={},t}return __extends(t,e),t.prototype.update=function(e){for(var t=0;t<e.personCounts.length;++t)this.m_Data[t+1]={mIndex:t+1,mExchange:e.personCounts[t],mLimit:e.globalCounts[t]}
},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.canReward=function(){var e=this.GetConfig();if(e)for(var t in e)if(0!=e[t].personLimit&&this.GetRewardState(e[t].index)==RewardState.CanGet)return!0;return!1},t.prototype.GetPoint=function(e){var t=UserBag.ins().getBagItemById(e);return t?t.count:0},t.prototype.GetRewardState=function(e){var t=this.GetConfig();if(!t)return RewardState.NotReached;var i=t[e-1];if(!i)return RewardState.NotReached;if(0!=i.serverLimit&&this.GetLimit(e)>=i.serverLimit)return RewardState.NotReached;if(0!=i.personLimit&&this.GetExchange(e)>=i.personLimit)return RewardState.NotReached;var o=UserBag.ins().getBagItemById(i.itemId);return o&&o.count>=i.itemCount?RewardState.CanGet:RewardState.NotReached},t.prototype.GetLimit=function(e){var t=this.m_Data[e];return t?t.mLimit:0},t.prototype.GetExchange=function(e){var t=this.m_Data[e];return t?t.mExchange:0},t.prototype.GetConfig=function(){return GlobalConfig.ins("ActivityType2004Config")[this.id]},t}(ActivityBaseData);__reflect(ActivityType2004Data.prototype,"ActivityType2004Data"),window.ActivityType2004Data=ActivityType2004Data;var ActivityType20Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.signInDay=e.signInDay,this.mondCnt=e.mondCnt,this.siganInData=e.siganInData,this.todaySigan=e.todaySigan,this.month=e.month,this.mondAllCnt=e.mondAllCnt},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t}(ActivityBaseData);__reflect(ActivityType20Data.prototype,"ActivityType20Data"),window.ActivityType20Data=ActivityType20Data;var ActivityType21Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.count=e.count,this.rank=e.rank},t.prototype.canReward=function(){return!1},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.updateMessage=function(e){},t.prototype.getConfig=function(e){var t=GlobalConfig.ins("ActivityType16Config")[e];return t||(t=GlobalConfig.ins("ActivityType16BConfig")[e]),t||(t=GlobalConfig.ins("ActivityType16AConfig")[e]),t},t}(ActivityBaseData);__reflect(ActivityType21Data.prototype,"ActivityType21Data"),window.ActivityType21Data=ActivityType21Data;var Observer=function(){function e(e,t){this.callback=null,this.context=null,this.callback=e,this.context=t}return e.prototype.notify=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.callback.apply(this.context,e)},e.prototype.compar=function(e,t){return e==this.context&&t==this.callback},e}();__reflect(Observer.prototype,"Observer");var Emitter=function(){function e(){}return e.register=function(t,i,o){var s=e.listeners[t];s||(s=[],e.listeners[t]=s),s.push(new Observer(i,o))},e._RemoveByFlag=function(t,i){var o=t[i];o.remove=!0,e.m_RemoveList.push(i)},e._RemoveByList=function(e,t){e.splice(t,1)},e.remove=function(t,i,o){var s=e.listeners[t];if(s){for(var n=s.length,r=e.m_IsFire==t?e._RemoveByFlag:e._RemoveByList,a=0;n>a;a++){var l=s[a];if(l.compar(o,i)){--n,r(s,a);break}}0==n&&delete e.listeners[t]}},e.fire=function(t){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var s=e.listeners[t];if(s){e.m_IsFire=t;for(var n=0,r=s.length;r>n;n++){var a=s[n];a&&!a.remove&&a.notify(t,i)}e.m_IsFire=null;var l=e.m_RemoveList;if(l.length>0){l.sort(function(e,t){return t-e});for(var h=0,c=l;h<c.length;h++){var u=c[h];s.splice(u,1)}l.slice(0,l.length)}}},e.listeners={},e.m_RemoveList=[],e.m_IsFire=null,e}();__reflect(Emitter.prototype,"Emitter"),window.Observer=Observer,window.Emitter=Emitter;var ActivityType302Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.records=e.records},t.prototype.canReward=function(){return!1},Object.defineProperty(t.prototype,"openDay",{get:function(){if(!this.isOpenActivity())return-1;var e=GameServer.serverTime-this.startTime;return Math.ceil(e/24/60/60)},enumerable:!0,configurable:!0}),t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.updateMessage=function(e){},t}(ActivityBaseData);__reflect(ActivityType302Data.prototype,"ActivityType302Data"),window.ActivityType302Data=ActivityType302Data;var ActivityType303Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.records=0,t}return __extends(t,e),t.prototype.update=function(e){this.records=e.records},t.prototype.isAllCanBattle=function(){for(var e=t.getConfig(303),i=0;i<e.length;i++){var o=this.isCanBattle(i);if(o==battleType303.TYPE1)return!0}return!1},t.prototype.isCanBattle=function(e){var t=this.records&1<<e;if(0>=t){if(1!=e){var i=this.records&1<<e-1;return 0>=i?battleType303.TYPE2:battleType303.TYPE1}return battleType303.TYPE1}return battleType303.TYPE3},t.prototype.canReward=function(){var e=t.getConfig(this.id);if(!e)return!1;for(var i=0,o=e;i<o.length;i++){var s=o[i],n=this.isCanBattle(s.index);if(3==n)return!0}return!1},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.getConfig=function(e){var t=GlobalConfig.ins("ActivityType303Config")[e];return t||(t=GlobalConfig.ins("ActivityType303AConfig")[e]),t},t}(ActivityBaseData);__reflect(ActivityType303Data.prototype,"ActivityType303Data");var battleType303;!function(e){e[e.TYPE1=1]="TYPE1",e[e.TYPE2=2]="TYPE2",e[e.TYPE3=3]="TYPE3"}(battleType303||(battleType303={})),window.ActivityType303Data=ActivityType303Data;var ActivityType31Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.goldPool=e.goldPool},Object.defineProperty(t.prototype,"goldPool",{get:function(){return this._goldPool},set:function(e){this._goldPool=e},enumerable:!0,configurable:!0}),t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.getConfig=function(e){var t=GlobalConfig.activityType17Config[e];return t||(t=GlobalConfig.activityType17AConfig[e]),t||(t=GlobalConfig.activityType17BConfig[e]),t},t.GetActivityConfig1=function(e){var t=GlobalConfig.activityType4Config[e];return null==t&&(t=GlobalConfig.activityType4AConfig[e]),null==t&&(t=GlobalConfig.activityType4BConfig[e]),t},t}(ActivityBaseData);__reflect(ActivityType31Data.prototype,"ActivityType31Data"),window.ActivityType31Data=ActivityType31Data;var ActivityType3Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dabiao=0,t.chongzhiTotal=0,t.btn1=!1,t.btn2=!1,t.image1=!1,t.image2=!1,t.recrod=0,t._day7text="累计7天，每日充值88888钻石可领取",t._totaltext="活动期间累计充值8888888钻石可领取",t}return __extends(t,e),t.prototype.update=function(e){this.record=e.record,this.dabiao=e.day,this.chongzhiTotal=e.rechargeCount},t.prototype.openDay=function(){var e=t.getConfig(this.id);return e&&e[0]?e[0].day:7},t.prototype.GetRewardState=function(e){for(var i,o=t.getConfig(this.id),s=0,n=o;s<n.length;s++){var r=n[s];if(r.index==e){i=r;break}}return i?BitUtil.Has(this.record,i.day)?RewardState.Gotten:this.dabiao>=i.day?RewardState.CanGet:this.dabiao==i.day-1&&this.chongzhiTotal<i.yuanbao?RewardState.NotReached:RewardState.Undo:RewardState.NotReached},t.prototype.canReward=function(){var e=t.getConfig(this.id);if(!e)return!1;for(var i=0,o=e;i<o.length;i++){var s=o[i];if(this.dabiao>=s.day&&!BitUtil.Has(this.record,s.index))return!0}return!1},t.prototype.isOpenActivity=function(){return this.isOpenTime()},Object.defineProperty(t.prototype,"day7text",{get:function(){var e=t.getConfig(this.id);for(var i in e)1==e[i].type&&(this.rewards1=e[i].rewards,this._day7text="累计"+("<font color='#bf7d00'>"+e[i].day+"</font>")+"天，每日充值"+("<font color='#bf7d00'>"+e[i].val+"</font>")+"钻石可领取");return this._day7text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totaltext",{get:function(){var e=t.getConfig(this.id);for(var i in e)2==e[i].type&&(this.maxTotal=e[i].val,this.rewards2=e[i].rewards,this._totaltext="活动期间累计充值"+("<font color='#bf7d00'>"+e[i].val+"</font>")+"钻石可领取");return this._totaltext},enumerable:!0,configurable:!0}),t.prototype.canOnlyReward=function(){var e=t.getConfig(this.id),i=this.recrod;this.btn1=!1,this.btn2=!1,this.image1=!1,this.image2=!1;for(var o in e){var s=Math.floor(i/Math.pow(2,e[o].index))%2;1==e[o].type&&this.dabiao>=e[o].day&&(0==s&&(this.btn1=!0),1==s&&(this.image1=!0)),2==e[o].type&&e[o].val<=this.chongzhiTotal&&(0==s&&(this.btn2=!0),1==s&&(this.image2=!0))}},t.getConfig=function(e){var t=GlobalConfig.ins("ActivityType3Config")[e];return t||(t=GlobalConfig.ins("ActivityType3AConfig")[e]),t},t}(ActivityBaseData);__reflect(ActivityType3Data.prototype,"ActivityType3Data"),window.ActivityType3Data=ActivityType3Data;var ActivityType4Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.canReward=function(){return this.isOpenActivity()&&GameGlobal.activityModel.getisCangetDabiao(this.id)},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t}(ActivityBaseData);__reflect(ActivityType4Data.prototype,"ActivityType4Data"),window.ActivityType4Data=ActivityType4Data;var ActivityType5Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.logTime=1,t}return __extends(t,e),t.prototype.update=function(e){this.record=e.record,this.logTime=e.logTime},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.canReward=function(){null==this.ActivityType5Config&&(this.ActivityType5Config=GlobalConfig.ins("ActivityType5Config"));var e=this.ActivityType5Config[this.id];for(var t in e){var i=this.record>>e[t].index&1;if(0==i&&e[t].day<=this.logTime)return!0}return!1},t.prototype.GetConfigByIndex=function(e){null==this.ActivityType5Config&&(this.ActivityType5Config=GlobalConfig.ins("ActivityType5Config"));var t=this.ActivityType5Config[this.id];for(var i in t)if(t[i].index==e)return t[i];return null},t.prototype.checkOneDayStatu=function(e){void 0===e&&(e=0),e=Math.max(e,1);var t=this.GetConfigByIndex(e);return t&&this.logTime>=t.day?BitUtil.Has(this.record,e)?RewardState.Gotten:RewardState.CanGet:RewardState.NotReached},t.prototype.IsShow=function(){null==this.ActivityType5Config&&(this.ActivityType5Config=GlobalConfig.ins("ActivityType5Config"));var e=this.ActivityType5Config[this.id];for(var t in e){var i=this.record>>e[t].index&1;if(0==i)return!0}return!1},t}(ActivityBaseData);__reflect(ActivityType5Data.prototype,"ActivityType5Data"),window.ActivityType5Data=ActivityType5Data;var ActivityType6Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.isOpenActivity=function(){var e=GlobalConfig.ins("ActivityConfig")[this.id];return e||(e=GlobalConfig.ins("ActivityAConfig")[this.id]),e?this.isOpenTime()&&1==this.openState?e.params?e.params.openLevel<=GameGlobal.actorModel.level:!0:!1:(console.error("ActivityType6Data   config  is null   this.id = ",this.id),!1)},t}(ActivityBaseData);__reflect(ActivityType6Data.prototype,"ActivityType6Data"),window.ActivityType6Data=ActivityType6Data;var ActivityType7Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.record=e.status?1:0,this.count=e.recharge},t.prototype.canReward=function(){return this.GetRewardState()==RewardState.CanGet},t.prototype.isOpenActivity=function(){return this.isOpenTime()},t.prototype.GetRewardState=function(){var e=t.GetConfig(this.id);return this.record?RewardState.Gotten:this.count>=e.recharge?RewardState.CanGet:RewardState.NotReached},t.GetConfig=function(e){var t=GlobalConfig.ins("ActivityType7Config")[e];return t},t}(ActivityBaseData);__reflect(ActivityType7Data.prototype,"ActivityType7Data"),window.ActivityType7Data=ActivityType7Data;var ActivityType8Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_ItemData={},t.m_State=0,t}return __extends(t,e),t.prototype.update=function(e){if(e){this.m_State=e.status;for(var t in e.datas){var i=e.datas[t],o=new ActivityType8ItemData(i);this.m_ItemData[o.mIndex]=o}}null==this.ActivityType8Config&&(this.ActivityType8Config=GlobalConfig.ins("ActivityType8Config"));var s=this.ActivityType8Config[this.id];for(var t in s){var i=s[t];if(!this.m_ItemData[i.index]){var o=new ActivityType8ItemData(null);o.mIndex=i.index,o.mRewardState=RewardState.NotReached,o.mDay=0,this.m_ItemData[i.index]=o}}},t.prototype.CanInvest=function(){return 1==this.m_State},t.prototype.canReward=function(){for(var e in this.m_ItemData)if(this.m_ItemData[e].mRewardState==RewardState.CanGet)return!0},t.prototype.isOpenActivity=function(){null==this.ActivityType8Config&&(this.ActivityType8Config=GlobalConfig.ins("ActivityType8Config"));var e=this.ActivityType8Config[this.id];for(var t in e){var i=e[t],o=this.m_ItemData[i.index];if(o.mRewardState==RewardState.CanGet)return!0;if(o.mRewardState==RewardState.Gotten&&o.mDay<i.day)return!0}return this.CanInvest()},t.prototype.GetItemDataByID=function(e){return this.m_ItemData[e]},t.prototype.GetConfigData=function(){return null==this.ActivityType8Config&&(this.ActivityType8Config=GlobalConfig.ins("ActivityType8Config")),this.ActivityType8Config[this.id]},t.prototype.GetConfigItemData=function(e){var t=this.GetConfigData();for(var i in t)if(t[i].index==e)return t[i];return null},t}(ActivityBaseData);__reflect(ActivityType8Data.prototype,"ActivityType8Data");var ActivityType8ItemData=function(){function e(e){e&&(this.mIndex=e.index,this.mRewardState=e.status,this.mDay=e.day)}return e}();__reflect(ActivityType8ItemData.prototype,"ActivityType8ItemData"),window.ActivityType8Data=ActivityType8Data,window.ActivityType8ItemData=ActivityType8ItemData;var ActivityType9Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_Day=1,t}return __extends(t,e),t.prototype.update=function(t){e.prototype.update.call(this,t);var i=t;this.m_Day=i.day},t.prototype.GetConfigData=function(){return ActivityType2Data.GetConfig(this.id)[this.m_Day-1]},t}(ActivityType2Data);__reflect(ActivityType9Data.prototype,"ActivityType9Data"),window.ActivityType9Data=ActivityType9Data;var DayOneActivityController=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_one_recharge_activity_state,t.doDayOneActivityRewardState),t.regNetMsg(S2cProtocol.sc_one_recharge_activity_gain,t.doDayOneActivityRewardResult),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.doDayOneActivityRewardState=function(e){this.rewardState=e.awardState,GameGlobal.MessageCenter.dispatch(MessageDef.DAYONE_ACTIVITY)},t.prototype.sendDayOneActivityReward=function(){this.Rpc(C2sProtocol.cs_one_recharge_activity_gain,new Sproto.cs_one_recharge_activity_gain_request)},t.prototype.doDayOneActivityRewardResult=function(e){0==e.code&&ViewManager.ins().close(DayOneActivityPanel)},t}(BaseSystem);__reflect(DayOneActivityController.prototype,"DayOneActivityController"),window.DayOneActivityController=DayOneActivityController;var DayOneActivityPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="DayOneActivitySkin",this.iconList.itemRenderer=ItemBase,this.iconList.dataProvider=new eui.ArrayCollection(GlobalConfig.ins("ChongZhi1Config")[98][0][0].awardList)},t.prototype.open=function(){this.addTouchEvent(this,this.closTouchFun,this.maskBg),this.addTouchEvent(this,this.closTouchFun,this.closeBtn),this.addTouchEvent(this,this.onTouch,this.btn)},t.prototype.close=function(){this.removeEvents()},t.prototype.closTouchFun=function(){ViewManager.ins().close(t)},t.prototype.onTouch=function(e){2==DayOneActivityController.ins().rewardState?Recharge.ins().TestReCharge(11):DayOneActivityController.ins().sendDayOneActivityReward()},t}(BaseEuiPanel);__reflect(DayOneActivityPanel.prototype,"DayOneActivityPanel"),ViewManager.ins().reg(DayOneActivityPanel,LayerManager.UI_Popup),window.DayOneActivityPanel=DayOneActivityPanel;var FeedbackWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101683,t.mWindowHelpId=27,t.skinName="FeedbackWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){this.commonWindowBg.SetTabDatas(new eui.ArrayCollection(this.getTableData()));var e=this.groupTips.getChildAt(GameServer.serverOpenDay-1);e&&(e.textColor=12549376,e.size=16),this.price1.labelColor="0xbf7d00",this.price.labelColor="0xbf7d00"},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e[0]||0),this.AddClick(this.getBtn,this.onTouchTab),this.observe(MessageDef.UPDATE_ACTIVITY_PANEL,this.UpdateContent)},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),this.removeEvents(),this.removeObserve()},t.prototype.onTouchTab=function(){var e=this.getConfig();Checker.Money(MoneyConst.yuanbao,e.yuanjia,Checker.YUNBAO_FRAME)&&ActivityModel.ins().sendReward(200,this.selectedIndex+1)},t.prototype.UpdateContent=function(){var e=GameGlobal.activityData[200];this.times.textFlow=TextFlowMaker.generateTextFlow(GlobalConfig.jifengTiaoyueLg.st100025+StringUtils.addColor(e.getRemindTimeString(),Color.Green)),this.showImg.source=t.SHOW_IMG_LIST[this.selectedIndex];var i=this.getConfig(),o=i.reward[0].id,s=GlobalConfig.itemConfig[o];this.itemName.text=s.name,this.dec.text=i.tips;var n=i.ratio[GameServer.serverOpenDay-1],r=i.yuanjia*n/100;this.price.price=i.yuanjia,this.price1.price=r;for(var a,l=!1,h=0,c=e.buyids;h<c.length;h++){var u=c[h];if(u.id==this.selectedIndex+1){l=!0,a=u;break}}if(l){this.getBtn.label=GlobalConfig.jifengTiaoyueLg.st101342,this.getBtn.enabled=!1,this.priceGroup.visible=!1,this.feedTips.visible=!0;var d=i.ratio[a.buyServerRunDay-1],p=a.buyPrice*d/100,f=StringUtils.addColor(""+a.buyServerRunDay+GlobalConfig.jifengTiaoyueLg.st100006+",",Color.Green),g=StringUtils.addColor(d+"%",Color.Green),_=StringUtils.addColor(""+p,Color.Green);this.feedTips.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101684,[f,g,_]))}else this.getBtn.label=GlobalConfig.jifengTiaoyueLg.st100069,this.getBtn.enabled=!0,this.priceGroup.visible=!0,this.feedTips.visible=!1},t.prototype.OnOpenIndex=function(e){return!0},Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this.commonWindowBg.GetSelectedIndex()},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var e=GlobalConfig.ins("ActivityType15Config")[200];return e[this.selectedIndex]},t.prototype.getTableData=function(){for(var e=GlobalConfig.ins("ActivityType15Config")[200],t=[],i=0,o=e;i<o.length;i++){var s=o[i];t.push(s.tabName)}return t},t.SHOW_IMG_LIST=["comp_243_267_01_png","comp_243_267_06_png","comp_243_267_03_png","comp_243_267_02_png","comp_243_267_05_png","comp_243_267_04_png"],t}(BaseEuiPanel);__reflect(FeedbackWin.prototype,"FeedbackWin",["ICommonWindowTitle"]),ViewManager.ins().reg(FeedbackWin,LayerManager.UI_Main),window.FeedbackWin=FeedbackWin;var RewardData=function(){function e(){}return e.prototype.parser=function(e){this.type=e.type,this.id=e.id,this.count=e.count},e.SetValue=function(e,t,i){return null!=t[e]?(i[e]=t[e],!0):!1},e.ToRewardData=function(t){var i=new e;return e.SetValue("type",t,i),e.SetValue("id",t,i),e.SetValue("count",t,i),i},e.ToRewardDatas=function(e){for(var t=[],i=0,o=e;i<o.length;i++){var s=o[i];t.push(this.ToRewardData(s))}return t},e}();__reflect(RewardData.prototype,"RewardData"),window.RewardData=RewardData;var ActivityBtnRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="BtnTab0Skin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this;this.labelDisplay.text=this.data.acDesc;var t=ActivityModel.GetCusActData(this.data.id);if(t)this.redPoint.visible=t.canReward();else{var i=GameGlobal.activityData[this.data.id];if(i)switch(i.type){case 2:case 9:this.redPoint.visible=i.IsRedpointType2();break;case 4:this.redPoint.visible=GameGlobal.activityModel.getisCangetDabiao(this.data.id),TimerManager.ins().doTimer(100,1,function(){e.redPoint.visible=GameGlobal.activityModel.getisCangetDabiao(e.data.id)},this);break;case 303:var o=GameGlobal.activityData[303];this.redPoint.visible=o.isAllCanBattle();break;default:this.redPoint.visible=GameGlobal.activityModel.checkAcCanGet(this.data.id+"")}else console.log("错误活动id:"+this.data.id)}},t}(FuliActBtnRenderer);__reflect(ActivityBtnRenderer.prototype,"ActivityBtnRenderer"),window.ActivityBtnRenderer=ActivityBtnRenderer;var EasyLoading=function(e){function t(){var t=e.call(this)||this;return t.m_ItemEffGroup=new eui.Group,t.m_Img=new eui.Rect,t.init(),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.init=function(){this.m_ItemEffGroup.addChild(this.m_Img),this.m_ItemEffGroup.width=20,this.m_ItemEffGroup.height=20,this.m_Img.alpha=.5,this.m_ItemEffGroup.anchorOffsetX=this.m_ItemEffGroup.width/2,this.m_ItemEffGroup.anchorOffsetY=this.m_ItemEffGroup.height/2,GameSocket.ins().setOnClose(this.showLoading,this),GameSocket.ins().setOnConnected(this.hideLoading,this)},t.prototype.showLoading=function(){this.m_ItemEffGroup.y=StageUtils.ins().getHeight()/2,this.m_ItemEffGroup.x=StageUtils.ins().getWidth()/2,this.m_Img.width=StageUtils.ins().getWidth()+500,this.m_Img.height=StageUtils.ins().getHeight()+500,this.m_Img.anchorOffsetX=this.m_Img.width/2,this.m_Img.anchorOffsetY=this.m_Img.height/2,StageUtils.ins().getStage().addChild(this.m_ItemEffGroup),this.playUpEff()},t.prototype.hideLoading=function(){DisplayUtils.removeFromParent(this.m_ItemEffGroup),DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null},t.prototype.playUpEff=function(){this.initEffData1(),this.m_ItemEff.visible=!0,this.m_ItemEff.loadUrl(ResDataPath.GetUIEffePath("eff_circle"),!0,-1)},t.prototype.initEffData1=function(){this.m_ItemEff||(this.m_ItemEff=new MovieClip,this.m_ItemEff.touchEnabled=!1,this.m_ItemEffGroup.addChild(this.m_ItemEff),this.m_ItemEff.x=this.m_ItemEffGroup.width/2,this.m_ItemEff.y=this.m_ItemEffGroup.height/2)},t}(BaseClass);__reflect(EasyLoading.prototype,"EasyLoading"),window.EasyLoading=EasyLoading;var ActivityType31Panel=function(e){function t(){var t=e.call(this)||this;return t.mWindowHelpId=39,t.m_ArrayDatas=new eui.ArrayCollection,t.rankObj={205:1013,209:1014,2015:2016,3022:3023,4022:4023},t.huntType=0,t.huntReward=[],t.skinName="ActivityType31Skin",t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=ActivityType31Data.getConfig(this.activityID);this.priceIcon1.price=e.huntOnce,this.priceIcon2.price=e.huntTenth,this.list.itemRenderer=HuntListRenderer,this.list1.itemRenderer=ActivityType21ItemRenderer,this.listData=new eui.ArrayCollection,this.list1.dataProvider=this.listData,this.name=GlobalConfig.jifengTiaoyueLg.st102061;for(var t=0;t<this.showGroup.numChildren;++t){var i=this.showGroup.getChildAt(t);i.data=e.showAward[t]}this.m_Lan0.text=GlobalConfig.jifengTiaoyueLg.st102056,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st102059,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100025,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st101274,this.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st100025,this.m_Lan5.text=GlobalConfig.jifengTiaoyueLg.st102060,this.warehouse.label=GlobalConfig.jifengTiaoyueLg.st101311,this.buy10.label=GlobalConfig.jifengTiaoyueLg.st102057,this.buy1.label=GlobalConfig.jifengTiaoyueLg.st102058,this.btn_showRank0.label=GlobalConfig.jifengTiaoyueLg.st100381,this.btn_showRank.label=GlobalConfig.jifengTiaoyueLg.st102061,this.closeMcCheck.label=GlobalConfig.jifengTiaoyueLg.st102068},t.prototype.open=function(){this.currentState="luck",this.buy1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buy10.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.warehouse.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onWarehouse,this),this.btn_showRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_showRank0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.addListener(MessageDef.HUNT_LUCK_ADDLOG,this.listAddData,this),GameGlobal.MessageCenter.addListener(MessageDef.HUNT_LUCK_REWARD,this.updateRewardData,this),GameGlobal.MessageCenter.addListener(MessageDef.PAY_SPEND_RANK_UPDATE,this.updateRankData,this),GameGlobal.MessageCenter.addListener(MessageDef.HUNT_LUCK_GOODPOOL,this.updateGoodPool,this),GameGlobal.MessageCenter.addListener(MessageDef.CHANGE_ITEM,this._UpdateRedPoint,this),GameGlobal.MessageCenter.addListener(MessageDef.DELETE_ITEM,this._UpdateRedPoint,this),MessageCenter.addListener(UserBag.postItemAdd,this._UpdateRedPoint,this),MessageCenter.addListener(ActivityType31Model.postBestListInfo,this.listRefush,this),this.listRefush([]),this.updateGoldPool(),this._UpdateRedPoint(),ActivityType31Model.ins().sendLuckywheelList();var e=ViewManager.ins().getView(ActivityWinSummer);e instanceof ActivityWinSummer&&(e.activityGroup.visible=!1,e.commonWindowBg.helpBtn.visible=!0,e.commonWindowBg.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this))},t.prototype.close=function(){var e=ViewManager.ins().getView(ActivityWinSummer);e instanceof ActivityWinSummer&&(e.activityGroup.visible=!0,e.commonWindowBg.helpBtn.visible=!1,e.commonWindowBg.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this)),this.buy1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buy10.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.warehouse.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onWarehouse,this),this.btn_showRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_showRank0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.removeListener(MessageDef.HUNT_LUCK_ADDLOG,this.listAddData,this),GameGlobal.MessageCenter.removeListener(MessageDef.HUNT_LUCK_REWARD,this.updateRewardData,this),GameGlobal.MessageCenter.removeListener(MessageDef.PAY_SPEND_RANK_UPDATE,this.updateRankData,this),GameGlobal.MessageCenter.removeListener(MessageDef.HUNT_LUCK_GOODPOOL,this.updateGoodPool,this),GameGlobal.MessageCenter.removeListener(MessageDef.CHANGE_ITEM,this._UpdateRedPoint,this),GameGlobal.MessageCenter.removeListener(MessageDef.DELETE_ITEM,this._UpdateRedPoint,this),MessageCenter.ins().removeAll(this)},t.prototype.UpdateContent=function(){},t.prototype.onClickHelp=function(){ViewManager.ins().open(ZsBossRuleSpeak,this.mWindowHelpId)},t.prototype._UpdateRedPoint=function(){UIHelper.ShowRedPoint(this.warehouse,TreasureHuntWin.IsRedPointByWarehouse())},t.prototype.onWarehouse=function(e){ViewManager.ins().open(TreasureStorePanel)},t.prototype.updateGoldPool=function(){var e=GameGlobal.activityData[this.activityID];this.price_cost.price=e.goldPool,this.label_remainTime.text=e.getRemindTimeString()},t.prototype.updateRankData=function(e){var t=ActivityType31Data.GetActivityConfig1(this.rankObj[this.activityID]);if(t[0].rankType==e){var i=Rank.ins().getRankModel(t[0].rankType),o=i._dataList.slice();if(null!=o){for(var s=0,n=o.length;n>s;s++){var r=o[s];r.activityId=this.rankObj[this.activityID]}var a=GameGlobal.activityData[this.activityID];this.listData.replaceAll(o),this.labelRank.textFlow=(new egret.HtmlTextParser).parse(GlobalConfig.jifengTiaoyueLg.st100403+('<font color="#008F22">'+(0==i.selfPos?GlobalConfig.jifengTiaoyueLg.st100086:i.selfPos)+"</font>")),this.labelCount.textFlow=(new egret.HtmlTextParser).parse(GlobalConfig.jifengTiaoyueLg.st102062+('<font color="#008F22">'+i.value+"</font>")+GlobalConfig.jifengTiaoyueLg.st100024);var l=ActivityModel.GetActivityConfig(this.rankObj[this.activityID]);t&&a&&(this.date.text=this.getRemindTimeString(a.startTime,a.endTime),this.desc.text=l.desc)}}},t.prototype.updateGoodPool=function(e){this.price_cost.price=e},t.prototype.getRemindTimeString=function(e,t){var i=Math.floor(e-GameServer.serverTime),o=Math.max(Math.floor(t-GameServer.serverTime),0);if(i>=0)return GlobalConfig.jifengTiaoyueLg.st101885;if(0>=o)return GlobalConfig.jifengTiaoyueLg.st101289;var s=Math.floor(o/86400),n=Math.floor(o%86400/3600),r=Math.floor(o%3600/60),a=s+GlobalConfig.jifengTiaoyueLg.st100006+n+GlobalConfig.jifengTiaoyueLg.st101518+r+GlobalConfig.jifengTiaoyueLg.st101519;return a},t.prototype.onTap=function(e){switch(this.closeMcCheck.selected?ActivityType31Model.isPlayTween=!0:ActivityType31Model.isPlayTween=!1,e.currentTarget){case this.buy1:this.buyHunt(0);break;case this.buy10:this.buyHunt(1);break;case this.btn_showRank0:this.currentState="ranking";var t=ActivityType31Data.GetActivityConfig1(this.rankObj[this.activityID]);Rank.ins().sendGetRankingData(t[0].rankType);var i=ViewManager.ins().getView(ActivityWin);i instanceof ActivityWin&&(i.activityGroup.visible=!0);break;case this.btn_showRank:this.currentState="luck";var i=ViewManager.ins().getView(ActivityWin);i instanceof ActivityWin&&(i.activityGroup.visible=!1)}},t.prototype.buyHunt=function(e){var t=ActivityType31Data.getConfig(this.activityID),i=0==e&&t.huntOnce||t.huntTenth;Checker.Money(MoneyConst.yuanbao,i,Checker.YUNBAO_FRAME)&&(ActivityType31Model.ins().sendHuntOne(e,this.activityID),ActivityType31Model.bCanClose=!1)},t.prototype.updateRewardData=function(e,t){if(this.updateGoldPool(),this.huntType=e,this.huntReward=t,ViewManager.ins().isShow(ActivityType31ResultWin))GameGlobal.MessageCenter.dispatchImmediate(MessageDef.HUNT_RESULT,[this.huntType,this.huntReward,this.activityID]);else{if(this.closeMcCheck.selected)return void ViewManager.ins().open(ActivityType31ResultWin,this.huntType,this.huntReward,this.activityID);var i=this.getRewardIndex();this.onRollStart(i)}},t.prototype.onRollReset=function(){egret.Tween.removeTweens(this.group_table),this.group_table.rotation=0,this.group_table.scaleX=this.group_table.scaleY=1,this.resultImg.visible=!1},t.prototype.onRollStart=function(e){this.onRollReset(),this.buy1.touchEnabled=!1,this.buy10.touchEnabled=!1,egret.Tween.get(this.group_table).to({rotation:1440},1200,egret.Ease.quartIn).to({rotation:1*(2160+36*e)},3600,egret.Ease.quartOut).call(this.onRollStop,this)},t.prototype.onRollStop=function(){egret.Tween.removeTweens(this.group_table),this.resultImg.visible=!0;var e=this;TimerManager.ins().doTimer(500,1,function(){ViewManager.ins().open(ActivityType31ResultWin,e.huntType,e.huntReward,e.activityID),this.onRollReset(),e.buy1.touchEnabled=!0,e.buy10.touchEnabled=!0,this.warn.visible=!1,ActivityType31Model.bCanClose=!0},this)},t.prototype.listRefush=function(e){this.list.dataProvider=new eui.ArrayCollection(e)},t.prototype.listAddData=function(e){this.list.dataProvider.addItemAt(e,0)},t.prototype.getRewardIndex=function(){for(var e=ActivityType31Data.getConfig(this.activityID),t=e.rewardShow.length,i=this.huntReward[0]?this.huntReward[0][0]:0,o=0;t>o;++o)if(i==e.rewardShow[o].id)return o;return 0},t}(ActivityPanel);__reflect(ActivityType31Panel.prototype,"ActivityType31Panel",["ICommonWindowTitle"]),window.ActivityType31Panel=ActivityType31Panel;var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function o(o){t.call(i,o,e)}if(RES.hasRes(e)){var s=RES.getRes(e);s?o(s):RES.getResAsync(e,o,this)}else RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]),window.AssetAdapter=AssetAdapter;var ActivityWinSummer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype._UpdateTitleImg=function(){},t.prototype._SetActWinType=function(e){this.type=t.onPlace},t.prototype.changeSkinByType=function(e){this.skinName="ActivityWinSkin"},t.onPlace=ActivityModel.BTN_TYPE_02,t}(ActivityWin);__reflect(ActivityWinSummer.prototype,"ActivityWinSummer"),window.ActivityWinSummer=ActivityWinSummer;var DayLoginPanel=function(e){function t(){var t=e.call(this)||this;return t.index=0,t.m_mc=[],t.skinName="DayLoginPanel2Skin",t.m_DayItem=t.group.$children,t.list.itemRenderer=ItemBase,t.getBtn.label=GlobalConfig.jifengTiaoyueLg.st100004,t
}return __extends(t,e),t.prototype.UpdateContent=function(){},t.prototype.open=function(){this.AddClick(this.getBtn,this._OnClick),this.observe(MessageDef.UPDATE_ACTIVITY_PANEL,this._UpdateContent);for(var e=0;8>e;++e){var t=this.group.getChildAt(e);t.addEventListener(egret.TouchEvent.TOUCH_TAP,this._ClickBox,this)}this._UpdateContent(!0)},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeObserve();for(var e=0;e<this.m_DayItem.length;e++)this.m_DayItem[e].m_ItemList.dataProvider=null,this.m_DayItem[e]._mc&&DisplayUtils.removeFromParent(this.m_DayItem[e]._mc);for(var t=this.group.numChildren,i=0;t>i;++i){var o=this.group.removeChildAt(0);o&&o.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._ClickBox,this)}},t.prototype._OnClick=function(){this.m_ActivityData&&this.curRewardData&&this.m_ActivityData.checkOneDayStatu(this.curRewardData.index)==RewardState.CanGet&&ActivityModel.ins().sendReward(this.m_ActivityData.id,this.curRewardData.index)},t.prototype._UpdateRewards=function(e){this.m_DayItem[this.index].select.visible=!1,this.m_DayItem[this.index].stateImg.visible=!1,this.index=e;var t=this.m_DayItem[this.index];t.select.visible=!0,t.stateImg.visible=!1,this.curRewardData=this.m_ActivityData.GetConfigByIndex(this.index+1);var i=this.m_ActivityData.logTime>=this.curRewardData.day;this.stateImg2.visible=t.isReward,this.getBtn.visible=!t.isReward,this.getBtn.visible&&(this.getBtn.enabled=i),UIHelper.SetBtnNormalEffe(this.getBtn,this.getBtn.visible&&i),this.list.dataProvider=new eui.ArrayCollection(this.curRewardData.rewards)},t.prototype._ClickBox=function(e){this._UpdateRewards(this.group.getChildIndex(e.target))},t.prototype._UpdateContent=function(e){if(void 0===e&&(e=!1),this.m_ActivityData=ActivityModel.ins().GetActivityDataByType(5),!this.m_ActivityData)return void ViewManager.ins().close(this);null==this.ActivityType5Config&&(this.ActivityType5Config=GlobalConfig.ins("ActivityType5Config"));for(var t=GlobalConfig.ins("ActivityType5Config")[this.m_ActivityData.id],i=null,o=!1,s=1;8>=s;++s){var n=this.m_ActivityData.GetConfigByIndex(s),r=!1,a=!1;this.m_ActivityData.logTime>=n.day&&(BitUtil.Has(this.m_ActivityData.record,s)?r=!0:a=!0),null!=i||r||(i=s-1,a&&(o=!0));var l=this.m_DayItem[s-1];l.dayimg.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100002,[n.day]),l.isReward=r,1==r?(l.stateImg2.visible=!0,l._mc&&(l._mc.visible=!1),l.stateImg2.source="comp_84_62_01_png"):1==a?(l.stateImg2.visible=!1,null==l._mc&&(l._mc=new MovieClip,l._mc.x=l.groupEff.width/2,l._mc.y=l.groupEff.height/2,l.groupEff.addChild(l._mc),l._mc.visible=!0,l._mc.loadUrl(ResDataPath.GetUIEffePath("quaeff4"),!0,-1))):(l.stateImg2.visible=!1,l._mc&&(l._mc.visible=!1)),l.m_ItemList.itemRenderer=ItemBase,l.m_ItemList.dataProvider=new eui.ArrayCollection([t[s-1].showRewards])}null!=i&&1==o||1==e?this._UpdateRewards(i||0):null!=i&&0==o?this._UpdateRewards(i-1||0):this._UpdateRewards(7),this.loginDayLabel.text=GlobalConfig.jifengTiaoyueLg.st100003+this.m_ActivityData.logTime},t.prototype._IsGotten=function(e){var t=this.m_ActivityData.GetConfigByIndex(e),i=!1;return this.m_ActivityData.logTime>=t.day&&BitUtil.Has(this.m_ActivityData.record,e)&&(i=!0),i},t.prototype.playEffect=function(e,t){t?(e.loadUrl(ResDataPath.GetUIEffePath("eff_task_box"),!0,100),this.addChild(e)):e.parent&&DisplayUtils.dispose(e),e=null},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(DayLoginPanel.prototype,"DayLoginPanel",["ICommonWindow","ICommonWindowTitle"]),window.DayLoginPanel=DayLoginPanel;var YbTurntableWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101079,t.m_RollUpdate=!0,t.skinName="YbTurntableView",t.btn_start.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101078,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100025,t.label_remainTime0.text=GlobalConfig.jifengTiaoyueLg.st101087,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.btn_start.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.addListener(MessageDef.YB_TURNTABLE_UPDATE,this.update,this),GameGlobal.MessageCenter.addListener(MessageDef.YBTURNTABLE_START,this.onRollStart,this),GameGlobal.MessageCenter.addListener(MessageDef.YBTURNTABLE_RECORD_MSG,this.updateRecord,this),this.onRollReset(),this.update(),this.updateRecord(),YbTurntableModel.ins().sendGetInfo(GameGlobal.ybTurntableModel.activityId)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.btn_start.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.removeListener(MessageDef.YBTURNTABLE_START,this.onRollStart,this),GameGlobal.MessageCenter.removeListener(MessageDef.YBTURNTABLE_RECORD_MSG,this.updateRecord,this),GameGlobal.MessageCenter.removeListener(MessageDef.YB_TURNTABLE_UPDATE,this.update,this),this.commonWindowBg.OnRemoved()},t.prototype.update=function(){if(!this.m_RollUpdate)return!0;var e=GameGlobal.ybTurntableModel.remainTime(),t=Math.floor(e/86400),i=Math.floor(e%86400/3600),o=Math.floor(e%3600/60);this.label_remainTime.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101080,[t,i,o]),this.img_level.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101081,[Math.min(GameGlobal.ybTurntableModel.level,GameGlobal.ybTurntableModel.maxLevel)]);for(var s=GameGlobal.ybTurntableModel.config,i=0;i<s.info.length;i++){var n=s.info[i],r=s.info1[i],a=this["img_rate_"+i],l=this["img_"+i];n&&r&&(a&&(a.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101082,[n.multiple])),l&&(l.source=r.img+"_png"))}if(this.price_cost.price=s.yuanBao,GameGlobal.ybTurntableModel.level>GameGlobal.ybTurntableModel.maxLevel)this.label_needCharge.text=GlobalConfig.jifengTiaoyueLg.st101083,this.label_needCharge.textColor=4313895;else{var h=s.recharge-GameGlobal.ybTurntableModel.chargeRecord;this.label_needCharge.text=h>0?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101084,[h]):GlobalConfig.jifengTiaoyueLg.st101085,this.label_needCharge.textColor=h>0?Color.Black:Color.Yellow}GameGlobal.ybTurntableModel.level>GameGlobal.ybTurntableModel.maxLevel||GameGlobal.ybTurntableModel.chargeRecord<s.recharge||s.yuanBao>parseInt(GameGlobal.actorModel.yb+"")?this.redPoint.visible=!1:this.redPoint.visible=!0},t.prototype.updateRecord=function(){for(var e="",t=0,i=GameGlobal.ybTurntableModel.msgList;t<i.length;t++){var o=i[t];e+=o,GameGlobal.ybTurntableModel.msgList.indexOf(o)<GameGlobal.ybTurntableModel.msgList.length-1&&(e+="\n")}var s=new egret.HtmlTextParser;this.label_record.textFlow=s.parser(e),this.scroller_record&&this.scroller_record.viewport&&(this.scroller_record.viewport.scrollV=Math.max(this.label_record.height-this.scroller_record.height+10,0))},t.prototype.onTap=function(e){switch(e.currentTarget){case this.btn_start:this.onBtnStartTouchTap()}},t.prototype.UpdateContent=function(){},t.prototype.onRollReset=function(){this.m_RollUpdate=!0,egret.Tween.removeTweens(this.group_table),this.group_table.rotation=0,this.group_table.scaleX=this.group_table.scaleY=1,this.rewardEff&&(this.rewardEff.visible=!1)},t.prototype.onRollStart=function(e){e?(this.onRollReset(),this.btn_start.touchEnabled=!1,egret.Tween.get(this.group_table).to({rotation:-1440},1200,egret.Ease.quartIn).to({rotation:-1*(2160+45*(e-1))},3600,egret.Ease.quartOut).call(this.onRollStop,this)):egret.log("转盘index为空")},t.prototype.onRollStop=function(){egret.Tween.removeTweens(this.group_table);var e=this;null==this.rewardEff&&(this.rewardEff=new MovieClip,this.group_rewardEff.addChild(this.rewardEff),this.rewardEff.loadUrl(ResDataPath.GetUIEffePath("eff_turntable_result"),!0,-1)),this.rewardEff.visible=!0,this.m_RollUpdate=!1,YbTurntableModel.ins().sendGetInfo(GameGlobal.ybTurntableModel.activityId),TimerManager.ins().doTimer(3e3,1,function(){e.onRollReset(),e.update(),egret.Tween.get(e.group_table).to({scaleX:0,scaleY:0},200).to({scaleX:1,scaleY:1},200).call(function(){egret.Tween.removeTweens(e.group_table)}),e.btn_start.touchEnabled=!0},this)},t.prototype.onBtnStartTouchTap=function(){var e=GameGlobal.ybTurntableModel.config;return GameGlobal.ybTurntableModel.level>GameGlobal.ybTurntableModel.maxLevel?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101086):GameGlobal.ybTurntableModel.chargeRecord<e.recharge?void Checker.YunbaoTip(this.label_needCharge.text):void(Checker.Money(MoneyConst.yuanbao,e.yuanBao,Checker.YUNBAO_FRAME)&&(this.redPoint.visible=!1,YbTurntableModel.ins().sendRollStart(GameGlobal.ybTurntableModel.activityId)))},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(YbTurntableWin.prototype,"YbTurntableWin",["ICommonWindow","ICommonWindowTitle"]),window.YbTurntableWin=YbTurntableWin;var Activity2Panel1=function(e){function t(){var t=e.call(this)||this;return t.isInit=!1,t.skinName="LimitGiftActSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=Activity2Item},t.prototype.open=function(){this.updateData();var e=GameGlobal.activityData[this.activityID];this.date.text=GlobalConfig.jifengTiaoyueLg.st100025+e.getRemindTimeString(),GlobalConfig.ins("ActivityAConfig")[this.activityID]?this.desc.text=GlobalConfig.ins("ActivityAConfig")[this.activityID].desc:this.desc.text=GlobalConfig.ins("ActivityConfig")[this.activityID].desc,MessageCenter.ins().addListener(MessageDef.UPDATE_ACTIVITY2_MSG,this.updateData,this)},t.prototype.close=function(){MessageCenter.ins().removeListener(MessageDef.UPDATE_ACTIVITY2_MSG,this.updateData,this)},t.prototype.updateData=function(){for(var e=GameGlobal.activityData[this.activityID],t=e.GetConfigData(),i=[],o=0;o<t.length;o++){var s=t[o];i.push({configData:s,activityID:this.activityID,isLast:o==t.length-1})}i.sort(function(t,i){var o=e.buyData[t.configData.index-1]||0,s=e.buyData[i.configData.index-1]||0;return 0==o&&0==s?-1:0==o?1:0==s?-1:t.configData.index-i.configData.index}),this.list.dataProvider=new eui.ArrayCollection(i)},t}(eui.Component);__reflect(Activity2Panel1.prototype,"Activity2Panel1");var Activity2Item=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.buy.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.buy.label=GlobalConfig.jifengTiaoyueLg.st101282,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101336,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101337},t.prototype._OnClick=function(){var e=this.data.configData,t=this.data.activityID,i=e.index-1,o=GameGlobal.activityData[t];try{var s=(o.buyData[i]||0,1==e.currencyType?GameGlobal.actorModel.gold:GameGlobal.actorModel.yb);1==e.currencyType?GameGlobal.actorModel.gold:GameGlobal.actorModel.yb;var n=1==e.currencyType?GlobalConfig.jifengTiaoyueLg.st100018:GlobalConfig.jifengTiaoyueLg.st100050;0==UserBag.ins().getSurplusCount()?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101329):e.vip&&GameGlobal.actorModel.vipLv<e.vip?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101330):parseInt(s+"")>=e.price?WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101331,[e.price+n]),function(){ActivityModel.ins().sendReward(t,i+1)},this):UserTips.ins().showTips(n+GlobalConfig.jifengTiaoyueLg.st101332)}catch(r){egret.log("限购按钮错误"),egret.log(r)}},t.prototype.dataChanged=function(){var e=this.data.configData,t=this.data.activityID,i=e.index-1,o=GameGlobal.activityData[t],s=o.buyData[i]||0;this.item.data=e.rewards[0],this.price.labelColor="0xD6B344",this.y_price.labelColor="0xADADAD",this.item.showLegendEffe(),this.title.text=e.vip?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101333,[e.vip]):"",this.price.price=e.price,this.price.type=1==e.currencyType?MoneyConst.gold:MoneyConst.yuanbao;var n,r=e.discount.replace("discount_","");n=null==r[1]?r[0]:0==r[0]?"0.0"+r[1]:"0."+r[0]+r[1],this.y_price.price=Math.round(e.price/parseFloat(n)),this.y_price.type=1==e.currencyType?MoneyConst.gold:MoneyConst.yuanbao,this.desc.text=GlobalConfig.jifengTiaoyueLg.st101335+s,this.buy.enabled=s>0,this.redPoint.visible=o.IsRedpointType2Item(i);try{var a=e.discount.replace("discount_","");"0"==a[1]?this.imgDiscount.text=a[0]+GlobalConfig.jifengTiaoyueLg.st102090:this.imgDiscount.text=a[0]+"."+a[1]+GlobalConfig.jifengTiaoyueLg.st102090,this.imgDiscountBg.visible=!0,this.imgDiscount.visible=!0}catch(l){this.imgDiscountBg.visible=!1,this.imgDiscount.visible=!1,console.log(l)}this.item.isShowName(!1),this.itemName.text=this.item.nameTxt.text},t}(eui.ItemRenderer);__reflect(Activity2Item.prototype,"Activity2Item"),window.Activity2Panel1=Activity2Panel1,window.Activity2Item=Activity2Item;var ActivityItemShow=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setDataByConfig=function(t){e.prototype.setDataByConfig.call(this,t),this.nameTxt.text=t.name,this.showLegendEffe()},t}(ItemBase);__reflect(ActivityItemShow.prototype,"ActivityItemShow");var Activity2Panel2=function(e){function t(){var t=e.call(this)||this;return t._index=0,t.selectPos=[22,130,240,350],t.indexArray=[[0,2],[3,5],[6,8],[9,11]],t}return __extends(t,e),t.prototype.init=function(){this.skinName="ActGiftSkin",this.list.itemRenderer=ActivityItemShow,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101281,this.buyBtn.label=GlobalConfig.jifengTiaoyueLg.st101282},t.prototype.open=function(e){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.isInit||this.init(),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.updateData()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(e){var t,i=this;switch(e.currentTarget){case this.buyBtn:t=-1,this.config.vip&&GameGlobal.actorModel.vipLv<this.config.vip?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100913):GameGlobal.actorModel.yb>=this.config.price?WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101278,[this.config.price]),function(){ActivityModel.ins().sendReward(i.activityID,i.getRewardIndex(i._index)+1)},this):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008);break;case this.type_1:t=0;break;case this.type_2:t=1;break;case this.type_3:t=2;break;case this.type_4:t=3}-1!=t&&this.updateDataByTap(t)},t.prototype.updateDataByTap=function(e){this._index=e,this.updateData()},t.prototype.updateData=function(){var e=GameGlobal.activityData[this.activityID];this.date.text=GlobalConfig.jifengTiaoyueLg.st100025+e.getRemindTimeString(),this.config=e.GetConfigData()[this.getRewardIndex(this._index)],this.list.dataProvider=new eui.ArrayCollection(this.config.rewards);var t,i=this.config.discount.replace("discount_","");t="0"==i[1]?i[0]:i[0]+"."+i[1],this.desc.textFlow=TextFlowMaker.generateTextFlow(GlobalConfig.jifengTiaoyueLg.st101279+StringUtils.addColor("7",16743942)+GlobalConfig.jifengTiaoyueLg.st100006+StringUtils.addColor(" "+t,16743942)+GlobalConfig.jifengTiaoyueLg.st101280+StringUtils.addColor(""+this.config.price,16743942)+GlobalConfig.jifengTiaoyueLg.st100050),this.chosen.x=this.selectPos[this._index],this.get_1.visible=!this.canbuyState(0),this.get_2.visible=!this.canbuyState(1),this.get_3.visible=!this.canbuyState(2),this.get_4.visible=!this.canbuyState(3),this.buyBtn.visible=this.canbuyState(this._index),this.tips.visible=!this.buyBtn.visible},t.prototype.canbuyState=function(e){for(var t=GameGlobal.activityData[this.activityID],i=this.indexArray[e][0];i<=this.indexArray[e][1];i++)if(t.buyData[i]>0)return!0;return!1},t.prototype.getRewardIndex=function(e){for(var t=GameGlobal.activityData[this.activityID],i=this.indexArray[e][0];i<=this.indexArray[e][1];i++)if(t.buyData[i]>0)return i;return this.indexArray[e][1]},t}(eui.Component);__reflect(Activity2Panel2.prototype,"Activity2Panel2"),window.ActivityItemShow=ActivityItemShow,window.Activity2Panel2=Activity2Panel2;var Activity2Panel3=function(e){function t(){var t=e.call(this)||this;return t._index=0,t.selectPos=[22,130,240,350],t.indexArray=[[0,2],[3,5],[6,8],[9,11]],t}return __extends(t,e),t.prototype.init=function(){this.skinName="ActGiftSkin",this.list.itemRenderer=ActivityItemShow,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101468,this.buyBtn.label=GlobalConfig.jifengTiaoyueLg.st101282},t.prototype.open=function(e){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.isInit||this.init(),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.updateData()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.type_4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(e){var t,i=this;switch(e.currentTarget){case this.buyBtn:t=-1,this.config.vip&&GameGlobal.actorModel.vipLv<this.config.vip?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100913):GameGlobal.actorModel.yb>=this.config.price?WarnWin.show("确定消耗"+this.config.price+"钻石购买特惠商品吗？",function(){ActivityModel.ins().sendReward(i.activityID,i.getRewardIndex(i._index)+1)},this):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008);break;case this.type_1:t=0;break;case this.type_2:t=1;break;case this.type_3:t=2;break;case this.type_4:t=3}-1!=t&&this.updateDataByTap(t)},t.prototype.updateDataByTap=function(e){this._index=e,this.updateData()},t.prototype.updateData=function(){var e=GameGlobal.activityData[this.activityID];this.date.text=GlobalConfig.jifengTiaoyueLg.st100025+e.getRemindTimeString(),this.config=e.GetConfigData()[this.getRewardIndex(this._index)],this.list.dataProvider=new eui.ArrayCollection(this.config.rewards);var t,i=this.config.discount.replace("discount_","");t="0"==i[1]?i[0]:i[0]+"."+i[1];var o=StringUtils.addColor("7",16743942),s=StringUtils.addColor(" "+t,16743942),n=StringUtils.addColor(""+this.config.price,16743942);this.desc.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101467,[o,s,n])),this.chosen.x=this.selectPos[this._index],this.get_1.visible=!this.canbuyState(0),this.get_2.visible=!this.canbuyState(1),this.get_3.visible=!this.canbuyState(2),this.get_4.visible=!this.canbuyState(3),this.buyBtn.visible=this.canbuyState(this._index),this.tips.visible=!this.buyBtn.visible},t.prototype.canbuyState=function(e){for(var t=GameGlobal.activityData[this.activityID],i=this.indexArray[e][0];i<=this.indexArray[e][1];i++)if(t.buyData[i]>0)return!0;return!1},t.prototype.getRewardIndex=function(e){for(var t=GameGlobal.activityData[this.activityID],i=this.indexArray[e][0];i<=this.indexArray[e][1];i++)if(t.buyData[i]>0)return i;return this.indexArray[e][1]},t}(eui.Component);__reflect(Activity2Panel3.prototype,"Activity2Panel3"),window.Activity2Panel3=Activity2Panel3;var ActivityGuildWinnerPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActivityGuildWinnerSkin",t.dataGroup.itemRenderer=ItemBaseEffe,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101274,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101300,t.goBtn.label=GlobalConfig.jifengTiaoyueLg.st101293,t}return __extends(t,e),t.prototype.open=function(){null==t.guildBattleConst&&(t.guildBattleConst=GlobalConfig.ins("GuildBattleConst")),this.goBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this);var e=t.guildBattleConst;this.dataGroup.dataProvider=new eui.ArrayCollection(e.firstWinner),ActivityWinSummer.onPlace==ActivityModel.BTN_TYPE_04?(this.date0.text="每周五20:00开启遗迹争霸",this.desc0.text="活动期间首个带领公会攻占遗迹的公会会长可额外获得丰厚奖励！"):(e.firstWinnerTime[1]>=GameServer.serverOpenDay?this.date0.text=e.firstWinnerTime[1]-GameServer.serverOpenDay+1+"天":this.date0.text="已结束",this.desc0.text=e.firstWinnerInfo),GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_FIRST_WINNER,this.updateData,this),this.updateData()},t.prototype.close=function(){this.goBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),GameGlobal.MessageCenter.removeListener(MessageDef.GUILDWAR_FIRST_WINNER,this.updateData,this)},t.prototype.updateData=function(){var e=GuildReward.ins().GetFirstRewardState();UIHelper.SetBtnNormalEffe(this.goBtn,e==RewardState.CanGet),this.goBtn.visible=e==RewardState.CanGet,this.activeGroup.visible=e==RewardState.Gotten},t.prototype._OnClick=function(){GuildReward.ins().SendGetFirstwinnerAward()},t.IsShowAct=function(){return null==t.guildBattleConst&&(t.guildBattleConst=GlobalConfig.ins("GuildBattleConst")),t.guildBattleConst.firstWinnerTime[1]>=GameServer.serverOpenDay},t}(eui.Component);__reflect(ActivityGuildWinnerPanel.prototype,"ActivityGuildWinnerPanel"),window.ActivityGuildWinnerPanel=ActivityGuildWinnerPanel;var Activity10PanelItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype._SetSkin=function(){},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.labelGo.text=GlobalConfig.jifengTiaoyueLg.st101077,this.labelUndo.text=GlobalConfig.jifengTiaoyueLg.st100680,this.btnGet.label=GlobalConfig.jifengTiaoyueLg.st101076},t.prototype.OnClickClose=function(){ViewManager.ins().close(ActivityWin)},t.prototype.OnGetAward=function(e){var t=e.target.parent.data.config;ActivityModel.ins().sendReward(t.Id,t.index)},t.prototype.dataChanged=function(){var e=this.data.config,t=this.data.actData,i=null;i=e&&e.rewards?e.rewards:[],this.m_Award=i,this.list.dataProvider=new eui.ArrayCollection(i),this.labelInfo.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101283,[this.GetStr(t,e)]));var o=t.GetRewardState(e.index);this.currentState=""+o},t.prototype.GetStr=function(e,t){return e.recharge>=t.yuanbao?"|C:0x00ff00&T:("+e.recharge+"/"+t.yuanbao+")|":"|C:0xf87372&T:("+e.recharge+"/"+t.yuanbao+")|"},t}(RechargeGiftPanelItem);__reflect(Activity10PanelItem.prototype,"Activity10PanelItem");var ActivityType10Panel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){this.skinName="Activity3PanelSkin",this.listTop.itemRenderer=Activity10PanelItem,this.listTop.dataProvider=new eui.ArrayCollection([])},t.prototype.open=function(e){this.updateView(),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.updateView,this)},t.prototype.close=function(){GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.updateView,this)},t.prototype.onChange=function(){this.updateTopList()},t.prototype.updateView=function(){this.updateTopList()},t.prototype.updateTopList=function(){var e=GameGlobal.activityData[this.activityID],t=ActivityType10Data.getConfig(this.activityID),i=[];for(var o in t){var s=t[o].index,n=e.GetRewardState(s),r=2;n==RewardState.CanGet?r=0:n==RewardState.NotReached?r=1:n==RewardState.Gotten&&(r=2),t[o].sortweight=r,i.push({config:t[o],actData:e})}i.sort(function(e,t){return e.config.sortweight-t.config.sortweight}),this.listTop.dataProvider=new eui.ArrayCollection(i)},t}(ActivityPanel);__reflect(ActivityType10Panel.prototype,"ActivityType10Panel"),window.Activity10PanelItem=Activity10PanelItem,window.ActivityType10Panel=ActivityType10Panel;var Activity11PanelItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype._SetSkin=function(){},t.prototype.OnClickClose=function(){ViewManager.ins().close(ActivityWin)},t.prototype.OnGetAward=function(e){var t=e.target.parent.data.config;ActivityModel.ins().sendReward(t.Id,t.index)},t.prototype.dataChanged=function(){var e=this.data.config,t=this.data.actData,i=null;i=e&&e.awardList?e.awardList:[],this.m_Award=i,this.list.dataProvider=new eui.ArrayCollection(i),this.labelInfo.textFlow=TextFlowMaker.generateTextFlow("今日累计充值"+this.GetStr(t,e)+"钻石");var o=t.GetRewardState(e.index);this.currentState=""+o},t.prototype.GetStr=function(e,t){return e.recharge>=t.pay?"|C:0x00ff00&T:("+e.recharge+"/"+t.pay+")|":"|C:0xf87372&T:("+e.recharge+"/"+t.pay+")|"},t}(RechargeGiftPanelItem);__reflect(Activity11PanelItem.prototype,"Activity11PanelItem");var ActivityType11Panel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){this.skinName="Activity3PanelSkin",this.listTop.itemRenderer=Activity11PanelItem,this.listTop.dataProvider=new eui.ArrayCollection([])},t.prototype.open=function(e){this.updateView(),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.updateView,this)},t.prototype.close=function(){GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.updateView,this)},t.prototype.onChange=function(){this.updateTopList()},t.prototype.updateView=function(){this.updateTopList()},t.prototype.updateTopList=function(){var e=GameGlobal.activityData[this.activityID],t=ActivityType11Data.getConfig(this.activityID),i=[];for(var o in t){var s=t[o].index,n=e.GetRewardState(s),r=2;n==RewardState.CanGet?r=0:n==RewardState.NotReached?r=1:n==RewardState.Gotten&&(r=2),t[o].sortweight=r,i.push({config:t[o],actData:e})}i.sort(function(e,t){return e.config.sortweight-t.config.sortweight}),this.listTop.dataProvider=new eui.ArrayCollection(i)},t}(ActivityPanel);__reflect(ActivityType11Panel.prototype,"ActivityType11Panel"),window.Activity11PanelItem=Activity11PanelItem,window.ActivityType11Panel=ActivityType11Panel;var ActivityType12EggBrokenPanel=function(e){function t(){var t=e.call(this)||this;return t.m_Index=1,t.skinName="EggBrokenItem2Skin",t.group.itemRenderer=ItemBase,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_Index=e[0],this.dialogCloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClose,this),this.AddClick(this.sure,this._OnClick),this.group.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(GlobalConfig.ins("SEtotalrewardsAConfig")[this.m_Index].box))},t.prototype.close=function(){this.dialogCloseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClose,this)},t.prototype._OnClick=function(){EggBroken.ins().count>=GlobalConfig.ins("SEtotalrewardsAConfig")[this.m_Index].time?EggBroken.ins().sendHitting(this.m_Index,ActivityType12Panel.activityID):UserTips.ErrorTip("目标未达成"),ViewManager.ins().close(this)},t.prototype._OnClose=function(e){ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(ActivityType12EggBrokenPanel.prototype,"ActivityType12EggBrokenPanel"),window.ActivityType12EggBrokenPanel=ActivityType12EggBrokenPanel;var ActivityType12Panel=function(e){function t(){var t=e.call(this)||this;return t.m_ArrayDatas=new eui.ArrayCollection,t.skinName="EggBrokenSkin",t.menuScroller.scrollPolicyV=eui.ScrollPolicy.OFF,t.listEgg.itemRenderer=ActivityType12PanelItem,t.list.itemRenderer=HuntListRenderer,t}return __extends(t,e),t.prototype.open=function(e){t.activityID=this.activityID,this.updateView(),this.buy0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.buy1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.warehouse.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),MessageCenter.addListener(EggBroken.postBestListInfo,this.listRefush,this),GameGlobal.MessageCenter.addListener(MessageDef.EggBroken_ADDRECORD,this.listAddData,this),GameGlobal.MessageCenter.addListener(MessageDef.EGG_BROKEN_RESULT,this._UpdateList,this),GameGlobal.MessageCenter.addListener(MessageDef.ITEM_COUNT_CHANGE,this._UpdateRedPoint,this),EggBroken.ins().sendHuntList();var i=GlobalConfig.ins("SEDayAConfig")[EggBroken.ins().diffDay];if(this.priceIcon1.price=GlobalConfig.ins("SmashEggsAConfig").huntOnce,this.priceIcon2.price=GlobalConfig.ins("SmashEggsAConfig").huntTenth,i){i=i.rewardShow;for(var o=0;3>o;o++)this["item"+o].data=i[o],this["item"+o].showItemEffect()}this.listRefush([]),this.listEgg.dataProvider=this.m_ArrayDatas,this._UpdateList(),this.lefttime.text=this.updateTimer(EggBroken.ins().endTime)},t.prototype._OnClick=function(){ViewManager.ins().open(TreasureStorePanel)},t.prototype._UpdateList=function(){var e=[],t=GlobalConfig.ins("SEtotalrewardsAConfig");for(var i in t)e.push([t[i].index,t[i].time]);e.sort(function(e,t){return e[0]-t[0]}),this.m_ArrayDatas.replaceAll(e),this._UpdateRedPoint()},t.prototype._UpdateRedPoint=function(){UIHelper.ShowRedPoint(this.warehouse,TreasureHuntWin.IsRedPointByWarehouse())},t.prototype.close=function(){this.buy0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.buy1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.warehouse.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),MessageCenter.ins().removeAll(this)},t.prototype.listRefush=function(e){this.list.dataProvider=new eui.ArrayCollection(e)},t.prototype.listAddData=function(e){this.list.dataProvider.addItemAt(e,0)},t.prototype.onBuy=function(e){switch(e.target){case this.buy0:this.buyHunt(0);break;case this.buy1:this.buyHunt(1)}},t.prototype.buyHunt=function(e){var t=0==e&&GlobalConfig.ins("SmashEggsAConfig").huntOnce||GlobalConfig.ins("SmashEggsAConfig").huntTenth;Checker.Money(MoneyConst.yuanbao,t,Checker.YUNBAO_FRAME)&&EggBroken.ins().sendHunt(e,this.activityID)},t.prototype.hitting=function(e){EggBroken.ins().sendHitting(e,this.activityID)},t.prototype.updateData=function(){},t.prototype.updateView=function(){},t.prototype.updateTimer=function(e){var t="",i=e-GameServer.serverTime;return t=(i/24/3600>>0)+"天"+(i/3600%24>>0)+"时"+(i/60%60>>0)+"分"},t.activityID=0,t}(ActivityPanel);__reflect(ActivityType12Panel.prototype,"ActivityType12Panel");var ActivityType12PanelItem=function(e){function t(){var t=e.call(this)||this;return t.index=0,t.needcount=0,t.skinName="OnlyOneEggSkin",t.btOpen.addEventListener(egret.TouchEvent.TOUCH_TAP,t.OnClick,t),t}return __extends(t,e),t.prototype.OnClick=function(e){switch(e.currentTarget){case this.btOpen:this.IsHas()||ViewManager.ins().open(ActivityType12EggBrokenPanel,this.index)}},t.prototype.dataChanged=function(){this.index=this.data[0],this.needcount=this.data[1],this.hasopen.visible=this.IsHas(),this.showCount.textFlow=ConsumeLabel.GetValueColor(Math.min(EggBroken.ins().count,this.needcount),this.needcount)},t.prototype.IsHas=function(){return 0!=(1<<this.index&EggBroken.ins().awards)},t}(eui.ItemRenderer);__reflect(ActivityType12PanelItem.prototype,"ActivityType12PanelItem"),window.ActivityType12Panel=ActivityType12Panel,window.ActivityType12PanelItem=ActivityType12PanelItem;var ActivityType14Panel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActivityType2001Skin",t.list.itemRenderer=ActivityType14Item,t
}return __extends(t,e),t.prototype.open=function(){this.updateData()},t.prototype.close=function(){},t.prototype.updateData=function(){var e=this.GetActData();this.timeLabel.text="剩余时间："+e.getRemindTimeString(),this.totalLabel.textFlow=TextFlowMaker.generateTextFlow("已累计消费|C:0x00ff00&T:"+e.accumulativeConsumption+"|钻石"),this._UpdateList()},t.prototype._UpdateList=function(){var e=this.GetActData(),t=ActivityType14Data.getConfig(this.activityID),i=[];for(var o in t){var s=t[o];i[s.index-1]={configData:s,actData:e}}i.sort(function(t,i){var o=e.GetRewardState(t.configData.index),s=e.GetRewardState(i.configData.index),n=o==RewardState.CanGet?10:o==RewardState.NotReached?5:0,r=s==RewardState.CanGet?10:s==RewardState.NotReached?5:0;return r-n}),this.list.dataProvider=new eui.ArrayCollection(i)},t.prototype._OnClick=function(e){},t.prototype.GetActivityTimeAndDes=function(){return[!1]},t}(ActivityPanel);__reflect(ActivityType14Panel.prototype,"ActivityType14Panel");var ActivityType14Item=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseEffe,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(){var e=this.data;e&&ActivityModel.ins().sendReward(e.actData.id,e.configData.index)},t.prototype.dataChanged=function(){var e=this.data;if(e){this.list.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(e.configData.rewards)),this.priceIcon.price=e.configData.play;var t=e.actData.GetRewardState(e.configData.index);this.btn.visible=t==RewardState.CanGet,this.getImg.visible=t==RewardState.Gotten}},t}(eui.ItemRenderer);__reflect(ActivityType14Item.prototype,"ActivityType14Item"),window.ActivityType14Panel=ActivityType14Panel,window.ActivityType14Item=ActivityType14Item;var ActivityType1ItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActLevelSonSkin",t.list.itemRenderer=ActivityItemShow,t.rewardBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.reward,t),t.rewardBtn.label=GlobalConfig.jifengTiaoyueLg.st101076,t.noReach.text=GlobalConfig.jifengTiaoyueLg.st100680,t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data,t=GameGlobal.activityData[e.Id],i="";e.limit>0&&(i=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101275,[t.mNums[e.index-1],e.limit])),e.zslevel>0?this.labelInfo.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101276,[e.zslevel])+i):this.labelInfo.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101277,[e.level])+i),this.currentState=t.getRewardStateById(e.index-1)+"",this.list.dataProvider=new eui.ArrayCollection(e.rewards)},t.prototype.reward=function(e){if(UserBag.ins().getSurplusCount()>=1){var t=this.data;ActivityModel.ins().sendReward(t.Id,t.index)}else UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100051)},t}(eui.ItemRenderer);__reflect(ActivityType1ItemRenderer.prototype,"ActivityType1ItemRenderer");var ActivityType1Panel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActLevelSkin",t.list.itemRenderer=ActivityType1ItemRenderer,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.listData=new eui.ArrayCollection,this.list.dataProvider=this.listData},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.updateData(),ActivityModel.ins().SendLevelInfo(this.activityID)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.updateData=function(){var e=GameGlobal.activityData[this.activityID],t=GlobalConfig.ins("ActivityType1Config")[e.id].slice();t.sort(this.sortFunc),this.listData.replaceAll(t)},t.prototype.sortFunc=function(e,t){var i=GameGlobal.activityData[e.Id],o=ActivityType1Data.RewardWeight(i.getRewardStateById(e.index-1))-ActivityType1Data.RewardWeight(i.getRewardStateById(t.index-1));return 0==o&&(o=e.zslevel-t.zslevel,0==o&&(o=e.level-t.level)),o},t}(ActivityPanel);__reflect(ActivityType1Panel.prototype,"ActivityType1Panel"),window.ActivityType1ItemRenderer=ActivityType1ItemRenderer,window.ActivityType1Panel=ActivityType1Panel;var ActivityType21ItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActivityType21ItemSkin",t.list.itemRenderer=ActivityItemShow,t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.rankImg.source=e.idx<=3?"comp_68_67_0"+e.idx+"_png":"",this.label_rank.visible=e.idx>3;var t=this.getDataList(e.activityId,e.idx);if(null==t)return void console.error("type"+e.activityId+" activity cfg not found");this.data.idx>0&&this.label_rank&&(this.label_rank.text=""+e.idx)+"",this.list.dataProvider=new eui.ArrayCollection(t.rewards);var i=ActivityModel.GetActivityConfig(e.activityId).tabName,o=-1!=i.indexOf(GlobalConfig.jifengTiaoyueLg.st100466),s=-1!=i.indexOf(GlobalConfig.jifengTiaoyueLg.st102066),n=s?GlobalConfig.jifengTiaoyueLg.st100024:GlobalConfig.jifengTiaoyueLg.st100050;""!=e.name?(this.y=21,this.rankName.text=o?"["+e.serverId+GlobalConfig.jifengTiaoyueLg.st102067+("]\n"+e.name):e.name,this.value.visible=!0,this.value.text=CommonUtils.overLength(e.value)+n):(this.y=33,this.rankName.text=GlobalConfig.jifengTiaoyueLg.st101034,this.value.text=GlobalConfig.jifengTiaoyueLg.st102063+"\n"+CommonUtils.overLength(t.value)+n)},t.prototype.getDataList=function(e,t){var i=GlobalConfig.activityType4Config[e];return null==i&&(i=GlobalConfig.activityType4AConfig[e]),null==i&&(i=GlobalConfig.activityType4BConfig[e]),i[t]},t}(eui.ItemRenderer);__reflect(ActivityType21ItemRenderer.prototype,"ActivityType21ItemRenderer"),window.ActivityType21ItemRenderer=ActivityType21ItemRenderer;var ActivityType21Panel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActivityType21Skin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ActivityType21ItemRenderer,this.list1.itemRenderer=ActivityType21ItemRenderer,this.list_item1.itemRenderer=ActivityItemShow,this.listData=new eui.ArrayCollection,this.list.dataProvider=this.listData,this.listData1=new eui.ArrayCollection,this.list1.dataProvider=this.listData1,this.m_Lan0.text=GlobalConfig.jifengTiaoyueLg.st101328,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st102060},t.prototype.open=function(){this.top1Cfg=this.getDataList(this.activityID,1),Rank.ins().sendGetRankingData(this.top1Cfg.rankType);for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.btn_showRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),GameGlobal.MessageCenter.addListener(MessageDef.PAY_SPEND_RANK_UPDATE,this.getRankData,this),this.group_Rank.visible=!1,this.groupInfo.visible=!0,this.btn_showRank.label=this.group_Rank.visible?GlobalConfig.jifengTiaoyueLg.st101318:GlobalConfig.jifengTiaoyueLg.st100381,this.updateData()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.btn_showRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),GameGlobal.MessageCenter.removeListener(MessageDef.PAY_SPEND_RANK_UPDATE,this.getRankData,this)},t.prototype.getRankData=function(e){this.top1Cfg=this.getDataList(this.activityID,1),this.top1Cfg.rankType==e&&this.updateData()},t.prototype.updateData=function(){if(!this.top1Cfg)return void console.error("activityID"+this.activityID+": config rankType not found");var e=Rank.ins().rankModel[this.top1Cfg.rankType],t=[];if(e&&e._dataList.length>0){t=e._dataList.slice();var i=e._dataList.length;if(20>i){var o=this.createData(i,e._dataList);t=e._dataList.concat(o),t.sort(function(e,t){return e.idx-t.idx})}}else t=this.createData(1);if(t){for(var s=0,i=t.length;i>s;s++){var n=t[s];n.activityId=this.activityID}GameGlobal.activityData[this.activityID];this.listData.replaceAll(t),this.listData1.replaceAll([t[1],t[2]]),this.list_item1.dataProvider=new eui.ArrayCollection(this.top1Cfg.rewards),this.label_nname1.text=""==t[0].name?GlobalConfig.jifengTiaoyueLg.st101034:t[0].name,this.label_value1.text=""==t[0].name?GlobalConfig.jifengTiaoyueLg.st102063+CommonUtils.overLength(this.top1Cfg.value)+GlobalConfig.jifengTiaoyueLg.st100050:CommonUtils.overLength(t[0].value)+GlobalConfig.jifengTiaoyueLg.st100050,this.activityConfig=this.getActivityConfig(),this.img_title1.source=this.activityConfig.source2,e?(this.labelRank.textFlow=(new egret.HtmlTextParser).parse(GlobalConfig.jifengTiaoyueLg.st100403+('<font color="#008f22">'+(0==e.selfPos?GlobalConfig.jifengTiaoyueLg.st100086:e.selfPos)+"</font>")),this.labelCount.textFlow=(new egret.HtmlTextParser).parse(GlobalConfig.jifengTiaoyueLg.st102064+(this.getTypeDesc()+'：<font color="#008f22">'+e.value+"</font>")+GlobalConfig.jifengTiaoyueLg.st100050)):(this.labelRank.text=GlobalConfig.jifengTiaoyueLg.st100403+GlobalConfig.jifengTiaoyueLg.st100086,this.labelCount.text=GlobalConfig.jifengTiaoyueLg.st102064+(this.getTypeDesc()+"：0")+GlobalConfig.jifengTiaoyueLg.st100050)}},t.prototype.getActivityConfig=function(){var e=GlobalConfig.activityConfig[this.activityID];return null==e&&(e=GlobalConfig.activityAConfig[this.activityID]),null==e&&(e=GlobalConfig.activitySumConfig[this.activityID]),e},t.prototype.getDataList=function(e,t){var i=GlobalConfig.activityType4Config[e];null==i&&(i=GlobalConfig.activityType4AConfig[e]),null==i&&(i=GlobalConfig.activityType4BConfig[e]);for(var o in i)if(i[o].ranking==t)return i[o];return null},t.prototype.createData=function(e,t){void 0===t&&(t=[]);var i=[],o=!0;if(t!=[])for(var s=1;21>s;s++){for(var n=0,r=t.length;r>n;n++)if(s==t[n].pos){o=!1;break}if(o){var a=new RankDataInfo;a.create(this.activityID,s),i.push(a),o=!0}}else for(var s=e;21>s;s++){var a=new RankDataInfo;a.create(this.activityID,s),i.push(a)}return i},t.prototype.onClick=function(e){switch(e.currentTarget){case this.btn_showRank:this.group_Rank.visible=!this.group_Rank.visible,this.groupInfo.visible=!this.group_Rank.visible,this.btn_showRank.label=this.group_Rank.visible?GlobalConfig.jifengTiaoyueLg.st101318:GlobalConfig.jifengTiaoyueLg.st101319}},t.prototype.getTypeDesc=function(){if(null==this.activityConfig)return"";switch(this.activityConfig.activityType){case 21:return GlobalConfig.jifengTiaoyueLg.st100227;case 22:return GlobalConfig.jifengTiaoyueLg.st102065}},t}(ActivityPanel);__reflect(ActivityType21Panel.prototype,"ActivityType21Panel"),window.ActivityType21Panel=ActivityType21Panel;var ActivityType2Panel=function(e){function t(){var t=e.call(this)||this;return t.type2PanelList=[],t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.IsGift=function(e){null==t.activityType2Config&&(t.activityType2Config=GlobalConfig.ins("ActivityType2Config"));var i=t.activityType2Config[e];return null==i?!1:8==e},t.prototype.open=function(e){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];this.cruPanel&&(this.cruPanel.close(),DisplayUtils.removeFromParent(this.cruPanel));GlobalConfig.ins("ActivityConfig")[this.activityID];t.IsGift(this.activityID)?this.type2PanelList[this.activityID+""]||(this.type2PanelList[this.activityID+""]=new Activity2Panel2,this.type2PanelList[this.activityID+""].activityID=this.activityID):18==this.activityID?this.type2PanelList[this.activityID+""]||(this.type2PanelList[this.activityID+""]=new Activity2Panel3,this.type2PanelList[this.activityID+""].activityID=this.activityID):this.type2PanelList[this.activityID+""]||(this.type2PanelList[this.activityID+""]=new Activity2Panel1,this.type2PanelList[this.activityID+""].activityID=this.activityID),this.cruPanel=this.type2PanelList[this.activityID+""],this.cruPanel.open(e),this.addChild(this.cruPanel)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];DisplayUtils.removeFromParent(this.cruPanel)},t.prototype.updateData=function(){this.cruPanel&&this.cruPanel.updateData()},t.prototype.GetActivityTimeAndDes=function(){return t.IsGift(this.activityID)?[!1,!1]:[null,null]},t.prototype.UpdateContent=function(){},t}(ActivityPanel);__reflect(ActivityType2Panel.prototype,"ActivityType2Panel",["ICommonWindowTitle"]),window.ActivityType2Panel=ActivityType2Panel;var ActivityType302Panel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.skinName="ActivityType302Skin",this.listMiddleData=new eui.ArrayCollection,this.rewardListData=new eui.ArrayCollection,this.listTopData=new eui.ArrayCollection,this.tabMiddle.dataProvider=this.listMiddleData,this.tabTop.dataProvider=this.listTopData,this.iconList.dataProvider=this.rewardListData,this.iconList.itemRenderer=ItemBase,this.btnBuy.label=GlobalConfig.jifengTiaoyueLg.st101344},t.prototype.open=function(){e.prototype.open.call(this),null==this._data&&(this._data=GameGlobal.activityData[ActivityModel.TYPE_302]);var t=this.getListTopData(this._data.openDay);this._curDay=t[0],this._curPos=1,this.listTopData.replaceAll(t);for(var i=GlobalConfig.activityType302Config[this._curDay-1],o=[],s=0;s<i.length;s++){var n={price:i[s].price+GlobalConfig.jifengTiaoyueLg.st101343};o.push(n)}this.listMiddleData.replaceAll(o);for(var s=0;s<this.tabMiddle.numChildren;s++){var r=this.tabMiddle.getChildAt(s);r&&r.m_Lan1&&(r.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101343)}this.tabTop.selectedIndex=t[0]-1,this.tabMiddle.selectedIndex=0,this.tabTop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.tabMiddle.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.observe(MessageDef.UPDATE_ACTIVITY_PANEL,this._dayUpdate),this.UpdateContent()},t.prototype._dayUpdate=function(){this.listTopData.replaceAll(this.getListTopData(this._data.openDay)),this.UpdateContent()},t.prototype.close=function(){e.prototype.close.call(this),this._curDay=-1,this._curPos=-1,this._data=null,this.tabTop.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.tabMiddle.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.btnBuy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),ViewManager.ins().close(this)},t.prototype.onTouch=function(e){switch(e.currentTarget){case this.tabTop:var t=e.currentTarget.selectedIndex;if(t+1>this._data.openDay)return this.tabTop.selectedIndex=this._curDay-1,void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101341);if(t==this._curDay-1)return;this._curDay=t+1,this._curPos=1,this.tabMiddle.selectedIndex=0,this.UpdateContent();break;case this.tabMiddle:e.currentTarget.selectedIndex!=this._curPos-1&&(this._curPos=e.currentTarget.selectedIndex+1,this.UpdateContent());break;case this.btnBuy:Recharge.ins().TestDayOne(this._curCfg);break;case this.closeBtn:this.close()}},t.prototype.UpdateContent=function(){null==this.config&&(this.config=GlobalConfig.activityType302Config);var e=3*(this._curDay-1)+this._curPos;for(var t in this.config[this._curDay-1]){var i=this.config[this._curDay-1][t];if(i.index==e){this._curCfg=i;break}}if(null!=this._curCfg){var o=BitUtil.Has(this._data.records,e);this.btnBuy.enabled=!o,this.btnBuy.label=o?GlobalConfig.jifengTiaoyueLg.st101342:""+this._curCfg.price+GlobalConfig.jifengTiaoyueLg.st101343,this.txtTitle.text=this._curCfg.tips,this.rewardListData.source=this._curCfg.rewards,this.rewardListData.refresh()}},t.prototype.getListTopData=function(e){for(var t=[],i=0;e>i;i++)t.push(i+1);return t},t}(ActivityPanel);__reflect(ActivityType302Panel.prototype,"ActivityType302Panel",["ICommonWindowTitle"]),ViewManager.ins().reg(ActivityType302Panel,LayerManager.UI_Popup),window.ActivityType302Panel=ActivityType302Panel;var Activity3PanelItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype._SetSkin=function(){},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.labelGo.text=GlobalConfig.jifengTiaoyueLg.st101077,this.labelUndo.text=GlobalConfig.jifengTiaoyueLg.st100680,this.btnGet.label=GlobalConfig.jifengTiaoyueLg.st101076},t.prototype.OnClickClose=function(){ViewManager.ins().close(ActivityWin)},t.prototype.OnGetAward=function(e){var t=e.target.parent.data.config;ActivityModel.ins().sendReward(t.Id,t.index)},t.prototype.dataChanged=function(){var e=this.data.config,t=this.data.actData,i=null;i=e&&e.rewards?e.rewards:[],this.m_Award=i,this.list.dataProvider=new eui.ArrayCollection(i);var o=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101284,[e.day]);this.labelInfo.textFlow=TextFlowMaker.generateTextFlow(o+this.GetStr(t,e));var s=t.GetRewardState(e.index);if(this.currentState=""+s,null!=this.dayLabel&&(this.dayLabel.text=e.day+""),null!=this.valueLabel){var n=this.GetStrContent(t,e),r=n[0],a=n[1];""==r?(this.valueLabel.text="",this.valueLabel0.text=""):(this.valueLabel.visible=a!=Color.Red,this.valueLabel0.visible=a==Color.Red,this.valueLabel.text=r+"",this.valueLabel0.text=r+"")}},t.prototype.GetStr=function(e,t){return e.dabiao>t.day?"":e.dabiao==t.day?"|C:0x00ff00&T:("+e.chongzhiTotal+"/"+t.yuanbao+")|":e.dabiao==t.day-1&&e.chongzhiTotal<t.yuanbao?"|C:0xf87372&T:("+e.chongzhiTotal+"/"+t.yuanbao+")|":"|C:0xf87372&T:(0/"+t.yuanbao+")|"},t.prototype.GetStrContent=function(e,t){return e.dabiao>t.day?["",0]:e.dabiao==t.day?["("+e.chongzhiTotal+"/"+t.yuanbao+")",Color.Green]:e.dabiao==t.day-1&&e.chongzhiTotal<t.yuanbao?["("+e.chongzhiTotal+"/"+t.yuanbao+")",Color.Red]:["(0/"+t.yuanbao+")",Color.Red]},t}(RechargeGiftPanelItem);__reflect(Activity3PanelItem.prototype,"Activity3PanelItem");var ActivityType3Panel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){this.skinName="Activity3PanelSkin_2",this.listTop.itemRenderer=Activity3PanelItem,this.listTop.dataProvider=new eui.ArrayCollection([])},t.prototype.open=function(e){this.updateView(),this.recharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabTouch,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.updateView,this)},t.prototype.close=function(){this.recharge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabTouch,this),GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.updateView,this)},t.prototype.onChange=function(){this.updateTopList()},t.prototype.updateView=function(){this.updateTopList()},t.prototype.updateTopList=function(){var e=GameGlobal.activityData[this.activityID],t=ActivityType3Data.getConfig(this.activityID),i=[];for(var o in t){var s=t[o].index,n=e.GetRewardState(s),r=3;n==RewardState.NotReached?r=1:n==RewardState.CanGet?r=0:n==RewardState.Gotten?r=3:n==RewardState.Undo&&(r=2),t[o].sortweight=r,i.push({config:t[o],actData:e})}i.sort(function(e,t){return e.config.sortweight-t.config.sortweight}),this.listTop.dataProvider=new eui.ArrayCollection(i)},t.prototype.onTabTouch=function(e){switch(e.currentTarget){case this.recharge:ViewManager.ins().close(this),ViewManager.ins().open(ChargeFirstWin)}},t}(ActivityPanel);__reflect(ActivityType3Panel.prototype,"ActivityType3Panel"),window.Activity3PanelItem=Activity3PanelItem,window.ActivityType3Panel=ActivityType3Panel;var ActivityType4ItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActraceSkinson",t.list.itemRenderer=ActivityItemShow,t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.label_rank.visible=!0,this.data.ranking>0&&this.label_rank&&(this.label_rank.text=""+(this.itemIndex+1))+"",this.list.dataProvider=new eui.ArrayCollection(e.rewards),this.itemIndex+1<=3?(this.img_rank.visible=!0,this.img_rank.source="comp_68_67_0"+(this.itemIndex+1)+"_png"):this.img_rank.visible=!1,this.label_rank.visible=this.itemIndex+1>3;var t=GameGlobal.activityModel.rankInfoList[this.itemIndex];if(t&&""!=t.name){this.y=21,this.rankName.text=t.name,this.value.visible=!0;var i;switch(this.data.rankType){case 12:case 16:case 14:case 13:case 5:i=ActivityType4Panel.GetLevelStr(t.numType);break;case 0:case 6:i=CommonUtils.overLength(t.numType)+GlobalConfig.jifengTiaoyueLg.st100306;break;case 137:i=CommonUtils.overLength(t.numType)+GlobalConfig.jifengTiaoyueLg.st100050;break;default:i=CommonUtils.overLength(t.numType)+GlobalConfig.jifengTiaoyueLg.st100306}this.value.text=i}else{var o=void 0;switch(this.data.rankType){case 137:o=GlobalConfig.jifengTiaoyueLg.st102118;break;default:o=GlobalConfig.jifengTiaoyueLg.st101470}this.y=33,this.rankName.text=GlobalConfig.jifengTiaoyueLg.st100378;var s=GlobalConfig.ins("ActivityType4Config")[this.data.Id];this.value.text=LanguageString.jifengTiaoyueCh(o,[CommonUtils.overLength(s[this.data.ranking].value)])}},t}(eui.ItemRenderer);__reflect(ActivityType4ItemRenderer.prototype,"ActivityType4ItemRenderer"),window.ActivityType4ItemRenderer=ActivityType4ItemRenderer;var ActivityType4Panel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActRaceSkin",t.list.itemRenderer=ActivityType4ItemRenderer,t.list1.itemRenderer=ActivityItemShow,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.listData=new eui.ArrayCollection,this.list.dataProvider=this.listData,this.btn_showRank.label=GlobalConfig.jifengTiaoyueLg.st100497,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101328,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101320},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.btn_showRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btn_showRank0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),GameGlobal.MessageCenter.addListener(MessageDef.ACTIVITY4_IS_GET_AWARDS,this.sendDabiaoInfo,this),GameGlobal.MessageCenter.addListener(MessageDef.ACTIVITY4_UPDATE,this.updateData,this),this.group_Rank.visible=!1,this.groupTitle.visible=this.groupInfo.visible=!0,this.btn_showRank.label=this.group_Rank.visible?GlobalConfig.jifengTiaoyueLg.st101318:GlobalConfig.jifengTiaoyueLg.st101319,this.sendDabiaoInfo()},t.prototype.sendDabiaoInfo=function(){ActivityModel.ins().sendDabiaoInfo(this.activityID)},t.prototype.UpdateContent=function(){this.updateData()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.btn_showRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btn_showRank0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),GameGlobal.MessageCenter.removeListener(MessageDef.ACTIVITY4_IS_GET_AWARDS,this.sendDabiaoInfo,this),GameGlobal.MessageCenter.removeListener(MessageDef.ACTIVITY4_UPDATE,this.updateData,this),DisplayUtils.dispose(this._mc),this._mc=null},t.prototype.initMc=function(){this._mc||(this._mc=new MovieClip,this._mc.x=this.groupTitle.width/2,this._mc.y=this.groupTitle.height/2,this._mc.scaleX=this._mc.scaleY=.7,this.groupTitle.addChild(this._mc))},t.prototype.updateData=function(){var e=GameGlobal.activityData[this.activityID],i=this.getDataList(e.id);this.listData.replaceAll(i);var o=this.getCurRewards();this.list1.dataProvider=new eui.ArrayCollection(o),this.refreshBtnStatu();for(var s=0;4>s;s++)try{var n=i[s],r=GameGlobal.activityModel.rankInfoList[s],a=s+1,l=this["list_item"+a],h=this["label_nname"+a],c=this["label_value"+a],u=GlobalConfig.jifengTiaoyueLg.st100378,d="";if(r)switch(""!=r.name?u=r.name:GlobalConfig.jifengTiaoyueLg.st100378,n.rankType){case 12:case 16:case 14:case 13:case 5:d=t.GetLevelStr(r.numType);break;case 6:case 0:d=CommonUtils.overLength(r.numType);break;default:0==r.numType||(d=CommonUtils.overLength(r.numType))}""==d&&(d=GlobalConfig.jifengTiaoyueLg.st101321+CommonUtils.overLength(i[s].value)),l&&(l.itemRenderer=ActivityItemShow,l.dataProvider=new eui.ArrayCollection(n.rewards)),h&&(h.text=u),c&&(c.text=d)}catch(p){egret.log("达标面板预览报错"),egret.log(p)}var f=GlobalConfig.ins("ActivityConfig")[this.activityID];this.initMc(),this._mc.loadUrl(ResDataPath.GetUIEffePath(f.source2),!0,-1);GlobalConfig.jifengTiaoyueLg.st101322+this.getTypeDesc()+"|C:0x00FF00&T:"+this.getSelfInfo()+"|";this.labelFinish.text=GlobalConfig.jifengTiaoyueLg.st100084+f.noticeName+"："+GameGlobal.activityModel.myDabiaoInfo},t.prototype.refreshBtnStatu=function(){var e=this.getCurStatus(),i=this.getCurValue();switch(2==e&&(e=0),this.currentState=""+e,this.rankName.text=GameGlobal.actorModel.name,this.rankDesc.text=this.getSelfInfo(),this.dabiaoConfig.rankType){case 12:case 16:case 14:case 13:case 5:this.label_DabiaoTarget&&(this.label_DabiaoTarget.text=GlobalConfig.jifengTiaoyueLg.st101324+"\n"+t.GetLevelStr(i));break;case 6:case 0:this.label_DabiaoTarget&&(this.label_DabiaoTarget.text=GlobalConfig.jifengTiaoyueLg.st101325+"\n"+i)}},t.prototype.getDataList=function(e){var t=GlobalConfig.ins("ActivityType4Config")[e],i=[];for(var o in t)0==t[o].ranking?this.dabiaoConfig=t[o]:i.push(t[o]);return i},t.prototype.onClick=function(e){switch(e.currentTarget){case this.btn_showRank:case this.btn_showRank0:this.group_Rank.visible=!this.group_Rank.visible,this.btn_showRank.label=this.group_Rank.visible?GlobalConfig.jifengTiaoyueLg.st101318:GlobalConfig.jifengTiaoyueLg.st101319,this.groupTitle.visible=!this.group_Rank.visible;var t=this.getCurStatus();2==t?this.groupInfo.visible=!1:this.groupInfo.visible=!this.group_Rank.visible}},t.prototype.getCurValue=function(){var e=this.GetRecentConfig();return e?e.value:0},t.prototype.getCurRewards=function(){var e=this.GetRecentConfig();return e?e.rewards:[]},t.prototype.GetRecentConfig=function(){for(var e=GameGlobal.activityModel,t=e.indexCurrDabiao,i=e.indexCurrDabiao;i>0;--i)BitUtil.Has(e.isDaBiao,i)||(t=i-1);return this.dabiaoConfig.value[t]},t.prototype.getCurStatus=function(){for(var e=GameGlobal.activityModel,t=1;t<=e.indexCurrDabiao;++t)if(!BitUtil.Has(e.isDaBiao,t))return RewardState.CanGet;return e.indexCurrDabiao>=this.dabiaoConfig.value.length?RewardState.Gotten:RewardState.NotReached},t.prototype.getTypeDesc=function(){var e="";switch(this.dabiaoConfig.rankType){case 12:case 16:case 14:case 13:case 5:e=GlobalConfig.jifengTiaoyueLg.st101326;break;case 6:case 0:e=GlobalConfig.jifengTiaoyueLg.st101327}return e},t.prototype.getSelfInfo=function(){var e="";switch(this.dabiaoConfig.rankType){case 12:case 16:case 14:case 13:case 5:e=t.GetLevelStr(GameGlobal.activityModel.myDabiaoInfo);break;case 6:case 0:e=CommonUtils.overLength(GameGlobal.activityModel.myDabiaoInfo)}return e},t.GetLevelStr=function(e){var t=Math.floor(e/1e3),i=e%1e3;return t>0?t+GlobalConfig.jifengTiaoyueLg.st100067:i+GlobalConfig.jifengTiaoyueLg.st100093},t}(ActivityPanel);__reflect(ActivityType4Panel.prototype,"ActivityType4Panel",["ICommonWindowTitle"]),window.ActivityType4Panel=ActivityType4Panel;var ActivityType5Panel=function(e){function t(){var t=e.call(this)||this;return t.rewardIndex=-1,t.btnMax=0,t}return __extends(t,e),t.prototype.open=function(){this.updateData(),this.sureBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),GameGlobal.MessageCenter.addListener(MessageDef.ACTIVITY_IS_AWARDS,this.updateData,this);for(var e=1;e<=this.btnMax;e++)this["btn"+e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.close=function(){this.sureBtn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),GameGlobal.MessageCenter.removeListener(MessageDef.ACTIVITY_IS_AWARDS,this.updateData,this);for(var e=1;e<=this.btnMax;e++)this["btn"+e].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.initUI=function(){var e=GlobalConfig.ins("ActivityConfig")[this.activityID];this.skinName=e.source1,this.btnMax=e.params,this.list1.itemRenderer=ItemBase},t.prototype.updateData=function(){var e=GameGlobal.activityData[this.activityID];this.date.text=e.getRemindTimeString(),this.desc.text=GlobalConfig.ins("ActivityConfig")[this.activityID].desc,this.refushBtnReward()},t.prototype.refushBtnReward=function(e){void 0===e&&(e=0);var t=GameGlobal.activityData[this.activityID];0==e&&(e=t.logTime,t.logTime||(e=1)),null==this.ActivityType5Config&&(this.ActivityType5Config=GlobalConfig.ins("ActivityType5Config")),e>this.ActivityType5Config[this.activityID].length&&(e=1),this.rewardIndex=e;var i=this.ActivityType5Config[this.activityID][this.rewardIndex-1+""];this.list1.dataProvider=new eui.ArrayCollection(i.rewards),this.selectBtn&&(this.selectBtn.currentState="up"),this.selectBtn=this["btn"+e],this.selectBtn.currentState="down",e<=t.logTime?t.checkOneDayStatu(e)?(this.sign.visible=!1,this.sureBtn1.visible=!0):(this.sign.visible=!0,this.sureBtn1.visible=!1):(this.sign.visible=!1,this.sureBtn1.visible=!1)},t.prototype.onClick=function(e){switch(e.currentTarget){case this.sureBtn1:ActivityModel.ins().sendReward(this.activityID,this.rewardIndex);break;case this.btn1:this.refushBtnReward(1);break;case this.btn2:this.refushBtnReward(2);break;case this.btn3:this.refushBtnReward(3);break;case this.btn4:this.refushBtnReward(4);break;case this.btn5:this.refushBtnReward(5);break;case this.btn6:this.refushBtnReward(6);break;case this.btn7:this.refushBtnReward(7);break;case this.btn8:this.refushBtnReward(8);break;case this.btn9:this.refushBtnReward(9);break;case this.btn10:this.refushBtnReward(10)}},t}(ActivityPanel);__reflect(ActivityType5Panel.prototype,"ActivityType5Panel"),window.ActivityType5Panel=ActivityType5Panel;var ActivityType7Panel=function(e){function t(){var t=e.call(this)||this;t.skinName="ActivityType7Skin",t.list.itemRenderer=ItemBase;var i=new MovieClip;return i.loadUrl(ResDataPath.GetUIEffePath("eff_kfui"),!0,-1),UIHelper.SetIconMovie(i),t.eff.addChild(i),t}return __extends(t,e),t.prototype.open=function(){var e=ActivityType7Data.GetConfig(this.activityID);this.list.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(e.rewards)),this.list.validateNow();for(var t=0;t<this.list.numChildren;++t)this.list.getChildAt(t).showItemEffect();this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_RECHARGE,this.updateData,this),this.updateData()},t.prototype.close=function(){this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_RECHARGE,this.updateData,this)},t.prototype.updateData=function(){var e=ActivityType7Data.GetConfig(this.activityID),t=GameGlobal.activityData[this.activityID],i=t.count>=e.recharge?Color.Green:Color.Red;this.label.textFlow=TextFlowMaker.generateTextFlow("已累计充值"+StringUtils.addColor(t.count.toString(),i)+("/"+e.recharge+"钻石"));var o=t.GetRewardState();this.getImg.visible=!1,UIHelper.SetBtnNormalEffe(this.btn,o==RewardState.CanGet),this.getImg.visible=o==RewardState.Gotten,this.btn.visible=o!=RewardState.Gotten},t.prototype._OnClick=function(){var e=GameGlobal.activityData[this.activityID];e&&(e.canReward()?ActivityModel.ins().sendReward(this.activityID,0):UserTips.ins().showTips("不满足条件"))},t}(ActivityPanel);__reflect(ActivityType7Panel.prototype,"ActivityType7Panel"),window.ActivityType7Panel=ActivityType7Panel;var ActivityType8Panel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActivityType8Skin",t.list.itemRenderer=ActivityType8Item,t.listData=new eui.ArrayCollection,t.list.dataProvider=t.listData,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101285,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101286,t.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st101287,t}return __extends(t,e),t.prototype.open=function(){this.updateData()},t.prototype.close=function(){},t.prototype.updateData=function(){var e=ActivityModel.ins().GetActivityDataById(this.activityID);if(e){var t=e.GetConfigData().slice();t.sort(function(t,i){var o=e.GetItemDataByID(t.index),s=e.GetItemDataByID(i.index),n=t.index+(o.mRewardState==RewardState.Gotten&&o.mDay==t.day?100:0),r=i.index+(s.mRewardState==RewardState.Gotten&&s.mDay==i.day?100:0);
return n-r}),this.listData.replaceAll(t)}},t}(ActivityPanel);__reflect(ActivityType8Panel.prototype,"ActivityType8Panel");var ActivityType8Item=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.dataGroup.itemRenderer=ItemBaseEffe,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101288,this.finishLabel.text=GlobalConfig.jifengTiaoyueLg.st101289,this.toDayImg.text=GlobalConfig.jifengTiaoyueLg.st101290},t.prototype._OnClick=function(){var e=this.GetActData();e&&(e.mRewardState==RewardState.CanGet?ActivityModel.ins().sendReward(this.data.Id,e.mIndex):e.mRewardState==RewardState.NotReached&&Recharge.ins().TestInvest(this.data.Id,e.mIndex))},t.prototype.GetActData=function(){var e=ActivityModel.ins().GetActivityDataById(this.data.Id);return null==e?null:e.GetItemDataByID(this.data.index)},t.prototype.dataChanged=function(){var e=this.data,t=this.GetActData();if(t){var i=ActivityModel.ins().GetActivityDataById(this.data.Id);if(this.bitmapLabel.text=e.multiple,this.titleImg.text=e.orderName,this.dataGroup.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(e.awardList)),this.item.data=RewardData.ToRewardData(e.dayAwardList[0]),this._SetBtnStyle(t.mRewardState),this.label.visible=!0,t.mRewardState==RewardState.NotReached)i.CanInvest()?this.label.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101291,[e.day]):this._HideGoBtn();else if(t.mRewardState==RewardState.Gotten&&t.mDay==e.day)i.CanInvest()||this._HideGoBtn();else{var o=t.mRewardState==RewardState.Gotten?t.mDay:t.mDay-1;this.label.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101292,[o,e.day])}}},t.prototype._HideGoBtn=function(){this.toDayImg.visible=!1,this.btn.visible=!1,this.label.visible=!1,this.getImg.visible=!1,this.finishLabel.visible=!0},t.prototype._SetBtnStyle=function(e){this.btn.visible=e!=RewardState.Gotten,this.btn.label=e==RewardState.CanGet?GlobalConfig.jifengTiaoyueLg.st101293:GlobalConfig.jifengTiaoyueLg.st101294,this.toDayImg.visible=e==RewardState.Gotten,this.getImg.visible=e==RewardState.Gotten,this.finishLabel.visible=!1},t}(eui.ItemRenderer);__reflect(ActivityType8Item.prototype,"ActivityType8Item"),window.ActivityType8Panel=ActivityType8Panel,window.ActivityType8Item=ActivityType8Item;var HfActivityType3Panel=function(e){function t(){var t=e.call(this)||this;return t.currIndex=0,t}return __extends(t,e),t.prototype.initUI=function(){this.skinName="HfActivityType3Skin",this.m_DayItem=this.group.$children,this.list.itemRenderer=ItemBase},t.prototype.open=function(e){for(var t=GlobalConfig.ins("ActivityType3Config")[this.activityID],i=0;3>i;i++){var o=this.group.getChildAt(i);o.addEventListener(egret.TouchEvent.TOUCH_TAP,this._ClickBox,this),this.m_DayItem[i].dayimg.text="连充"+t[i].day+"天",this.m_DayItem[i].stateImg.source="comp_64_61_01_png",this.m_DayItem[i].stateImg.visible=!0,this.m_DayItem[i].stateImg.x=18,this.m_DayItem[i].stateImg.y=40,this.m_DayItem[i].stateImg2.visible=!1,this.m_DayItem[i].m_ItemList.visible=!1}this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getReward,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_ACTIVITY_PANEL,this._UpdateRewards,this),this.selectBoxHandle()},t.prototype.close=function(){for(var e=0;3>e;e++)this.group.getChildAt(e).removeEventListener(egret.TouchEvent.TOUCH_TAP,this._ClickBox,this);this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getReward,this),GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_ACTIVITY_PANEL,this._UpdateRewards,this)},t.prototype.getReward=function(e){ActivityModel.ins().sendReward(17,this.currIndex+1)},t.prototype._ClickBox=function(e){this.selectBoxHandle(this.group.getChildIndex(e.target))},t.prototype.selectBoxHandle=function(e){void 0===e&&(e=0),this.m_DayItem[this.currIndex].select.visible=!1,this.currIndex=e;var t=this.m_DayItem[this.currIndex];t.select.visible=!0,this._UpdateRewards()},t.prototype._UpdateRewards=function(){var e=GlobalConfig.ins("ActivityType3Config")[this.activityID];this.list.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(e[this.currIndex].rewards));var t=GameGlobal.activityData[this.activityID];this.dayNum.text="连充天数："+t.dabiao;var i=t.GetRewardState(e[this.currIndex].index);this.getBtn.enabled=RewardState.CanGet==i,this.getBtn.visible=i!=RewardState.Gotten,this.stateImg.visible=i==RewardState.Gotten},t}(ActivityPanel);__reflect(HfActivityType3Panel.prototype,"HfActivityType3Panel"),window.HfActivityType3Panel=HfActivityType3Panel;var Activity303Sproto=function(e){function t(){var t=e.call(this)||this;return t.time=0,t.regNetMsg(S2cProtocol.sc_fuben_coutdown,t.getFbInit),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getFbInit=function(e){this.time=GameServer.serverTime+e.time},t}(BaseSystem);__reflect(Activity303Sproto.prototype,"Activity303Sproto"),window.Activity303Sproto=Activity303Sproto;var ActivityType303Item=function(e){function t(){var t=e.call(this)||this;return t.skinName="Activity303ItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_ItemList.itemRenderer=ItemBase,this.itemListData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.itemListData,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.m_LevelLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100390,[this.itemIndex+1]);var i=GameGlobal.activityData[303];this.itemListData.removeAll(),this.itemListData.replaceAll(t.price);var o=i.isCanBattle(t.index);o==battleType303.TYPE3?this.m_CompImg.visible=!0:this.m_CompImg.visible=!1,this.itemIndex==ActivityType303Panel.selectIndex?this.m_SelectImg.visible=!0:this.m_SelectImg.visible=!1},t.prototype.onClick=function(){ActivityType303Panel.selectIndex=this.itemIndex,MessageCenter.ins().dispatch(MessageDef.UPDATE_ACTIVITY_PANEL)},t}(eui.ItemRenderer);__reflect(ActivityType303Item.prototype,"ActivityType303Item"),window.ActivityType303Item=ActivityType303Item;var ActivityType303Panel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.skinName="Activity303PanelSkin",this.m_ItemList.itemRenderer=ItemBase,this.itemListData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.itemListData,this.m_List.itemRenderer=ActivityType303Item,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100046,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101297},t.prototype.initUI=function(){},t.prototype.open=function(e){this.check(),this.updateView(),egret.setTimeout(function(){this.checkPoint()},this,100),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.updateView,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_ACTIVITY303_PANEL,this.updataTips,this),this.m_MainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_RightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.m_LeftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.m_Scroller.addEventListener(egret.Event.CHANGE,this.onSaveScrData,this)},t.prototype.close=function(){GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.updateView,this),GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_ACTIVITY303_PANEL,this.updataTips,this),this.m_MainBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_RightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRight,this),this.m_LeftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLeft,this),this.m_Scroller.removeEventListener(egret.Event.CHANGE,this.onSaveScrData,this)},t.prototype.release=function(){},t.prototype.onChange=function(){this.updateTopList()},t.prototype.updateView=function(){this.updateTopList()},t.prototype.updateTopList=function(){var e=GameGlobal.activityData[303],i=ActivityType303Data.getConfig(303);this.listData.replaceAll(i);var o=i[t.selectIndex];if(o){this.itemListData.removeAll(),this.itemListData.replaceAll(o.rewards),this.m_TipsLab.textFlow=TextFlowMaker.generateTextFlow(o.tips),this.playEff(o.showMovies+"_3"+EntityAction.STAND),this.m_Eff.scaleX=this.m_Eff.scaleY=o.moviesProportion;var s=e.isCanBattle(o.index);s==battleType303.TYPE1||s==battleType303.TYPE2?(this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100046,this.m_CompImg.visible=!1,this.m_MainBtn.visible=!0):(this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100991,this.m_CompImg.visible=!0,this.m_MainBtn.visible=!1)}this.m_LevelLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101295,[t.selectIndex+1]),this.updataTips()},t.prototype.initEffData=function(){this.m_Eff||(this.m_Eff=new MovieClip,this.m_Eff.touchEnabled=!1,this.m_AnimGroup.addChild(this.m_Eff),this.m_Eff.x=this.m_AnimGroup.width/2,this.m_Eff.y=this.m_AnimGroup.height/2)},t.prototype.playEff=function(e){this.initEffData(),this.m_Eff.loadUrl(ResDataPath.GetMonsterBodyPath(e),!0,-1)},t.prototype.onClick=function(){var e=GameGlobal.activityData[303],i=ActivityType303Data.getConfig(303),o=i[t.selectIndex],s=e.isCanBattle(o.index);return s==battleType303.TYPE2?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101296):(ViewManager.ins().close(ActivityWin),void ActivityModel.ins().sendReward(o.Id,o.index))},t.prototype.updataTips=function(){var e=ViewManager.ins().getView(ActivityWin);this.desc.text=e.desc.text,this.date.text=e.date.text},t.prototype.onClickRight=function(){if(this.m_Scroller&&this.m_Scroller.viewport){var e=106*(this.listData.source.length-3.5)-6,t=this.m_Scroller.viewport.scrollH,i=t+371;i>e&&(i=e),this.m_Scroller.viewport.scrollH=i}},t.prototype.onClickLeft=function(){if(this.m_Scroller&&this.m_Scroller.viewport){var e=this.m_Scroller.viewport.scrollH,t=e-371;0>=t&&(t=0),this.m_Scroller.viewport.scrollH=t}},t.prototype.onSaveScrData=function(){this.m_Scroller&&this.m_Scroller.viewport&&(this.m_Scroller.viewport.scrollH<106*(this.listData.source.length-3.5)?this.m_RightBtn.visible=!0:this.m_RightBtn.visible=!1,this.m_Scroller.viewport.scrollH>106?this.m_LeftBtn.visible=!0:this.m_LeftBtn.visible=!1)},t.prototype.check=function(){var e=GameGlobal.activityData[303],i=ActivityType303Data.getConfig(303);for(var o in i){var s=i[o],n=e.isCanBattle(s.index);if(n==battleType303.TYPE1)return void(t.selectIndex=parseInt(o))}},t.prototype.checkPoint=function(){if(this.m_Scroller&&this.m_Scroller.viewport){var e=(GameGlobal.activityData[303],ActivityType303Data.getConfig(303)),i=106*(e.length-3.5),o=106*t.selectIndex;o>i&&(o=i),this.m_Scroller.viewport.scrollH=o}},t.prototype.updateData=function(){},t.selectIndex=0,t}(BaseView);__reflect(ActivityType303Panel.prototype,"ActivityType303Panel"),window.ActivityType303Panel=ActivityType303Panel;var ActivityType303TimePanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="Activity303TimePanelSkin",this.touchEnabled=!1},t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),this.setData()},t.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.removeObserve(),this.release()},t.prototype.setData=function(){this.addTime()},t.prototype.addTime=function(){TimerManager.ins().doTimer(1e3,0,this.setTime,this),this.setTime()},t.prototype.removeTime=function(){TimerManager.ins().remove(this.setTime,this)},t.prototype.setTime=function(){if(!(Activity303Sproto.ins().time-GameServer.serverTime<0)){var e="";e=GameMap.IsTeamFb()?GlobalConfig.jifengTiaoyueLg.st102006:GlobalConfig.jifengTiaoyueLg.st101379,this.m_TimeLab.text=e+DateUtils.GetFormatSecond(Activity303Sproto.ins().time-GameServer.serverTime,DateUtils.TIME_FORMAT_1)}},t.prototype.release=function(){this.removeTime()},t.LAYER_LEVEL=LayerManager.UI_USER_INFO,t}(BaseEuiView);__reflect(ActivityType303TimePanel.prototype,"ActivityType303TimePanel"),window.ActivityType303TimePanel=ActivityType303TimePanel;var Activity301Btn=function(e){function t(){var t=e.call(this)||this;return t.skinName="Activity301BtnSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_MainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.m_MainBtn.labelDisplay.text=t.tips1,this.m_MainBtn.labelDisplay0.text=t.tips2,this.itemIndex==Activity301Panel.selectIndex?this.m_MainBtn.enabled=!1:this.m_MainBtn.enabled=!0},t.prototype.onClick=function(){Activity301Panel.selectIndex=this.itemIndex,MessageCenter.ins().dispatch(MessageDef.UPDATE_ACTIVITY_PANEL)},t}(eui.ItemRenderer);__reflect(Activity301Btn.prototype,"Activity301Btn"),window.Activity301Btn=Activity301Btn;var Activity301Panel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101273,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.skinName="Activity301PanelSkin",this.m_ItemList.itemRenderer=ItemBase,this.listData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.listData,this.m_BtnList.itemRenderer=Activity301Btn,this.btnListData=new eui.ArrayCollection,this.m_BtnList.dataProvider=this.btnListData},t.prototype.initUI=function(){},t.prototype.open=function(e){this.initData(),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.updateView,this),this.m_MainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addTime()},t.prototype.close=function(){GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.updateView,this),this.m_MainBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),t.selectIndex=0,this.removeTime()},t.prototype.addTime=function(){this.removeTime(),TimerManager.ins().doTimer(1e3,0,this.playTime,this),this.playTime()},t.prototype.removeTime=function(){TimerManager.ins().remove(this.playTime,this)},t.prototype.playTime=function(){var e=GameGlobal.activityData[301];e&&(this.m_TimeLab.text=GlobalConfig.jifengTiaoyueLg.st100025+DateUtils.getFormatBySecond(e.endTime-GameServer.serverTime,DateUtils.TIME_FORMAT_5,4))},t.prototype.onChange=function(){this.initData()},t.prototype.updateView=function(){this.initData()},t.prototype.initData=function(){var e=GameGlobal.activityData[301],i=ActivityType10Data.getConfig(301);this.btnListData.removeAll(),this.btnListData.replaceAll(i);var o=i[t.selectIndex];this.listData.removeAll(),this.listData.replaceAll(o.rewards);var s=o.index,n=e.GetRewardState(s);switch(this.state=n,this.m_MainBtn.visible=!0,this.m_GetImg.visible=!1,n){case RewardState.NotReached:this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101345;break;case RewardState.CanGet:this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101076;break;case RewardState.Gotten:this.m_MainBtn.visible=!1,this.m_GetImg.visible=!0;break;case RewardState.Undo:this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101346}this.m_MainLab.textFlow=TextFlowMaker.generateTextFlow(GlobalConfig.jifengTiaoyueLg.st101347+this.GetStr(e,o)),this.m_StateTile.text=o.tips3},t.prototype.GetStr=function(e,t){return e.recharge>=t.yuanbao?"|C:0x00ff00&T:("+e.recharge+"/"+t.yuanbao+")|":"|C:0xf87372&T:("+e.recharge+"/"+t.yuanbao+")|"},t.prototype.onClick=function(){switch(this.state){case RewardState.NotReached:ViewManager.ins().open(ChargeFirstWin);break;case RewardState.CanGet:var e=ActivityType10Data.getConfig(301),i=e[t.selectIndex];ActivityModel.ins().sendReward(i.Id,i.index)}},t.prototype.UpdateContent=function(){},t.selectIndex=0,t}(BaseView);__reflect(Activity301Panel.prototype,"Activity301Panel",["ICommonWindowTitle"]),window.Activity301Panel=Activity301Panel;var Activity301Win=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101273,t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.activity301Panel=new Activity301Panel,this.activity301Panel.name=GlobalConfig.jifengTiaoyueLg.st101348,this.commonWindowBg.AddChildStack(this.activity301Panel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e&&e[0]),this.addWinEvent(),this.updateRedPoint()},t.prototype.close=function(){this.removeObserve(),this.removeWinEvetn(),this.commonWindowBg.OnRemoved()},t.prototype.addWinEvent=function(){},t.prototype.removeWinEvetn=function(){},t.prototype.updateRedPoint=function(){},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(Activity301Win.prototype,"Activity301Win",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(Activity301Win,LayerManager.UI_Main),window.Activity301Win=Activity301Win;var ActivityType2000Panel=function(e){function t(){var t=e.call(this)||this;ActivityWinSummer.onPlace==ActivityModel.BTN_TYPE_04?t.skinName="HfActivityType2000Skin":t.skinName="ActivityType2000Skin",t.m_List=[];for(var i=0;i<t.group.numChildren;++i){var o=t.group.getChildAt(i),s=o.getChildByName("list"),n=o.getChildByName("btn");n.addEventListener(egret.TouchEvent.TOUCH_TAP,t._OnClick,t);var r=o.getChildByName("labelGo");r&&(UIHelper.SetLinkStyleLabel(r),r.addEventListener(egret.TouchEvent.TOUCH_TAP,t._OnClickGo,t)),s.itemRenderer=ItemBaseEffe,t.m_List.push({list:s,btn:n,getIcon:o.getChildByName("getIcon"),labelGo:r})}return t}return __extends(t,e),t.prototype.open=function(){GameGlobal.MessageCenter.addListener(MessageDef.RECHARGE_UPDATE_MONTH_DAY,this.updateData,this),this.updateData()},t.prototype.close=function(){GameGlobal.MessageCenter.removeListener(MessageDef.RECHARGE_UPDATE_MONTH_DAY,this.updateData,this);for(var e=0,t=this.m_List;e<t.length;e++){var i=t[e];i.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),i.labelGo&&i.labelGo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClickGo,this)}},t.prototype.updateData=function(){var e=ActivityModel.ins().GetActivityDataById(this.activityID);this.descLabel&&(this.descLabel.text=e.GetSurplusTimeStr());var t=e.GetConfig();if(null!=t)for(var i=0;i<this.m_List.length;++i){var o=i+1,s=t[i];if(s){var n=this.m_List[i];n.list.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(s.rewards));var r=e.GetRewardState(o);n.getIcon.visible=r==RewardState.Gotten,n.btn.visible=r==RewardState.CanGet,n.labelGo&&(n.labelGo.visible=r==RewardState.NotReached)}}},t.prototype._OnClickGo=function(){ViewManager.ins().open(FuliWin,1,4)},t.prototype._OnClick=function(e){for(var t=-1,i=0;i<this.m_List.length;++i)if(this.m_List[i].btn==e.currentTarget){t=i+1;break}if(-1!=t)switch(t){case 1:2010==this.activityID&&GameLogic.ins().actorModel.level<80?UserTips.InfoTip(GlobalConfig.jifengTiaoyueLg.st101961):ActivityModel.ins().sendReward(this.activityID,t);break;case 2:Recharge.ins().IsMonthCard()?ActivityModel.ins().sendReward(this.activityID,t):UserTips.ErrorTip("尚未激活月卡");break;case 3:Recharge.ins().IsZunCard()?ActivityModel.ins().sendReward(this.activityID,t):UserTips.ErrorTip("尚未激活豪华至尊卡")}},t}(ActivityPanel);__reflect(ActivityType2000Panel.prototype,"ActivityType2000Panel"),window.ActivityType2000Panel=ActivityType2000Panel;var ActivityType2001Panel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActivityType2001Skin",t.list.itemRenderer=ActivityType2001Item,t}return __extends(t,e),t.prototype.open=function(){this.updateData()},t.prototype.close=function(){},t.prototype.updateData=function(){var e=this.GetActData();this.timeLabel.text=""+e.getRemindTimeString(),this.totalLabel.textFlow=TextFlowMaker.generateTextFlow("已累计消费|C:0x008f22&T:"+e.mPay+"|钻石"),this._UpdateList()},t.prototype._UpdateList=function(){var e=this.GetActData(),t=e.GetConfig(),i=[];for(var o in t){var s=t[o];i[s.index-1]={configData:s,actData:e}}i.sort(function(t,i){var o=e.GetRewardState(t.configData.index),s=e.GetRewardState(i.configData.index),n=o==RewardState.CanGet?10:o==RewardState.NotReached?5:0,r=s==RewardState.CanGet?10:s==RewardState.NotReached?5:0;return r-n}),this.list.dataProvider=new eui.ArrayCollection(i)},t.prototype._OnClick=function(e){},t.prototype.GetActivityTimeAndDes=function(){return[!1]},t}(ActivityPanel);__reflect(ActivityType2001Panel.prototype,"ActivityType2001Panel");var ActivityType2001Item=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseEffe,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(){var e=this.data;e&&ActivityModel.ins().sendReward(e.actData.id,e.configData.index)},t.prototype.dataChanged=function(){var e=this.data;if(e){this.list.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(e.configData.rewards)),this.priceIcon.price=e.configData.play;var t=e.actData.GetRewardState(e.configData.index);this.btn.visible=t==RewardState.CanGet,this.getImg.visible=t==RewardState.Gotten}},t}(eui.ItemRenderer);__reflect(ActivityType2001Item.prototype,"ActivityType2001Item"),window.ActivityType2001Panel=ActivityType2001Panel,window.ActivityType2001Item=ActivityType2001Item;var ActivityType2002Panel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActivityType2002Skin",t.list.itemRenderer=ActivityType2002Item,t}return __extends(t,e),t.prototype.open=function(){this.updateData()},t.prototype.close=function(){},t.prototype.updateData=function(){var e=this.GetActData();this.pointLabel.text="我的积分："+e.mPoint,this.timeLabel.text="活动时间："+e.GetSurplusTimeStr(),this.activityDec.text="活动说明："+ActivityModel.GetActivityConfig(this.activityID).desc;var t=e.GetConfig(),i=[];for(var o in t){var s=t[o];i[s.index-1]={configData:s,actData:e}}i.sort(function(t,i){var o=e.GetRewardState(t.configData.index),s=e.GetRewardState(i.configData.index),n=o==RewardState.CanGet?10:o==RewardState.NotReached?5:0,r=s==RewardState.CanGet?10:s==RewardState.NotReached?5:0;return r-n}),this.list.dataProvider=new eui.ArrayCollection(i)},t.prototype.GetActivityTimeAndDes=function(){return[!1]},t}(ActivityPanel);__reflect(ActivityType2002Panel.prototype,"ActivityType2002Panel");var ActivityType2002Item=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseEffe,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.getwayLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),UIHelper.SetLinkStyleLabel(this.getwayLabel)},t.prototype._OnClick=function(e){var t=this.data;if(t)switch(e.target){case this.btn:ActivityModel.ins().sendReward(t.actData.id,t.configData.index);break;case this.getwayLabel:ViewManager.Guide(ViewIndexDef.PUBLIC_BOSS,null),ViewManager.ins().close(ActivityWinSummer)}},t.prototype.dataChanged=function(){var e=this.data;if(null!=e.configData&&null!=e.actData){this.scoreLabel.text=e.configData.play+"",this.list.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(e.configData.rewards));var t=e.actData.GetRewardState(e.configData.index);this.btn.visible=t==RewardState.CanGet,this.getwayLabel.visible=t==RewardState.NotReached,this.getImg.visible=t==RewardState.Gotten}},t}(eui.ItemRenderer);__reflect(ActivityType2002Item.prototype,"ActivityType2002Item"),window.ActivityType2002Panel=ActivityType2002Panel,window.ActivityType2002Item=ActivityType2002Item;var ActivityType2003Panel=function(e){function t(){var t=e.call(this)||this;return t.skinName="HfActivityType2003Skin",t.dataGroupLeft.itemRenderer=ItemBase,t.dataGroupRight.itemRenderer=ItemBase,t.list.itemRenderer=ActivityType2003Item,t.list.dataProvider=new eui.ArrayCollection([]),t}return __extends(t,e),t.prototype.open=function(){this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.warehouseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),GameGlobal.MessageCenter.addListener(MessageDef.ACTIVITY_HUNT_INIT_RECORD,this._DoInitRecord,this),GameGlobal.MessageCenter.addListener(MessageDef.ACTIVITY_HUNT_ADD_RECORD,this._DoAddRecord,this),GameGlobal.MessageCenter.addListener(MessageDef.ITEM_COUNT_CHANGE,this._UpdateRedPoint,this),ActivityModel.ins().SendGetHuntRecord(4),this.updateData()},t.prototype.close=function(){this.btn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.btn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.warehouseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._DoInitRecord=function(e,t){if(4==e){var i=this.list.dataProvider;i.removeAll(),i.replaceAll(t)}},t.prototype._DoAddRecord=function(e,t){4==e&&this.list.dataProvider.addItemAt(t,0)},t.prototype.updateData=function(){var e=this.GetActData();if(e){this.dataGroupLeft.dataProvider=new eui.ArrayCollection(this.GetNormalReward(2,8)),this.dataGroupRight.dataProvider=new eui.ArrayCollection(this.GetNormalReward(8,14)),this.timeLabel.text="剩余时间："+e.GetSurplusTimeStr(),this.activityDec.text="活动说明："+ActivityModel.GetActivityConfig(this.activityID).desc;var t=e.GetConfig();this.priceIcon1.price=t.huntOnce,this.priceIcon2.price=t.huntTenth,this.item1.data=t.rewardShow[0],this.item2.data=t.rewardShow[1],this.item1Name.text=this.item1.getItemName(),this.item2Name.text=this.item2.getItemName(),this.item1.showItemEffect(),this.item2.showItemEffect(),this.item1.isShowName(!1),this.item2.isShowName(!1),this._UpdateRedPoint()}},t.prototype.GetNormalReward=function(e,t){void 0===e&&(e=2),void 0===t&&(t=6);for(var i=this.GetActData().GetConfig(),o=[],s=e;t>s;++s){var n=i.rewardShow[s];n&&o.push(n)}return o},t.prototype._OnClick=function(e){var t=this.GetActData().GetConfig();switch(e.currentTarget){case this.btn1:Checker.Money(MoneyConst.yuanbao,t.huntOnce)&&ActivityModel.ins().sendReward(this.activityID,0);break;case this.btn2:Checker.Money(MoneyConst.yuanbao,t.huntTenth)&&ActivityModel.ins().sendReward(this.activityID,1);break;case this.warehouseBtn:ViewManager.ins().open(TreasureStorePanel)}},t.prototype._UpdateRedPoint=function(){UIHelper.ShowRedPoint(this.warehouseBtn,TreasureHuntWin.IsRedPointByWarehouse())},t.prototype.GetActivityTimeAndDes=function(){return[!1]},t}(ActivityPanel);__reflect(ActivityType2003Panel.prototype,"ActivityType2003Panel");var ActivityType2003Item=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){var e=this.data,t=e.name,i=e.itemid,o=e.count;this.label.textFlow=HuntListRenderer.MakeTextFlow(t,i,o)},t}(eui.ItemRenderer);__reflect(ActivityType2003Item.prototype,"ActivityType2003Item"),window.ActivityType2003Panel=ActivityType2003Panel,window.ActivityType2003Item=ActivityType2003Item;var ActivityType2003ResultPanel=function(e){function t(){var t=e.call(this)||this;return t.arr=[],t.items=[],t.canClicck=!0,t.canBuy=!0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ActivityType2003ResultSkin"},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_bg.init("ActivityType2003ResultPanel","提示"),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeCB,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this),this.observe(MessageDef.HUNT_RESULT,this.updateView),this.updateView([e[0],e[1]])},t.prototype.close=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeCB,this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this),MessageCenter.ins().removeAll(this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.updateView=function(e){this.huntType=e[0],this.arr=e[1],0==this.huntType?(this.num.text=GlobalConfig.ins("ActivityType2003Config")[2003].huntOnce+"",this.currentState="one"):1==this.huntType?(this.num.text=GlobalConfig.ins("ActivityType2003Config")[2003].huntTenth+"",this.currentState="ten"):(this.num.text="",this.currentState="type_2"),this.playResult()},t.prototype.playResult=function(){this.canBuy=!0;for(var e=0;e<this.arr.length;e++){var t=EggBrokenResultWin.createItem(this,this.arr[e],ItemBaseEffe);this.items[e]=t,EggBrokenResultWin.PlayItem(e,t)}},t.prototype.closeCB=function(e){var t=this;if(this.canClicck){this.canClicck=!1;var i=function(){ViewManager.ins().close(t)};EggBrokenResultWin.playGet(this.items,i)}},t.prototype.buy=function(e){if(this.canClicck&&this.canBuy){if(this.huntType>1)return void this.closeCB(null);if(Checker.Money(MoneyConst.yuanbao,Number(this.num.text),Checker.YUNBAO_FRAME)){this.canBuy=!1,EggBrokenResultWin.playGet(this.items);var t=2003;ActivityWinSummer.onPlace==ActivityModel.BTN_TYPE_03?t=2008:ActivityWinSummer.onPlace==ActivityModel.BTN_TYPE_04&&(t=2011),ActivityModel.ins().sendReward(t,this.huntType)}}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(ActivityType2003ResultPanel.prototype,"ActivityType2003ResultPanel"),window.ActivityType2003ResultPanel=ActivityType2003ResultPanel;var ActivityType2004Panel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActivityType2004Skin",t.list.itemRenderer=ActivityType2004Item,t.list.dataProvider=new eui.ArrayCollection([]),t}return __extends(t,e),t.prototype.open=function(){this.updateData()},t.prototype.close=function(){},t.prototype.updateData=function(){var e=this.GetActData();if(e){this.timeLabel.text="剩余时间："+e.GetSurplusTimeStr(),this.activityDec.text="活动说明："+ActivityModel.GetActivityConfig(this.activityID).desc;var t=e.GetConfig(),i=[],o=-1;for(var s in t){var n=t[s];i[n.index-1]={configData:n,actData:e},0>o&&(o=n.itemId)}this.list.dataProvider.replaceAll(i),this.icon.source=o+"_png",this.totalLabel.text=e.GetPoint(o)+""}},t.prototype._OnClick=function(e){},t.prototype.GetActivityTimeAndDes=function(){return[!1]},t}(ActivityPanel);__reflect(ActivityType2004Panel.prototype,"ActivityType2004Panel");var ActivityType2004Item=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.item.nameTxt.visible=!1,this.item.nameTxt=this.nameTxt,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(){var e=this.data;if(0!=e.configData.serverLimit&&e.actData.GetLimit(e.configData.index)>=e.configData.serverLimit)return void UserTips.ErrorTip("达到本服兑换上限");if(0!=e.configData.personLimit&&e.actData.GetExchange(e.configData.index)>=e.configData.personLimit)return void UserTips.ErrorTip("达到个人兑换上限");var t=UserBag.ins().getBagItemById(e.configData.itemId);return!t||t.count<e.configData.itemCount?void UserTips.ErrorTip("材料不足"):void ActivityModel.ins().sendReward(e.actData.id,e.configData.index)},t.prototype.dataChanged=function(){var e=this.data;this.limitGroup.visible=0!=e.configData.serverLimit,this.noLimit.visible=!this.limitGroup.visible,this.limitLabel.text=e.actData.GetLimit(e.configData.index)+"/"+e.configData.serverLimit,this.timeLabel.visible=0!=e.configData.personLimit,this.timeLabel.text="已兑换："+e.actData.GetExchange(e.configData.index)+"/"+e.configData.personLimit,this.comsumeLabel.text=e.configData.itemCount,this.item.data=e.configData.rewards[0],this.item&&this.item.showItemEffect(),this.icon.source=e.configData.itemId+"_png",UIHelper.ShowRedPoint(this.btn,e.actData.GetRewardState(e.configData.index)==RewardState.CanGet)
},t}(eui.ItemRenderer);__reflect(ActivityType2004Item.prototype,"ActivityType2004Item"),window.ActivityType2004Panel=ActivityType2004Panel,window.ActivityType2004Item=ActivityType2004Item;var ArtifactMainWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainWinSkin",t.artifactPanel1=new ArtifactPanel(1),t.commonWindowBg.AddChildStack(t.artifactPanel1),t.artifactPanel2=new ArtifactPanel(2),t.commonWindowBg.AddChildStack(t.artifactPanel2),t}return __extends(t,e),t.prototype.destoryView=function(){e.prototype.destoryView.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(ArtifactEvt.ARTIFACT_INIT_MSG,this.setRedPoint),this.observe(ArtifactEvt.ARTIFACT_GUIDEEND,this.checkGuide),this.commonWindowBg.OnAdded(this,e?e[0]:0),this.setRedPoint()},t.prototype.close=function(){this.artifactPanel1.release(),this.artifactPanel2.release(),ArtifactModel.getInstance.scrollV=0,ArtifactModel.getInstance.setIndex(1,0),ArtifactModel.getInstance.setIndex(2,0),this.commonWindowBg.OnRemoved()},t.prototype.setRedPoint=function(){this.commonWindowBg.CheckTabRedPoint();var e=ArtifactModel.getInstance;this.commonWindowBg.ShowTalRedPoint(0,e.checkAllLvUpAndActivateByType(1)||e.checkAllLayerUpBuyType(1)),this.commonWindowBg.ShowTalRedPoint(1,e.checkAllLvUpAndActivateByType(2)||e.checkAllLayerUpBuyType(2))},t.prototype.OnOpenIndex=function(e){return 2==e?Deblocking.Check(DeblockingType.TYPE_24):!0},t.prototype.checkGuide=function(){21==Setting.currPart&&5==Setting.currStep&&(GuideUtils.ins().show(this.commonWindowBg.returnBtn,21,5),this.commonWindowBg.returnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGuide,this))},t.prototype.onClickGuide=function(){GuideUtils.ins().next(this.commonWindowBg.returnBtn),this.commonWindowBg.returnBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGuide,this)},t.LAYER_LEVEL=LayerManager.UI_Main,t.openIndex=0,t}(BaseEuiPanel);__reflect(ArtifactMainWin.prototype,"ArtifactMainWin",["ICommonWindow"]),window.ArtifactMainWin=ArtifactMainWin;var ArtifactActivateTispWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="ArtifactActivateTispWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.m_Title1.text=GlobalConfig.jifengTiaoyueLg.st100457,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100461,this.m_ActivateBtn.label=GlobalConfig.jifengTiaoyueLg.st100212},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.data=e[0],this.addViewEvent(),UIHelper.SetBtnNormalEffe(this.m_ActivateBtn,!0),this.setData()},t.prototype.close=function(){this.release(),DisplayUtils.dispose(this.mc),this.mc=null,DisplayUtils.dispose(this.m_BodyEff),this.m_BodyEff=null,DisplayUtils.dispose(this.m_UpLvEff),this.m_UpLvEff=null},t.prototype.release=function(){for(var e=this.m_ActivateBtn.numChildren,t=0;e>t;t++){var i=this.m_ActivateBtn.getChildAt(0);i&&i instanceof MovieClip&&DisplayUtils.dispose(i)}this.removeViewEvent()},t.prototype.addViewEvent=function(){this.observe(ArtifactEvt.ARTIFACT_INIT_MSG,this.setData),this.observe(ArtifactEvt.ARTIFACT_ACTIVATE_MSG,this.playBodyEff),this.AddClick(this.m_CloseBtn2,this.onClickClose),this.AddClick(this.m_CloseBtn1,this.onClickClose),this.AddClick(this.m_ActivateBtn,this.onClickAct)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=this.data,t=ArtifactModel.getInstance;if(this.m_ActivateBtn.visible=!1,this.m_ConditionLab.visible=!0,e){var i=t.artufactDic.get(e.id),o=GlobalConfig.ins("ArtifactsConfig")[i.id];this._setEffect(o);var s=0;if(t.curid==e.id){s=e.fragmentCount-t.conid,this.m_ModGetLab.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100445},{text:s+"",style:{textColor:48930}},{text:GlobalConfig.jifengTiaoyueLg.st100446},{text:e.artifactsName,style:{textColor:48930}}];var n="",r="";switch(e.conditionkind){case ArtifactGetType.TYPE1:n=GlobalConfig.jifengTiaoyueLg.st100447,r=GlobalConfig.jifengTiaoyueLg.st100369,t.conid<e.fragmentId&&UserFb.ins().CheckFb&&UserFb.ins().guanqiaID>=e.conditionnum&&(this.m_ActivateBtn.visible=!0,this.m_ConditionLab.visible=!1);break;case ArtifactGetType.TYPE2:if(n=GlobalConfig.jifengTiaoyueLg.st100449,r=GlobalConfig.jifengTiaoyueLg.st100093,t.conid<e.fragmentId){var a=GameLogic.ins().actorModel.level;a>=e.conditionnum&&(this.m_ActivateBtn.visible=!0,this.m_ConditionLab.visible=!1)}break;case ArtifactGetType.TYPE3:if(n=GlobalConfig.jifengTiaoyueLg.st100458,r=GlobalConfig.jifengTiaoyueLg.st100093,t.conid<e.fragmentId){var l=UserVip.ins().lv;l>=e.conditionnum&&(this.m_ActivateBtn.visible=!0,this.m_ConditionLab.visible=!1)}break;case ArtifactGetType.TYPE4:n=GlobalConfig.jifengTiaoyueLg.st100452,r=GlobalConfig.jifengTiaoyueLg.st100006,t.conid<e.fragmentId&&GameServer.serverOpenDay>=e.conditionnum&&(this.m_ActivateBtn.visible=!0,this.m_ConditionLab.visible=!1);break;case ArtifactGetType.TYPE5:n=GlobalConfig.jifengTiaoyueLg.st100454,r=GlobalConfig.jifengTiaoyueLg.st100006;break;case ArtifactGetType.TYPE6:if(n=GlobalConfig.jifengTiaoyueLg.st100455,r=GlobalConfig.jifengTiaoyueLg.st100093,t.conid<e.fragmentId){var h=GameLogic.ins().actorModel.zsLv;h>=e.conditionnum&&(this.m_ActivateBtn.visible=!0,this.m_ConditionLab.visible=!1)}}t.conid>=e.fragmentId?this.m_ConditionLab.text=GlobalConfig.jifengTiaoyueLg.st100459:this.m_ConditionLab.textFlow=[{text:n},{text:e.conditionnum,style:{textColor:48930}},{text:r}]}else this.m_ModGetLab.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100445},{text:e.fragmentCount+"",style:{textColor:48930}},{text:GlobalConfig.jifengTiaoyueLg.st100446},{text:e.artifactsName,style:{textColor:48930}}],this.m_ConditionLab.text=GlobalConfig.jifengTiaoyueLg.st100460;AttributeData.setAttrGroup(e.attrs,this.m_AttrGroup,18,48930)}this.checkGuide()},t.prototype.onClickClose=function(){GuideUtils.ins().next(this.m_CloseBtn1),MessageCenter.ins().dispatch(ArtifactEvt.ARTIFACT_GUIDEEND),ViewManager.ins().close(this)},t.prototype.onClickAct=function(){GuideUtils.ins().next(this.m_ActivateBtn),ArtifactSproto.ins().sendActivateStone()},t.prototype._setEffect=function(e){this.mc||(this.mc=new MovieClip),this.mc.touchEnabled=!1,this.groupEff.addChild(this.mc),this.mc.x=this.groupEff.width/2,this.mc.y=this.groupEff.height/2,this.mc.scaleY=this.mc.scaleX=.7,this.mc.loadUrl(ResDataPath.GetUIEffePath(e[0].effUi),!0,-1)},t.prototype.checkGuide=function(){21==Setting.currPart&&3==Setting.currStep?GuideUtils.ins().show(this.m_ActivateBtn,21,3):21==Setting.currPart&&4==Setting.currStep&&GuideUtils.ins().show(this.m_CloseBtn1,21,4)},t.prototype.playBodyEff=function(){this.m_BodyEff=ViewManager.ins().createEff(this.m_BodyEff,this.m_BodyEffGrouo,"eff_ui_bodyUpgrade"),this.m_UpLvEff=ViewManager.ins().createEff(this.m_UpLvEff,this.m_LvUpEffGroup,"eff_ui_success")},t}(BaseEuiPanel);__reflect(ArtifactActivateTispWin.prototype,"ArtifactActivateTispWin"),ViewManager.ins().reg(ArtifactActivateTispWin,LayerManager.UI_Popup),window.ArtifactActivateTispWin=ArtifactActivateTispWin;var ArtifactAnim=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_LvLab.visible=!1},t.prototype.release=function(){DisplayUtils.dispose(this.m_NewEff),this.m_NewEff=null,DisplayUtils.dispose(this.m_Eff),this.m_Eff=null},t.prototype.setData=function(e){var t=(ArtifactModel.getInstance,GlobalConfig.ins("ArtifactsConfig")[e.id]);if(t){var i=e.strenglv;0>=i&&(i=0),this.m_RAndNameLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101439,[e.level])+" "+t[0].artifactsName,this.playNewEff(t)}this.m_Power.text=e.allPower},t.prototype.playNewEff=function(e){this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_AnimGroup,e[0].effUi,-1),this.m_Eff=ViewManager.ins().createEff(this.m_Eff,this.m_AnimGroup0,"eff_ditu",-1)},t}(eui.Component);__reflect(ArtifactAnim.prototype,"ArtifactAnim"),window.ArtifactAnim=ArtifactAnim;var ArtifactBaseIcon=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_SelectImg.visible=!1,this.m_NeedLab.visible=!1},t.prototype.setData=function(e){var t=(ArtifactModel.getInstance,GlobalConfig.ins("ArtifactsConfig")[e.id]);t&&(this.m_Name.text=t.artifactsName,this.m_Icon.source=t[0].iconUi+"_png"),this.m_Bg.source=ResDataPath.GetItemQualityName(5)},t}(eui.Component);__reflect(ArtifactBaseIcon.prototype,"ArtifactBaseIcon"),window.ArtifactBaseIcon=ArtifactBaseIcon;var ArtifactDebrisLab=function(e){function t(){var t=e.call(this)||this;return t.skinName="ArtifactDebrisLabSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,!0,5)},t.prototype.release=function(){DisplayUtils.dispose(this.mc),this.mc=null},t.prototype.onClick=function(){var e=ViewManager.ins();e.open(ArtifactActivateTispWin,this.data)},t.prototype.setData=function(){this.setMc(),this.m_Lab.textFlow=[{text:this.data.introduce,style:{underline:!0}}];var e=ArtifactModel.getInstance;this.data.id==e.curid&&e.conid>=this.data.fragmentId&&(this.m_Lab.textColor=36642);var t=e.checkDebrisIsCanActivate(this.data);t?(this.m_RedPoint.visible=!0,this.mc.loadUrl(ResDataPath.GetUIEffePath("eff_shenqi"),!0,-1),this.mc.visible=!0):(this.m_RedPoint.visible=!1,this.mc.visible=!1)},t.prototype.setMc=function(){this.mc||(this.mc=new MovieClip,this.mc.x=this.mc.y=0,this.mc.scaleX=this.mc.scaleY=1.3,this.groupEff.addChild(this.mc))},t}(eui.Component);__reflect(ArtifactDebrisLab.prototype,"ArtifactDebrisLab"),window.ArtifactDebrisLab=ArtifactDebrisLab;var ArtifactIcon=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent()},t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data,i=ArtifactModel.getInstance;i.getIndex(t.type)==this.itemIndex?this.m_SelectImg.visible=!0:this.m_SelectImg.visible=!1;var o=GlobalConfig.ins("ArtifactsConfig")[t.id];if(o&&(this.m_Name.text=o[0].artifactsName,this.m_Icon.source=o[0].iconUi+"_png",this.m_Bg.source=ResDataPath.GetItemQualityName(o[0].quality)),t.id>i.curid&&o&&1==o[0].activateType&&-1!=i.curid?this.m_lockImg.visible=!0:this.m_lockImg.visible=!1,this.parent&&"TYPE1"==this.parent.name){var s=i.checkIsCanLvUP(t.id),n=i.checkAllDebrisIsCanActivate(t.id);s||n?this.m_RedPoint.visible=!0:this.m_RedPoint.visible=!1}else if(this.parent&&"TYPE2"==this.parent.name){var s=i.checkIsCanLayerUP(t.id)||i.checkIsCanLvUP(t.id);s?this.m_RedPoint.visible=!0:this.m_RedPoint.visible=!1}t.isActivate?(this.m_Bg.filters=null,this.m_Icon.filters=null):(FilterUtil.setGayFilter(this.m_Bg),FilterUtil.setGayFilter(this.m_Icon))},t.prototype.onClick=function(){var e=this.data,t=ArtifactModel.getInstance;t.setIndex(e.type,this.itemIndex),GameGlobal.MessageCenter.dispatch(ArtifactEvt.ARTIFACT_INIT_MSG)},t.prototype.release=function(){this.m_Bg.filters=null,this.m_Icon.filters=null},t}(eui.ItemRenderer);__reflect(ArtifactIcon.prototype,"ArtifactIcon"),window.ArtifactIcon=ArtifactIcon;var ArtifactPanel=function(e){function t(t){var i=e.call(this)||this;return i.m_LvBtnState=1,i.needArr=[],i.oneIconWidth=90,i.type=t,i.name=GlobalConfig.jifengTiaoyueLg.st100409,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100409,2==i.type&&(i.name=GlobalConfig.jifengTiaoyueLg.st102099,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st102099),i.skinName="ArtifactPanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_ArtifactLabGuide.visible=!1,this.m_ArtifactLabGuide.m_Lab.textColor=1048575,this.m_List.itemRenderer=ArtifactIcon,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,UIHelper.SetLinkStyleLabel(this.getItem),this.m_FullLab.text=GlobalConfig.jifengTiaoyueLg.st100422,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100414,this.m_MianBtn.label=GlobalConfig.jifengTiaoyueLg.st100415,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100416,this.m_StateTile.text=GlobalConfig.jifengTiaoyueLg.st100421,this.getItem.text=GlobalConfig.jifengTiaoyueLg.st100418,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100218,this.m_GetPetTipsGroup.visible=!1},t.prototype.addViewEvent=function(){this.m_Scroller.addEventListener(egret.Event.CHANGE,this.onSaveScrData,this),this.observe(ArtifactEvt.ARTIFACT_LVUP_MSG,this.playBodyEff),this.observe(ArtifactEvt.ARTIFACT_INIT_MSG,this.initData),this.observe(MessageDef.BAG_HAS_ITEM_CAN_USE,this.initData),this.AddClick(this.m_UpLvBtn,this.onClickUpBtn),this.AddClick(this.m_MianBtn,this.onClickUpBtn),this.AddClick(this.m_PetNameLab,this.onClickPet),this.AddClick(this.getItem,this.onClickGetLab1)},t.prototype.removeEvent=function(){this.m_Scroller.removeEventListener(egret.Event.CHANGE,this.onSaveScrData,this)},t.prototype.open=function(){this.addViewEvent(),this.initData(),this.m_Scroller&&this.m_Scroller.viewport},t.prototype.close=function(){for(var e=this.m_List.numChildren,t=0;e>t;t++){var i=this.m_List.getChildAt(t);i&&i instanceof ArtifactIcon&&i.release()}this.removeEvent()},t.prototype.release=function(){for(var e=this.m_DebrisGroup.numChildren,t=0;e>t;t++){var i=this.m_DebrisGroup.removeChildAt(0);i&&i instanceof ArtifactDebrisLab&&i.release()}DisplayUtils.dispose(this.m_BodyEff),this.m_BodyEff=null,DisplayUtils.dispose(this.m_BodyEff0),this.m_BodyEff0=null,DisplayUtils.dispose(this.m_UpLvEff),this.m_UpLvEff=null,DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null,this.m_ArtifactAnim.release(),this.removeEvent()},t.prototype.onClickGetLab1=function(){UserWarn.ins().setBuyGoodsWarn(this.getItemId)},t.prototype.onSaveScrData=function(){this.m_Scroller&&this.m_Scroller.viewport&&(ArtifactModel.getInstance.scrollV=this.m_Scroller.viewport.scrollV),this.setListRedPoint()},t.prototype.setListRedPoint=function(){var e=this.oneIconWidth,t=ArtifactModel.getInstance;t.scrollV>e?this.m_TopArrImg.visible=!0:this.m_TopArrImg.visible=!1;var i=t.artifactDataTypeList(this.type).length;t.scrollV<(i-3.5)*e?this.m_LotArrImg.visible=!0:this.m_LotArrImg.visible=!1;var o=t.artifactDataTypeList(this.type);Math.ceil(t.scrollV/e);this.m_RedPoint0.visible=!1;for(var s=0;s<o.length;s++){var n=t.checkIsCanLayerUP(o[s].id),r=t.checkAllDebrisIsCanActivate(o[s].id);if(n||r){this.m_RedPoint0.visible=!0;break}}var a=(i-3.5)*e;this.m_RedPoint1.visible=!1;for(var l=i-Math.floor((a-t.scrollV)/e),s=l-1;i>s;s++){var n=t.checkIsCanLayerUP(o[s].id);if(n){this.m_RedPoint1.visible=!0;break}}},t.prototype.initData=function(){var e=ArtifactModel.getInstance,t=e.artifactDataTypeList(this.type);this.listData.replaceAll(t);var i=t[e.getIndex(this.type)];this.m_MainBtnGroup.visible=!1,this.getItem.visible=!1,this.m_ProActivateGroup.visible=!1,this.m_NoActivateStateGroup.visible=!1,this.m_LvStateGroup.visible=!1,this.m_ActivateStateGroup.visible=!1,this.m_FullLab.visible=!1,this.m_NeedLayerLab.text="";var o=AttributeData.getAttr([]);if(AttributeData.setAttrGroup(o,this.m_StateGroup),i){this.m_ArtifactAnim.setData(i);var s=GlobalConfig.ins("ArtifactsConfig")[i.id];if(0==i.isActivate){if(s&&1==s[0].activateType){this.m_ProActivateGroup.visible=!0,this.m_NoActivateStateGroup.visible=!0,e.setNoActivateDebrisGroup(this.m_DebrisGroup,s),this.m_MianBtn.enabled=!1;s[0].attrs;if(e.getIndex(this.type)+1==e.curid){s.length==e.conid&&(this.m_MianBtn.enabled=!0);for(var n=[],r=0;r<e.conid;r++){for(var a=[],l=0;l<s[r].attrs.length;l++){var h=s[r].attrs[l],c={type:h.type,value:h.value};a.push(c)}n.push(a)}var u=AttributeData.getAttr(n);AttributeData.setAttrGroup(u,this.m_StateGroup)}}else if(s&&2==s[0].activateType){this.m_MainBtnGroup.visible=!0,this.getItem.visible=!0,this.m_NoActivateStateGroup.visible=!0,this.m_UpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st100212,this.m_LvBtnState=1;var d=[];d.push(s[0].activationItem),this.getItemId=s[0].activationItem.id,this.needArr=d,UserBag.ins().setNeedItem(d,this.m_NeedItemGroup);var u=AttributeData.getAttr([s[0].attrs]);AttributeData.setAttrGroup(u,this.m_StateGroup),this.m_UpLvBtn.enabled=!0}}else{this.m_LvStateGroup.visible=!0,this.m_ActivateStateGroup.visible=!0,this.m_MainBtnGroup.visible=!0,this.getItem.visible=!0,this.m_ArrImg.visible=!0,this.m_LvRightAttrGroup.visible=!0,this.m_LvLeftAttrGroup.horizontalCenter=-121.5,this.m_UpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st100242;var u=i.baseAttr;AttributeData.setAttrGroup(u,this.m_StateGroup1);var p=i.layerlvAttr;AttributeData.setAttrGroup(p,this.m_LvLeftAttrGroup);var f=GlobalConfig.ins("ArtifactsRankConfig")[i.id];if(f){if(i.level==f.length)this.m_ArrImg.visible=!1,this.m_LvRightAttrGroup.visible=!1,this.m_LvLeftAttrGroup.horizontalCenter=0,this.m_MainBtnGroup.visible=!1,this.getItem.visible=!1,this.m_FullLab.visible=!0;else{var g=e.layerlvAttr(i.id,i.level+1);AttributeData.setAttrGroup(g,this.m_LvRightAttrGroup)}var _=i.level-1;0>=_&&(_=0);var m=UserBag.ins().getBagGoodsCountById(0,f[_].rankUpItem2.id);if(m>=f[_].rankUpItem2.count)this.needList=f[_].rankUpItem2,this.getItemId=f[_].rankUpItem2.id,UserBag.ins().setNeedItem([this.needList],this.m_NeedItemGroup);else if(f[_].rankUpItem3){var v=UserBag.ins().getBagGoodsCountById(0,f[_].rankUpItem3.id);v>=f[_].rankUpItem3.count?(this.needList=f[_].rankUpItem3,this.getItemId=f[_].rankUpItem3.id,UserBag.ins().setNeedItem([this.needList],this.m_NeedItemGroup)):(this.needList=f[_].rankUpItem,this.getItemId=f[_].rankUpItem.id,UserBag.ins().setNeedItem([this.needList],this.m_NeedItemGroup))}else this.needList=f[_].rankUpItem,this.getItemId=f[_].rankUpItem.id,UserBag.ins().setNeedItem([this.needList],this.m_NeedItemGroup)}}}this.setListRedPoint(),this.checkGuide()},t.prototype.sorLvUp=function(e,t){return e.id-t.id},t.prototype.onClickUpBtn=function(){GuideUtils.ins().next(this.m_UpLvBtn);var e=ArtifactModel.getInstance,t=e.artifactDataTypeList(this.type),i=t[e.getIndex(this.type)];if(0==i.isActivate){var o=GlobalConfig.ins("ArtifactsConfig")[i.id];if(o)if(2==o[0].activateType){var s=GlobalConfig.ins("ItemConfig")[o[0].activationItem.id],n=0;s&&0==s.type&&(n=1);var r=UserBag.ins().getBagGoodsCountById(n,o[0].activationItem.id);r>=o[0].activationItem.count?ArtifactSproto.ins().sendArtifactLvUpMsg(i.id,2):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100217)}else ArtifactSproto.ins().sendArtifactLvUpMsg(i.id,2)}else{var a=ArtifactModel.getInstance,l=a.artifactDataTypeList(this.type),h=l[a.getIndex(this.type)],s=GlobalConfig.ins("ItemConfig")[this.needList.id],n=0;s&&0==s.type&&(n=1);var r=UserBag.ins().getBagGoodsCountById(n,this.needList.id);if(r<this.needList.count)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100217);ArtifactSproto.ins().sendArtifactLvUpMsg(h.id,1)}},t.prototype.onClickPet=function(){var e=PetModel.getInstance,t=GlobalConfig.ins("ArtifactsBasicConfig"),i=e.petDic.get(t.showReward);i?ViewManager.ins().open(PetStateWin,i):(PetSproto.ins().sendGetPetInitMsg(),egret.setTimeout(function(){var t=GlobalConfig.ins("ArtifactsBasicConfig"),i=e.petDic.get(t.showReward);i&&ViewManager.ins().open(PetStateWin,i)},this,500))},t.prototype.checkGuide=function(){UserFb2.ins().fbChallengeId==GuideArtifact.Artifact&&GuideUtils.ins().show(this.m_UpLvBtn,68,4)},t.prototype.onClickGuide=function(){this.m_ArtifactLabGuide.visible=!1,GuideUtils.ins().next(this.m_ArtifactLabGuide),this.m_ArtifactLabGuide.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGuide,this)},t.prototype.UpdateContent=function(){},t.prototype.playBodyEff=function(){this.m_BodyEff=ViewManager.ins().createEff(this.m_BodyEff,this.m_BodyEffGrouo,"eff_ui_bodyUpgrade"),this.m_BodyEff0=ViewManager.ins().createEff(this.m_BodyEff0,this.m_BodyEffGrouo0,"eff_ui_upgrade"),this.m_UpLvEff=ViewManager.ins().createEff(this.m_UpLvEff,this.m_LvUpEffGroup,"eff_ui_success"),this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_icon")},t}(BaseView);__reflect(ArtifactPanel.prototype,"ArtifactPanel",["ICommonWindowTitle"]),window.ArtifactPanel=ArtifactPanel;var ArtifactTipsAnim=function(e){function t(){var t=e.call(this)||this;return t.skinName="ArtifactTipsAnimSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.release=function(){DisplayUtils.dispose(this.m_NewEff),this.m_NewEff=null,DisplayUtils.dispose(this.mcBtn),this.mcBtn=null},t.prototype.setData=function(e){this.playNewEff(e)},t.prototype.playNewEff=function(e){ArtifactModel.getInstance;this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_AnimGroup,e,-1),this.m_Eff=ViewManager.ins().createEff(this.m_Eff,this.m_EffGroup,"eff_ui_matrix",-1)},t}(eui.Component);__reflect(ArtifactTipsAnim.prototype,"ArtifactTipsAnim"),window.ArtifactTipsAnim=ArtifactTipsAnim;var ArtifactEquData=function(){function e(){}return Object.defineProperty(e.prototype,"isActivate",{get:function(){var e=ArtifactModel.getInstance;return this.id<e.curid||this.strenglv>=0?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNowActivate",{get:function(){var e=ArtifactModel.getInstance;return this.id==e.curid?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseAttr",{get:function(){var e=(ArtifactModel.getInstance,GlobalConfig.ins("ArtifactsConfig")[this.id]),t=[];if(e)for(var i=0;i<e.length;i++){for(var o=[],s=0;s<e[i].attrs.length;s++){var n=e[i].attrs[s],r={type:n.type,value:n.value};o.push(r)}t.push(o)}var a=AttributeData.getAttr(t);return a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lvAttr",{get:function(){var e=GlobalConfig.ins("ArtifactsStrengConfig")[this.id];if(e){var t=(1+Math.floor(this.strenglv/5),AttributeData.getNowPower(0,this.strenglv,0,5,e.price,e.basiccon,e.increasecon,e.slope,e.revisecon)),i=AttributeData.getAttrElementByPower(t,e.elementValue1,e.elementValue2,e.maxElement1,e.maxElement2);return i}return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerlvAttr",{get:function(){var e=GlobalConfig.ins("ArtifactsRankConfig")[this.id];if(e&&this.level>0){var t=this.level-1;if(0>t)return AttributeData.getAttr([]);var i=e[this.level-1];return i.attrs}return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allPower",{get:function(){var e=0;return e+=Math.floor(UserBag.getAttrPower(this.baseAttr)),e+=Math.floor(UserBag.getAttrPower(this.lvAttr)),e+=Math.floor(UserBag.getAttrPower(this.layerlvAttr))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxStrenglv",{get:function(){return GlobalConfig.ins("ArtifactsStrengConfig")[this.id].maxLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lvNeedLayer",{get:function(){return Math.ceil((this.strenglv+1)/10)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerNeedLv",{get:function(){var e=GlobalConfig.ins("ArtifactsRankConfig")[this.id];if(e){var t=e[this.level-1];if(t)return t.levelLimit}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){var e=GlobalConfig.ins("ArtifactsConfig")[this.id];return e[0].classification},enumerable:!0,configurable:!0}),e}();__reflect(ArtifactEquData.prototype,"ArtifactEquData"),window.ArtifactEquData=ArtifactEquData;var ArtifactEvt=function(){function e(){}return e.ARTIFACT_INIT_MSG="ARTIFACT_INIT_MSG",e.ARTIFACT_GUIDEEND="ARTIFACT_GUIDEEND",e.ARTIFACT_ACTIVATE_MSG="ARTIFACT_ACTIVATE_MSG",e.ARTIFACT_LVUP_MSG="ARTIFACT_LVUP_MSG",e}();__reflect(ArtifactEvt.prototype,"ArtifactEvt"),window.ArtifactEvt=ArtifactEvt;var ArtifactModel=function(){function e(){this.scrollV=0,this.nowSelectIndex1=0,this.nowSelectIndex2=0,this.curid=0,this.conid=0,this.artufactDic=new Dictionary}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.setIndex=function(e,t){switch(e){case 1:this.nowSelectIndex1=t;break;case 2:this.nowSelectIndex2=t}},e.prototype.getIndex=function(e){switch(e){case 1:return this.nowSelectIndex1;case 2:return this.nowSelectIndex2}},e.prototype.setArtufactData=function(e){for(var t=0;t<e.length;t++){var i=new ArtifactEquData;i.id=e[t].id,i.level=e[t].level,i.strenglv=e[t].strenglv,this.artufactDic.set(i.id,i)}},Object.defineProperty(e.prototype,"activateIndex",{get:function(){for(var e=0,t=this.artufactDic.values,i=0;i<t.length;i++)1==t[i].isActivate&&(e+=1);return e},enumerable:!0,configurable:!0}),e.prototype.setNoActivateDebrisGroup=function(e,t){for(var i=e.numChildren,o=0;i>o;o++){var s=e.removeChildAt(0);s&&s instanceof ArtifactDebrisLab&&s.release()}e.removeChildren();for(var o=0;o<t.length;o++){var n=new ArtifactDebrisLab;n.data=t[o],e.addChild(n),n.setData()}},e.prototype.getLvAttr=function(e,t){var i=GlobalConfig.ins("ArtifactsStrengConfig")[e];if(i){var o=(1+Math.floor(t/5),AttributeData.getNowPower(0,t,0,5,i.price,i.basiccon,i.increasecon,i.slope,i.revisecon)),s=AttributeData.getAttrElementByPower(o,i.elementValue1,i.elementValue2,i.maxElement1,i.maxElement2);return s}return[]},e.prototype.layerlvAttr=function(e,t){var i=GlobalConfig.ins("ArtifactsRankConfig")[e];if(i&&t>0){var o=i[t-1];return o.attrs}return[]},e.prototype.checkIsCanLayerUP=function(e){var t=this.artufactDic.get(e);if(t){var i=GlobalConfig.ins("ArtifactsConfig")[t.id];if(!i)return!1;if(0==t.isActivate)return!1;var o=GlobalConfig.ins("ArtifactsRankConfig")[t.id];if(t.level==o.length)return!1;var s=t.level-1;0>=s&&(s=0);var n=o[s].rankUpItem2,r=GlobalConfig.ins("ItemConfig")[n.id],a=0;r&&0==r.type&&(a=1);var l=UserBag.ins().getBagGoodsCountById(a,n.id);if(l>=n.count)return!0;var h=o[s].rankUpItem3;if(h){var c=UserBag.ins().getBagGoodsCountById(a,h.id);if(c>=h.count)return!0}var u=o[s].rankUpItem,d=GlobalConfig.ins("ItemConfig")[u.id],p=0;d&&0==d.type&&(p=1);var f=UserBag.ins().getBagGoodsCountById(p,u.id);if(f>=u.count)return!0}return!1},e.prototype.checkIsCanLvUP=function(e){var t=this.artufactDic.get(e),i=[];if(t){var o=GlobalConfig.ins("ArtifactsConfig")[t.id];if(!o)return!1;if(0==t.isActivate)if(1==o[0].activateType){o[0].attrs;if(t.id==this.curid&&o.length==this.conid)return!0;var s=this.checkAllDebrisIsCanActivate(o[0].id);if(s)return!0}else{var n=[];n.push(o[0].activationItem),i=n}else{var r=GlobalConfig.ins("ArtifactsStrengConfig")[t.id];if(r){for(var a=[],l=1;2>=l;l++){var h={type:0,id:0,count:0};h.type=0,h.id=r["itemId"+l],2==l?h.count=500*t.strenglv:h.count=1+Math.floor(t.strenglv/5),a.push(h)}i=a}}if(t.strenglv<=0&&0==t.isActivate){var c=GlobalConfig.ins("ArtifactsConfig")[t.id];if(c&&2==c[0].activateType){var u=GlobalConfig.ins("ItemConfig")[c[0].activationItem.id],d=0;u&&0==u.type&&(d=1);var p=UserBag.ins().getBagGoodsCountById(d,c[0].activationItem.id);if(p>=c[0].activationItem.count)return!0}}}return!1},e.prototype.checkAllDebrisIsCanActivate=function(e){var t=GlobalConfig.ins("ArtifactsConfig")[e];for(var i in t){var o=t[i],s=this.checkDebrisIsCanActivate(o);if(s)return!0}return!1},e.prototype.checkAnyIsCanActivate=function(){for(var e=Object.keys(GlobalConfig.ins("ArtifactsConfig")),t=0,i=e.length;i>t;t++)if(this.checkAllDebrisIsCanActivate(parseInt(e[t])))return!0;return!1},e.prototype.checkAllLvUp=function(){for(var e=this.artifactDataList,t=0;t<e.length;t++){var i=this.checkIsCanLvUP(e[t].id);if(i)return!0}return!1},e.prototype.checkAllLvUpByType=function(e){for(var t=this.artifactDataTypeList(e),i=0;i<t.length;i++){var o=this.checkIsCanLvUP(t[i].id);if(o)return!0}return!1},e.prototype.checkAllLvUpAndActivate=function(){return this.checkAllLvUp()||this.checkAnyIsCanActivate()?!0:!1},e.prototype.checkAllLvUpAndActivateByType=function(e){return this.checkAllLvUpByType(e)||this.checkAnyIsCanActivate()?!0:!1},e.prototype.checkAllLayerUp=function(){for(var e=this.artifactDataList,t=0;t<e.length;t++){var i=this.checkIsCanLayerUP(e[t].id);if(i)return!0}return!1},e.prototype.checkAllLayerUpBuyType=function(e){for(var t=this.artifactDataTypeList(e),i=0;i<t.length;i++){var o=this.checkIsCanLayerUP(t[i].id);if(o)return!0}return!1},e.prototype.checkDebrisIsCanActivate=function(e){if(e){var t=this.artufactDic.get(e.id);if(t){var i=(GlobalConfig.ins("ArtifactsConfig")[t.id],0);if(this.curid==e.id){if(i=e.fragmentCount-this.conid,this.conid>=e.fragmentId)return!1;switch(e.conditionkind){case ArtifactGetType.TYPE1:if(UserFb.ins().CheckFb&&UserFb.ins().guanqiaID>=e.conditionnum)return!0;break;case ArtifactGetType.TYPE2:var o=GameLogic.ins().actorModel.level;if(o>=e.conditionnum)return!0;break;case ArtifactGetType.TYPE3:var s=UserVip.ins().lv;if(s>=e.conditionnum)return!0;break;case ArtifactGetType.TYPE4:if(GameServer.serverOpenDay>=e.conditionnum)return!0;break;case ArtifactGetType.TYPE5:break;case ArtifactGetType.TYPE6:var n=GameLogic.ins().actorModel.zsLv;if(n>=e.conditionnum)return!0}}}}return!1},Object.defineProperty(e.prototype,"artifactDataList",{get:function(){var e=this.artufactDic.values;return e.sort(this.sorLvUp),e},enumerable:!0,configurable:!0}),e.prototype.artifactDataTypeList=function(e){for(var t=this.artifactDataList,i=[],o=0;o<t.length;o++)t[o].type==e&&i.push(t[o]);return i},e.prototype.sorLvUp=function(e,t){return e.id-t.id},e}();__reflect(ArtifactModel.prototype,"ArtifactModel");var ArtifactGetType;!function(e){e[e.TYPE1=1]="TYPE1",e[e.TYPE2=2]="TYPE2",e[e.TYPE3=3]="TYPE3",e[e.TYPE4=4]="TYPE4",e[e.TYPE5=5]="TYPE5",e[e.TYPE6=6]="TYPE6"}(ArtifactGetType||(ArtifactGetType={})),window.ArtifactModel=ArtifactModel;var ArtifactSproto=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_artifact_datas,t.getArtifactInitData),t.regNetMsg(S2cProtocol.sc_artifact_progress_res,t.getUpDateData),t.regNetMsg(S2cProtocol.sc_artifact_uplevel_result,t.getUpLvData),t.regNetMsg(S2cProtocol.sc_artifact_stone_res,t.getActivateStone),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendArtifactLvUpMsg=function(e,t){var i=new Sproto.cs_artifact_uplevel_request;i.id=e,i.uptype=t,this.Rpc(C2sProtocol.cs_artifact_uplevel,i)},t.prototype.sendActivateStone=function(){var e=new Sproto.cs_artifact_stone_req_request;this.Rpc(C2sProtocol.cs_artifact_stone_req,e)},t.prototype.getArtifactInitData=function(e){var t=ArtifactModel.getInstance;null!=e.curid?(t.curid=e.curid,t.conid=e.conid):(t.curid=-1,t.conid=-1),t.setArtufactData(e.datas),GameGlobal.MessageCenter.dispatch(ArtifactEvt.ARTIFACT_INIT_MSG)},t.prototype.getUpDateData=function(e){var t=ArtifactModel.getInstance;null!=e.curid?(t.curid=e.curid,t.conid=e.conid):(t.curid=-1,t.conid=-1),GameGlobal.MessageCenter.dispatch(ArtifactEvt.ARTIFACT_INIT_MSG)},t.prototype.getUpLvData=function(e){var t=ArtifactModel.getInstance,i=t.artufactDic.get(e.data.id);if(i.strenglv<e.data.strenglv){var o=GlobalConfig.ins("ArtifactsConfig")[e.data.id][0];if(o){var s=o.effUi,n=o.artifactsName;ViewManager.ins().open(MainNewWin,ResAnimType.TYPE1,0,[s,n,3])}}i.strenglv=e.data.strenglv,i.level=e.data.level,GameGlobal.MessageCenter.dispatch(ArtifactEvt.ARTIFACT_INIT_MSG),GameGlobal.MessageCenter.dispatch(ArtifactEvt.ARTIFACT_LVUP_MSG)},t.prototype.getActivateStone=function(e){var t=ArtifactModel.getInstance;null!=e.curid?(t.curid=e.curid,t.conid=e.conid):(t.curid=-1,t.conid=-1),GameGlobal.MessageCenter.dispatch(ArtifactEvt.ARTIFACT_INIT_MSG),GameGlobal.MessageCenter.dispatch(ArtifactEvt.ARTIFACT_ACTIVATE_MSG)},t}(BaseSystem);__reflect(ArtifactSproto.prototype,"ArtifactSproto"),window.ArtifactSproto=ArtifactSproto;var AttrComp=function(e){function t(){var t=e.call(this)||this;return t.skinName="AttrCompSkin",t}return __extends(t,e),t.prototype.setState=function(e){void 0===e&&(e="state1"),this.currentState=e},t.prototype.setLeftAttr=function(e,t){void 0===t&&(t=[]);
for(var i=[],o=0;o<t.length;o++){var s=t[o].split("+"),n=s[1].split("%"),r=void 0;if("?"==n[0])break;r=parseInt(n[0]),i.push(r)}var a=[];if(i.length>0)for(var o=0;o<i.length;o++){var l={type:e[o].type,value:e[o].value*(i[o]/100)+e[o].value};a.push(l)}else a=e;this.m_LeftLab.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st100306+"：<font color='#008f22'>"+UserBag.getAttrPower(a)+"</font>"),AttributeData.setAttrGroup(e,this.m_LeftGroup,16,Color.FontColor,!1,Color.Green,t,!0),this.m_LeftGroup.validateDisplayList()},t.prototype.setRightAttr=function(e,t){void 0===t&&(t=[]),this.m_RightLab.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st100306+"：<font color='#008f22'>"+UserBag.getAttrPower(e)+"</font>"),AttributeData.setAttrGroup(e,this.m_RightGroup,16,Color.FontColor,!1,Color.Green,t,!0),this.m_RightGroup.validateDisplayList()},t.prototype.setLeftLab=function(e){this.m_LeftTitel.text=e},t.prototype.setRightLab=function(e){this.m_RightTitle.text=e},t}(eui.Component);__reflect(AttrComp.prototype,"AttrComp"),window.AttrComp=AttrComp;var ItemData=function(){function e(){this.handle=0,this.att=[],this.mIsNewItem=!1,this.weight=0}return e.prototype.parser=function(e){if(null!=e){this.handle=e.handle,this.configID=e.configID,this.count=e.count;for(var t=0,i=e.att;t<i.length;t++){var o=i[t],s=new AttributeData;s.parser(o),this.att.push(s)}this.invalidtime=e.invalidtime||0}},Object.defineProperty(e.prototype,"configID",{get:function(){return this._configID},set:function(e){null!=GlobalConfig.itemConfig&&(this.itemConfig=GlobalConfig.itemConfig[e],this._configID=e,this.setCanbeUsed())},enumerable:!0,configurable:!0}),e.getStringByList=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=": ");for(var o="",s=0;s<e.length;s++)if(o+=e[s]+i,s<e.length-1)for(var n=0;t>n;n++)o+="\n";return o},e.getStringByNextList=function(e,t){for(var i="",o=0;o<e.length;o++)i+=e[o],t[o]&&(i+=t[o]),o<e.length-1&&(i+="\n");return i},Object.defineProperty(e.prototype,"point",{get:function(){return this.itemConfig?ItemConfig.calculateBagItemScore(this):0},enumerable:!0,configurable:!0}),e.prototype.setCanbeUsed=function(){this.itemConfig&&(1==this.itemConfig.useType||2==this.itemConfig.useType||3==this.itemConfig.useType?UserZs.ins().lv<this.itemConfig.zsLevel||GameLogic.ins().actorModel.level<this.itemConfig.level?this.canbeUsed=!1:230001==this.itemConfig.id||230002==this.itemConfig.id||230003==this.itemConfig.id?this.canbeUsed=!1:this.canbeUsed=!0:this.canbeUsed=!1)},e.prototype.getCanbeUsed=function(){return this.canbeUsed?e.IsNotTimeLimitUse(this.itemConfig):!1},e.IsNotTimeLimitUse=function(e){if(e.useType==ItemUseType.TYPE01&&null!=e.useArg&&null!=e.useArg.timelimit)try{var t=new Date(e.useArg.timelimit);if(.001*t.getTime()>=GameServer.serverTime)return!1}catch(i){}return!0},e.prototype.getCanbeHc=function(){if(this.configID&&this.count){var e=GlobalConfig.itemConfig[this.configID];if(e.synthesis)return Math.floor(this.count/e.hcnumber)>0}return!1},e}();__reflect(ItemData.prototype,"ItemData"),window.ItemData=ItemData;var UserBag=function(e){function t(){var i=e.call(this)||this;return i.bagNum=0,i.bagModel=[],i._useItemFunc={},i.upLevelEquips=[],i.eatCnt=0,i.eatTime=0,i.autoTime=0,i.showList=[],i.bagModel[t.BAG_TYPE_OTHTER]=[],i.bagModel[t.BAG_TYPE_EQUIP]=[],i.bagModel[t.BAG_TYPE_TREASUREHUNT]=[],i.bagModel[t.BAG_THE_LUCK]=[],i.bagModel[t.BAG_TYPE_VIPTREASUREHUNT]=[],i.sysId=PackageID.Bag,i.regNetMsg(S2cProtocol.sc_bag_init_data,i.doBagData),i.regNetMsg(S2cProtocol.sc_bag_deal_valumn_add,i.doBagValumnAdd),i.regNetMsg(S2cProtocol.sc_bag_deal_delete_item,i.doDeleteItem),i.regNetMsg(S2cProtocol.sc_bag_deal_add_item,i.doAddItem),i.regNetMsg(S2cProtocol.sc_bag_update_item_data,i.doUpDataItem),i.regNetMsg(S2cProtocol.sc_bag_user_item_back,i.doUserItemBack),i.regNetMsg(S2cProtocol.sc_bag_get_treasure_equip,i.doGetTreasure),i.regNetMsg(S2cProtocol.sc_bag_get_tendraw_equip,i.sc_bag_get_tendraw_equip),i.registerUseItemFunc(ItemConst.RENAME,i.useRenameItem),i.regNetMsg(S2cProtocol.sc_bag_compose_result,i.doHcItemBack),i.regNetMsg(S2cProtocol.sc_equip_autosmelt_res,i.sc_equip_autosmelt_res_request),i.regNetMsg(S2cProtocol.sc_bag_danyao_info,i.getBagDanyaoMsg),i}return __extends(t,e),Object.defineProperty(t.prototype,"promptList",{get:function(){var e=["",GlobalConfig.jifengTiaoyueLg.st101472,GlobalConfig.jifengTiaoyueLg.st101473,GlobalConfig.jifengTiaoyueLg.st101474,GlobalConfig.jifengTiaoyueLg.st101475,GlobalConfig.jifengTiaoyueLg.st101476,GlobalConfig.jifengTiaoyueLg.st101477,GlobalConfig.jifengTiaoyueLg.st100008];return e},enumerable:!0,configurable:!0}),t.ins=function(){return e.ins.call(this)},t.prototype.getBagDanyaoMsg=function(e){this.eatCnt=e.eatCnt,this.eatTime=e.eatTime,GameGlobal.MessageCenter.dispatch(MessageDef.DANYAO_UPDATE)},t.prototype.sendGetDanyaoMsg=function(){var e=new Sproto.cs_bag_danyao_info_request;GameSocket.ins().Rpc(C2sProtocol.cs_bag_danyao_info,e)},t.prototype.sendRefCDDanyaoMsg=function(){var e=new Sproto.cs_bag_danyao_cd_request;GameSocket.ins().Rpc(C2sProtocol.cs_bag_danyao_cd,e)},t.prototype.sc_equip_autosmelt_res_request=function(e){if(this.isAuto=1==e.result,1==e.result){for(var i=t.ins().getOutEquips(!1),o=t.ins().getOutFuwenEquips(i.length),s=0;s<o.length;++s)i.push(o[s]);t.ins().creatListLength(i),UserEquip.ins().sendSmeltEquip(0,i,!0)}},t.prototype.sendAddBagGrid=function(e){var t=new Sproto.cs_bag_add_grid_request;t.bagNum=e,GameSocket.ins().Rpc(C2sProtocol.cs_bag_add_grid,t)},t.prototype.sendUseItem=function(e,t){if(null!=this._useItemFunc[e])return this._useItemFunc[e](e,t),!0;var i=new Sproto.cs_bag_use_item_request;return i.id=e,i.count=t,GameSocket.ins().Rpc(C2sProtocol.cs_bag_use_item,i),!1},t.prototype.sendUserGoods=function(e,t){},t.prototype.sendHcItem=function(e,t){var i=new Sproto.cs_bag_compose_item_request;i.id=e,i.count=t,GameSocket.ins().Rpc(C2sProtocol.cs_bag_compose_item,i)},t.prototype.setAutoBag=function(e){var t=new Sproto.cs_equip_autosmelt_req_request;t.type=e?1:0,GameSocket.ins().Rpc(C2sProtocol.cs_equip_autosmelt_req,t)},t.prototype.doHcItemBack=function(e){1==e.result&&t.postHcItemSuccess()},t.postHcItemSuccess=function(){},t.prototype.doBagData=function(e){var i=e.code,o=e.type;0==i&&(this.bagModel[o]=[]);for(var s,n=e.datas.length,r=0;n>r;r++)s=new ItemData,s.parser(e.datas[r]),this.bagModel[o].push(s);1==o&&this.doBagVolChange(),2==o&&t.postHuntStore(),t._DispatchHasItemCanUse(this.getIsExitUsedItem())},t.prototype.doBagVolChange=function(){var e=this.getBagItemNum()/this.getMaxBagRoom()>=.8||this.getWingZhuEquip().length>=10;MessageCenter.ins().dispatch(MessageDef.BAG_ITEM_COUNT_CHANGE,e),e=this.getSurplusCount()<.05*this.getMaxBagRoom(),MessageCenter.ins().dispatch(MessageDef.BAG_WILL_FULL,e),e&&this.autoSmelt()},t.prototype.autoSmelt=function(){if(t.ins().isAuto&&this.autoTime-egret.getTimer()<0){this.autoTime=egret.getTimer()+1e3;for(var e=t.ins().getOutEquips(!1),i=t.ins().getOutFuwenEquips(e.length),o=0;o<i.length;++o)e.push(i[o]);t.ins().creatListLength(e),UserEquip.ins().sendSmeltEquip(0,e,!0)}},t.prototype.doUserItemBack=function(e){var i=e.tipIndex;i>0?UserTips.ins().showTips(this.promptList[i]):0==i&&t.postUseItemSuccess()},t.prototype.doBagValumnAdd=function(e){null==this.bagBaseConfig&&(this.bagBaseConfig=GlobalConfig.ins("BagBaseConfig")),this.bagNum=e.bagNum*this.bagBaseConfig.rowSize+this.bagBaseConfig.baseSize,t.postBagVolAdd()},t.prototype.doDeleteItem=function(e){var i=e.type;if(4!=i){for(var o=e.handle,s=this.bagModel[i].length-1;s>=0;s--)if(this.bagModel[i][s].handle==o){this.bagModel[i].splice(s,1);break}i==t.BAG_TYPE_TREASUREHUNT?t.postHuntStore():(GameGlobal.MessageCenter.dispatch(MessageDef.DELETE_ITEM),this.doBagVolChange(),GameGlobal.MessageCenter.dispatch(MessageDef.ITEM_COUNT_CHANGE)),t._DispatchHasItemCanUse(this.getIsExitUsedItem())}else GadSproto.ins().getGadDelBag(e)},t.prototype.doAddItem=function(e){var i=e.type,o=new ItemData;o.parser(e.data),o.itemConfig.type==ItemType.FUWEN&&(o.mIsNewItem=!0),this.bagModel[i].push(o);var s=GlobalConfig.ins("ExhibitionConfig");s[e.data.configID]&&!TreasureStorePanel.isOpen&&(this.showList.push(e.data.configID),MainGetNewWin.isOpen||ViewManager.ins().open(MainGetNewWin));var n=e.showTip;if(n)if(o.itemConfig.quality>=4&&i==t.BAG_TYPE_EQUIP)UserTips.ins().showGoodEquipTips(o);else if(i!=t.BAG_TYPE_TREASUREHUNT){var r=ItemBase.QUALITY_TIPS_COLOR[o.itemConfig.quality],a=GlobalConfig.jifengTiaoyueLg.st101471+"|C:"+r+"&T:"+o.itemConfig.name+" x "+o.count+"|";UserTips.ins().showTips(a)}i==t.BAG_TYPE_TREASUREHUNT?t.postHuntStore():(t.postItemAdd(),GameGlobal.MessageCenter.dispatch(MessageDef.ADD_ITEM),this.doBagVolChange(),GameGlobal.MessageCenter.dispatch(MessageDef.ITEM_COUNT_CHANGE)),t._DispatchHasItemCanUse(this.getIsExitUsedItem())},t.prototype.doUpDataItem=function(e){for(var i,o=e.type,s=e.handle,n=0,r=0;r<this.bagModel[o].length;r++)if(i=this.bagModel[o][r],i.handle==s){var a=e.num;n=a-i.count,i.count=a;break}if(i){if(n>0){var l=GlobalConfig.ins("ExhibitionConfig");l[i.itemConfig.id]&&!TreasureStorePanel.isOpen&&(this.showList.push(i.itemConfig.id),MainGetNewWin.isOpen||ViewManager.ins().open(MainGetNewWin))}var h=e.showTip;if(h&&n>0&&2!=o){var c=ItemBase.QUALITY_COLOR[i.itemConfig.quality],u=GlobalConfig.jifengTiaoyueLg.st101471+"|C:"+c+"&T:"+i.itemConfig.name+" x "+n+"|";UserTips.ins().showTips(u)}}o!=t.BAG_TYPE_TREASUREHUNT&&(this.doBagVolChange(),t.postItemChange(),MessageCenter.ins().dispatch(MessageDef.CHANGE_ITEM),GameGlobal.MessageCenter.dispatch(MessageDef.ITEM_COUNT_CHANGE)),t._DispatchHasItemCanUse(this.getIsExitUsedItem())},t.prototype.sendGetGoodsByStore=function(e,i){if(void 0===i&&(i=t.BAG_TYPE_TREASUREHUNT),0!=e&&this.getSurplusCount()<1){var o=GlobalConfig.ins("ServerTips")[2].tips;return void UserTips.ins().showTips(o)}var s=new Sproto.cs_bag_get_goods_by_store_request;s.uuid=e,i==t.BAG_TYPE_VIPTREASUREHUNT?GameSocket.ins().Rpc(C2sProtocol.cs_bag_get_ticket_by_store,s):i==t.BAG_THE_LUCK?GameSocket.ins().Rpc(C2sProtocol.cs_bag_get_tendraw_by_store,s):GameSocket.ins().Rpc(C2sProtocol.cs_bag_get_goods_by_store,s)},t.prototype.doGetTreasure=function(e){var i=this;e.handle.forEach(function(e){for(var o,s=i.bagModel[t.BAG_TYPE_TREASUREHUNT].length-1;s>=0;s--)if(i.bagModel[t.BAG_TYPE_TREASUREHUNT][s].handle==e){o=i.bagModel[t.BAG_TYPE_TREASUREHUNT][s],i.bagModel[t.BAG_TYPE_TREASUREHUNT].splice(s,1);break}o.itemConfig.type==ItemType.FUWEN&&(o.mIsNewItem=!0),i.bagModel[t.BAG_TYPE_EQUIP].push(o)}),t.postHuntStore(),t.postItemAdd(),GameGlobal.MessageCenter.dispatch(MessageDef.ADD_ITEM),this.doBagVolChange(),GameGlobal.MessageCenter.dispatch(MessageDef.ITEM_COUNT_CHANGE),t._DispatchHasItemCanUse(this.getIsExitUsedItem())},t.prototype.sc_bag_get_tendraw_equip=function(e){var i=this;e.handle.forEach(function(e){for(var o,s=i.bagModel[t.BAG_THE_LUCK].length-1;s>=0;s--)if(i.bagModel[t.BAG_THE_LUCK][s].handle==e){o=i.bagModel[t.BAG_THE_LUCK][s],i.bagModel[t.BAG_THE_LUCK].splice(s,1);break}o.itemConfig.type==ItemType.FUWEN&&(o.mIsNewItem=!0),i.bagModel[t.BAG_TYPE_EQUIP].push(o)}),t.postHuntStore()},t.postItemChange=function(){},t.prototype.registerUseItemFunc=function(e,t){this._useItemFunc[e]=t},t.postItemAdd=function(){},t.postHuntStore=function(){},t._DispatchHasItemCanUse=function(e){MessageCenter.ins().dispatch(MessageDef.BAG_HAS_ITEM_CAN_USE,e)},t.postUseItemSuccess=function(){},t.postBagVolAdd=function(){},t.prototype.getBagItemById=function(e){for(var i=this.bagModel[t.BAG_TYPE_OTHTER],o=0,s=i;o<s.length;o++){var n=s[o];if(n.itemConfig&&n.itemConfig.id==e)return n}return null},t.prototype.getBagGoodsByTypeAndId=function(e,t){for(var i=this.bagModel[e],o=0,s=i;o<s.length;o++){var n=s[o];if(n.itemConfig.id==t)return n}return null},t.prototype.getBagEquipByType=function(e){var i=this.bagModel[t.BAG_TYPE_EQUIP],o=[];for(var s in i){if(!i[s]||!i[s].itemConfig){var n="";GameLogic.ins()&&GameLogic.ins().actorModel&&(n+=null==GameLogic.ins().actorModel.name?"玩家账号："+StartGetUserInfo.uid+">>>":"玩家名字："+GameLogic.ins().actorModel.name+">>>"),StatisticsUtils.debugInfoLogPhp(n+"  这个道具有毒："+s)}i[s]&&i[s].itemConfig&&i[s].itemConfig.type==e&&o.push(i[s])}return o},t.prototype.getBagEquipCountById=function(e){var i=0;if(this.bagModel[t.BAG_TYPE_EQUIP])for(var o=this.bagModel[t.BAG_TYPE_EQUIP],s=0,n=o;s<n.length;s++){var r=n[s];r.configID==e&&i++}return i},t.prototype.getBagGoodsCountById=function(e,t){for(var i=this.bagModel[e],o=0;o<i.length;o++)if(i[o].itemConfig.id==t)return i[o].count;return 0},t.prototype.getBagGoodsByIndex=function(e,t){return this.bagModel[e][t]},t.prototype.getBagItemNum=function(e){void 0===e&&(e=1);var t=this.bagModel[e];return t?t.length:0},t.prototype.getAllItemListBuyType=function(e,t){for(var i=this.bagModel[e],o=[],s=0;s<i.length;s++)i[s].itemConfig.type==t&&o.push(i[s]);return o},t.prototype.getAllItemListBuyTypeAndQuality=function(e,t,i){for(var o=this.bagModel[e],s=[],n=0;n<o.length;n++)o[n].itemConfig.type==t&&o[n].itemConfig.quality==i&&s.push(o[n]);return s},t.prototype.getSurplusCount=function(){return this.getMaxBagRoom()-this.getBagItemNum()},t.prototype.getMaxBagRoom=function(){return null==this.vipGridConfig&&(this.vipGridConfig=GlobalConfig.ins("VipGridConfig")),this.bagNum+this.vipGridConfig[UserVip.ins().lv].grid+Recharge.ins().getAddBagGrid()},t.prototype.sort1=function(e,t){var i=ItemConfig.calculateBagItemScore(e),o=ItemConfig.calculateBagItemScore(t);return i>o?-1:o>i?1:0},t.prototype.sort2=function(e,t){var i=ItemConfig.calculateBagItemScore(e),o=ItemConfig.calculateBagItemScore(t);return o>i?-1:i>o?1:0},t.prototype.getBagSortEquips=function(e){void 0===e&&(e=0);var i=this.bagModel[t.BAG_TYPE_EQUIP];return e?i.sort(this.sort1):i.sort(this.sort2),i},t.prototype.getBagSortQualityEquips=function(e,i,o,s,n){void 0===e&&(e=5),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=null),void 0===n&&(n=null);for(var r=this.bagModel[t.BAG_TYPE_EQUIP],a=[],l=0;l<r.length;l++){var h=!1;if(n)for(var c=0;c<n.length;c++)r[l].itemConfig.type==n[c]&&(h=!0);(5==e||!(r[l].itemConfig.quality>e||i&&r[l].itemConfig.quality<e)||h)&&(null==s||s(r[l]))&&(a[a.length]=r[l])}return a},t.prototype.getCanSmeltEquips=function(){var e=this.bagModel[t.BAG_TYPE_EQUIP],i=[];this.equipList||(this.equipList=Object.keys(GlobalConfig.smeltequipConfig));for(var o=0;o<e.length;o++){var s=e[o];s.itemConfig.type==ItemType.EQUIP?s.itemConfig.quality<=3&&(i[i.length]=e[o]):s.itemConfig.type==ItemType.ZHUANZHI?this.equipList.indexOf(s.itemConfig.id+"")>=0&&(i[i.length]=e[o]):s.itemConfig.type==ItemType.MOUNTEQUIP&&this.equipList.indexOf(s.itemConfig.id+"")>=0&&(i[i.length]=e[o])}return i},t.prototype.otherEquipSmeltFilter=function(e){if(4==e.itemConfig.type)return!0;if(0==e.itemConfig.type){var t=e.itemConfig.subType;for(var i in ForgeConst.CAN_FORGE_EQUIP)if(ForgeConst.EQUIP_POS_TO_SUB[ForgeConst.CAN_FORGE_EQUIP[i]]==t)return!1;return!0}return!1},t.prototype.normalEquipSmeltFilter=function(e){return e.itemConfig.type==ItemType.EQUIP||e.itemConfig.type==ItemType.RINGSOUL},t.prototype.normalFuwenSmeltFilter=function(e){return e.itemConfig.type==ItemType.FUWEN},t.prototype.canSmeltNormalFilter=function(e){return e.itemConfig.type==ItemType.EQUIP||e.itemConfig.type==ItemType.FUWEN||e.itemConfig.type==ItemType.RINGSOUL||e.itemConfig.type==ItemType.ZHUANZHI||e.itemConfig.type==ItemType.MOUNTEQUIP},t.prototype.getOutFuwenEquips=function(e){var t=[],i=this.getBagSortQualityEquips(5,0,1,this.normalFuwenSmeltFilter);if(0==i.length)return t;i.sort(this.sort1);for(var o=[null,[],[],[]],s=0;s<SubRoles.ins().subRolesLen;++s)for(var n=SubRoles.ins().getSubRoleByIndex(s),r=0;r<ItemConfig.FuwenEquipSlot.Count;++r)o[n.job][r]=n.fuwen.equipDatas[r].itemConfig&&ItemConfig.calculateBagItemScore(n.fuwen.equipDatas[r])||0;var a=[null,[],[],[]];return i.forEach(function(i){t.length<e&&(o[i.itemConfig.job]&&ItemConfig.calculateBagItemScore(i)<=o[i.itemConfig.job][i.itemConfig.subType]?t.push(i):(a[i.itemConfig.job][i.itemConfig.subType]||(a[i.itemConfig.job][i.itemConfig.subType]=[]),a[i.itemConfig.job][i.itemConfig.subType][ItemConfig.calcItemLevel(i)]?t.push(i):a[i.itemConfig.job][i.itemConfig.subType][ItemConfig.calcItemLevel(i)]=!0))}),t},t.prototype.getOutEquips=function(e){void 0===e&&(e=!0);for(var t=this.getBagSortQualityEquips(5,0,1,this.normalEquipSmeltFilter),i=[],o=[],s=(GameLogic.ins().actorModel.level,UserZs.ins().lv,SubRoles.ins().subRolesLen),n=0;s>n;n++)for(var r=SubRoles.ins().getSubRoleByIndex(n),a=r.getEquipLen(),l=0;a>l;l++){var h=r.getEquipByIndex(l);h.item.itemConfig&&this.addOneEquipToList(o,h,l+1)}for(var c,n=0;n<t.length;n++){var u=t[n];if(c=this.checkEquipsIsGood(o,this.cloneItemDataInfo(u)),c&&(!UserEquip.ins().checkEquipsIsWear(c)&&c.itemConfig.quality<4&&i.push(c),!UserEquip.ins().checkEquipsIsWear(c)&&c.itemConfig.quality<=5&&7==c.itemConfig.type&&i.push(c)),i.length>=Const.SMELT_COUNT&&e)break}return this.upLevelEquips=[],i},t.prototype.creatListLength=function(e){if(e.length<Const.SMELT_COUNT)for(var t=0;t<Const.SMELT_COUNT;t++)void 0==e[t]&&(e[t]=null)},t.prototype.checkUpLevelEquips=function(e){var t=e.itemConfig.job,i=e.itemConfig.subType,o=e.itemConfig.zsLevel,s=e.itemConfig.level;this.upLevelEquips||(this.upLevelEquips=[]),this.upLevelEquips[t]||(this.upLevelEquips[t]=[]),this.upLevelEquips[t][i]||(this.upLevelEquips[t][i]=[]),this.upLevelEquips[t][i][o]||(this.upLevelEquips[t][i][o]=[]);var n;if(4==i||5==i)if(this.upLevelEquips[t][i][o][s]){if(n=this.upLevelEquips[t][i][o][s][0]){if(n=this.upLevelEquips[t][i][o][s][1]){var r=void 0;return r=this.checkEquipGetBest(n,e),n=this.upLevelEquips[t][i][o][s][0],r=this.checkEquipGetBest(n,e),r==n&&(this.upLevelEquips[t][i][o][s][0]=e),r}this.upLevelEquips[t][i][o][s][1]=e}}else this.upLevelEquips[t][i][o][s]=[],this.upLevelEquips[t][i][o][s][0]=e;else{if(n=this.upLevelEquips[t][i][o][s]){var r=this.checkEquipGetBest(n,e);return r==n&&(this.upLevelEquips[t][i][o][s]=e),r}this.upLevelEquips[t][i][o][s]=e}return null},t.prototype.checkUplevelBest=function(e,t){var i,o,s=e.itemConfig.job,n=e.itemConfig.subType,r=null;return t[s]||(t[s]=[]),4==n||5==n?(t[s][n]||(t[s][n]=[]),t[s][n][0]||(t[s][n][0]=null),t[s][n][1]||(t[s][n][1]=null),i=t[s][n][0],o=t[s][n][1],i&&(r=this.checkEquipGetBest(i,e)),o&&(r=this.checkEquipGetBest(o,r))):(t[s][n]||(t[s][n]=null),i=t[s][n],i&&(r=this.checkEquipGetBest(i,e))),r},t.prototype.checkEquipsIsGood=function(e,t){var i=GameLogic.ins().actorModel.level,o=UserZs.ins().lv,s=t.itemConfig.job,n=t.itemConfig.subType;if(t.itemConfig.level>i||t.itemConfig.zsLevel>o){var r=this.checkUplevelBest(t,e);return r&&!UserEquip.ins().checkEquipsIsWear(r)?r:this.checkUpLevelEquips(t)}if(!e[s]||!e[s][n])return this.addOneEquipToList(e,t),null;var a,l,h;if(4==n||5==n){if(!e[s][n][1])return e[s][n][1]=t,null;a=e[s][n][0],l=this.checkEquipGetBest(a,t),a==l&&(e[s][n][0]=t),a=e[s][n][1],h=this.checkEquipGetBest(a,l),a==h&&(e[s][n][1]=l)}else a=e[t.itemConfig.job][n],h=this.checkEquipGetBest(a,t),a==h&&(e[t.itemConfig.job][n]=t);return h},t.prototype.checkEquipGetBest=function(e,t){return null!=e&&null!=t&&e.point>=t.point?t:e},t.prototype.addOneEquipToList=function(e,t,i){void 0===i&&(i=0);var o;o=t instanceof EquipsData?this.cloneItemDataInfo(t.item):this.cloneItemDataInfo(t);var s=o.itemConfig.job;if(0==o.itemConfig.job);var n=o.itemConfig.subType;e[s]||(e[s]=[]),4==n||5==n?e[s][n]?e[s][n][1]=o:(e[s][n]=[],e[s][n][0]=o):e[s][n]=o},t.prototype.cloneItemDataList=function(e){for(var t=[],i=0;i<e.length;i++){var o=new ItemData;o.handle=e[i].handle,o.configID=e[i].configID,o.att=e[i].att,o.itemConfig=e[i].itemConfig,o.count=e[i].count,t.push(o)}return t},t.prototype.cloneItemDataInfo=function(e){var t=new ItemData;return t.handle=e.handle,t.configID=e.configID,t.att=e.att,t.itemConfig=e.itemConfig,t.count=e.count,t},t.prototype.getBagGoodsBySort=function(){if(this.bagModel[t.BAG_TYPE_OTHTER])return this.bagModel[t.BAG_TYPE_OTHTER];var e=this.bagModel[t.BAG_TYPE_OTHTER].sort(function(e,t){return e.configID>t.configID?1:e.configID<t.configID?-1:0});return e},t.prototype.getBagGoodsByType=function(e){var i=this.bagModel[t.BAG_TYPE_OTHTER],o=[];for(var s in i)i[s].itemConfig.type==e&&o.push(i[s]);return o},t.prototype.getBagXinfaRuleOut=function(){var e=this.bagModel[t.BAG_TYPE_OTHTER],i=[];for(var o in e){var s=MiJiSkillConfig.getXinFaByItemId(e[o].configID);2==e[o].itemConfig.type&&11!=s.typelevel&&i.push(e[o])}return i},t.prototype.getBagXinFaByLevel=function(e,i){var o=this.bagModel[t.BAG_TYPE_OTHTER],s=[];for(var n in o)if(2==o[n].itemConfig.type){var r=MiJiSkillConfig.getXinFaByItemId(o[n].configID);if(r.typelevel==e)if(-1==i.indexOf(o[n].configID))s.push(o[n]);else{for(var a=o[n].count,l=0;3>l;l++)o[n].configID==i[l]&&a--;a>0&&s.push(o[n])}}return s},t.prototype.getBagXinFaAutoByLevel=function(e){var i=this.bagModel[t.BAG_TYPE_OTHTER],o=[];for(var s in i)if(2==i[s].itemConfig.type){var n=MiJiSkillConfig.getXinFaByItemId(i[s].configID);if(n.typelevel==e)for(var r=i[s].count,a=0;r>a;a++)o.push(i[s].configID)}return o},t.prototype.getBagGoodsByZhuanZhi=function(e,i,o){var s=this.bagModel[t.BAG_TYPE_EQUIP],n=[];for(var r in s)s[r].itemConfig.type==e&&s[r].itemConfig.subType==i&&s[r].itemConfig.job==o&&Checker.Level(s[r].itemConfig.zsLevel,s[r].itemConfig.level,!1)&&n.push(s[r]);return n},t.prototype.getBagGoodsByMountEquip=function(e,i,o){var s=this.bagModel[t.BAG_TYPE_EQUIP],n=[];for(var r in s)s[r].itemConfig.type!=e||s[r].itemConfig.subType!=i||s[r].itemConfig.job!=o&&0!=s[r].itemConfig.job||n.push(s[r]);return n},t.prototype.getBagEquipBySort=function(e){var i=[],o=this.bagModel[t.BAG_TYPE_EQUIP];for(var s in o)GlobalConfig.itemConfig[o[s].configID].quality==e&&i.push(o[s]);return i},t.prototype.getBagEquipByLevelSort=function(e){var i=[];if(this.bagModel[t.BAG_TYPE_EQUIP]){var o=this.bagModel[t.BAG_TYPE_EQUIP],s=null,n=null;for(var r in o)s=o[r],n=GlobalConfig.itemConfig[s.configID],n&&n.quality==e&&0==n.type&&i.push(s)}return i},t.prototype.getBagEquipByZhuanZhiSplit=function(){var e=[],i=this.bagModel[t.BAG_TYPE_EQUIP];if(i){var o=null;for(var s in i)o=i[s],o.itemConfig&&o.itemConfig.type==ItemType.ZHUANZHI&&e.push(o)}return e},t.prototype.getBagEquipByOrangeSplit=function(e){var i=[],o=this.bagModel[t.BAG_TYPE_EQUIP];if(o){var s=null;for(var n in o)s=o[n],s.itemConfig&&s.itemConfig.quality==e&&0==s.itemConfig.type&&i.push(s)}return i},t.prototype.getBagGoodsByHandle=function(e,t){for(var i=this.bagModel[e],o=0;o<i.length;o++)if(i[o].handle==t)return i[o];return null},t.prototype.getHuntGoodsBySort=function(e){void 0===e&&(e=t.BAG_TYPE_TREASUREHUNT);var i=egret.getTimer(),o=[];if(this.bagModel[e])return this.bagModel[e];this.bagModel[e]&&(o=this.bagModel[e].sort(function(e,t){if(e.itemConfig.type<t.itemConfig.type)return 1;if(e.itemConfig.type>t.itemConfig.type)return-1;if(e.itemConfig.type){if(e.configID>=t.configID)return 1;if(e.configID<t.configID)return-1}else{if(ItemConfig.calculateBagItemScore(e)>=ItemConfig.calculateBagItemScore(t))return-1;if(ItemConfig.calculateBagItemScore(e)<ItemConfig.calculateBagItemScore(t))return 1}return 0}));var s=egret.getTimer();return console.log("获取寻宝仓库排序 = "+(s-i)),o},t.prototype.getWingZhuEquip=function(){var e=this,t=this.getBagSortQualityEquips(5,0,0,this.otherEquipSmeltFilter),i=[];if(t.length>0){t.sort(this.sort1);for(var o=[],s=SubRoles.ins().getSubRoleByIndex(0).wingsData.equipsLen,n=0;s>n;n++)o[n]=[];t.forEach(function(t){if(null!=e.updateWingEquip(t))i.push(t);else{var s=(o[t.itemConfig.subType][t.itemConfig.level]||0)+1;3>=s?o[t.itemConfig.subType][t.itemConfig.level]=s:i.push(t)}})}return i},t.prototype.updateWingEquip=function(e){for(var t=0,i=SubRoles.ins().subRolesLen,o=0;i>o;o++)for(var s=SubRoles.ins().getSubRoleByIndex(o).wingsData,n=s.equipsLen,r=0;n>r;r++){var a=s.getEquipByIndex(r);0!=a.configID&&e.itemConfig.subType==a.itemConfig.subType&&ItemConfig.calculateBagItemScore(e)<=ItemConfig.calculateBagItemScore(a)&&t++}return t>=i?e:null},t.prototype.getIsExitUsedItem=function(){for(var e=this.bagModel[t.BAG_TYPE_OTHTER],i=0;i<e.length;i++)if(e[i].getCanbeUsed())return!0;return!1},t.prototype.calculationScore=function(e){for(var t,i=0,o=SubRoles.ins().subRolesLen,s=0;o>s;s++){var n=SubRoles.ins().getSubRoleByIndex(s);if(n.job==e.itemConfig.job)for(var r=n.getEquipLen(),a=0;r>a;a++)t=n.getEquipByIndex(a).item,t&&t.itemConfig&&t.itemConfig.subType==e.itemConfig.subType&&(i=0==i?t.point:Math.min(t.point,i))}var l=e.point-i;return l},t.prototype.getBagGoodsById=function(e,t){for(var i=this.bagModel[e],o=0;o<i.length;o++)if(i[o].itemConfig.id==t)return i[o];return null},t.prototype.useRenameItem=function(e,t){ViewManager.ins().open(RenameWin)},t.prototype.UseCallBoss=function(e,t){},t.getAttrPower=function(e){null==this.attrPowerConfig&&(this.attrPowerConfig=GlobalConfig.ins("AttrPowerConfig"));for(var t=0,i=[],o=0;o<e.length;o++)null!=this.attrPowerConfig[e[o].type]&&(t+=(void 0==e[o].value?0:e[o].value)*this.attrPowerConfig[e[o].type].power,i[e[o].type]=e[o].value);return t+=(i[2]?i[2]:0)*(i[11]?i[11]:0)/1e4*this.attrPowerConfig[2].power+(i[4]?i[4]:0)*(i[12]?i[12]:0)/1e4*this.attrPowerConfig[4].power,Math.floor(t/100)},t.CheckEnough=function(e,i){var o=t.ins().getBagGoodsCountById(0,e);if(i>o){var s=GlobalConfig.itemConfig[e];return s&&UserTips.ins().showTips(s.name+"数量不足"),!1}return!0},t.prototype.setNeedItem=function(e,i,o,s,n,r,a){void 0===o&&(o=22),void 0===s&&(s=16),void 0===n&&(n=3881787),void 0===r&&(r=0),void 0===a&&(a=16777215);for(var l=[],h=[],c=i.numChildren,u=0;c>u;u++){var d=i.removeChildAt(0);d&&d instanceof eui.Image&&l.push(d),d&&d instanceof eui.Label&&h.push(d)}for(var u=0;u<e.length;u++){var p=void 0;p=l[u]?l[u]:new eui.Image,p.width=o,p.height=o;var f="";if(2==e[u].id)p.source="little_icon_03_png";else if(1==e[u].id)p.source="little_icon_02_png";else{var g=GlobalConfig.ins("ItemConfig")[e[u].id],_=0;g&&0==g.type&&(_=1),f=CommonUtils.overLength(t.ins().getBagGoodsCountById(_,e[u].id))+"/",g&&(p.source=g.icon+"_png")}var m=void 0;m=h[u]?h[u]:new eui.Label,m.height=o,m.verticalAlign="middle",m.size=s,m.textColor=n,m.stroke=r,m.strokeColor=a;var v=CommonUtils.overLength(e[u].count);m.text=f+v,i.addChild(p),i.addChild(m)}},t.EMPTY_TABLE=[],t.BAG_TYPE_OTHTER=0,t.BAG_TYPE_EQUIP=1,t.BAG_TYPE_TREASUREHUNT=2,t.BAG_THE_LUCK=3,t.BAG_TYPE_VIPTREASUREHUNT=5,t.BAG_ENOUGH=20,t}(BaseSystem);__reflect(UserBag.prototype,"UserBag"),MessageCenter.compile(UserBag);var BagType;!function(e){e[e.TYPE0=0]="TYPE0",e[e.TYPE1=1]="TYPE1",e[e.TYPE4=4]="TYPE4"}(BagType||(BagType={})),window.UserBag=UserBag;var AttrTipsWin=function(e){function t(){var t=e.call(this)||this;return t._equipPower=0,t._totalPower=0,t.maxNum=0,t.skinName="AttrTipsSkin",t.itemIcon.imgJob.visible=!1,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0==UserBag.ins().eatCnt&&UserBag.ins().sendGetDanyaoMsg();var i=e[0],o=e[1],s=e[2],n=e[3];this.useNum=1,this.numLabel.text=this.useNum+"",this.colorCanvas.addEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this),this.minBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.maxBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.sub1Btn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.add1Btn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.useBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),MessageCenter.addListener(UserBag.postUseItemSuccess,this.useSuccess,this),this.numLabel.addEventListener(egret.Event.CHANGE,this.onTxtChange,this),this.setData(i,o,s,n)},t.prototype.close=function(){this.colorCanvas.removeEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this),this.minBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.maxBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.sub1Btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.add1Btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.useBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.numLabel.removeEventListener(egret.Event.CHANGE,this.onTxtChange,this)},t.prototype.otherClose=function(e){ViewManager.ins().close(this)},t.prototype.setData=function(e,t,i,o){var s,n=o instanceof ItemData?o:void 0;this.goodsId=i,this._totalPower=0,s=GlobalConfig.itemConfig[i],this.config=s,this.nameLabel.text=s.name,this.nameLabel.textColor=ItemBase.QUALITY_COLOR[s.quality],this.itemIcon.setData(s),(n instanceof ItemData||null!=s)&&(this.lv.text=s.zsLevel>0?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[s.zsLevel]):LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[s.level]),s.zsLevel>0?this.lv.textColor=UserZs.ins().lv<s.zsLevel?16282482:65280:this.lv.textColor=GameLogic.ins().actorModel.level<s.lv?16282482:65280,this.career.text=Role.getJobNameByJob(s.job));var r=1;this.attr1.visible=!1,this.attr2.visible=!1,this.attr3.visible=!1,this.attr4.visible=!1;for(var a=[],l=0;l<s.useArg.length;l++){var h="",c="",u=s.useArg;c+=AttributeData.getAttrStrByType(u[l].type)+": ",h+=u[l].value;var d=new AttributeData;if(d.type=u[l].type,d.value=u[l].value,a.push(d),void 0!=n)for(var p=n.att,f=0;f<p.length;f++)if(p[f].type==u[l].type){h+=" +"+p[f].value,d.value+=p[f].value;break}this["attr"+r].textFlow=[{text:c,style:{textColor:5461335}},{text:h,style:{textColor:16760614}}],this["attr"+r].visible=!0,r++}this._equipPower=Math.floor(UserBag.getAttrPower(s.useArg)),this._totalPower+=this._equipPower,this.powerLabel.text=GlobalConfig.jifengTiaoyueLg.st100094+this._totalPower.toString(),this.score.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100070+": ",style:{textColor:5461335}},{text:this._totalPower.toString(),style:{textColor:16760614}}],this.setUseData(e,i)},t.prototype.setUseData=function(e,t){var i=GlobalConfig.itemConfig[t],o=UserBag.ins().getBagGoodsByTypeAndId(e,t);if(this.m_NumLab.text=o.count+"",this.maxNum=o.count,this.maxNum>100&&(this.maxNum=100),this.configUseType=i.useType,i.useType==ItemUseType.TYPE03){var s=GlobalConfig.ins("ShuXingDanjcConfig"),n=UserBag.ins().eatCnt;s.Num==n&&(this.useNum=0,this.numLabel.text=this.useNum+"")}},t.prototype.onTxtChange=function(e){var t=Number(this.numLabel.text);t>this.maxNum&&(t=this.maxNum),this.useNum=t,this.numLabel.text=this.useNum+""},t.prototype.onTap=function(e){switch(e.target){case this.minBtn:if(this.configUseType==ItemUseType.TYPE03){var t=UserBag.ins().eatCnt,i=GlobalConfig.ins("ShuXingDanjcConfig");i.Num==t?(this.useNum=0,UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101478)):this.useNum=1}else this.useNum=1;break;case this.maxBtn:if(this.configUseType==ItemUseType.TYPE03){var t=UserBag.ins().eatCnt,i=GlobalConfig.ins("ShuXingDanjcConfig");if(i)if(i.Num==t)UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101478);else{var o=i.Num-t;this.useNum=this.maxNum>o?o:this.maxNum}}else this.useNum=this.maxNum;break;case this.sub1Btn:if(this.configUseType==ItemUseType.TYPE03){var t=UserBag.ins().eatCnt,i=GlobalConfig.ins("ShuXingDanjcConfig");i.Num==t?(this.useNum=0,UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101478)):(this.useNum--,this.useNum<=0&&(this.useNum=1))}else this.useNum--,this.useNum<=0&&(this.useNum=1);break;case this.add1Btn:if(this.configUseType==ItemUseType.TYPE03){var t=UserBag.ins().eatCnt,i=GlobalConfig.ins("ShuXingDanjcConfig");i&&(this.useNum+t<i.Num?(this.useNum++,this.useNum>this.maxNum&&(this.useNum=this.maxNum)):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101478))}else this.useNum++,this.useNum>this.maxNum&&(this.useNum=this.maxNum);break;case this.useBtn:if(this.configUseType==ItemUseType.TYPE03){var t=UserBag.ins().eatCnt,i=GlobalConfig.ins("ShuXingDanjcConfig");if(this.useNum>i.Num-t)UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101479),this.useNum=i.Num-t;else if(i.Num==t)UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101478);
else{for(var s=SubRoles.ins().subRolesLen,n=!1,r=0;s>r;r++){var a=SubRoles.ins().getSubRoleByIndex(r);if(this.config.job==a.job){n=!0;break}}1==n?UserBag.ins().sendUseItem(this.goodsId,this.useNum)&&ViewManager.ins().close(ItemUseTipsWin):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101480)}}else UserBag.ins().sendUseItem(this.goodsId,this.useNum)&&ViewManager.ins().close(ItemUseTipsWin)}this.numLabel.text=this.useNum+""},t.prototype.useSuccess=function(){var e=UserBag.ins().getBagItemById(this.goodsId);e?(this.setUseData(0,this.goodsId),this.onTxtChange(null)):ViewManager.ins().close(this)},t}(BaseEuiView);__reflect(AttrTipsWin.prototype,"AttrTipsWin"),ViewManager.ins().reg(AttrTipsWin,LayerManager.UI_Popup),window.AttrTipsWin=AttrTipsWin;var BagAddItemWarn=function(e){function t(){var i=e.call(this)||this;return i.onTap=function(e){switch(e.currentTarget){case this.decBtn:this.setCount(Number(this.count.text)-5);break;case this.addBtn:this.setCount(Number(this.count.text)+5);break;case this.sureBtn:if(GameLogic.ins().actorModel.yb<this.price.price){UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100014);break}UserBag.ins().sendAddBagGrid(Number(this.count.text)/5);case this.cancelBtn:ViewManager.ins().close(t)}},i}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="OpenCellSkin",this.price.setType(MoneyConst.yuanbao)},t.prototype.open=function(){this.addTouchEvent(this,this.onTap,this.decBtn),this.addTouchEvent(this,this.onTap,this.addBtn),this.addTouchEvent(this,this.onTap,this.sureBtn),this.addTouchEvent(this,this.onTap,this.cancelBtn),this.dialogCloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.setCount(5)},t.prototype.close=function(){this.dialogCloseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.removeEvents()},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.setCount=function(e){null==this.bagBaseConfig&&(this.bagBaseConfig=GlobalConfig.ins("BagBaseConfig"));var t=this.bagBaseConfig,i=GlobalConfig.ins("BagExpandConfig"),o=CommonUtils.getObjectLength(i),s=(UserBag.ins().bagNum-t.baseSize)/t.rowSize,n=(o-s)*t.rowSize;5>e?(e=5,UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101685)):e>n&&(e=n,UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101686)),this.count.text=""+e;for(var r=0,a=e/t.rowSize,l=1;a>=l;l++)r+=i[s+l].cost;this.price.setPrice(r)},t}(BaseEuiPanel);__reflect(BagAddItemWarn.prototype,"BagAddItemWarn"),ViewManager.ins().reg(BagAddItemWarn,LayerManager.UI_Popup),window.BagAddItemWarn=BagAddItemWarn;var BagWin=function(e){function t(){var t=e.call(this)||this;return t.commonWindowBg=null,t.viewStack=null,t.itemList=null,t.itemListGoods=null,t.itemScroller=null,t.itemGoodsScroller=null,t.smeltBtn=null,t.addBtn=null,t.itemGadScroller=null,t.isUPSort=!1,t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101240,t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="BagSkin",this.itemList.itemRenderer=BagItemBase,this.itemListGoods.itemRenderer=BagItemBase,this.itemScroller.viewport=this.itemList,this.itemGoodsScroller.viewport=this.itemListGoods,this.itemListGad.itemRenderer=GadBagItem,this.listData=new eui.ArrayCollection,this.itemListGad.dataProvider=this.listData,this.itemGadScroller.viewport=this.itemListGad,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101237,this.smeltBtn.label=GlobalConfig.jifengTiaoyueLg.st101238,this.m_BagGroup.name=GlobalConfig.jifengTiaoyueLg.st100665,this.m_ItemGroup.name=GlobalConfig.jifengTiaoyueLg.st101241,this.m_GadGroup.name=GlobalConfig.jifengTiaoyueLg.st100305,this.m_SortLab.text=GlobalConfig.jifengTiaoyueLg.st100332,this.m_LvTog.label=GlobalConfig.jifengTiaoyueLg.st100333,this.m_StarTog.label=GlobalConfig.jifengTiaoyueLg.st100334,this.m_PointTog.label=GlobalConfig.jifengTiaoyueLg.st100335},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.SetViewStack(this.viewStack),this.commonWindowBg.OnAdded(this),this.addTouchEvent(this,this.onClick,this.smeltBtn),this.addTouchEvent(this,this.onClick,this.addBtn),this.addTouchEvent(this,this.onClickSort,this.m_SortGroup),this.addTouchEvent(this,this.onClickTog,this.m_LvTog),this.addTouchEvent(this,this.onClickTog,this.m_StarTog),this.addTouchEvent(this,this.onClickTog,this.m_PointTog),this.observe(UserBag.postUseItemSuccess,this.setBagData),this.observe(UserBag.postHcItemSuccess,this.setBagData),this.observe(UserBag.postBagVolAdd,this.setCount),MessageCenter.ins().addListener(GadEvent.GAD_DATAUPDATE_MSG,this.setGadBagData,this),this.setBagData(),this.setGadBagData();var i=e[0],o=this.OnOpenIndex(i);this.commonWindowBg.OnAdded(this,o?i:0)},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),this.smeltBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),MessageCenter.ins().removeListener(GadEvent.GAD_DATAUPDATE_MSG,this.setBagData,this),ViewManager.ins().close(t),MessageCenter.ins().removeAll(this),this.removeEvents(),this.removeObserve();var e=ViewManager.ins().getView(UIView2);e&&e.closeNav(UIView2.NAV_MYBAG)},t.prototype.destoryView=function(){e.prototype.destoryView.call(this);for(var t=0;t<this.itemList.numElements;t++)this.itemList.getElementAt(t)&&this.itemList.getElementAt(t).destroy();for(var t=0;t<this.itemListGoods.numElements;t++)this.itemListGoods.getElementAt(t)&&this.itemListGoods.getElementAt(t).destroy();for(var t=0;t<this.itemListGad.numElements;t++)this.itemListGad.getElementAt(t)&&this.itemListGad.getElementAt(t).destroy()},t.prototype.onClick=function(e){switch(e.currentTarget){case this.smeltBtn:ViewManager.ins().close(t),ViewManager.ins().open(SmeltEquipTotalWin);break;case this.addBtn:null==this.bagBaseConfig&&(this.bagBaseConfig=GlobalConfig.ins("BagBaseConfig"));var i=this.bagBaseConfig,o=(UserBag.ins().bagNum-i.baseSize)/i.rowSize;o==CommonUtils.getObjectLength(GlobalConfig.ins("BagExpandConfig"))?UserTips.ins().showTips(StringUtils.addColor(GlobalConfig.jifengTiaoyueLg.st101239,16282482)):ViewManager.ins().open(BagAddItemWarn)}},t.prototype.setCount=function(){this.itemCount.text=UserBag.ins().getBagItemNum()+"/"+UserBag.ins().getMaxBagRoom()},t.prototype.setBagData=function(){this.itemList.dataProvider=new eui.ArrayCollection(UserBag.ins().getBagSortQualityEquips(5,0,1)),this.itemListGoods.dataProvider=new eui.ArrayCollection(UserBag.ins().getBagGoodsBySort()),this.setCount(),UserBag.ins().getBagItemNum()/UserBag.ins().getMaxBagRoom()>=.8||UserBag.ins().getWingZhuEquip().length>=10?(UIHelper.ShowRedPoint(this.smeltBtn,!0),this.commonWindowBg.ShowTalRedPoint(0,!0)):(UIHelper.ShowRedPoint(this.smeltBtn,!1),this.commonWindowBg.ShowTalRedPoint(0,!1)),this.commonWindowBg.ShowTalRedPoint(1,UserBag.ins().getIsExitUsedItem())},t.prototype.setGadBagData=function(){var e=GadModel.getInstance,t=e.gadBagDic.values;1==this.m_LvTog.selected?1==this.isUPSort?t.sort(this.sorUpLevel):t.sort(this.sorDownLevel):1==this.m_StarTog.selected?1==this.isUPSort?t.sort(this.sorUpStar):t.sort(this.sorDownStar):1==this.m_PointTog.selected&&(1==this.isUPSort?t.sort(this.sorUpSlot):t.sort(this.sorDownSlot));var i=e.getChangeGadItemData(t);this.listData.replaceAll(i)},t.prototype.onClickSort=function(){this.isUPSort=!this.isUPSort,this.isUPSort?(this.m_SortImg.source="rect_btn_39_28_png",this.m_SortLab.text=GlobalConfig.jifengTiaoyueLg.st100331):(this.m_SortImg.source="rect_btn_39_28_02_png",this.m_SortLab.text=GlobalConfig.jifengTiaoyueLg.st100332),this.setGadBagData()},t.prototype.onClickTog=function(e){for(var t=0;t<this.m_TogGroup.numChildren;t++){var i=this.m_TogGroup.getChildAt(t);i&&i instanceof eui.ToggleButton&&1==i.selected&&(i.touchEnabled=!0,i.selected=!1)}var o=e.currentTarget;o.touchEnabled=!1,o.selected=!0,this.setGadBagData()},t.prototype.sorUpLevel=function(e,t){return e.level-t.level},t.prototype.sorDownLevel=function(e,t){return t.level-e.level},t.prototype.sorUpStar=function(e,t){return e.star-t.star},t.prototype.sorDownStar=function(e,t){return t.star-e.star},t.prototype.sorUpSlot=function(e,t){return e.slot-t.slot},t.prototype.sorDownSlot=function(e,t){return t.slot-e.slot},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(BagWin.prototype,"BagWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(BagWin,LayerManager.UI_Main),window.BagWin=BagWin;var EquipDetailedWin=function(e){function t(){var t=e.call(this)||this;return t._bottomY=0,t._equipPower=0,t._totalPower=0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="EquipTipsSkin",this.itemIcon.imgJob.visible=!1,this.replaceBtn.label=GlobalConfig.jifengTiaoyueLg.st100318,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101493,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101494,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st101495},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1],s=e[2],n=e[3];this.roleModel=e[4],this.typeIndex=e[5],null==this.typeIndex&&(this.replaceBtn.visible=!1),this.addEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this),this.setData(i,o,s,n)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this)},t.prototype.otherClose=function(e){e.target==this.replaceBtn&&GameGlobal.MessageCenter.dispatch(MessageDef.FUWEN_EQUIP_REPLACE,this.typeIndex),ViewManager.ins().close(t)},t.prototype.setData=function(e,t,i,o){var s,n=o instanceof ItemData?o:void 0;if(this._totalPower=0,void 0!=t&&void 0==n){if(n=UserBag.ins().getBagGoodsByHandle(e,t),!n)for(var r=SubRoles.ins().subRolesLen,a=0;r>a;a++)for(var l=SubRoles.ins().getSubRoleByIndex(a),h=l.getEquipLen(),c=0;h>c;c++)if(l.getEquipByIndex(c).item.handle==t){n=l.getEquipByIndex(c).item;break}if(!n)for(var u=Shop.ins().shopData,r=u.getShopEquipDataLength(),d=null,a=0;r>a;a++)d=u.getShopEquipDataByIndex(a),null!=d&&t==d.item.handle&&(n=d.item);n||new Error("请检查handle是否传错！"),s=n.itemConfig,i=n.configID}else s=GlobalConfig.itemConfig[i];if(this.nameLabel.text=s.name,this.nameLabel.textColor=ItemBase.QUALITY_COLOR[s.quality],this.itemIcon.setData(s),n instanceof ItemData||null!=s){if(n&&n.itemConfig.type==ItemType.WING){this.levelKey.text=GlobalConfig.jifengTiaoyueLg.st101481,this.type.text=Role.getWingEquipNameByType(s.subType),this.lv.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101482,[s.level+1]),this.lv.textColor=16282482;for(var r=SubRoles.ins().subRolesLen,a=0;r>a;a++)if(SubRoles.ins().getSubRoleByIndex(a).wingsData.lv>=s.level){this.lv.textColor=65280;break}}else{if(this.levelKey.text=s.zsLevel>0?GlobalConfig.jifengTiaoyueLg.st100465+"：":GlobalConfig.jifengTiaoyueLg.st100333+"：",s.type==ItemType.FUWEN)this.type.text=Role.getFuwenEquipNameByType(s.subType);else if(7==s.type)this.type.text=s.name;else if(s.type==ItemType.MOUNTEQUIP){var p="";switch(s.subType){case 1:p=GlobalConfig.jifengTiaoyueLg.st101483;break;case 2:p=GlobalConfig.jifengTiaoyueLg.st101484;break;case 3:p=GlobalConfig.jifengTiaoyueLg.st101485;break;case 4:p=GlobalConfig.jifengTiaoyueLg.st101486}this.type.text=p,this.levelKey.text=GlobalConfig.jifengTiaoyueLg.st101481}else this.type.text=Role.getEquipNameByType(s.subType);s.type==ItemType.MOUNTEQUIP?this.lv.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101864,[s.zsLevel]):(this.lv.text=s.zsLevel>0?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[s.zsLevel]):LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[s.level]),s.zsLevel>0?this.lv.textColor=UserZs.ins().lv<s.zsLevel?16282482:36642:this.lv.textColor=GameLogic.ins().actorModel.level<s.lv?16282482:36642)}this.career.text=Role.getJobNameByJob(s.job)}var f=1;this.attr1.visible=!1,this.attr2.visible=!1,this.attr3.visible=!1,this.attr4.visible=!1,null==this.EquipConfig&&(this.EquipConfig=GlobalConfig.equipConfig);var g=this.EquipConfig[i],_=[];for(var m in Role.translate)if(!(g[m]<=0)){var v="",y="";y+=AttributeData.getAttrStrByType(Role.getAttrTypeByName(m))+": ",v+=g[m];var b=new AttributeData;if(b.type=Role.getAttrTypeByName(m),b.value=g[m],_.push(b),void 0!=n)for(var C=n.att,T=0;T<C.length;T++)if(C[T].type==Role.getAttrTypeByName(m)){v+=" +"+C[T].value+"%",b.value+=b.value*(.01*C[T].value);break}this["attr"+f]&&(this["attr"+f].textFlow=[{text:y,style:{textColor:Color.Black}},{text:v,style:{textColor:Color.Green}}],this["attr"+f].visible=!0),f++}for(this.baseAttr.visible=this.attr1.visible,this._equipPower=Math.floor(UserBag.getAttrPower(_)),this._totalPower+=this._equipPower,this._bottomY=1==f?this.attr1.y:this["attr"+(f-1)].y+this["attr"+(f-1)].height;this.forgeGroup.numElements;)this.forgeGroup.removeChildAt(0);if(this.roleModel)for(var r=this.roleModel.getEquipLen(),a=0;r>a;a++){var S=this.roleModel.getEquipByIndex(a);if(S.item.handle==t){this.setForge(S,a);break}}if(s.type==ItemType.FUWEN||s.type==ItemType.ZHUANZHI||s.type==ItemType.EQUIP){if(s.quality>=4){null==this.EquipConfig&&(this.EquipConfig=GlobalConfig.equipConfig);var w=this.EquipConfig[s.id];if(w){var I=w.baseAttr?w.baseAttr[0]:null;if(I){var G=I.type;I.value;if(G){var L=new eui.Image;L.source="base_2_1_01_png",L.width=291,L.x=97,L.y=this._bottomY+=10,this.forgeGroup.addChild(L);var P=new eui.Label;P.fontFamily="Microsoft YaHei",P.size=16,P.textColor=5461335,P.width=250,P.x=113,P.y=this._bottomY+=10,P.textFlow=TextFlowMaker.generateTextFlow(AttributeData.getAttrStrByType(G)+StringUtils.addColor(AttributeData.getAttStrByType(I),Color.Green)),this.forgeGroup.addChild(P),this._bottomY+=P.textHeight}}}}}else if(s.desc){var L=new eui.Image;L.source="base_2_1_01_png",L.width=291,L.x=97,L.y=this._bottomY+=10,this.forgeGroup.addChild(L);var P=new eui.Label;P.fontFamily="Microsoft YaHei",P.size=16,P.textColor=5461335,P.width=250,P.x=113,P.y=this._bottomY+=10,P.textFlow=TextFlowMaker.generateTextFlow(s.desc),this.forgeGroup.addChild(P),this._bottomY+=P.textHeight}null!=g.baseAttr&&(this._totalPower+=Math.floor(UserBag.getAttrPower(g.baseAttr))),this.background.height=this._bottomY+(this.roleModel?12:60),this.group.y=400-this.background.height/2,this.powerLabel.y=this.group.y+166,this.powerLabel.label.text=this._totalPower,this.score.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100070+": ",style:{textColor:5461335}},{text:this._totalPower.toString(),style:{textColor:16760614}}],this.replaceBtn.y=this._bottomY+15},t.prototype.setForge=function(e,t){for(var i=0,o=0;4>o;o++){switch(o){case 0:i=e.strengthen;break;case 1:i=e.gem;break;case 2:i=e.zhuling;break;case 3:i=e.tupo}if(i>0){var s=UserForge.ins().getForgeConfigByPos(t,i,o);this.addTips(s.attr,o,i);var n=0;n=3==o?Math.floor(this._equipPower*(Number(s.attr)/100)):Math.floor(UserBag.getAttrPower(s.attr)),this._totalPower+=n}}},t.prototype.addTips=function(e,t,i){var o=new eui.Image;o.source="base_2_1_01_png",o.width=291,o.x=97,o.y=this._bottomY+10,this.forgeGroup.addChild(o);var s=new eui.Label;s.fontFamily="Microsoft YaHei",s.size=16,s.textColor=5461335,s.x=113,s.y=o.y+14,this.forgeGroup.addChild(s);var n=new eui.Label;n.fontFamily="Microsoft YaHei",n.size=16,n.lineSpacing=8,n.textColor=5461335,n.x=129,n.y=s.y+24,this.forgeGroup.addChild(n);var r;switch(t){case 0:s.text=GlobalConfig.jifengTiaoyueLg.st101487,r=AttributeData.getAttrStrAdd(e,11);break;case 1:s.text=GlobalConfig.jifengTiaoyueLg.st101488;for(var a="",l=1;5>l;l++){var h=new eui.Image;h.x=n.x,h.y=n.y-2+23*(l-1),h.width=h.height=24,this.forgeGroup.addChild(h);var c=AttributeData.getAttrStrByType(e[0].type);e.length>l?(a+="|C:0x2ECA22&T:Lv20|\n",i-=20,h.source="bs_"+e[0].type+"10_png"):e.length==l?(a+=20==i?"|C:0x2ECA22&T:Lv20|\n":"Lv"+i+"\n",h.source="bs_"+e[0].type+i+"_png"):(5>l&&(a+="|C:0x909090&T:"),a+=c+GlobalConfig.jifengTiaoyueLg.st101489,h.source="bs_00_png")}var u=new eui.Label;u.fontFamily="Microsoft YaHei",u.size=16,u.textColor=5461335,u.lineSpacing=8,u.x=n.x+26,u.y=n.y,u.textFlow=TextFlowMaker.generateTextFlow(a),this.forgeGroup.addChild(u),n.x=u.x+38,n.height=u.height,r=AttributeData.getAttrStrAdd(e,15);break;case 2:s.text=GlobalConfig.jifengTiaoyueLg.st101490,r=AttributeData.getAttrStrAdd(e,12);break;case 3:s.text=GlobalConfig.jifengTiaoyueLg.st101491}3!=t?n.text=AttributeData.getAttStr(r,1):n.text=GlobalConfig.jifengTiaoyueLg.st101492+" +"+e+"%",this._bottomY=n.y+n.height},t}(BaseEuiPanel);__reflect(EquipDetailedWin.prototype,"EquipDetailedWin"),ViewManager.ins().reg(EquipDetailedWin,LayerManager.UI_Popup),window.EquipDetailedWin=EquipDetailedWin;var ItemDetailedWin=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ItemTipsSkin",this.itemIcon.imgJob.visible=!1,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101883,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101882},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var i=e[0],o=e[1],s=e[2],n=e[3];this.addEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this),null==n?this.setData(i,o,s):this.setMoneyData(n)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.removeEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this)},t.prototype.otherClose=function(e){ViewManager.ins().close(this)},t.prototype.setData=function(e,t,i){var o="";if(void 0==i){var s=UserBag.ins().getBagGoodsByTypeAndId(e,t);o=s?s.count+"":""}else o=i+"";var n=GlobalConfig.itemConfig[t];if(this.nameLabel.text=n.name,this.nameLabel.textColor=3093307,this.itemIcon.setData(n),n.level?this.lv.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[n.level]):this.lv.text="",this.num.text=o,this.description.textFlow=TextFlowMaker.generateTextFlow(n.desc),2==n.type){var r=MiJiSkillConfig.getXinFaByItemId(n.id);r&&(this.power.text=GlobalConfig.jifengTiaoyueLg.st100070+"："+r.power)}else this.power.text="";if(14==n.type){this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100315;var a=GlobalConfig.ins("COAwordproduceConfig")[t];a&&(this.num.text=a.site+GlobalConfig.jifengTiaoyueLg.st101967),this.m_StarGroup.visible=!0,GadModel.getInstance.setStarNum(n.quality,this.m_StarGroup,.8)}else this.m_StarGroup.visible=!1,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101883;this.BG.height=200+this.description.height},t.prototype.setMoneyData=function(e){var t=GlobalConfig.ins("LanResourcesConfig")[e];t&&(this.power.visible=!1,this.num.text="",this.m_Lan1.text=t.typeDes,this.lv.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[1]),this.description.text=t.describe,this.nameLabel.text=MoneyManger.MoneyConstToName(e),this.m_StarGroup.visible=!1,this.itemIcon.setItemImg(MoneyManger.MoneyConstToSource(e)),this.itemIcon.setItemBg(ResDataPath.GetItemQualityName(MoneyManger.MoneyConstToQuality(e))))},t}(BaseEuiPanel);__reflect(ItemDetailedWin.prototype,"ItemDetailedWin"),ViewManager.ins().reg(ItemDetailedWin,LayerManager.UI_Popup),window.ItemDetailedWin=ItemDetailedWin;var ItemHcTipsWin=function(e){function t(){var t=e.call(this)||this;return t.maxNum=0,t.skinName="ItemHcTipsSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.numLabel.restrict="0-9",this.itemIcon.imgJob.visible=!1,this.itemIcon1.imgJob.visible=!1,this.consumeLabel.consumeType=GlobalConfig.jifengTiaoyueLg.st101496},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1];this.goodsId=o,this.m_bg.init("ItemHcTipsWin",GlobalConfig.jifengTiaoyueLg.st101124),this.minBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.maxBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.sub1Btn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.add1Btn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.useBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),MessageCenter.addListener(UserBag.postHcItemSuccess,this.useSuccess,this),this.numLabel.addEventListener(egret.Event.CHANGE,this.onTxtChange,this),this.useNum=1,this.numLabel.text=this.useNum+"",this.setData(i,o)},t.prototype.close=function(){this.minBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.maxBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.sub1Btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.add1Btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.useBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.numLabel.removeEventListener(egret.Event.CHANGE,this.onTxtChange,this),MessageCenter.ins().removeAll(this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.onTxtChange=function(e){var t=Number(this.numLabel.text);t>this.maxNum&&(t=this.maxNum),this.useNum=t,this.numLabel.text=this.useNum+""},t.prototype.onTap=function(e){switch(e.target){case this.minBtn:this.useNum=1;break;case this.maxBtn:this.useNum=this.maxNum;break;case this.sub1Btn:this.useNum--,this.useNum<=0&&(this.useNum=1);break;case this.add1Btn:this.useNum++,this.useNum>this.maxNum&&(this.useNum=this.maxNum);break;case this.useBtn:UserBag.ins().sendHcItem(this.goodsId,this.useNum)}this.numLabel.text=this.useNum+""},t.prototype.useSuccess=function(){var e=UserBag.ins().getBagItemById(this.goodsId),i=GlobalConfig.itemConfig[this.goodsId],o=e?Math.floor(e.count/i.hcnumber):0;0>=o?ViewManager.ins().close(t):(this.setData(0,this.goodsId),this.onTxtChange(null))},t.prototype.setData=function(e,t){var i=UserBag.ins().getBagGoodsByTypeAndId(e,t);if(null!=i){var o=GlobalConfig.itemConfig[t],s=GlobalConfig.itemConfig[o.hcgenerate];this.nameLabel.text=o.name,this.nameLabel.textColor=ItemBase.QUALITY_COLOR[o.quality],this.nameLabel1.text=s.name,this.nameLabel1.textColor=ItemBase.QUALITY_COLOR[s.quality],this.itemIcon.setData(o),this.itemIcon1.setData(s),this.lv.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[o.level]),this.num.text=i.count+"",this.description.textFlow=TextFlowMaker.generateTextFlow(o.desc),this.consumeLabel.curValue=i.count,this.consumeLabel.consumeValue=o.hcnumber,this.maxNum=Math.floor(i.count/o.hcnumber),this.maxNum>100&&(this.maxNum=100),this.maxNum<=0&&(this.maxNum=1)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(ItemHcTipsWin.prototype,"ItemHcTipsWin"),window.ItemHcTipsWin=ItemHcTipsWin;var ItemUseTipsWin=function(e){function t(){var t=e.call(this)||this;return t.maxNum=0,t.bossBoxIdList=[ItemConst.SUMMON_BOSS_01,ItemConst.SUMMON_BOSS_02,ItemConst.SUMMON_BOSS_03],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ItemUseTipsSkin",this.numLabel.restrict="0-9",this.itemIcon.imgJob.visible=!1,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101853,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100923,this.useBtn.label=GlobalConfig.jifengTiaoyueLg.st100683,this.maxBtn.label=GlobalConfig.jifengTiaoyueLg.st101113,this.minBtn.label=GlobalConfig.jifengTiaoyueLg.st101114},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1];this.goodsId=o,this.m_bg.init("ItemUseTipsWin",GlobalConfig.jifengTiaoyueLg.st101497),this.minBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.maxBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sub1Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.add1Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.useBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.addListener(UserBag.postUseItemSuccess,this.useSuccess,this),this.numLabel.addEventListener(egret.Event.CHANGE,this.onTxtChange,this),this.useNum=1,this.numLabel.text=this.useNum+"",this.setData(i,o),this.isBossBox=-1!=this.bossBoxIdList.lastIndexOf(o)},t.prototype.close=function(){this.minBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.maxBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sub1Btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.add1Btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.useBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.numLabel.removeEventListener(egret.Event.CHANGE,this.onTxtChange,this),MessageCenter.ins().removeAll(this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.onTxtChange=function(e){var t=Number(this.numLabel.text);t>this.maxNum&&(t=this.maxNum),this.useNum=t,this.numLabel.text=this.useNum+""},t.prototype.onTap=function(e){switch(e.target){case this.minBtn:if(this.configUseType==ItemUseType.TYPE03){var i=UserBag.ins().eatCnt,o=GlobalConfig.ins("ShuXingDanjcConfig");o.Num==i?(this.useNum=0,UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101478)):this.useNum=1}else this.useNum=1;break;case this.maxBtn:if(this.configUseType==ItemUseType.TYPE03){var i=UserBag.ins().eatCnt,o=GlobalConfig.ins("ShuXingDanjcConfig");if(o)if(o.Num==i)UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101478);else{var s=o.Num-i;this.useNum=this.maxNum>s?s:this.maxNum}}else this.useNum=this.maxNum;break;case this.sub1Btn:if(this.configUseType==ItemUseType.TYPE03){var i=UserBag.ins().eatCnt,o=GlobalConfig.ins("ShuXingDanjcConfig");o.Num==i?(this.useNum=0,UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101478)):(this.useNum--,this.useNum<=0&&(this.useNum=1))}else this.useNum--,this.useNum<=0&&(this.useNum=1);break;case this.add1Btn:if(this.configUseType==ItemUseType.TYPE03){var i=UserBag.ins().eatCnt,o=GlobalConfig.ins("ShuXingDanjcConfig");o&&(this.useNum+i<o.Num?(this.useNum++,this.useNum>this.maxNum&&(this.useNum=this.maxNum)):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101478))}else this.useNum++,this.useNum>this.maxNum&&(this.useNum=this.maxNum);break;case this.useBtn:if(this.isBossBox)return ViewManager.ins().close(t),void ViewManager.ins().open(RandBossWin,this.goodsId);if(this.configUseType==ItemUseType.TYPE03){var i=UserBag.ins().eatCnt,o=GlobalConfig.ins("ShuXingDanjcConfig");if(this.useNum>o.Num-i)UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101479),this.useNum=o.Num-i;else if(o.Num==i)UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101478);else{for(var n=SubRoles.ins().subRolesLen,r=!1,a=0;n>a;a++){var l=SubRoles.ins().getSubRoleByIndex(a);if(this.config.job==l.job){r=!0;break}}1==r?UserBag.ins().sendUseItem(this.goodsId,this.useNum)&&ViewManager.ins().close(t):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101480)}}else UserBag.ins().sendUseItem(this.goodsId,this.useNum)&&ViewManager.ins().close(t)}this.numLabel.text=this.useNum+""},t.prototype.useSuccess=function(){var e=UserBag.ins().getBagItemById(this.goodsId);e?(this.setData(0,this.goodsId),this.onTxtChange(null)):ViewManager.ins().close(t)},t.prototype.setData=function(e,t){var i="",o=UserBag.ins().getBagGoodsByTypeAndId(e,t);if(null!=o){this.maxNum=o.count,this.maxNum>100&&(this.maxNum=100),i=o.count+"";var s=GlobalConfig.itemConfig[t];if(this.configUseType=s.useType,this.config=s,this.nameLabel.text=s.name,this.nameLabel.textColor=ItemBase.QUALITY_COLOR[s.quality],this.itemIcon.setData(s),this.lv.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[s.level]),this.num.text=i,this.description.textFlow=TextFlowMaker.generateTextFlow(s.desc),this.add.visible=1==s.useType||s.useType==ItemUseType.TYPE03||s.useType==ItemUseType.TYPE05,this.add.visible,s.useType==ItemUseType.TYPE03){var n=GlobalConfig.ins("ShuXingDanjcConfig"),r=UserBag.ins().eatCnt;n.Num==r&&(this.useNum=0,this.numLabel.text=this.useNum+"")}}},t.prototype._UpdateLayout=function(){this.description.height},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(ItemUseTipsWin.prototype,"ItemUseTipsWin"),window.ItemUseTipsWin=ItemUseTipsWin;var RandBossWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){this.skinName="RandBossSkin",this.list.itemRenderer=ItemBase,this.upVip.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st101636)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.sure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.upVip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.info=this.getUserInfoByItemId(e[0]),this.list.dataProvider=new eui.ArrayCollection(this.info.show);var i=UserFb.ins().bossCallNum,o=this.info.challengeTime[GameGlobal.actorModel.vipLv];this.playNum.text=o-i+"/"+o,this.lastNum=o-i,this.bossdesc.text=this.info.titledes,this.upVip.visible=!WxSdk.ins().isHidePay()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnRemoved(),this.sure.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.upVip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.sure:if(this.lastNum<=0)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101637);if(GameGlobal.actorModel.level>=this.info.levelLimit)return UserFb.ins().sendCallBossPlay(this.info.id),ViewManager.ins().close(t),void ViewManager.ins().close(BagWin);UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101638,[this.info.levelLimit]));break;case this.upVip:ViewManager.ins().open(VipWin),ViewManager.ins().close(this)}},t.prototype.getUserInfoByItemId=function(e){var t=GlobalConfig.ins("OtherBoss2Config");for(var i in t)if(t[i].itemId==e)return t[i];return null},t.LAYER_LEVEL=LayerManager.UI_Main_2,t}(BaseEuiPanel);__reflect(RandBossWin.prototype,"RandBossWin"),window.RandBossWin=RandBossWin;var SmeltEquipItem=function(e){function t(){var t=e.call(this)||this;return t.touchChildren=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){if(this.clear(),this.data instanceof ItemData)this.itemConfig=this.data.itemConfig,this.itemIcon.setData(this.itemConfig),4==this.itemConfig.type?this.nameTxt.text=this.itemConfig.name:this.nameTxt.text=this.itemConfig.zsLevel>0?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[this.itemConfig.zsLevel]):"lv."+this.itemConfig.level,this.itemIcon.setJobImg(this.itemConfig.type!=ItemType.EQUIP&&this.itemConfig.type!=ItemType.WING||!this.itemConfig.job?"":JobItemIconConst[this.itemConfig.job]);else if(this.data instanceof Object){var e=1e3<=this.data.param?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101426,[this.data.param/1e3]):LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101424,[this.data.param]);this.nameTxt.textFlow=TextFlowMaker.generateTextFlow("<font color = '0xf87372'>"+e+"</font>"),this.itemIcon.setItemImg("pf_suotou_01_png")}},t.prototype.onClick=function(){},t.prototype.clear=function(){e.prototype.clear.call(this),this.itemIcon.setItemImg("pf_orange_02_png")},t}(ItemBase);__reflect(SmeltEquipItem.prototype,"SmeltEquipItem"),window.SmeltEquipItem=SmeltEquipItem;var SmeltEquipItemForRonglu=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!0,t.touchChildren=!0,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){if(this.clear(),this.data instanceof ItemData)this.itemConfig=this.data.itemConfig,this.itemIcon.setData(this.itemConfig),4==this.itemConfig.type?this.nameTxt.text=this.itemConfig.name:this.nameTxt.text=this.itemConfig.zsLevel>0?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[this.itemConfig.zsLevel]):"lv."+this.itemConfig.level,this.itemIcon.setJobImg(this.itemConfig.type!=ItemType.EQUIP&&this.itemConfig.type!=ItemType.WING||!this.itemConfig.job?"":JobItemIconConst[this.itemConfig.job]);
else if(this.data instanceof Object){var e=1e3<=this.data.param?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101426,[this.data.param/1e3]):LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101424,[this.data.param]);this.nameTxt.textFlow=TextFlowMaker.generateTextFlow("<font color = '0xf87372'>"+e+"</font>"),this.itemIcon.setItemImg("pf_suotou_01_png")}},t.prototype.onClick=function(){SmeltEquipNormalPanel.currentClickCanshow=this.data instanceof ItemData||null==this.data},t.prototype.playEff=function(){this.data instanceof ItemData&&(this.m_Eff=ViewManager.ins().createEff(this.m_Eff,this.m_EffGroup,"eff_ui_icon",1))},t.prototype.clear=function(){e.prototype.clear.call(this),this.itemIcon.setItemImg("pf_orange_02_png")},t}(ItemBase);__reflect(SmeltEquipItemForRonglu.prototype,"SmeltEquipItemForRonglu"),window.SmeltEquipItemForRonglu=SmeltEquipItemForRonglu;var SmeltEquipTotalWin=function(e){function t(){var t=e.call(this)||this;return t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.smeltEquipNormalPanel=new SmeltEquipNormalPanel,this.smeltEquipNormalPanel.name=GlobalConfig.jifengTiaoyueLg.st101447,this.commonWindowBg.AddChildStack(this.smeltEquipNormalPanel),this.smeltEquipRongluPanel=new SmeltEquipRongluPanel,this.smeltEquipRongluPanel.name=GlobalConfig.jifengTiaoyueLg.st101457,this.commonWindowBg.AddChildStack(this.smeltEquipRongluPanel)},t.prototype.open=function(){this.commonWindowBg.OnAdded(this),MessageCenter.addListener(Bless.ins().postBlessRongluSuccess,this.itemUpdate,this),this.itemUpdate()},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.itemUpdate=function(){this.commonWindowBg.ShowTalRedPoint(1,UserBag.ins().getWingZhuEquip().length>=10)},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t}(BaseEuiPanel);__reflect(SmeltEquipTotalWin.prototype,"SmeltEquipTotalWin",["ICommonWindow"]),ViewManager.ins().reg(SmeltEquipTotalWin,LayerManager.UI_Main),window.SmeltEquipTotalWin=SmeltEquipTotalWin;var SmeltSelectItem=function(e){function t(){var t=e.call(this)||this;return t.translate={hp:AttributeType.atMaxHp,atk:AttributeType.atAttack,def:AttributeType.atDef,res:AttributeType.atRes,crit:AttributeType.atCrit,tough:AttributeType.atTough},t.skinName="SmeltSeletctItemSkin",t.touchChildren=!1,t}return __extends(t,e),t.prototype.dataChanged=function(){if(this.data instanceof ItemData){var e=this.data;if(this.itemConfig=e.itemConfig,this.arrowIcon.visible=!1,!this.itemConfig)return;this.itemIcon.isShowJob(!0),this.itemIcon.setData(this.itemConfig),4==this.itemConfig.type?(this.updateWingEquip(),this.lvLabel.text=this.itemConfig.name):0==this.itemConfig.type?this.lvLabel.text=this.itemConfig.zsLevel?this.itemConfig.zsLevel+"转":"lv."+this.itemConfig.level:this.lvLabel.text="",this.nameLabel.textColor=ItemBase.QUALITY_COLOR[this.itemConfig.quality],this.nameLabel.text=this.itemConfig.name,this.gradeLabel.text="评分："+ItemConfig.calculateBagItemScore(e)}},t.prototype.updateWingEquip=function(){for(var e=SubRoles.ins().subRolesLen,t=0;e>t;t++)for(var i=SubRoles.ins().getSubRoleByIndex(t).wingsData,o=i.equipsLen,s=0;o>s;s++){var n=i.getEquipByIndex(s);if(0!=n.configID){if(this.data.itemConfig.subType==n.itemConfig.subType&&ItemConfig.calculateBagItemScore(this.data)>ItemConfig.calculateBagItemScore(n))return void(this.arrowIcon.visible=!0)}else if(this.data.itemConfig.subType==s)return void(this.arrowIcon.visible=!0)}},t}(eui.ItemRenderer);__reflect(SmeltSelectItem.prototype,"SmeltSelectItem"),window.SmeltSelectItem=SmeltSelectItem;var SmeltSelectWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="SmeltSelectSkin",this.itemList.itemRenderer=SmeltSelectItem,this.itemScroller.viewport=this.itemList,this.checkList=[]},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.len=e[1],this.m_bg.init("SmeltSelectWin","选择装备"),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.itemList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),UserBag.ins().smeltItemList=e[2],this.itemList.dataProvider=new eui.ArrayCollection(e[0]),this.setSmeltEquipList(e[2])},t.prototype.close=function(){this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.itemList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.foolChecklist(),MessageCenter.ins().removeAll(this),UserEquip.ins().postEquipCheckList(this.checkList)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.onItemTap=function(e){var i=e.itemRenderer;if(i.checkBoxs.selected||!(this.checkList.length>=this.len)){i.checkBoxs.selected=!i.checkBoxs.selected;var o=this.itemList.selectedItem;if(i.checkBoxs.selected){if(this.checkList[this.checkList.length]=o,UserBag.ins().smeltItemList=this.checkList,this.checkList.length==this.len)return UserEquip.ins().postEquipCheckList(this.checkList),void ViewManager.ins().close(t)}else{for(var s=null,n=0;n<this.checkList.length;n++)if(this.checkList[n].handle==o.handle){s=n;break}if(null==s)return;this.checkList.splice(s,1),UserBag.ins().smeltItemList=this.checkList}this.setCountLabel(this.checkList.length)}},t.prototype.onTap=function(e){switch(e.currentTarget){case this.sureBtn:ViewManager.ins().close(t)}},t.prototype.setSmeltEquipList=function(e){this.checkList=e,this.checkListData(),this.setCountLabel(this.checkList.length)},t.prototype.setCountLabel=function(e){this.countLabel.text=e+"/"+this.len},t.prototype.checkListData=function(){for(var e=this.checkList.length,t=e-1;t>=0;t--)null!=this.checkList[t]&&this.checkList[t].handle||this.checkList.splice(t,1)},t.prototype.foolChecklist=function(){for(var e=this.checkList.length,t=0;t<this.len;t++)t>=e&&this.checkList.push(null)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(SmeltSelectWin.prototype,"SmeltSelectWin"),window.SmeltSelectWin=SmeltSelectWin;var Bless=function(e){function t(){var t=e.call(this)||this;return t.level=0,t.exp=0,t.sysId=PackageID.strongthen,t.regNetMsg(S2cProtocol.sc_forge_belss_update,t.postBelssUpdate),t.regNetMsg(S2cProtocol.sc_forge_back_goods_success,t.doBackGoodsSuccess),t.regNetMsg(S2cProtocol.sc_forge_bless_ronglu_success,t.postBlessRongluSuccess),t.regNetMsg(S2cProtocol.sc_forge_bless_boost_res,t.getBoostMsg),t.regNetMsg(S2cProtocol.sc_forge_bless_upgrade_res,t.getUpgradeMsg),t.regNetMsg(S2cProtocol.sc_forge_bless_smelt_res,t.getSmelt),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postBelssUpdate=function(e){var t=e.roleId,i=SubRoles.ins().getSubRoleByIndex(t);i.parseForgeChange(e,1100)},t.prototype.doBackGoodsSuccess=function(e){1==e.result&&t.postBlessSuccess()},t.postBlessSuccess=function(){},t.prototype.postBlessRongluSuccess=function(e){this.level=e.level,this.exp=e.exp},t.prototype.sendUpBlessLevel=function(e,t){var i=new Sproto.cs_forge_upgrade_bless_request;i.roleId=e,i.pos=t,GameSocket.ins().Rpc(C2sProtocol.cs_forge_upgrade_bless,i)},t.prototype.sendBackUpGoods=function(e){var t=new Sproto.cs_forge_back_upgrade_goods_request;t.num=e,GameSocket.ins().Rpc(C2sProtocol.cs_forge_back_upgrade_goods,t)},t.prototype.sendRonglu=function(e){var t=new Sproto.cs_forge_bless_ronglu_success_request;t.handles=new Array;for(var i=0;i<e.length;i++)null!=e[i]&&t.handles.push(e[i].handle);t.handles.length>0&&GameSocket.ins().Rpc(C2sProtocol.cs_forge_bless_ronglu_success,t)},t.prototype.checkIsEnough=function(){null==this.BlessCostConfig&&(this.BlessCostConfig=GlobalConfig.ins("BlessCostConfig"));var e=this.BlessCostConfig[1],t=UserBag.ins().getBagGoodsCountById(0,e.stoneId);return t>=e.stoneNum},t.prototype.checkIsHaveUp=function(){var e=this.checkRoleIsShowRed(0),t=this.checkRoleIsShowRed(1),i=this.checkRoleIsShowRed(2),o=e||t||i;return o},t.prototype.checkRoleIsShowRed=function(e){if(e>=SubRoles.ins().subRolesLen)return!1;var i=SubRoles.ins().getSubRoleByIndex(e),o=i.getEquipLen();if(o>0)for(var s=8,n=void 0,r=0;s>r;r++){if(n=i.getEquipByIndex(r),n.bless<=0&&t.ins().checkIsEnough())return!0;if(n.bless>=1){var a=this.checkBlessUpLv(r,n);if(a)return a}}return!1},t.prototype.checkBlessUpLv=function(e,t){var i=GlobalConfig.ins("EquipBlessStarConfig")[e][t.blessstar];if(0==i.exp)return!1;for(var o=GlobalConfig.ins("EquipBlessLevelConfig")[e][t.blesslv-1],s=0;s<o.cost.length;s++){var n=o.cost[s];if(1==n.id){if(GameLogic.ins().actorModel.gold<n.count)return!1}else{var r=UserBag.ins().getBagGoodsCountById(0,n.id);if(r<n.count)return!1}}return!0},t.prototype.isCanBack=function(){if(SubRoles.ins().subRolesLen<3)return!1;for(var e=0;3>e;e++){var t=SubRoles.ins().getSubRoleByIndex(e),i=t.getEquipLen();if(i>0)for(var o=8,s=0;o>s;s++){var n=t.getEquipByIndex(s);if(n.bless<=0)return!1}}return!0},t.prototype.getBoostMsg=function(e){var i=SubRoles.ins().getSubRoleByIndex(e.roleId),o=i.getEquipByIndex(e.pos);o.blessexp=e.blessexp,o.blessstar=e.blessstar,t.postBlessSuccess()},t.prototype.getUpgradeMsg=function(e){var i=SubRoles.ins().getSubRoleByIndex(e.roleId),o=i.getEquipByIndex(e.pos);o.blesslv=e.blesslv,t.postBlessSuccess()},t.prototype.getSmelt=function(e){t.postBlessSuccess()},t.prototype.sendBoostMsg=function(e,t,i){var o=new Sproto.cs_forge_bless_boost_req_request;o.roleId=e,o.pos=t,o.isAuto=i,GameSocket.ins().Rpc(C2sProtocol.cs_forge_bless_boost_req,o)},t.prototype.sendUpgradeMsg=function(e,t){var i=new Sproto.cs_forge_bless_upgrade_req_request;i.roleId=e,i.pos=t,GameSocket.ins().Rpc(C2sProtocol.cs_forge_bless_upgrade_req,i)},t.prototype.sendSmelt=function(e,t){var i=new Sproto.cs_forge_bless_smelt_req_request;i.handler=e,i.num=t,GameSocket.ins().Rpc(C2sProtocol.cs_forge_bless_smelt_req,i)},t}(BaseSystem);__reflect(Bless.prototype,"Bless"),MessageCenter.compile(Bless),window.Bless=Bless;var BlessBackGoodsWin=function(e){function t(){var t=e.call(this)||this;return t.nowNum=1,t.haveNum=0,t.skinName="BlessRecycleSkin",t.m_MaxBtn.label=GlobalConfig.jifengTiaoyueLg.st101113,t.m_MinBtn.label=GlobalConfig.jifengTiaoyueLg.st101114,t.m_SmeltBtn.label=GlobalConfig.jifengTiaoyueLg.st100209,t.m_bg.init("BlessBackGoodsWin",GlobalConfig.jifengTiaoyueLg.st100108),t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.itemId=e[0],this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.m_CutBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_AddBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_MaxBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_MinBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_NumLabel.addEventListener(egret.Event.CHANGE,this.onLabChange,this),this.m_SmeltBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSmelt,this),MessageCenter.addListener(Bless.postBlessSuccess,this.setData,this)},t.prototype.removeViewEvent=function(){this.m_CutBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_AddBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_MaxBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_MinBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_NumLabel.removeEventListener(egret.Event.CHANGE,this.onLabChange,this),this.m_SmeltBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSmelt,this),MessageCenter.ins().removeAll(this)},t.prototype.setData=function(){var e=this.itemId,t=UserBag.ins().getBagGoodsCountById(0,e);this.m_NumLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101687,[t]),this.haveNum=t,this.nowNum>t&&(this.nowNum=t);var i=GlobalConfig.ins("SmeltConfig")[e],o=GlobalConfig.ins("ItemConfig")[e],s=GlobalConfig.ins("ItemConfig")[i.stoneId];this.m_OneGetLab.text=GlobalConfig.jifengTiaoyueLg.st101688+s.name+"X"+i.stoneNum,this.goods.setDataByConfig(o),this.goods.setCount(""),this.m_AllGetLab.text=GlobalConfig.jifengTiaoyueLg.st101689+s.name+"X"+i.stoneNum*this.nowNum,this.m_NumLabel.text=this.nowNum+"";var n=GlobalConfig.ins("GainItemConfig"),r=n[e];if(null!=r){for(var a=r.gainWay.slice(0,r.gainWay.length),l=0;l<a.length;++l){var h=a[l];if(h[1][0]==ViewIndexDef.ACT_GIFT){var c=ActivityModel.ins().GetActivityDataByType(2);ActivityModel.ins().IsOpen(c)||a.splice(l,1),e!=ViewIndexDef.EGG_BROKEN_PANEL||EggBroken.IsOpen()||a.splice(l,1)}}this.gainList.dataProvider=new eui.ArrayCollection(a)}else this.gainList.dataProvider=new eui.ArrayCollection([])},t.prototype.onClick=function(e){switch(e.currentTarget){case this.m_CutBtn:this.nowNum>1&&(this.nowNum-=1);break;case this.m_AddBtn:this.nowNum<this.haveNum&&(this.nowNum+=1);break;case this.m_MaxBtn:this.nowNum<this.haveNum&&(this.nowNum=this.haveNum);break;case this.m_MinBtn:this.nowNum>1&&(this.nowNum=1)}this.m_NumLabel.text=this.nowNum+"",this.onChangetext()},t.prototype.onLabChange=function(){var e=this.m_NumLabel.text,t=parseInt(e);0>=t?(this.nowNum=0,t=0):t>this.haveNum?(this.nowNum=this.haveNum,t=this.haveNum):this.nowNum=t,this.m_NumLabel.text=t+"",this.onChangetext()},t.prototype.onClickSmelt=function(){var e=UserBag.ins().getBagItemById(this.itemId);e&&(e.count>=this.nowNum?Bless.ins().sendSmelt(e.handle,this.nowNum):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100217))},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.onChangetext=function(){var e=this.itemId,t=GlobalConfig.ins("SmeltConfig")[e],i=(GlobalConfig.ins("ItemConfig")[e],GlobalConfig.ins("ItemConfig")[t.stoneId]);this.m_AllGetLab.text=GlobalConfig.jifengTiaoyueLg.st101689+i.name+"X"+t.stoneNum*this.nowNum},t}(BaseEuiPanel);__reflect(BlessBackGoodsWin.prototype,"BlessBackGoodsWin"),ViewManager.ins().reg(BlessBackGoodsWin,LayerManager.UI_Popup),window.BlessBackGoodsWin=BlessBackGoodsWin;var BlessItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.setIsBlessed=function(e){this.bless.visible=e},t.prototype.getIsSelected=function(){return this.selected.visible},t.prototype.setIsSelected=function(e){this.selected.visible=e},t.prototype.setData=function(e,t){this._data=e,this.getData().bless>=1?this.red.visible=Bless.ins().checkBlessUpLv(t,e):this.red.visible=Bless.ins().checkIsEnough(),e.blesslv>0&&e.bless>0?(this.m_lvLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101439,[e.blesslv]),this.setSource(ResDataPath.GetEquipDefaultPIcon(t))):(this.m_lvLab.text="",this.setSource(ResDataPath.GetEquipDefaultIcon(t))),(null!=this.oldlv&&this.oldlv<e.blesslv||null!=this.oldbless&&this.oldbless<e.bless)&&this.playeEff(),this.oldlv=e.blesslv,this.oldbless=e.bless},t.prototype.getData=function(){return this._data},t.prototype.getSource=function(){return this._source},t.prototype.setSource=function(e){this._source!=e&&(this._source=e,this.item.source=this._source)},t.prototype.playeEff=function(){this.eff=ViewManager.ins().createEff(this.eff,this.m_EffGroup,"eff_ui_icon",1)},t}(eui.Component);__reflect(BlessItem.prototype,"BlessItem"),window.BlessItem=BlessItem;var BlessWin=function(e){function t(){var t=e.call(this)||this;return t.selectIndex=0,t._isAutoUp=!1,t.currole=0,t.skinName="EquipBlessSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100218,this.m_AutoBuyBox.label=GlobalConfig.jifengTiaoyueLg.st101147,this.m_FullLvLab.text=GlobalConfig.jifengTiaoyueLg.st101182,this.back.text=GlobalConfig.jifengTiaoyueLg.st101183,this.back0.text=GlobalConfig.jifengTiaoyueLg.st101183,this.m_UpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st100296,this.m_UpLayerBtn.label=GlobalConfig.jifengTiaoyueLg.st100242,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101104,this.upGradeBtn.label=GlobalConfig.jifengTiaoyueLg.st100212},t.prototype.setComp=function(e,t,i){this.bapowerLabel=e,this.bamaxLvTF=t,this.baBOTTON_GROUP_FULL=i},t.prototype.onGetItem=function(e){null==this.BlessCostConfig&&(this.BlessCostConfig=GlobalConfig.ins("BlessCostConfig")),UserWarn.ins().setBuyGoodsWarn(this.BlessCostConfig[1].stoneId,1)},t.prototype.setRedPointVisible=function(){this.redPoint0.visible=!1},t.prototype.open=function(){this.bapowerLabel&&(this.bapowerLabel.visible=!1,this.bamaxLvTF.visible=!1,this.baBOTTON_GROUP_FULL.visible=!1);for(var e=0;8>e;++e)this["blessItem"+e].setSource(ResDataPath.GetEquipDefaultIcon(e)),this.addChild(this["blessItem"+e]);this.back.textFlow=(new egret.HtmlTextParser).parser('<a href="event:"><u>'+this.back.text+"</u></a>"),this.back.visible=!0,this.back0.textFlow=(new egret.HtmlTextParser).parser('<a href="event:"><u>'+this.back0.text+"</u></a>"),this.back0.visible=!0,this.m_AutoUpLvBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAutoUpClick,this),this.m_UpLvBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUpLvBtn,this),this.m_UpLayerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUpLayer,this),this.upGradeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.back0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.getItemTxt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetItem,this),this.m_GetItemBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),MessageCenter.addListener(Bless.postBlessSuccess,this.UpdateContent,this),MessageCenter.addListener(Bless.ins().postBelssUpdate,this.onEvent,this),this.observe(MessageDef.BAG_HAS_ITEM_CAN_USE,this.UpdateContent);for(var t=0;7>=t;t++)this["blessItem"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},t.prototype.close=function(){this.m_AutoUpLvBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAutoUpClick,this),this.m_UpLvBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUpLvBtn,this),this.m_UpLayerBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUpLayer,this),this.upGradeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.back.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.back0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.m_GetItemBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),MessageCenter.ins().removeAll(this);for(var e=0;7>=e;e++)this["blessItem"+e].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this);this.selectItem.setIsSelected(!1),this.stopAutoUp()},t.prototype.onEvent=function(){var e=this;null==this.mc?(this.mc=new MovieClip,this.mc.x=240,this.mc.y=330,this.mc.loadUrl(ResDataPath.GetUIEffePath("eff_success_strengthen"),!0,1,function(){DisplayUtils.dispose(e.mc),e.mc=null})):this.mc.play(),null==this.mc.parent&&this.addChild(this.mc),this.UpdateContent()},t.prototype.setData=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole());this.blessItem0.setData(e.getEquipByIndex(0),0),this.blessItem1.setData(e.getEquipByIndex(1),1),this.blessItem2.setData(e.getEquipByIndex(2),2),this.blessItem3.setData(e.getEquipByIndex(3),3),this.blessItem4.setData(e.getEquipByIndex(4),4),this.blessItem5.setData(e.getEquipByIndex(5),5),this.blessItem6.setData(e.getEquipByIndex(6),6),this.blessItem7.setData(e.getEquipByIndex(7),7)},t.prototype.UpdateContent=function(){this.currole!=this.m_RoleSelectPanel.getCurRole()&&(this.currole=this.m_RoleSelectPanel.getCurRole(),this.stopAutoUp()),this.selectItem&&(this.selectItem.setIsSelected(!1),this.selectItem=null),this.setData(),this.setSelect(),this.refushCost(),this.setRoleListRedPoint(),this.setExp()},t.prototype.setRoleListRedPoint=function(){this.m_RoleSelectPanel.showRedPoint(0,Bless.ins().checkRoleIsShowRed(0)),this.m_RoleSelectPanel.showRedPoint(1,Bless.ins().checkRoleIsShowRed(1)),this.m_RoleSelectPanel.showRedPoint(2,Bless.ins().checkRoleIsShowRed(2))},t.prototype.refushCost=function(){null==this.BlessCostConfig&&(this.BlessCostConfig=GlobalConfig.ins("BlessCostConfig"));var e=this.BlessCostConfig[1],t=GlobalConfig.itemConfig[e.stoneId];this.consumeLabel.consumeType=t.name;var i=UserBag.ins().getBagGoodsCountById(0,e.stoneId);this.consumeLabel.curValue=i,this.consumeLabel.consumeValue=e.stoneNum},t.prototype.setSelect=function(e){if(void 0===e&&(e=null),null==e)void 0==this.selectItem&&(this.selectItem=this["blessItem"+this.selectIndex]);else for(var t=0;7>=t;t++)this["blessItem"+t].setIsSelected(!1),e==this["blessItem"+t]&&(this.selectItem=this["blessItem"+t],this.selectIndex=t);var i=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole());this.blessItem8.setData(i.getEquipByIndex(this.selectIndex),this.selectIndex),this.selectItem.setIsSelected(!0),this.refushProList()},t.prototype.refushProList=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()),t=e.getEquipByIndex(this.selectIndex),i=this.getAllAttr(this.selectIndex,t.blessstar,t.bless>0);this.attrLabel.SetCurAttr(AttributeData.getAttStr(i,1));var o=GlobalConfig.ins("EquipBlessStarConfig")[this.selectIndex][t.blessstar+1];if(o){var s=void 0;s=t.bless>0?this.getAllAttr(this.selectIndex,t.blessstar+1,!0):this.getAllAttr(this.selectIndex,t.blessstar,!0),this.attrLabel.SetNextAttr(AttributeData.getAttStr(s,1))}this.powerLabel.text=this.calculateAllPower()},t.prototype.onTouch=function(e){switch(e.target){case this.upGradeBtn:if(this.selectItem.getData().bless>0)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101184);if(Bless.ins().checkIsEnough())Bless.ins().sendUpBlessLevel(this.m_RoleSelectPanel.getCurRole(),this.selectIndex);else{null==this.BlessCostConfig&&(this.BlessCostConfig=GlobalConfig.ins("BlessCostConfig"));var t=GlobalConfig.itemConfig[this.BlessCostConfig[1].stoneId];UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101185,t.name))}break;case this.m_GetItemBtn:UserWarn.ins().setBuyGoodsWarn(this.itemId);break;case this.back:case this.back0:var i=GlobalConfig.ins("BlessCostConfig")[1];i&&ViewManager.ins().open(BlessBackGoodsWin,i.stoneId);break;default:this.setSelect(e.target.parent),this.setExp()}},t.prototype.calculateAllPower=function(){for(var e=0,t=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()),i=0;8>i;i++){var o=t.getEquipByIndex(i);if(o.bless>0){var s=this.getAllAttr(i,o.blessstar,o.bless>0);e+=UserBag.getAttrPower(s)}}return e},t.prototype.setExp=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()),t=e.getEquipByIndex(this.selectIndex);if(this.m_ExpGroup.visible=!1,this.m_ActivateGroup.visible=!1,this.m_NoActivateGroup.visible=!1,this.m_UpLayerBtn.visible=!1,this.m_FullLvLab.visible=!1,this.m_lvLab.visible=!0,this.m_LvLab1.visible=!0,t.bless>0){this.m_lvLab.text=t.blesslv+GlobalConfig.jifengTiaoyueLg.st100103,this.starList.starNum=t.blessstar%10;var i=GlobalConfig.ins("EquipBlessStarConfig")[this.selectIndex][t.blessstar];if(i)if(this.m_ExpBar.maximum=i.exp,this.m_ExpBar.value=t.blessexp,0==i.exp)this.m_FullLvLab.visible=!0;else if(t.blessstar>=10*t.blesslv)this.starList.starNum=10,this.m_ExpBar.value=this.m_ExpBar.maximum,this.m_UpLayerBtn.visible=!0,this.m_ExpGroup.visible=!0,this.stopAutoUp();else{this.m_ExpGroup.visible=!0,this.m_ActivateGroup.visible=!0;var o=GlobalConfig.ins("EquipBlessLevelConfig")[this.selectIndex][t.blesslv-1];this.itemId=o.cost[0].id,UserBag.ins().setNeedItem(o.cost,this.m_NeedItemGroup)}}else this.m_lvLab.visible=!1,this.m_LvLab1.visible=!1,this.m_NoActivateGroup.visible=!0},t.prototype.onClickUpLayer=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole());Bless.ins().sendUpgradeMsg(e.roleID,this.selectIndex)},t.prototype.btnAutoUpClick=function(){this._isAutoUp?this.stopAutoUp():(this._isAutoUp=!0,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101096,TimerManager.ins().doTimer(600,0,this.autoUpStar,this))},t.prototype.stopAutoUp=function(){this._isAutoUp=!1,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101097,TimerManager.ins().remove(this.autoUpStar,this)},t.prototype.autoUpStar=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()),t=e.getEquipByIndex(this.selectIndex),i=GlobalConfig.ins("EquipBlessStarConfig")[this.selectIndex][t.blessstar];if(null==i&&0==i.exp)return this._isAutoUp=!1,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101097,TimerManager.ins().remove(this.autoUpStar,this),void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101098);var o=GlobalConfig.ins("EquipBlessLevelConfig")[this.selectIndex][t.blesslv-1],s=UserBag.ins().getBagGoodsCountById(0,o.cost[0].id),n=GameLogic.ins().actorModel.gold;if(s>=o.cost[0].count&&n>=o.cost[1].count)Bless.ins().sendBoostMsg(e.roleID,this.selectIndex,!1);else{if(n<o.cost[1].count)UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100323);else if(1==this.m_AutoBuyBox.selected){o.cost[0].count-s;if(Checker.Money(MoneyConst.yuanbao,ItemStoreConfig.getStoreByItemID(o.cost[0].id).price*o.cost[0].count,Checker.YUNBAO_FRAME))return void Bless.ins().sendBoostMsg(e.roleID,this.selectIndex,!0)}else UserWarn.ins().setBuyGoodsWarn(o.cost[0].id,o.cost[0].count-s);this._isAutoUp=!1,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101097,TimerManager.ins().remove(this.autoUpStar,this)}},t.prototype.onClickUpLvBtn=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()),t=e.getEquipByIndex(this.selectIndex),i=GlobalConfig.ins("EquipBlessStarConfig")[this.selectIndex][t.blessstar];if(null==i&&0==i.exp)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101098);var o=GlobalConfig.ins("EquipBlessLevelConfig")[this.selectIndex][t.blesslv-1],s=UserBag.ins().getBagGoodsCountById(0,o.cost[0].id),n=GameLogic.ins().actorModel.gold;if(s>=o.cost[0].count&&n>=o.cost[1].count)Bless.ins().sendBoostMsg(e.roleID,this.selectIndex,!1);else if(n<o.cost[1].count)UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100323);else if(1==this.m_AutoBuyBox.selected){o.cost[0].count-s;if(Checker.Money(MoneyConst.yuanbao,ItemStoreConfig.getStoreByItemID(o.cost[0].id).price*o.cost[0].count,Checker.YUNBAO_FRAME))return void Bless.ins().sendBoostMsg(e.roleID,this.selectIndex,!0)}else UserWarn.ins().setBuyGoodsWarn(o.cost[0].id,o.cost[0].count-s)},t.prototype.getAllAttr=function(e,t,i){var o=[],s=[];if(i){for(var n=GlobalConfig.ins("BlessAttrConfig")[e][0].attr,r=0;r<n.length;r++){var a={type:n[r].type,value:n[r].value};o.push(a)}var l=Math.ceil(t/10);0==l&&(l=1);for(var h=GlobalConfig.ins("EquipBlessLevelConfig")[e][l-1],c=h.attr,r=0;r<c.length;r++){var a={type:c[r].type,value:c[r].value};o.push(a)}for(var u=GlobalConfig.ins("EquipBlessStarConfig")[e][t],d=u.attr,r=0;r<d.length;r++){var a={type:d[r].type,value:d[r].value};o.push(a)}s=AttributeData.getAttr([o])}else{for(var n=GlobalConfig.ins("BlessAttrConfig")[e][0].attr,r=0;r<n.length;r++){var a={type:n[r].type,value:0};o.push(a)}s=o}return s},t}(BaseView);__reflect(BlessWin.prototype,"BlessWin",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.BlessWin=BlessWin;var HomeBossModel=function(){function e(){this.remindStats=[],this.vipBossConfigData=new Dictionary,this.layerBossData1=new Dictionary,this.layerBossData2=new Dictionary,this.layerBossData3=new Dictionary}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.initTypeData=function(){if(!(this.vipBossConfigData.length>0)){var e=GlobalConfig.ins("PublicBossConfig");if(e){this.vipBossConfigData.clear();for(var t in e)parseInt(t)>=100&&this.vipBossConfigData.set(parseInt(t),e[t][0])}}},e.prototype.isCanBattle=function(){var e=Math.max(0,(this.cdJoin||0)-GameServer.serverTime);return 0>=e?!0:!1},Object.defineProperty(e.prototype,"battleCDPrice",{get:function(){var e=Math.max(0,(this.cdJoin||0)-GameServer.serverTime);if(e>0){var t=GlobalConfig.ins("PublicBossBaseConfig"),i=e/60*parseInt(t.vipcdpirce);return Math.floor(i)}return 0},enumerable:!0,configurable:!0}),e.prototype.checkAllRedPoint=function(){var e=this.checkLayerRedPoint(HomeBossLayerType.LAYERTYPE1);return e?!0:(e=this.checkLayerRedPoint(HomeBossLayerType.LAYERTYPE2))?!0:(e=this.checkLayerRedPoint(HomeBossLayerType.LAYERTYPE3),e?!0:!1)},e.prototype.checkLayerRedPoint=function(e){var t=UserVip.ins().lv,i=GlobalConfig.ins("PublicBossBaseConfig"),o=i.vipOpenlLimit[e-1];if(o>t)return!1;var s=[];switch(e){case HomeBossLayerType.LAYERTYPE1:s=this.layerBossData1.values;break;case HomeBossLayerType.LAYERTYPE2:s=this.layerBossData2.values;break;case HomeBossLayerType.LAYERTYPE3:s=this.layerBossData3.values}if(!s)return!1;for(var n=0;n<s.length;n++){var r=s[n],a=this.vipBossConfigData.get(r.id),l=GameLogic.ins().actorModel.level,h=UserZs.ins()?UserZs.ins().lv:0,c=a.level,u=a.zsLevel,d=a.zsLevel?10*a.zsLevel+80:a.level,p=h?10*h+80:l;if(!(r.hp<=0)&&a){if(u){if(h>=u){if(p>=d+50)continue;return!0}continue}if(p>=c+50)continue;if(c>p)continue;return!0}}return!1},e}();__reflect(HomeBossModel.prototype,"HomeBossModel");var HomeBossLayerType;!function(e){e[e.LAYERTYPE1=1]="LAYERTYPE1",e[e.LAYERTYPE2=2]="LAYERTYPE2",e[e.LAYERTYPE3=3]="LAYERTYPE3"}(HomeBossLayerType||(HomeBossLayerType={})),window.HomeBossModel=HomeBossModel;var KfBossInfo=function(){function e(){}return e.prototype.parser=function(e){this.id=e.id,this.hp=e.hp,this.people=e.people,this.reliveTime=1e3*e.reliveTime+egret.getTimer(),this.challengeing=e.challengeing,this.killScore=e.killScore,this.maxKillScore=e.maxKillScore},Object.defineProperty(e.prototype,"isDie",{get:function(){return this.hp<=0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openChallenge",{get:function(){var e=GlobalConfig.kuafuBossConfig[this.id][0];return e.zsLevel>0?UserZs.ins().lv>=e.zsLevel:GameLogic.ins().actorModel.level>=e.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canChallenge",{get:function(){var e=GlobalConfig.kuafuBossConfig[this.id][0];return e.zsLevel>0?!this.isDie&&UserZs.ins().lv>=e.zsLevel:!this.isDie&&GameLogic.ins().actorModel.level>=e.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"levelLimit",{get:function(){var e=GlobalConfig.kuafuBossConfig[this.id];return e.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zsLevel",{get:function(){var e=GlobalConfig.kuafuBossConfig[this.id];return e.zsLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bossConfig",{get:function(){return GlobalConfig.kuafuBossConfig[this.id]},enumerable:!0,configurable:!0}),e}();__reflect(KfBossInfo.prototype,"KfBossInfo"),window.KfBossInfo=KfBossInfo;var PublicBossInfo=function(){function e(){}return e.prototype.parser=function(e){this.id=e.id,this.hp=e.hp,this.people=e.people,this.reliveTime=1e3*e.reliveTime+egret.getTimer(),this.challengeing=e.challengeing},Object.defineProperty(e.prototype,"isDie",{get:function(){return(this.reliveTime-egret.getTimer())/1e3>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openChallenge",{get:function(){var e=GlobalConfig.publicBossConfig[this.id][0];return e.zsLevel>0?UserZs.ins().lv>=e.zsLevel:GameLogic.ins().actorModel.level>=e.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canChallenge",{get:function(){var e=GlobalConfig.publicBossConfig[this.id][0];return e.zsLevel>0?!this.isDie&&UserZs.ins().lv>=e.zsLevel:!this.isDie&&GameLogic.ins().actorModel.level>=e.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"levelLimit",{get:function(){var e=GlobalConfig.publicBossConfig[this.id];
return e.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zsLevel",{get:function(){var e=GlobalConfig.publicBossConfig[this.id];return e.zsLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bossConfig",{get:function(){return GlobalConfig.publicBossConfig[this.id]},enumerable:!0,configurable:!0}),e}();__reflect(PublicBossInfo.prototype,"PublicBossInfo"),window.PublicBossInfo=PublicBossInfo;var UserBoss=function(e){function t(){var t=e.call(this)||this;return t.challengeCount=0,t.toDaySoul=0,t.bossInfo=[],t.kFbossInfo=[],t.tempHp="",t.tempMaxHp="",t.m_RecordDataList={},t.m_RankDataList={},t.m_PreClickTime=0,t.restoreTime=0,t.sysId=PackageID.Boss,t.regNetMsg(S2cProtocol.sc_public_boss_init_panel_info,t.doInfo),t.regNetMsg(S2cProtocol.sc_public_boss_update_list,t.doBossList),t.regNetMsg(S2cProtocol.sc_public_boss_update_boss,t.doUpDateBoss),t.regNetMsg(S2cProtocol.sc_public_boss_kill_log,t._DoKillLog),t.regNetMsg(S2cProtocol.sc_public_boss_challenge_result,t.doChallengeResult),t.regNetMsg(S2cProtocol.sc_public_boss_rank_update,t._DoRankUpdate),t.regNetMsg(S2cProtocol.sc_public_boss_init_info,t.postWorldBoss),t.regNetMsg(S2cProtocol.sc_public_boss_hurt_result,t.doWorldBossHurt),t.regNetMsg(S2cProtocol.sc_public_boss_clear_cd,t.doClearCD),t.regNetMsg(S2cProtocol.sc_public_boss_blood,t.doBossBlood),t.regNetMsg(S2cProtocol.sc_public_boss_cur_owner,t._DoCurOwner),t.regNetMsg(S2cProtocol.sc_public_boss_relive_time,t._DoReliveTime),t.regNetMsg(S2cProtocol.sc_public_boss_challenge_suc,t._DoChallengeSuc),t.regNetMsg(S2cProtocol.sc_public_boss_be_hit,t._DoChallengeHit),t.regNetMsg(S2cProtocol.sc_public_blood_update,t.doPublicBloodUpdate),t.regNetMsg(S2cProtocol.sc_public_items_droped,t.doPublicItemsDroped),MessageCenter.addListener(GameLogic.ins().postEnterMap,t.checkShow,t),t.regNetMsg(S2cProtocol.sc_public_player_list,t.playerListUpdatte),t.regNetMsg(S2cProtocol.sc_cross_boss_list,t.doKfBossList),t.regNetMsg(S2cProtocol.sc_vip_boss_challenge_time,t.getVipBossClearTimeMsg),t.regNetMsg(S2cProtocol.sc_vip_boss_init_panel_info,t.getVipBossMsg),t.regNetMsg(S2cProtocol.sc_vip_boss_refresh_remind,t.getVipBossRefreshMsg),t.regNetMsg(S2cProtocol.sc_vip_boss_remind_panel_info,t.getVipBossRemindMsg),t}return __extends(t,e),t.prototype.playerListUpdatte=function(e){var t=ViewManager.ins().getView(BossBloodPanel);t&&t.playerListUpdatte(e.list)},t.prototype.doPublicBloodUpdate=function(e){this.tempHp=e.hp,this.tempMaxHp=e.dhp},t.prototype.doPublicItemsDroped=function(e){var t=e.reward,i=t.length,o=[];DropHelp.clearDrop();for(var s=Math.floor(GameMap.MAX_WIDTH/2/GameMap.CELL_SIZE),n=Math.floor(GameMap.MAX_HEIGHT/2/GameMap.CELL_SIZE),r=0;i>r;r++)o[r]=new RewardData,o[r].parser(t[r]),Encounter.postCreateDrop(s,n,o[r])},t.ins=function(){return e.ins.call(this)},t.prototype.sendInfo=function(){this.Rpc(C2sProtocol.cs_public_boss_send_panel_info)},t.prototype.doInfo=function(e){this.parser(e),MessageCenter.ins().dispatch(MessageDef.PUBLIC_BOSS_LIST_DATA)},t.prototype.sendBossList=function(){this.Rpc(C2sProtocol.cs_public_boss_send_boos_list)},t.prototype.doBossList=function(e){this.parserBossList(e),MessageCenter.ins().dispatch(MessageDef.PUBLIC_BOSS_LIST_DATA)},t.prototype.doUpDateBoss=function(e){this.parserBoss(e),MessageCenter.ins().dispatch(MessageDef.PUBLIC_BOSS_LIST_DATA)},t.prototype.postBossData=function(e,t){return void 0===t&&(t=""),[e,t]},t.prototype.sendSaveRemind=function(){var e=new Sproto.cs_public_boss_save_remind_request;e.bossRemind=this.bossRemind,this.Rpc(C2sProtocol.cs_public_boss_save_remind,e)},t.prototype.sendSaveAutoFight=function(){var e=new Sproto.cs_public_boss_save_autofight_request;e.bossAutoFight=this.bossAutoFight,this.Rpc(C2sProtocol.cs_public_boss_save_autofight,e),this.sendInfo()},t.prototype.GetRecordData=function(e){var t=this.m_RecordDataList[e];return t?t:[]},t.prototype.sendChallengeRecord=function(e){var t=new Sproto.cs_public_boss_challenge_record_request;t.id=e,this.Rpc(C2sProtocol.cs_public_boss_challenge_record,t)},t.prototype._DoKillLog=function(e){for(var t=e.id,i=e.logs.length,o=[],s=0;i>s;s++){var n=e.logs[s],r=new WildBossJoinItemData;r.time=n.time,r.name=n.name,r.value=n.hurt,o.push(r)}o.sort(function(e,t){return t.time-e.time}),this.m_RecordDataList[t]=o,GameGlobal.MessageCenter.dispatch(MessageDef.PUBLIC_BOSS_RECORD_UPDATE)},t.prototype.sendChallenge=function(e){var t=new Sproto.cs_public_boss_challenge_request;t.id=e,this.Rpc(C2sProtocol.cs_public_boss_challenge,t)},t.prototype.doChallengeResult=function(e){for(var t=e.myRank,i=(e.no1Name,e.no1Level,e.no1Reward.length),o=[],s=0;i>s;s++)o[s]=new RewardData,o[s].parser(e.no1Reward[s]);i=e.myReward.length;for(var n=[],s=0;i>s;s++)n[s]=new RewardData,n[s].parser(e.myReward[s]);var r=null;GameMap.IsXbBoss()?r=function(){ViewManager.ins().open(TreasureHuntWin,1)}:GameMap.IsPublicBoss()?r=function(){ViewManager.ins().open(BossWin,1)}:GameMap.IsKfBoss()?r=function(){ViewManager.ins().open(BossWin,4)}:GameMap.IsHomeBoss()?r=function(){ViewManager.ins().open(BossWin,2)}:GameMap.IsSyBoss()&&(r=function(){ViewManager.ins().open(BossWin,5)});var a=GameMap.IsXbBoss()?GlobalConfig.jifengTiaoyueLg.st100797:GlobalConfig.jifengTiaoyueLg.st100798;ViewManager.ins().open(ResultWin,!0,n,1==t?a:GlobalConfig.jifengTiaoyueLg.st100799,r)},t.prototype.sendRank=function(e){var t=new Sproto.cs_public_boss_rank_request;t.id=e,this.Rpc(C2sProtocol.cs_public_boss_rank,t)},t.prototype.GetRankData=function(e){var t=this.m_RankDataList[e];return t?t:[]},t.prototype._DoRankUpdate=function(e){for(var t=e.id,i=e.logs.length,o=[],s=0;i>s;s++){var n=e.logs[s],r=new WildBossJoinItemData;r.name=n.name,r.value=n.hurt,o.push(r)}this.m_RankDataList[t]=o,GameGlobal.MessageCenter.dispatch(MessageDef.PUBLIC_BOSS_RANK_UPDATE)},t.prototype.sendWorldBossInfo=function(){this.Rpc(C2sProtocol.cs_public_boss_send_init_info)},t.prototype.postWorldBoss=function(e){this.rankList=[];for(var t,i=e.ranks.length,o=0;i>o;o++)t=new WorldBossRankItemData,t.parser(e.ranks[o]),this.rankList[o]=t},t.prototype.doWorldBossHurt=function(e){ViewManager.ins().open(WorldBossGold,e.hurt,e.gold)},t.prototype.sendClearCD=function(){this.Rpc(C2sProtocol.cs_public_boss_clear_cd)},t.prototype.doClearCD=function(e){UserTips.ins().showTips(1==e.result?GlobalConfig.jifengTiaoyueLg.st101697:GlobalConfig.jifengTiaoyueLg.st101698)},t.prototype.doBossBlood=function(e){this.monsterID=e.monsterId,this.bossHandler=e.bossHandler,this.handler=e.handler,this.rank=[];for(var t=e.ranks.length,i=0;t>i;i++){var o=new WorldBossRankItemData;o.rank=i+1,o.parser(e.ranks[i]),this.rank[i]=o}this.rank.sort(function(e,t){return t.value-e.value}),ViewManager.ins().open(BossBloodPanel),GameGlobal.MessageCenter.dispatch(MessageDef.PUBLIC_BOSS_OWNER_CHNAGE)},t.prototype.sendPlayerBattle=function(e){var t=new Sproto.cs_public_boss_attack_player_request;t.dbid=e,this.Rpc(C2sProtocol.cs_public_boss_attack_player,t),this.m_PreClickTime=GameServer.serverTime},t.prototype.CanClick=function(){return this.m_PreClickTime+1<=GameServer.serverTime},t.prototype.parser=function(e){this.challengeCount=e.challengeCount,this.restoreTime=e.restoreTime+GameServer.serverTime,this.toDaySoul=e.toDaySoul,this.cdTime=1e3*e.cdTime+egret.getTimer(),this.bossRemind=e.bossRemind||0,this.bossAutoFight=e.bossAutoFight||0},t.prototype.getRemindByIndex=function(e){return 1==(this.bossRemind>>e+1&1)},t.prototype.getAutoFightByIndex=function(e){return 1==(this.bossAutoFight>>e+1&1)},t.prototype.setRemind=function(e){this.bossRemind^=e,this.sendSaveRemind()},t.prototype.setAutoFight=function(e){this.bossAutoFight=0,this.bossAutoFight^=e,this.sendSaveAutoFight()},t.prototype.parserBossList=function(e){var t=e.boosInfos.length;this.bossInfo=[];for(var i=0;t>i;i++){var o=new PublicBossInfo;o.parser(e.boosInfos[i]),this.bossInfo.push(o)}},t.prototype.parserBoss=function(e){for(var t,i=e.boosInfo.id,o=GameLogic.ins().actorModel.level,s=UserZs.ins().lv,n=0;n<this.bossInfo.length;n++)if(t=this.bossInfo[n].hp,this.bossInfo[n].id==i){this.bossInfo[n].parser(e.boosInfo),this.tempID&&this.tempID==GlobalConfig.publicBossConfig[i].bossId&&this.bossInfo[n].isDie&&(this.tempID=0,this.postBossData(!1)),0==t&&100==this.bossInfo[n].hp&&this.getRemindByIndex(n)&&s>=GlobalConfig.publicBossConfig[i].zsLevel&&o>=GlobalConfig.publicBossConfig[i].level&&(this.tempID=GlobalConfig.publicBossConfig[i].bossId,this.postBossData(!0,GlobalConfig.monstersConfig[this.tempID].name));break}},t.prototype.isCanChalleng=function(){if(!this.bossInfo)return!1;var e,t=this.bossInfo.length;if(this.challengeCount>0)for(var i=0;t>i;i++)if(e=this.bossInfo[i],e.canChallenge&&this.getRemindByIndex(i))return!0;return!1},t.prototype.GetReliveTime=function(){return this.m_ReliveTime},t.prototype.CheckIsDead=function(){return this.m_ReliveTime>GameServer.serverTime},t.prototype.GetReliveSurplusTime=function(){return Math.max(Math.floor(this.m_ReliveTime-GameServer.serverTime),0)},t.prototype.GetCurOwnerHandler=function(){return this.m_CurOwnerData?this.m_CurOwnerData.actorid:0},t.prototype.GetCurOwnerData=function(){return this.m_CurOwnerData},t.prototype.SendChallengeOwner=function(){this.Rpc(C2sProtocol.cs_public_challenge_owner)},t.prototype.AutoRelive=function(){if(this.CheckIsDead()){if(ZsBoss.ins().autoClear){if(this.CheckIsMoreMoney())return this.SendReliveCd(),!1;UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101699),ZsBoss.ins().autoClear=!1}return!0}return!1},t.prototype.SendReliveCd=function(){this.CheckIsDead()?this.Rpc(C2sProtocol.cs_public_relive_cd):console.log("没有cd可以清除")},t.prototype.CheckIsMoreMoney=function(){if(null==this.publicBossBaseConfig&&(this.publicBossBaseConfig=GlobalConfig.ins("PublicBossBaseConfig")),null==this.kuafuBossBaseConfig&&(this.kuafuBossBaseConfig=GlobalConfig.ins("KuafuBossBaseConfig")),GameMap.IsPublicBoss())return GameLogic.ins().actorModel.yb>=this.publicBossBaseConfig.reburnPay;if(GameMap.IsHomeBoss())return GameLogic.ins().actorModel.yb>=this.publicBossBaseConfig.vipreburnPay;if(GameMap.IsSyBoss()){var e=GlobalConfig.ins("PaidBossBaseConfig");return GameLogic.ins().actorModel.yb>=e.reburnPay}return GameMap.IsXbBoss()?GameLogic.ins().actorModel.yb>=30:GameLogic.ins().actorModel.yb>=this.kuafuBossBaseConfig.reburnPay},t.prototype._DoCurOwner=function(e){this.m_CurOwnerData=e,GameGlobal.MessageCenter.dispatch(MessageDef.PUBLIC_BOSS_OWNER_CHNAGE)},t.prototype._DoReliveTime=function(e){this.m_ReliveTime=GameServer.serverTime+Math.floor(.001*e.relive_time),GameGlobal.MessageCenter.dispatch(MessageDef.PUBLIC_BOSS_RELIVE_UPDATE)},t.prototype._DoChallengeSuc=function(e){var t=e.robName,i=e.berobName;ViewManager.ins().open(PublicBossOwnerChange,t,i)},t.prototype._DoChallengeHit=function(e){e.isShow?ViewManager.ins().open(PublicBossAttack):ViewManager.ins().close(PublicBossAttack)},t.prototype.getRankList=function(e){return this.rankList[e]},t.prototype.init=function(){this.sendInfo(),this.sendBossList(),this.sendWorldBossInfo()},t.prototype.checkShow=function(){var e=GameMap.fubenID;GameLogic.ins().showEseBtn(0!=e),0!=e?ViewManager.ins().close(PlayFunView):ViewManager.ins().open(PlayFunView)},t.prototype.IsPublicBoss=function(e){return e==UserFb.FB_TYPE_PERSONAL_BOSS},t.prototype.IsKfBoss=function(e){return e==UserFb.FB_TYPE_KFBOSS},t.prototype.IsXbBoss=function(e){return e==UserFb.FB_TYPE_XBBOSS},t.prototype.sendGetKfBossList=function(){this.Rpc(C2sProtocol.cs_cross_boss_panel_info)},t.prototype.doKfBossList=function(e){this.parserKfBossList(e),MessageCenter.ins().dispatch(MessageDef.KF_BOSS_LIST_DATA)},t.prototype.parserKfBossList=function(e){var t=e.boosInfos.length;this.kFbossInfo=[];for(var i=0;t>i;i++){var o=new KfBossInfo;o.parser(e.boosInfos[i]),this.kFbossInfo.push(o)}},t.prototype.sendKfBossChallenge=function(e){var t=new Sproto.cs_cross_boss_challenge_request;t.id=e,this.Rpc(C2sProtocol.cs_cross_boss_challenge,t)},t.prototype.isCanChallengKf=function(){if(!this.kFbossInfo)return!1;for(var e,t=this.kFbossInfo.length,i=0;t>i;i++)if(e=this.kFbossInfo[i],e.canChallenge)return!0;return!1},t.prototype.sendClearVipBossCD=function(){var e=new Sproto.cs_vip_boss_challenge_time_request;this.Rpc(C2sProtocol.cs_vip_boss_challenge_time,e)},t.prototype.sendGetVipBossMsg=function(){var e=new Sproto.cs_vip_boss_init_panel_info_request;this.Rpc(C2sProtocol.cs_vip_boss_init_panel_info,e)},t.prototype.sendGetVipBossTipsMsg=function(e,t){var i=new Sproto.cs_vip_boss_refresh_remind_request;i.id=e,i.action=t,this.Rpc(C2sProtocol.cs_vip_boss_refresh_remind,i)},t.prototype.sendGetVipRemindMsg=function(){var e=new Sproto.cs_vip_boss_remind_panel_info_request;this.Rpc(C2sProtocol.cs_vip_boss_remind_panel_info,e)},t.prototype.getVipBossClearTimeMsg=function(e){HomeBossModel.getInstance.cdJoin=-1},t.prototype.getVipBossMsg=function(e){var t=HomeBossModel.getInstance;t.cdJoin=e.cdJoin+GameServer.serverTime,t.layerBossRefCD1=e.cdTime1+GameServer.serverTime,t.layerBossRefCD2=e.cdTime2+GameServer.serverTime,t.layerBossRefCD3=e.cdTime3+GameServer.serverTime;var i=e.boosInfos;t.layerBossData1.clear(),t.layerBossData2.clear(),t.layerBossData3.clear();for(var o=0;o<i.length;o++){var s=t.vipBossConfigData.get(i[o].id);if(s)switch(s.LevelType){case HomeBossLayerType.LAYERTYPE1:t.layerBossData1.set(i[o].id,i[o]);break;case HomeBossLayerType.LAYERTYPE2:t.layerBossData2.set(i[o].id,i[o]);break;case HomeBossLayerType.LAYERTYPE3:t.layerBossData3.set(i[o].id,i[o])}}GameGlobal.MessageCenter.dispatch(MessageDef.HOMEBOSS_BOSSMSG_UPDATE)},t.prototype.getVipBossRefreshMsg=function(e){UserTips.ins().showTips("BOSS之家刷新了！");var t=GlobalConfig.ins("PublicBossConfig"),i=GlobalConfig.ins("MonstersConfig"),o=t[e.id][0].bossId,s=i[o].name;GameGlobal.MessageCenter.dispatch(MessageDef.HOMEBOSS_REF_MSG,[!0,s])},t.prototype.getVipBossRemindMsg=function(e){HomeBossModel.getInstance.remindStats=e.remindStats,GameGlobal.MessageCenter.dispatch(MessageDef.HOMEBOSS_REMIND_UPDATE)},t}(BaseSystem);__reflect(UserBoss.prototype,"UserBoss"),MessageCenter.compile(UserBoss),window.UserBoss=UserBoss;var WorldBossRankItemData=function(){function e(){}return e.prototype.parser=function(e){this.id=e.id,this.roleName=e.roleName,this.value=e.hurtValue},e.prototype.parser1=function(e){this.roleName=e.readString(),this.value=e.readInt()},Object.defineProperty(e.prototype,"name",{get:function(){var e=this.roleName+":"+CommonUtils.overLength(this.value);StringUtils.strByteLen(e);return e},enumerable:!0,configurable:!0}),e}();__reflect(WorldBossRankItemData.prototype,"WorldBossRankItemData"),window.WorldBossRankItemData=WorldBossRankItemData;var BossBloodBar=function(e){function t(){var t=e.call(this)||this;return t.maxBarNum=100,t.nowBarNum=0,t.maxBloodNum=101.1,t.nowBloodValue=101.1,t.nowBloodNum=0,t.maxNowBloodNum=0,t.oldBarNum=0,t.bloodMaxList=[13,12,15,16,2],t.skinName="barRoSkin4",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.slideDuration=200,this.m_BloodBar.slideDuration=800},Object.defineProperty(t.prototype,"changeMaxBarNum",{set:function(e){e&&this.maxBarNum!=e&&(this.maxBarNum=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changeValue",{set:function(e){if(e!=this.nowBloodValue){0>e&&(e=0),this.nowBloodValue=e,this.setShow(e);var t=this.maxBloodNum;e!=this.maxBloodNum&&(t=e-this.maxNowBloodNum*Math.floor(e/this.maxNowBloodNum));var i=Math.ceil(e/this.maxNowBloodNum);this.value<t&&this.oldBarNum>i?(this.m_BloodBar.value=this.maxBloodNum,this.m_BloodBar.value=t,this.value=this.maxBloodNum,this.value=t):(this.m_BloodBar.value=t,this.value=t),this.oldBarNum=i}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changeMaximum",{set:function(e){e!=this.maxBloodNum&&(this.maxBloodNum=e,this.maxNowBloodNum=e/this.maxBarNum,this.maxNowBloodNum||(this.maxNowBloodNum=0),this.maximum=this.maxNowBloodNum,this.m_BloodBar.maximum=this.maxNowBloodNum,this.value=this.nowBloodValue)},enumerable:!0,configurable:!0}),t.prototype.setShow=function(e){0>e&&(e=0);var t=Math.ceil(e/this.maxNowBloodNum);t&&this.maxNowBloodNum||(t=0),1>=t?this.thumb1.visible=!1:this.thumb1.visible=!0;var i=t%this.bloodMaxList.length,o=i-1;0==i&&(o=this.bloodMaxList.length-1),this.thumb.source="comp_21_12_"+this.bloodMaxList[i]+"_png",this.thumb1.source="comp_21_12_"+this.bloodMaxList[o]+"_png",this.m_Text.text="x"+t},t.prototype.getMaxHp=function(){return this.maxBloodNum},t}(eui.ProgressBar);__reflect(BossBloodBar.prototype,"BossBloodBar"),window.BossBloodBar=BossBloodBar;var BossBloodPanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._playerList=[],t.m_AddEvent=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"m_BossBloodPanel",{get:function(){return GameMap.IsPublicBoss()||GameMap.IsHomeBoss()||GameMap.IsSyBoss()||GameMap.IsKfBoss()||GameMap.IsXbBoss()?this.m_BossBloodPanel2:ZsBoss.ins().isZsBossFb(GameMap.fubenID)||GameMap.IsWorldBoss()?this.m_BossBloodPanel1:GameMap.fbType==UserFb.FB_TYPE_GUILD_BOSS?this.m_BossBloodPanel3:this.m_BossBloodPanelNull},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="BossBloodSkin",this.huDunDesc.text=GlobalConfig.jifengTiaoyueLg.st101382,this.clearRole.label=GlobalConfig.jifengTiaoyueLg.st101383,this.autoClear.label=GlobalConfig.jifengTiaoyueLg.st101384,this.clearBtn.label=GlobalConfig.jifengTiaoyueLg.st101385,this.seeRewardBtn.label=GlobalConfig.jifengTiaoyueLg.st101386,this.myTxt.text="",this.rectMac.visible=this.hudun.visible=!1,this.m_RoleHeadList.itemRenderer=BossBloodRoleItem,this.roleHeaddata=new eui.ArrayCollection([]),this.m_RoleHeadList.dataProvider=this.roleHeaddata,this.m_BossBloodPanel1=new BossBloodPanelType1(this),this.m_BossBloodPanel2=new BossBloodPanelType2(this),this.m_BossBloodPanel3=new BossBloodPanelType3(this),this.m_BossBloodPanelNull=new BossBloodPanelTypeNull(this),Main.isLiuhai&&(this.hpInfoGroup.top=116,this.hudun.top=200)},t.prototype.open=function(){if(this.myTxt.text="",UserBoss.ins().monsterID){null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig),this.hudunbloodBar.maximum=100;var e=this.monstersConfig[UserBoss.ins().monsterID];this.nameTxt.text=e.name,this.head.source=ResDataPath.getBossHeadImage(e.head),this.lvTxt.text="Lv."+e.level,this.m_ElementImg.source=ResDataPath.GetElementImgName(e.elementType);var t=UserBoss.ins().rank,i=t.length;if(i){i>10&&(i=10);var o=t.slice(1,i);this.dropDown.setData(new eui.ArrayCollection(o)),this.dropDown.setLabel(t[0].name)}else this.dropDown.setData(new eui.ArrayCollection([])),this.dropDown.setLabel("");i=t.length;for(var s=GameLogic.ins().actorModel.actorID,n=0;i>n;n++)if(t[n].id==s){this.myTxt.text=GlobalConfig.jifengTiaoyueLg.st101380+CommonUtils.overLength(t[n].value);break}this.playerListUpdatte(this._playerList),this.AddEvent(),this.m_BossBloodPanel.DoOpen(),this.refushTargetInfo(),this.guildFBInfo(e)}},t.prototype.playerListUpdatte=function(e){this._playerList=e;for(var t,i,o,s=EntityManager.ins().getRolesList(),n=0,r=0,a=[],l=0,h=e;l<h.length;l++){var c=h[l];if(c.roleName!=GameLogic.ins().actorModel.name){o={},o.job=c.job,o.sex=c.sex,o.id=c.id,o.name=c.roleName,o.hurtValue=c.hurtValue,n=r=0;for(var u=0;u<s.length;u++)if(i=s[u],i[0].infoModel.name==c.roleName){for(var d=0;d<i.length;d++)t=i[d],n+=t.infoModel.getAtt(AttributeType.atHp),r+=t.infoModel.getAtt(AttributeType.atMaxHp);break}o.value=n,o.total=r,o.isDeath=n>0?1:0,a.push(o)}}a.sort(this.compare("hurtValue")),a.sort(this.compare("isDeath")),this.roleHeaddata.replaceAll(a)},t.prototype.compare=function(e){return function(t,i){var o=t[e],s=i[e];return o>s?-1:s>o?1:0}},t.prototype.updateRoleHeadList=function(){},t.prototype.AddEvent=function(){this.m_AddEvent||(this.m_AddEvent=!0,this.m_BossBloodPanel.OnAddEvent(),this.m_RoleHeadList.addEventListener(egret.TouchEvent.TOUCH_END,this.onHeadClick,this),this.seeRewardBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.autoClear.addEventListener(egret.Event.CHANGE,this.autoChange,this),this.clearRole.addEventListener(egret.Event.CHANGE,this.autoClearChange,this),this.clearBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this))},t.prototype.onHeadClick=function(e){if(e.target.parent instanceof BossBloodRoleItem){var t=e.target.parent;if(t.showEffect(),!UserBoss.ins().CanClick())return;UserBoss.ins().sendPlayerBattle(t.id)}},t.prototype.clearRendererItem=function(){for(var e=this.m_RoleHeadList.numChildren,t=0;e>t;t++){var i=this.m_RoleHeadList.getChildAt(t);i.clearEffect()}},t.prototype.close=function(){this.m_AddEvent=!1,this.m_BossBloodPanel.OnRemoveEvent(),this.removeEvents(),this.removeObserve(),ViewManager.ins().close(PublicBossAttack),this.clearRendererItem(),this.mask=null},t.prototype.ClearData=function(){this.m_BossBloodPanel1&&this.m_BossBloodPanel1.ClearData(),this.m_BossBloodPanel2&&this.m_BossBloodPanel2.ClearData(),this.m_BossBloodPanel3&&this.m_BossBloodPanel3.ClearData(),this.m_BossBloodPanelNull&&this.m_BossBloodPanelNull.ClearData()},t.prototype.guildFBInfo=function(e){var t=EntityManager.ins().getEntityByHandle(UserBoss.ins().bossHandler),i=t?t.infoModel:null;Main.isLiuhai?this.hpInfoGroup.top=116:this.hpInfoGroup.top=76,GameMap.fubenID&&GlobalConfig.guildfbconfig.fbId==GameMap.fubenID?(this.myTxt.visible=!1,this.dropDown.visible=!1,Main.isLiuhai?this.hpInfoGroup.top=135:this.hpInfoGroup.top=95,i?(this.bloodBar.changeMaxBarNum=GlobalConfig.monstersConfig[i.configID].hpCount,this.bloodBar.changeMaximum=i.getAtt(AttributeType.atMaxHp),this.bloodBar.changeValue=i.getAtt(AttributeType.atHp)):(this.bloodBar.changeMaxBarNum=e.hpCount,this.bloodBar.changeMaximum=e.hp,this.bloodBar.changeValue=UserBoss.ins().hp)):GameMap.IsPublicBoss()||GameMap.IsHomeBoss()||GameMap.IsSyBoss()||GameMap.IsKfBoss()||GameMap.IsXbBoss()?(this.myTxt.visible=!0,this.dropDown.visible=!0,i&&(this.bloodBar.changeMaxBarNum=GlobalConfig.monstersConfig[i.configID].hpCount),this.bloodBar.changeMaximum=Number(UserBoss.ins().tempMaxHp),this.bloodBar.changeValue=Number(UserBoss.ins().tempHp)):(this.myTxt.visible=!0,this.dropDown.visible=!0,i&&(this.bloodBar.changeMaxBarNum=GlobalConfig.monstersConfig[i.configID].hpCount),this.bloodBar.changeMaximum=e.hp,this.bloodBar.changeValue=UserBoss.ins().hp)},t.prototype.refushTargetInfo=function(){this.m_BossBloodPanel.OnRefreshTargetInfo()},t.prototype.autoClearChange=function(e){ZsBoss.ins().canChange?(ZsBoss.ins().clearOther=this.clearRole.selected,this.clearSelect=this.clearRole.selected,EntityManager.ins().hideOtherEntity(this.clearSelect)):(this.clearRole.selected=this.clearSelect,UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101381))},t.prototype.autoChange=function(e){this.m_BossBloodPanel.OnAutoClearCD()},t.prototype.onTap=function(e){switch(e.target){case this.seeRewardBtn:this.m_BossBloodPanel.OnSeeReward();break;case this.clearBtn:this.m_BossBloodPanel.OnClearCD()}},t}(BaseEuiView);__reflect(BossBloodPanel.prototype,"BossBloodPanel"),ViewManager.ins().reg(BossBloodPanel,LayerManager.UI_HUD),window.BossBloodPanel=BossBloodPanel;var BossBloodPanelType1=function(){function e(e){this.m_Context=e}return Object.defineProperty(e.prototype,"clearRole",{get:function(){return this.m_Context.clearRole},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"see",{get:function(){return this.m_Context.see},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hudun",{get:function(){return this.m_Context.hudun},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hudunbloodBar",{get:function(){return this.m_Context.hudunbloodBar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cd",{get:function(){return this.m_Context.cd},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeLable",{get:function(){return this.m_Context.timeLable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoClear",{get:function(){return this.m_Context.autoClear},enumerable:!0,configurable:!0}),e.prototype.DoOpen=function(){this.huDunChange(),this.reliveInfoChange(!1),this.see.visible=!0,this.clearRole.visible=!(GameMap.IsPublicBoss()&&GameMap.IsHomeBoss()&&GameMap.IsSyBoss()&&GameMap.IsKfBoss()&&GameMap.IsXbBoss()),this.clearRole.selected=ZsBoss.ins().clearOther},e.prototype.OnRefreshTargetInfo=function(){this.targetNow||(this.targetNow=new BossTargetInfo,this.targetNow.x=10,this.targetNow.y=210,this.targetNow.top=151,Main.isLiuhai&&(this.targetNow.top=191),this.targetNow.right=0);var e=EntityManager.ins().getEntityByHandle(UserBoss.ins().handler);return e?(this.targetNow.refushTargetInfo(e),void this.m_Context.addChild(this.targetNow)):void this._ClearTarget()},e.prototype.huDunChange=function(){(ZsBoss.ins().isZsBossFb(GameMap.fubenID)||GameMap.IsWorldBoss())&&this.IsShowHudun()?(this.hudun.visible=!0,this.hudunbloodBar.value=ZsBoss.ins().hudun):this.hudun.visible=!1},e.prototype.IsShowHudun=function(){return ZsBoss.ins().hudun&&ZsBoss.ins().hudun>0},e.prototype.reliveInfoChange=function(e){if(void 0===e&&(e=!1),ZsBoss.ins().isZsBossFb(GameMap.fubenID)||GameMap.IsWorldBoss()){ZsBoss.ins().reliveTime;this.cd.visible=ZsBoss.ins().checkisAutoRelive(e),this.timeLable.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101390,[ZsBoss.ins().reliveTime]),TimerManager.ins().remove(this.refushLabel,this),this.autoClear.selected=ZsBoss.ins().autoClear,this.cd.visible&&(this.remainM=ZsBoss.ins().reliveTime,TimerManager.ins().doTimer(1e3,this.remainM,this.refushLabel,this,this.overTime,this))}else this.cd.visible=!1},e.prototype._UpdateReliveInfo=function(){this.reliveInfoChange(!0)},e.prototype.overTime=function(){this.cd.visible=!1},e.prototype.OnAutoClearCD=function(){var e=this;ZsBoss.ins().checkIsMoreMoney()?this.autoClear.selected?WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101391,[30]),function(){e.autoClear.selected=!0,ZsBoss.ins().autoClear=e.autoClear.selected,e.autoClear.selected&&(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101392),ZsBoss.ins().checkisAutoRelive())},this,function(){e.autoClear.selected=!1},this):ZsBoss.ins().autoClear=this.autoClear.selected:(this.autoClear.selected=!1,UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101393))},e.prototype.refushLabel=function(){this.remainM--,this.timeLable.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101390,[this.remainM])},e.prototype.OnAddEvent=function(){GameGlobal.MessageCenter.addListener(MessageDef.ZS_BOSS_HUDUN_POINT,this.huDunChange,this),GameGlobal.MessageCenter.addListener(MessageDef.ZS_BOSS_REMAIN_TIME,this._UpdateReliveInfo,this)},e.prototype.OnRemoveEvent=function(){GameGlobal.MessageCenter.removeListener(MessageDef.ZS_BOSS_HUDUN_POINT,this.huDunChange,this),GameGlobal.MessageCenter.removeListener(MessageDef.ZS_BOSS_REMAIN_TIME,this._UpdateReliveInfo,this)},e.prototype.OnSeeReward=function(){var e=ZsBoss.ins().isZsBossFb(GameMap.fubenID);ViewManager.ins().open(ZsBossRewardShowWin,e)},e.prototype.OnClearCD=function(){ZsBoss.ins().checkIsMoreMoney()?ZSBossCDPanel.Show(this.autoClear.selected):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101394)},e.prototype.ClearData=function(){this._ClearTarget()},e.prototype._ClearTarget=function(){this.targetNow&&this.targetNow.parent&&DisplayUtils.removeFromParent(this.targetNow)},e}();__reflect(BossBloodPanelType1.prototype,"BossBloodPanelType1",["IBossBloodPanel"]),window.BossBloodPanelType1=BossBloodPanelType1;var BossBloodPanelType2=function(){function e(e){this.m_Context=e}return Object.defineProperty(e.prototype,"clearRole",{get:function(){return this.m_Context.clearRole},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"see",{get:function(){return this.m_Context.see},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cd",{get:function(){return this.m_Context.cd},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeLable",{get:function(){return this.m_Context.timeLable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoClear",{get:function(){return this.m_Context.autoClear},enumerable:!0,configurable:!0}),e.prototype.DoOpen=function(){this.reliveInfoChange(),this.see.visible=!0,this.m_Context.seeRewardBtn.visible=!UserBoss.ins().IsXbBoss(GameMap.fbType),this.clearRole.selected=ZsBoss.ins().clearOther},e.prototype._IsSee=function(){return ZsBoss.ins().isZsBossFb(GameMap.fubenID)||UserBoss.ins().IsPublicBoss(GameMap.fbType)||UserBoss.ins().IsKfBoss(GameMap.fbType)||UserBoss.ins().IsXbBoss(GameMap.fbType)||GameMap.IsWorldBoss()},e.prototype.OnRefreshTargetInfo=function(){this.targetNow||(this.targetNow=new BossOwnerInfo,this.targetNow.x=10,this.targetNow.y=210,this.targetNow.top=151,Main.isLiuhai&&(this.targetNow.top=191),this.targetNow.right=0);var e=UserBoss.ins().GetCurOwnerData();return e&&0!=e.actorid?(this.targetNow.refushTargetInfo(e),void this.m_Context.addChild(this.targetNow)):void this._ClearTarget()},e.prototype.reliveInfoChange=function(){this.cd.visible=UserBoss.ins().CheckIsDead(),this._RefreshLabel(),TimerManager.ins().remove(this._RefreshLabel,this),this.autoClear.selected=ZsBoss.ins().autoClear,this.cd.visible&&TimerManager.ins().doTimer(1e3,Math.ceil(UserBoss.ins().GetReliveSurplusTime()),this._RefreshLabel,this,this.overTime,this)},e.prototype._UpdateReliveInfo=function(){UserBoss.ins().AutoRelive(),this.reliveInfoChange()},e.prototype.overTime=function(){this.cd.visible=!1},e.prototype.OnAutoClearCD=function(){var e=this;if(UserBoss.ins().CheckIsMoreMoney())if(this.autoClear.selected){null==this.publicBossBaseConfig&&(this.publicBossBaseConfig=GlobalConfig.ins("PublicBossBaseConfig")),null==this.kuafuBossBaseConfig&&(this.kuafuBossBaseConfig=GlobalConfig.ins("KuafuBossBaseConfig"));var t;if(GameMap.IsPublicBoss())t=this.publicBossBaseConfig.reburnPay;else if(GameMap.IsHomeBoss())t=this.publicBossBaseConfig.vipreburnPay;else if(GameMap.IsSyBoss()){var i=GlobalConfig.ins("PaidBossBaseConfig");t=i.reburnPay}else t=GameMap.IsXbBoss()?30:this.kuafuBossBaseConfig.reburnPay;WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101391,[t]),function(){e.autoClear.selected=!0,ZsBoss.ins().autoClear=e.autoClear.selected,e.autoClear.selected&&(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101392),UserBoss.ins().AutoRelive())},this,function(){e.autoClear.selected=!1},this)}else ZsBoss.ins().autoClear=this.autoClear.selected;else this.autoClear.selected=!1,UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101393)},e.prototype._RefreshLabel=function(){this.timeLable.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101390,[UserBoss.ins().GetReliveSurplusTime()])},e.prototype.huDunChange=function(e){var t=this;if(!this.isFlg){this.isFlg=!0,this.m_Context.rectMac.visible=this.m_Context.hudun.visible=!0,this.m_Context.hudunbloodBar.value=this.m_Context.hudunbloodBar.maximum=100,this.m_Context.huDunDesc.text=GlobalConfig.jifengTiaoyueLg.st101395,this.targetNow&&(this.targetNow.y=this.m_Context.hudun.visible?210:150),this.m_Context.rectMac.x=this.m_Context.hudunbloodBar.x,this.m_Context.rectMac.y=this.m_Context.hudunbloodBar.y,this.m_Context.hudunbloodBar.labelDisplay.visible=!1,this.m_Context.hudunbloodBar.mask=this.m_Context.rectMac;var i=egret.Tween.get(this.m_Context.rectMac);i.to({x:this.m_Context.rectMac.x-210},e).call(function(){egret.Tween.removeTweens(t.m_Context.rectMac),t.m_Context.huDunDesc.text=GlobalConfig.jifengTiaoyueLg.st101382,t.isFlg=t.m_Context.hudun.visible=!1,t.m_Context.hudunbloodBar.labelDisplay.visible=!0,t.targetNow&&(t.targetNow.y=t.m_Context.hudun.visible?210:150),t.m_Context.hudunbloodBar.mask=null})}},e.prototype.OnAddEvent=function(){GameGlobal.MessageCenter.addListener(MessageDef.PUBLIC_BOSS_RELIVE_UPDATE,this._UpdateReliveInfo,this),GameGlobal.MessageCenter.addListener(MessageDef.PUBLIC_BOSS_OWNER_CHNAGE,this.OnRefreshTargetInfo,this),GameGlobal.MessageCenter.addListener(MessageDef.BOSS_TIME_HUDUN,this.huDunChange,this)
},e.prototype.OnRemoveEvent=function(){GameGlobal.MessageCenter.removeListener(MessageDef.PUBLIC_BOSS_RELIVE_UPDATE,this._UpdateReliveInfo,this),GameGlobal.MessageCenter.removeListener(MessageDef.PUBLIC_BOSS_OWNER_CHNAGE,this.OnRefreshTargetInfo,this),GameGlobal.MessageCenter.removeListener(MessageDef.BOSS_TIME_HUDUN,this.huDunChange,this)},e.prototype.OnSeeReward=function(){ViewManager.ins().open(PublicBossRewardPanel,UserBoss.ins().monsterID)},e.prototype.OnClearCD=function(){UserBoss.ins().CheckIsMoreMoney()?ZSBossCDPanel.Show(this.autoClear.selected,function(){UserBoss.ins().SendReliveCd()}):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008)},e.prototype.ClearData=function(){this._ClearTarget()},e.prototype._ClearTarget=function(){this.targetNow&&this.targetNow.parent&&DisplayUtils.removeFromParent(this.targetNow)},e}();__reflect(BossBloodPanelType2.prototype,"BossBloodPanelType2",["IBossBloodPanel"]),window.BossBloodPanelType2=BossBloodPanelType2;var BossBloodPanelType3=function(){function e(e){this.m_Context=e,this.m_Raid=BaseRaid.GetRaidByType(UserFb.FB_TYPE_GUILD_BOSS),this.m_Raid.mReliveChange=this._UpdateReliveInfo,this.m_Raid.mReliveChangeObj=this,this.reliveInfoChange()}return Object.defineProperty(e.prototype,"clearRole",{get:function(){return this.m_Context.clearRole},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"see",{get:function(){return this.m_Context.see},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hudun",{get:function(){return this.m_Context.hudun},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hudunbloodBar",{get:function(){return this.m_Context.hudunbloodBar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cd",{get:function(){return this.m_Context.cd},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeLable",{get:function(){return this.m_Context.timeLable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoClear",{get:function(){return this.m_Context.autoClear},enumerable:!0,configurable:!0}),e.prototype.DoOpen=function(){this.reliveInfoChange()},e.prototype.OnRefreshTargetInfo=function(){this.targetNow||(this.targetNow=new BossTargetInfo,this.targetNow.x=10,this.targetNow.y=210,this.targetNow.top=151,Main.isLiuhai&&(this.targetNow.top=191),this.targetNow.right=0);var e=EntityManager.ins().getEntityByHandle(UserBoss.ins().handler);return e?(this.targetNow.refushTargetInfo(e),void this.m_Context.addChild(this.targetNow)):void this._ClearTarget()},e.prototype.reliveInfoChange=function(){this.cd.visible=this.m_Raid.CheckIsDead(),this._RefreshLabel(),TimerManager.ins().remove(this._RefreshLabel,this),this.autoClear.selected=this.m_Raid.AutoClear,this.cd.visible&&TimerManager.ins().doTimer(1e3,Math.ceil(this.m_Raid.GetReliveSurplusTime()),this._RefreshLabel,this,this.overTime,this)},e.prototype._UpdateReliveInfo=function(){this.m_Raid.AutoRelive(),this.reliveInfoChange()},e.prototype.overTime=function(){this.cd.visible=!1},e.prototype.OnAutoClearCD=function(){var e=this;this.m_Raid.CheckIsMoreMoney()?this.autoClear.selected?WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101391,[this.m_Raid.GetReliveYb()]),function(){e.autoClear.selected=!0,e.m_Raid.AutoClear=e.autoClear.selected,e.autoClear.selected&&(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101392),e.m_Raid.AutoRelive())},this,function(){e.autoClear.selected=!1},this):this.m_Raid.AutoClear=this.autoClear.selected:(this.autoClear.selected=!1,UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101393))},e.prototype._RefreshLabel=function(){this.timeLable.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101390,[this.m_Raid.GetReliveSurplusTime()])},e.prototype.OnAddEvent=function(){},e.prototype.OnRemoveEvent=function(){},e.prototype.OnSeeReward=function(){this.m_Raid.ShowRewardPanel()},e.prototype.OnClearCD=function(){var e=this,t=new eui.Component;t.skinName="ZSBossCDSkin";var i=t.label;WarnWin.isRelease=!0,i.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101396,[this.m_Raid.GetReliveYb()])),t.check.selected=this.m_Raid.AutoClear;var o=function(){e.m_Raid.AutoClear=t.check.selected,t.check.selected&&UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101392)};t.check.addEventListener(egret.Event.CHANGE,o,null),WarnWin.ShowContent(t,function(){t.check.removeEventListener(egret.Event.CHANGE,o,null),e.m_Raid.CheckIsMoreMoney()&&(e.m_Raid.AutoClear=t.check.selected,e.m_Raid.SendReliveCd())},null)},e.prototype.ClearData=function(){this._ClearTarget()},e.prototype._ClearTarget=function(){this.targetNow&&this.targetNow.parent&&DisplayUtils.removeFromParent(this.targetNow)},e}();__reflect(BossBloodPanelType3.prototype,"BossBloodPanelType3",["IBossBloodPanel"]),window.BossBloodPanelType3=BossBloodPanelType3;var BossBloodPanelTypeNull=function(){function e(e){this.m_Context=e}return e.prototype.DoOpen=function(){var e=this.m_Context;e&&(e.cd.visible=!1,e.see.visible=!1,e.hudun.visible=!1)},e.prototype.OnRefreshTargetInfo=function(){},e.prototype.OnAutoClearCD=function(){},e.prototype.OnAddEvent=function(){},e.prototype.OnRemoveEvent=function(){},e.prototype.OnSeeReward=function(){},e.prototype.OnClearCD=function(){},e.prototype.ClearData=function(){},e}();__reflect(BossBloodPanelTypeNull.prototype,"BossBloodPanelTypeNull",["IBossBloodPanel"]),window.BossBloodPanelTypeNull=BossBloodPanelTypeNull;var BossBloodRoleItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="BossBloodRoleItemSkin",t.clickEffc=new MovieClip,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.roleHead.source=ResDataPath.GetHeadMiniImgName(this.data.job,this.data.sex),this.id=this.data.id,this.roleName.text=this.data.name,this._bar.maximum=this.data.total,this._bar.value=this.data.value,this._bar.labelDisplay.visible=!1,0==this.data.total&&this.data.total==this.data.value?this.barNum.text="0%":this.barNum.text=(Math.round(this.data.value/this.data.total*1e4)/100).toFixed(2)+"%"},t.prototype.showEffect=function(){this.clickEffc.x=44,this.clickEffc.y=36,this.clickEffc.loadUrl(ResDataPath.GetUIEffePath("tapCircle"),!0,1),this.addChild(this.clickEffc)},t.prototype.clearEffect=function(){DisplayUtils.removeFromParent(this.clickEffc)},t}(eui.ItemRenderer);__reflect(BossBloodRoleItem.prototype,"BossBloodRoleItem"),window.BossBloodRoleItem=BossBloodRoleItem;var BossItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.list.itemRenderer=ItemBase,this.listData=new eui.ArrayCollection,this.list.dataProvider=this.listData,this.m_autoEnter.label=GlobalConfig.jifengTiaoyueLg.st100495,this.chuanQiTxt.text=GlobalConfig.jifengTiaoyueLg.st100496,this.challengeBtn.label=GlobalConfig.jifengTiaoyueLg.st100046},t.SetRewardData=function(e,t,i){var o=i.winnerReward[0];e.data=RewardData.ToRewardData(o),e.validateNow(),100==o.rate?t.text=GlobalConfig.jifengTiaoyueLg.st100480:t.text=GlobalConfig.jifengTiaoyueLg.st100481,e.showLegendEffe()},t.prototype.checkAutoEffect=function(e){this.autoEffe&&(this.m_AutoEffect.removeChild(this.autoEffe),this.autoEffe=null),e&&(null==this.autoEffe&&(this.autoEffe=new MovieClip),this.autoEffe.loadUrl(ResDataPath.GetUIEffePath("eff_btn_bosschoice"),!0,-1),this.autoEffe.x=90,this.autoEffe.y=9,this.m_AutoEffect.addChild(this.autoEffe))},t.prototype.destroy=function(){TimerManager.ins().remove(this.updateTime,this),TimerManager.ins().remove(this.updateCDTime,this),this.infoTxt.removeEventListener(egret.TextEvent.LINK,this.onLink,this),this.infoTxt0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.infoTxtKill,this),this.item.destroy(),this.autoEffe&&(DisplayUtils.dispose(this.autoEffe),this.autoEffe=null);for(var e=this.list.numChildren,t=0;e>t;t++){var i=this.list.getChildAt(t);i instanceof ItemBase&&i.destroy()}},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var i,o,s="",n="";this.m_autoEnter.selected=!1,this.listData.removeAll(),null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig),this.autoEffe&&(this.m_AutoEffect.removeChild(this.autoEffe),this.autoEffe=null);var r="";if(this.data instanceof PublicBossInfo){var a=this.data,l=GlobalConfig.publicBossConfig[a.id],h=this.config=l[0];t.SetRewardData(this.item,this.chanceTxt,this.config),this.currentState="all",this.validateNow(),this.listData.replaceAll(h.desc);var c=a.isDie;this.infoTxt.touchEnabled=!0,this.infoTxt.addEventListener(egret.TextEvent.LINK,this.onLink,this),this.infoTxt0.touchEnabled=!0,this.infoTxt0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.infoTxtKill,this),this.m_autoEnter.selected=UserBoss.ins().getAutoFightByIndex(a.id-1),this.checkAutoEffect(this.m_autoEnter.selected),this.m_autoEnter.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAutoEnter,this);var u=GameLogic.ins().actorModel.level,d=UserZs.ins()?UserZs.ins().lv:0;if(d>=h.zsLevel&&u>=h.level?this.m_autoEnter.visible=!1:this.m_autoEnter.visible=!1,h.zsLevel>0?(i=UserZs.ins().lv>=h.zsLevel,n=i?"008f22":"FFB051",s=h.zsLevel+GlobalConfig.jifengTiaoyueLg.st100482,r=h.zsLevel+GlobalConfig.jifengTiaoyueLg.st100067):(i=GameLogic.ins().actorModel.level>=h.level,n=i?"008f22":"FFB051",s=h.level+GlobalConfig.jifengTiaoyueLg.st100483,r=h.level+GlobalConfig.jifengTiaoyueLg.st100093),this.levelRequire.text=s,this.infoTxt.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st100484+'：<u><a href="event:2">'+a.people+"人</a></u>"+(a.challengeing?'<font color="#008f22">'+GlobalConfig.jifengTiaoyueLg.st100485+"</font>":"")),this.infoTxt0.textFlow=(new egret.HtmlTextParser).parser('<u><a href="event:1" color="#00ff00">'+GlobalConfig.jifengTiaoyueLg.st100486+"</a></u>"),this.infoTxt.visible=!c,this.infoTxt0.visible=c,this.bar.value=a.hp,o=this.monstersConfig[h.bossId],this.timeTxt.visible=c,this.timeTxt.visible&&(this.updateTime(),TimerManager.ins().doTimer(100,0,this.updateTime,this)),this.challengeBtn.visible=!c,this.challengeBtn.name="publicChallenge",this.challengeBtn.visible){var p=(UserBoss.ins().cdTime-egret.getTimer())/1e3;a.challengeing&&p>0?(this.challengeBtn.enabled=!1,this.challengeBtn.touchEnabled=!1,this.updateCDTime(),TimerManager.ins().doTimer(100,0,this.updateCDTime,this)):(this.challengeBtn.label=GlobalConfig.jifengTiaoyueLg.st100046,this.challengeBtn.enabled=!0,this.challengeBtn.touchEnabled=!0,TimerManager.ins().remove(this.updateCDTime,this))}this.bar.visible=!0}else if(DailyFubenConfig.isContains(this.data)){this.currentState="person",this.validateNow();var f=this.data;if(this.config=f,this.tips.visible=this.infoTxt0.visible=!1,this.listData.replaceAll(f.showItem),this.yueka.visible=!1,3121==f.id){i=1==Recharge.ins().flag,this.yueka.visible=!0,this.yueka.source="yueka_png";s=GlobalConfig.jifengTiaoyueLg.st100487,this.tips.visible=i,this.tips.text=GlobalConfig.jifengTiaoyueLg.st100488,this.btnTips.text=GlobalConfig.jifengTiaoyueLg.st100488,r=f.zsLevel>0?f.zsLevel+GlobalConfig.jifengTiaoyueLg.st100067:f.levelLimit+GlobalConfig.jifengTiaoyueLg.st100093}else if(3122==f.id){this.yueka.visible=!0,this.yueka.source="zhizun_png",i=Recharge.ins().zunCard;s=GlobalConfig.jifengTiaoyueLg.st100489,this.tips.visible=i,this.tips.text=GlobalConfig.jifengTiaoyueLg.st100490,this.btnTips.text=GlobalConfig.jifengTiaoyueLg.st100491,r=f.zsLevel>0?f.zsLevel+GlobalConfig.jifengTiaoyueLg.st100067:f.levelLimit+GlobalConfig.jifengTiaoyueLg.st100093}else if(f.zsLevel>0){i=UserZs.ins().lv>=f.zsLevel;s=f.zsLevel+GlobalConfig.jifengTiaoyueLg.st100482,r=f.zsLevel+GlobalConfig.jifengTiaoyueLg.st100067}else{i=GameLogic.ins().actorModel.level>=f.levelLimit;s=f.levelLimit+GlobalConfig.jifengTiaoyueLg.st100483,r=f.levelLimit+GlobalConfig.jifengTiaoyueLg.st100093}this.levelRequire.text=s;var g=UserFb.ins().getFbDataById(f.id);if(null==g)return;var _=g.getCount(),m=_>0?"#008f22":"#cecdcc";this.infoTxt.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st100492+'<font color="'+m+'">'+_+GlobalConfig.jifengTiaoyueLg.st100024+"</font>\n\n"),o=this.monstersConfig[f.bossId],this.challengeBtn.visible=i,this.challengeBtn.name="pChallenge",this.challengeBtn.enabled=_>0,this.challengeBtn.touchEnabled=this.challengeBtn.enabled,this.timeTxt.text="",this.bar.visible=!1}o&&(this.head.source=ResDataPath.getBossHeadImage(o.head),this.nameTxt.text=r+" "+o.name,this.m_ElementImg.source=ResDataPath.GetElementImgName(o.elementType));var v=null;i||(v=new egret.Rectangle,v.left=25,v.right=25,v.top=25,v.bottom=25),this.needLv.visible=!i,this.challengeBtn.visible=this.challengeBtn.visible&&i},t.prototype.onAutoEnter=function(e){this.m_autoEnter.selected?UserBoss.ins().setAutoFight(1<<this.data.id):UserBoss.ins().setAutoFight(0)},Object.defineProperty(t.prototype,"selectedAutoEnter",{get:function(){return this.m_autoEnter.selected},enumerable:!0,configurable:!0}),t.prototype.updateCDTime=function(){var e=(UserBoss.ins().cdTime-egret.getTimer())/1e3;this.challengeBtn.label=GlobalConfig.jifengTiaoyueLg.st100493+"（"+e.toFixed(0)+"）",0>=e&&(this.challengeBtn.label=GlobalConfig.jifengTiaoyueLg.st100046,this.challengeBtn.enabled=!0,this.challengeBtn.touchEnabled=!0,TimerManager.ins().remove(this.updateCDTime,this))},t.prototype.updateTime=function(){var e=this.data,t=e.reliveTime-egret.getTimer();this.timeTxt.text=DateUtils.getFormatBySecond(Math.floor(t/1e3),1)+GlobalConfig.jifengTiaoyueLg.st100494,0>=t&&(UserBoss.ins().sendBossList(),TimerManager.ins().remove(this.updateTime,this))},t.prototype.infoTxtKill=function(e){ViewManager.ins().open(WildBossRecordWin,this.data.id)},t.prototype.onLink=function(e){var t=this.data;switch(e.text){case"1":ViewManager.ins().open(WildBossRecordWin,t.id);break;case"2":ViewManager.ins().open(WildBossJoinWin,t.id)}},t}(eui.ItemRenderer);__reflect(BossItem.prototype,"BossItem"),window.BossItem=BossItem;var BossOwnerInfo=function(e){function t(){var t=e.call(this)||this;return t.skinName="BossOwnerSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.challenge.addEventListener(egret.TouchEvent.TOUCH_TAP,t.ClickOwner,this),this.challenge.label=GlobalConfig.jifengTiaoyueLg.st101692},t.ClickOwner=function(){if(t.m_PreClickTimer+500>egret.getTimer())return void console.log("操作过于频繁");if(t.m_PreClickTimer=egret.getTimer(),GameMap.IsPublicBoss()||GameMap.IsHomeBoss()||GameMap.IsSyBoss()||GameMap.IsKfBoss()||GameMap.IsXbBoss()){var e=UserBoss.ins().GetCurOwnerHandler();if(!e)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101690);if(e==GameGlobal.actorModel.actorID)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101691);UserBoss.ins().SendChallengeOwner()}},t.prototype.refushTargetInfo=function(e){this.nameLabel.text=e.name+"",this.head.source=ResDataPath.GetHeadMiniImgName(e.job,e.sex),this.m_ElementImg.source=ResDataPath.GetElementImgName(e.mainEle),this.refushTargetHp()},t.prototype.refushTargetHp=function(){for(var e,t,i=0,o=0,s=EntityManager.ins().getRolesList(!0),n=0;n<s.length;n++)if(t=s[n],t[0].infoModel.name==this.nameLabel.text){for(var r=0;r<t.length;r++)e=t[r],i+=e.infoModel.getAtt(AttributeType.atHp),o+=e.infoModel.getAtt(AttributeType.atMaxHp);break}this.bloodBar.maximum=o,this.bloodBar.value=i},t.m_PreClickTimer=0,t}(eui.Component);__reflect(BossOwnerInfo.prototype,"BossOwnerInfo"),window.BossOwnerInfo=BossOwnerInfo;var BossTargetInfo=function(e){function t(){var t=e.call(this)||this;return t.skinName="BossTargetSkin",t}return __extends(t,e),t.prototype.refushTargetInfo=function(e){this.model=e.infoModel,this.bloodBar.maximum=this.model.getAtt(AttributeType.atMaxHp),this.bloodBar.value=e.getHP(),this.model.team==Team.My?this.nameLabel.text=GameGlobal.actorModel.name:this.nameLabel.text=this.model.name+"",this.head.source=ResDataPath.GetHeadMiniImgName2(this.model.job,this.model.sex)},t}(eui.Component);__reflect(BossTargetInfo.prototype,"BossTargetInfo"),window.BossTargetInfo=BossTargetInfo;var HomeBoss=function(e){function t(){var t=e.call(this)||this;return t.homeBossLayer=1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_List.itemRenderer=HomeBossItem,this.m_ListData=new eui.ArrayCollection,this.m_List.dataProvider=this.m_ListData,this.addEvent(),this.m_BattleTimeMLab.text=GlobalConfig.jifengTiaoyueLg.st100516,this.m_ClearLab.text=GlobalConfig.jifengTiaoyueLg.st100517,this.m_BossTipsLab.text=GlobalConfig.jifengTiaoyueLg.st100479},t.prototype.addEvent=function(){this.m_LayerBossBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLayer,this),this.m_LayerBossBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLayer,this),this.m_LayerBossBtn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLayer,this),MessageCenter.ins().addListener(MessageDef.HOMEBOSS_BOSSMSG_UPDATE,this.refBossMsg,this),this.m_ClearLab.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClearCD,this),this.m_BossTipsLab.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBossTips,this)},t.prototype.release=function(){this.m_Scroller.stopAnimation()},t.prototype.setData=function(e){this.homeBossLayer=e,this.m_LayerBossLab.text=GlobalConfig.jifengTiaoyueLg.st100467+e+GlobalConfig.jifengTiaoyueLg.st100383;var t=GlobalConfig.ins("PublicBossBaseConfig");if(t){var i=t.vipOpenlLimit[e-1];i&&(this.m_VipLab.text="VIP"+i+GlobalConfig.jifengTiaoyueLg.st100512)}switch(e){case HomeBossLayerType.LAYERTYPE1:this.m_LayerBossBtn1.addChild(this.m_LayerSelectImg);break;case HomeBossLayerType.LAYERTYPE2:this.m_LayerBossBtn2.addChild(this.m_LayerSelectImg);break;case HomeBossLayerType.LAYERTYPE3:this.m_LayerBossBtn3.addChild(this.m_LayerSelectImg)}this.refBossMsg()},t.prototype.onClickLayer=function(e){var t=UserVip.ins().lv,i=GlobalConfig.ins("PublicBossBaseConfig");if(i)switch(e.currentTarget){case this.m_LayerBossBtn1:var o=i.vipOpenlLimit[HomeBossLayerType.LAYERTYPE1-1];o&&(t>=o?this.setData(HomeBossLayerType.LAYERTYPE1):UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100509,[o,HomeBossLayerType.LAYERTYPE1])));break;case this.m_LayerBossBtn2:var o=i.vipOpenlLimit[HomeBossLayerType.LAYERTYPE2-1];o&&(t>=o?this.setData(HomeBossLayerType.LAYERTYPE2):UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100509,[o,HomeBossLayerType.LAYERTYPE2])));break;case this.m_LayerBossBtn3:var o=i.vipOpenlLimit[HomeBossLayerType.LAYERTYPE3-1];o&&(t>=o?this.setData(HomeBossLayerType.LAYERTYPE3):UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100509,[o,HomeBossLayerType.LAYERTYPE3])))}},t.prototype.refBossMsg=function(){var e=[],t=HomeBossModel.getInstance;switch(this.homeBossLayer){case HomeBossLayerType.LAYERTYPE1:e=t.layerBossData1.values;break;case HomeBossLayerType.LAYERTYPE2:e=t.layerBossData2.values;break;case HomeBossLayerType.LAYERTYPE3:e=t.layerBossData3.values}for(var i=HomeBossModel.getInstance,o=[],s=[],n=[],r=[],a=0;a<e.length;a++){var l=e[a],h=i.vipBossConfigData.get(l.id),c=GameLogic.ins().actorModel.level,u=UserZs.ins()?UserZs.ins().lv:0,d=h.level,p=h.zsLevel,f=h.zsLevel?10*h.zsLevel+80:h.level,g=u?10*u+80:c;l.zlv=f,p?u>=p?g>=f+50?n.push(l):l.hp<=0?s.push(l):o.push(l):p>u&&r.push(l):g>=d+50?n.push(l):d>g?r.push(l):l.hp<=0?s.push(l):o.push(l)}o.sort(this.sorLvUp),s.sort(this.sorLvUp),n.sort(this.sorLvUp),r.sort(this.sorLvDown);var _=o.concat(s,n,r);this.m_Scroller.stopAnimation(),this.m_Scroller&&this.m_Scroller.viewport&&(this.m_Scroller.viewport.scrollV=0),this.m_ListData.replaceAll(_)},t.prototype.sorLvUp=function(e,t){return t.zlv-e.zlv},t.prototype.sorLvDown=function(e,t){return e.zlv-t.zlv},t.prototype.onClearCD=function(){var e=HomeBossModel.getInstance.battleCDPrice;e>0?WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100513,[e]),function(){var e=GameLogic.ins().actorModel.yb,t=HomeBossModel.getInstance.battleCDPrice;e>t?UserBoss.ins().sendClearVipBossCD():UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008)},this):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100514)},t.prototype.onClickBossTips=function(){ViewManager.ins().open(HomeBossRemindWin)},Object.defineProperty(t.prototype,"refCDLab",{set:function(e){this.m_RefCDLab.text=e+GlobalConfig.jifengTiaoyueLg.st100515},enumerable:!0,configurable:!0}),t}(eui.Component);__reflect(HomeBoss.prototype,"HomeBoss"),window.HomeBoss=HomeBoss;var HomeBossItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_ItemList.itemRenderer=ItemBase,this.listData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.listData,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100521,this.m_DeadImg.text=GlobalConfig.jifengTiaoyueLg.st100522,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100523,this.m_BattleBtn.label=GlobalConfig.jifengTiaoyueLg.st100046},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.m_DeadImg.visible=!1,this.m_BattleBtn.visible=!1,this.m_NoBattleLab.visible=!1;var t=this.data,i=HomeBossModel.getInstance,o=i.vipBossConfigData.get(t.id);if(o){this.listData.removeAll(),this.listData.replaceAll(o.desc),this.listData.refresh();var s=GlobalConfig.ins("MonstersConfig"),n=s[o.bossId],r=o.zsLevel?o.zsLevel+GlobalConfig.jifengTiaoyueLg.st100067:o.level+GlobalConfig.jifengTiaoyueLg.st100093;this.m_BossNameLvLab.textFlow=[{text:r,style:{stroke:1,strokeColor:16777215}},{text:n.name+"",style:{textColor:14793320,stroke:1,strokeColor:3881787}}],this.m_ElementImg.source=ResDataPath.GetElementImgName(n.elementType),this.m_BossHead.source=ResDataPath.getBossHeadImage(n.head)}this.m_Bar.value=t.hp,t.ownerNmae?this.m_BossHaver.text=t.ownerNmae:this.m_BossHaver.text=GlobalConfig.jifengTiaoyueLg.st100280,this.m_Tab.source="comp_22_53_2_png",this.state_label.text=GlobalConfig.jifengTiaoyueLg.st100518;var a=GameLogic.ins().actorModel.level,l=UserZs.ins()?UserZs.ins().lv:0,h=o.level,c=o.zsLevel,u=l?10*l+80:a,d=o.zsLevel?10*o.zsLevel+80:o.level;t.hp<=0&&(this.m_Tab.source="comp_22_53_1_png",this.state_label.text=GlobalConfig.jifengTiaoyueLg.st100519),o&&(c?l>=c?u>=d+50?(this.m_NoBattleLab.visible=!0,this.m_NoBattleLab.text=GlobalConfig.jifengTiaoyueLg.st100520):t.hp<=0?this.m_DeadImg.visible=!0:this.m_BattleBtn.visible=!0:c>l&&(this.m_NoBattleLab.visible=!0,this.m_NoBattleLab.text=c+GlobalConfig.jifengTiaoyueLg.st100309):u>=h+50?(this.m_NoBattleLab.visible=!0,this.m_NoBattleLab.text=GlobalConfig.jifengTiaoyueLg.st100520):h>u?(this.m_NoBattleLab.visible=!0,this.m_NoBattleLab.text=h+GlobalConfig.jifengTiaoyueLg.st100310):t.hp<=0?this.m_DeadImg.visible=!0:this.m_BattleBtn.visible=!0),this.m_BattleBtn.name="homeBossBtn"},t.prototype.onClickBattle=function(){UserBoss.ins().sendChallenge(this.data.id)},t}(eui.ItemRenderer);__reflect(HomeBossItem.prototype,"HomeBossItem"),window.HomeBossItem=HomeBossItem;var HomeBossPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100467,t.mWindowHelpId=26,t.skinName="HomeBossPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initData(),HomeBossModel.getInstance.initTypeData()},t.prototype.removeEvent=function(){MessageCenter.ins().removeListener(MessageDef.HOMEBOSS_PANEL_CHANGE,this.onChangeUI,this)},t.prototype.open=function(){MessageCenter.ins().addListener(MessageDef.HOMEBOSS_PANEL_CHANGE,this.onChangeUI,this),this.addTimer()},t.prototype.close=function(){this.removeEvent(),this.removeTimer()},t.prototype.release=function(){this.removeEvent(),this.removeTimer(),this.m_HomeBoss.release()},t.prototype.addTimer=function(){this.removeTimer(),TimerManager.ins().doTimer(1e3,0,this.refTime,this),this.refTime(),TimerManager.ins().doTimer(1e4,0,this.refBossData,this),this.refBossData()},t.prototype.removeTimer=function(){TimerManager.ins().remove(this.refBossData,this),TimerManager.ins().remove(this.refTime,this)},t.prototype.initData=function(){this.m_HomeBoss.visible=!1,this.m_SurfaceGroup.visible=!0,this.m_HomeBossPanelItem1.initData(HomeBossLayerType.LAYERTYPE1),this.m_HomeBossPanelItem2.initData(HomeBossLayerType.LAYERTYPE2),this.m_HomeBossPanelItem3.initData(HomeBossLayerType.LAYERTYPE3)},t.prototype.onChangeUI=function(e){this.m_HomeBoss.setData(e),this.m_HomeBoss.visible=!0,this.m_SurfaceGroup.visible=!1},t.prototype.refTime=function(){var e=HomeBossModel.getInstance,t=GameServer.GetSurplusTime(e.layerBossRefCD1),i=GameServer.GetSurplusTime(e.layerBossRefCD2),o=GameServer.GetSurplusTime(e.layerBossRefCD3),s=Math.max(0,(e.layerBossRefCD1||0)-GameServer.serverTime),n=Math.max(0,(e.layerBossRefCD2||0)-GameServer.serverTime),r=Math.max(0,(e.layerBossRefCD3||0)-GameServer.serverTime);0>=s?this.m_HomeBossPanelItem1.m_NextRefTiemLab.visible&&(this.m_HomeBossPanelItem1.m_NextRefTiemLab.visible=!this.m_HomeBossPanelItem1.m_NextRefTiemLab.visible,UserBoss.ins().sendGetVipBossMsg()):(this.m_HomeBossPanelItem1.m_NextRefTiemLab.visible||(this.m_HomeBossPanelItem1.m_NextRefTiemLab.visible=!this.m_HomeBossPanelItem1.m_NextRefTiemLab.visible),this.m_HomeBossPanelItem1.m_NextRefTiemLab.text=t),0>=n?this.m_HomeBossPanelItem2.m_NextRefTiemLab.visible&&(this.m_HomeBossPanelItem2.m_NextRefTiemLab.visible=!this.m_HomeBossPanelItem2.m_NextRefTiemLab.visible,UserBoss.ins().sendGetVipBossMsg()):(this.m_HomeBossPanelItem2.m_NextRefTiemLab.visible||(this.m_HomeBossPanelItem2.m_NextRefTiemLab.visible=!this.m_HomeBossPanelItem2.m_NextRefTiemLab.visible),this.m_HomeBossPanelItem2.m_NextRefTiemLab.text=i),0>=r?this.m_HomeBossPanelItem3.m_NextRefTiemLab.visible&&(this.m_HomeBossPanelItem3.m_NextRefTiemLab.visible=!this.m_HomeBossPanelItem3.m_NextRefTiemLab.visible,UserBoss.ins().sendGetVipBossMsg()):(this.m_HomeBossPanelItem3.m_NextRefTiemLab.visible||(this.m_HomeBossPanelItem3.m_NextRefTiemLab.visible=!this.m_HomeBossPanelItem3.m_NextRefTiemLab.visible),this.m_HomeBossPanelItem3.m_NextRefTiemLab.text=o);var a=this.m_HomeBoss;switch(a.homeBossLayer){case HomeBossLayerType.LAYERTYPE1:a.refCDLab=t;break;case HomeBossLayerType.LAYERTYPE2:a.refCDLab=i;break;case HomeBossLayerType.LAYERTYPE3:a.refCDLab=o}var l=GameServer.GetSurplusTime(e.cdJoin),h=Math.max(0,(e.cdJoin||0)-GameServer.serverTime);h>0?(a.m_BattleTimeLab.visible||(a.m_BattleTimeLab.visible=!a.m_BattleTimeLab.visible,a.m_BattleTimeMLab.visible=a.m_BattleTimeLab.visible,a.m_ClearLab.visible=a.m_BattleTimeLab.visible),a.m_BattleTimeLab.text=l):a.m_BattleTimeLab.visible&&(a.m_BattleTimeLab.visible=!a.m_BattleTimeLab.visible,a.m_BattleTimeMLab.visible=a.m_BattleTimeLab.visible,a.m_ClearLab.visible=a.m_BattleTimeLab.visible)},t.prototype.refBossData=function(){UserBoss.ins().sendGetVipBossMsg()},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(HomeBossPanel.prototype,"HomeBossPanel",["ICommonWindowTitle"]),window.HomeBossPanel=HomeBossPanel;var HomeBossPanelItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_RedPoint.visible=!1,this.m_ItemList.itemRenderer=ItemBase,this.listData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.listData,this.m_pTouchGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickKillBoss,this),MessageCenter.ins().addListener(MessageDef.HOMEBOSS_BOSSMSG_UPDATE,this.refRedPoint,this),this.m_KillBossImg.label=GlobalConfig.jifengTiaoyueLg.st100510,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100511,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100467},t.prototype.initData=function(e){this.layerLv=e,this.m_LayerNumImg.text=e+GlobalConfig.jifengTiaoyueLg.st100383,this.m_Bg.source="comp_289_231_0"+e+"_png";var t=GlobalConfig.ins("PublicBossBaseConfig"),i=GlobalConfig.ins("PublicBossConfig");if(t){var o=t.vipRefreshTime[e-1];o&&(this.m_RefTiemLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100508,[o]));var s=t.vipOpenTips[e-1];s&&(this.m_OpenLvLab.text=s);var n=t.vipOpenlLimit[e-1];if(n&&(this.m_VipLvLab.text="VIP"+n+GlobalConfig.jifengTiaoyueLg.st100391,this.vipLv=parseInt(n)),i){var r=t.vipAwardShow[e-1],a=i[r][0];this.listData.replaceAll(a.desc)}}},t.prototype.onClickKillBoss=function(){var e=UserVip.ins().lv;e>=this.vipLv?MessageCenter.ins().dispatch(MessageDef.HOMEBOSS_PANEL_CHANGE,this.layerLv):UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100509,[this.vipLv,this.layerLv]))},t.prototype.refRedPoint=function(){this.m_RedPoint.visible=HomeBossModel.getInstance.checkLayerRedPoint(this.layerLv)},t}(eui.Component);__reflect(HomeBossPanelItem.prototype,"HomeBossPanelItem"),window.HomeBossPanelItem=HomeBossPanelItem;var KfBossItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBase},t.SetRewardData=function(e,t,i){var o=i.winnerReward[0];e.data=RewardData.ToRewardData(o),e.validateNow(),100==o.rate?t.text=GlobalConfig.jifengTiaoyueLg.st100480:t.text=GlobalConfig.jifengTiaoyueLg.st100481,e.showLegendEffe()},t.prototype.dataChanged=function(){null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig);var e=this.data,i=GlobalConfig.kuafuBossConfig[e.id],o=this.config=i[0];t.SetRewardData(this.item,this.chanceTxt,o),this.validateNow(),this.list.dataProvider=new eui.ArrayCollection(o.desc);var s=e.isDie;this.infoTxt.touchEnabled=!0,this.infoTxt.addEventListener(egret.TextEvent.LINK,this.onLink,this),this.infoTxt0.touchEnabled=!0,this.infoTxt0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.infoTxtKill,this),this.infoTxt.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st100484+'：<u><a href="event:2">'+e.people+"人</a></u>"+(e.challengeing?'<font color="#008f22">'+GlobalConfig.jifengTiaoyueLg.st100485+"</font>":"")),this.infoTxt.visible=!s,this.infoTxt0.visible=!1,this.bar.value=e.hp;var n=this.monstersConfig[o.bossId];if(e.maxKillScore>0?(this.barGroup.visible=!0,this.pigBar.maximum=e.maxKillScore,this.pigBar.value=e.killScore,this.timeTxt.visible=!1):(this.barGroup.visible=!1,this.timeTxt.visible=s),this.timeTxt.visible&&(this.updateTime(),TimerManager.ins().doTimer(100,0,this.updateTime,this)),this.challengeBtn.visible=!s,this.challengeBtn.name="kfBoss",this.challengeBtn.visible){var r=(UserBoss.ins().cdTime-egret.getTimer())/1e3;e.challengeing&&r>0?(this.challengeBtn.enabled=!1,this.challengeBtn.touchEnabled=!1):(this.challengeBtn.label=GlobalConfig.jifengTiaoyueLg.st100046,this.challengeBtn.enabled=!0,this.challengeBtn.touchEnabled=!0)}this.bar.visible=!0,n&&(this.head.source=ResDataPath.getBossHeadImage(n.head),this.nameTxt.text=""+n.name,this.pigDec.text=GlobalConfig.jifengTiaoyueLg.st100503+n.name,this.m_ElementImg.source=ResDataPath.GetElementImgName(n.elementType))},t.prototype.updateTime=function(){var e=this.data,t=e.reliveTime-egret.getTimer();this.timeTxt.text=DateUtils.getFormatBySecond(Math.floor(t/1e3),1)+GlobalConfig.jifengTiaoyueLg.st100494,0>=t&&(UserBoss.ins().sendBossList(),TimerManager.ins().remove(this.updateTime,this))},t.prototype.infoTxtKill=function(e){ViewManager.ins().open(WildBossRecordWin,this.data.id)},t.prototype.onLink=function(e){var t=this.data;switch(e.text){case"1":ViewManager.ins().open(WildBossRecordWin,t.id);break;case"2":ViewManager.ins().open(WildBossJoinWin,t.id)}},t}(eui.ItemRenderer);__reflect(KfBossItem.prototype,"KfBossItem"),window.KfBossItem=KfBossItem;var KfBossPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100466+"BOSS",t.skinName="KfBossPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=KfBossItem,this.listData=new eui.ArrayCollection,this.list.dataProvider=this.listData
},t.prototype.open=function(){this.observe(MessageDef.KF_BOSS_LIST_DATA,this.setData),UserBoss.ins().sendGetKfBossList(),this.setData()},t.prototype.close=function(){this.removeObserve()},t.prototype.release=function(){this.close(),this.removeObserve(),this.m_Scroller.stopAnimation()},t.prototype.setData=function(){var e=UserBoss.ins().kFbossInfo.slice();e.sort(this.compareFn),this.listData.replaceAll(e)},t.prototype.compareFn=function(e,t){var i=GlobalConfig.kuafuBossConfig[e.id][0],o=GlobalConfig.kuafuBossConfig[t.id][0],s=i.level,n=i.zsLevel,r=1e3*n+s,a=o.level,l=o.zsLevel,h=1e3*l+a;return e.openChallenge&&!t.openChallenge?-1:!e.openChallenge&&t.openChallenge?1:e.openChallenge&&t.openChallenge?e.isDie&&!t.isDie?1:!e.isDie&&t.isDie?-1:e.isDie||t.isDie?h>r?-1:1:h>r?1:-1:h>r?-1:1},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(KfBossPanel.prototype,"KfBossPanel",["ICommonWindowTitle"]),window.KfBossPanel=KfBossPanel;var PersonalBossPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100464+"BOSS",t.skinName="PersonalBossPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=BossItem,this.arrData=new eui.ArrayCollection,this.list.dataProvider=this.arrData},t.prototype.open=function(){this.observe(MessageDef.FB_COUNT_UPDATE,this.setOneData),this.setOneData()},t.prototype.setOneData=function(){var e=DailyFubenConfig.getPersonalBossFbIds().sort(this.sortFun);e&&this.arrData&&(this.arrData.removeAll(),this.arrData.replaceAll(e),this.arrData.refresh())},t.prototype.close=function(){TimerManager.ins().remove(this.setOneData,this)},t.prototype.release=function(){this.close(),this.removeObserve(),this.m_Scroller.stopAnimation()},t.prototype.sortFun=function(e,t){var i=UserFb.ins().getFbDataById(e.id),o=UserFb.ins().getFbDataById(t.id);if(i&&o){var s=i.getCount(),n=o.getCount();if(s>n)return-1;if(n>s)return 1;var r=e.levelLimit,a=e.zsLevel,l=1e3*a+r,h=t.levelLimit,c=t.zsLevel,u=1e3*c+h,d=GameGlobal.actorModel.level,p=GameGlobal.zsModel.lv,f=1e3*p+d;return 0==s?l-u:f>=l&&f>=u?u-l:f>=l?-1:f>=u?1:l-u}},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(PersonalBossPanel.prototype,"PersonalBossPanel",["ICommonWindowTitle"]),window.PersonalBossPanel=PersonalBossPanel;var PublicBossAttack=function(e){function t(){var t=e.call(this)||this;return t.skinName="PublicBossAttackSkin",t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(t,e),t.prototype.open=function(){this.setTween()},t.prototype.close=function(){egret.Tween.removeTweens(this.group)},t.prototype.onTweenGroupComplete=function(){return ViewManager.ins().isShow(t)?void this.groupTween.play(0):void(this.groupTween&&this.groupTween.removeEventListener("complete",this.onTweenGroupComplete,this))},t.prototype.setTween=function(){egret.Tween.get(this.group,{loop:!0}).to({alpha:.3},750,egret.Ease.sineIn).to({alpha:1},700,egret.Ease.sineOut)},t.LAYER_LEVEL=LayerManager.UI_HUD,t}(BaseEuiView);__reflect(PublicBossAttack.prototype,"PublicBossAttack"),window.PublicBossAttack=PublicBossAttack;var PublicBossOwnerChange=function(e){function t(){var t=e.call(this)||this;return t.skinName="PublicBossOwnerChangeSkin",t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.label.text=""+e[0]+GlobalConfig.jifengTiaoyueLg.st101693+(""+e[1]),this.m_Timer&&(egret.clearTimeout(this.m_Timer),this.m_Timer=null),this.m_Timer=egret.setTimeout(this._TimeOut,this,3e3)},t.prototype._TimeOut=function(){ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(PublicBossOwnerChange.prototype,"PublicBossOwnerChange"),window.PublicBossOwnerChange=PublicBossOwnerChange;var PublicBossPanel=function(e){function t(){var t=e.call(this)||this;return t.isfirst=!0,t.cont=0,t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100463+"BOSS",t.skinName="PublicBossPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=BossItem,this.listData=new eui.ArrayCollection,this.list.dataProvider=this.listData,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100476,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100477,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100478,this.setting.text=GlobalConfig.jifengTiaoyueLg.st100479},t.prototype.open=function(){this.observe(MessageDef.PUBLIC_BOSS_LIST_DATA,this.setData),this.AddClick(this.setting,this.onLink),this.initData(),this._UpdateTime(),TimerManager.ins().doTimer(1e3,0,this._UpdateTime,this)},t.prototype.close=function(){TimerManager.ins().remove(this._UpdateTime,this)},t.prototype.destroyList=function(){for(var e=this.list.numChildren,t=0;e>t;t++){var i=this.list.getChildAt(t);i instanceof BossItem&&i.destroy()}},t.prototype.release=function(){this.close(),this.destroyList(),this.removeObserve(),this.m_Scroller.stopAnimation(),this.dataRemoveTick()},t.prototype._UpdateTime=function(){null==this.publicBossBaseConfig&&(this.publicBossBaseConfig=GlobalConfig.ins("PublicBossBaseConfig")),UserBoss.ins().challengeCount>=this.publicBossBaseConfig.maxCount?this.lefttimeTF.text=GlobalConfig.jifengTiaoyueLg.st100474:this.lefttimeTF.text=GlobalConfig.jifengTiaoyueLg.st100475+("：("+GameServer.GetSurplusTime(UserBoss.ins().restoreTime)+")")},t.prototype.initData=function(){this.setData()},t.prototype.setData=function(){null==this.publicBossBaseConfig&&(this.publicBossBaseConfig=GlobalConfig.ins("PublicBossBaseConfig")),this.challengeCountTxt.text=UserBoss.ins().challengeCount+"/"+this.publicBossBaseConfig.maxCount;for(var e=UserBoss.ins().bossInfo.slice(),t=e.length,i=0;t>i;i++)e[i].selectAutoFight=UserBoss.ins().getAutoFightByIndex(e[i].id-1);e.sort(this.compareFn),this.destroyList(),this.dataRemoveTick(),this.listData.removeAll(),this.listData.replaceAll(e)},t.prototype.dataAddTick=function(e){this.dataRemoveTick(),TimerManager.ins().doTimer(50,e,this.updateDataList,this)},t.prototype.dataRemoveTick=function(){TimerManager.ins().remove(this.updateDataList,this)},t.prototype.updateDataList=function(){this.initData()},t.prototype.compareFn=function(e,t){var i=GlobalConfig.publicBossConfig[e.id][0],o=GlobalConfig.publicBossConfig[t.id][0],s=i.level,n=i.zsLevel,r=1e3*n+s,a=o.level,l=o.zsLevel,h=1e3*l+a;return e.selectAutoFight&&!t.selectAutoFight?-1:!e.selectAutoFight&&t.selectAutoFight?1:e.openChallenge&&!t.openChallenge?-1:!e.openChallenge&&t.openChallenge?1:e.openChallenge&&t.openChallenge?e.isDie&&!t.isDie?1:!e.isDie&&t.isDie?-1:e.isDie||t.isDie?h>r?-1:1:h>r?1:-1:h>r?-1:1},t.prototype.onLink=function(){ViewManager.ins().open(PubBossRemindWin)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(PublicBossPanel.prototype,"PublicBossPanel",["ICommonWindowTitle"]),window.PublicBossPanel=PublicBossPanel;var PublicBossRebirthPanel=function(e){function t(t,i){var o=e.call(this)||this;return o.skinName="PublicBossRebirthPanelSkin",o.challengeFunc=t,o.closeFunc=i,o}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.closeTopBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.check.addEventListener(egret.Event.CHANGE,this.onTap,this),this.challengeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.updata=function(){var e=GlobalConfig.publicBossConfig[PlayFun.ins().index][0];if(e){var t=GlobalConfig.monstersConfig[e.bossId];this.head.source=ResDataPath.getBossHeadImage(t.head);var i=e.zsLevel>0?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[e.zsLevel]):LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[e.level]);this.txtTitle.text=i+" "+t.name,this.m_ElementImg.source=ResDataPath.GetElementImgName(t.elementType)}},t.prototype.onTap=function(e){switch(e.currentTarget){case this.closeTopBtn:this.closeFunc&&this.closeFunc();break;case this.challengeBtn:this.challengeFunc&&this.challengeFunc();break;case this.check:PlayFun.ins().noTips=this.check.selected}},t.prototype.release=function(){this.closeTopBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.check.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.challengeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.challengeFunc=null,this.closeFunc=null},t}(eui.Component);__reflect(PublicBossRebirthPanel.prototype,"PublicBossRebirthPanel"),window.PublicBossRebirthPanel=PublicBossRebirthPanel;var PublicBossRewardPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PublicBossRewardSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.list.itemRenderer=ItemBase,this.list1.itemRenderer=ItemBase,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st101820,this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st100525,this.languageTxt1.text=GlobalConfig.jifengTiaoyueLg.st101821,this.challenge.label=GlobalConfig.jifengTiaoyueLg.st101692},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0];this.m_bg.init("PublicBossRewardPanel",GlobalConfig.jifengTiaoyueLg.st101387);var o,s=null;o=GameMap.IsPublicBoss()||GameMap.IsHomeBoss()?GlobalConfig.publicBossConfig:GameMap.IsSyBoss()?GlobalConfig.ins("PaidBossConfig"):GlobalConfig.kuafuBossConfig;var n;for(var r in o){if(s)break;n=o[r];for(var a=0;a<n.length;a++)if(n[a]&&n[a].bossId==i){s=n[a];break}}null!=s&&(this.AddClick(this.challenge,this._OnClick),this.observe(MessageDef.PUBLIC_BOSS_OWNER_CHNAGE,this._UpdateOwner),s.zsLevel>0?this.bossTitle.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[s.zsLevel]):this.bossTitle.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[s.level]),GameMap.IsPublicBoss()?(BossItem.SetRewardData(this.item,this.chanceTxt,s),this.bossTitle.text+=GlobalConfig.jifengTiaoyueLg.st101388):GameMap.IsHomeBoss()?(BossItem.SetRewardData(this.item,this.chanceTxt,s),this.bossTitle.text+=GlobalConfig.jifengTiaoyueLg.st100467):GameMap.IsSyBoss()?(BossItem.SetRewardData(this.item,this.chanceTxt,s),this.bossTitle.text+=GlobalConfig.jifengTiaoyueLg.st100524):(KfBossItem.SetRewardData(this.item,this.chanceTxt,s),this.bossTitle.text+=GlobalConfig.jifengTiaoyueLg.st101389),this.list.dataProvider=new eui.ArrayCollection(s.desc),this.list1.dataProvider=new eui.ArrayCollection(s.desc),this._UpdateOwner())},t.prototype.close=function(){},t.prototype.OnClose=function(e){ViewManager.ins().close(this)},t.prototype._UpdateOwner=function(){var e=UserBoss.ins().GetCurOwnerData();e&&e.name&&""!=e.name?this.curName.text=e.name:this.curName.text=GlobalConfig.jifengTiaoyueLg.st100280},t.prototype._OnClick=function(){BossOwnerInfo.ClickOwner()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(PublicBossRewardPanel.prototype,"PublicBossRewardPanel"),window.PublicBossRewardPanel=PublicBossRewardPanel;var WildBossJoinItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.bg.visible=this.itemIndex%2==0,e.time?this.txt0.text=DateUtils.GetFormatSecond(e.time,6):this.txt0.text=this.itemIndex+1+"",this.txt1.text=e.name,CommonUtils.labelIsOverLenght(this.txt2,e.value)},t}(eui.ItemRenderer);__reflect(WildBossJoinItem.prototype,"WildBossJoinItem");var WildBossJoinItemData=function(){function e(){}return e}();__reflect(WildBossJoinItemData.prototype,"WildBossJoinItemData"),window.WildBossJoinItem=WildBossJoinItem,window.WildBossJoinItemData=WildBossJoinItemData;var ZSBossCDPanel=function(){function e(){}return e.Show=function(e,t){void 0===t&&(t=null);var i=new eui.Component;i.skinName="ZSBossCDSkin";var o=i.label;WarnWin.isRelease=!0,o.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st101891),i.check.selected=e,i.check.addEventListener(egret.Event.CHANGE,function(){GameGlobal.ZsBossModel.autoClear=i.check.selected,i.check.selected&&UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101392)},null),WarnWin.ShowContent(i,function(){GameGlobal.ZsBossModel.checkIsMoreMoney()&&(GameGlobal.ZsBossModel.autoClear=i.check.selected,t?t():ZsBoss.ins().sendBuyCd())},null)},e}();__reflect(ZSBossCDPanel.prototype,"ZSBossCDPanel"),window.ZSBossCDPanel=ZSBossCDPanel;var SyBossAnim=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.setData=function(e,t){var i=GlobalConfig.ins("MonstersConfig")[e];i&&(this.initMc(i),this.m_BossName.text=i.name);var o=SyBossModel.getInstance,s=o.syBossDic.get(t);s&&(this.m_BloodBar.value=s.hp),this.m_ElementImg.source=ResDataPath.GetElementImgName(i.elementType)},t.prototype.initMc=function(e){this.bossMc||(this.bossMc=new MovieClip,this.bossMc.x=this.m_AnimGroup.width/2,this.bossMc.y=this.m_AnimGroup.height/2,this.m_AnimGroup.addChild(this.bossMc)),this.bossMc.loadUrl(ResDataPath.GetMonsterBodyPath(e.avatar+"_3s"),!0,-1)},t.prototype.release=function(){DisplayUtils.dispose(this.bossMc),this.bossMc=null},t}(eui.Component);__reflect(SyBossAnim.prototype,"SyBossAnim"),window.SyBossAnim=SyBossAnim;var SyBossItem=function(e){function t(){var t=e.call(this)||this;return t.isCanFlage=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent(),this.m_Time.visible=!0},t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.release=function(){this.removeTick()},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=SyBossModel.getInstance;this.m_selectImg.visible=!1;var i=this.data,o=GlobalConfig.ins("PaidBossConfig")[i][0];if(o){var s=GlobalConfig.ins("MonstersConfig")[o.bossId];this.m_BossHead.source=ResDataPath.getBossHeadImage(s.head),this.m_BossName.text=s.name,this.m_ElementImg.source=ResDataPath.GetElementImgName(s.elementType)}if(t.selectBossIndex==this.itemIndex&&(this.m_selectImg.visible=!0),o.zsLevel>0){this.m_BossLv.text=GlobalConfig.jifengTiaoyueLg.st100536+o.zsLevel;var n=UserZs.ins()?UserZs.ins().lv:0;n>=o.zsLevel?(this.m_BossLv.textColor=Color.FontColor,this.m_Time.textColor=Color.Green,this.isCanFlage=!0):(this.m_BossLv.textColor=Color.Red,this.m_Time.textColor=Color.Red,this.isCanFlage=!1,this.m_Time.text=GlobalConfig.jifengTiaoyueLg.st100219)}else{this.m_BossLv.text="Lv."+o.level;var r=GameLogic.ins().actorModel.level;r>=o.level?(this.m_BossLv.textColor=Color.FontColor,this.m_Time.textColor=Color.Green,this.isCanFlage=!0):(this.m_BossLv.textColor=Color.Red,this.m_Time.textColor=Color.Red,this.isCanFlage=!1,this.m_Time.text=GlobalConfig.jifengTiaoyueLg.st100219)}var a=t.syBossDic.get(i);a&&(a.isBossDead?this.m_KillImg.visible=!0:this.m_KillImg.visible=!1,this.addTick());var l=t.checkRedPoint(i);l?this.m_RedPoint.visible=!0:this.m_RedPoint.visible=!1},t.prototype.addTick=function(){this.playTime()},t.prototype.removeTick=function(){var e=SyBossModel.getInstance,t=this.data,i=e.syBossDic.get(t);i.isBossDead?this.m_KillImg.visible=!0:this.m_KillImg.visible=!1},t.prototype.playTime=function(){if(this.isCanFlage){var e=SyBossModel.getInstance,t=this.data,i=e.syBossDic.get(t);if(i)if(i.isBossDead){this.m_KillImg.visible=!0,this.m_Time.textColor=Color.Red,this.m_Time.text=GameServer.GetSurplusTime(i.reliveTime,DateUtils.TIME_FORMAT_1)+GlobalConfig.jifengTiaoyueLg.st102002;var o=Math.max(0,(i.reliveTime||0)-GameServer.serverTime);this.m_Time.visible=!0,0>=o&&(e.isSendGetData&&(e.isSendGetData=!1,SyBossSproto.ins().sendGetSyBossInitMsg()),this.m_Time.visible=!1,this.removeTick())}else{this.m_KillImg.visible=!1,this.m_Time.textColor=Color.Green,this.m_Time.text=GameServer.GetSurplusTime(i.runTime,DateUtils.TIME_FORMAT_1)+GlobalConfig.jifengTiaoyueLg.st102003;var o=Math.max(0,(i.runTime||0)-GameServer.serverTime);this.m_Time.visible=!0,0>=o&&(e.isSendGetData&&(e.isSendGetData=!1,SyBossSproto.ins().sendGetSyBossInitMsg()),this.m_Time.visible=!1,this.removeTick())}}},t.prototype.onClick=function(){SyBossModel.getInstance.selectBossIndex=this.itemIndex,GameGlobal.MessageCenter.dispatch(SyBossEvt.SYBOSS_DATAUPDATE_MSG)},t}(eui.ItemRenderer);__reflect(SyBossItem.prototype,"SyBossItem"),window.SyBossItem=SyBossItem;var SyBossPanel=function(e){function t(t){var i=e.call(this)||this;return i.nowSelectId=0,i.sendMsgTime=0,i.name=GlobalConfig.jifengTiaoyueLg.st100524,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100524,i.skinName="SyBossPanelSkin",i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_ItemList.itemRenderer=ItemBase,this.itemListData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.itemListData,this.m_List.itemRenderer=SyBossItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,this.m_SeeBox.label=GlobalConfig.jifengTiaoyueLg.st100530,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100531,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100532,this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100533,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100534,this.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st100535},t.prototype.addViewEvent=function(){MessageCenter.ins().addListener(SyBossEvt.SYBOSS_DATAUPDATE_MSG,this.initData,this),this.m_SeeBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBox,this),this.m_MainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMainBtn,this)},t.prototype.removeEvent=function(){MessageCenter.ins().removeListener(SyBossEvt.SYBOSS_DATAUPDATE_MSG,this.initData,this),this.m_SeeBox.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBox,this),this.m_MainBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMainBtn,this)},t.prototype.open=function(){SyBossModel.getInstance.isSendGetData=!0,this.addViewEvent(),this.initData(),this.addTick()},t.prototype.close=function(){this.removeEvent(),this.removeTick()},t.prototype.addTick=function(){this.removeTick(),TimerManager.ins().doTimer(1e3,0,this.playTime,this),this.playTime()},t.prototype.removeTick=function(){TimerManager.ins().remove(this.playTime,this)},t.prototype.playTime=function(){SyBossModel.getInstance.isSendGetData||(this.sendMsgTime++,this.sendMsgTime>=10&&(this.sendMsgTime=0,SyBossModel.getInstance.isSendGetData=!0));for(var e=this.m_List.numChildren,t=0;e>t;t++){var i=this.m_List.getChildAt(t);i&&i instanceof SyBossItem&&i.addTick()}},t.prototype.release=function(){this.removeEvent();this.m_List.numChildren;this.m_SyBossAnim.release()},t.prototype.initData=function(){var e,t=SyBossModel.getInstance,i=GlobalConfig.ins("PaidBossConfig"),o=[],s=0;for(var n in i){if(o.push(parseInt(n)),t.selectBossIndex==s){e=i[n][0];var r=e.desc;this.itemListData.removeAll(),this.itemListData.replaceAll(r),this.itemListData.refresh()}s++}if(this.listData.replaceAll(o),e){this.nowSelectConfig=e;var a=UserBag.ins().getBagGoodsCountById(0,e.ticket.id),l=GlobalConfig.ins("ItemConfig")[e.ticket.id];l&&(this.m_NeedImg1.source=l.icon+"_png"),this.m_NeedLab1.text=a+"/"+e.ticket.count;var h=GameLogic.ins().actorModel.yb;this.m_NeedLab2.text=e.cost.count+"/"+h,this.m_SyBossAnim.setData(e.bossId,e.groupId);var c=t.checkIsRemind(e.groupId);this.nowSelectId=e.groupId,c?this.m_SeeBox.selected=!0:this.m_SeeBox.selected=!1;var u=t.syBossDic.get(e.groupId);if(u&&(u.ownerNmae&&""!=u.ownerNmae?this.m_GetBossPlayer.text=GlobalConfig.jifengTiaoyueLg.st100525+u.ownerNmae:this.m_GetBossPlayer.text=GlobalConfig.jifengTiaoyueLg.st100525+GlobalConfig.jifengTiaoyueLg.st100280),e.zsLevel>0){var d=UserZs.ins()?UserZs.ins().lv:0;d>=e.zsLevel?this.m_MainBtn.enabled=!0:this.m_MainBtn.enabled=!1}else{var p=GameLogic.ins().actorModel.level;p>=e.level?this.m_MainBtn.enabled=!0:this.m_MainBtn.enabled=!1}}},t.prototype.onClickBox=function(){var e=SyBossModel.getInstance,t=0;t=1==this.m_SeeBox.selected?e.syBossRemind+(1<<this.nowSelectId):e.syBossRemind-(1<<this.nowSelectId),SyBossSproto.ins().sendGetSyBossSettingMsg(t)},t.prototype.onClickMainBtn=function(){var e=SyBossModel.getInstance,t=this.nowSelectConfig,i=e.syBossDic.get(t.groupId);if(!i)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100526);if(i.isBossDead)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100527);var o=UserBag.ins().getBagGoodsCountById(0,t.ticket.id);if(o>=t.ticket.count)return SyBossSproto.ins().sendGetSyBossFight(t.groupId),void ViewManager.ins().close(BossWin);var s=GameLogic.ins().actorModel.yb;s>=t.cost.count?WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100528,[t.cost.count]),function(){SyBossSproto.ins().sendGetSyBossFight(t.groupId),ViewManager.ins().close(BossWin)},this):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100529)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(SyBossPanel.prototype,"SyBossPanel",["ICommonWindowTitle"]),window.SyBossPanel=SyBossPanel;var SyBossData=function(){function e(){}return Object.defineProperty(e.prototype,"isBossDead",{get:function(){SyBossModel.getInstance;if(this.reliveTime&&this.reliveTime>0){var e=Math.max(0,(this.reliveTime||0)-GameServer.serverTime);if(e>0)return!0}return!1},enumerable:!0,configurable:!0}),e}();__reflect(SyBossData.prototype,"SyBossData"),window.SyBossData=SyBossData;var SyBossEvt=function(){function e(){}return e.SYBOSS_DATAUPDATE_MSG="SYBOSS_DATAUPDATE_MSG",e}();__reflect(SyBossEvt.prototype,"SyBossEvt"),window.SyBossEvt=SyBossEvt;var SyBossModel=function(){function e(){this.selectBossIndex=0,this.syBossRemind=0,this.isSendGetData=!1,this.syBossDic=new Dictionary}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.setDic=function(e){this.syBossDic.clear();for(var t=0;t<e.length;t++){var i=new SyBossData;i.challengeing=e[t].challengeing,i.hp=e[t].hp,i.id=e[t].id,i.people=e[t].people,i.reliveTime=e[t].reliveTime+GameServer.serverTime,e[t].escapeTime?i.runTime=e[t].escapeTime+GameServer.serverTime:i.runTime=0+GameServer.serverTime,i.ownerNmae=e[t].ownerNmae,this.syBossDic.set(i.id,i)}},e.prototype.checkIsRemind=function(e){var t=this.syBossRemind&1<<e;return t>0?!0:!1},e.prototype.checkAllRedPoint=function(){var e=GlobalConfig.ins("PaidBossConfig");for(var t in e){var i=this.checkRedPoint(parseInt(t));if(i)return!0}return!1},e.prototype.checkRedPoint=function(e){if(this.checkIsRemind(e)){var t=this.syBossDic.get(e);if(t){var i=GlobalConfig.ins("PaidBossConfig")[e][0];if(i.zsLevel>0){var o=UserZs.ins()?UserZs.ins().lv:0;if(o<i.zsLevel)return!1}else{var s=GameLogic.ins().actorModel.level;if(s>=i.level)return!1}if(t.isBossDead)return!1;var n=UserBag.ins().getBagGoodsCountById(0,i.ticket.id);if(n>=i.ticket.count)return!0;var r=GameLogic.ins().actorModel.yb;if(r>=i.cost.count)return!0}}return!1},e}();__reflect(SyBossModel.prototype,"SyBossModel"),window.SyBossModel=SyBossModel;var SyBossSproto=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_paidboss_res,t.getSyBossInit),t.regNetMsg(S2cProtocol.sc_paidboss_setting_res,t.getSyBossSetting),t.regNetMsg(S2cProtocol.sc_paidboss_notice_res,t.getSyBossNotice),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getSyBossInit=function(e){var t=SyBossModel.getInstance;t.syBossRemind=e.bossRemind,t.setDic(e.boosInfos),GameGlobal.MessageCenter.dispatch(SyBossEvt.SYBOSS_DATAUPDATE_MSG)},t.prototype.getSyBossSetting=function(e){var t=SyBossModel.getInstance;t.syBossRemind=e.bossAutoFight,GameGlobal.MessageCenter.dispatch(SyBossEvt.SYBOSS_DATAUPDATE_MSG)},t.prototype.getSyBossNotice=function(e){var t=SyBossModel.getInstance,i=t.syBossDic.get(e.index);if(i){i.hp=100,i.reliveTime=0;var o=GlobalConfig.ins("PaidBossConfig")[e.index];if(o){var s=o[0];if(s){var n=GlobalConfig.ins("MonstersConfig")[s.bossId];n&&GameGlobal.MessageCenter.dispatch(MessageDef.HOMEBOSS_REF_MSG,[!0,n.name])}}}},t.prototype.sendGetSyBossInitMsg=function(){var e=new Sproto.cs_paidboss_req_request;this.Rpc(C2sProtocol.cs_paidboss_req,e)},t.prototype.sendGetSyBossSettingMsg=function(e){var t=new Sproto.cs_paidboss_setting_req_request;t.bossAutoFight=e,this.Rpc(C2sProtocol.cs_paidboss_setting_req,t)},t.prototype.sendGetSyBossFight=function(e){var t=new Sproto.cs_paidboss_fight_req_request;t.id=e,this.Rpc(C2sProtocol.cs_paidboss_fight_req,t)},t}(BaseSystem);__reflect(SyBossSproto.prototype,"SyBossSproto"),window.SyBossSproto=SyBossSproto;var BossBattleView=function(e){function t(){var t=e.call(this)||this;return t.m_MyTeamHp=0,t.m_EnemyTeamHp=0,t.fbType=0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="TenKillBattleSkin",this.touchEnabled=!1,Main.isLiuhai&&(this.bossinfo_group.y=140,this.m_MainGroup.y=147)},t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this),this.fbType=t[0],(this.fbType==UserFb.FB_TYPE_TEAM||this.fbType==UserFb.FB_TYPE_MATERIAL)&&(this.hudun.visible=!1,this.bloodBar.changeMaxBarNum=0,this.bloodBar.changeMaximum=0,this.bloodBar.changeValue=0),this.observe(MessageDef.TENKILL_BLOOD_UPDATE,this.refushTargetHp),this.observe(MessageDef.MJBT_UPDATE_ROLE,this.updateRoleState),this.observe(MessageDef.UPDATE_BOSS_HP,this.onBoss),this.observe(MessageDef.CREATE_CHARO_MSG,this.updateRoleState),this.initUIstate(),this.updateRoleState(),this.nameTxt.text=GlobalConfig.jifengTiaoyueLg.st102004},t.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.removeObserve(),this.release()},t.prototype.release=function(){this.removeTween()},t.prototype.removeTween=function(){egret.Tween.removeTweens(this.m_LeftBeginBg),egret.Tween.removeTweens(this.m_RightBeginBg)},t.prototype.initTenkillRole=function(){for(var e=EntityManager.ins().getRolesList(!0,!0),t=0;t<e.length;t++)for(var i=e[t],o=0;o<i.length;o++){var s=i[o];s&&s.playAction(EntityAction.STAND)}},t.prototype.initUIstate=function(){this.m_MainGroup.visible=!1,this.m_BeginGroup.visible=!0,this.m_BuffImg.visible=!1,this.m_VSImg.visible=!1,this.m_LeftBeginBg.x=-720,this.m_RightBeginBg.x=720,this.bossinfo_group.visible=!0,this.updateRoleState()},t.prototype.updateRoleState=function(){this.name_label.text=GameLogic.ins().actorModel.name;var e=SubRoles.ins().getSubRoleByIndex(0);e&&(this.head_image.source=ResDataPath.GetHeadMiniImgName2(e.job,e.sex));var t=[],i=[];if(t=EntityManager.ins().getRolesList(!0,!1),i=EntityManager.ins().getRolesList(!1,!0),t.length>0){var o=SubRoles.ins().getSubRoleByIndex(0);this.m_LeftNameLvLab.text=o.name,this.m_LeftHeadImg.source=ResDataPath.GetHeadMiniImgName2(o.job,o.sex)}if(i.length>0){var s=i[0][0].infoModel;this.m_RightHeadImg.source=ResDataPath.GetHeadMiniImgName2(s.job,s.sex),this.m_RightNameLvLab.text=s.name}this.refushTargetHp(),this.initTenkillRole()},t.prototype.refushTargetHp=function(){var e=[],t=[];e=EntityManager.ins().getRolesList(!0,!1),t=EntityManager.ins().getRolesList(!1,!0);var i=this.getMyTeamHp(e),o=this.getOtherTeamHp(t);this.m_LeftBloodBar.value=100*i,this.m_RightBloodBar.value=100*o,this.refushTargetRoleHp();var s=EntityManager.ins().getMonstersList();if(s.length>0)for(var n=0;n<s.length;n++){var r=s[n];r&&1==r.infoModel.monstersType&&this.upDataBossHP(r.infoModel)}},t.prototype.getMyTeamHp=function(e){for(var t,i,o=0,s=0,n=0;n<e.length;n++){i=e[n];for(var r=0;r<i.length;r++){t=i[r];var a=t.infoModel.getAtt(AttributeType.atHp);a>0&&(o+=a),s+=t.infoModel.getAtt(AttributeType.atMaxHp)}}var l=Math.max(this.m_MyTeamHp,s);return this.m_MyTeamHp=l,o>0?o/l:0},t.prototype.getOtherTeamHp=function(e){for(var t,i,o=0,s=0,n=0;n<e.length;n++){i=e[n];for(var r=0;r<i.length;r++){t=i[r];var a=t.infoModel.getAtt(AttributeType.atHp);a>0&&(o+=a),s+=t.infoModel.getAtt(AttributeType.atMaxHp)}}var l=Math.max(this.m_EnemyTeamHp,s);return this.m_EnemyTeamHp=l,o>0?o/l:0},t.prototype.onBoss=function(e){this.showBossinfo(e)},t.prototype.refushTargetRoleHp=function(){for(var e,t,i=0,o=0,s=EntityManager.ins().getRolesList(!0),n=0;n<s.length;n++){t=s[n];for(var r=0;r<t.length;r++)e=t[r],i+=e.infoModel.getAtt(AttributeType.atHp),o+=e.infoModel.getAtt(AttributeType.atMaxHp)}var a=Math.max(this.m_MyTeamHp,o);this.hudunbloodBar.maximum=a,this.hudunbloodBar.value=i},t.prototype.showBossinfo=function(e){this.bossinfo_group.visible=!0,this.fbType==UserFb.FB_TYPE_TEAM||this.fbType==UserFb.FB_TYPE_MATERIAL?this.hudun.visible=!1:this.hudun.visible=!0,null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig),this.currentBoss=this.monstersConfig[e.configID],this.nameTxt.text=this.currentBoss.name,this.head.source=ResDataPath.getBossHeadImage(this.currentBoss.head),this.lvTxt.text="Lv."+this.currentBoss.level,this.bloodBar.changeMaxBarNum=this.currentBoss.hpCount,this.bloodBar.changeMaximum=e.getAtt(AttributeType.atMaxHp);var t=e.getAtt(AttributeType.atHp);this.no_blood.visible=!1,this.bloodBar.changeValue=t},t.prototype.upDataBossHP=function(e){var t=e.getAtt(AttributeType.atHp),i=e.getAtt(AttributeType.atMaxHp);this.bloodBar.changeMaxBarNum=GlobalConfig.monstersConfig[e.configID].hpCount,this.bloodBar.changeMaximum=i,this.bloodBar.changeValue=t},t}(BaseEuiView);__reflect(BossBattleView.prototype,"BossBattleView"),ViewManager.ins().reg(BossBattleView,LayerManager.UI_HUD),window.BossBattleView=BossBattleView;var BossWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.personalBoss=new PersonalBossPanel,this.personalBoss.name=GlobalConfig.jifengTiaoyueLg.st100464,this.commonWindowBg.AddChildStack(this.personalBoss),this.publicBoss=new PublicBossPanel,this.publicBoss.name=GlobalConfig.jifengTiaoyueLg.st100463,this.commonWindowBg.AddChildStack(this.publicBoss),this.m_HomeBoss=new HomeBossPanel,this.m_HomeBoss.name=GlobalConfig.jifengTiaoyueLg.st100467,this.commonWindowBg.AddChildStack(this.m_HomeBoss),this.zsBoss=new ZsBossPanel,this.zsBoss.name=GlobalConfig.jifengTiaoyueLg.st100465,this.commonWindowBg.AddChildStack(this.zsBoss),this.kfBoss=new KfBossPanel,this.kfBoss.name=GlobalConfig.jifengTiaoyueLg.st100466,this.commonWindowBg.AddChildStack(this.kfBoss),this.m_SyBossPanel=new SyBossPanel,this.commonWindowBg.AddChildStack(this.m_SyBossPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];UserBoss.ins().init(),this.AddClick(this,this.onTap),this.observe(MessageDef.PUBLIC_BOSS_LIST_DATA,this.updateRedPoint),this.observe(MessageDef.KF_BOSS_LIST_DATA,this.updateRedPoint),this.observe(MessageDef.FB_COUNT_UPDATE,this.updateRedPoint),this.observe(MessageDef.HOMEBOSS_BOSSMSG_UPDATE,this.updateRedPoint),this.observe(SyBossEvt.SYBOSS_DATAUPDATE_MSG,this.updateRedPoint),this.commonWindowBg.OnAdded(this,e.length?e[0]:0),this.updateRedPoint(),ZsBoss.ins().sendGetBossList(),UserBoss.ins().sendGetVipBossMsg(),SyBossSproto.ins().sendGetSyBossInitMsg(),UserBoss.ins().restoreTime+3-GameServer.serverTime<=0&&(UserBoss.ins().sendInfo(),UserBoss.ins().isDoingTimer=!1)},t.prototype.updateRedPoint=function(){this.commonWindowBg.ShowTalRedPoint(1,UserBoss.ins().isCanChalleng()),this.commonWindowBg.ShowTalRedPoint(0,DailyFubenConfig.isCanChallenge()),this.commonWindowBg.ShowTalRedPoint(3,ZsBoss.ins().IsRedPoint()),this.commonWindowBg.ShowTalRedPoint(4,UserBoss.ins().isCanChallengKf()),this.commonWindowBg.ShowTalRedPoint(2,HomeBossModel.getInstance.checkAllRedPoint()),this.commonWindowBg.ShowTalRedPoint(5,SyBossModel.getInstance.checkAllRedPoint())},t.prototype.close=function(){MessageCenter.ins().removeAll(this),this.commonWindowBg.OnRemoved(),this.publicBoss.release(),this.personalBoss.release(),this.zsBoss.release(),this.kfBoss.release(),this.m_HomeBoss.release(),this.m_SyBossPanel.release()},t.prototype.onLink=function(e){var t=this;WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101694,[GlobalConfig.ins("WorldBossBaseConfig").clearCdCost]),function(){ViewManager.ins().close(t),UserBoss.ins().sendClearCD()
},this)},t.prototype.onTap=function(e){switch(e.currentTarget){default:if(e.target instanceof eui.Button){var t=e.target.parent.config;switch(e.target.name){case"pChallenge":UserFb.ins().getFbDataById(t.id).getCount()<=0?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100468):t.zsLevel<=UserZs.ins().lv&&t.levelLimit<=GameLogic.ins().actorModel.level?UserBag.ins().getSurplusCount()<UserBag.BAG_ENOUGH?BagFullTipsPanel.Open():(UserFb.ins().sendChallenge(e.target.parent.data.id),ViewManager.ins().close(this)):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100469);break;case"publicChallenge":UserBoss.ins().challengeCount<=0&&!e.target.parent.data.challengeing?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100470):t.zsLevel<=UserZs.ins().lv&&t.level<=GameLogic.ins().actorModel.level?(UserBoss.ins().sendChallenge(e.target.parent.data.id),ViewManager.ins().close(this)):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100471);break;case"ZsBoss":break;case"kfBoss":UserBoss.ins().sendKfBossChallenge(e.target.parent.data.id),ViewManager.ins().close(this);break;case"homeBossBtn":var i=HomeBossModel.getInstance;i.isCanBattle()?(UserBoss.ins().sendChallenge(e.target.parent.data.id),ViewManager.ins().close(this)):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100472)}}}},t.openCheck=function(){return Deblocking.Check(DeblockingType.TYPE_05)},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){if(3==e)return Deblocking.Check(DeblockingType.TYPE_21);if(4==e)return Deblocking.Check(DeblockingType.TYPE_20);if(2==e){var t=UserVip.ins().lv;if(1>t)return UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100473),!1}else if(5==e)return Deblocking.Check(DeblockingType.TYPE_75);return!0},t}(BaseEuiPanel);__reflect(BossWin.prototype,"BossWin",["ICommonWindow"]),ViewManager.ins().reg(BossWin,LayerManager.UI_Main),window.BossWin=BossWin;var HomeBossRemindItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.checkBoxs.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchBox,this)},t.prototype.onTouchBox=function(){var e=HomeBossModel.getInstance.remindStats;if(0==this.checkBoxs.selected){for(var t=0;t<e.length;t++)if(e[t].id==this.data.groupId){e[t].state=2;break}UserBoss.ins().sendGetVipBossTipsMsg(this.data.groupId,2)}else{for(var i=!1,t=0;t<e.length;t++)if(e[t].id==this.data.groupId){e[t].state=1,i=!0;break}if(!i){var o=new Sproto.reminds;o.id=this.data.groupId,o.state=1,e.push(o)}UserBoss.ins().sendGetVipBossTipsMsg(this.data.groupId,1)}},t.prototype.dataChanged=function(){var e=this.data,t=GlobalConfig.monstersConfig;1==e.isCanBattle?(this.txt.visible=!1,this.checkBoxs.visible=!0):(this.txt.text=e.context,this.txt.visible=!0,this.checkBoxs.visible=!1),this.levelShow.text=e.zsLevel>0?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[e.zsLevel]):LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[e.level]),this.bossName.text=t[e.bossId].name;var i=HomeBossModel.getInstance.remindStats;this.checkBoxs.selected=!1;for(var o=0;o<i.length;o++)i[o].id==e.groupId&&1==i[o].state&&(this.checkBoxs.selected=!0)},t}(eui.ItemRenderer);__reflect(HomeBossRemindItem.prototype,"HomeBossRemindItem"),window.HomeBossRemindItem=HomeBossRemindItem;var HomeBossRemindWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="PubBossRemindSkin",this.list0.itemRenderer=HomeBossRemindItem,this.listDatas=new eui.ArrayCollection,this.list0.dataProvider=this.listDatas},t.prototype.open=function(){this.m_bg.init("HomeBossRemindWin",GlobalConfig.jifengTiaoyueLg.st101498);for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];UserBoss.ins().sendGetVipRemindMsg(),GameGlobal.MessageCenter.addListener(MessageDef.HOMEBOSS_REMIND_UPDATE,this.setData,this),this.setData()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];GameGlobal.MessageCenter.removeListener(MessageDef.HOMEBOSS_REMIND_UPDATE,this.setData,this)},t.prototype.setData=function(){for(var e=HomeBossModel.getInstance,t=e.vipBossConfigData.values,i=UserVip.ins().lv,o=GameLogic.ins().actorModel.level,s=UserZs.ins()?UserZs.ins().lv:0,n=s?10*s+80:o,r=GlobalConfig.ins("PublicBossBaseConfig"),a=[],l=[],h=0;h<t.length;h++){var c=t[h];if(c.zlv=c.zsLevel?10*c.zsLevel+80:c.level,c.isCanBattle=1,c.context=GlobalConfig.jifengTiaoyueLg.st101499,i<r.vipOpenlLimit[c.LevelType-1])c.isCanBattle=2,c.context=GlobalConfig.jifengTiaoyueLg.st101330,l.push(c);else{var u=c.zsLevel?10*c.zsLevel+80:c.level,d=c.zsLevel,p=c.level;if(d){if(!(s>=d)){c.context=GlobalConfig.jifengTiaoyueLg.st100506,c.isCanBattle=2,l.push(c);continue}if(n>=u+50){c.context=GlobalConfig.jifengTiaoyueLg.st100520,c.isCanBattle=2,l.push(c);continue}}else{if(n>=p+50){c.context=GlobalConfig.jifengTiaoyueLg.st100520,c.isCanBattle=2,l.push(c);continue}if(p>n){c.context=GlobalConfig.jifengTiaoyueLg.st100506,c.isCanBattle=2,l.push(c);continue}}a.push(c)}}a.sort(this.sorLv),l.sort(this.sorLv);var f=a.concat(l);this.listDatas.replaceAll(f)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.sorLv=function(e,t){return t.zlv-e.zlv},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(HomeBossRemindWin.prototype,"HomeBossRemindWin"),window.HomeBossRemindWin=HomeBossRemindWin;var PubBossRemindItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.txt.text=GlobalConfig.jifengTiaoyueLg.st100506,this.checkBoxs.label=GlobalConfig.jifengTiaoyueLg.st100507},t.prototype.dataChanged=function(){null==this.publicBossConfig&&(this.publicBossConfig=GlobalConfig.publicBossConfig),null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig);var e=this.data,t=this.publicBossConfig[e.id][0];this.checkBoxs.visible=t.level<=GameGlobal.actorModel.level,t.level<=GameGlobal.actorModel.level&&t.zsLevel<=GameGlobal.zsModel.lv?(this.checkBoxs.visible=t.level<=GameGlobal.actorModel.level,this.checkBoxs.selected=UserBoss.ins().getRemindByIndex(this.itemIndex)):this.checkBoxs.visible=!1,this.txt.visible=!this.checkBoxs.visible,this.checkBoxs.name=e.id-1+"";var i=this.monstersConfig[t.bossId];this.bossName.text=i.name,this.levelShow.text=t.zsLevel>0?t.zsLevel+GlobalConfig.jifengTiaoyueLg.st100067:t.level+GlobalConfig.jifengTiaoyueLg.st100093},t}(eui.ItemRenderer);__reflect(PubBossRemindItem.prototype,"PubBossRemindItem"),window.PubBossRemindItem=PubBossRemindItem;var PubBossRemindWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="PubBossRemindSkin",this.listDatas=new eui.ArrayCollection,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100333,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100504},t.prototype.open=function(){this.m_bg.init("PubBossRemindWin","BOSS"+GlobalConfig.jifengTiaoyueLg.st100505);for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.listDatas.source=UserBoss.ins().bossInfo,this.list0.dataProvider=this.listDatas,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.onTap=function(e){if(e.target instanceof eui.CheckBox){var t=parseInt(e.target.name);UserBoss.ins().setRemind(1<<t+1)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(PubBossRemindWin.prototype,"PubBossRemindWin"),window.PubBossRemindWin=PubBossRemindWin;var WildBossJoinWin=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ZSBossJoinSkin",this.list.itemRenderer=WildBossJoinItem},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_bg.init("WildBossJoinWin",GlobalConfig.jifengTiaoyueLg.st100484);var i=e[0];this.id=i,UserBoss.ins().sendRank(i),this.observe(MessageDef.PUBLIC_BOSS_RANK_UPDATE,this.refushListInfo),this.refushListInfo()},t.prototype.close=function(){},t.prototype.refushListInfo=function(){this.list.dataProvider=new eui.ArrayCollection(UserBoss.ins().GetRankData(this.id))},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(WildBossJoinWin.prototype,"WildBossJoinWin"),window.WildBossJoinWin=WildBossJoinWin;var WildBossRecordWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="WildBossRecordSkin",this.list.itemRenderer=WildBossJoinItem},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_bg.init("WildBossRecordWin",GlobalConfig.jifengTiaoyueLg.st101695),this.id=e[0],UserBoss.ins().sendChallengeRecord(this.id),this.observe(MessageDef.PUBLIC_BOSS_RECORD_UPDATE,this.updateRank)},t.prototype.close=function(){},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.updateRank=function(){this.list.dataProvider=new eui.ArrayCollection(UserBoss.ins().GetRecordData(this.id))},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(WildBossRecordWin.prototype,"WildBossRecordWin"),window.WildBossRecordWin=WildBossRecordWin;var WorldBossGold=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="WorldBossGoldSkin"},t.prototype.open=function(){this.m_bg.init("WorldBossGold",GlobalConfig.jifengTiaoyueLg.st100367);for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var i=e[0],o=e[1];this.infoTxt.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101696,[i])),this.price.setType(MoneyConst.gold),this.price.setPrice(o),this.s=10,this.updateBtn(),TimerManager.ins().doTimer(1e3,this.s,this.updateBtn,this),this.okBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.close=function(){this.okBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),TimerManager.ins().remove(this.updateBtn,this),UserFb.ins().sendExitFb()},t.prototype.onTap=function(){ViewManager.ins().close(this)},t.prototype.updateBtn=function(){this.s--,this.okBtn.label=GlobalConfig.jifengTiaoyueLg.st101176+"（"+this.s+"s）",this.s<=0&&this.onTap()},t}(BaseEuiPanel);__reflect(WorldBossGold.prototype,"WorldBossGold"),ViewManager.ins().reg(WorldBossGold,LayerManager.UI_Main),window.WorldBossGold=WorldBossGold;var ChaosBattleAtkHead=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.m_Head.source=t.head;var i=t.name;this.m_Name.text=i,this.m_Bar.maximum=100,this.m_Bar.value=t.preHp,this.m_AtkGroup&&t.id==ChaosBattleModel.getInstance.atkTager?this.m_AtkAnim||(this.m_AtkAnim=ViewManager.ins().createEff(this.m_AtkAnim,this.m_AtkGroup,"eff_attack",-1)):this.m_AtkAnim&&(DisplayUtils.dispose(this.m_AtkAnim),this.m_AtkAnim=null)},t.prototype.onClick=function(){this.clickEffc=ViewManager.ins().createEff(this.clickEffc,this.m_AnimGroup,"tapCircle");var e=this.data;e.isRole?ChaosBattleSproto.ins().sendChaosAtkRole(e.id):ChaosBattleSproto.ins().sendChaosAtkBoss(e.id)},t.prototype.release=function(){this.clickEffc&&(DisplayUtils.dispose(this.clickEffc),this.clickEffc=null),this.m_AtkAnim&&(DisplayUtils.dispose(this.m_AtkAnim),this.m_AtkAnim=null)},t}(eui.ItemRenderer);__reflect(ChaosBattleAtkHead.prototype,"ChaosBattleAtkHead");var ChaosBattleAtkWin=function(e){function t(){var t=e.call(this)||this;return t.atkTager=0,t.skinName="ChaosBattleAtkWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_Lan0.text=GlobalConfig.jifengTiaoyueLg.st102046,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st102047,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st102048,this.m_RoleHeadList.itemRenderer=ChaosBattleAtkHead,this.roleHeadData=new eui.ArrayCollection,this.m_RoleHeadList.dataProvider=this.roleHeadData,this.m_AtkRoleHeadList.itemRenderer=ChaosBattleAtkHead,this.atkRoleHeadData=new eui.ArrayCollection,this.m_AtkRoleHeadList.dataProvider=this.atkRoleHeadData,this.m_DeRoleHeadList.itemRenderer=ChaosBattleAtkHead,this.defRoleHeadData=new eui.ArrayCollection,this.m_DeRoleHeadList.dataProvider=this.defRoleHeadData,Main.isLiuhai&&(this.m_TopTimeGroup.top+=50,this.m_TopBtnGroup.top+=50,this.m_HpGroup.top+=50)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addViewEvent(),this.setData(),this.addTick()},t.prototype.close=function(){this.release(),this.removeTick(),ChaosBattleModel.getInstance.release()},t.prototype.release=function(){this.removeViewEvent();for(var e=this.m_RoleHeadList.numChildren,t=0;e>t;t++){var i=this.m_RoleHeadList[t];i&&i instanceof ChaosBattleAtkHead&&i.release()}e=this.m_AtkRoleHeadList.numChildren;for(var t=0;e>t;t++){var i=this.m_AtkRoleHeadList[t];i&&i instanceof ChaosBattleAtkHead&&i.release()}e=this.m_DeRoleHeadList.numChildren;for(var t=0;e>t;t++){var i=this.m_DeRoleHeadList[t];i&&i instanceof ChaosBattleAtkHead&&i.release()}},t.prototype.addViewEvent=function(){this.AddClick(this.m_FirstTop,this.onClickTop),this.AddClick(this.m_TopKillBoss,this.onClickTop),this.AddClick(this.m_PointGroup,this.onClickPoint),this.AddClick(this.m_RankBtn,this.onClickRank),this.observe(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_BATTLEPOINT,this.setBattlePoint),this.observe(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_POINT,this.setPoint),this.observe(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_ROLE,this.setRoleData),this.observe(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_MSG,this.setData),this.AddClick(this.m_GoNextBtn,this.onClickGoNext),this.observe(MessageDef.TENKILL_BLOOD_UPDATE,this.setRoleData),this.observe(MessageDef.UPDATE_BOSS_HP,this.setRoleData),this.observe(MessageDef.CREATE_CHARO_MSG,this.setRoleData)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=ChaosBattleModel.getInstance;this.m_Lan.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102044,[Ladder.ins().getZhongwenNumber(e.nowLayer)]),this.setRoleData(),this.setPoint(),this.setBattlePoint()},t.prototype.setRoleData=function(){for(var e=ChaosBattleModel.getInstance,t=e.roleDic.values,i=[],o=0;o<t.length;o++){var s=t[o];s.hp>0&&i.push(s)}if(this.m_HpGroup.visible=!1,i.length>0){this.m_AtkGroup.visible=!0;var n=i.sort(this.sorData);this.roleHeadData.replaceAll(n)}else this.m_AtkGroup.visible=!1,this.roleHeadData.replaceAll([]),this.m_Scroller.stopAnimation(),this.m_Scroller.viewport.scrollH=0;if(e.atkTager&&e.roleDic.get(e.atkTager)){this.m_HpGroup.visible=!0,this.m_NowAtkGroup.visible=!0;var r=e.roleDic.get(e.atkTager);r&&(this.atkTager!=e.atkTager?(this.atkTager=e.atkTager,this.atkRoleHeadData.replaceAll([r]),this.m_Head.source=r.head,this.m_BloodBar.changeMaxBarNum=r.maxBarNum,this.m_BloodBar.changeValue=r.hp,this.m_BloodBar.changeMaximum=r.maxHp,this.lvTxt.text=r.lv+GlobalConfig.jifengTiaoyueLg.st100093+r.zslv+GlobalConfig.jifengTiaoyueLg.st100067,this.nameTxt.text=r.name,this.m_ElementImg.source=ResDataPath.GetElementImgName(r.elementType),this.myTxt.text=r.atkBossVale):(r.hp>this.m_BloodBar.getMaxHp()&&(this.m_BloodBar.changeMaximum=r.maxHp),this.m_BloodBar.changeValue=r.hp,this.atkRoleHeadData.replaceAll([r])))}else this.m_NowAtkGroup.visible=!1,this.atkRoleHeadData.replaceAll([]);if(e.deAtkTager.length<=0)this.defRoleHeadData.replaceAll([]),this.m_DefGroup.visible=!1;else{this.m_DefGroup.visible=!0;for(var a=Math.min(e.deAtkTager.length,3),l=[],o=0;a>o;o++){var h=e.roleDic.get(e.deAtkTager[o]);h&&l.push(h)}l.length<=0&&(this.m_DefGroup.visible=!1),this.defRoleHeadData.replaceAll(l)}},t.prototype.sorData=function(e,t){return e.weight-t.weight},t.prototype.setPoint=function(){this.m_PointGroup.visible=!1,this.m_RedPoint.visible=!1;var e=ChaosBattleModel.getInstance;if(e.nowPointId>0){var t=GlobalConfig.ins("CompetitionPersonalAward")[e.nowPointId];t&&(this.m_PointGroup.visible=!0,e.point>=t.integral&&1==e.pointList[e.nowPointId-1]&&(this.m_RedPoint.visible=!0),this.m_PointNum.text=GlobalConfig.jifengTiaoyueLg.st101037+e.point+"/"+t.integral)}},t.prototype.setBattlePoint=function(){var e=ChaosBattleModel.getInstance;if(!GlobalConfig.ins("CompetitionLevel")[e.nowLayer+1])return void(this.m_BattlePointGroup.visible=!1);this.m_BattlePointGroup.visible=!0;var t=GlobalConfig.ins("CompetitionLevel")[e.nowLayer];t&&(this.m_KillPointLab.text=GlobalConfig.jifengTiaoyueLg.st102050+e.battlePoint+"/"+t.feats)},t.prototype.onClickPoint=function(){ViewManager.ins().open(ChaosBattlePointWin)},t.prototype.addTick=function(){this.removeTick(),TimerManager.ins().doTimer(1e3,0,this.playTime,this)},t.prototype.removeTick=function(){TimerManager.ins().remove(this.playTime,this)},t.prototype.playTime=function(){var e=ChaosBattleModel.getInstance,t=e.endTime-GameServer.serverTime,i=DateUtils.GetFormatSecond(t,DateUtils.TIME_FORMAT_1);this.m_Time.text=GlobalConfig.jifengTiaoyueLg.st101579+"："+i;var o=ViewManager.ins().getView(ChaosBattleAwardWin);o instanceof ChaosBattleAwardWin&&o.playTime();var s=e.deathTime-GameServer.serverTime;s>0?(this.m_DeadTime.visible=!0,this.m_DeadTime.text=GlobalConfig.jifengTiaoyueLg.st102045+DateUtils.getFormatBySecond(s,DateUtils.TIME_FORMAT_5,1)):(1==e.isDead&&(e.isDead=!1,ChaosBattleSproto.ins().sendRevive(2)),ViewManager.ins().close(ChaosBattleDeadWin),this.m_DeadTime.visible=!1)},t.prototype.onClickTop=function(e){var t=2;switch(e.currentTarget){case this.m_FirstTop:t=1}ViewManager.ins().open(ChaosBattleAwardWin,t)},t.prototype.onClickRank=function(){ViewManager.ins().open(ChaosBattleRankWin)},t.prototype.onClickGoNext=function(){var e=ChaosBattleModel.getInstance,t=GlobalConfig.ins("CompetitionLevel")[e.nowLayer];t&&(e.battlePoint>=t.feats?ChaosBattleSproto.ins().sendChaosBattleAtkMsg():UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st102051))},t}(BaseEuiView);__reflect(ChaosBattleAtkWin.prototype,"ChaosBattleAtkWin"),ViewManager.ins().reg(ChaosBattleAtkWin,LayerManager.UI_HUD),window.ChaosBattleAtkWin=ChaosBattleAtkWin;var ChaosBattleAwardWin=function(e){function t(){var t=e.call(this)||this;return t.type=1,t.skinName="ChaosBattleAwardWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this);var t=GlobalConfig.jifengTiaoyueLg;this.m_bg.init("ChaosBattleAwardWin",t.st102033),this.m_GetPlayer.text=t.st102029,this.m_bg.closeButtomBtn.visible=!1},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.type=e[0],this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=GlobalConfig.jifengTiaoyueLg,t=ChaosBattleModel.getInstance;switch(this.type){case 1:this.m_bg.txtTitle.text=e.st102033,this.m_Cont.text=e.st102031,t.firstTopPlayer?this.m_Name.text=t.firstTopPlayer:this.m_Name.text=e.st102035;var i=GlobalConfig.ins("CompetitionConst").extraAward;this.m_ItemBase.data=i[0],this.m_ItemBase.dataChanged();break;default:this.m_bg.txtTitle.text=e.st102034,this.m_Cont.text=e.st102032,t.firstTopKillBoss?this.m_Name.text=t.firstTopKillBoss:this.m_Name.text=e.st101034;var o=GlobalConfig.ins("CompetitionConst").specialAward;this.m_ItemBase.data=o[0],this.m_ItemBase.dataChanged()}this.playTime()},t.prototype.playTime=function(){this.m_Time.text=GlobalConfig.jifengTiaoyueLg.st102030+DateUtils.GetFormatSecond(ChaosBattleModel.getInstance.endTime-GameServer.serverTime,DateUtils.TIME_FORMAT_1)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(ChaosBattleAwardWin.prototype,"ChaosBattleAwardWin"),ViewManager.ins().reg(ChaosBattleAwardWin,LayerManager.UI_Popup),window.ChaosBattleAwardWin=ChaosBattleAwardWin;var ChaosBattleDeadWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="ChaosBattleDeadWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_bg.init("ChaosBattleDeadWin",GlobalConfig.jifengTiaoyueLg.st102022);var t=GlobalConfig.jifengTiaoyueLg;this.m_SureBtn.label=t.st102024,this.m_NowBtn.label=t.st102025,this.m_Lan1.text=t.st102028},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.AddClick(this.m_SureBtn,this.onClickClose),this.AddClick(this.m_NowBtn,this.onClickNow)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=ChaosBattleModel.getInstance;this.m_DeadLab.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102023,["<font color="+Color.Red+">"+e.killName+"</font>"])),e.nowLayer>1?this.m_Lan.text=GlobalConfig.jifengTiaoyueLg.st102027:this.m_Lan.text=GlobalConfig.jifengTiaoyueLg.st102026;var t=GlobalConfig.ins("CompetitionConst").rebornCost;UserBag.ins().setNeedItem(t,this.m_NeedItemGroup)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.onClickNow=function(){for(var e=GlobalConfig.ins("CompetitionConst").rebornCost,t=0;t<e.length;t++){var i=e[t];if(0==i.type&&2==i.id){var o=GameLogic.ins().actorModel.yb;if(o<i.count)return UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008);ChaosBattleSproto.ins().sendRevive(1)}}this.onClickClose()},t.prototype.onMaskTap=function(){},t}(BaseEuiPanel);__reflect(ChaosBattleDeadWin.prototype,"ChaosBattleDeadWin"),ViewManager.ins().reg(ChaosBattleDeadWin,LayerManager.UI_Popup),window.ChaosBattleDeadWin=ChaosBattleDeadWin;var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,o){function s(e){t.call(o,e)}function n(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),i.call(o))}var r=this;"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(o,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl(Const.RES_URL+"resource/gameEui.json",function(e,i){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(o,generateEUI2)},r)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_TEXT))},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]),window.ThemeAdapter=ThemeAdapter;var ChaosBattleLayerPanel=function(e){function t(t){var i=e.call(this)||this;return i.name=GlobalConfig.jifengTiaoyueLg.st102019,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st102018,i.skinName="ChaosBattleLayerPanelSkin",i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_List.itemRenderer=ChaosBattleLayerItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData},t.prototype.addViewEvent=function(){},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.addViewEvent(),this.initData()},t.prototype.close=function(){this.removeEvent()},t.prototype.release=function(){this.removeEvent()},t.prototype.initData=function(){var e=ChaosBattleModel.getInstance;this.listData.replaceAll(e.layerAwardData)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(ChaosBattleLayerPanel.prototype,"ChaosBattleLayerPanel",["ICommonWindowTitle"]),window.ChaosBattleLayerPanel=ChaosBattleLayerPanel;var ChaosBattlePanel=function(e){function t(t){var i=e.call(this)||this;return i.isOpen=!0,i.name=GlobalConfig.jifengTiaoyueLg.st102007,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st102007,i.skinName="ChaosBattlePanelSkin",i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_TitleLab.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st102008),this.m_Tips0.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st102009),this.m_Tips1.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st102010),this.m_Tips2.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st102011),this.m_Tips3.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st102012),this.m_Tips4.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st102013),this.m_Tips5.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st102014),this.m_Lan.text=GlobalConfig.jifengTiaoyueLg.st102015,this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100046,this.m_List.itemRenderer=ItemBase,this.m_ListData=new eui.ArrayCollection,this.m_List.dataProvider=this.m_ListData;var t=GlobalConfig.ins("CompetitionConst").awardShow;this.m_ListData.replaceAll(t),this.m_Time.visible=!0},t.prototype.addViewEvent=function(){this.AddClick(this.m_MainBtn,this.onClickMianBten),this.AddClick(this.m_AwardBtn,this.onClickAwardBtn),this.observe(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_MSG,this.initData)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.addViewEvent(),this.initData(),this.addTime()},t.prototype.close=function(){this.removeEvent(),this.removeTime()},t.prototype.release=function(){this.removeEvent()},t.prototype.addTime=function(){this.removeTime(),TimerManager.ins().doTimer(1e3,0,this.playTime,this),this.playTime()},t.prototype.removeTime=function(){TimerManager.ins().remove(this.playTime,this)},t.prototype.playTime=function(){var e=ChaosBattleModel.getInstance;if(this.isOpen){var t=e.endTime-GameServer.serverTime;if(0>=t)return this.m_Time.text="",void(this.isOpen=!1);this.m_Time.text=DateUtils.GetFormatSecond(t,DateUtils.TIME_FORMAT_1)+GlobalConfig.jifengTiaoyueLg.st102016}else{var i=e.openTime-GameServer.serverTime;if(0>=i){var t=e.endTime-GameServer.serverTime;return 0>=t?(this.m_Time.text="",void(this.isOpen=!1)):(this.isOpen=!0,void(this.m_Time.text=DateUtils.GetFormatSecond(t,DateUtils.TIME_FORMAT_1)+GlobalConfig.jifengTiaoyueLg.st102016))}this.m_Time.text=DateUtils.GetFormatSecond(i,DateUtils.TIME_FORMAT_1)+GlobalConfig.jifengTiaoyueLg.st100573}},t.prototype.initData=function(){var e=ChaosBattleModel.getInstance;e.openTime-GameServer.serverTime<=0&&e.endTime-GameServer.serverTime>0?this.isOpen=!0:(e.endTime-GameServer.serverTime<=0&&(this.m_Time.text=""),this.isOpen=!1),this.playTime()},t.prototype.UpdateContent=function(){},t.prototype.onClickMianBten=function(){ChaosBattleModel.getInstance.checkRedPoint()||UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101885),ChaosBattleSproto.ins().sendChaosBattleAtkMsg()},t.prototype.onClickAwardBtn=function(){ViewManager.ins().open(ChaosBattleRankWin)},t.prototype.CheckRedPoint=function(){var e=ChaosBattleModel.getInstance;return e.checkRedPoint()},t}(BaseView);__reflect(ChaosBattlePanel.prototype,"ChaosBattlePanel",["ICommonWindowTitle"]),window.ChaosBattlePanel=ChaosBattlePanel;var ChaosBattlePointItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="MountLvUpAwardItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_GetBtn.label=GlobalConfig.jifengTiaoyueLg.st101076,this.m_GetTxt.text=GlobalConfig.jifengTiaoyueLg.st100680,this.m_ItemList.itemRenderer=ItemBase,this.listData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.listData,this.m_GetBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGet,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=GlobalConfig.ins("CompetitionPersonalAward")[this.itemIndex+1];t&&(this.listData.removeAll(),this.listData.replaceAll(t.award),this.listData.refresh(),this.m_Cont.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102052,[t.integral]));var i=this.data;switch(i){case 1:this.m_GetBtn.visible=!0,this.m_GetTxt.visible=!1,this.m_GetImg.visible=!1,this.m_GetBtn.label=GlobalConfig.jifengTiaoyueLg.st101076;break;case 0:this.m_GetBtn.visible=!1,this.m_GetTxt.visible=!0,this.m_GetImg.visible=!1,this.m_GetBtn.label=GlobalConfig.jifengTiaoyueLg.st101076;break;case 2:this.m_GetBtn.visible=!1,this.m_GetTxt.visible=!1,this.m_GetImg.visible=!0,this.m_GetBtn.label=GlobalConfig.jifengTiaoyueLg.st100981}},t.prototype.onClickGet=function(){ChaosBattleSproto.ins().sendGetPointAward(this.itemIndex+1)},t}(eui.ItemRenderer);__reflect(ChaosBattlePointItem.prototype,"ChaosBattlePointItem"),window.ChaosBattleLayerItem=ChaosBattleLayerItem;var ChaosBattlePointPanel=function(e){function t(t){var i=e.call(this)||this;return i.name=GlobalConfig.jifengTiaoyueLg.st101037,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101037,i.skinName="ChaosBattleLayerPanelSkin",i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_List.itemRenderer=ChaosBattlePointItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData},t.prototype.addViewEvent=function(){this.observe(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_POINT,this.initData)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.addViewEvent(),this.initData()},t.prototype.close=function(){this.removeEvent()},t.prototype.release=function(){this.removeEvent()},t.prototype.initData=function(){var e=ChaosBattleModel.getInstance;this.listData.replaceAll(e.pointList)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(ChaosBattlePointPanel.prototype,"ChaosBattlePointPanel",["ICommonWindowTitle"]),window.ChaosBattlePointPanel=ChaosBattlePointPanel;var ChaosBattlePointWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.chaosBattlePointPanel=new ChaosBattlePointPanel,this.commonWindowBg.AddChildStack(this.chaosBattlePointPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ChaosBattleSproto.ins().sendRank(),this.commonWindowBg.OnAdded(this,e&&e[0]),this.addWinEvent(),this.updateRedPoint()},t.prototype.close=function(){this.removeObserve(),this.removeWinEvetn(),this.commonWindowBg.OnRemoved(),this.chaosBattlePointPanel.release()},t.prototype.addWinEvent=function(){},t.prototype.removeWinEvetn=function(){},t.prototype.updateRedPoint=function(){},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(ChaosBattlePointWin.prototype,"ChaosBattlePointWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(ChaosBattlePointWin,LayerManager.UI_Popup),window.ChaosBattlePointWin=ChaosBattlePointWin;var ChaosBattleRankAwardPanel=function(e){function t(t){var i=e.call(this)||this;return i.name=GlobalConfig.jifengTiaoyueLg.st102020,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st102018,i.skinName="PersonInteRewardSkin",i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101043,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101044,this.list.itemRenderer=PersonRewardRenderer,this.list1.itemRenderer=GuildInteRewardItemRenderer,this.listData1=new eui.ArrayCollection,this.listData2=new eui.ArrayCollection,this.list1.dataProvider=this.listData1,this.list.dataProvider=this.listData2;
var t=GlobalConfig.ins("CompetitionPersonalAward"),i=[];for(var o in t)i.push(t[o]);this.listData2.replaceAll(i);var s=GlobalConfig.ins("CompetitionPersonalRankAward"),n=[];for(var o in s)n.push(s[o]);this.listData1.replaceAll(n)},t.prototype.addViewEvent=function(){this.observe(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_MSG,this.initData)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.addViewEvent(),this.initData()},t.prototype.close=function(){this.removeEvent()},t.prototype.release=function(){this.removeEvent()},t.prototype.initData=function(){},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(ChaosBattleRankAwardPanel.prototype,"ChaosBattleRankAwardPanel",["ICommonWindowTitle"]),window.ChaosBattleRankAwardPanel=ChaosBattleRankAwardPanel;var ChaosBattleRankItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="FbRankItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.rank.text=t.rankNum+"",this.nameLabel.Set(t.name,t.vipLv,!1,!1),this.zhanli.text=t.guildName,this.ce.text=t.pointNum+""},t}(eui.ItemRenderer);__reflect(ChaosBattleRankItem.prototype,"ChaosBattleRankItem"),window.ChaosBattleRankItem=ChaosBattleRankItem;var ChaosBattleRankPanel=function(e){function t(t){var i=e.call(this)||this;return i.name=GlobalConfig.jifengTiaoyueLg.st100819,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st102018,i.skinName="ChaosBattleRankPanelSkin",i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_Lan0.text=GlobalConfig.jifengTiaoyueLg.st100400,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100401,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100896,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st101037,this.m_NoRankLab.text=GlobalConfig.jifengTiaoyueLg.st102017,this.m_MyRankLab.text=GlobalConfig.jifengTiaoyueLg.st100403,this.m_MyPointLab.text=GlobalConfig.jifengTiaoyueLg.st100060,this.list.itemRenderer=ChaosBattleRankItem,this.listData=new eui.ArrayCollection,this.list.dataProvider=this.listData},t.prototype.addViewEvent=function(){this.observe(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_MSG,this.initData)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.addViewEvent(),this.initData()},t.prototype.close=function(){this.removeEvent()},t.prototype.release=function(){this.removeEvent()},t.prototype.initData=function(){var e=ChaosBattleModel.getInstance;e.myRankNum?this.m_MyRankNumLab.text=e.myRankNum+"":this.m_MyRankNumLab.text=GlobalConfig.jifengTiaoyueLg.st100378,this.m_MyPointNumLab.text=e.myPoint+"",e.rankDic.values.length<=0?this.m_NoRankLab.visible=!0:this.m_NoRankLab.visible=!1,this.listData.replaceAll(e.rankDic.values)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(ChaosBattleRankPanel.prototype,"ChaosBattleRankPanel",["ICommonWindowTitle"]),window.ChaosBattleRankPanel=ChaosBattleRankPanel;var ChaosBattleRankWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.chaosBattleRankPanel=new ChaosBattleRankPanel,this.commonWindowBg.AddChildStack(this.chaosBattleRankPanel),this.chaosBattleLayerPanel=new ChaosBattleLayerPanel,this.commonWindowBg.AddChildStack(this.chaosBattleLayerPanel),this.chaosBattleRankAwardPanel=new ChaosBattleRankAwardPanel,this.commonWindowBg.AddChildStack(this.chaosBattleRankAwardPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ChaosBattleSproto.ins().sendRank(),this.commonWindowBg.OnAdded(this,e&&e[0]),this.addWinEvent(),this.updateRedPoint()},t.prototype.close=function(){this.removeObserve(),this.removeWinEvetn(),this.commonWindowBg.OnRemoved(),this.chaosBattleRankPanel.release(),this.chaosBattleLayerPanel.release(),this.chaosBattleRankAwardPanel.release()},t.prototype.addWinEvent=function(){},t.prototype.removeWinEvetn=function(){},t.prototype.updateRedPoint=function(){},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(ChaosBattleRankWin.prototype,"ChaosBattleRankWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(ChaosBattleRankWin,LayerManager.UI_Popup),window.ChaosBattleRankWin=ChaosBattleRankWin;var ChaosBattleResultItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ChaosBattleResultItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_Point.text=GlobalConfig.jifengTiaoyueLg.st102054},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.m_RankImg.source="comp_68_67_0"+(this.itemIndex+1)+"_png",this.m_PointNum.text=t.pointNum+"",this.m_Name.text=t.name},t}(eui.ItemRenderer);__reflect(ChaosBattleResultItem.prototype,"ChaosBattleResultItem"),window.ChaosBattleResultItem=ChaosBattleResultItem;var ChaosBattleResultWin=function(e){function t(){var t=e.call(this)||this;return t.award=[],t.time=10,t.skinName="ChaosBattleResultWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_Lan0.text=GlobalConfig.jifengTiaoyueLg.st102053,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100403,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100060,this.m_RankList.itemRenderer=ChaosBattleResultItem,this.rankList=new eui.ArrayCollection,this.m_RankList.dataProvider=this.rankList,this.m_List.itemRenderer=ItemBase,this.dataList=new eui.ArrayCollection,this.m_List.dataProvider=this.dataList},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ChaosBattleSproto.ins().sendRank(),this.time=10,this.award=e[0],this.addViewEvent(),this.setData(),this.addTick(),this.playMc()},t.prototype.close=function(){this.removeTick(),this.release(),this._mc&&(DisplayUtils.removeFromParent(this._mc),ObjectPool.ins().push(this._mc))},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.AddClick(this.m_MainBtn,this.onClickClose),this.observe(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_POINT,this.setData),this.observe(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_MSG,this.setData)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){for(var e=ChaosBattleModel.getInstance,t=[],i=0;3>i;i++){var o=e.rankDic.values[i];o&&t.push(o)}this.rankList.replaceAll(t),this.dataList.replaceAll(this.award),this.m_MyRank.text=e.myRankNum+"",this.m_MyPoint.text=e.myPoint+"",this.m_Cont.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102055,[e.maxLayer])},t.prototype.addTick=function(){this.removeTick(),TimerManager.ins().doTimer(1e3,0,this.playTime,this),this.playTime()},t.prototype.removeTick=function(){TimerManager.ins().remove(this.playTime,this)},t.prototype.playTime=function(){this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100962+"("+this.time+")",this.time--,this.time<=0&&this.onClickClose()},t.prototype.onMaskTap=function(){this.onClickClose()},t.prototype.onClickClose=function(){ChaosBattleModel.getInstance.resultRelease(),ViewManager.ins().close(this)},t.prototype.playMc=function(){this._mc||(this._mc=ObjectPool.ins().pop("MovieClip")),this._mc.loadUrl(ResDataPath.GetUIEffePath("eff_jiesuan"),!0,-1),this.m_EffGroup.addChild(this._mc)},t}(BaseEuiPanel);__reflect(ChaosBattleResultWin.prototype,"ChaosBattleResultWin"),ViewManager.ins().reg(ChaosBattleResultWin,LayerManager.UI_Popup),window.ChaosBattleResultWin=ChaosBattleResultWin;var ChaosBattleEvt=function(){function e(){}return e.CHAOSBATTLE_DATAUPDATE_MSG="CHAOSBATTLE_DATAUPDATE_MSG",e.CHAOSBATTLE_DATAUPDATE_BATTLEPOINT="CHAOSBATTLE_DATAUPDATE_BATTLEPOINT",e.CHAOSBATTLE_DATAUPDATE_POINT="CHAOSBATTLE_DATAUPDATE_POINT",e.CHAOSBATTLE_DATAUPDATE_ROLE="CHAOSBATTLE_DATAUPDATE_ROLE",e}();__reflect(ChaosBattleEvt.prototype,"ChaosBattleEvt");var ChaosBattleModel=function(){function e(){this.rankDic=new Dictionary,this.openTime=0,this.endTime=0,this.myRankNum=0,this.myPoint=0,this.layerAwardData=[1,1,1,1,1,1,1,1,1],this.deathTime=0,this.nowLayer=1,this.maxLayer=0,this.killName="",this.firstTopPlayer="",this.firstTopKillBoss="",this.atkTager=0,this.deAtkTager=[],this.battlePoint=0,this.point=0,this.pointList=[],this.roleDic=new Dictionary,this.isDead=!1}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.addRoleData=function(e){for(var t=[],i=0;i<this.roleDic.values.length;i++){var o=this.roleDic.values[i];o.isRole&&t.push(o.id)}for(var i=0;i<t.length;i++)this.roleDic.remove(t[i]);for(var i=0;i<e.length;i++){var o=new ChaosBattleTagerData;o.id=e[i].dbid,o.name=e[i].name,o.isRole=!0,this.roleDic.set(o.id,o)}},e.prototype.addBossData=function(e){for(var t=[],i=0;i<this.roleDic.values.length;i++){var o=this.roleDic.values[i];o.isRole||t.push(o.id)}for(var i=0;i<t.length;i++)this.roleDic.remove(t[i]);for(var i=0;i<e.length;i++){var o=new ChaosBattleTagerData;o.id=e[i].handle,o.isRole=!1,this.roleDic.set(o.id,o)}},e.prototype.setRankDic=function(e){this.rankDic.clear();for(var t=0;t<e.length;t++){var i=new ChaosBattleRankData;i.rankNum=t+1,i.setData(e[t]),this.rankDic.set(t+1,i)}},e.prototype.checkRedPoint=function(){return this.openTime&&this.openTime-GameServer.serverTime<0&&Deblocking.Check(DeblockingType.TYPE_91,!0)&&this.endTime-GameServer.serverTime>0?!0:!1},Object.defineProperty(e.prototype,"nowPointId",{get:function(){if(null!=this.pointList[0]&&0==this.pointList[0])return 1;for(var e=0;e<this.pointList.length;e++){if(1==this.pointList[e])return e+1;if(2==this.pointList[e]&&null!=this.pointList[e+1]&&0==this.pointList[e+1])return e+2;if(2==this.pointList[e]&&null==this.pointList[e+1])return e+1}return 1},enumerable:!0,configurable:!0}),e.prototype.release=function(){this.roleDic.clear(),this.atkTager=null,this.deAtkTager=[],this.deathTime=0},e.prototype.getDis=function(e){if(e){var t=EntityManager.ins().getMyBaseRole();if(t){var i=MathUtils.getDistance(t.x,t.y,e.x,e.y);return i}}return 1e4},e.prototype.resultRelease=function(){this.firstTopPlayer="",this.firstTopKillBoss="",this.battlePoint=0,this.point=0,this.release()},e}();__reflect(ChaosBattleModel.prototype,"ChaosBattleModel"),window.ChaosBattleModel=ChaosBattleModel;var ChaosBattleRankData=function(){function e(){this.rankNum=1,this.vipLv=3}return e.prototype.setData=function(e){this.name=e.name,this.pointNum=e.sorce,this.guildName=e.orgname},e}();__reflect(ChaosBattleRankData.prototype,"ChaosBattleRankData");var ChaosBattleSproto=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_basic_info,t.getChaosBattleData),t.regNetMsg(S2cProtocol.sc_self_sorce_rank,t.getChaosBattleMyRankData),t.regNetMsg(S2cProtocol.sc_sorce_info,t.getChaosBattleRankData),t.regNetMsg(S2cProtocol.sc_update_feats,t.getChaosBattlePoint),t.regNetMsg(S2cProtocol.sc_update_sorce,t.getChaosPoint),t.regNetMsg(S2cProtocol.sc_can_attack_actor,t.getChaosAtkRole),t.regNetMsg(S2cProtocol.sc_already_attack_actor,t.getChaosDefRole),t.regNetMsg(S2cProtocol.sc_can_attack_boss,t.getChaosBoss),t.regNetMsg(S2cProtocol.sc_enter_top_actor,t.getChaosTopLayer),t.regNetMsg(S2cProtocol.sc_kill_top_boss_actor,t.getChaosTopLayerBoss),t.regNetMsg(S2cProtocol.sc_actor_dead,t.getChaosRoleDead),t.regNetMsg(S2cProtocol.sc_cur_attr_target,t.getChaosAtkTager),t.regNetMsg(S2cProtocol.sc_reward_info,t.getChaosResult),t.regNetMsg(S2cProtocol.sc_receive_sorce_reward,t.getPointData),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getChaosBattleData=function(e){var t=ChaosBattleModel.getInstance;t.endTime=e.endtime,t.openTime=e.starttime;var i=GlobalConfig.ins("CompetitionLevel");for(var o in i)i[o].fbId==e.fbid&&(t.nowLayer=i[o].id),i[o].fbId==e.topid&&(t.maxLayer=i[o].id);var s=GlobalConfig.ins("CompetitionStageAward");t.layerAwardData=[];for(var o in s)t.maxLayer>=s[o].id?t.layerAwardData.push(1):t.layerAwardData.push(-1);MessageCenter.ins().dispatch(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_MSG)},t.prototype.getChaosBattleMyRankData=function(e){var t=ChaosBattleModel.getInstance;t.myRankNum=e.rankid,t.myPoint=e.sorce,MessageCenter.ins().dispatch(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_MSG)},t.prototype.getChaosBattleRankData=function(e){var t=ChaosBattleModel.getInstance;t.setRankDic(e.data),MessageCenter.ins().dispatch(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_MSG)},t.prototype.getChaosBattlePoint=function(e){var t=ChaosBattleModel.getInstance;t.battlePoint=e.feats,MessageCenter.ins().dispatch(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_BATTLEPOINT)},t.prototype.getChaosPoint=function(e){var t=ChaosBattleModel.getInstance;t.point=e.sorce,MessageCenter.ins().dispatch(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_POINT)},t.prototype.getChaosAtkRole=function(e){var t=ChaosBattleModel.getInstance;t.addRoleData(e.data),MessageCenter.ins().dispatch(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_ROLE)},t.prototype.getChaosDefRole=function(e){var t=ChaosBattleModel.getInstance;t.deAtkTager=[];for(var i=0;i<e.data.length;i++)t.deAtkTager.push(e.data[i].dbid);MessageCenter.ins().dispatch(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_ROLE)},t.prototype.getChaosBoss=function(e){var t=ChaosBattleModel.getInstance;t.addBossData(e.data),MessageCenter.ins().dispatch(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_ROLE)},t.prototype.getChaosTopLayer=function(e){var t=ChaosBattleModel.getInstance;t.firstTopPlayer=e.name+"",MessageCenter.ins().dispatch(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_MSG)},t.prototype.getChaosTopLayerBoss=function(e){var t=ChaosBattleModel.getInstance;t.firstTopKillBoss=e.name+"",MessageCenter.ins().dispatch(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_MSG)},t.prototype.getChaosRoleDead=function(e){var t=ChaosBattleModel.getInstance;t.isDead=!0,t.killName=e.name+"",t.deathTime=e.time,ViewManager.ins().open(ChaosBattleDeadWin)},t.prototype.getChaosAtkTager=function(e){var t=ChaosBattleModel.getInstance;t.atkTager=e.handle,MessageCenter.ins().dispatch(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_ROLE)},t.prototype.getChaosResult=function(e){ViewManager.ins().open(ChaosBattleResultWin,e.data)},t.prototype.getPointData=function(e){var t=ChaosBattleModel.getInstance;t.pointList=[];for(var i=0;i<e.data.length;i++)t.pointList.push(e.data[i].state);MessageCenter.ins().dispatch(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_POINT)},t.prototype.sendChaosBattleAtkMsg=function(){var e=new Sproto.cs_enter_dragon_request;this.Rpc(C2sProtocol.cs_enter_dragon,e)},t.prototype.sendChaosAtkRole=function(e){var t=new Sproto.cs_Challenge_actor_request;t.dbid=e,this.Rpc(C2sProtocol.cs_Challenge_actor,t)},t.prototype.sendChaosAtkBoss=function(e){var t=new Sproto.cs_Challenge_boss_request;t.handle=e,this.Rpc(C2sProtocol.cs_Challenge_boss,t)},t.prototype.sendRank=function(){var e=new Sproto.cs_sore_info_request;this.Rpc(C2sProtocol.cs_sore_info,e)},t.prototype.sendInfo=function(){var e=new Sproto.cs_dragon_info_request;this.Rpc(C2sProtocol.cs_dragon_info,e)},t.prototype.sendRevive=function(e){1==e&&(ChaosBattleModel.getInstance.isDead=!1,ChaosBattleModel.getInstance.deathTime=0);var t=new Sproto.cs_revive_actor_request;t.retype=e,this.Rpc(C2sProtocol.cs_revive_actor,t)},t.prototype.sendGetPointAward=function(e){var t=new Sproto.cs_receive_sorce_reward_request;t.index=e,this.Rpc(C2sProtocol.cs_receive_sorce_reward,t)},t}(BaseSystem);__reflect(ChaosBattleSproto.prototype,"ChaosBattleSproto"),window.ChaosBattleSproto=ChaosBattleSproto;var ChaosBattleTagerData=function(){function e(){this.isRole=!0,this.atkValue=0,this._modelData=[],this._maxHp=0,this.resTime=0}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name&&""!=this._name?this._name:this.baseData()?(this.baseData().name&&(this._name=this.baseData().name),this._name):""},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"job",{get:function(){if(null!=this._job)return this._job;if(this.isRole){var e=this.baseData();if(e instanceof Role)return this._job=e.job,e.job}return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sex",{get:function(){if(null!=this._sex)return this._sex;if(this.isRole){var e=this.baseData();if(e instanceof Role)return this._sex=e.sex,e.sex}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxHp",{get:function(){for(var e=this.modelData(),t=0,i=0;i<e.length;i++)t+=e[i].getAtt(AttributeType.atMaxHp);return t=Math.max(this._maxHp,t),this._maxHp=t,t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hp",{get:function(){for(var e=this.modelData(),t=0,i=0;i<e.length;i++)t+=e[i].getAtt(AttributeType.atHp);return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preHp",{get:function(){if(0==this.hp||0==this.maxHp)return 0;var e=Math.ceil(this.hp/this.maxHp*100);return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lv",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zslv",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elementType",{get:function(){return this.modelData()[0]?this.modelData()[0].attrElementMianType:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxBarNum",{get:function(){if(this.isRole)return 10;if(this.modelData()[0]){var e=GlobalConfig.ins("MonstersConfig")[this.modelData()[0].configID];return e.hpCount}return 100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"head",{get:function(){if(this.isRole)return ResDataPath.GetHeadMiniImgName(this.job,this.sex);if(this._head)return this._head;if(this.modelData()[0]){var e=GlobalConfig.ins("MonstersConfig")[this.modelData()[0].configID];return this._head=e.head+"_y_png",this._head}return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"atkBossVale",{get:function(){return this.isRole?"":GlobalConfig.jifengTiaoyueLg.st101380+CommonUtils.overLength(this.atkValue)},enumerable:!0,configurable:!0}),e.prototype.baseData=function(){if(this.isRole)for(var e=0;e<this._modelData.length;e++){var t=this._modelData[e];if(t&&t instanceof Role&&0==t.roleID)return t}else{var t=this._modelData[0];if(t&&t instanceof EntityModel)return t}return null},e.prototype.modelData=function(){if(this.resTime<=egret.getTimer()&&(this._modelData=[]),this._modelData.length>0)return this._modelData;this.resTime=egret.getTimer()+2e3;var e=EntityManager.ins().entityList;this._modelData=[];for(var t in e)e[t].infoModel.teamId==this.id&&this._modelData.push(e[t].infoModel);return this._modelData},e.prototype.getCharMonster=function(){var e=EntityManager.ins().entityList[this.id];return e?e:void 0},Object.defineProperty(e.prototype,"weight",{get:function(){var e=0;return e=this.isRole?this.id+1e6:this.id},enumerable:!0,configurable:!0}),e}();__reflect(ChaosBattleTagerData.prototype,"ChaosBattleTagerData");var AStar=function(){function e(e){void 0===e&&(e=null),this.m_nMarkTag=0,e&&this.initFromMap(e)}return e.prototype.dispose=function(){if(null!=this.m_ASMapCells){for(var e=0;e<this.m_ASMapCells.length;e++)this.m_ASMapCells[e]=null;this.m_ASMapCells=[]}},e.prototype.initFromMap=function(e){this.dispose();var t=0;this.m_ASMapCells?t=this.m_ASMapCells.length:this.m_ASMapCells=[],this.m_nWidth=e.numCols,this.m_nHeight=e.numRows;var i=this.m_nWidth*this.m_nHeight;i>this.m_ASMapCells.length&&(this.m_ASMapCells.length=i);for(var o=t;i>o;++o)this.m_ASMapCells[o]=new ASMapCell;var s,n,r,a;for(r=0,n=0;n<this.m_nHeight;++n)for(s=0;s<this.m_nWidth;++s)a=this.m_ASMapCells[r],a.X=s,a.Y=n,a.CanNotMove=!e.getNode(s,n).walkable,r++},e.prototype.getPatch=function(t,i,o,s){if(t==o&&i==s)return null;if((0>t||t>=this.m_nWidth||0>i||i>=this.m_nHeight)&&console.log("寻路的起始位置参数无效：("+t+", "+i+")"),(0>o||o>=this.m_nWidth||0>s||s>=this.m_nHeight)&&console.log("寻路的目的位置参数无效：("+o+", "+s+")"),this.m_ASMapCells[s*this.m_nWidth+o]&&this.m_ASMapCells[s*this.m_nWidth+o].CanNotMove)return null;this.reset(t,i);var n=!1,r=t,a=i,l=this.m_ASMapCells[a*this.m_nWidth+r];l.GCost=0,l.LastX=-1,l.LastY=-1,l.X=r,l.Y=a,l.MarkTag=this.m_nMarkTag,l.HCost=Math.abs(o-t)+10*Math.abs(s-i);for(var h,c,u,d;;){if(r==o&&a==s){n=!0;break}for(l.State!=ASMapCell.CSCLOSE&&this.closeCell(l),h=0;8>h;++h)c=r+e.NEIGHBORPOS_X_VALUES[h],u=a+e.NEIGHBORPOS_Y_VALUES[h],0>c||c>=this.m_nWidth||0>u||u>=this.m_nHeight||(d=this.m_ASMapCells[u*this.m_nWidth+c],d.CanNotMove||(d.MarkTag!=this.m_nMarkTag||d.State==ASMapCell.CSNONE?(d.MarkTag=this.m_nMarkTag,d.LastX=r,d.LastY=a,d.btDir=h,d.GCost=l.GCost+e.AS_MOVECOST[1&h],d.HCost=Math.abs(o-c)+10*Math.abs(s-u),this.openCell(d)):d.State==ASMapCell.CSOPEN&&d.GCost>l.GCost+e.AS_MOVECOST[1&h]&&(d.LastX=r,d.LastY=a,d.btDir=h,d.GCost=l.GCost+e.AS_MOVECOST[1&h],this.reopenCell(d))));if(l=this.m_LastOpenCell,null==l)break;r=l.X,a=l.Y}if(n){for(var p=new Array;;)if(p.push(new AStarNode(l.X,l.Y,l.btDir)),l=this.m_ASMapCells[l.LastY*this.m_nWidth+l.LastX],l.LastX<=0&&l.LastY<=0||l.MarkTag!=this.m_nMarkTag)break;return p}return null},e.prototype.reset=function(e,t){var i=this.m_ASMapCells[t*this.m_nWidth+t];i.LastX=0,i.LastY=0,i.HCost=0,i.GCost=0,i.FValue=0,i.State=0,i.Prev=null,i.Next=null,i.btDir=0,this.m_LastOpenCell=null,this.m_nMarkTag=this.m_nMarkTag+1},e.prototype.closeCell=function(e){e.State==ASMapCell.CSOPEN&&(e.Prev&&(e.Prev.Next=e.Next),e.Next&&(e.Next.Prev=e.Prev),e==this.m_LastOpenCell&&(this.m_LastOpenCell=e.Prev)),e.State=ASMapCell.CSCLOSE},e.prototype.openCell=function(e){e.State=ASMapCell.CSOPEN;var t=e.HCost+e.GCost;e.FValue=t;var i=this.m_LastOpenCell;if(i){for(;i.FValue<t;){if(null==i.Prev)return i.Prev=e,e.Prev=null,void(e.Next=i);i=i.Prev}e.Prev=i,i.Next?(e.Next=i.Next,i.Next.Prev=e,i.Next=e):(e.Next=null,i.Next=e,this.m_LastOpenCell=e)}else this.m_LastOpenCell=e,e.Prev=null,e.Next=null},e.prototype.reopenCell=function(e){var t=e.HCost+e.GCost;e.FValue=t;var i=e.Next;if(i&&i.FValue>t){do i=i.Next;while(i&&i.FValue>t);e.Prev&&(e.Prev.Next=e.Next),e.Next&&(e.Next.Prev=e.Prev),i?(e.Next=i,i.Prev?(e.Prev=i.Prev,i.Prev.Next=e):e.Prev=null,i.Prev=e):(e.Prev=this.m_LastOpenCell,e.Next=null,this.m_LastOpenCell.Next=e,this.m_LastOpenCell=e)}},e.RMOVECOST=14,e.DMOVECOST=10,e.AS_MOVECOST=[e.DMOVECOST,e.RMOVECOST],e.NEIGHBORPOS_X_VALUES=[0,1,1,1,0,-1,-1,-1],e.NEIGHBORPOS_Y_VALUES=[-1,-1,0,1,1,1,0,-1],e}();__reflect(AStar.prototype,"AStar");var ASMapCell=function(){function e(){}return e.CSNONE=0,e.CSOPEN=1,e.CSCLOSE=2,e}();__reflect(ASMapCell.prototype,"ASMapCell"),window.AStar=AStar,window.ASMapCell=ASMapCell;var Chat=function(e){function t(){var t=e.call(this)||this;return t.chatInterval=5e3,t.charMax=50,t.miniChatMax=30,t.canSpeak=!0,t.UpSpeak="",t.minichatList=new eui.ArrayCollection,t.worldchatList=new eui.ArrayCollection,t.kfChatList=new eui.ArrayCollection,t.syschatList=new eui.ArrayCollection,t.guildchatList=new eui.ArrayCollection,t.miniChatOpenStatus=!1,t.isNoShowTipsPanel=!1,t.publicCD=0,t.m_PreTime=0,t.m_GapTimer=3e5,t._timeOut=-1,t.worldSpeakTimeCD=0,t.guildSpeakTimeCD=0,t.sysId=PackageID.Chat,t.regNetMsg(S2cProtocol.sc_chat_new_msg,t.doNewChatMsg),t.regNetMsg(S2cProtocol.sc_chat_is_send_success,t.doIsSendSuccess),t.regNetMsg(S2cProtocol.sc_chat_system_message,t.doSystemMessage),t.regNetMsg(S2cProtocol.sc_chat_msg_delete,t.doGmDeleteMessage),t}return __extends(t,e),t.prototype.Init=function(){this.m_PreTime=egret.getTimer(),this.m_GapTimer=60*GlobalConfig.ins("ChatConstConfig").chatTipsRefresh*1e3,TimerManager.ins().doTimer(6e4,0,this._DoUpdate,this)},t.prototype._DoUpdate=function(){if(egret.getTimer()-this.m_PreTime>this.m_GapTimer){this.m_PreTime=egret.getTimer();var e=MathUtils.limitInteger(1,CommonUtils.getObjectLength(GlobalConfig.ins("ChatTipsConfig"))),i=GlobalConfig.ins("ChatTipsConfig")[e];if(i){var o=new ChatInfoData;o.type=ChatType.TIP,o.str=i.chatTips,t.ins().setMinichatData(o)}else console.log("random value is error => "+e)}},t.ins=function(){return e.ins.call(this)},t.prototype.sendChatInfo=function(e,t,i,o){if(void 0===i&&(i=0),t.length<=0)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101400);var s=new Sproto.cs_chat_send_info_request;s.str=t,s.type=e,s.pointId=i,s.bool=o,this.Rpc(C2sProtocol.cs_chat_send_info,s)},t.prototype.doNewChatMsg=function(e){var t=new ChatInfoData(e);this.postNewChatMsg(t)},t.prototype.removeChatWithId=function(e){if(this.worldchatList){for(var t=[],i=0;i<this.worldchatList.length;i++){var o=this.worldchatList.getItemAt(i);o.id!=e&&t.push(o)}this.worldchatList.source=t}if(this.minichatList){for(var t=[],i=0;i<this.minichatList.length;i++){var o=this.minichatList.getItemAt(i);o.id!=e&&t.push(o)}this.minichatList.source=t}},t.prototype.doGmDeleteMessage=function(e){if(this.worldchatList){for(var t=[],i=0;i<this.worldchatList.length;i++){var o=this.worldchatList.getItemAt(i);o.id!=e.id&&t.push(o)}this.worldchatList.source=t}if(this.kfChatList){for(var t=[],i=0;i<this.kfChatList.length;i++){var o=this.kfChatList.getItemAt(i);o.id!=e.id&&t.push(o)}this.kfChatList.source=t}if(this.minichatList){for(var t=[],i=0;i<this.minichatList.length;i++){var o=this.minichatList.getItemAt(i);o.id!=e.id&&t.push(o)}this.minichatList.source=t}},t.prototype.postNewChatMsg=function(e){return e.type==ChatType.KFChat?this.setKfChatListData(e):this.setWorldchatData(e),this.setMinichatData(e),e},t.prototype.doIsSendSuccess=function(e){e.success&&this.postSendInfoSuccess()},t.prototype.postSendInfoSuccess=function(){},t.prototype.doSystemMessage=function(e){var t=e.level,i=e.type,o=e.str;if(0==t||GameLogic.ins().actorModel.level>=t)switch(i){case 4:ErrorLog.ins().show(o);break;default:UserTips.ins().showTips(o)}},Object.defineProperty(t.prototype,"chatList",{get:function(){return this._chatList||(this._chatList=[]),this._chatList},enumerable:!0,configurable:!0}),t.prototype.startInterval=function(){this.canSpeak=!1,TimerManager.ins().doTimer(this.chatInterval,1,this.timeDo,this)},t.prototype.timeDo=function(){this.canSpeak=!0},t.prototype.postSysChatMsg=function(e){return this.setSyschatData(e),e},Object.defineProperty(t.prototype,"systemList",{get:function(){return this._systemList||(this._systemList=[]),this._systemList},enumerable:!0,configurable:!0}),t.prototype.checkRepeatString=function(e){var t=e.length;if(10>=t)return!0;for(var i=0,o=0;t>o;o++){var s=e.charAt(o);-1!=this.UpSpeak.lastIndexOf(s)&&++i}return i>=10?(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101639),!1):!0},t.prototype.setMinichatData=function(e){var t=this;this.minichatList.length>=this.miniChatMax&&this.minichatList.removeItemAt(0),this.minichatList.addItem(e),this.minichatList.source.sort(this.miniChatSortFunction),this.minichatList.refresh(),MiniChatPanel.Refresh(),this._timeOut>-1||(this._timeOut=setTimeout(function(){GameGlobal.MessageCenter.dispatch(MessageDef.CHAT_RECEIVE_SUCCESS_UPDATE),clearTimeout(t._timeOut),t._timeOut=-1},0))},t.prototype.miniChatSortFunction=function(e,t){return e.sendTime&&t.sendTime?e.sendTime-t.sendTime:0},t.prototype.setWorldchatData=function(e){this.worldchatList.length>=this.charMax&&this.worldchatList.removeItemAt(0),this.worldchatList.addItem(e)},t.prototype.setKfChatListData=function(e){this.kfChatList.length>=this.charMax&&this.kfChatList.removeItemAt(0),this.kfChatList.addItem(e)},t.prototype.setGuildchatData=function(e){this.guildchatList.length>=this.charMax&&this.guildchatList.removeItemAt(0),this.guildchatList.addItem(e),this.guildchatList.refresh(),t.ins().setMinichatData(e)},t.prototype.setSyschatData=function(e){this.syschatList.length>=this.charMax&&this.syschatList.removeItemAt(0),this.syschatList.addItem(e),t.ins().setMinichatData(e)},t.prototype.speakState=function(e){return 0},t.prototype.startupSpeakTime=function(e){},t.prototype.updateWorldCD=function(){this.worldSpeakTimeCD--,this.worldSpeakTimeCD<=0&&TimerManager.ins().remove(this.updateWorldCD,this)},t.prototype.updateGuildCD=function(){this.guildSpeakTimeCD--,this.guildSpeakTimeCD<=0&&TimerManager.ins().remove(this.updateGuildCD,this)},t.prototype.ClearMsg=function(){this.minichatList=new eui.ArrayCollection([]),this.worldchatList=new eui.ArrayCollection([]),this.kfChatList=new eui.ArrayCollection([]),this.guildchatList=new eui.ArrayCollection([]),this.allChatList=null},t.prototype.getChatByType=function(e){switch(e){case ChatTabbarType.All:return this.minichatList;case ChatTabbarType.World:return this.worldchatList;case ChatTabbarType.Guild:return this.guildchatList;case ChatTabbarType.KF:return this.kfChatList;case ChatTabbarType.System:return this.syschatList;default:return null}},t.SEND_CHAT_INFO="SEND_CHAT_INFO",t}(BaseSystem);__reflect(Chat.prototype,"Chat");var ChatType;!function(e){e[e.Public=1]="Public",e[e.System=2]="System",e[e.Normal=7]="Normal",e[e.KFChat=8]="KFChat",e[e.Guild=3]="Guild",e[e.GuildPublic=4]="GuildPublic",e[e.TIP=10]="TIP"}(ChatType||(ChatType={}));var ChatTabbarType;!function(e){e[e.None=-1]="None",e[e.All=0]="All",e[e.World=1]="World",e[e.Guild=2]="Guild",e[e.KF=3]="KF",e[e.System=4]="System"}(ChatTabbarType||(ChatTabbarType={})),MessageCenter.compile(Chat),window.Chat=Chat;var ChatGuildItemRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="ChatGuildItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){if(this.data instanceof GuildMessageInfo){var e=this.data;if(this.currentState="type"+(1==e.type?"1":"0"),1==e.type){this.showText.text=e.content;var t=GuildLanguage.guildOffice(e.office),i=Number("0x"+GuildLanguage.guildOfficeColor(e.office)),o=e.roleId==GameLogic.ins().actorModel.actorID?65280:1487615;this.head.source=JobHeadIconConst.GetIcon(e.job,e.sex),this.actorName.Set(TextFlowMaker.generateTextFlow1("|C:"+i+"&T:["+t+"]||C:"+o+"&T:"+e.name+"|"),e.vipLevel,e.monthCard,e.superMonthCard)}else this.showText.textFlow=TextFlowMaker.generateTextFlow(e.content)}},t}(eui.ItemRenderer);__reflect(ChatGuildItemRender.prototype,"ChatGuildItemRender"),window.ChatGuildItemRender=ChatGuildItemRender;var ChatInfoData=function(){function e(e){if(void 0===e&&(e=null),e){var t=e.chatData;this.type=t.type,this.id=t.id,this.name=t.name,this.job=t.job,this.sex=t.sex,this.vip=t.vip,this.monthCard=t.monthCard,this.superMonthCard=t.monthcard_super,this.ladderLevel=t.ladderLevel,this.isFirst=t.isFirst,this.pointId=t.pointId,this.str=t.str,this.isTeacher=t.isTeacher,this.time=t.time,this.teamID=t.teamid,this.fbId=t.groupid}}return e}();__reflect(ChatInfoData.prototype,"ChatInfoData");var ChatSystemData=function(){function e(e,t,i){this.type=e,this.str=t,this.time=i}return e}();__reflect(ChatSystemData.prototype,"ChatSystemData"),window.ChatInfoData=ChatInfoData,window.ChatSystemData=ChatSystemData;var ChatListItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="ChatItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.ADDED_TO_STAGE,this.addedToStage,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.head.source=JobHeadIconConst.GetIcon(t.job,t.sex),this.frame&&this.frame.changeState&&this.frame.changeState instanceof Function&&this.frame.changeState(1),this.showText.textFlow=(new egret.HtmlTextParser).parser(t.str),this.name_label.text=t.name,this.instructorImg.visible=1==t.isTeacher,this.vip_image.visible=this.data.vip>0;for(var i,o=0,s=0;s<this.group.numChildren;s++)i=this.group.getChildAt(s),i.visible&&(i.x=o,o+=i.width)},t.prototype.addedToStage=function(e){},t}(eui.ItemRenderer);__reflect(ChatListItemRenderer.prototype,"ChatListItemRenderer"),window.ChatListItemRenderer=ChatListItemRenderer;var ChatSystemItemRenderer=function(e){function t(){var t=e.call(this)||this;
return t.skinName="SysMesItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){1==this.data.type?(this.str.textFlow=TextFlowMaker.generateTextFlow("|C:0xFD2F2F&T:"+this.data.str+"|"),this.type.source="comp_55_28_06_png"):(this.str.textFlow=TextFlowMaker.generateTextFlow(this.data.str),this.type.source="comp_55_28_02_png")},t.prototype.setFriendGroup=function(e){},t}(eui.ItemRenderer);__reflect(ChatSystemItemRenderer.prototype,"ChatSystemItemRenderer"),window.ChatSystemItemRenderer=ChatSystemItemRenderer;var ChatTipsWin=function(e){function t(){var t=e.call(this)||this;return t.time=0,t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.prototype.initUI=function(){this.skinName="ChatTipsWinSkin"},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this,this.onTouch,this.sureBtn),this.addTouchEvent(this,this.onTouch,this.cancelBtn),this.addTouchEvent(this,this.onTouch,this.checkbox),this.time=e[0],this.callback=e[1],this.update()},t.prototype.onTouch=function(e){var t=GlobalConfig.ins("ChatConstConfig");switch(e.currentTarget){case this.sureBtn:GameLogic.ins().actorModel.yb<t.cost?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100014):this.callback&&this.callback(),ViewManager.ins().close(this);break;case this.cancelBtn:Chat.ins().isNoShowTipsPanel=!1,ViewManager.ins().close(this);break;case this.checkbox:Chat.ins().isNoShowTipsPanel=this.checkbox.selected}},t.prototype.update=function(){this.time>0&&(TimerManager.ins().isExists(this.updateCD,this)||TimerManager.ins().doTimer(1e3,this.time,this.updateCD,this),this.show())},t.prototype.show=function(){var e=GlobalConfig.ins("ChatConstConfig");this.descTF.textFlow=TextFlowMaker.generateTextFlow1(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101714,[e.worldChatCd,this.time,e.cost]))},t.prototype.updateCD=function(){this.time--,this.time<=0&&(TimerManager.ins().remove(this.updateCD,this),ViewManager.ins().close(this)),this.show()},t.prototype.close=function(){TimerManager.ins().remove(this.updateCD,this)},t}(BaseEuiPanel);__reflect(ChatTipsWin.prototype,"ChatTipsWin"),ViewManager.ins().reg(ChatTipsWin,LayerManager.UI_Popup),window.ChatTipsWin=ChatTipsWin;var ChatWin=function(e){function t(){var t=e.call(this)||this;return t.cruIndex=0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.worldPanel=new WorldChatPanel,this.worldPanel.name="世界",this.kfPanel=new KfChatPanel,this.kfPanel.name="跨服",this.guildPanel=new GuildChatPanel,this.guildPanel.name="公会",this.sysPanel=new SysChatPanel,this.sysPanel.name="系统",this.commonWindowBg.AddChildStack(this.worldPanel),this.commonWindowBg.AddChildStack(this.kfPanel),this.commonWindowBg.AddChildStack(this.guildPanel),this.commonWindowBg.AddChildStack(this.sysPanel)},t.prototype.open=function(){this.kefuPanel&&this.kefuPanel.desc&&(this.kefuPanel.desc.text=GlobalConfig.jifengTiaoyueLg.st101715),this.commonWindowBg.OnAdded(this)},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),this.worldPanel.release(),this.kfPanel.release(),this.guildPanel.release(),this.sysPanel.release()},t.CanGuildChat=function(){return GameLogic.ins().actorModel.guildID?!0:(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101716),!1)},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){if(2==e){if(!t.CanGuildChat())return!1;Chat.ins().guildchatList.length<1&&Guild.ins().sendAllGuildMessage()}return!0},t}(BaseEuiPanel);__reflect(ChatWin.prototype,"ChatWin",["ICommonWindow"]),ViewManager.ins().reg(ChatWin,LayerManager.UI_Main),window.ChatWin=ChatWin;var CustomServicePanel=function(e){function t(){var t=e.call(this)||this;return t.defaultText=GlobalConfig.jifengTiaoyueLg.st101711,t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101717,t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.open=function(){this.addTouchEvent(this,this.onTap,this.sendBtn)},t.prototype.onTap=function(e){return 0==this.input.text.length||this.input.text==this.defaultText?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101718):void ReportData.getIns().advice(this.input.text,this.callBack,this)},t.prototype.callBack=function(){this.input.text=""},t.prototype.UpdateContent=function(){},t}(BaseChatPanel);__reflect(CustomServicePanel.prototype,"CustomServicePanel",["ICommonWindowTitle"]),window.CustomServicePanel=CustomServicePanel;var GuildChatPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100896,t.skinName="WorldChatPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.chatList.itemRenderer=ChatGuildItemRender,this.chatList.dataProvider=Chat.ins().guildchatList},t.prototype.open=function(){e.prototype.open.call(this,2)},t.prototype.UpdateContent=function(){},t}(BaseChatPanel);__reflect(GuildChatPanel.prototype,"GuildChatPanel",["ICommonWindowTitle"]),window.GuildChatPanel=GuildChatPanel;var KfChatPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100466,t.skinName="WorldChatPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.chatList.itemRenderer=ChatListItemRenderer,this.chatList.dataProvider=Chat.ins().kfChatList},t.prototype.open=function(){e.prototype.open.call(this,1)},t.prototype.UpdateContent=function(){},t}(BaseChatPanel);__reflect(KfChatPanel.prototype,"KfChatPanel",["ICommonWindowTitle"]),window.KfChatPanel=KfChatPanel;var MiniChatItemRender=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(){var e=this.data,t=ViewManager.ins().getView(GameSceneView);e.teamID&&"mini"!=t.miniChat.currentState?TeamFbSproto.ins().sendCreateTeam(e.fbId,e.teamID):e.id&&"mini"!=t.miniChat.currentState&&(UserReadPlayer.ins().LookPlayer(e.id,0),UserReadPlayer.ins().actorId=e.id,MessageCenter.ins().addListener(MessageDef.SHOW_OTHER_ACTOR,this.openWin,this))},t.prototype.openWin=function(){MessageCenter.ins().removeListener(MessageDef.SHOW_OTHER_ACTOR,this.openWin,this);var e=this.data;ViewManager.ins().open(TrRoleWin,e.id)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this,i=t.data;if(t.data.type){t.vip_iamge.source=1==t.data.isTeacher?"comp_38_16_01_png":"comp_43_25_01_png",1==t.data.isTeacher||t.data.vip>0?(t.vip_iamge.visible=!0,t.vip_iamge.width=1==t.data.isTeacher?38:43):(t.vip_iamge.width=0,t.vip_iamge.visible=!1),t.lab&&t.lab.parent&&t.removeChild(t.lab),t.lab=new eui.Label,t.lab.textColor=16777215,t.lab.verticalCenter=0,t.lab.verticalAlign="middle",t.lab.size=14,t.lab.lineSpacing=3,t.addChild(t.lab);var o="",s=GlobalConfig.jifengTiaoyueLg;switch(t.data.type){case ChatType.GuildPublic:case ChatType.Public:o="<font color = '0xFE4F7C'>["+s.st101719+"]</font>";break;case ChatType.Normal:o="<font color = '0xF07F2C'>["+s.st101402+"]<font color = '0x5DB7F6'>"+t.getNameStr();break;case ChatType.Guild:o="<font color = '0xEDFF66'>["+s.st100896+"]"+t._getGuidePostTxt(t.data.office)+"<font color = '0x5DB7F6'>"+t.getNameStr();break;case ChatType.TIP:case ChatType.System:o="<font color = '0xFE4F7C'>["+s.st101403+"]</font>";break;case ChatType.KFChat:o="<font color = '0x6AF932'>["+s.st100466+"]<font color = '0x5DB7F6'>"+t.getNameStr()}if(t.txtName.textFlow=TextFlowMaker.getTextFlowByHtml(o),i.type==ChatType.Public||i.type==ChatType.System||i.type==ChatType.TIP||i.type==ChatType.GuildPublic)t.lab.textFlow=TextFlowMaker.generateTextFlow("<font color = '0xffffff'>"+i.str);else if(t.data.type==ChatType.Guild||t.data.type==ChatType.KFChat){var n=t.filterContentStr();t.lab.textFlow=TextFlowMaker.getTextFlowByHtml("<font color = '0xffffff'>"+n+"</font>")}else t.data.type==ChatType.Normal&&(t.lab.textFlow=TextFlowMaker.getTextFlowByHtml("<font color = '0xffffff'>"+i.str+"</font>"));t.validateNow();var r=0,a=t.width-t.group.width-2*r;t.lab.x=t.group.width+1.5*r,t.lab.width>a&&(t.lab.width=a,t.lab.validateNow())}},t.prototype._getGuidePostTxt=function(e){var t=GlobalConfig.jifengTiaoyueLg;switch(e){case GuildOffice.GUILD_MEMBER:return"<font color = '0xffffff'>["+t.st100934+"]</font>";case GuildOffice.GUILD_JINGYING:return"<font color = '0x008f22'>["+t.st101504+"]</font>";case GuildOffice.GUILD_TANGZHU:return"<font color = '0x6AF932'>["+t.st101505+"]</font>";case GuildOffice.GUILD_HUFA:return"<font color = '0xEDFF66'>["+t.st101506+"]</font>";case GuildOffice.GUILD_ZHANGLAO:return"<font color = '0xEDFF66'>["+t.st101507+"]</font>";case GuildOffice.GUILD_FUBANGZHU:return"<font color = '0xFE4F7C'>["+t.st101508+"]</font>";case GuildOffice.GUILD_BANGZHU:return"<font color = '0xF07F2C'>["+t.st101036+"]</font>";default:return""}},t.prototype.filterContentStr=function(){var e=this,t="";if(e.data&&e.data.str){t=e.data.str;for(var i="<",o="&lt;",s=t.indexOf(i,0);s>=0;)t=t.replace(i,o),s=t.indexOf(i,s+o.length)}return t},t.prototype.getImageSpaceStr=function(){var e=this,t=0,i=43,o=77;if(e.data.vip>0&&(t=i),1==e.data.isTeacher&&(t+=o),0==t)return"";e.lab.text="";for(var s="";e.lab.textWidth<t;)s+=" ",e.lab.text=s;return s},t.prototype.getNameStr=function(){return this.data.name?"<u>"+this.data.name+"</u>":""},t.IMAGE_POS_X=-1,t}(eui.ItemRenderer);__reflect(MiniChatItemRender.prototype,"MiniChatItemRender"),window.MiniChatItemRender=MiniChatItemRender;var MiniChatPanel=function(e){function t(){var t=e.call(this)||this;return t._selectIndex=0,t.skinName="MiniChatSkin",t}return __extends(t,e),t.IsShowChat=function(){var e=ViewManager.ins().getView(GameSceneView);return null==e?!0:!0},t.CheckSend=function(){if(ViewManager.ins().isShow(GameSceneView)){var e=ViewManager.ins().getView(GameSceneView);e.miniChat.DoEnterSend()}},t.CancelSend=function(){if(ViewManager.ins().isShow(GameSceneView)){var e=ViewManager.ins().getView(GameSceneView);e.miniChat.DoCancelSend()}},t.prototype.init=function(){this.list.itemRenderer=MiniChatItemRender,this.input.text=""},t.prototype.openPanel=function(){this.currentState="mini",this.btnSend.label=GlobalConfig.jifengTiaoyueLg.st101401,this.m_Btn1.label=GlobalConfig.jifengTiaoyueLg.st100288,this.m_Btn2.label=GlobalConfig.jifengTiaoyueLg.st101402,this.m_Btn3.label=GlobalConfig.jifengTiaoyueLg.st100896,this.m_Btn4.label=GlobalConfig.jifengTiaoyueLg.st100466,this.m_Btn5.label=GlobalConfig.jifengTiaoyueLg.st101403,this.m_Lan1&&(this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101404),this.input.prompt=GlobalConfig.jifengTiaoyueLg.st101405,this._selectIndex=0,this.addTouchEvent(this,this.onTouch,this.btnSend),this.addTouchEvent(this,this.onTouch,this.btnClose),this.addTouchEvent(this,this.onTouch,this.input),this.addTouchEvent(this,this.onTouch,this.scroller_chat),this.addTouchEvent(this,this.onTouch,this.toggle2),this.groupTab.addEventListener(egret.TouchEvent.TOUCH_TAP,this._clickTab,this),GameGlobal.MessageCenter.addListener(MessageDef.CHAT_RECEIVE_SUCCESS_UPDATE,this.updateViewReceive,this),this.scroller_chat.viewport=this.list,Chat.ins().guildchatList.length<1&&Guild.ins().sendAllGuildMessage(),this.txtTips.visible=this._selectIndex==ChatTabbarType.System,this._updateButton(this._selectIndex);var e=ViewManager.ins().getView(PlayFunView);e&&(e.mask=null)},t.prototype._DoRefresh=function(){this.list.validateNow()},t.Refresh=function(){},t.prototype.closePanel=function(){this.removeEvents(),this.groupTab.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._clickTab,this),GameGlobal.MessageCenter.removeListener(MessageDef.CHAT_RECEIVE_SUCCESS_UPDATE,this.updateViewReceive,this),this.list.dataProvider=null},t.prototype.updateViewReceive=function(){this._updateButton(this._selectIndex)},t.prototype._clickTab=function(e){var t=e.target;if(t instanceof eui.Button){var i=this.groupTab.getChildIndex(e.target);if(i!=this._selectIndex)return i!=ChatTabbarType.Guild||GameLogic.ins().actorModel.guildID?void this._updateButton(i):void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101399)}},t.prototype._updateButton=function(e){for(var t=this,i=0,o=t.groupTab.numChildren;o>i;i++){var s=t.groupTab.getChildAt(i);s.currentState=i==e?"down":"up"}t._selectIndex=e;var n=Chat.ins().getChatByType(t._selectIndex);t.list.dataProvider=n,t.groupSend.visible=t._selectIndex!=ChatTabbarType.System,t.txtTips.visible=t._selectIndex==ChatTabbarType.System,t.validateNow(),t.scroller_chat&&t.scroller_chat.viewport&&t.scroller_chat.viewport.contentHeight>t.scroller_chat.height&&(t.list.scrollV=t.scroller_chat.viewport.contentHeight-t.scroller_chat.height)},t.prototype.onTouch=function(e){e.target;switch(e.currentTarget){case this.btnSend:return void this._Send();case this.scroller_chat:if("normal"==this.currentState)return;this._changeState();break;case this.btnClose:case this.toggle2:this._changeState()}},t.prototype.viewChange=function(){this._changeState()},t.prototype._changeState=function(){this.currentState="normal"==this.currentState?"mini":"normal",this.btnSend.label=GlobalConfig.jifengTiaoyueLg.st101401,this.m_Btn1.label=GlobalConfig.jifengTiaoyueLg.st100288,this.m_Btn2.label=GlobalConfig.jifengTiaoyueLg.st101402,this.m_Btn3.label=GlobalConfig.jifengTiaoyueLg.st100896,this.m_Btn4.label=GlobalConfig.jifengTiaoyueLg.st100466,this.m_Btn5.label=GlobalConfig.jifengTiaoyueLg.st101403,this.m_Lan1&&(this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101404),this.input.prompt=GlobalConfig.jifengTiaoyueLg.st101405;var e=new egret.Rectangle(0,0,480,388),t=ViewManager.ins().getView(PlayFunView),i=ViewManager.ins().getView(GuildWarInfoPanel),o=ViewManager.ins().getView(BossBloodPanel),s=ViewManager.ins().getView(ChaosBattleAtkWin);t&&(t.mask="normal"==this.currentState?e:null),i&&(i.mask="normal"==this.currentState?e:null),o&&(o.mask="normal"==this.currentState?e:null),s&&(s.mask="normal"==this.currentState?e:null),this._updateButton(ChatTabbarType.All)},t.prototype._Send=function(){var e=this.input.text.trim();if(null==e)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101400);switch(this._selectIndex){case ChatTabbarType.All:case ChatTabbarType.World:Chat.ins().sendChatInfo(ChatType.Normal,e,0,!1);break;case ChatTabbarType.Guild:Guild.ins().sendGuildMessage(e);break;case ChatTabbarType.KF:Chat.ins().sendChatInfo(ChatType.KFChat,e,0,!1)}this.input.text=""},t.prototype.DoEnterSend=function(){this._Send()},t.prototype.DoCancelSend=function(){},t}(BaseComponent);__reflect(MiniChatPanel.prototype,"MiniChatPanel"),window.MiniChatPanel=MiniChatPanel;var SysChatPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101403,t.skinName="SysPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.chatList.itemRenderer=ChatSystemItemRenderer,this.chatList.dataProvider=Chat.ins().syschatList},t.prototype.open=function(){e.prototype.open.call(this,3)},t.prototype.UpdateContent=function(){},t}(BaseChatPanel);__reflect(SysChatPanel.prototype,"SysChatPanel",["ICommonWindowTitle"]),window.SysChatPanel=SysChatPanel;var WorldChatPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101402,t.skinName="WorldChatPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.chatList.itemRenderer=ChatListItemRenderer,this.chatList.dataProvider=Chat.ins().worldchatList},t.prototype.open=function(){e.prototype.open.call(this,0)},t.prototype.UpdateContent=function(){},t}(BaseChatPanel);__reflect(WorldChatPanel.prototype,"WorldChatPanel",["ICommonWindowTitle"]),window.WorldChatPanel=WorldChatPanel;var ClimbBox=function(e){function t(){var t=e.call(this)||this;return t.isClick=!1,t.skinName="ClimbBoxSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.release=function(){this.m_MainGroup.filters=null},t.prototype.setData=function(e,t){this.type=t,this.data=e;var i=ClimbTowerModel.getInstance;switch(this.isClick=!1,this.m_MainGroup.filters=null,t){case ClimbType.PET:var o=i.ClimbTowerPetData;if(o){var s=!1,n=o.rewards[e.index-1];n&&0!=n&&(s=!0),1==s?(this.m_CompImg.visible=!0,this.state=RewardState.Gotten):(this.m_CompImg.visible=!1,o.maxlevel>=e.time?(this.m_MainGroup.filters=null,this.isClick=!0,this.state=RewardState.CanGet):(FilterUtil.setGayFilter(this.m_MainGroup),this.state=RewardState.NotReached)),this.m_LayerLab.text=e.time+GlobalConfig.jifengTiaoyueLg.st100369}break;case ClimbType.MOUNT:var r=i.ClimbTowerMountData;if(r){var s=!1,n=r.rewards[e.index-1];n&&0!=n&&(s=!0),1==s?(this.m_CompImg.visible=!0,this.state=RewardState.Gotten):(this.m_CompImg.visible=!1,r.maxlevel>=e.time?(this.m_MainGroup.filters=null,this.isClick=!0,this.state=RewardState.CanGet):(FilterUtil.setGayFilter(this.m_MainGroup),this.state=RewardState.NotReached)),this.m_LayerLab.text=e.time+GlobalConfig.jifengTiaoyueLg.st100369}}},t.prototype.onClick=function(){switch(this.type){case ClimbType.PET:var e=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101720,[this.data.time]),t=this.data.index;ViewManager.ins().open(GetReward2Panel,GlobalConfig.jifengTiaoyueLg.st101721,e,this.data.boxAward,function(){ClimbTowerSproto.ins().sendGetTowerAward(ClimbType.PET,t)},this.state);break;case ClimbType.MOUNT:var e=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101720,[this.data.time]),i=this.data.index;ViewManager.ins().open(GetReward2Panel,GlobalConfig.jifengTiaoyueLg.st101721,e,this.data.boxAward,function(){ClimbTowerSproto.ins().sendGetTowerAward(ClimbType.MOUNT,i)},this.state)}},t}(eui.Component);__reflect(ClimbBox.prototype,"ClimbBox"),window.ClimbBox=ClimbBox;var ClimbProBox=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_ExpBar.labelDisplay.visible=!1},t.prototype.release=function(){this.removeBoxGroup()},t.prototype.setData=function(e){this.m_ExpBar.maximum=0,this.removeBoxGroup();var t=ClimbTowerModel.getInstance;switch(e){case ClimbType.PET:var i=GlobalConfig.ins("PetTowerAwardConfig");for(var o in i){var s=i[o],n=s.time/1e3,r=3e3*n;this.m_ExpBar.maximum=Math.max(this.m_ExpBar.maximum,s.time);var a=new ClimbBox;a.x=r,this.m_BoxGroup.addChild(a),a.setData(s,ClimbType.PET)}this.m_ExpBar.value=Math.min(t.ClimbTowerPetData.maxlevel,this.m_ExpBar.maximum);break;case ClimbType.MOUNT:var i=GlobalConfig.ins("MountsTowerAwardConfig");for(var o in i){var l=i[o],n=l.time/1e3,r=3e3*n;this.m_ExpBar.maximum=Math.max(this.m_ExpBar.maximum,l.time);var a=new ClimbBox;a.x=r,this.m_BoxGroup.addChild(a),a.setData(l,ClimbType.MOUNT)}this.m_ExpBar.value=Math.min(t.ClimbTowerMountData.maxlevel,this.m_ExpBar.maximum)}},t.prototype.removeBoxGroup=function(){for(var e=0;e<this.m_BoxGroup.numChildren;e++){var t=this.m_BoxGroup.getChildAt(e);t&&t instanceof ClimbBox&&t.release()}this.m_BoxGroup.removeChildren()},t}(eui.Component);__reflect(ClimbProBox.prototype,"ClimbProBox"),window.ClimbProBox=ClimbProBox;var ClimbRankItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="FbRankItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.rank.text=this.itemIndex+1+"";var t=e.vip;this.nameLabel.Set(e.name,t,!1,!1),this.zhanli.text=CommonUtils.overLength(e.power),this.ce.text=e.lvl+GlobalConfig.jifengTiaoyueLg.st100369},t}(eui.ItemRenderer);__reflect(ClimbRankItem.prototype,"ClimbRankItem"),window.ClimbRankItem=ClimbRankItem;var ClimbRankWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="FbRankSkin",t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100400,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100401,t.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100306,t.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st100402,t.m_Lan5.text=GlobalConfig.jifengTiaoyueLg.st100403,t}return __extends(t,e),t.prototype.UpdateContent=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100400,this.commonWindowBg.OnAdded(this);var i,o=e[0],s=ClimbTowerModel.getInstance;switch(o){case ClimbType.PET:i=s.ClimbTowerPetData.ranks,this.rank.text=0<s.ClimbTowerPetData.myrank&&s.ClimbTowerPetData.myrank<=1e3?s.ClimbTowerPetData.myrank+"":GlobalConfig.jifengTiaoyueLg.st100086;break;case ClimbType.MOUNT:i=s.ClimbTowerMountData.ranks,this.rank.text=0<s.ClimbTowerMountData.myrank&&s.ClimbTowerMountData.myrank<=1e3?s.ClimbTowerMountData.myrank+"":GlobalConfig.jifengTiaoyueLg.st100086}this.list.itemRenderer=ClimbRankItem,this.list.dataProvider=new eui.ArrayCollection(i)},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t}(BaseEuiPanel);__reflect(ClimbRankWin.prototype,"ClimbRankWin",["ICommonWindowTitle"]),ViewManager.ins().reg(ClimbRankWin,LayerManager.UI_Main),window.ClimbRankWin=ClimbRankWin;var ClimbResultWin=function(e){function t(){var t=e.call(this)||this;return t.m_HasNext=!0,t.skinName="ChallengeResultSkin",t.award_label.text=GlobalConfig.jifengTiaoyueLg.st101297,t.list0.itemRenderer=ItemBase,t.list1.itemRenderer=ItemBase,t.nextLabel.text=GlobalConfig.jifengTiaoyueLg.st101837,t.exitBtn.label=GlobalConfig.jifengTiaoyueLg.st100962,t}return __extends(t,e),Object.defineProperty(t.prototype,"closeBtn",{get:function(){return this.fightResultBg.closeBtn},enumerable:!0,configurable:!0}),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_CloseFunc=e[0];var i=e[1];this.fightResultBg.SetState("win"),this.AddClick(this.exitBtn,this._OnClick),this.AddClick(this.closeBtn,this._ContinueChallenge);var o,s=ClimbTowerModel.getInstance,n=!0;switch(this.type=i,i){case ClimbType.PET:var r=GlobalConfig.ins("PetTowerConfig")[s.petBattleId];s.ClimbTowerPetData?s.ClimbTowerPetData.maxlevel<=s.petBattleId?(r&&(this.list0.dataProvider=new eui.ArrayCollection(r.firstAward)),o=GlobalConfig.ins("PetTowerConfig")[s.petBattleId+1],n=s.getIsBattle(s.ClimbTowerPetData.pass,s.petBattleId+1),o&&(this.list1.dataProvider=new eui.ArrayCollection(o.firstAward))):(r&&(this.list0.dataProvider=new eui.ArrayCollection(r.sweepAward)),o=GlobalConfig.ins("PetTowerConfig")[s.petBattleId+1],n=s.getIsBattle(s.ClimbTowerPetData.pass,s.petBattleId+1),o&&(this.list1.dataProvider=new eui.ArrayCollection(o.sweepAward))):this.list1.dataProvider=new eui.ArrayCollection([]);break;case ClimbType.MOUNT:if(s.ClimbTowerMountData){var a=GlobalConfig.ins("MountsTowerConfig")[s.mountBattleId];a&&(this.list0.dataProvider=new eui.ArrayCollection(a.sweepAward)),o=GlobalConfig.ins("MountsTowerConfig")[s.mountBattleId+1],n=s.getIsBattle(s.ClimbTowerMountData.pass,s.mountBattleId+1),o&&(this.list1.dataProvider=new eui.ArrayCollection(o.sweepAward))}else this.list1.dataProvider=new eui.ArrayCollection([]);break;default:this.award_label.text=GlobalConfig.jifengTiaoyueLg.st101500,n=!1,this.list0.dataProvider=new eui.ArrayCollection(s.reward)}o&&n?(this.closeBtn.x=95,this.closeBtn.name=GlobalConfig.jifengTiaoyueLg.st101602):(this.list1.visible=!1,this.nextLabel.visible=!1,this.closeBtn.name=GlobalConfig.jifengTiaoyueLg.st100962,this.exitBtn.visible=!1,this.m_HasNext=!1),this.m_Time=5,this._UpdateCloseBtnLabel(),TimerManager.ins().doTimer(1e3,this.m_Time,this._UpdateCloseBtnLabel,this)},t.prototype.close=function(){TimerManager.ins().remove(this._UpdateCloseBtnLabel,this)},t.prototype.onMaskTap=function(){},t.prototype._OnClick=function(){(this.type==ClimbType.PET||this.type==ClimbType.MOUNT)&&UserFb.ins().sendExitFb(),ViewManager.ins().close(this),this.m_CloseFunc&&(this.m_CloseFunc(),this.m_CloseFunc=null)},t.prototype._UpdateCloseBtnLabel=function(){--this.m_Time<=0&&this._ContinueChallenge(),this.closeBtn.label=this.closeBtn.name+"("+Math.max(this.m_Time,0)+"s)"},t.prototype._ContinueChallenge=function(){if(this.m_HasNext){ViewManager.ins().close(this);var e=ClimbTowerModel.getInstance;switch(this.type){case ClimbType.PET:var t=GlobalConfig.ins("PetTowerConfig")[e.petBattleId+1];if(t.zsLv>0){if(t.zsLv>GameLogic.ins().actorModel.zsLv)return UserFb.ins().sendExitFb(),void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100219)}else if(t.lv>GameLogic.ins().actorModel.level)return UserFb.ins().sendExitFb(),void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100220);ClimbTowerSproto.ins().sendTowerEnter(ClimbType.PET,e.petBattleId+1);break;case ClimbType.MOUNT:var i=GlobalConfig.ins("MountsTowerConfig")[e.mountBattleId+1];if(i.zsLv>0){if(i.zsLv>GameLogic.ins().actorModel.zsLv)return UserFb.ins().sendExitFb(),void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100219)}else if(i.lv>GameLogic.ins().actorModel.level)return UserFb.ins().sendExitFb(),void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100220);ClimbTowerSproto.ins().sendTowerEnter(ClimbType.MOUNT,e.mountBattleId+1)}}else this._OnClick()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(ClimbResultWin.prototype,"ClimbResultWin"),window.ClimbResultWin=ClimbResultWin;var MountClimbAnim=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_ItemList.itemRenderer=ItemBase,this.m_ListData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.m_ListData,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.setData=function(e){if(null!=e){this.configData=e;var t=ClimbTowerModel.getInstance,i=GlobalConfig.ins("MonstersConfig")[e.monsterId];i&&(this.playEff(i.avatar+"_3"+EntityAction.STAND),this.m_ElementImg.source=ResDataPath.GetElementImgName(i.elementType)),e.id==t.mountSelectIndex?this.m_ArrImg.visible=!0:this.m_ArrImg.visible=!1,this.m_level.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100390,[e.id]),this.m_ListData.removeAll(),this.m_ListData.replaceAll(e.sweepAward),this.m_ListData.refresh();var o=t.getIsBattle(t.ClimbTowerMountData.pass,e.id);o?this.m_DeadImg.visible=!1:this.m_DeadImg.visible=!0}else this.release()},t.prototype.initEffData=function(){this.m_Eff||(this.m_Eff=new MovieClip,this.m_Eff.touchEnabled=!1,this.m_AnimGroup.addChild(this.m_Eff),this.m_Eff.x=this.m_AnimGroup.width/2,this.m_Eff.y=this.m_AnimGroup.height/2,this.m_Eff.scaleX=this.m_Eff.scaleY=.6)},t.prototype.playEff=function(e){this.initEffData(),this.m_Eff.loadUrl(ResDataPath.GetMonsterBodyPath(e),!0,-1)},t.prototype.release=function(){DisplayUtils.dispose(this.m_Eff),this.m_Eff=null,this.m_ElementImg.source="",this.m_ArrImg.visible=!1,this.m_level.text="",this.m_DeadImg.visible=!1},t.prototype.onClick=function(){this.configData&&(ClimbTowerModel.getInstance.mountSelectIndex=this.configData.id,GameGlobal.MessageCenter.dispatch(ClimbTowerEvent.CLIMBMOUNT_DATAUPDATE_MSG))},t}(eui.Component);__reflect(MountClimbAnim.prototype,"MountClimbAnim"),window.MountClimbAnim=MountClimbAnim;var MountClimbRankItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="MountClimbRankItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.m_RankLab.text=this.itemIndex+1+"",this.m_NameLab.text=e.name,this.m_LvlLab.text=e.lvl+GlobalConfig.jifengTiaoyueLg.st100369;var t=12549376;switch(this.itemIndex){case 0:t=12549376;break;case 1:t=5011675;break;case 2:t=11818219}this.m_RankLab.textColor=t,this.m_NameLab.textColor=t},t}(eui.ItemRenderer);__reflect(MountClimbRankItem.prototype,"MountClimbRankItem"),window.MountClimbRankItem=MountClimbRankItem;var MountClimbTowerPanel=function(e){function t(t){var i=e.call(this)||this;return i.name=GlobalConfig.jifengTiaoyueLg.st100365,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100389,i.skinName="MountClimbTowerSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),UIHelper.SetLinkStyleLabel(this.m_LockRankLab,GlobalConfig.jifengTiaoyueLg.st100381),this.m_List.itemRenderer=MountClimbRankItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,this.m_ItemList.itemRenderer=ItemBase,this.m_ListData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.m_ListData,this.m_FirstItemList.itemRenderer=ItemBase,this.m_FirstListData=new eui.ArrayCollection,this.m_FirstItemList.dataProvider=this.m_FirstListData,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100380,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100377,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100399,this.m_AllBattleBtn.label=GlobalConfig.jifengTiaoyueLg.st100398,this.m_BattleBtn.label=GlobalConfig.jifengTiaoyueLg.st100046},t.prototype.addViewEvent=function(){this.observe(ClimbTowerEvent.CLIMBMOUNT_DATAUPDATE_MSG,this.initData),this.AddClick(this.m_AllBattleBtn,this.onClickAllBattle),this.AddClick(this.m_BattleBtn,this.onClickBattle),this.AddClick(this.m_LeftImg,this.onClickLeftImg),this.AddClick(this.m_RightImg,this.onClickRightImg),this.AddClick(this.m_LockRankLab,this.onClickRank)},t.prototype.removeEvent=function(){},t.prototype.open=function(){ClimbTowerSproto.ins().sendGetTowerInit(ClimbType.MOUNT),this.addViewEvent()},t.prototype.close=function(){this.removeEvent()},t.prototype.release=function(){for(var e=0;e<this.m_AnimGroup.numChildren;e++){var t=this.m_AnimGroup.getChildAt(e);t&&t instanceof MountClimbAnim&&t.release()}this.removeEvent(),this.m_ClimbProBox.release()},t.prototype.initData=function(){var e=ClimbTowerModel.getInstance,t=e.ClimbTowerMountData,i=GlobalConfig.ins("MountsTowerConfig")[e.mountSelectIndex];if(t&&i){this.m_TitleLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100390,[i.id]);for(var o=Math.ceil(i.id/e.m_MountLayerNum),s=e.climbMountLayerDic.get(o),n=0;3>n;n++)if(s.values[n]){var r=this.m_AnimGroup.getChildAt(n);r&&r instanceof MountClimbAnim&&r.setData(s.values[n])}else{var r=this.m_AnimGroup.getChildAt(n);r&&r instanceof MountClimbAnim&&r.setData(null)}this.m_ListData.removeAll(),this.m_ListData.replaceAll(i.sweepAward),this.m_ListData.refresh(),this.m_FirstListData.removeAll(),this.m_FirstListData.replaceAll(i.firstAward),this.m_FirstListData.refresh(),i.id<=t.maxlevel?this.m_CompImg.visible=!0:this.m_CompImg.visible=!1,this.m_ClimbProBox.setData(ClimbType.MOUNT);var a=GlobalConfig.ins("MountsTowerBaseConfig");if(this.m_VIPLab.text="VIP"+a.openSweepLimit+GlobalConfig.jifengTiaoyueLg.st100391,UserVip.ins().lv>=a.openSweepLimit&&(this.m_VIPLab.text=GlobalConfig.jifengTiaoyueLg.st100392+(1-t.sweep)+"/1"),i.id<=t.maxlevel+1){var l=e.getIsBattle(t.pass,i.id);1==l?this.m_BattleBtn.enabled=!0:this.m_BattleBtn.enabled=!1}else this.m_BattleBtn.enabled=!1;this.m_TopBattleLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100393,[t.maxlevel]),this.initAttr(),i.zsLv>0?(this.m_NeedLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100394,[i.zsLv])+i.lv+GlobalConfig.jifengTiaoyueLg.st100093,i.zsLv>GameLogic.ins().actorModel.zsLv?this.m_BattleBtn.enabled=!1:i.lv>GameLogic.ins().actorModel.level&&(this.m_BattleBtn.enabled=!1)):(this.m_NeedLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100395,[i.lv]),i.lv>GameLogic.ins().actorModel.level&&(this.m_BattleBtn.enabled=!1));for(var h=[],n=0;3>n;n++){var c=t.ranks[n];c&&h.push(c)}this.listData.replaceAll(h)}},t.prototype.onClickAllBattle=function(){var e=GlobalConfig.ins("MountsTowerBaseConfig"),t=ClimbTowerModel.getInstance,i=t.ClimbTowerMountData;UserVip.ins().lv>=e.openSweepLimit?1-i.sweep>0?ClimbTowerSproto.ins().sendGetSweep(ClimbType.MOUNT):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100396):UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100397,[e.openSweepLimit]))
},t.prototype.onClickBattle=function(){var e=ClimbTowerModel.getInstance;ClimbTowerSproto.ins().sendTowerEnter(ClimbType.MOUNT,e.mountSelectIndex),ViewManager.ins().close(FbWin)},t.prototype.initAttr=function(){var e=ClimbTowerModel.getInstance,t=GlobalConfig.ins("MountsTowerConfig")[e.mountSelectIndex],i=Math.ceil(t.id/e.m_MountLayerNum);1==i?this.m_LeftImg.visible=!1:this.m_LeftImg.visible=!0;var o=GlobalConfig.ins("MountsTowerConfig")[e.ClimbTowerMountData.maxlevel+1],s=null;o&&(s=Math.ceil(o.id/e.m_MountLayerNum));var n=e.climbMountLayerDic.get(i+1);n&&null!=s?i>s?this.m_RightImg.visible=!1:this.m_RightImg.visible=!0:this.m_RightImg.visible=!1},t.prototype.onClickLeftImg=function(){var e=ClimbTowerModel.getInstance,t=GlobalConfig.ins("MountsTowerConfig")[e.mountSelectIndex],i=Math.ceil(t.id/e.m_MountLayerNum),o=e.climbMountLayerDic.get(i-1);e.mountSelectIndex=o.values[0].id,GameGlobal.MessageCenter.dispatch(ClimbTowerEvent.CLIMBMOUNT_DATAUPDATE_MSG)},t.prototype.onClickRightImg=function(){var e=ClimbTowerModel.getInstance,t=GlobalConfig.ins("MountsTowerConfig")[e.mountSelectIndex],i=Math.ceil(t.id/e.m_MountLayerNum),o=e.climbMountLayerDic.get(i+1);e.mountSelectIndex=o.values[0].id,GameGlobal.MessageCenter.dispatch(ClimbTowerEvent.CLIMBMOUNT_DATAUPDATE_MSG)},t.prototype.onClickRank=function(){ViewManager.ins().open(ClimbRankWin,ClimbType.MOUNT)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(MountClimbTowerPanel.prototype,"MountClimbTowerPanel",["ICommonWindowTitle"]),window.MountClimbTowerPanel=MountClimbTowerPanel;var PetClimbAnim=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.setData=function(e){if(e){this.configData=e;var t=ClimbTowerModel.getInstance,i=GlobalConfig.ins("MonstersConfig")[e.monsterId];i&&(this.playEff(i.avatar+"_3"+EntityAction.STAND),this.m_ElementImg.source=ResDataPath.GetElementImgName(i.elementType)),e.id==t.petSelectIndex?this.m_ArrImg.visible=!0:this.m_ArrImg.visible=!1,this.m_level.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100390,[e.id]);var o=t.getIsBattle(t.ClimbTowerPetData.pass,e.id);o?this.m_DeadImg.visible=!1:this.m_DeadImg.visible=!0}else this.release()},t.prototype.initEffData=function(){this.m_Eff||(this.m_Eff=new MovieClip,this.m_Eff.touchEnabled=!1,this.m_AnimGroup.addChild(this.m_Eff),this.m_Eff.x=this.m_AnimGroup.width/2,this.m_Eff.y=this.m_AnimGroup.height/2,this.m_Eff.scaleX=this.m_Eff.scaleY=.5)},t.prototype.playEff=function(e){this.initEffData(),this.m_Eff.loadUrl(ResDataPath.GetMonsterBodyPath(e),!0,-1)},t.prototype.release=function(){DisplayUtils.dispose(this.m_Eff),this.m_Eff=null,this.m_ArrImg.visible=!1,this.m_DeadImg.visible=!1,this.m_ElementImg.source="",this.m_level.text=""},t.prototype.onClick=function(){this.configData&&(ClimbTowerModel.getInstance.petSelectIndex=this.configData.id,GameGlobal.MessageCenter.dispatch(ClimbTowerEvent.CLIMBPET_DATAUPDATE_MSG))},t}(eui.Component);__reflect(PetClimbAnim.prototype,"PetClimbAnim"),window.PetClimbAnim=PetClimbAnim;var PetClimbTowerPanel=function(e){function t(t){var i=e.call(this)||this;return i.name=GlobalConfig.jifengTiaoyueLg.st100364,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100389,i.skinName="PetClimbTowerSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),UIHelper.SetLinkStyleLabel(this.m_LockRankLab,GlobalConfig.jifengTiaoyueLg.st100381),this.m_ItemList.itemRenderer=ItemBase,this.m_ListData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.m_ListData,this.m_FirstItemList.itemRenderer=ItemBase,this.m_FirstListData=new eui.ArrayCollection,this.m_FirstItemList.dataProvider=this.m_FirstListData,this.m_AllBattleBtn.label=GlobalConfig.jifengTiaoyueLg.st100398,this.m_BattleBtn.label=GlobalConfig.jifengTiaoyueLg.st100046,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100377,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100399},t.prototype.addViewEvent=function(){this.observe(ClimbTowerEvent.CLIMBPET_DATAUPDATE_MSG,this.initData),this.AddClick(this.m_AllBattleBtn,this.onClickAllBattle),this.AddClick(this.m_BattleBtn,this.onClickBattle),this.AddClick(this.m_LeftImg,this.onClickLeftImg),this.AddClick(this.m_RightImg,this.onClickRightImg),this.AddClick(this.m_LockRankLab,this.onClickRank)},t.prototype.removeEvent=function(){},t.prototype.open=function(){ClimbTowerSproto.ins().sendGetTowerInit(ClimbType.PET),this.addViewEvent(),this.initData()},t.prototype.close=function(){this.removeEvent()},t.prototype.release=function(){for(var e=0;e<this.m_AnimGroup.numChildren;e++){var t=this.m_AnimGroup.getChildAt(e);t&&t instanceof PetClimbAnim&&t.release()}this.removeEvent(),this.m_ClimbProBox.release()},t.prototype.initData=function(){var e=ClimbTowerModel.getInstance,t=e.ClimbTowerPetData,i=GlobalConfig.ins("PetTowerConfig")[e.petSelectIndex];if(this.m_BattleBtn.enabled=!0,t&&i){this.m_TitleLayerLab.text=i.layersTips+" "+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100386,[i.layersId]),this.m_TitleLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100390,[i.id]);for(var o=e.climbPetLayerDic.get(i.layersId),s=0;6>s;s++)if(o.values[s]){var n=this.m_AnimGroup.getChildAt(s);n&&n instanceof PetClimbAnim&&n.setData(o.values[s])}else{var n=this.m_AnimGroup.getChildAt(s);n&&n instanceof PetClimbAnim&&n.setData(null)}this.m_ListData.removeAll(),this.m_ListData.replaceAll(i.sweepAward),this.m_ListData.refresh(),this.m_FirstListData.removeAll(),this.m_FirstListData.replaceAll(i.firstAward),this.m_FirstListData.refresh(),i.id<=t.maxlevel?this.m_CompImg.visible=!0:this.m_CompImg.visible=!1;var r=GlobalConfig.ins("PetTowerAwardConfig");r&&this.m_ClimbProBox.setData(ClimbType.PET);var a=GlobalConfig.ins("PetTowerBaseConfig");if(this.m_VIPLab.text="VIP"+a.openSweepLimit+GlobalConfig.jifengTiaoyueLg.st100391,UserVip.ins().lv>=a.openSweepLimit&&(this.m_VIPLab.text=GlobalConfig.jifengTiaoyueLg.st100392+(1-t.sweep)+"/1"),i.id<=t.maxlevel+1){var l=e.getIsBattle(t.pass,i.id);1==l?this.m_BattleBtn.enabled=!0:this.m_BattleBtn.enabled=!1}else this.m_BattleBtn.enabled=!1;if(this.m_TopBattleLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100393,[t.maxlevel]),this.initAttr(),i.zsLv>0){if(this.m_NeedLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100394,[i.zsLv])+i.lv+GlobalConfig.jifengTiaoyueLg.st100093,i.zsLv>GameLogic.ins().actorModel.zsLv)this.m_BattleBtn.enabled=!1;else if(i.lv>GameLogic.ins().actorModel.level)return void(this.m_BattleBtn.enabled=!1)}else if(this.m_NeedLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100395,[i.lv]),i.lv>GameLogic.ins().actorModel.level)return void(this.m_BattleBtn.enabled=!1)}},t.prototype.onClickAllBattle=function(){var e=GlobalConfig.ins("PetTowerBaseConfig"),t=ClimbTowerModel.getInstance,i=t.ClimbTowerPetData;UserVip.ins().lv>=e.openSweepLimit?1-i.sweep>0?ClimbTowerSproto.ins().sendGetSweep(ClimbType.PET):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100396):UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100397,[e.openSweepLimit]))},t.prototype.onClickBattle=function(){var e=ClimbTowerModel.getInstance;ClimbTowerSproto.ins().sendTowerEnter(ClimbType.PET,e.petSelectIndex),ViewManager.ins().close(FbWin)},t.prototype.initAttr=function(){var e=ClimbTowerModel.getInstance,t=GlobalConfig.ins("PetTowerConfig")[e.petSelectIndex];1==t.layersId?this.m_LeftImg.visible=!1:this.m_LeftImg.visible=!0;var i=e.climbPetLayerDic.get(t.layersId+1),o=GlobalConfig.ins("PetTowerConfig")[e.ClimbTowerPetData.maxlevel+1];i&&o?t.layersId>o.layersId?this.m_RightImg.visible=!1:this.m_RightImg.visible=!0:this.m_RightImg.visible=!1},t.prototype.onClickLeftImg=function(){var e=ClimbTowerModel.getInstance,t=GlobalConfig.ins("PetTowerConfig")[e.petSelectIndex],i=e.climbPetLayerDic.get(t.layersId-1);e.petSelectIndex=i.values[0].id,GameGlobal.MessageCenter.dispatch(ClimbTowerEvent.CLIMBPET_DATAUPDATE_MSG)},t.prototype.onClickRightImg=function(){var e=ClimbTowerModel.getInstance,t=GlobalConfig.ins("PetTowerConfig")[e.petSelectIndex],i=e.climbPetLayerDic.get(t.layersId+1);e.petSelectIndex=i.values[0].id,GameGlobal.MessageCenter.dispatch(ClimbTowerEvent.CLIMBPET_DATAUPDATE_MSG)},t.prototype.onClickRank=function(){ViewManager.ins().open(ClimbRankWin,ClimbType.PET)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(PetClimbTowerPanel.prototype,"PetClimbTowerPanel",["ICommonWindowTitle"]),window.PetClimbTowerPanel=PetClimbTowerPanel;var ClimbTowerEvent=function(){function e(){}return e.CLIMBPET_DATAUPDATE_MSG="CLIMBPET_DATAUPDATE_MSG",e.CLIMBMOUNT_DATAUPDATE_MSG="CLIMBMOUNT_DATAUPDATE_MSG",e}();__reflect(ClimbTowerEvent.prototype,"ClimbTowerEvent"),window.ClimbTowerEvent=ClimbTowerEvent;var ClimbTowerModel=function(){function e(){this.mountSelectIndex=1,this.petSelectIndex=1,this.petBattleId=1,this.mountBattleId=1,this.reward=[],this.m_MountLayerNum=3,this.m_climbPetLayerDic=new Dictionary,this.m_climbMountLayerDic=new Dictionary}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.setData=function(e){switch(e.type){case ClimbType.PET:this.ClimbTowerPetData=e,this.changePetSelectIndex();break;case ClimbType.MOUNT:this.ClimbTowerMountData=e,this.changeMountSelectIndex()}},e.prototype.changePetSelectIndex=function(){var e=this.ClimbTowerPetData,t=this.getMinIndex(e.pass);this.petSelectIndex=t,-1==t&&(29==e.maxlevel?this.petSelectIndex=e.maxlevel+1:this.petSelectIndex=e.maxlevel);var i=GlobalConfig.ins("PetTowerBaseConfig").maxFloor;i?this.petSelectIndex>i&&(this.petSelectIndex=i):this.petSelectIndex>1e3&&(this.petSelectIndex=1e3)},e.prototype.changeMountSelectIndex=function(){var e=this.ClimbTowerMountData,t=this.getMinIndex(e.pass);this.mountSelectIndex=t,-1==t&&(29==e.maxlevel?this.mountSelectIndex=e.maxlevel+1:this.mountSelectIndex=e.maxlevel);var i=GlobalConfig.ins("MountsTowerBaseConfig").maxFloor;i?this.mountSelectIndex>i&&(this.mountSelectIndex=i):this.mountSelectIndex>1e3&&(this.mountSelectIndex=1e3)},Object.defineProperty(e.prototype,"climbPetLayerDic",{get:function(){if(this.m_climbPetLayerDic.values.length<=0){var e=GlobalConfig.ins("PetTowerConfig");for(var t in e){var i=e[t];if(i){var o=this.m_climbPetLayerDic.get(i.layersId);o?o.set(i.id,i):(o=new Dictionary,o.set(i.id,i),this.m_climbPetLayerDic.set(i.layersId,o))}}}return this.m_climbPetLayerDic},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"climbMountLayerDic",{get:function(){if(this.m_climbMountLayerDic.values.length<=0){var e=GlobalConfig.ins("MountsTowerConfig");for(var t in e){var i=e[t];if(i){var o=Math.ceil(i.id/this.m_MountLayerNum),s=this.m_climbMountLayerDic.get(o);s?s.set(i.id,i):(s=new Dictionary,s.set(i.id,i),this.m_climbMountLayerDic.set(o,s))}}}return this.m_climbMountLayerDic},enumerable:!0,configurable:!0}),e.prototype.getMinIndex=function(e){for(var t=0;t<e.length;t++){var i=0;0==t&&(i=1);for(var o=30*t+i;30*t+30>o;o++)if(0==(e[t]&1<<o-30*t))return o}return-1},e.prototype.getIsBattle=function(e,t){var i=Math.floor(t/30),o=e[i]&1<<t-30*i;return o>0?!1:!0},e}();__reflect(ClimbTowerModel.prototype,"ClimbTowerModel");var ClimbType;!function(e){e[e.PET=1001]="PET",e[e.MOUNT=1002]="MOUNT"}(ClimbType||(ClimbType={})),window.ClimbTowerModel=ClimbTowerModel;var ClimbTowerSproto=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_tower_init_res,t.getTowerInit),t.regNetMsg(S2cProtocol.sc_tower_award_res,t.getTowerAward),t.regNetMsg(S2cProtocol.sc_tower_sweep_res,t.getTowerSweep),t.regNetMsg(S2cProtocol.sc_tower_sync,t.getTowerLayer),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getTowerInit=function(e){var t=ClimbTowerModel.getInstance;switch(t.setData(e),e.type){case ClimbType.PET:GameGlobal.MessageCenter.dispatch(ClimbTowerEvent.CLIMBPET_DATAUPDATE_MSG);break;case ClimbType.MOUNT:GameGlobal.MessageCenter.dispatch(ClimbTowerEvent.CLIMBMOUNT_DATAUPDATE_MSG)}},t.prototype.getTowerAward=function(e){var t=ClimbTowerModel.getInstance;switch(e.type){case ClimbType.PET:t.ClimbTowerPetData.rewards[e.id-1]=e.status,GameGlobal.MessageCenter.dispatch(ClimbTowerEvent.CLIMBPET_DATAUPDATE_MSG);break;case ClimbType.MOUNT:t.ClimbTowerMountData.rewards[e.id-1]=e.status,GameGlobal.MessageCenter.dispatch(ClimbTowerEvent.CLIMBMOUNT_DATAUPDATE_MSG)}},t.prototype.getTowerSweep=function(e){var t=ClimbTowerModel.getInstance;switch(e.type){case ClimbType.PET:t.ClimbTowerPetData.sweep=e.sweep,GameGlobal.MessageCenter.dispatch(ClimbTowerEvent.CLIMBPET_DATAUPDATE_MSG);break;case ClimbType.MOUNT:t.ClimbTowerMountData.sweep=e.sweep,GameGlobal.MessageCenter.dispatch(ClimbTowerEvent.CLIMBMOUNT_DATAUPDATE_MSG)}t.reward=e.reward,ViewManager.ins().open(ClimbResultWin,null,1)},t.prototype.getTowerLayer=function(e){var t=ClimbTowerModel.getInstance;switch(e.type){case ClimbType.PET:t.ClimbTowerPetData&&(t.ClimbTowerPetData.pass=e.pass),t.changePetSelectIndex(),GameGlobal.MessageCenter.dispatch(ClimbTowerEvent.CLIMBPET_DATAUPDATE_MSG);break;case ClimbType.MOUNT:t.ClimbTowerMountData&&(t.ClimbTowerMountData.pass=e.pass),t.changeMountSelectIndex(),GameGlobal.MessageCenter.dispatch(ClimbTowerEvent.CLIMBMOUNT_DATAUPDATE_MSG)}},t.prototype.sendGetTowerInit=function(e){var t=new Sproto.cs_tower_init_req_request;t.type=e,this.Rpc(C2sProtocol.cs_tower_init_req,t)},t.prototype.sendGetTowerAward=function(e,t){var i=new Sproto.cs_tower_award_req_request;i.type=e,i.id=t,this.Rpc(C2sProtocol.cs_tower_award_req,i)},t.prototype.sendTowerEnter=function(e,t){var i=new Sproto.cs_tower_enter_req_request;i.type=e,i.floor=t,e==ClimbType.PET?ClimbTowerModel.getInstance.petBattleId=t:e==ClimbType.MOUNT&&(ClimbTowerModel.getInstance.mountBattleId=t),this.Rpc(C2sProtocol.cs_tower_enter_req,i)},t.prototype.sendGetSweep=function(e){var t=new Sproto.cs_tower_sweep_req_request;t.type=e,this.Rpc(C2sProtocol.cs_tower_sweep_req,t)},t.prototype.sendGetLayer=function(e,t){var i=new Sproto.cs_tower_floor_req_request;i.type=e,i.floor=t,this.Rpc(C2sProtocol.cs_tower_floor_req,i)},t}(BaseSystem);__reflect(ClimbTowerSproto.prototype,"ClimbTowerSproto"),window.ClimbTowerSproto=ClimbTowerSproto;var CommonPopBg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initUI=function(){this.skinName="CommonPopBgSkin",this.closeButtomBtn.label="关闭"},t.prototype.init=function(e,t,i,o,s){void 0===i&&(i=!0),void 0===o&&(o=null),void 0===s&&(s=!0),this.initUI(),this._cls=e,this._callBack=o,this.txtTitle.text=t,this.closeTopBtn.visible=s,this.closeButtomBtn.visible=i,this.closeTopBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._closeView,this),this.closeButtomBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._closeView,this)},t.prototype.open=function(){},t.prototype._closeView=function(){ViewManager.ins().close(this._cls),this._callBack&&this._callBack(),this.close()},t.prototype.close=function(){this.closeTopBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._closeView,this),this.closeButtomBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._closeView,this),this._callBack&&(this._callBack=null),this._cls=null},t}(eui.Component);__reflect(CommonPopBg.prototype,"CommonPopBg"),window.CommonPopBg=CommonPopBg;var CouponItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="CouponItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),isNaN(this.data)){if(this.data instanceof ItemData){if(this.itemConfig=this.data.itemConfig,!this.itemConfig)return;this.setDataByConfig(this.itemConfig)}else if(0==this.data.type)this.imgIcon.source=MoneyManger.MoneyConstToSource(this.data.id),this.m_Name.text=MoneyManger.MoneyConstToName(this.data.id);else if(1==this.data.type){if(this.itemConfig=GlobalConfig.itemConfig[this.data.id],!this.itemConfig)return;this.setDataByConfig(this.itemConfig)}}else this.itemConfig=GlobalConfig.itemConfig[this.data],this.itemConfig?this.setDataByConfig(this.itemConfig):(this.imgIcon.source=MoneyManger.MoneyConstToSource(this.data),this.m_Name.text=MoneyManger.MoneyConstToName(this.data))},t.prototype.setDataByConfig=function(e){this.imgIcon.source=e.icon+"_png",this.m_Name.text=e.name},t.prototype.onClick=function(){this.showDetail()},t.prototype.showDetail=function(){if(void 0!=this.itemConfig&&this.itemConfig&&void 0!=this.itemConfig.type)if(null==this.jingyanyuCommonConfig&&(this.jingyanyuCommonConfig=GlobalConfig.ins("JingyanyuCommonConfig")),this.itemConfig.id==this.jingyanyuCommonConfig.fullItemID)ViewManager.ins().open(ExpjadePanel);else if(this.itemConfig.type==ItemType.EQUIP||this.itemConfig.type==ItemType.ZHUANZHI||this.itemConfig.type==ItemType.WING||this.itemConfig.type==ItemType.FUWEN||this.itemConfig.type==ItemType.RINGSOUL||this.itemConfig.type==ItemType.MOUNTEQUIP)this.openEquipsTips();else if(this.itemConfig.type==ItemType.GAD){var e=this.data,t=GadModel.getInstance.gadBagDic.get(e.handle);if(null==t)for(var i=0,o=GadModel.getInstance.gadBagDic.values;i<o.length;i++){var s=o[i];if(s.configID==e.id){t=s;break}}null==t?ViewManager.ins().open(ItemDetailedWin,0,this.itemConfig.id):ViewManager.ins().open(GadStateWin,t)}else ViewManager.ins().open(ItemDetailedWin,0,this.itemConfig.id);else isNaN(this.data)?this.data&&this.data.id&&ViewManager.ins().open(ItemDetailedWin,0,null,null,this.data.id):this.data<100&&ViewManager.ins().open(ItemDetailedWin,0,null,null,this.data)},t.prototype.openEquipsTips=function(){ViewManager.ins().open(EquipDetailedWin,1,this.data.handle,this.itemConfig.id,this.data)},t.prototype.showEff=function(e){e?this.eff=ViewManager.ins().createEff(this.eff,this.m_EffGroup,"quaeff7",-1,ResAnimType.TYPE1):(DisplayUtils.dispose(this.eff),this.eff=null)},t}(eui.ItemRenderer);__reflect(CouponItem.prototype,"CouponItem"),window.CouponItem=CouponItem;var CouponPanel=function(e){function t(t){var i=e.call(this)||this;return i.name=GlobalConfig.jifengTiaoyueLg.st102102,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st102102,i.skinName="CouponPanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.listData=new eui.ArrayCollection,this.m_List.itemRenderer=CouponPanelItem,this.m_List.dataProvider=this.listData},t.prototype.addViewEvent=function(){this.AddClick(this.m_MainBtn,this.onClick),this.observe(GameLogic.ins().postCouponChange,this.initData)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.addViewEvent(),this.initData()},t.prototype.close=function(){this.removeEvent()},t.prototype.release=function(){this.removeEvent()},t.prototype.initData=function(){var e=GlobalConfig.ins("ticketBaseConfig"),t=[];for(var i in e)t.push(i);this.listData.replaceAll(t),this.m_Cont.text=GlobalConfig.jifengTiaoyueLg.st102108+GameLogic.ins().actorModel.maxCoupon},t.prototype.UpdateContent=function(){},t.prototype.onClick=function(){ViewManager.ins().open(ChargeFirstWin)},t}(BaseView);__reflect(CouponPanel.prototype,"CouponPanel",["ICommonWindowTitle"]),window.CouponPanel=CouponPanel;var CouponPanelItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="CouponPanelItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data,i=GlobalConfig.ins("ticketBaseConfig")[t];this.m_Cont.text=i.tips,this.m_Cont0.text=i.count},t}(eui.ItemRenderer);__reflect(CouponPanelItem.prototype,"CouponPanelItem"),window.CouponPanelItem=CouponPanelItem;var CouponShopItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="LimitGiftActItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.buy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101336,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101337,this.title.visible=!1},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.redPoint.visible=!1;var i=GlobalConfig.ins("ticketShopConfig")[t],o=GameLogic.ins().actorModel.coupon;if(i){this.itemName.text=i.title,this.item.data=i.rewards[0],this.item.isShowName(!1),i.discount?(this.m_DisGroup.visible=!0,this.imgDiscount.text=.1*i.discount+GlobalConfig.jifengTiaoyueLg.st102090):this.m_DisGroup.visible=!1,this.price.price=i.price,this.y_price.price=Math.floor(i.price/(.01*i.discount)),this.y_price.iconImg.source=this.price.iconImg.source=MoneyManger.MoneyConstToSource(i.currencyType);var s=i.count-CouponModel.getInstance.shopDic.get(parseInt(t));UserVip.ins().lv>=i.vip?(this.buy.label=GlobalConfig.jifengTiaoyueLg.st101282,o>=i.price&&s>0&&(this.redPoint.visible=!0)):this.buy.label="VIP"+i.vip+GlobalConfig.jifengTiaoyueLg.st102105,this.desc.text=GlobalConfig.jifengTiaoyueLg.st101335+s}},t.prototype.onClick=function(){var e=this.data,t=GlobalConfig.ins("ticketShopConfig")[e],i=GameLogic.ins().actorModel.coupon;if(t){var o=t.count-CouponModel.getInstance.shopDic.get(parseInt(e));if(UserVip.ins().lv>=t.vip){if(i<t.price)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st102103);if(0>=o)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st102106);CouponSproto.ins().sendShopBuy(parseInt(e))}else UserTips.ins().showTips("VIP"+t.vip+GlobalConfig.jifengTiaoyueLg.st102105)}},t}(eui.ItemRenderer);__reflect(CouponShopItem.prototype,"CouponShopItem"),window.CouponShopItem=CouponShopItem;var CouponShopPanel=function(e){function t(t){var i=e.call(this)||this;return i.name=GlobalConfig.jifengTiaoyueLg.st102107,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st102107,i.skinName="CouponShopPanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.data=new eui.ArrayCollection,this.m_List.itemRenderer=CouponShopItem,this.m_List.dataProvider=this.data},t.prototype.addViewEvent=function(){this.observe(CouponEvt.COUPON_SHOP_MSG,this.initData)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.addViewEvent(),this.initData()},t.prototype.close=function(){this.removeEvent()},t.prototype.release=function(){this.removeEvent()},t.prototype.initData=function(){var e=[],t=GlobalConfig.ins("ticketShopConfig");for(var i in t)e.push(i);this.data.replaceAll(e)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(CouponShopPanel.prototype,"CouponShopPanel",["ICommonWindowTitle"]),window.CouponShopPanel=CouponShopPanel;var CouponShowWin=function(e){function t(){var t=e.call(this)||this;return t.listData1=new eui.ArrayCollection,t.listData2=new eui.ArrayCollection,t.skinName="CouponShowWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_bg.init("CouponShowWin",GlobalConfig.jifengTiaoyueLg.st100431),this.m_List1.dataProvider=this.listData1,this.m_List2.dataProvider=this.listData2,this.m_Lan0.text=GlobalConfig.jifengTiaoyueLg.st102109,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st102110},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=GlobalConfig.ins("ticketTreasureHuntConfig");e.rareReward&&(this.listData1.removeAll(),this.listData1.replaceAll(e.rareReward)),e.otherAward&&(this.listData2.removeAll(),this.listData2.replaceAll(e.otherAward))},t}(BaseEuiPanel);__reflect(CouponShowWin.prototype,"CouponShowWin"),ViewManager.ins().reg(CouponShowWin,LayerManager.UI_Popup),window.CouponShowWin=CouponShowWin;var CouponTrePanel=function(e){function t(t){var i=e.call(this)||this;return i.mWindowHelpId=38,i.isCanGetAward=!1,i.name=GlobalConfig.jifengTiaoyueLg.st102102+GlobalConfig.jifengTiaoyueLg.st100032,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st102102+GlobalConfig.jifengTiaoyueLg.st100032,i.skinName="CouponTrePanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.setNeedItem(),this.m_MsList.itemRenderer=PetTreasureRenderer,this.msListData=new eui.ArrayCollection,this.m_MsList.dataProvider=this.msListData,this.m_ShowAllLab.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st102104,style:{underline:!0}}],this.m_LuckImg.mask=this.m_Mask,this.m_BuyBtn1.label=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102111,[1]),this.m_BuyBtn10.label=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102111,[10])},t.prototype.addViewEvent=function(){this.AddClick(this.m_BuyBtn1,this.onClickBuy),this.AddClick(this.m_BuyBtn10,this.onClickBuy),this.AddClick(this.warehouse,this.onWarehouse),this.AddClick(this.m_ShowAllLab,this.onClickShowAll),this.AddClick(this.m_LuckBtn,this.onClickLuckBtn),this.observe(CouponEvt.COUPON_TREASURE_ROLE_MSG,this.setRoleList),this.observe(CouponEvt.COUPON_TREASURE_UPDATE,this.initData)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.addViewEvent(),this.initData(),this.setEff(!0)},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeEvent(),this.setEff(!1)},t.prototype.initData=function(){this.setRoleList(),this.setShowItem()},t.prototype.UpdateContent=function(){},t.prototype.setEff=function(e){for(var t=0;t<this.m_LuckGroup.numChildren;t++){var i=this.m_LuckGroup.getChildAt(t);i&&i instanceof ItemBase&&(e?i.showEffect(6):i.clearEffect())}for(var t=0;t<this.m_ItemGroup.numChildren;t++){var o=this.m_ItemGroup.getChildAt(t);o&&o instanceof CouponItem&&o.showEff(e)}},t.prototype.setShowItem=function(){var e=CouponModel.getInstance,t=GlobalConfig.ins("ticketTreasureHuntPoolConfig"),i=0;for(var o in t){var s=t[o],n=this.m_ItemGroup.getChildAt(i);n&&n instanceof CouponItem&&(n.data=s.itemId,n.dataChanged()),i++}for(var r=e.getLuckShowItem(),a=0;a<r.length;a++){var l=this.m_LuckGroup.getChildAt(a);l&&l instanceof ItemBase&&(l.data=r[a],l.dataChanged())}var h=GlobalConfig.ins("ticketPoolTotalrewardsConfig")[e.luckIndex+1];h||(h=GlobalConfig.ins("ticketPoolTotalrewardsConfig")[e.luckMaxNum]),this.m_LuckCount.text=e.lucknum+"/"+h.time;var c=e.lucknum/h.time;this.isCanGetAward=!1,this.redPoint.visible=!1,c>=1&&(c=1,e.luckIndex!=e.luckMaxNum&&(this.isCanGetAward=!0,this.redPoint.visible=!0)),this.m_Mask.height=this.m_LuckImg.height*c;for(var u=e.luckIndex%5,a=1;a<=this.m_LuckImgGroup.numChildren;a++){var d=this.m_LuckImgGroup.getChildAt(a-1);e.luckIndex==e.luckMaxNum?d.visible=!0:u>=a?d.visible=!0:d.visible=!1;var p=this.m_ProGroup.getChildAt(a-1);e.luckIndex==e.luckMaxNum?p.visible=!0:u>=a?p.visible=!0:1==c&&u+1>=a?p.visible=!0:p.visible=!1}this.warehouse.redPoint.visible=e.checkBagRedPoint()},t.prototype.setNeedItem=function(){var e=GlobalConfig.ins("ticketTreasureHuntConfig");e&&(this.m_PriceLab1.text=e.huntOnce,this.m_PriceLab10.text=e.huntTenth,this.m_PriceLab0.text=10*parseInt(e.huntOnce)+"",this.m_ZheKou.text=e.discount,this.m_PriceImg1.source=MoneyManger.MoneyConstToSource(MoneyConst.COUPON),this.m_PriceImg10.source=MoneyManger.MoneyConstToSource(MoneyConst.COUPON))},t.prototype.setRoleList=function(){var e=CouponModel.getInstance;this.msListData.replaceAll(e.treasureRoleList)},t.prototype.onClickBuy=function(e){var t=GameLogic.ins().actorModel.coupon,i=GlobalConfig.ins("ticketTreasureHuntConfig");if(i)switch(e.currentTarget){case this.m_BuyBtn1:if(t>=i.huntOnce)return void CouponSproto.ins().sendTreasure(1);UserWarn.ins().setBuyGoodsWarn(MoneyConst.COUPON),UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st102103);break;case this.m_BuyBtn10:if(t>=i.huntTenth)return void CouponSproto.ins().sendTreasure(2);UserWarn.ins().setBuyGoodsWarn(MoneyConst.COUPON),UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st102103)}},t.prototype.onWarehouse=function(e){ViewManager.ins().open(TreasureStorePanel,UserBag.BAG_TYPE_VIPTREASUREHUNT)},t.prototype.onClickShowAll=function(){ViewManager.ins().open(CouponShowWin)},t.prototype.onClickLuckBtn=function(){var e=CouponModel.getInstance;this.isCanGetAward&&e.luckIndex!=e.luckMaxNum&&CouponSproto.ins().sendGetAward(e.luckIndex+1)},t}(BaseView);__reflect(CouponTrePanel.prototype,"CouponTrePanel",["ICommonWindowTitle"]),window.CouponTrePanel=CouponTrePanel;var CouponWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.couponPanel=new CouponPanel,this.couponTrePanel=new CouponTrePanel,this.couponShopPanel=new CouponShopPanel,this.commonWindowBg.AddChildStack(this.couponPanel),this.commonWindowBg.AddChildStack(this.couponTrePanel),this.commonWindowBg.AddChildStack(this.couponShopPanel)},t.prototype.destoryView=function(){e.prototype.destoryView.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];CouponSproto.ins().sendTreasureRoleList(),CouponSproto.ins().sendShopInfo(),this.commonWindowBg.OnAdded(this,e?e[0]:0),this.setRedPoint(),this.observe(CouponEvt.COUPON_TREASURE_UPDATE,this.setRedPoint)},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.setRedPoint=function(){this.commonWindowBg.CheckTabRedPoint(),this.commonWindowBg.ShowTalRedPoint(1,CouponModel.getInstance.checkAllRedPoint())},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t.openIndex=0,t}(BaseEuiPanel);__reflect(CouponWin.prototype,"CouponWin",["ICommonWindow"]),window.CouponWin=CouponWin;var CouponEvt=function(){function e(){}return e.COUPON_TREASURE_UPDATE="COUPON_TREASURE_UPDATE",e.COUPON_TREASURE_ROLE_MSG="COUPON_TREASURE_ROLE_MSG",e.COUPON_SHOP_MSG="COUPON_SHOP_MSG",e}();__reflect(CouponEvt.prototype,"CouponEvt"),window.CouponEvt=CouponEvt;var CouponModel=function(){function e(){this.treasureRoleList=[],this.lucknum=400,this.luckIndex=10,this._luckMaxNum=0,this.treasureResult=[],this.shopDic=new Dictionary}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.setTreasureRoleList=function(e){if(e){for(var t=[],i=0;i<e.length;i++){var o=[];o.push(e[i].name),o.push(e[i].itemid),t.push(o)}var s=this.treasureRoleList;this.treasureRoleList=t.concat(s)}},e.prototype.getLuckShowItem=function(){var e=GlobalConfig.ins("ticketPoolTotalrewardsConfig"),t=this.luckIndex;this.luckIndex==this.luckMaxNum&&(t-=1);for(var i=Math.floor(t/5),o=[],s=1;5>=s;s++){var n=5*i+s,r=e[n],a=r.box[0],l={type:a.type,id:a.id,count:a.count};o.push(l)}return o},Object.defineProperty(e.prototype,"luckMaxNum",{get:function(){if(!this._luckMaxNum){var e=GlobalConfig.ins("ticketPoolTotalrewardsConfig");for(var t in e)this._luckMaxNum++}return this._luckMaxNum},enumerable:!0,configurable:!0}),e.prototype.setTreasureResultData=function(e){for(var t=[],i=0;i<e.length;i++){var o=1;o=e[i].id<100?0:1;var s={type:o,id:e[i].id,count:e[i].count};t.push(s)}this.treasureResult=t},e.prototype.checkAllRedPoint=function(){return this.checkBagRedPoint()||this.chenkLuckRedPoint()},e.prototype.checkBagRedPoint=function(){return UserBag.ins().getHuntGoodsBySort(UserBag.BAG_TYPE_VIPTREASUREHUNT).length>0?!0:!1},e.prototype.chenkLuckRedPoint=function(){var e=GlobalConfig.ins("ticketPoolTotalrewardsConfig")[this.luckIndex+1];if(!e)return!1;var t=this.lucknum/e.time;
return t>=1?!0:!1},e}();__reflect(CouponModel.prototype,"CouponModel"),window.CouponModel=CouponModel;var CouponSproto=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_ticket_treasure_base_info,t.getCouponInfo),t.regNetMsg(S2cProtocol.sc_ticket_treasure_hunt_result,t.getSearchResult),t.regNetMsg(S2cProtocol.sc_ticket_treasure_record_datas,t.getSearch),t.regNetMsg(S2cProtocol.sc_ticket_treasure_add_record,t.getAddSearch),t.regNetMsg(S2cProtocol.sc_vipshop_datas_info,t.getShopInfo),t.regNetMsg(S2cProtocol.sc_vipshop_item_info,t.getShopItem),t.regNetMsg(S2cProtocol.sc_bag_get_ticket_equip,t.getBagChange),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getCouponInfo=function(e){var t=CouponModel.getInstance;t.lucknum=e.luckyValue,t.luckIndex=e.awardValue,GameGlobal.MessageCenter.dispatch(CouponEvt.COUPON_TREASURE_UPDATE)},t.prototype.getSearchResult=function(e){var t=e.items;CouponModel.getInstance.setTreasureResultData(t),ViewManager.ins().open(PetTreasureResultWin,1),GameGlobal.MessageCenter.dispatch(CouponEvt.COUPON_TREASURE_UPDATE)},t.prototype.getSearch=function(e){var t=e.treasureRecord;CouponModel.getInstance.setTreasureRoleList(t),GameGlobal.MessageCenter.dispatch(CouponEvt.COUPON_TREASURE_ROLE_MSG)},t.prototype.getAddSearch=function(e){var t=e.treasureRecord;CouponModel.getInstance.setTreasureRoleList([t]),GameGlobal.MessageCenter.dispatch(CouponEvt.COUPON_TREASURE_ROLE_MSG)},t.prototype.getShopInfo=function(e){for(var t=CouponModel.getInstance,i=e.datas,o=0;o<i.length;o++)t.shopDic.set(i[o].id,i[o].buyCnt);GameGlobal.MessageCenter.dispatch(CouponEvt.COUPON_SHOP_MSG)},t.prototype.getShopItem=function(e){var t=CouponModel.getInstance;t.shopDic.set(e.id,e.buyCnt),GameGlobal.MessageCenter.dispatch(CouponEvt.COUPON_SHOP_MSG)},t.prototype.getBagChange=function(e){var t=UserBag.ins().bagModel;e.handle.forEach(function(e){for(var i,o=t[UserBag.BAG_TYPE_VIPTREASUREHUNT].length-1;o>=0;o--)if(t[UserBag.BAG_TYPE_VIPTREASUREHUNT][o].handle==e){i=t[UserBag.BAG_TYPE_VIPTREASUREHUNT][o],t[UserBag.BAG_TYPE_VIPTREASUREHUNT].splice(o,1);break}i.itemConfig.type==ItemType.FUWEN&&(i.mIsNewItem=!0),t[UserBag.BAG_TYPE_EQUIP].push(i)}),UserBag.postHuntStore()},t.prototype.sendTreasure=function(e){var t=new Sproto.cs_ticket_treasure_hunt_request;t.type=e,this.Rpc(C2sProtocol.cs_ticket_treasure_hunt,t)},t.prototype.sendTreasureRoleList=function(){var e=new Sproto.cs_ticket_treasure_record_request;this.Rpc(C2sProtocol.cs_ticket_treasure_record,e)},t.prototype.sendShopBuy=function(e){var t=new Sproto.cs_buy_vipshop_item_request;t.id=e,this.Rpc(C2sProtocol.cs_buy_vipshop_item,t)},t.prototype.sendShopInfo=function(){var e=new Sproto.cs_vipshop_info_request;this.Rpc(C2sProtocol.cs_vipshop_info,e)},t.prototype.sendGetAward=function(e){var t=new Sproto.cs_ticket_treasure_reward_request;t.id=e,this.Rpc(C2sProtocol.cs_ticket_treasure_reward,t)},t}(BaseSystem);__reflect(CouponSproto.prototype,"CouponSproto"),window.CouponSproto=CouponSproto;var DartCarCompleteItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="KDDoneItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=GlobalConfig.ins("BiaoCheTypeConfig")[DartCarModel.ins().DartCarType];e?this.data.win?this.desc.text=this.data.name+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101722,[e.name]):this.desc.text=this.data.name+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101723,[e.name]):this.desc.text=""},t}(eui.ItemRenderer);__reflect(DartCarCompleteItem.prototype,"DartCarCompleteItem"),window.DartCarCompleteItem=DartCarCompleteItem;var DartCarCompleteWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="DartCarCompleteWinSkin",this.list.itemRenderer=DartCarCompleteItem,this.sureBtn.label=GlobalConfig.jifengTiaoyueLg.st100004,this.noDesc.text=GlobalConfig.jifengTiaoyueLg.st101834,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101835},t.prototype.open=function(){this.m_bg.init("DartCarCompleteWin",GlobalConfig.jifengTiaoyueLg.st101724);for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.cfg=GlobalConfig.ins("BiaoCheTypeConfig")[DartCarModel.ins().DartCarType],this.refushInfo(),DartCarModel.ins().exploitStatus=MineExploitType.NONE,DartCarModel.ins().endTime=0},t.prototype.refushInfo=function(){if(this.cfg){this.type.text=this.cfg.name,this.list.dataProvider=new eui.ArrayCollection(DartCarModel.ins().DartRobInfoList);var e=DartCarModel.countRewardList(DartCarModel.ins().DartCarType).concat(this.cfg.item);this.rewardDesc.textFlow=(new egret.HtmlTextParser).parser(t.makeDescStr(e)),this.loseNum.textFlow=(new egret.HtmlTextParser).parser(this.countLostStr()),this.typeImg.source=ResDataPath.GetDartCarNameByType(this.cfg.level),this.noDesc.visible=DartCarModel.ins().DartRobInfoList.length<=0,this.doubleRewardText.visible=DartCarModel.ins().isDoubleReward}},t.makeDescStr=function(e){var t,i=DartCarModel.ins().isDoubleReward?2:1,o="";for(var s in e)t=e[s],o+=0==t.type?MoneyManger.MoneyConstToName(t.id)+"x"+t.count*i+"\n":GlobalConfig.itemConfig[t.id].name+"x"+t.count*i+"\n";return o},t.prototype.countLostStr=function(){var e=DartCarModel.ins().DartRobInfoList,t=0;for(var i in e)e[i].win&&++t;if(0>=t)return"";var o="";return o+="-"+this.cfg.losegold*t+"\n",o+="-"+this.cfg.losefeats*t+"\n"},t.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];DartCarModel.ins().sendGetDartCarReward(),ViewManager.ins().close(t),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.onTap=function(e){switch(e.target){case this.sureBtn:ViewManager.ins().close(t)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(DartCarCompleteWin.prototype,"DartCarCompleteWin"),window.DartCarCompleteWin=DartCarCompleteWin;var DartCarItem=function(e){function t(){var t=e.call(this)||this;return t.endSecond=0,t.carBody=new MovieClip,t.carBody.x=-20,t.carBody.y=30,t.carBody.scaleX=t.carBody.scaleY=.8,t.carBody.touchEnabled=!0,t.addChild(t.carBody),t.nameLabel=new eui.Label,t.nameLabel.fontFamily="Microsoft YaHei",t.nameLabel.size=16,t.nameLabel.x=-50,t.nameLabel.y=-55,t.nameLabel.textAlign="left",t.guildLabel=new eui.Label,t.guildLabel.fontFamily="Microsoft YaHei",t.guildLabel.size=16,t.guildLabel.x=-50,t.guildLabel.y=-35,t.guildLabel.textAlign="left",t.endTime=new eui.Label,t.endTime.size=16,t.endTime.fontFamily="Microsoft YaHei",t.endTime.x=-50,t.endTime.y=-75,t.endTime.textAlign="left",t.endTime.textColor=4381465,t.isRob=new MovieClip,t.isRob.touchEnabled=!0,t.isRob.x=-75,t.isRob.y=-75,t}return __extends(t,e),t.prototype.setMineInfo=function(e){this.info=e,this.nameLabel.text=e.name+GlobalConfig.jifengTiaoyueLg.st100849,this.guildLabel.visible=this.info.guildName.length>0,this.guildLabel.text=GlobalConfig.jifengTiaoyueLg.st100850+this.info.guildName;var t=e.surplusTime,i=MineModel.ins().getCfgByType(this.info.type);i?this.endSecond=t:ErrorLog.Assert(i,"DartCarItem    setMineInfo      cfg"+this.info.type),this.endTime.text=DateUtils.getFormatBySecond(this.endSecond,DateUtils.TIME_FORMAT_5),TimerManager.ins().doTimer(1e3,this.endSecond,this.refushTime,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.attrOther,this),this.touchEnabled=!0,this.nameLabel.textColor=ItemBase.QUALITY_COLOR[this.info.type],this.info.guildName==GameGlobal.actorModel.guildName?this.guildLabel.textColor=5952e3:this.guildLabel.textColor=Color.Red,e.isAtt?(this.isRob.loadUrl(ResDataPath.MINE_ROB_EFFE,!0),this.addChildAt(this.isRob,2)):(this.isRob.stop(),DisplayUtils.removeFromParent(this.isRob)),this.setLookInfo(e.type,!0)},t.prototype.setLookInfo=function(e,t){void 0===t&&(t=!1),this.carBody.loadUrl(ResDataPath.GetDartCarBodyByType(e),!0),t?(this.endTime.parent||this.addChild(this.endTime),this.nameLabel.parent||this.addChild(this.nameLabel),this.guildLabel.parent||this.addChild(this.guildLabel)):(DisplayUtils.removeFromParent(this.nameLabel),DisplayUtils.removeFromParent(this.endTime),DisplayUtils.removeFromParent(this.guildLabel))},t.prototype.destruct=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.attrOther,this),TimerManager.ins().remove(this.refushTime,this),this.carBody.stop(),this.isRob.stop()},t.prototype.refushTime=function(){--this.endSecond,this.endTime.text=DateUtils.getFormatBySecond(this.endSecond,DateUtils.TIME_FORMAT_5),this.endSecond<=0&&(this.destruct(),DisplayUtils.removeFromParent(this))},t.prototype.attrOther=function(){this.info.acId!=GameGlobal.actorModel.actorID&&(this.info.isAtt?ViewManager.ins().open(DartCarRobWin,this.info):UserTips.ins().showTips("|C:0xf87372&T:"+this.info.showError+"|"))},t}(egret.DisplayObjectContainer);__reflect(DartCarItem.prototype,"DartCarItem"),window.DartCarItem=DartCarItem;var DartCarListInfo=function(){function e(){this.acId=0,this.name="",this.guildName="",this.type=1,this.surplusTime=0,this.fightNum=0,this.fightPow=0,this.isAtt=!0,this.showError="",this.post=0,this.robStatus=!1}return e.prototype.parse=function(e,t){this.post=t,this.acId=e.dbid,0!=this.acId&&(this.name=e.actorName,this.fightNum=e.berobotcount,this.guildName=e.guildName,this.type=e.biaocheType,this.surplusTime=e.overTime,this.robStatus=e.robStatus,this.fightPow=e.fightPow,this.job=e.job,this.sex=e.sex,this.mainEle=e.mainEle,this.acId==GameGlobal.actorModel.actorID?(this.isAtt=!1,this.name=GlobalConfig.jifengTiaoyueLg.st101725):this.isAtt=!0)},e.prototype.checkIsAtt=function(){return null==this.biaoCheConfig&&(this.biaoCheConfig=GlobalConfig.ins("BiaoCheConfig")),this.fightNum>=this.biaoCheConfig.maxberobotcount?(this.showError=GlobalConfig.jifengTiaoyueLg.st101726,!1):this.robStatus?(this.showError=GlobalConfig.jifengTiaoyueLg.st101727,!1):!0},e}();__reflect(DartCarListInfo.prototype,"DartCarListInfo"),window.DartCarListInfo=DartCarListInfo;var DartExsploitType;!function(e){e[e.NONE=0]="NONE",e[e.EXPLOIT=1]="EXPLOIT",e[e.FINISH=2]="FINISH"}(DartExsploitType||(DartExsploitType={}));var DartCarModel=function(e){function t(){var t=e.call(this)||this;return t.exploitCnt=0,t.robNum=0,t.refreshType=1,t.refreshCost=0,t.DartRobInfoList=[],t.dartCarList=[],t.dartCarRecordList=[],t.m_OutTime=0,t.carRedPoint=new DartCarModelRedPoint,t.regNetMsg(S2cProtocol.sc_double_biaoche_notice,t.doubleDartCarNotice),t.regNetMsg(S2cProtocol.sc_biaoche_list,t.doDartCarList),t.regNetMsg(S2cProtocol.sc_self_biaoche_info,t.doSelfBiaocheInfo),t.regNetMsg(S2cProtocol.sc_biaoche_refresh_result,t.doDartCarRefreshResult),t.regNetMsg(S2cProtocol.sc_biaoche_berob_record,t.doDartCarReportInfo),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.doubleDartCarNotice=function(e){this.isDoubleDartCar=e.doubleTime,GameGlobal.MessageCenter.dispatch(MessageDef.DOUBLE_DARTCAR_NOTICE)},t.prototype.doSelfBiaocheInfo=function(e){this.exploitStatus!=e.exploitStatus&&e.exploitStatus==DartExsploitType.EXPLOIT&&ViewManager.ins().isShow(DartCarRefushWin)&&ViewManager.ins().close(DartCarRefushWin),this.exploitCnt=e.exploitCnt,this.robNum=e.robCnt,this.DartCarType=e.exploitType||1,this.refreshType=e.refreshType||1,this.refreshNum=e.refreshCnt,this.isDoubleReward=e.isDoublereward,null==this.biaoCheConfig&&(this.biaoCheConfig=GlobalConfig.ins("BiaoCheConfig"));var t=this.biaoCheConfig.refreshkuangyuanyuanbao,i=t.length-1;this.refreshCost=0;for(var o=0;o<this.refreshNum;++o)this.refreshCost=t[i>o?o:i];this.endTime=e.exploitOverTime,this.exploitStatus=e.exploitStatus,this.DartRobInfoList=e.beRobInfos,GameGlobal.MessageCenter.dispatch(MessageDef.DARTCAR_STATU_CHANGE),this._InitTimer(),this.sendDartCarList()},t.prototype.HasDartCar=function(){return this.endTime>0&&DartExsploitType.EXPLOIT==this.exploitStatus?!0:this.exploitStatus==DartExsploitType.FINISH},t.prototype._InitTimer=function(){if(TimerManager.ins().remove(this._DoTimer,this),this.endTime>0&&DartExsploitType.EXPLOIT==this.exploitStatus){var e=this.endTime;this.m_OutTime=Math.ceil(e-GameServer.serverTime),TimerManager.ins().doTimer(1e3,this.m_OutTime,this._DoTimer,this)}},t.prototype._DoTimer=function(){--this.m_OutTime,GameGlobal.MessageCenter.dispatch(MessageDef.MINE_UPDATE_TIME)},t.prototype.sendDartCarList=function(){var e=new Sproto.cs_get_biaoche_list_request;e.index=0,this.Rpc(C2sProtocol.cs_get_biaoche_list,e)},t.prototype.doDartCarList=function(e){this.dartCarList=[];for(var t=e.biaocheList.length,i=0;t>i;i++)this.dartCarList[i]=new DartCarListInfo,this.dartCarList[i].parse(e.biaocheList[i],i+1);GameGlobal.MessageCenter.dispatch(MessageDef.UPDATA_DARTCAR_LIST)},t.prototype.sendUpLevelDartCar=function(){this.Rpc(C2sProtocol.cs_uplevel_biaoche,new Sproto.cs_uplevel_biaoche_request)},t.prototype.doDartCarRefreshResult=function(e){var t=e.result;this.refreshType=e.biaocheType||1,this.refreshNum=e.refreshNum,this.refreshCost=e.costNum,GameGlobal.MessageCenter.dispatch(MessageDef.REFUSH_DARTCAR_SUCCESS),t?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101604):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101603)},t.prototype.sendStartDartCar=function(){this.Rpc(C2sProtocol.cs_start_biaoche,new Sproto.cs_start_biaoche_request)},t.prototype.sendGetDartCarReward=function(){this.Rpc(C2sProtocol.cs_rob_biaoche_award,new Sproto.cs_rob_biaoche_award_request)},t.prototype.sendRobDartCar=function(e){var t=new Sproto.cs_rob_biaoche_request;t.dbid=e,this.Rpc(C2sProtocol.cs_rob_biaoche,t)},t.prototype.sendDartCarReportInfo=function(){this.Rpc(C2sProtocol.cs_biaoche_get_revenge_list,new Sproto.cs_biaoche_get_revenge_list_request)},t.prototype.doDartCarReportInfo=function(e){this.dartCarRecordList=e.biaocheRecordList,this.dartCarRecordList.sort(function(e,t){return t.robTime-e.robTime}),GameGlobal.MessageCenter.dispatch(MessageDef.DARTCAR_REVENGE_LIST)},t.prototype.sendDartCarRevenge=function(e){var t=new Sproto.cs_biaoche_revenge_request;t.robIndex=e,this.Rpc(C2sProtocol.cs_biaoche_revenge,t)},t.countRewardList=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=1);var o,s=GlobalConfig.ins("BiaoCheTypeConfig");for(var n in s)if(s[n].level==e){o=s[n];break}if(ErrorLog.Assert(o,"DartCarModel   countRewardList    "+e))return[];var r=t?o.losegold:o.rewardgold,a=t?o.losefeats:o.rewardfeats,l=new RewardData;l.type=0,l.id=1,l.count=r*i;var h=new RewardData;return h.type=0,h.id=7,h.count=a*i,[l,h]},t}(BaseSystem);__reflect(DartCarModel.prototype,"DartCarModel");var DartCarModelRedPoint=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetMessageDef=function(){return[MessageDef.DARTCAR_STATU_CHANGE]},t.prototype.IsRed=function(){if(!Deblocking.Check(DeblockingType.TYPE_27,!0))return!1;var e=DartCarModel.ins();return null==this.biaoCheConfig&&(this.biaoCheConfig=GlobalConfig.ins("BiaoCheConfig")),e.exploitStatus!=MineExploitType.EXPLOIT&&this.biaoCheConfig.maxcaikuangcount>e.exploitCnt&&e.endTime<=0?!0:!1},t}(IRedPoint);__reflect(DartCarModelRedPoint.prototype,"DartCarModelRedPoint"),window.DartCarModel=DartCarModel,window.DartCarModelRedPoint=DartCarModelRedPoint;var DartCarMove=function(e){function t(){var t=e.call(this)||this;return t.SHOW_MAX=6,t.MAX_WIDTH=400,t.playerListTop=[],t.playerListBottom=[],t.topPoint=[],t.bottomPoint=[],t.playerWidth=350,t}return __extends(t,e),t.prototype.startPerformance=function(e){for(var t,i,o,s,n=Math.floor(33*Math.random())+88,r=Math.floor(33*Math.random())+88,a=0;a<e.length;a++){var l=e[a];l.x=n,this.addChild(l),t=Math.random()>.5,s=Math.round(30*Math.random()+10),t?(l.y=100,o=this.playerListTop.length>0?this.playerListTop[this.playerListTop.length-1]:null,i=o?o.x-this.playerWidth:n,l.x=i,this.playerListTop.push(l),this.topPoint.push(s)):(l.y=222,o=this.playerListBottom.length>0?this.playerListBottom[this.playerListBottom.length-1]:null,i=o?o.x-this.playerWidth-s:r,l.x=i,this.playerListBottom.push(l),this.bottomPoint.push(s))}TimerManager.ins().doTimer(50,0,this.setTimeFun,this)},t.prototype.setTimeFun=function(){this.startTo(this.playerListTop),this.startTo(this.playerListBottom)},t.prototype.startTo=function(e){for(var t,i=0;i<e.length;i++)if(t=e[i],t.x+=.2,t.x>=this.MAX_WIDTH){var o=1==e.length?-this.playerWidth:e[e.length-1].x-this.playerWidth;e.push(e.shift()),t.x=o>0?-this.playerWidth:o}},t.prototype.destruct=function(){for(TimerManager.ins().removeAll(this),this.playerListTop=[],this.playerListBottom=[];this.numChildren;)this.removeChildAt(0)},t}(eui.Component);__reflect(DartCarMove.prototype,"DartCarMove"),window.DartCarMove=DartCarMove;var DartCarPanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100824,t.outTime=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.name=GlobalConfig.jifengTiaoyueLg.st100824,this.skinName="DartCarPanelSkin",this.dartCarSpList=[],this.dartCarMove=new DartCarMove,this.groupCar.addChild(this.dartCarMove),this.startBtn.label=GlobalConfig.jifengTiaoyueLg.st100831,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100832},t.prototype.open=function(){this.AddClick(this.startBtn,this.onTap),this.AddClick(this.logBtn,this.onTap),this.AddClick(this.refBtn,this.onTap),this.observe(MessageDef.DARTCAR_STATU_CHANGE,this.refushPanelInfo),this.observe(MessageDef.UPDATA_DARTCAR_LIST,this.updataDartCarList),DartCarModel.ins().sendDartCarList(),this.refushPanelInfo()},t.prototype.close=function(){this.removeObserve(),this.removeEvents(),this.doClear()},t.prototype.doClear=function(){for(var e=0,t=this.dartCarSpList;e<t.length;e++){var i=t[e];i.destruct()}this.dartCarSpList=[],this.dartCarMove.destruct()},t.prototype.onTap=function(e){switch(e.target){case this.startBtn:if(DartCarModel.ins().endTime>0)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100825);DartCarModel.ins().exploitCnt<GlobalConfig.ins("CaiKuangConfig").maxcaikuangcount?ViewManager.ins().open(DartCarRefushWin):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100826);break;case this.logBtn:ViewManager.ins().open(DartCarReportInfoWin);break;case this.refBtn:DartCarModel.ins().sendDartCarList()}},t.prototype.refushTime=function(){--this.outTime,this.timeLabel.textFlow=TextFlowMaker.generateTextFlow(this.typeDesc+DateUtils.getFormatBySecond(this.outTime,9))},t.prototype.refushPanelInfo=function(){this.startBtn.visible=this.fsNum.visible=MineExploitType.NONE==DartCarModel.ins().exploitStatus;var e=GlobalConfig.ins("BiaoCheConfig"),t=e.maxrobotcount-DartCarModel.ins().robNum;t>0?this.robNum.text=GlobalConfig.jifengTiaoyueLg.st100827+t+"/"+e.maxrobotcount:this.robNum.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st100827+"<font color = '#f87372'>"+t+"/"+e.maxrobotcount+"</font>"),t=e.maxcaikuangcount-DartCarModel.ins().exploitCnt,t>0?this.fsNum.text=GlobalConfig.jifengTiaoyueLg.st100828+t+"/"+e.maxcaikuangcount:this.fsNum.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st100828+"<font color = '#f87372'>"+t+"/"+e.maxcaikuangcount+"</font>"),DartCarModel.ins().endTime>0&&DartExsploitType.EXPLOIT==DartCarModel.ins().exploitStatus?(this.timeBg.visible=!0,this.outTime=Math.ceil(DartCarModel.ins().endTime-GameServer.serverTime),this.typeDesc=GlobalConfig.jifengTiaoyueLg.st100829+"["+StringUtils.addColor(GlobalConfig.ins("BiaoCheTypeConfig")[DartCarModel.ins().DartCarType].name,ItemBase.QUALITY_COLOR[DartCarModel.ins().DartCarType])+"]"+GlobalConfig.jifengTiaoyueLg.st100830+"...",this.timeLabel.textFlow=TextFlowMaker.generateTextFlow(this.typeDesc+DateUtils.getFormatBySecond(this.outTime,9)),TimerManager.ins().doTimer(1e3,this.outTime,this.refushTime,this)):(this.timeBg.visible=!1,TimerManager.ins().remove(this.refushTime,this)),MineExploitType.FINISH==DartCarModel.ins().exploitStatus&&ViewManager.ins().open(DartCarCompleteWin)},t.prototype.updataDartCarList=function(){this.doClear();for(var e=DartCarModel.ins().dartCarList.length,t=0;e>t;t++)this.dartCarSpList[t]=new DartCarItem,this.dartCarSpList[t].setMineInfo(DartCarModel.ins().dartCarList[t]);this.dartCarMove.startPerformance(this.dartCarSpList)},t.prototype.CheckRedPoint=function(){return DartCarModel.ins().carRedPoint.IsRed()},t.openCheck=function(){return Deblocking.Check(DeblockingType.TYPE_27)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(DartCarPanel.prototype,"DartCarPanel",["ICommonWindowTitle","eui.UIComponent","egret.DisplayObject"]),window.DartCarPanel=DartCarPanel;var DartCarRefushWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="DartCarRefushWinSkin",this.bar.labelDisplay.visible=!1,this.m_refItem=this.group.$children,this.reward.itemRenderer=ItemBase,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100839,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100840,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100841,this.refushBtn.label=GlobalConfig.jifengTiaoyueLg.st100842,this.starBtn.label=GlobalConfig.jifengTiaoyueLg.st100843},t.prototype.open=function(){this.commonWindowBg.OnAdded(this),this.AddClick(this.starBtn,this.onTap),this.AddClick(this.refushBtn,this.onTap),this.observe(MessageDef.DARTCAR_STATU_CHANGE,this.updateDartCar),this.observe(MessageDef.REFUSH_DARTCAR_SUCCESS,this.updateDartCar),this.refushList(),this.updateDartCar()},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),this.removeObserve(),this.removeEvents()},t.prototype.refushList=function(){for(var e=0;4>e;e++){var t=this.group.getChildAt(e);this.AddClick(t,this.onClickRefCar),this.m_refItem[e].imgBg.source="comp_117_288_0"+(e+1)+"_png",this.m_refItem[e].select.visible=!1,this.m_refItem[e].currImg.visible=!1,this.m_refItem[e].isDouble.visible=DartCarModel.ins().isDoubleDartCar,this.m_refItem[e].isDouble.text=GlobalConfig.jifengTiaoyueLg.st100844}var i=GlobalConfig.ins("BiaoCheConfig").maxcaikuangcount;this.fsNum.text=GlobalConfig.jifengTiaoyueLg.st100828+(i-DartCarModel.ins().exploitCnt)+"/"+i},t.prototype.updateDartCar=function(){var e=DartCarModel.ins().refreshType,t=GlobalConfig.ins("BiaoCheTypeConfig")[e].maxTimes,i=DartCarModel.ins().refreshNum;this.bar.maximum=t,4>e&&0!=i?this.bar.value=i:this.bar.value=0,this.selectCarHandle(e-1);var o=GlobalConfig.ins("BiaoCheConfig"),s=o.refreshkuangyuanyuanbao;e>=s.length&&(e=s.length-1);var n="",r=UserBag.ins().getBagGoodsById(0,o.refreshkuangitem);n=r?GlobalConfig.jifengTiaoyueLg.st100022+r.itemConfig.name+"("+r.count+"/1)":GameGlobal.actorModel.yb>=DartCarModel.ins().refreshCost?GlobalConfig.jifengTiaoyueLg.st100845+DartCarModel.ins().refreshCost:GlobalConfig.jifengTiaoyueLg.st100845+"<font color = '#f87372'>"+DartCarModel.ins().refreshCost+"</font>",this.costNum.textFlow=(new egret.HtmlTextParser).parser(n),UIHelper.SetBtnNormalEffe(this.starBtn,4==DartCarModel.ins().refreshType)},t.prototype.onClickRefCar=function(e){this.selectCarHandle(this.group.getChildIndex(e.target))},t.prototype.selectCarHandle=function(e){void 0===e&&(e=0);for(var t=0;4>t;t++)this.m_refItem[t].select.visible=!1,this.m_refItem[t].currImg.visible=!1;var i=DartCarModel.ins().refreshType;this.m_refItem[e].select.visible=!0,this.m_refItem[i-1].currImg.visible=!0;var o=GlobalConfig.ins("BiaoCheTypeConfig")[e+1],s=DartCarModel.countRewardList(e+1),n=s.concat(o.item);this.reward.dataProvider=new eui.ArrayCollection(n)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.starBtn:var i=GlobalConfig.ins("BiaoCheTypeConfig")[DartCarModel.ins().refreshType];if(DartCarModel.ins().refreshType<4)return void WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100846,[i.name]),function(){DartCarModel.ins().sendStartDartCar()},this);DartCarModel.ins().sendStartDartCar();break;case this.refushBtn:if(4==DartCarModel.ins().refreshType)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100847);var o=UserBag.ins().getBagGoodsCountById(0,GlobalConfig.ins("BiaoCheConfig").refreshkuangitem);DartCarModel.ins().refreshCost>0&&0==t.isTips?WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100848,[DartCarModel.ins().refreshCost]),function(){t.isTips=!0,GameGlobal.actorModel.yb>=DartCarModel.ins().refreshCost||this.itemCount>0?DartCarModel.ins().sendUpLevelDartCar():UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008)},this):GameGlobal.actorModel.yb>=DartCarModel.ins().refreshCost||o>0?DartCarModel.ins().sendUpLevelDartCar():UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008)}},t.LAYER_LEVEL=LayerManager.UI_Main,t.isTips=!1,t}(BaseEuiPanel);__reflect(DartCarRefushWin.prototype,"DartCarRefushWin"),window.DartCarRefushWin=DartCarRefushWin;var DartCarReportInfoItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="KDReportItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.revenge.textFlow=(new egret.HtmlTextParser).parser("<u>"+GlobalConfig.jifengTiaoyueLg.st100560+"</u>"),this.revenge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.dataChanged=function(){this.revenge.visible=!1,this.infoData=this.data;var e=GlobalConfig.ins("BiaoCheTypeConfig")[this.infoData.biaocheType];if(e)switch(this.time.text=DateUtils.GetFormatSecond(this.infoData.robTime,8),this.infoData.type){case 1:this.info.text=GlobalConfig.jifengTiaoyueLg.st100833+e.name;break;case 2:this.infoData.robResult?(this.info.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100834,[e.name,this.infoData.roberName]),this.revenge.visible=!0):this.info.text=this.infoData.roberName+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100835,[e.name]);break;case 3:this.infoData.robResult?this.info.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100836,[this.infoData.roberName])+e.name:this.info.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100837,[this.infoData.roberName,e.name])}else ErrorLog.Assert(e,"DartCarReportInfoItem     cfg   "+this.infoData.biaocheType)},t.prototype.destruct=function(){this.revenge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(){return this.infoData.isRevenge?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100838):void ViewManager.ins().open(DartCarRevengeWin,this.infoData)},t}(eui.ItemRenderer);__reflect(DartCarReportInfoItem.prototype,"DartCarReportInfoItem"),window.DartCarReportInfoItem=DartCarReportInfoItem;var DartCarReportInfoWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="KuangDongReportSkin",this.list.itemRenderer=DartCarReportInfoItem},t.prototype.open=function(){this.m_bg.init("DartCarReportInfoWin",GlobalConfig.jifengTiaoyueLg.st101728);for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.MessageCenter.addListener(MessageDef.FUBEN_CHANGE,this.mapChange,this),GameGlobal.MessageCenter.addListener(MessageDef.DARTCAR_REVENGE_LIST,this.refushList,this),DartCarModel.ins().sendDartCarReportInfo(),this.refushList()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.MessageCenter.removeListener(MessageDef.DARTCAR_REVENGE_LIST,this.refushList,this),GameGlobal.MessageCenter.removeListener(MessageDef.FUBEN_CHANGE,this.mapChange,this)},t.prototype.mapChange=function(){ViewManager.ins().close(t)},t.prototype.refushList=function(){this.list.dataProvider=new eui.ArrayCollection(DartCarModel.ins().dartCarRecordList)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(DartCarReportInfoWin.prototype,"DartCarReportInfoWin"),window.DartCarReportInfoWin=DartCarReportInfoWin;var DartCarRevengeWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="KuangDongFuchouSkin",this.reward.itemRenderer=ItemBase},t.prototype.open=function(){this.m_bg.init("DartCarRevengeWin",GlobalConfig.jifengTiaoyueLg.st101729);for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.data=e[0],this.attBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.refushInfo()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.attBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.refushInfo=function(){this.nametx.text=GlobalConfig.jifengTiaoyueLg.st101730+this.data.roberName,this.AttrNum.text=GlobalConfig.jifengTiaoyueLg.st100809+this.data.fightPow,this.time.text=GlobalConfig.jifengTiaoyueLg.st101731+DateUtils.GetFormatSecond(this.data.robTime,8),this.reward.dataProvider=new eui.ArrayCollection(DartCarModel.countRewardList(this.data.biaocheType,!0,1)),ErrorLog.Assert(this.data,"DartCarRevengeWin   this.data")||(this.handImg.source="propIcon_048_png")},t.prototype.onTap=function(e){switch(e.target){case this.attBtn:DartCarModel.ins().sendDartCarRevenge(this.data.robIndex),ViewManager.ins().close(t)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(DartCarRevengeWin.prototype,"DartCarRevengeWin"),window.DartCarRevengeWin=DartCarRevengeWin;var DartCarRobWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="DartCarRobWinSkin",this.reward.itemRenderer=ItemBase},t.prototype.open=function(){this.m_bg.init("DartCarRobWin",GlobalConfig.jifengTiaoyueLg.st101724);for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.data=e[0],this.robBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.refushInfo()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.robBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.cancelBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.refushInfo=function(){var e=GlobalConfig.ins("BiaoCheTypeConfig")[this.data.type];if(e){for(var t=[],i=0;i<e.stealaward.length;i++){var o=e.stealaward[i],s={type:o.type,id:o.id,count:o.count};t.push(s)}this.reward.dataProvider=new eui.ArrayCollection(t)}this.ownName.text=GlobalConfig.jifengTiaoyueLg.st101732+this.data.name,this.ownAttr.text=GlobalConfig.jifengTiaoyueLg.st101733+CommonUtils.overLength(this.data.fightPow),this.head.source=ResDataPath.GetHeadMiniImgName(this.data.job,this.data.sex),this.m_ElementImg.source=ResDataPath.GetElementImgName(this.data.mainEle),null==this.biaoCheConfig&&(this.biaoCheConfig=GlobalConfig.ins("BiaoCheConfig"));var n=this.biaoCheConfig.maxrobotcount-DartCarModel.ins().robNum;this.robNum.text=GlobalConfig.jifengTiaoyueLg.st101734+n+"/"+this.biaoCheConfig.maxrobotcount},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.onTap=function(e){var i=this;switch(e.target){case this.robBtn:this.data.fightPow>GameGlobal.actorModel.power?WarnWin.show(GlobalConfig.jifengTiaoyueLg.st101735,function(){DartCarModel.ins().sendRobDartCar(i.data.acId),ViewManager.ins().close(t)},this):(DartCarModel.ins().sendRobDartCar(i.data.acId),ViewManager.ins().close(t));break;case this.cancelBtn:ViewManager.ins().close(t)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(DartCarRobWin.prototype,"DartCarRobWin"),window.DartCarRobWin=DartCarRobWin;var DayTargetItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.uiCompHandler,t),t.skinName="DayTargetItem",t.awardBtn.label=GlobalConfig.jifengTiaoyueLg.st101076,t}return __extends(t,e),t.prototype.uiCompHandler=function(e){this.removeEventListener(eui.UIEvent.COMPLETE,this.uiCompHandler,this),this.addEventListener(egret.TouchEvent.REMOVED_FROM_STAGE,this.removeStage,this),this.list.itemRenderer=ItemBase,this.awardBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTap,this)
},t.prototype.touchTap=function(e){ActivityModel.ins().sendReward(DayTargetPanel.curActId,0)},t.prototype.removeStage=function(e){this.removeEventListener(egret.TouchEvent.REMOVED_FROM_STAGE,this.removeStage,this),this.awardBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTap,this)},t.prototype.dataChanged=function(){switch(e.prototype.dataChanged.call(this),this.data,this.list.dataProvider=new eui.ArrayCollection(this.data.rewards),DayTargetPanel.curActId){case 1001:this.desc.text=GlobalConfig.jifengTiaoyueLg.st101339+this.data.value}var t=StringUtils.addColor("("+GameGlobal.activityModel.myDabiaoInfo+"/"+this.data.value+")",GameGlobal.activityModel.myDabiaoInfo>=this.data.value?Color.Green:Color.Red);this.desc.textFlow=TextFlowMaker.generateTextFlow(this.data.desc+this.data.value+t),this.data.state==RewardState.NotReached?(this.awardBtn.visible=!1,this.noTf.text=GlobalConfig.jifengTiaoyueLg.st100680):this.data.state==RewardState.CanGet?(this.awardBtn.visible=!0,this.noTf.text=""):this.data.state==RewardState.Gotten?(this.awardBtn.visible=!1,this.noTf.text=GlobalConfig.jifengTiaoyueLg.st101340):this.data.state==RewardState.Undo&&(this.awardBtn.visible=!1,this.noTf.text=GlobalConfig.jifengTiaoyueLg.st100680)},t}(eui.ItemRenderer);__reflect(DayTargetItemRenderer.prototype,"DayTargetItemRenderer"),window.DayTargetItemRenderer=DayTargetItemRenderer;var DayTargetPanel=function(e){function t(){var t=e.call(this)||this;return t.type=4,t.skinName="DayTargetPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=DayTargetItemRenderer},t.prototype.sendDabiaoInfo=function(){t.curActId>0&&ActivityModel.ins().sendDabiaoInfo(t.curActId)},Object.defineProperty(t,"curActId",{get:function(){var e,t=GameGlobal.activityModel.getbtnListByType(ActivityModel.BTN_TYPE_01);for(var i in t)if(4==t[i].actType){e=t[i];break}return null==e?0:e.id},enumerable:!0,configurable:!0}),t.prototype.updateData=function(){for(var e=GameGlobal.activityModel.getbtnListByType(ActivityModel.BTN_TYPE_01),t=0,i=e;t<i.length;t++){var o=i[t];if(o.actType==this.type)break}var s=GlobalConfig.ins("ActivityType4Config")[o.id],n=[];for(var r in s)if(0==s[r].ranking){n=s[r].value,this.dabiaoConfig=s[r];break}if(null!=this.dabiaoConfig){s=GameGlobal.activityData[o.id];var a="",l="";s&&(a=GlobalConfig.jifengTiaoyueLg.st101338+(""+s.getRemindTimeString()),l=ActivityModel.GetActivityConfig(o.id).desc),this.descTf.text=l,this.timeTf.text=a+"";for(var h,c=this.GetRecentConfig(),u=this.dabiaoConfig.value.slice(Math.min(c,this.dabiaoConfig.value.length-2),Math.min(c+2,this.dabiaoConfig.value.length)),d=[],p=Math.min(c,this.dabiaoConfig.value.length-2),f=0;f<u.length;f++)h={},h.rewards=u[f].rewards,h.value=u[f].value,h.desc=this.dabiaoConfig.taskTips,h.state=this.getCurStatus(p,h.value),p++,d[f]=h;this.list.dataProvider=new eui.ArrayCollection(d)}},t.prototype.open=function(){GameGlobal.MessageCenter.addListener(MessageDef.ACTIVITY4_IS_GET_AWARDS,this.sendDabiaoInfo,this),GameGlobal.MessageCenter.addListener(MessageDef.ACTIVITY4_UPDATE,this.updateData,this),this.rankBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.updateBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.sendDabiaoInfo(),this.rankBtn.visible=!WxSdk.ins().isHidePay()},t.prototype.onClick=function(e){e.currentTarget==this.rankBtn?ViewManager.ins().open(ActivityWinSummer,ActivityModel.BTN_TYPE_01):e.currentTarget==this.updateBtn&&this.dabiaoConfig.gainWay&&ViewManager.Guide(this.dabiaoConfig.gainWay[0],this.dabiaoConfig.gainWay[1])},t.prototype.GetRecentConfig=function(){for(var e=GameGlobal.activityModel,t=e.indexCurrDabiao,i=e.indexCurrDabiao;i>0;--i)BitUtil.Has(e.isDaBiao,i)||(t=i-1);return t},t.prototype.getCurStatus=function(e,t){var i=GameGlobal.activityModel,e=e+1;return!BitUtil.Has(i.isDaBiao,e)&&GameGlobal.activityModel.myDabiaoInfo>=t?RewardState.CanGet:i.indexCurrDabiao>=e?RewardState.Gotten:RewardState.NotReached},t.prototype.close=function(){GameGlobal.MessageCenter.removeListener(MessageDef.ACTIVITY4_IS_GET_AWARDS,this.sendDabiaoInfo,this),GameGlobal.MessageCenter.removeListener(MessageDef.ACTIVITY4_UPDATE,this.updateData,this),this.rankBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.updateBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t}(eui.Component);__reflect(DayTargetPanel.prototype,"DayTargetPanel"),window.DayTargetPanel=DayTargetPanel;var DrillChallengeResultWin=function(e){function t(){var t=e.call(this)||this;return t.m_HasNext=!0,t.skinName="ChallengeResultSkin",t.list0.itemRenderer=ItemBase,t.list1.itemRenderer=ItemBase,t.exitBtn.label=GlobalConfig.jifengTiaoyueLg.st100962,t.nextLabel.text=GlobalConfig.jifengTiaoyueLg.st101837,t.award_label.text=GlobalConfig.jifengTiaoyueLg.st101838,t}return __extends(t,e),Object.defineProperty(t.prototype,"closeBtn",{get:function(){return this.fightResultBg.closeBtn},enumerable:!0,configurable:!0}),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_CloseFunc=e[0],this.award_label.text=GlobalConfig.jifengTiaoyueLg.st100399,this.AddClick(this.exitBtn,this._OnClick),this.AddClick(this.closeBtn,this._ContinueChallenge);var i=UserFb2.ins().fbChallengeId;this.fightResultBg.SetState("win");var o=GlobalConfig.ins("ChallengeRoad")[DrillModel.ins().sc_tryroad_datas.id];o&&(o=o.award),o?this.list0.dataProvider=new eui.ArrayCollection(o):Main.errorBack("ChallengeResultWin fbChallengeConfig = null fubenID:"+i);var s=GlobalConfig.ins("ChallengeRoad")[DrillModel.ins().sc_tryroad_datas.id+1];s&&(s=s.award),s&&!Checker.Level(s.zsLv,s.lv)&&(s=null),s?(this.closeBtn.x=95,this.closeBtn.name=GlobalConfig.jifengTiaoyueLg.st101602,this.list1.dataProvider=new eui.ArrayCollection(s)):(this.list1.visible=!1,this.nextLabel.visible=!1,this.closeBtn.name=GlobalConfig.jifengTiaoyueLg.st100962,this.exitBtn.visible=!1,this.m_HasNext=!1),this.m_Time=5,this._UpdateCloseBtnLabel(),TimerManager.ins().doTimer(1e3,this.m_Time,this._UpdateCloseBtnLabel,this)},t.prototype.close=function(){TimerManager.ins().remove(this._UpdateCloseBtnLabel,this)},t.prototype._OnClick=function(){UserFb.ins().sendExitFb(),ViewManager.ins().close(this),this.m_CloseFunc&&(this.m_CloseFunc(),this.m_CloseFunc=null)},t.prototype._UpdateCloseBtnLabel=function(){--this.m_Time<=0&&this._ContinueChallenge(),this.closeBtn.label=this.closeBtn.name+"("+Math.max(this.m_Time,0)+"s)"},t.prototype._ContinueChallenge=function(){this.m_HasNext?(ViewManager.ins().close(this),DrillModel.ins().enterCopy(DrillModel.ins().sc_tryroad_datas.id)):this._OnClick()},t.prototype.onMaskTap=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(DrillChallengeResultWin.prototype,"DrillChallengeResultWin"),window.DrillChallengeResultWin=DrillChallengeResultWin;var DrillModel=function(e){function t(){var t=e.call(this)||this;return t.initData(),t.regNetMsg(S2cProtocol.sc_tryroad_datas,t.tryroadData),t.regNetMsg(S2cProtocol.sc_enter_tryroad_raid,t.tryroodRaid),t.regNetMsg(S2cProtocol.sc_get_caiquan_result,t.fingerGuessResult),t.regNetMsg(S2cProtocol.sc_get_tryroad_award,t.tryroadAward),t.regNetMsg(S2cProtocol.sc_get_tryroad_rank,t.tryroadRank),t}return __extends(t,e),t.prototype.initData=function(){this.sc_tryroad_datas=new Sproto.sc_tryroad_datas_request,this.sc_tryroad_datas.id=0,this.sc_tryroad_datas.status=0,this.sc_tryroad_datas.rewards=[],this.tryroad_rank=new Sproto.sc_get_tryroad_rank_request;var e=new Sproto.tryroad_rank_data;e.lvl=1,e.name="",e.rank=1,e.vip=0,this.tryroad_rank.lvl=1,this.tryroad_rank.rank=0,this.tryroad_rank.data=[e]},t.ins=function(){return e.ins.call(this)},t.prototype.tryroadData=function(e){e&&(this.sc_tryroad_datas=e),GameGlobal.MessageCenter.dispatch(MessageDef.TRYROAD_DATAS)},t.prototype.tryroodRaid=function(e){1==e.status&&ViewManager.ins().close(FbWin)},t.prototype.fingerGuessResult=function(e){},t.prototype.tryroadAward=function(e){this.sc_tryroad_datas.rewards[e.id-1].status=e.status,GameGlobal.MessageCenter.dispatch(MessageDef.TRYROAD_DATAS)},t.prototype.tryroadRank=function(e){e&&(this.tryroad_rank=e),GameGlobal.MessageCenter.dispatch(MessageDef.TRYROAD_RANK)},t.prototype.enterCopy=function(e){var t=new Sproto.cs_enter_tryroad_raid_request;t.handle=e,GameSocket.ins().Rpc(C2sProtocol.cs_enter_tryroad_raid,t)},t.prototype.fingerGuess=function(){var e=new Sproto.cs_get_caiquan_result_request;GameSocket.ins().Rpc(C2sProtocol.cs_get_caiquan_result,e)},t.prototype.drillAward=function(e){var t=new Sproto.cs_get_tryroad_award_request;t.id=e,GameSocket.ins().Rpc(C2sProtocol.cs_get_tryroad_award,t)},t.prototype.drillRank=function(){var e=new Sproto.cs_get_tryroad_rank_request;GameSocket.ins().Rpc(C2sProtocol.cs_get_tryroad_rank,e)},t.prototype.isRed=function(){var e=this.sc_tryroad_datas.rewards.length;if(0==this.sc_tryroad_datas.rewards.length)return!1;for(var t=0;e>t;t++)if(0==this.sc_tryroad_datas.rewards[t].status)return!0;return!1},t}(BaseSystem);__reflect(DrillModel.prototype,"DrillModel"),MessageCenter.compile(DrillModel),window.DrillModel=DrillModel;var DrillPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100382,t.skinName="DrillPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.box_len=this.progress_bar.box_group.numChildren,this.progress_bar.bar.slideDuration=0,this.progress_bar.bar.maximum=50,this.progress_bar.bar.labelDisplay.visible=!1,this.rank.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100388,this.award.challenge_btn.label=GlobalConfig.jifengTiaoyueLg.st100376},t.prototype.UpdateContent=function(){this.initConfig(),this.updataBox()},t.prototype.updataBox=function(){var e=DrillModel.ins().sc_tryroad_datas.id;e>50&&(e-=50),this.progress_bar.bar.value=e;for(var t=0;t<this.box_len;t++){var i=t;DrillModel.ins().sc_tryroad_datas.id>50&&(i+=5);var o=this.getBoxRewardState(i),s=this.progress_bar.box_group.getChildAt(t);if(o==RewardState.NotReached){var n=7+t,r="comp_60_60_0";n>=10&&(r="comp_60_60_"),s.redPoint.visible=!1,s.stateImg.visible=!1}else o==RewardState.CanGet?(s.redPoint.visible=!0,s.stateImg.visible=!1):o==RewardState.Gotten&&(s.redPoint.visible=!1,s.stateImg.visible=!0)}},t.prototype.initConfig=function(){null==this.challengeRoadConfig&&(this.challengeRoadConfig=GlobalConfig.ins("ChallengeRoad")),null==this.challengeRoadBaseConfig&&(this.challengeRoadBaseConfig=GlobalConfig.ins("challengeRoadBaseConfig")),null==this.challengeRoadAwardConfig&&(this.challengeRoadAwardConfig=GlobalConfig.ins("challengeRoadAwardConfig"))},t.prototype.initBoss=function(){this.boss_one||(this.boss_one=this.creatMovie(this.tier_one)),this.boss_three||(this.boss_three=this.creatMovie(this.tier_three)),this.boss_two||(this.boss_two=this.creatMovie(this.tier_two))},t.prototype.creatMovie=function(e){var t=new MovieClip;return t.touchEnabled=!1,t.x=70,t.y=20,t.scaleX=-.7,t.scaleY=.7,e.addChildAt(t,2),t},t.prototype.open=function(){this.childrenCreated(),this.initConfig(),this.observe(MessageDef.TRYROAD_DATAS,this.tryroadData),this.observe(MessageDef.TRYROAD_RANK,this.tryroadRank),this.AddClick(this.award.challenge_btn,this.onChallenge),this.tryroadData();for(var e=0;e<this.box_len;++e)this.AddClick(this.progress_bar.box_group.getChildAt(e),this.boxClick);DrillModel.ins().drillRank(),UIHelper.SetLinkStyleLabel(this.rank.check_rank,GlobalConfig.jifengTiaoyueLg.st100381),this.AddClick(this.rank.check_rank,this.openRankWin)},t.prototype.openRankWin=function(){ViewManager.ins().open(DrillRankPanel)},t.prototype.tryroadRank=function(){var e;e=DrillModel.ins().tryroad_rank;var t=e.data.length;0==t?(this.rank.rank_one.visible=!1,this.rank.rank_two.visible=!1,this.rank.rank_three.visible=!1):1==t?(this.rank.rank_one.visible=!0,this.setLableData(this.rank.rank_one,e.data[0]),this.rank.rank_two.visible=!1,this.rank.rank_three.visible=!1):2==t?(this.setLableData(this.rank.rank_one,e.data[0]),this.setLableData(this.rank.rank_two,e.data[1]),this.rank.rank_one.visible=!0,this.rank.rank_two.visible=!0,this.rank.rank_three.visible=!1):(this.setLableData(this.rank.rank_one,e.data[0]),this.setLableData(this.rank.rank_two,e.data[1]),this.setLableData(this.rank.rank_three,e.data[2]),this.rank.rank_one.visible=!0,this.rank.rank_two.visible=!0,this.rank.rank_three.visible=!0)},t.prototype.setLableData=function(e,t){e.rank.text=t.rank+"",e.name.text=t.name,e.vaule.text=t.lvl+GlobalConfig.jifengTiaoyueLg.st100383},t.prototype.close=function(){DisplayUtils.dispose(this.boss_one),this.boss_one=null,DisplayUtils.dispose(this.boss_three),this.boss_three=null,DisplayUtils.dispose(this.boss_two),this.boss_two=null},t.prototype.boxClick=function(e){var t=this.progress_bar.box_group.getChildIndex(e.currentTarget);DrillModel.ins().sc_tryroad_datas.id>50&&(t+=5);var i=this.getBoxRewardState(t),o=this.challengeRoadAwardConfig[t+1].boxAward,s=this.challengeRoadAwardConfig[t+1].time,n=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100384,[s]);ViewManager.ins().open(GetReward2Panel,GlobalConfig.jifengTiaoyueLg.st100385,n,RewardData.ToRewardDatas(o),function(){DrillModel.ins().drillAward(t+1)},i)},t.prototype.getBoxRewardState=function(e){var t=DrillModel.ins().sc_tryroad_datas.rewards.length;return 0==DrillModel.ins().sc_tryroad_datas.rewards.length||e>=t?RewardState.NotReached:0==DrillModel.ins().sc_tryroad_datas.rewards[e].status?RewardState.CanGet:RewardState.Gotten},t.prototype.onChallenge=function(e){DrillModel.ins().enterCopy(DrillModel.ins().sc_tryroad_datas.id)},t.prototype.tryroadData=function(){var e=DrillModel.ins().sc_tryroad_datas;this.updataBox();var t,i,o;this.tier_one.completed_img.visible=!1,this.tier_two.completed_img.visible=!1,this.tier_three.completed_img.visible=!1,99==e.id?(t=e.id-2,i=e.id-1,o=e.id,this.tier_one.completed_img.visible=!0,this.tier_two.completed_img.visible=!0,this.tier_three.completed_img.visible=!0,this.award.complete_label.visible=!0,this.award.challenge_btn.visible=!1):e.id%3==0?(t=e.id+1,i=e.id+2,o=e.id+3):e.id%3==1?(t=e.id,i=e.id+1,o=e.id+2,this.tier_one.completed_img.visible=!0):e.id%3==2&&(t=e.id-1,i=e.id,o=e.id+1,this.tier_one.completed_img.visible=!0,this.tier_two.completed_img.visible=!0),this.tier_one.tier_lab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100386,[t]),this.tier_two.tier_lab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100386,[i]),this.tier_three.tier_lab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100386,[o]),this.initBoss(),this.setMovieClipData(this.boss_one,t,this.tier_one.m_ElementImg),this.setMovieClipData(this.boss_two,i,this.tier_two.m_ElementImg),this.setMovieClipData(this.boss_three,o,this.tier_three.m_ElementImg),this.award.award_list.itemRenderer=ItemBase;var s,n;99==e.id?(s=this.challengeRoadConfig[99].award,n=e.id):(s=this.challengeRoadConfig[e.id+1].award,n=e.id+1),this.award.award_list.dataProvider=new eui.ArrayCollection(s);var r=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100387,[n]);this.award.tier_label.text=r;for(var a=0;a<this.box_len;++a){var l=this.progress_bar.box_group.getChildAt(a),h=void 0;h=e.id>50?this.challengeRoadAwardConfig[a+5+1].time:this.challengeRoadAwardConfig[a+1].time,l.count.text=h+GlobalConfig.jifengTiaoyueLg.st100383}},t.prototype.setMovieClipData=function(e,t,i){var o=this.challengeRoadConfig[t+""],s=GlobalConfig.monstersConfig[o.monsterId];e.loadUrl(ResDataPath.GetMonsterBodyPath(s.avatar+"_3s"),!0,-1),i.source=ResDataPath.GetElementImgName(s.elementType)},t}(BaseView);__reflect(DrillPanel.prototype,"DrillPanel",["ICommonWindowTitle"]),window.DrillPanel=DrillPanel;var DrillRankItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="DrillRankPanletemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.rank.text=this.data.rank+"",this.nickName.text=this.data.name,this.vaule.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100386,[this.data.lvl])},t}(eui.ItemRenderer);__reflect(DrillRankItem.prototype,"DrillRankItem"),window.DrillRankItem=DrillRankItem;var DrillRankPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="DrillRankPanelSkin",t}return __extends(t,e),t.prototype.UpdateContent=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101738,this.commonWindowBg.OnAdded(this);Rank.ins().rankModel[e[0]];this.list.itemRenderer=DrillRankItem,this.list.dataProvider=new eui.ArrayCollection(DrillModel.ins().tryroad_rank.data),0==DrillModel.ins().tryroad_rank.rank?this.self_rank.text=GlobalConfig.jifengTiaoyueLg.st100086:this.self_rank.text=GlobalConfig.jifengTiaoyueLg.st100403+DrillModel.ins().tryroad_rank.rank},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t}(BaseEuiPanel);__reflect(DrillRankPanel.prototype,"DrillRankPanel",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(DrillRankPanel,LayerManager.UI_Popup),window.DrillRankPanel=DrillRankPanel;var Encounter=function(e){function t(){var t=e.call(this)||this;return t.encounterModel={},t.bIsTipsFlag=!1,t.m_InquireRecord=[],t.m_News=[],t.m_NewsList=[],t.lastTime=0,t.refreshTimes=0,t.m_Prestige=0,t.m_Rank=0,t.m_PkCount=0,t.m_BuyCount=0,t.m_NextTime=0,t.m_RedPoint=0,t.m_RedPointTimestamp=0,t.mIsRevengeTip=!1,t.sysId=PackageID.Encounter,t.regNetMsg(S2cProtocol.sc_encounter_last_refresh_time,t.doLastRefreshTime),t.regNetMsg(S2cProtocol.sc_encounter_deal_data,t.doEncounterData),t.regNetMsg(S2cProtocol.sc_encounter_del_data,t.doDelEncounterData),t.regNetMsg(S2cProtocol.sc_encounter_battle_result,t.doFightResult),t.regNetMsg(S2cProtocol.sc_encounter_inquire_record,t.doInquireRecord),t.regNetMsg(S2cProtocol.sc_encounter_data_update,t.postDataUpdate),t.regNetMsg(S2cProtocol.sc_encounter_my_data,t._DoMyData),t.regNetMsg(S2cProtocol.sc_encounter_news,t._DoNews),t.regNetMsg(S2cProtocol.sc_encounter_news_list,t._DoNewsList),t.regNetMsg(S2cProtocol.sc_encounter_update_will_boss,t.doUpdateWildBoss),t.regNetMsg(S2cProtocol.sc_encounter_will_boss_result,t.doWildBossResult),t.regNetMsg(S2cProtocol.sc_encounter_item_info,t._DoItemInfo),t.regNetMsg(S2cProtocol.sc_encounter_open_result,t._DoOpenResult),t.regNetMsg(S2cProtocol.sc_encounter_player_rob,t._DoPlayerRob),t.regNetMsg(S2cProtocol.sc_encounter_get_boss_award,t.getZaoYuBossAward),t}return __extends(t,e),Object.defineProperty(t.prototype,"inquireRecord",{get:function(){return this.m_InquireRecord?this.m_InquireRecord:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"News",{get:function(){return this.m_News.shift()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NewsList",{get:function(){return this.m_NewsList},enumerable:!0,configurable:!0}),t.ins=function(){return e.ins.call(this)},Object.defineProperty(t.prototype,"maxRefreshTimes",{get:function(){return GlobalConfig.ins("PublicPkrednamebaseConfig").residuedegree},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buyPKConsume",{get:function(){return 50},enumerable:!0,configurable:!0}),t.prototype.doLastRefreshTime=function(e){this.lastTime=e.lastTime,this.refreshTimes=e.refreshTimes},t.prototype.sendRefresh=function(){this.Rpc(C2sProtocol.cs_encounter_send_fight_refresh)},t.prototype.sendFightResult=function(e){var t=new Sproto.cs_encounter_send_fight_result_request;t.result=0,t.encounterIndex=e,delete this.encounterModel[t.encounterIndex],this.Rpc(C2sProtocol.cs_encounter_send_fight_result,t)},t.prototype.doDelEncounterData=function(e){var t=e.index;this.encounterModel[t]=null,delete this.encounterModel[t],this.doEncounterDataChange()},t.prototype.doEncounterData=function(e){var t=new EncounterModel;t.parser(e),t.type=EntityType.Encounter,this.encounterModel[t.index]=t,this.doEncounterDataChange()},t.prototype.doEncounterDataChange=function(){GameGlobal.MessageCenter.dispatch(MessageDef.ENCOUNTER_DATA_CHANGE)},t.prototype.sendGetreward=function(){},t.prototype.doFightResult=function(e){for(var i=this,o=e.index,s=e.result,n=[],r=[0,1,4,3],a=0,l=r.length;l>a;a++){var h=new RewardData;h.type=0,h.id=r[a],h.count=e.count[a],h.count&&n.push(h)}for(var c=0,u=e.rewardDatas.length;u>c;c++){var h=new RewardData;h.parser(e.rewardDatas[c]),t.postCreateDrop(DropHelp.tempDropPoint.x,DropHelp.tempDropPoint.y,h),n.push(h)}this.encounterModel[o]=null,delete this.encounterModel[o],this.doEncounterDataChange();var d,p="获得奖励如下：";if(s){var f=function(){i.sendGetreward(),d=egret.setTimeout(function(){egret.clearTimeout(d),ViewManager.ins().open(ResultWin,s,n,p,!1)},i,800),GameLogic.ins().createGuanqiaMonster()};DropHelp.addCompleteFunc(f,this),DropHelp.start()}else d=egret.setTimeout(function(){egret.clearTimeout(d),ViewManager.ins().open(ResultWin,s,n,p,!1),GameLogic.ins().createGuanqiaMonster()},this,800)},Object.defineProperty(t.prototype,"prestige",{get:function(){return this.m_Prestige},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rank",{get:function(){return this.m_Rank},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pkCount",{get:function(){return this.m_PkCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buyPKCount",{get:function(){return this.m_BuyCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextTime",{get:function(){return this.m_NextTime},enumerable:!0,configurable:!0}),t.prototype.postDataUpdate=function(e){this.m_PkCount=e.count,this.m_BuyCount=e.buyCount,this.m_NextTime=e.nextRecoverTime},t.prototype._DoMyData=function(e){this.m_Prestige=e.fame||0,this.m_Rank=e.rank||0},t.prototype._DoNews=function(e){this.m_News.push(e.data),GameGlobal.MessageCenter.dispatch(MessageDef.ENCOUNTER_NEWS)},t.prototype._DoNewsList=function(e){this.m_NewsList=e.datas,this.m_NewsList.sort(function(e,t){return t.time-e.time}),GameGlobal.MessageCenter.dispatch(MessageDef.ENCOUNTER_NEWS_LIST)},t.prototype.sendInquirePrestige=function(){this.Rpc(C2sProtocol.cs_encounter_inquire_prestige),this.Rpc(C2sProtocol.cs_encounter_get_info)},t.prototype.GetItemName=function(e){if(null==e)return GlobalConfig.jifengTiaoyueLg.st100555;var t=GlobalConfig.itemConfig[e];return t?"|C:"+ItemBase.QUALITY_COLOR_STR[t.quality]+"&T:"+t.name+"|":null},t.prototype.doInquireRecord=function(e){function i(e,t){return t.time-e.time}this.m_InquireRecord=[];for(var o=0,s=e.robDatas;o<s.length;o++){var n=s[o];if(n.isWin){var r=this.GetItemName(n.itemId);if(null!=r){var a=new EncounterRecordData;a.time=n.time,a.rob=n,a.itemName=r,this.m_InquireRecord.push(a)}}}for(var l=0,h=e.berobDatas;l<h.length;l++){var n=h[l];if(!n.isWin){var c=this.GetItemName(n.itemId);if(null!=c){var a=new EncounterRecordData;a.time=n.time,a.beRob=n,a.itemName=c,this.m_InquireRecord.push(a)}}}this.m_InquireRecord.sort(i),t.postZaoYuRecord(this.m_InquireRecord)},t.postZaoYuRecord=function(e){return void 0===e&&(e=null),e},t.prototype.sendInquireRecord=function(){this.Rpc(C2sProtocol.cs_encounter_inquire_record)},t.prototype.doUpdateWildBoss=function(e){var t=e.configID;this.zyKeyId=t,this.refreshCd=e.refreshCd,this.zyKeyId>0?this.createBoss():EntityManager.ins().removeWillBoss(),PlayFun.ins().upDataWillBoss()},t.prototype.getZyBossDate=function(){void 0==this.fieldBossConfig&&(this.fieldBossConfig=GlobalConfig.ins("FieldBossConfig"));for(var e in this.fieldBossConfig)for(var t=this.fieldBossConfig[parseInt(e)],i=0,o=t;i<o.length;i++){var s=o[i];if(s.keyId==this.zyKeyId)return s}},Object.defineProperty(t.prototype,"refreshCd",{get:function(){return this._refreshCd?this._refreshCd-GameServer.serverTime:0},set:function(e){this._refreshCd=e+GameServer.serverTime},enumerable:!0,configurable:!0}),t.prototype.createBoss=function(){null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig);var e=this.getZyBossDate();if(e){var t=e.bossId,i=GlobalConfig.ins("ScenesConfig")[GameMap.mapID];if(i){var o=MonstersConfig.createModel(this.monstersConfig[t]);o.x=i.bossX*GameMap.CELL_SIZE,o.y=i.bossY*GameMap.CELL_SIZE,o.type=EntityType.WillBoss,GameLogic.ins().createEntityByModel(o)}}},t.prototype.doWildBossResult=function(e){},t.postCreateDrop=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.prototype.getZaoYuBossAward=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.WILLBOSS_AWARD_UPDATE,e.award,e.id)},t.prototype.sendZaoYuBossAward=function(e){var t=new Sproto.cs_encounter_get_boss_award_request;t.id=e,this.Rpc(C2sProtocol.cs_encounter_get_boss_award,t)},t.prototype.sendResult=function(e){var i=new Sproto.cs_encounter_send_result_request;i.result=e,this.Rpc(C2sProtocol.cs_encounter_send_result,i);var o=e;o&&(t.postCreateDrop(DropHelp.tempDropPoint.x,DropHelp.tempDropPoint.y,[]),ViewManager.ins().open(ZaoYuBossAwardWin),OtherAIModel.getInstance.creatorAIRole());var s=function(){GameLogic.ins().createGuanqiaMonster()};DropHelp.addCompleteFunc(s,this),DropHelp.start()},t.prototype.sendGetAward=function(){this.Rpc(C2sProtocol.cs_encounter_get_boss_award)},t.prototype.SendBuyPKCount=function(){this.Rpc(C2sProtocol.cs_encounter_buy_pk_count)},t.prototype.getEncounterModel=function(e){return this.encounterModel[e]},t.prototype.clearEncounterModel=function(){this.encounterModel={}},t.IsBoss=function(){return EntityManager.ins().getTeamCount(Team.WillBoss)?!0:!1},t.prototype.SendGetItemInfo=function(){this.Rpc(C2sProtocol.cs_encounter_get_item_info)},t.prototype.SendClearRedPoint=function(e){var t=new Sproto.cs_encounter_clear_redpoint_request;t.itemId=e,this.Rpc(C2sProtocol.cs_encounter_clear_redpoint,t)},t.prototype.SendOpenItem=function(e){var t=new Sproto.cs_encounter_open_item_request;t.handle=e,this.Rpc(C2sProtocol.cs_encounter_open_item,t)},t.prototype.SendRevenge=function(e){var t=new Sproto.cs_encounter_send_revenge_request;t.index=e,this.Rpc(C2sProtocol.cs_encounter_send_revenge,t)},Object.defineProperty(t.prototype,"encounterItem",{get:function(){return this.m_EncounterItem||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"redPoint",{get:function(){return this.m_RedPoint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"redPointTimestamp",{get:function(){return this.m_RedPointTimestamp},enumerable:!0,configurable:!0}),t._SortEncounterItem=function(e,t){var i=GameServer.serverTime;return i>=e.timestamp&&i>=t.timestamp?t.itemId-e.itemId:e.timestamp-t.timestamp},t.prototype._DoItemInfo=function(e){var i=!1;null!=e.itemDatas&&(this.m_EncounterItem=e.itemDatas,this.m_EncounterItem.sort(t._SortEncounterItem),i=!0,this.m_NewItemFlag||(this.m_NewItemFlag={},this.ClearNewItem())),null!=e.redPoint&&(this.m_RedPoint=e.redPoint,i=!0),null!=e.redPointTimestamp&&(this.m_RedPointTimestamp=e.redPointTimestamp,i=!0),i&&GameGlobal.MessageCenter.dispatch(MessageDef.ENCOUNTER_ITEM_INFO_UPDATE)},t.prototype._DoOpenResult=function(e){ViewManager.ins().open(GetRewardPanel,GlobalConfig.jifengTiaoyueLg.st101876,GlobalConfig.jifengTiaoyueLg.st101875,e.rewardDatas,function(){})},t.prototype._DoPlayerRob=function(e){this.mIsRevengeTip=!0,this.mPlayerRobInfo={name:e.name,itemId:e.itemId},GameGlobal.MessageCenter.dispatch(MessageDef.ENCOUNTER_PLAYER_ROB)},t.prototype.GetRecentRevenge=function(){for(var e=this.m_InquireRecord,t=0,i=e;t<i.length;t++){var o=i[t];if(null!=o.beRob&&o.beRob.isWin)return o}return null},t.CheckOpen=function(){return UserFb.ins().guanqiaID>=GlobalConfig.ins("PublicPkrednamebaseConfig").openLevel?!0:(UserTips.ins().showTips("|C:0xf87372&T:通关到第"+GlobalConfig.ins("PublicPkrednamebaseConfig").openLevel+"关开启pk战|"),!1)},t.prototype.IsNewItem=function(e){return this.m_NewItemFlag&&this.m_NewItemFlag[e]?!1:!0},t.prototype.ClearNewItem=function(){if(this.m_NewItemFlag)for(var e in this.m_EncounterItem)this.m_NewItemFlag[this.m_EncounterItem[e].handle]=!0},t.prototype.SendGetNews=function(){this.Rpc(C2sProtocol.cs_encounter_get_news)},t.CheckRedPoint=function(){for(var e=EncounterRedPointType.PK;e<=EncounterRedPointType.ITEM;++e)if(this.CheckRedPointByType(e))return!0},t.CheckRedPointByType=function(e){var i=t.ins();if(e==EncounterRedPointType.PK){var o=!1;for(var s in i.encounterModel){var n=i.encounterModel[s];if(n.state==EncounterModelState.CAN_PK){o=!0;break}}return o&&t.ins().pkCount>0}if(e==EncounterRedPointType.ITEM)for(var s in i.m_EncounterItem){var r=i.m_EncounterItem[s];if(i.IsNewItem(r.handle))return!0;if(r.timestamp<=GameServer.serverTime)return!0}},Object.defineProperty(t.prototype,"isTipsFlag",{get:function(){return this.bIsTipsFlag},set:function(e){this.bIsTipsFlag!=e&&(this.bIsTipsFlag=e)},enumerable:!0,configurable:!0}),t}(BaseSystem);__reflect(Encounter.prototype,"Encounter");var EncounterRedPointType;!function(e){e[e.PK=0]="PK",e[e.ITEM=1]="ITEM"}(EncounterRedPointType||(EncounterRedPointType={}));var EncounterRecordData=function(){function e(){}return e}();__reflect(EncounterRecordData.prototype,"EncounterRecordData"),MessageCenter.compile(Encounter),window.Encounter=Encounter,window.EncounterRecordData=EncounterRecordData;var EncounterDummyModel=function(){function e(t){this.subRole=[],this.type=EntityType.WillDummy,this.team=Team.PASSERBY,this.index=++e.INDEX,this.name=t.name,this.lv=t.level,this.zsLv=t.zhuan}return e.prototype.AddRoleByData=function(e){var t=new Role;if(t.parser(e),null==t.attributeData){for(var i=[],o=0;o<AttributeType.atCount;++o)i.push(999);i[AttributeType.atMoveSpeed]=3750,t.parserAtt(i);for(var s=[],o=0;o<AttributeType.atCount;++o)s.push(999);t.parserExAtt(s)}this.subRole.push(t)},e.INDEX=0,e}();__reflect(EncounterDummyModel.prototype,"EncounterDummyModel"),window.EncounterDummyModel=EncounterDummyModel;var EncounterModel=function(){function e(e){this.redPoint=0,this.name=e}return e.prototype.parser=function(e){var t=e.encounterData;this.index=t.index,this.posIndex=t.posIndex,this.lv=t.lv,this.zsLv=t.zsLv,this.name=t.name,this.itemCount=t.itemCount,this.itemId=t.itemId||600001,this.job=t.job,this.sex=t.sex,this.state=EncounterModelState.CAN_PK,this.redPoint=t.redPoint||0,this.mainEle=t.mainEle},e}();__reflect(EncounterModel.prototype,"EncounterModel");var EncounterModelState;!function(e){e[e.CAN_PK=0]="CAN_PK",e[e.PROTECT=1]="PROTECT",e[e.FIGHT=2]="FIGHT"}(EncounterModelState||(EncounterModelState={})),window.EncounterModel=EncounterModel;var GameCrossPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100539,t.skinName="GamePersonskin",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=GlobalConfig.getGamePlayConfigByType(GamePlayEnum.GAME_PALY_TYPE_3);i.sort(this.sort),this.gamePersonList.itemRenderer=GamePersonItemPanel,this.gamePersonList.dataProvider=new eui.ArrayCollection(i)},t.prototype.sort=function(e,t){var i=GamePersonItemPanel.isOpen(e),o=GamePersonItemPanel.isOpen(t);return i&&!o?-1:!i&&o?1:i&&o?e.index>t.index?-1:e.index<t.index?1:0:e.index<t.index?-1:e.index>t.index?1:0},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(GameCrossPanel.prototype,"GameCrossPanel",["ICommonWindowTitle"]),window.GameCrossPanel=GameCrossPanel;var GameLimitPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100538,t.skinName="GamePersonskin",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=GlobalConfig.getGamePlayConfigByType(GamePlayEnum.GAME_PALY_TYPE_2);i.sort(this.sort),this.gamePersonList.itemRenderer=GamePersonItemPanel,this.gamePersonList.dataProvider=new eui.ArrayCollection(i)},t.prototype.sort=function(e,t){var i=GamePersonItemPanel.isOpen(e),o=GamePersonItemPanel.isOpen(t);return i&&!o?-1:!i&&o?1:i&&o?e.index>t.index?-1:e.index<t.index?1:0:e.index<t.index?-1:e.index>t.index?1:0
},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(GameLimitPanel.prototype,"GameLimitPanel",["ICommonWindowTitle"]),window.GameLimitPanel=GameLimitPanel;var GamePersonItemPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="GamePersonItemSkin",t.gameMethod.textFlow=(new egret.HtmlTextParser).parser('<a href="event:"><u>'+GlobalConfig.jifengTiaoyueLg.st100540+"</u></a>"),t.addEventListener(egret.TouchEvent.TOUCH_TAP,t._OnClick,t),t}return __extends(t,e),t.prototype.dataChanged=function(){this.personbg.source=this.data.bg+"_png",this.timeDetail.text=this.data.timetips,this.personLevel.text=this.data.opentips,this.groupMethod.visible=this.data.gametips>0,this.groupLevel.visible=!t.isOpen(this.data),this.groupDetail.visible=!!this.data.timetips},t.prototype.onTap=function(){ViewManager.ins().open(ZsBossRuleSpeak,this.data.gametips)},t.prototype._OnClick=function(e){return e.target==this.gameMethod?void ViewManager.ins().open(ZsBossRuleSpeak,this.data.gametips):void(t.isOpen(this.data,!0)&&(ViewManager.ins().close(GamePlay),ViewManager.Guide(this.data.controlTarget[0],this.data.controlTarget[1])))},t.isOpen=function(e,t){if(void 0===t&&(t=!1),e.controlTarget[0]==ViewIndexDef.GuildActivityWin||e.controlTarget[0]==ViewIndexDef.GuildWarMainBgWin){if(void 0==GameLogic.ins().actorModel.guildID||0==GameLogic.ins().actorModel.guildID)return t&&UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100541),!1;if(e.controlTarget[0]==ViewIndexDef.GuildActivityWin&&1==e.controlTarget[1]&&GameServer.serverOpenDay<GlobalConfig.guildfbconfig.openDay-1)return t&&UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100542),!1}return Deblocking.Check(e.funcopenId,!t)?!0:!1},t}(eui.ItemRenderer);__reflect(GamePersonItemPanel.prototype,"GamePersonItemPanel"),window.GamePersonItemPanel=GamePersonItemPanel;var GamePersonPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100537,t.skinName="GamePersonskin",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=GlobalConfig.getGamePlayConfigByType(GamePlayEnum.GAME_PALY_TYPE_1);i.sort(this.sort),this.gamePersonList.itemRenderer=GamePersonItemPanel,this.gamePersonList.dataProvider=new eui.ArrayCollection(i)},t.prototype.sort=function(e,t){var i=GamePersonItemPanel.isOpen(e),o=GamePersonItemPanel.isOpen(t);return i&&!o?-1:!i&&o?1:i&&o?e.index>t.index?-1:e.index<t.index?1:0:e.index<t.index?-1:e.index>t.index?1:0},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(GamePersonPanel.prototype,"GamePersonPanel",["ICommonWindowTitle"]),window.GamePersonPanel=GamePersonPanel;var GamePlay=function(e){function t(){var t=e.call(this)||this;return t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.gamePersonPanel=new GamePersonPanel,this.gamePersonPanel.name=GlobalConfig.jifengTiaoyueLg.st100537,this.commonWindowBg.AddChildStack(this.gamePersonPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=void 0==e[0]?0:e[0];this.commonWindowBg.OnAdded(this,i)},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t}(BaseEuiPanel);__reflect(GamePlay.prototype,"GamePlay",["ICommonWindow"]),ViewManager.ins().reg(GamePlay,LayerManager.UI_Main),window.GamePlay=GamePlay;var GamePlayEnum=function(){function e(){}return e.GAME_PALY_TYPE_1=1,e.GAME_PALY_TYPE_2=2,e.GAME_PALY_TYPE_3=3,e}();__reflect(GamePlayEnum.prototype,"GamePlayEnum"),window.GamePlayEnum=GamePlayEnum;var EncounterInfoWin=function(e){function t(){var t=e.call(this)||this;return t.m_SurplusCountStr="",t.windowTitleIconName="LPKR",t.name="PK",t.skinName="ZaoYuSkin",t.mibaoBtn.label=GlobalConfig.jifengTiaoyueLg.st100555,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100556,t.recordBtn.label=GlobalConfig.jifengTiaoyueLg.st100557,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100492,t.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100558,t}return __extends(t,e),t.prototype.open=function(){this.m_RoleItems=[];for(var e=0;e<this.roleItems.numChildren;e++)this.m_RoleItems.push(new EncounterRoleItem(this.roleItems.getChildAt(e)));this.updatePrestigeRank(),Encounter.ins().sendInquireRecord(),Encounter.ins().sendInquirePrestige(),this.AddClick(this.refreshBtn,this.onTap),this.AddClick(this.recordBtn,this.onTap),this.AddClick(this.buyCountBtn,this.onTap),this.AddClick(this.mibaoBtn,this.onTap),this.AddClick(this.newsGroup,this.onTap),this.observe(MessageDef.ENCOUNTER_DATA_CHANGE,this.UpdateContent),this.observe(Encounter.ins().postDataUpdate,this.updatePrestigeRank),this.observe(MessageDef.ENCOUNTER_NEWS,this.UpdateNews);for(var t=0,i=this.m_RoleItems;t<i.length;t++){var o=i[t];this.AddClick(o.mItem,this._RoleItemClick)}TimerManager.ins().doTimer(1e3,0,this._RefreshTime,this),null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig"));var s=this.chaptersConfig[UserFb.ins().guanqiaID];null!=s&&(this.UpdateNews(),this.updateData())},t.prototype.close=function(){this.newsLabel.text="",egret.Tween.removeTweens(this.newsLabel),this.removeEvents(),this.removeObserve();for(var e=this.m_RoleItems.length,t=0;e>t;t++)this.m_RoleItems[t].dispose(),this.m_RoleItems[t]=null;this.m_RoleItems=null,TimerManager.ins().removeAll(this)},t.prototype._SetLabelText=function(){Encounter.ins().pkCount>=GlobalConfig.ins("PublicPkrednamebaseConfig").residuedegree?this.surplusCount.text=this.m_SurplusCountStr:this.surplusCount.text=this.m_SurplusCountStr+("("+GameServer.GetSurplusTime(Encounter.ins().nextTime))+GlobalConfig.jifengTiaoyueLg.st100543+")",this.refreshLabel.text=""+GameServer.GetSurplusTime(Encounter.ins().lastTime)+GlobalConfig.jifengTiaoyueLg.st100544},t.prototype._RefreshTime=function(){this._SetLabelText()},t.prototype.updatePrestigeRank=function(){var e=Encounter.ins();this.m_SurplusCountStr=e.pkCount+"/"+GlobalConfig.ins("PublicPkrednamebaseConfig").residuedegree,this._SetLabelText()},t.prototype._RoleItemClick=function(e){if(e.target instanceof eui.Button){for(var t=-1,i=0;i<this.m_RoleItems.length;++i)if(this.m_RoleItems[i].mItem==e.currentTarget){t=i;break}if(-1!=t){if(!GameMap.IsNoramlLevel())return void UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st100545);if(Encounter.ins().pkCount<1)return void UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st100546);var o=this.m_RoleItems[t].mData;if(o.state==EncounterModelState.PROTECT)return void UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st100547);if(o.state==EncounterModelState.FIGHT)return void UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st100548);Encounter.ins().sendFightResult(o.index)}}},t.prototype.onTap=function(e){switch(e.target){case this.newsGroup:ViewManager.ins().open(EncounterNewsPanel);break;case this.recordBtn:ViewManager.ins().open(ZaoYuRecordWin);break;case this.mibaoBtn:ViewManager.ins().open(ZaoYuItemWin);break;case this.refreshBtn:Checker.Money(this.consumeLabel.type,this.consumeLabel.price)?Encounter.ins().sendRefresh():UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100222);break;case this.buyCountBtn:var t=Encounter.ins().buyPKConsume,i=GlobalConfig.ins("PublicPkrednamebaseConfig").maxBuy;if(Encounter.ins().isTipsFlag)Encounter.ins().buyPKCount>=i?UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st100427):Checker.Money(MoneyConst.yuanbao,t)&&Encounter.ins().SendBuyPKCount();else{var o=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100549,[t])+(Encounter.ins().buyPKCount+"/"+i);0==Encounter.ins().isTipsFlag&&(o=o+"\n\n<font color='#FFB82A'>"+GlobalConfig.jifengTiaoyueLg.st100550),WarnWin.show(o,function(){return Encounter.ins().isTipsFlag=!0,Encounter.ins().buyPKCount>=i?(UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st100427),!0):Checker.Money(MoneyConst.yuanbao,t)?(Encounter.ins().SendBuyPKCount(),!1):!0},this)}}},t.prototype.UpdateContent=function(){var e=[{x:13,y:25},{x:26,y:25},{x:24,y:14},{x:14,y:15}];null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig"));var t=this.chaptersConfig[UserFb.ins().guanqiaID];if(null!=t){var i=GlobalConfig.ins("ScenesConfig")[t.sid];e=i?i.zyPos||e:e;var o=i?i.sizeX:44,s=i?i.sizeY:44,n=Encounter.ins().encounterModel,r=0;for(var a in n){var l=n[a];if(l){var h=this.m_RoleItems[r];if(!h)break;h.visible=!0,h.SetData(l);var c=e[r];h.SetPos(Math.floor(c.x/o*445),Math.floor(c.y/s*288)),++r}}for(var u=r;u<this.m_RoleItems.length;++u)this.m_RoleItems[u].visible=!1;this.consumeLabel.type=MoneyConst.gold,this.consumeLabel.price=GlobalConfig.ins("PublicPkrednamebaseConfig").refreshCost}},t.prototype.lookfc_dian=function(e){var t=e;this.recordBtn.redPoint.visible=!1;for(var i=0;i<t.length;i++)null==t[i].beRob||t[i].beRob.isRevenge||(this.recordBtn.redPoint.visible=!0)},t.prototype.UpdateNews=function(){var e=this;this.observe(Encounter.postZaoYuRecord,this.lookfc_dian),Encounter.ins().sendInquireRecord(),this.lookfc_dian(Encounter.ins().inquireRecord);var t=Encounter.ins().News;if(null==t){var i=ItemBase.QUALITY_COLOR_STR[4];this.newsLabel.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100551,[i,i,i]))}else this.newsLabel.textFlow=EncounterNewsPanel.GetInfoLabel(t.itemId,t.name);this.newsLabel.x=444,egret.Tween.removeTweens(this.newsLabel);var o=egret.Tween.get(this.newsLabel);o.to({x:-this.newsLabel.width},25*(this.newsLabel.x+this.newsLabel.width)).call(function(){egret.Tween.removeTweens(e.newsLabel),e.UpdateNews()},this)},t.prototype.CheckRedPoint=function(){var e=Encounter.CheckRedPointByType(EncounterRedPointType.ITEM);return this.mibaoBtn.redPoint.visible=e,Encounter.CheckRedPointByType(EncounterRedPointType.PK)||e},t.prototype.updateData=function(){var e=Encounter.ins(),t=e.prestige,i=e.rank;this.dayPrestige.text=GlobalConfig.jifengTiaoyueLg.st100552+t,this.rank.text=0==i?GlobalConfig.jifengTiaoyueLg.st100553:LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100554,[i]),this.money.type=MoneyConst.gold,this.prestige.type=MoneyConst.soul,this.money.text="0",this.prestige.text="0";var o=GlobalConfig.ins("PublicPkrednamerankConfig");for(var s in o){var n=o[s];if(n.minRank<=i&&n.maxRank>=i){this.money.text=n.rewards[1].count+"",this.prestige.text=n.rewards[0].count+"";break}}},t.openCheck=function(){return Deblocking.Check(DeblockingType.TYPE_07)},t}(BaseView);__reflect(EncounterInfoWin.prototype,"EncounterInfoWin",["ICommonWindowTitle"]);var EncounterRoleItem=function(){function e(e){this.mItem=e,e.btnLoot.label=GlobalConfig.jifengTiaoyueLg.st100559}return e.prototype.dispose=function(){DisplayUtils.dispose(this.mc),this.mc=null,this.mData=null,this.mItem=null},Object.defineProperty(e.prototype,"visible",{set:function(e){this.mItem.visible=e},enumerable:!0,configurable:!0}),e.prototype.SetPos=function(e,t){var i=this.mItem;i.x=e-42.5,i.y=t-57.5},e.prototype.SetData=function(e){this.mData=e,this.mItem.name.text=e.name,this.mItem.lv.text=ResDataPath.GetLvName(e.zsLv,e.lv),this.mItem.stateImg.visible=e.state==EncounterModelState.CAN_PK,this.mItem.head.SetData(e)},e}();__reflect(EncounterRoleItem.prototype,"EncounterRoleItem");var EncounterRoleHead=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.SetData=function(e){this.SetHead(e.job,e.sex),this.SetCount(e.itemCount,e.itemId),e.mainEle?(this.m_ElementImg.visible=!0,this.m_ElementImg.source=ResDataPath.GetElementImgName(e.mainEle)):this.m_ElementImg.visible=!1},t.prototype.SetHead=function(e,t){this.icon.source=ResDataPath.GetHeadMiniImgName(e,t)},t.prototype.SetCount=function(e,t){if(this.rewardGroup.visible=e>0){this.rewardCount.text=e.toString();var i=GlobalConfig.itemConfig[t];this.itemImg.source=ResDataPath.GetItemFullName(i?i.icon:"600001")}},t}(eui.Component);__reflect(EncounterRoleHead.prototype,"EncounterRoleHead"),ViewManager.ins().reg(EncounterInfoWin,LayerManager.UI_Main),window.EncounterInfoWin=EncounterInfoWin,window.EncounterRoleItem=EncounterRoleItem,window.EncounterRoleHead=EncounterRoleHead;var EncounterNewsPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ZaoYuNewsSkin",t.list.itemRenderer=EncounterNewsItem,t.titleLabel.text=GlobalConfig.jifengTiaoyueLg.st101441,t}return __extends(t,e),t.prototype.open=function(){Encounter.ins().SendGetNews(),this.dialogCloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.observe(MessageDef.ENCOUNTER_NEWS_LIST,this.UpdateContent),this.UpdateContent()},t.prototype.close=function(){this.dialogCloseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.UpdateContent=function(){this.list.dataProvider=new eui.ArrayCollection(Encounter.ins().NewsList)},t.GetInfoLabel=function(e,t){var i=GlobalConfig.itemConfig[e];return TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101440,[ItemBase.QUALITY_COLOR[i.quality]+"",i.name,t]))},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(EncounterNewsPanel.prototype,"EncounterNewsPanel");var EncounterNewsItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.item.data=e.itemId,this.item.isShowName(!1),this.info.textFlow=EncounterNewsPanel.GetInfoLabel(e.itemId,e.name),this.time.text=DateUtils.getFormatBySecond(e.time,2)},t}(eui.ItemRenderer);__reflect(EncounterNewsItem.prototype,"EncounterNewsItem"),window.EncounterNewsPanel=EncounterNewsPanel,window.EncounterNewsItem=EncounterNewsItem;var WildBossWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="ZaoYuBossSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.dataGroup.itemRenderer=ItemBase,this.challengeBtn.label=GlobalConfig.jifengTiaoyueLg.st100736,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100736,this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st100431,this.languageTxt1.text=GlobalConfig.jifengTiaoyueLg.st100738,this.languageTxt2.text=GlobalConfig.jifengTiaoyueLg.st100739,this.m_bg.init("WildBossWin",GlobalConfig.jifengTiaoyueLg.st100735)},t.prototype.initMc=function(){this.bossEff||(this.bossEff=new MovieClip,this.bossEff.scaleX=-1,this.bossEff.x=this.m_AnimGroup.width/2,this.bossEff.y=this.m_AnimGroup.height/2,this.m_AnimGroup.addChild(this.bossEff))},t.prototype.open=function(){if(this.challengeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),EntityManager.ins().willBoss&&EntityManager.ins().willBoss.infoModel){var e=EntityManager.ins().willBoss.infoModel.configID,t=GlobalConfig.monstersConfig[e];this.initMc(),this.bossEff.loadUrl(ResDataPath.GetMonsterBodyPath(t.avatar+"_3s"),!0,-1),this.bossName.text=t.name+" Lv."+t.level;var i=[],o={};o.type=2,o.value=t.hp,i.push(o);var s={};s.type=4,s.value=t.atk,i.push(s);var n=Encounter.ins().getZyBossDate();n&&(this.dataGroup.dataProvider=new eui.ArrayCollection(n.rewards))}else Main.errorBack("遭遇BOSS数据错误! mapID = "+GameMap.mapID+"遭遇BOSS 唯一ID = "+Encounter.ins().zyKeyId)},t.prototype.close=function(){this.challengeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),DisplayUtils.dispose(this.bossEff),this.bossEff=null},t.openCheck=function(){return EntityManager.ins().getTeamCount(Team.WillBoss)?(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100734),!1):!0},t.prototype.onTap=function(e){switch(e.currentTarget){case this.challengeBtn:EntityManager.ins().willBoss&&EntityManager.ins().willBoss.dispatchEventWith(egret.TouchEvent.TOUCH_BEGIN),ViewManager.ins().close(t)}},t}(BaseEuiPanel);__reflect(WildBossWin.prototype,"WildBossWin"),ViewManager.ins().reg(WildBossWin,LayerManager.UI_Popup),window.WildBossWin=WildBossWin;var ZaoYuBossAwardItem=function(e){function t(){var t=e.call(this)||this;return t.isGet=!1,t.gold=0,t.skinName="ZaoYuBossAwardItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_GoldGroup.visible=!1,this.m_NoGoldLab.visible=!1,this.m_NoGoldLab.text=GlobalConfig.jifengTiaoyueLg.st100740},t.prototype.setData=function(e){this.m_ItemBase.data=e,this.m_ItemBase.dataChanged()},t.prototype.addEvt=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.removeEvt=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.release=function(){egret.Tween.removeTweens(this),this.removeEvt()},t.prototype.onClick=function(){if(0==this.isGet){var e=GameLogic.ins().actorModel.yb;e>=this.gold?Encounter.ins().sendZaoYuBossAward(this.index):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008)}},t.prototype.sendGetItem=function(){Encounter.ins().sendZaoYuBossAward(this.index)},t.prototype.setGood=function(e){0==this.isGet?(this.gold=e,this.m_GoldLab.text=this.gold+"",0==e?(this.m_NoGoldLab.visible=!0,this.m_GoldGroup.visible=!1):e>0&&(this.m_NoGoldLab.visible=!1,this.m_GoldGroup.visible=!0)):(this.m_NoGoldLab.visible=!1,this.m_GoldGroup.visible=!1)},t}(eui.Component);__reflect(ZaoYuBossAwardItem.prototype,"ZaoYuBossAwardItem"),window.ZaoYuBossAwardItem=ZaoYuBossAwardItem;var ZaoYuBossAwardWin=function(e){function t(){var t=e.call(this)||this;return t.itemList=[],t.pointList=[],t.time=30,t.state=1,t.rList=[],t.getNum=0,t.skinName="ZaoYuBossAwardSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.rList=this.getRlist(6),this.itemList.push(this.m_Item1,this.m_Item2,this.m_Item3,this.m_Item4,this.m_Item5,this.m_Item6),this.pointList.push(this.m_PointGroup1,this.m_PointGroup2,this.m_PointGroup3,this.m_PointGroup4,this.m_PointGroup5,this.m_PointGroup6);var t=GlobalConfig.ins("FieldBossBasicConfig");this.openTime=t.openTime,this.rewardTime=t.rewardTime,this.closeTime=t.closeTime,this.languageBtn.label=GlobalConfig.jifengTiaoyueLg.st100742,this.languageBtn0.label=GlobalConfig.jifengTiaoyueLg.st100741,this.languageBtn1.label=GlobalConfig.jifengTiaoyueLg.st100743,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100218},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addViewEvent(),this.setData(),this._mc=ObjectPool.ins().pop("MovieClip"),this._mc.x=this.groupEff.width>>1,this._mc.y=this.groupEff.height>>1,this._mc.loadUrl(ResDataPath.GetUIEffePath("eff_jiesuan"),!0,-1),this.groupEff.addChild(this._mc)},t.prototype.close=function(){this.release(),DisplayUtils.removeFromParent(this._mc),ObjectPool.ins().push(this._mc),ViewManager.ins().releaseView(t)},t.prototype.release=function(){this.removeItem(),this.removeTimer(),this.removeViewEvent()},t.prototype.removeItem=function(){for(var e=0;e<this.itemList.length;e++){var t=this.itemList[e];t.release()}},t.prototype.addViewEvent=function(){this.m_StartBtnGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goState2,this),this.m_CloseBtnGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickClose,this),this.m_AllGetBtnGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAllGet,this),MessageCenter.ins().addListener(MessageDef.WILLBOSS_AWARD_UPDATE,this.getAward,this)},t.prototype.removeViewEvent=function(){this.m_StartBtnGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goState2,this),this.m_CloseBtnGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickClose,this),this.m_AllGetBtnGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAllGet,this),MessageCenter.ins().removeListener(MessageDef.WILLBOSS_AWARD_UPDATE,this.getAward,this)},t.prototype.setData=function(){for(var e=Encounter.ins().getZyBossDate().dropRewards,t=0;t<this.itemList.length;t++)this.itemList[t].setData(e[t]),this.itemList[t].m_MaskImg.visible=!1,this.itemList[t].point=t+1,this.itemList[t].index=t+1;this.setStateSH(),this.setAddTimer(this.openTime)},t.prototype.setAddTimer=function(e){this.time=e,TimerManager.ins().doTimer(1e3,e,this.setTime,this),this.setTime()},t.prototype.removeTimer=function(){TimerManager.ins().remove(this.setTime,this)},t.prototype.setTime=function(){if(this.m_TimeBitLab.text=this.time+"",this.m_TimeLab.text="("+this.time+"s)",this.m_CloseTimeLab.text="("+this.time+"s)",this.time<=0)switch(this.removeTimer(),this.state){case 1:this.goState2();break;case 2:this.goState3();break;case 3:this.onClickClose();break;case 4:this.onClickClose()}this.time-=1},t.prototype.setStateSH=function(){switch(this.state){case 1:this.m_StartBtnGroup.visible=!0,this.m_TimeBitLab.visible=!1,this.m_AllGetBtnGroup.visible=!1,this.m_CloseBtnGroup.visible=!1,this.removeItmeEvt();break;case 2:this.m_AllGetBtnGroup.visible=!0,this.m_StartBtnGroup.visible=!1,this.m_TimeBitLab.visible=!0,this.m_CloseBtnGroup.visible=!1,this.m_AllGetBtnGroup.horizontalCenter=0,this.setAllGetGold();break;case 3:this.m_AllGetBtnGroup.visible=!0,this.m_StartBtnGroup.visible=!1,this.m_TimeBitLab.visible=!1,this.m_CloseBtnGroup.visible=!0,this.m_AllGetBtnGroup.horizontalCenter=151,this.m_CloseBtnGroup.horizontalCenter=-148,this.setAllGetGold();break;case 4:this.m_AllGetBtnGroup.visible=!1,this.m_StartBtnGroup.visible=!1,this.m_TimeBitLab.visible=!1,this.m_CloseBtnGroup.visible=!0,this.m_CloseBtnGroup.horizontalCenter=0,this.removeItmeEvt()}},t.prototype.goState2=function(){var e=this;this.removeTimer(),this.m_StartBtnGroup.visible=!1;for(var t=function(){var t=i.itemList[o];0==o?egret.Tween.get(t).to({scaleX:0,skewY:90},300).call(function(){t.m_MaskImg.visible=!t.m_MaskImg.visible}).to({scaleX:1,skewY:0},300).wait(300).call(function(){e.mergeItem()}):egret.Tween.get(t).to({scaleX:0,skewY:90},300).call(function(){t.m_MaskImg.visible=!t.m_MaskImg.visible}).to({scaleX:1,skewY:0},300).wait(300)},i=this,o=0;o<this.itemList.length;o++)t()},t.prototype.mergeItem=function(){for(var e=this,t=0;t<this.itemList.length;t++){var i=this.itemList[t];0==t?egret.Tween.get(i).to({x:this.m_CPoint.x,y:this.m_CPoint.y},300).call(function(){e.assignItem()}):egret.Tween.get(i).to({x:this.m_CPoint.x,y:this.m_CPoint.y},300)}},t.prototype.assignItem=function(){for(var e=this,t=0;t<this.itemList.length;t++){var i=this.itemList[t];i.point=this.rList[t],0==t?egret.Tween.get(i).to({x:this.pointList[i.point-1].x,y:this.pointList[i.point-1].y},300).call(function(){e.setState2()}):egret.Tween.get(i).to({x:this.pointList[i.point-1].x,y:this.pointList[i.point-1].y},300)}},t.prototype.setState2=function(){this.state=2,this.setStateSH(),this.setAddTimer(this.rewardTime);for(var e=0;e<this.itemList.length;e++)this.itemList[e].addEvt(),this.itemList[e].setGood(0)},t.prototype.getRlist=function(e,t){if(void 0===t&&(t=[]),t.length>=e)return t;for(var i=Math.ceil(Math.random()*e),o=0;o<t.length;o++)if(t[o]==i)return this.getRlist(e,t);return t.push(i),this.getRlist(e,t)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.removeItmeEvt=function(){for(var e=0;e<this.itemList.length;e++)this.itemList[e].removeEvt()},t.prototype.goState3=function(){var e=Math.floor(6*Math.random()),t=this.itemList[e];t.sendGetItem()},t.prototype.getAward=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1];if(i.length>1){this.removeTimer();for(var s=function(){var e=n.itemList[r];if(1==e.m_MaskImg.visible){e.isGet=!0;var t=i.shift();e.setData(t),egret.Tween.get(e).to({scaleX:0,skewY:90},300).call(function(){e.m_MaskImg.visible=!e.m_MaskImg.visible}).to({scaleX:1,skewY:0},300)}},n=this,r=0;r<this.itemList.length;r++)s();this.state=4,this.setStateSH(),this.setAddTimer(this.closeTime)}else{this.getNum+=1;for(var a=function(){var e=l.itemList[r];if(e.index==o){e.isGet=!0;var t=i.shift();e.setData(t),egret.Tween.get(e).to({scaleX:0,skewY:90},300).call(function(){e.m_MaskImg.visible=!e.m_MaskImg.visible}).to({scaleX:1,skewY:0},300)}var s=GlobalConfig.ins("FieldBossBasicConfig"),n=s.cost[l.getNum-1];e.setGood(n)},l=this,r=0;r<this.itemList.length;r++)a();1==this.getNum&&(this.removeTimer(),this.state=3,this.setStateSH()),this.setAllGetGold(),6==this.getNum&&(this.state=4,this.setStateSH()),this.setAddTimer(this.closeTime)}},t.prototype.getFreeAward=function(){for(var e=0;e<this.itemList.length;e++){var t=this.itemList[e];t.removeEvt()}},t.prototype.setAllGetGold=function(){for(var e=GlobalConfig.ins("FieldBossBasicConfig"),t=0,i=this.getNum-1,o=i;o<e.cost.length;o++)e.cost[o]&&(t+=e.cost[o]);var s=[],n={type:0,id:2,count:t};s.push(n),UserBag.ins().setNeedItem(s,this.m_NeedItemGroup,22,16,3881787,1)},t.prototype.onClickAllGet=function(){for(var e=GlobalConfig.ins("FieldBossBasicConfig"),t=0,i=this.getNum;i<e.cost.length;i++)t+=e.cost[i];var o=GameLogic.ins().actorModel.yb;o>=t?Encounter.ins().sendZaoYuBossAward(-1):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008)},t}(BaseEuiView);__reflect(ZaoYuBossAwardWin.prototype,"ZaoYuBossAwardWin"),ViewManager.ins().reg(ZaoYuBossAwardWin,LayerManager.UI_Popup),window.ZaoYuBossAwardWin=ZaoYuBossAwardWin;var ZaoYuItemPanel=function(e){function t(){var t=e.call(this)||this;return t.m_ShowIndex=0,t.m_TempCounter=0,t.skinName="ZaoYuItemPanelSkin",t.name=GlobalConfig.jifengTiaoyueLg.st100555,t.list.itemRenderer=ZaoYuItemPanelItem,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100574,t.revenge.text=GlobalConfig.jifengTiaoyueLg.st100575,t.clearRedPoint.text=GlobalConfig.jifengTiaoyueLg.st100576,t.noGoods.text=GlobalConfig.jifengTiaoyueLg.st100577,t.gotoBtn.label=GlobalConfig.jifengTiaoyueLg.st100578,t}return __extends(t,e),Object.defineProperty(t,"TIP_LIST",{get:function(){var e=[GlobalConfig.jifengTiaoyueLg.st100565,GlobalConfig.jifengTiaoyueLg.st100566,GlobalConfig.jifengTiaoyueLg.st100567];return e},enumerable:!0,configurable:!0}),t.prototype.open=function(){TimerManager.ins().doTimer(1e3,0,this._Update,this),this.AddClick(this.clearRedPoint,this._OnClick),this.AddClick(this.revenge,this._OnClick),this.AddClick(this.gotoBtn,this._OnClick),this.observe(MessageDef.ENCOUNTER_ITEM_INFO_UPDATE,this.UpdateContent),this.observe(MessageDef.PK_BOX_OPEN,this.playAnim),this.UpdateContent(),Encounter.ins().SendGetItemInfo(),Encounter.ins().ClearNewItem()},t.prototype.close=function(){TimerManager.ins().removeAll(this),this.clearRedPoint.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.removeObserve(),Encounter.ins().ClearNewItem(),this.mc&&(DisplayUtils.dispose(this.mc),this.mc=null)},t.prototype._OnClick=function(e){switch(e.target){case this.clearRedPoint:var t=GlobalConfig.ins("PublicPkrednamebaseConfig");UseShopItemPanel.Show(GlobalConfig.jifengTiaoyueLg.st100568,[new ZaoYuRedPointItem(t.advanceredpill),new ZaoYuRedPointItem(t.superredpill)],[MessageDef.ENCOUNTER_ITEM_INFO_UPDATE]);break;case this.revenge:ViewManager.ins().open(ZaoYuRecordWin);break;case this.gotoBtn:ViewManager.ins().close(ZaoYuItemWin)}},t.prototype._CreateProgress=function(){var e=this.m_Shape;e||(e=new egret.Shape,this.m_Shape=e,this.progressGroup.addChild(e));var i=Encounter.ins().redPoint;if(null!=this.progressGroup){var o=this.progressGroup.width,s=this.progressGroup.height,n=e.graphics;n.clear();var r=egret.Matrix.create(),a=t.START_PRO;a=100>=i?t.START_PRO+.01*i*t.START_CHUNK:t.START_PRO+t.START_CHUNK+(1-100/i)*t.START_CHUNK*.5,r.createGradientBox(o,s,50,a),n.beginGradientFill(egret.GradientType.LINEAR,[2060293,2060293,2060293],[1,1,1],[0,125,255],r),n.drawRect(0,0,o,s),n.endFill()}},t.prototype._Update=function(){this.m_TempCounter++%6==0&&(this.broadcast.text=t.TIP_LIST[this.m_ShowIndex++%3]);for(var e=0;e<this.list.numChildren;++e){var i=this.list.getChildAt(e);i&&i.UpdateTime&&i.UpdateTime()}this.surplusTime.text=GameServer.GetSurplusTime(Encounter.ins().redPointTimestamp,DateUtils.TIME_FORMAT_5,4)+" "+GlobalConfig.jifengTiaoyueLg.st100569},t.prototype.UpdateContent=function(){var e=Encounter.ins();this.curRedPointValue.text=""+e.redPoint,this.surplusTime.visible=!1;var i=t.GetPKRedConfig(e.redPoint);this.curStateLabel.text=i.statedesc,this.noGoodsGroup.visible=0==e.encounterItem.length,this.list.dataProvider=new eui.ArrayCollection(e.encounterItem);var o=e.GetRecentRevenge();o?(this.curTitle.text=""+o.beRob.actorData.name+GlobalConfig.jifengTiaoyueLg.st100570,this.revengeGroup.visible=!0,this.list.top=this.revengeGroup.height,this.revenge.visible=!0):(this.revengeGroup.visible=!1,this.revenge.visible=!1,this.list.top=0),this._CreateProgress(),this._Update()},t.GetPKRedConfig=function(e){var t=4,i=GlobalConfig.ins("PublicPkrednameConfig");for(var o in i){var s=i[o];if(e<=s.maxredNum){t=s.level;break}}return i[t]},t.prototype.CheckRedPoint=function(){return Encounter.CheckRedPointByType(EncounterRedPointType.ITEM)},t.prototype.playAnim=function(e,t,i,o){var s=this;this.mc||(this.mc=new MovieClip,this.mc.touchEnabled=!1),this.mc.visible=!0,this.mc.loadUrl(ResDataPath.GetUIEffePath("eff_box_open"),!0,1,function(){if(e>0){var n=t*Math.ceil(e/60);WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100571,[n]),function(){Checker.Money(MoneyConst.yuanbao,n)&&BagFullTipsPanel.CheckOpen(i)&&Encounter.ins().SendOpenItem(o.handle)},s)}else BagFullTipsPanel.CheckOpen(i)&&Encounter.ins().SendOpenItem(o.handle);s.mc.visible=!1}),this.m_AnimGroup.addChild(this.mc)},t.START_PRO=-300,t.START_CHUNK=418,t}(BaseView);__reflect(ZaoYuItemPanel.prototype,"ZaoYuItemPanel",["ICommonWindowTitle"]);var ZaoYuItemPanelItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.openBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype.OnClick=function(){},t.prototype._OnClick=function(){var e=this.data,t=e.timestamp-GameServer.serverTime,i=GlobalConfig.itemConfig[e.itemId||600001],o=GlobalConfig.ins("PublicPkrednamebaseConfig").custper[i.quality],s=3;if(4==i.quality)MessageCenter.ins().dispatch(MessageDef.PK_BOX_OPEN,t,o,s,e);else if(t>0){var n=o*Math.ceil(t/60);WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100571,[n]),function(){Checker.Money(MoneyConst.yuanbao,n)&&BagFullTipsPanel.CheckOpen(s)&&Encounter.ins().SendOpenItem(e.handle)},this)}else BagFullTipsPanel.CheckOpen(s)&&Encounter.ins().SendOpenItem(e.handle)},t.prototype.dataChanged=function(){var e=this.data;this.UpdateTime(),this.item.clear(),this.item.data=e.itemId||600001,this.newFlag.visible=Encounter.ins().IsNewItem(e.handle)},t.prototype.UpdateTime=function(){var e=this.data?this.data.timestamp:0;(this.time.visible=GameServer.serverTime<e)?this.openBtn.label=GlobalConfig.jifengTiaoyueLg.st100572:this.openBtn.label=GlobalConfig.jifengTiaoyueLg.st100391,this.time.text=""+GameServer.GetSurplusTime(this.data.timestamp)+GlobalConfig.jifengTiaoyueLg.st100573},t}(eui.ItemRenderer);__reflect(ZaoYuItemPanelItem.prototype,"ZaoYuItemPanelItem");var ZaoYuRedPointItem=function(){function e(e){this.m_ItemId=e}return e.prototype.GetItemId=function(){return this.m_ItemId},e.prototype.GetDes=function(){return null},e.prototype.DoUse=function(){Encounter.ins().SendClearRedPoint(this.m_ItemId)},e}();__reflect(ZaoYuRedPointItem.prototype,"ZaoYuRedPointItem",["IUseShopItemAdapter"]),window.ZaoYuItemPanel=ZaoYuItemPanel,window.ZaoYuItemPanelItem=ZaoYuItemPanelItem,window.ZaoYuRedPointItem=ZaoYuRedPointItem;var ZaoYuItemWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.commonWindowBg.AddChildStack(new ZaoYuItemPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e&&e[0])},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),ViewManager.ins().isShow(LadderWin)||!ViewManager.ins().open(LadderWin)
},t.prototype.pkGetMiBaoMovieClip=function(){var e,t=this;e=ResultWin.item,e&&(e.setItemBg(""),e.isShowName(!1),e.x=190,e.y=265,this.addChild(e),e&&egret.Tween.get(e).to({x:35,y:620},1200,egret.Ease.sineOut).call(function(){e&&(egret.Tween.removeTweens(e),e.parent&&t.removeChild(e))}))},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(ZaoYuItemWin.prototype,"ZaoYuItemWin",["ICommonWindow"]),window.ZaoYuItemWin=ZaoYuItemWin;var ZaoYuRecordItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ZaoYuRecordInfoSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.go.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.go.label=GlobalConfig.jifengTiaoyueLg.st100560},t.prototype._OnClick=function(){var e=this.data;null==e.beRob||e.beRob.isWin||e.beRob.isRevenge||(GameMap.IsNoramlLevel()?(Encounter.ins().SendRevenge(e.beRob.index),ViewManager.ins().close(ZaoYuRecordWin),ViewManager.ins().close(LadderWin)):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100545))},t.prototype.dataChanged=function(){var e,t=this.data;e=null!=t.rob?t.rob.actorData:t.beRob.actorData,null==e&&(e={name:"",job:0,sex:0,zsLv:0,lv:1}),this.roleHead.SetHead(e.job,e.sex),this.roleHead.SetCount(0,null),this.playerName.text=e.name,this.lv.text=ResDataPath.GetLvName(e.zsLv,e.lv);var i="";null!=t.beRob?(i=GlobalConfig.jifengTiaoyueLg.st100562+t.itemName,this.go.visible=!t.beRob.isRevenge):(i=GlobalConfig.jifengTiaoyueLg.st100563+GameString.GetThirdPerson(e.sex)+GlobalConfig.jifengTiaoyueLg.st100564+t.itemName,this.go.visible=!1),this.time.textFlow=(new egret.HtmlTextParser).parser("<font>"+DateUtils.getFormatBySecond(t.time,2)+"</font> ").concat(TextFlowMaker.generateTextFlow(i))},t}(eui.ItemRenderer);__reflect(ZaoYuRecordItem.prototype,"ZaoYuRecordItem"),window.ZaoYuRecordItem=ZaoYuRecordItem;var ZaoYuRecordWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="ZaoYuRecordSkin",t.list.itemRenderer=ZaoYuRecordItem,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100561,t}return __extends(t,e),t.prototype.open=function(){this.observe(Encounter.postZaoYuRecord,this.updateData),Encounter.ins().sendInquireRecord(),this.updateData(Encounter.ins().inquireRecord),this.m_bg.init("ZaoYuRecordWin",GlobalConfig.jifengTiaoyueLg.st100560)},t.prototype.close=function(){this.removeEvents(),this.removeObserve()},t.prototype.updateData=function(e){function t(e,t){return e.time<t.time?1:e.time>t.time?-1:0}e.sort(t),this.list.dataProvider=new eui.ArrayCollection(e)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(ZaoYuRecordWin.prototype,"ZaoYuRecordWin"),ViewManager.ins().reg(ZaoYuRecordWin,LayerManager.UI_Popup),window.ZaoYuRecordWin=ZaoYuRecordWin;var ExpjadeModel=function(e){function t(){var t=e.call(this)||this;return t.m_AllExp=0,t.m_UseCount=0,t.m_DoubleCount=0,t.regNetMsg(S2cProtocol.sc_expjade_data,t._DoInitData),t.regNetMsg(S2cProtocol.sc_expjade_use_result,t._DoUseResult),t.regNetMsg(S2cProtocol.sc_expjade_addexp,t._DoAddExp),t}return __extends(t,e),Object.defineProperty(t.prototype,"allExp",{get:function(){return this.m_AllExp},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useCount",{get:function(){return this.m_UseCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"doubleCount",{get:function(){return this.m_DoubleCount},enumerable:!0,configurable:!0}),t.ins=function(){return e.ins.call(this)},t.prototype._DoInitData=function(e){this.m_AllExp=e.allExp,this.m_DoubleCount=e.doubleCount,this.m_UseCount=e.useCount,GameGlobal.MessageCenter.dispatch(MessageDef.EXPJADE_UPDATE)},t.prototype._DoUseResult=function(e){this.m_AllExp=e.allExp,this.m_DoubleCount=e.doubleCount,this.m_UseCount=e.useCount,GameGlobal.MessageCenter.dispatch(MessageDef.EXPJADE_UPDATE),UserTips.ins().showTips(StringUtils.addColor(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101739,[this.m_UseCount,t.GetCountPerDay()-this.m_UseCount]),Color.Green))},t.prototype._DoAddExp=function(e){this.m_AllExp=e.allExp;e.addExp;GameGlobal.MessageCenter.dispatch(MessageDef.EXPJADE_UPDATE)},t.prototype.SendUse=function(e){var t=new Sproto.cs_expjade_use_request;t.type=e,this.Rpc(C2sProtocol.cs_expjade_use,t)},t.prototype.getNextVip=function(){for(var e=GlobalConfig.ins("ZhuanShengConfig").vipLevel,t=0;e>t;++t){var i=GlobalConfig.ins("JingyanyuLevelConfig")[t];if(i.doubleCount>this.m_DoubleCount)return t}return e},t.GetCountPerDay=function(){return GlobalConfig.ins("JingyanyuLevelConfig")[GameGlobal.actorModel.vipLv].countPerDay},t.HasUseCount=function(){return Math.max(t.GetCountPerDay()-t.ins().useCount,0)},t}(BaseSystem);__reflect(ExpjadeModel.prototype,"ExpjadeModel"),window.ExpjadeModel=ExpjadeModel;var ExpjadePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ExpjadePanelSkin",t.item.mCallback=function(){},t}return __extends(t,e),t.prototype.open=function(){this.AddClick(this.getwayLabel01,this._OnClick),this.AddClick(this.getwayLabel02,this._OnClick),GameGlobal.MessageCenter.addListener(MessageDef.EXPJADE_UPDATE,this.UpdateContent,this),this.UpdateContent(),this.m_bg.init("ExpjadePanel",GlobalConfig.jifengTiaoyueLg.st101605)},t.prototype.close=function(){this.removeObserve(),this.removeEvents()},t.prototype._OnClickClose=function(){ViewManager.ins().close(this)},t.prototype._OnClick=function(e){null==this.jingyanyuCommonConfig&&(this.jingyanyuCommonConfig=GlobalConfig.ins("JingyanyuCommonConfig"));var t=this.jingyanyuCommonConfig.openLevel;if(GameGlobal.actorModel.level<t)return void UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101606,[t]));var i=ExpjadeModel.ins();if(i.useCount>=ExpjadeModel.GetCountPerDay())return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101607);switch(e.currentTarget){case this.getwayLabel01:ExpjadeModel.ins().SendUse(1);break;case this.getwayLabel02:var o=ExpjadeModel.ins().getNextVip();if(UserVip.ins().lv<o)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101608);ExpjadeModel.ins().SendUse(2)}var s=UserBag.ins().getBagItemById(this.jingyanyuCommonConfig.fullItemID);s&&1==s.count&&ViewManager.ins().close(this)},t.prototype.UpdateContent=function(){null==this.jingyanyuCommonConfig&&(this.jingyanyuCommonConfig=GlobalConfig.ins("JingyanyuCommonConfig"));var e=(GlobalConfig.ins("JingyanyuLevelConfig")[GameGlobal.actorModel.vipLv],this.jingyanyuCommonConfig),t=(ExpjadeModel.ins(),e.maxExp),i=GlobalConfig.jifengTiaoyueLg.st101611;this.exp01.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101609,[t,i]));var o=ExpjadeModel.ins().getNextVip();this.exp02.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101610,[2*t,o])),this.expLabel.text=t+"/"+e.maxExp,this.item.data=UserBag.ins().getBagItemById(this.jingyanyuCommonConfig.fullItemID)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(ExpjadePanel.prototype,"ExpjadePanel"),window.ExpjadePanel=ExpjadePanel;var ExpWelPanel=function(e){function t(t){var i=e.call(this)||this;return i.name=GlobalConfig.jifengTiaoyueLg.st101259,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101259,i.skinName="ExpWelPanelSkin",i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_TimeBar.labelDisplay.visible=!1,this.m_MianBtn.label=GlobalConfig.jifengTiaoyueLg.st101266,this.m_AllBtn.label=GlobalConfig.jifengTiaoyueLg.st101267},t.prototype.addViewEvent=function(){OnlineRewardsModel.ins().sendExpWelExpInitMsg(),MessageCenter.ins().addListener(MessageDef.EXPWEL_INIT_MSG,this.initData,this),this.m_MianBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMainBtn,this),this.m_AllBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAllBtn,this)},t.prototype.removeEvent=function(){MessageCenter.ins().removeListener(MessageDef.EXPWEL_INIT_MSG,this.initData,this),this.m_MianBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMainBtn,this),this.m_AllBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAllBtn,this)},t.prototype.open=function(){this.addViewEvent()},t.prototype.close=function(){OnlineRewardsModel.ins().expSelectIndex=1,this.removeTimer(),this.removeEvent()},t.prototype.release=function(){this.removeEvent()},t.prototype.initData=function(){var e=GlobalConfig.ins("ExpWelfareConfig"),t=0;this.nowHaveId=0;var i=OnlineRewardsModel.ins().expDic;for(var o in e){var s=e[o],n=this.m_BtnGroup.getChildAt(t);if(n&&n instanceof ExpWelSelectIcon&&n.setData(s),s.ID==OnlineRewardsModel.ins().expSelectIndex){this.m_Cont.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101260,[s.multiple]);var r=i.get(s.ID);r&&r.time<0?this.m_TimeLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101261,[s.multiple,GameServer.GetSurplusTime(0)]):this.m_TimeLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101261,[s.multiple,GameServer.GetSurplusTime(s.multipleTime+GameServer.serverTime)])}t++}for(var a=i.values,l=!1,h=0;h<a.length;h++)if(a[h].time>0){l=!0,this.nowHaveId=a[h].id;break}1==l?(this.addTimer(),this.m_MianBtn.enabled=!1,this.m_AllBtn.enabled=!0):(this.m_TimeBar.value=0,this.removeTimer(),this.m_MianBtn.enabled=!0,this.m_AllBtn.enabled=!1)},t.prototype.addTimer=function(){this.removeTimer(),TimerManager.ins().doTimer(1e3,0,this.refTime,this),this.refTime()},t.prototype.removeTimer=function(){TimerManager.ins().remove(this.refTime,this)},t.prototype.refTime=function(){var e=GlobalConfig.ins("ExpWelfareConfig"),t=e[this.nowHaveId];if(t){var i=OnlineRewardsModel.ins().expDic.get(this.nowHaveId);this.m_TimeLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101261,[t.multiple,GameServer.GetSurplusTime(i.time)]);var o=Math.max(0,(i.time||0)-GameServer.serverTime);0>=o&&(o=0,this.removeTimer(),i.time=-1,OnlineRewardsModel.ins().isHave=!1,GameGlobal.MessageCenter.dispatch(MessageDef.EXPWEL_INIT_MSG)),this.m_TimeBar.value=t.multipleTime-o,this.m_TimeBar.maximum=t.multipleTime}},t.prototype.onClickMainBtn=function(){var e=OnlineRewardsModel.ins().expSelectIndex,t=OnlineRewardsModel.ins().expDic.get(e);0==t.time?OnlineRewardsModel.ins().sendExpWelExpApplyMsg(e):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101262)},t.prototype.onClickAllBtn=function(){if(this.nowHaveId>0){var e=GlobalConfig.ins("ExpWelfareConfig"),t=e[this.nowHaveId];if(t){var i=OnlineRewardsModel.ins().expDic.get(this.nowHaveId),o=Math.max(0,(i.time||0)-GameServer.serverTime),s=Math.floor(o/60)*t.completeCost,n=GameLogic.ins().actorModel.yb;WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101263,[s]),function(){n>=s?OnlineRewardsModel.ins().sendExpWelExpFinishMsg():UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008)},this)}}else UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101264)},t.prototype.UpdateContent=function(){},t.prototype.CheckRedPoint=function(){return OnlineRewardsModel.ins().checkRedPoint()},t}(BaseView);__reflect(ExpWelPanel.prototype,"ExpWelPanel",["ICommonWindowTitle"]),window.ExpWelPanel=ExpWelPanel;var ExpWelSelectIcon=function(e){function t(){var t=e.call(this)||this;return t.skinName="ExpWelSelectIconSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.setData=function(e){this.m_CompGroup.visible=!1,this.configData=e,OnlineRewardsModel.ins().expSelectIndex==e.ID?this.m_SelectImg.visible=!0:this.m_SelectImg.visible=!1;var t=OnlineRewardsModel.ins().expDic.get(e.ID);-1==t.time?this.m_CompGroup.visible=!0:this.m_Cont.text=e.multiple+GlobalConfig.jifengTiaoyueLg.st101265,this.m_bgImg.source="pf_yewai_0"+e.ID+"_png"},t.prototype.onClick=function(){this.configData&&0==OnlineRewardsModel.ins().isHave&&(OnlineRewardsModel.ins().expSelectIndex=this.configData.ID,GameGlobal.MessageCenter.dispatch(MessageDef.EXPWEL_INIT_MSG))},t}(eui.Component);__reflect(ExpWelSelectIcon.prototype,"ExpWelSelectIcon"),window.ExpWelSelectIcon=ExpWelSelectIcon;var BaseRaid=function(){function e(){this.mReliveChange=null,this.mReliveChangeObj=null,this.m_AutoClear=!1,GameGlobal.MessageCenter.addListener(MessageDef.FUBEN_CHANGE,this._DoFbChange,this)}return e.prototype._DoFbChange=function(){},e.prototype.DoReliveEvent=function(){this.mReliveChange&&this.mReliveChange.call(this.mReliveChangeObj)},Object.defineProperty(e.prototype,"AutoClear",{get:function(){return this.m_AutoClear},set:function(e){this.m_AutoClear=e},enumerable:!0,configurable:!0}),e.prototype.ShowRewardPanel=function(){},e.prototype.GetReliveSurplusTime=function(){return Math.max(RaidMgr.ins().GetReliveTimestamp()-GameServer.serverTime,0)},e.prototype.AutoRelive=function(){if(this.CheckIsDead()){if(this.m_AutoClear){if(this.CheckIsMoreMoney())return this.SendReliveCd(),!1;UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101699),this.m_AutoClear=!1}return!0}return!1},e.prototype.SendReliveCd=function(){this.CheckIsDead()?this._SendReliveCd():console.log(GlobalConfig.jifengTiaoyueLg.st101741+" => ",this.GetFbType())},e.prototype.CheckIsDead=function(){return RaidMgr.ins().GetReliveTimestamp()>GameServer.serverTime},e.prototype.CheckIsMoreMoney=function(){return GameLogic.ins().actorModel.yb>=this.GetReliveYb()},e.prototype._SendReliveCd=function(){GameSocket.ins().Rpc(C2sProtocol.sc_raid_clear_cd)},e.prototype.GetReliveYb=function(){return 0},e.prototype.GetFbType=function(){return 0},e.GetRaidByType=function(t){var i=this._Dict[t];if(!i){switch(t){case UserFb.FB_TYPE_GUILD_BOSS:i=new GuildBossRaid;break;default:return null==this.m_Raid&&(this.m_Raid=new e),this.m_Raid}this._Dict[t]=i}return i},e._Dict={},e}();__reflect(BaseRaid.prototype,"BaseRaid");var GuildBossRaid=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.GetFbType=function(){return UserFb.FB_TYPE_GUILD_BOSS},t.prototype.GetReliveYb=function(){return GlobalConfig.ins("PublicGuildBossBaseConfig").reburnPay},t.prototype.ShowRewardPanel=function(){ViewManager.ins().open(GuildBossRewardPanel)},t}(BaseRaid);__reflect(GuildBossRaid.prototype,"GuildBossRaid"),window.BaseRaid=BaseRaid,window.GuildBossRaid=GuildBossRaid;var FbModel=function(){function e(){}return e.prototype.parser=function(e){this.fbID=e.fbId,this.useCount=e.useCount,this.vipBuyCount=e.vipBuyCount,this.vipHoldCount=e.vipHoldCount},e.prototype.getSaoDangCount=function(){null==this.dailyFubenConfig&&(this.dailyFubenConfig=GlobalConfig.dailyFubenConfig);var e=this.dailyFubenConfig[this.fbID],t=e.vipBuyCount[UserVip.ins().lv],i=t+e.freeCount-this.useCount;return i},e.prototype.getCount=function(){null==this.dailyFubenConfig&&(this.dailyFubenConfig=GlobalConfig.dailyFubenConfig);var e=this.dailyFubenConfig[this.fbID];if(e.zsLevel>0){if(UserZs.ins().lv<e.zsLevel)return 0}else if(GameLogic.ins().actorModel.level<e.levelLimit)return 0;return this.dailyFubenConfig[this.fbID].freeCount-this.useCount},e.prototype.getNextReward=function(){null==this.dailyFubenConfig&&(this.dailyFubenConfig=GlobalConfig.dailyFubenConfig);var e=(this.dailyFubenConfig[this.fbID].freeCount+this.vipBuyCount,this.dailyFubenConfig[this.fbID].desParam1);return e},e.prototype.getNextVip=function(){null==this.dailyFubenConfig&&(this.dailyFubenConfig=GlobalConfig.dailyFubenConfig);var e=this.dailyFubenConfig[this.fbID];for(var t in e.vipBuyCount)if(this.vipBuyCount-e.vipBuyCount[t]<0)return parseInt(t);return-1},e.prototype.getResetCount=function(){var e=UserVip.ins().lv;null==this.dailyFubenConfig&&(this.dailyFubenConfig=GlobalConfig.dailyFubenConfig);var t=this.dailyFubenConfig[this.fbID];return t.vipBuyCount[e]-(this.useCount-t.freeCount)},e.prototype.getVipResetCount=function(e){null==this.dailyFubenConfig&&(this.dailyFubenConfig=GlobalConfig.dailyFubenConfig);var t=this.dailyFubenConfig[this.fbID];return t.vipBuyCount[e]-(this.useCount-t.freeCount)},e}();__reflect(FbModel.prototype,"FbModel"),window.FbModel=FbModel;var RaidMgr=function(e){function t(){var t=e.call(this)||this;return t.m_ReliveCd=0,t.regNetMsg(S2cProtocol.sc_raid_reborn_cd,t._DoRebornCd),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.DoFbChange=function(){this.m_ReliveCd=0},t.prototype.GetReliveTimestamp=function(){return this.m_ReliveCd},t.prototype.GetReliveSurplusTime=function(){return Math.max(this.GetReliveTimestamp()-GameServer.serverTime,0)},t.prototype.IsDead=function(){return this.GetReliveSurplusTime()>0},t.prototype._DoRebornCd=function(e){this.m_ReliveCd=GameServer.serverTime+Math.floor(.001*e.cdtime),BaseRaid.GetRaidByType(GameMap.fbType).DoReliveEvent()},t}(BaseSystem);__reflect(RaidMgr.prototype,"RaidMgr"),window.RaidMgr=RaidMgr;var UserFb=function(e){function t(){var t=e.call(this)||this;return t.fbModel={},t._guanqiaID=-1,t.rewards=[],t.maxLen=0,t.waveCD=0,t.guanqiaReward=[],t.monsterCount=0,t.monsterID=0,t.needWave=0,t.bossID=0,t.desc="",t.refMonsterPos=[],t.bossReward=[],t.refEncounterPos=[],t.isNoWait=!1,t.m_KillMonsterCount=0,t.m_FisthEnter10=!1,t.m_FisthEnter11=!0,t.rewardNum=0,t.sysId=PackageID.Guanqia,t.regNetMsg(S2cProtocol.sc_raid_role_all_die,t.doRoleAllDie),t.regNetMsg(S2cProtocol.sc_raid_info_init,t.doFbInfoInit),t.regNetMsg(S2cProtocol.sc_raid_update_info,t.doUpDataInfo),t.regNetMsg(S2cProtocol.sc_raid_time,t.doFbTime),t.regNetMsg(S2cProtocol.sc_raid_boss_box_num,t.doBossBoxNum),t.regNetMsg(S2cProtocol.sc_raid_chapter_init_info,t.doGuanqiaInfo),t.regNetMsg(S2cProtocol.sc_raid_chapter_wave_data,t.doWaveData),t.regNetMsg(S2cProtocol.sc_raid_chapter_boss_result,t.doBossResult),t.regNetMsg(S2cProtocol.sc_raid_chapter_reward,t.doGuanqiaReward),t.regNetMsg(S2cProtocol.sc_raid_chapter_offline_reward,t.doOfflineReward),t.regNetMsg(S2cProtocol.sc_raid_guardian_res,t.getQuanQiaBossInit),t}return __extends(t,e),Object.defineProperty(t.prototype,"Desc",{get:function(){return this.desc},enumerable:!0,configurable:!0}),t.ins=function(){return e.ins.call(this)},t.prototype.getFbDataById=function(e){return this.fbModel[e]},t.prototype.hasCount=function(){var e=this.fbModel;for(var t in e){var i=e[t];if(null==this.dailyFubenConfig&&(this.dailyFubenConfig=GlobalConfig.dailyFubenConfig),i){if(this.dailyFubenConfig[i.fbID].bossId)continue;var o=this.fbModel[i.fbID].getCount();if(o>0)return!0}}return!1},t.prototype.getCount=function(){var e=0,t=this.fbModel;null==this.dailyFubenConfig&&(this.dailyFubenConfig=GlobalConfig.dailyFubenConfig);for(var i in t){var o=t[i];o&&!this.dailyFubenConfig[o.fbID].bossId&&(e+=o.getCount())}return e},t.prototype.doRoleAllDie=function(e){ViewManager.ins().open(ResultWin,0)},t.prototype.doFbInfoInit=function(e){for(var t=0;t<e.raidModel.length;t++){var i=new FbModel;i.parser(e.raidModel[t]),this.fbModel[i.fbID]=i}MessageCenter.ins().dispatch(MessageDef.FB_COUNT_UPDATE)},t.prototype.sendCallBossPlay=function(e){var t=new Sproto.cs_raid_call_boss_play_request;t.id=e,this.Rpc(C2sProtocol.cs_raid_call_boss_play,t)},t.prototype.sendChallenge=function(e){var t=new Sproto.cs_raid_challenget_request;t.fbID=e,this.Rpc(C2sProtocol.cs_raid_challenget,t)},t.prototype.doUpDataInfo=function(e){this.fbModel[e.raidData.fbId]&&this.fbModel[e.raidData.fbId].parser&&this.fbModel[e.raidData.fbId].parser(e.raidData),MessageCenter.ins().dispatch(MessageDef.FB_COUNT_UPDATE)},t.prototype.sendAddCount=function(e){var t=new Sproto.cs_raid_add_count_request;t.fbID=e,this.Rpc(C2sProtocol.cs_raid_add_count,t)},t.prototype.doFbTime=function(e){},t.prototype.doBossBoxNum=function(e){this.bossCallNum=e.bossCallNum},Object.defineProperty(t.prototype,"guanqiaID",{get:function(){return this._guanqiaID},set:function(e){this._guanqiaID!=e&&(this._guanqiaID=e,this.bossIsChallenged=!1,this.postGuanKaIdChange(),OtherAIModel.getInstance.setPoint(),LocalStorageData.setItem(LocalDataKey.guanqiaId+"_",e+""))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wave",{get:function(){return this.m_Wave},set:function(e){this.m_Wave!=e&&(this.m_Wave=e,this.postWaveChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"killMonsterCount",{get:function(){return this.m_KillMonsterCount},set:function(e){this.m_KillMonsterCount!=e&&(this.m_KillMonsterCount=e,GameGlobal.MessageCenter.dispatch(MessageDef.RAID_KILL_MONSTER_COUNT))},enumerable:!0,configurable:!0}),t.prototype.isShowBossPK=function(){return-1==this.guanqiaID?!1:(null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig")),this.m_KillMonsterCount>=this.chaptersConfig[this.guanqiaID].bossNeedWave&&0==GameMap.fubenID)},t.prototype.getNeedWave=function(){return-1!=this.guanqiaID?(null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig")),Math.max(this.chaptersConfig[this.guanqiaID].bossNeedWave-this.m_KillMonsterCount,0)):void 0},Object.defineProperty(t.prototype,"killMonstType",{get:function(){return null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig")),this.chaptersConfig[this.guanqiaID]&&this.chaptersConfig[this.guanqiaID].bossNeedWave%2==0?2:3},enumerable:!0,configurable:!0}),t.prototype.startNum=function(e){switch(null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig")),e){case 2:return this.chaptersConfig[this.guanqiaID]?this.m_KillMonsterCount>=this.chaptersConfig[this.guanqiaID].bossNeedWave?2:this.m_KillMonsterCount>=this.chaptersConfig[this.guanqiaID].bossNeedWave/2?1:0:0;default:return this.chaptersConfig[this.guanqiaID]?this.m_KillMonsterCount>=this.chaptersConfig[this.guanqiaID].bossNeedWave?3:this.m_KillMonsterCount>=this.chaptersConfig[this.guanqiaID].bossNeedWave/3*2?2:this.m_KillMonsterCount>=this.chaptersConfig[this.guanqiaID].bossNeedWave/3?1:0:0}},t.prototype.isTwoStar=function(){return this.chaptersConfig[this.guanqiaID].bossNeedWave%2==0?!0:!1},t.prototype.checkGuanKaMax=function(){if(0!=this.maxLen)return this.maxLen;var e=GlobalConfig.ins("ChaptersConfig");for(var t in e)e[t]&&++this.maxLen;return this.maxLen},t.prototype.getRewardsPop=function(){return this.rewards.pop()},t.prototype.doGuanqiaInfo=function(e){var t=(this.guanqiaID,e.guanqiaID);t>=this.checkGuanKaMax()&&(t=this.maxLen),this.guanqiaID=t,this.guanqiaID<10&&(this.m_FisthEnter10=!0),this.wave=e.wave,this.killMonsterCount=e.killMonsterCount,this.monsterCount=e.monsterCount,this.monsterID=e.monsterID,this.needWave=e.needWave,this.bossID=e.bossID,this.desc=e.desc,this.refMonsterPos=e.refMonsterPos,this.refEncounterPos=e.refEncounterPos,this.bossReward=e.bossReward,GuanQiaModel.getInstance.isCanNextLayer=e.nextMap,null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig"));var i=this.chaptersConfig[this.guanqiaID];if(i){var o=GlobalConfig.ins("ScenesConfig")[i.sid];o&&(o.rPos&&(this.refMonsterPos=o.rPos),o.zyPos&&(this.refEncounterPos=o.zyPos))}TimerManager.ins().doNext(this._CheckGuide,this),GameGlobal.MessageCenter.dispatch(MessageDef.GUANQIA_CHANGE)},t.prototype._CheckGuide=function(){var e=SubRoles.ins().getSubRoleByIndex(0);if(GameMap.IsNoramlLevel()&&t.ins().guanqiaID>1&&e&&0==e.equipsData[EquipPos.WEAPON].item.configID&&!GuideUtils.ins().isShow()&&ViewManager.ins().getView(PlayFunView).guideUpgrade(),this.m_FisthEnter10&&GameMap.IsNoramlLevel()&&5==t.ins().guanqiaID){var i=ViewManager.ins().getView(PlayFunView);i&&(this.m_FisthEnter10=!1,i.ShowGuanqiaAuto())}this.m_FisthEnter11&&t.ins().guanqiaID>=11&&(this.m_FisthEnter11=!1,Shop.ins().shopNorefrush&&GameGlobal.MessageCenter.dispatch(MessageDef.SHOP_REFRESH,!0))},t.prototype.postGuanKaIdChange=function(){},t.prototype.sendWaveComplete=function(){var e=new Sproto.cs_raid_wave_complete_request;e.killCount=this.killMonsterCount,this.Rpc(C2sProtocol.cs_raid_wave_complete,e)},t.prototype.sendWaveMonster=function(){this.killMonsterCount=this.killMonsterCount+1},t.prototype.sendPKBoss=function(){this.Rpc(C2sProtocol.cs_raid_pk_boss,new Sproto.cs_raid_pk_boss_request)},t.prototype.doWaveData=function(e){this.wave=e.wave,this.rewards=e.rewards,this.wave%13==0&&0!=this.wave&&OtherAIModel.getInstance.refreshAll(),GameLogic.ins().postHookStateChange(GameLogic.HOOK_STATE_FIND_ENMENY),GameLogic.ins().createGuanqiaMonster()},t.prototype.postWaveChange=function(){},t.prototype.doBossResult=function(e){TimerManager.ins().doTimer(300,1,function(){t.ins().doTimerBossResult(e.result,e.rewards)},t.ins())},t.prototype.doTimerBossResult=function(e,i){var o=this,s=GameMap.fbType==t.FB_TYPE_PERSONAL_BOSS||GameMap.fbType==t.FB_TYPE_GUANQIABOSS||GameMap.fbType==t.FB_TYPE_MATERIAL;if(s){this.rewardNum=0;for(var n=0,r=i.length;r>n;++n){var a=i[n];0==a.type&&1!=a.id&&2!=a.id||(this.rewardNum++,Encounter.postCreateDrop(0!=DropHelp.tempDropPoint.x?DropHelp.tempDropPoint.x:Const.PixelToPos(EntityManager.ins().getNoDieRole().x),0!=DropHelp.tempDropPoint.y?DropHelp.tempDropPoint.y:Const.PixelToPos(EntityManager.ins().getNoDieRole().y),a))}}if(e){var l=function(){o.sendGetBossReward();var e=null;if(41001==GameMap.fubenID)e=function(){ViewManager.ins().open(LadderWin,2)};else switch(GameMap.fbType){case t.FB_TYPE_TRYROAD:e=function(){ViewManager.ins().open(FbWin,5)};break;case t.FB_TYPE_TIAOZHAN:e=function(){ViewManager.ins().open(FbWin,1)};break;case t.FB_TYPE_PK:e=function(){var e=ViewManager.ins().open(ZaoYuItemWin);e.pkGetMiBaoMovieClip()};break;case t.FB_TYPE_PERSONAL_BOSS:e=function(){ViewManager.ins().open(BossWin,0)};break;case t.FB_TYPE_MATERIAL:e=function(){ViewManager.ins().open(FbWin)};break;case t.FB_TYPE_DARTCAR:e=function(){ViewManager.ins().open(LadderWin,1)};break;case t.FB_RING_BOSS:e=function(){ViewManager.ins().open(RingMainWin,2)};break;case t.FB_TYPE_GUILD_FB:e=function(){ViewManager.ins().open(GuildMap)};break;case t.FB_TYPE_MIJING:e=function(){ViewManager.ins().open(FbWin,2)};break;case t.FB_TYPE_CLIMB_PET:e=function(){ViewManager.ins().open(FbWin,3)};break;case t.FB_TYPE_CLIMB_MOUNT:e=function(){ViewManager.ins().open(FbWin,4)};break;case t.FB_TYPE_HEROBATTLE:e=function(){ViewManager.ins().open(ActivityWin,303)}}if(1==t.ins().isNoWait)t.ins().isNoWait=!1,GameMap.fbType==t.FB_TYPE_CLIMB_PET||GameMap.fbType==t.FB_TYPE_CLIMB_MOUNT?ViewManager.ins().open(ClimbResultWin,e,GameMap.fbType):GameMap.fbType==t.FB_TYPE_TIAOZHAN?ViewManager.ins().open(ChallengeResultWin,e):GameMap.fbType==t.FB_TYPE_TRYROAD?ViewManager.ins().open(DrillChallengeResultWin,e):ViewManager.ins().open(ResultWin,1,i,GlobalConfig.jifengTiaoyueLg.st100797,e);else var s=egret.setTimeout(function(){egret.clearTimeout(s),GameMap.fbType==t.FB_TYPE_CLIMB_PET||GameMap.fbType==t.FB_TYPE_CLIMB_MOUNT?ViewManager.ins().open(ClimbResultWin,e,GameMap.fbType):GameMap.fbType==t.FB_TYPE_TIAOZHAN?ViewManager.ins().open(ChallengeResultWin,e):GameMap.fbType==t.FB_TYPE_TRYROAD?ViewManager.ins().open(DrillChallengeResultWin,e):ViewManager.ins().open(ResultWin,1,i,GlobalConfig.jifengTiaoyueLg.st100797,e)},o,800)};s?(DropHelp.addCompleteFunc(l,this),DropHelp.start()):l()}else if(GameMap.fbType==t.FB_TYPE_GUANQIABOSS&&PlayFun.ins().closeAuto(),this.CheckFirstRecharge(t.FB_TYPE_PERSONAL_BOSS,FuncOpenModel.SAVE_DATA_BOSS01),this.CheckFirstRecharge(t.FB_TYPE_GUANQIABOSS,FuncOpenModel.SAVE_DATA_BOSS02),GameMap.fbType==t.FB_TYPE_MIJING){var h=function(){ViewManager.ins().open(FbWin,2)};ViewManager.ins().open(ResultWin,0,null,null,h)}else if(GameMap.fbType==t.FB_TYPE_HEROBATTLE){var h=function(){ViewManager.ins().open(ActivityWin,303)};ViewManager.ins().open(ResultWin,0,null,null,h)}else ViewManager.ins().open(ResultWin,0)},t.prototype.CheckFirstRecharge=function(e,t){GameMap.fbType==e&&Recharge.ins().getFirstRechargeState()&&!FuncOpenModel.HasSaveData(t)&&(FuncOpenModel.SAVE_DATA_FALG=!0,FuncOpenModel.SetSaveData(t))},t.prototype.sendGetBossReward=function(){this.Rpc(C2sProtocol.cs_raid_get_boss_reward,new Sproto.cs_raid_get_boss_reward_request)},t.prototype.sendExitFb=function(){this.Rpc(C2sProtocol.cs_raid_exit_raid,new Sproto.cs_raid_exit_raid_request),UserBoss.ins().sendInfo()},t.prototype.sendGetAward=function(e){var t=new Sproto.cs_raid_get_award_request;t.id=e,this.Rpc(C2sProtocol.cs_raid_get_award,t)},t.prototype.doGuanqiaReward=function(e){null!=e&&(this.guanqiaReward=e.result,this.postZhangJieAwardChange(),this.postGuanKaIdChange())},t.prototype.postZhangJieAwardChange=function(){},t.prototype.senddoGuanqiaWroldReward=function(e){var t=new Sproto.cs_raid_get_world_award_request;t.pass=e,this.Rpc(C2sProtocol.cs_raid_get_world_award,t)},t.prototype.doOfflineReward=function(e){ViewManager.ins().open(OfflineRewardWin,e)},t.prototype.sendGoNextChapter=function(){var e=new Sproto.cs_raid_next_chapter_req_request;this.Rpc(C2sProtocol.cs_raid_next_chapter_req,e)},t.prototype.sendGetQuanQiaBossInit=function(){var e=new Sproto.cs_raid_guardian_req_request;this.Rpc(C2sProtocol.cs_raid_guardian_req,e)},t.prototype.sendQuanQiaBossBattle=function(e){var t=new Sproto.cs_raid_guardian_fight_req_request;t.id=e,this.Rpc(C2sProtocol.cs_raid_guardian_fight_req,t)},t.prototype.sendQuanQiaBossQuick=function(e){var t=new Sproto.cs_raid_guardian_quick_req_request;t.id=e,this.Rpc(C2sProtocol.cs_raid_guardian_quick_req,t)},t.prototype.sendQuanQiaBuyTili=function(){var e=new Sproto.cs_raid_guardian_tili_req_request;this.Rpc(C2sProtocol.cs_raid_guardian_tili_req,e)},t.prototype.getQuanQiaBossInit=function(e){var t=GuanQiaModel.getInstance;t.tiliNum=e.tili,t.info=e.info,t.time=e.time,t.tiliBuyNum=e.bought,GameGlobal.MessageCenter.dispatch(GuanQiaEvt.GUANQIA_UPDATE_MSG)},t.prototype.GetWaveMonsterCount=function(){return this.monsterCount},t.prototype.GetRPos=function(){return this.refMonsterPos},t.prototype.CheckFb=function(){return 0==GameMap.fbType},t.FB_TYPE_GUANQIABOSS=1,t.FB_TYPE_MATERIAL=2,t.FB_TYPE_PERSONAL_BOSS=6,t.FB_TYPE_PUBLIC_BOSS=7,t.FB_TYPE_GUILD_BOSS=18,t.FB_TYPE_TIAOZHAN=9,t.FB_TYPE_ZHUANSHENGBOSS=10,t.FB_TYPE_GUILD_ROBBER=13,t.FB_TYPE_GUILD_FB=13,t.FB_TYPE_GUILD_WAR=14,t.FB_TYPE_PK=11,t.FB_ID_TYPE_WAR=28001,t.FB_TYPE_KFBOSS=28,t.FB_TYPE_WORLDBOSS=26,t.FB_TYPE_XBBOSS=31,t.FB_TYPE_DARTCAR=32,t.FB_TYPE_TRYROAD=29,t.FB_GOLD_ON_HOOK=33,t.FB_RING_BOSS=35,t.FB_TYPE_HOME_BOSS=37,t.FB_TYPE_TENKILL=38,t.FB_TYPE_MIJING=40,t.FB_TYPE_CLIMB_PET=1001,t.FB_TYPE_CLIMB_MOUNT=1002,t.FB_TYPE_CITYBOSS=1003,t.FB_TYPE_SYBOSS=1004,t.FB_TYPE_HEROBATTLE=1005,t.FB_TYPE_TEAM=1006,t.FB_TYPE_CHAOSBATTLE=1007,t}(BaseSystem);__reflect(UserFb.prototype,"UserFb"),MessageCenter.compile(UserFb),window.UserFb=UserFb;var UserFb2=function(e){function t(){var t=e.call(this)||this;return t.fbChallengeId=1,t.mPreLevel=-1,t.mPreStatus=!1,t.levelStatus1=0,t.levelStatus2=0,t.sysId=PackageID.FbChallenge,t.regNetMsg(S2cProtocol.sc_challenge_raid_update_info,t.doUpDataInfo),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendChallenge=function(){this.Rpc(C2sProtocol.cs_challenge_raid_send)},t.prototype.SendChallengeReward=function(){this.Rpc(C2sProtocol.cs_challenge_raid_day_reward)},t.prototype.doUpDataInfo=function(e){this.fbChallengeId=e.fbID,this.mPreLevel=e.level,this.mPreStatus=e.status,this.levelStatus1=e.levelStatus1,this.levelStatus2=e.levelStatus2,GameGlobal.MessageCenter.dispatch(MessageDef.CHALLENGE_UPDATE_INFO)},Object.defineProperty(t.prototype,"commonLv",{get:function(){var e=GlobalConfig.ins("FbChallengeStageAwardConfig");for(var t in e){var i=parseInt(t);if(i>this.levelStatus1)return i}return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commonLv2",{get:function(){var e=GlobalConfig.ins("FbChallengeStageAwardConfig");for(var t in e){var i=parseInt(t);if(i>this.fbChallengeId)return i}return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tagerLv",{get:function(){var e=GlobalConfig.ins("FbChallengeTaskAwardConfig");for(var t in e){var i=parseInt(t);if(i>this.levelStatus2)return i}return null},enumerable:!0,configurable:!0}),t.prototype.IsRed=function(){var e=GlobalConfig.fbChallengeConfig[this.mPreLevel];
return e?!t.ins().mPreStatus:!1},t.prototype.sendGetRewad=function(e,t){var i=new Sproto.cs_challenge_raid_new_reward_request;i.ctype=e,i.level=t,this.Rpc(C2sProtocol.cs_challenge_raid_new_reward,i)},t}(BaseSystem);__reflect(UserFb2.prototype,"UserFb2"),window.UserFb2=UserFb2;var DailyFbPanel=function(e){function t(t){var i=e.call(this)||this;return i.fbDataList=[3003,3002,3007,3008,3004,3006,3011,3005,3009,3010,3001],i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100349,i.skinName="DailyFbPanelSkin",i}return __extends(t,e),t.prototype.childrenCreated=function(){this.fbDataList=GlobalConfig.ins("UniversalConfig").fbOrder,this.fbList.itemRenderer=FbItem,this.fbList.dataProvider=new eui.ArrayCollection(this.fbDataList),this.fbList.useVirtualLayout=!1},t.prototype.open=function(){this.observe(MessageDef.FB_COUNT_UPDATE,this.UpdateContent),this.fbList.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.close=function(){this.fbList.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(e){switch(e.currentTarget){default:if(e.target instanceof eui.Button){var t=e.target.parent.data;null==this.dailyFubenConfig&&(this.dailyFubenConfig=GlobalConfig.dailyFubenConfig);var i=this.dailyFubenConfig[t];if("add"==e.target.name){var o=UserVip.ins().lv,s=i.vipBuyCount[o];if(0>=s)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100347);var n=i.buyPrice[UserFb.ins().getFbDataById(t).vipBuyCount];if(!(GameLogic.ins().actorModel.yb>=n))return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008);var r=this.fbDataList.lastIndexOf(t);this.fbList.getChildAt(r).starSaoDang()}else if("vip"==e.target.name)ViewManager.ins().open(VipWin);else{var a=UserFb.ins().getFbDataById(t);a&&a.getCount()<=0?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100348):i.funcOpenId&&!Deblocking.Check(i.funcOpenId)||(UserFb.ins().sendChallenge(t),ViewManager.ins().close(FbWin))}}}},t.prototype.UpdateContent=function(){this.fbList.dataProvider.replaceAll(this.fbDataList)},t}(BaseView);__reflect(DailyFbPanel.prototype,"DailyFbPanel",["ICommonWindowTitle"]),window.DailyFbPanel=DailyFbPanel;var FBChallengePanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100362,t.skinName="ChallengeFbSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.simpleRankPanel.rankType=RankDataType.TYPE_COPY,this.passAllTip.text=GlobalConfig.jifengTiaoyueLg.st100366,this.challengeBtn.label=GlobalConfig.jifengTiaoyueLg.st100376},t.prototype.open=function(){this.challengeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.challenge,this),this.AddClick(this.movieLayer,this._OnClick),this.AddClick(this.m_Group1,this.getRewad1),this.AddClick(this.m_Group2,this.getRewad2),this.AddClick(this.m_SQBtn,this.onClickSQ),this.observe(MessageDef.CHALLENGE_UPDATE_INFO,this.UpdateContent),this.simpleRankPanel.open(),this.updateData()},t.prototype.close=function(){this.effMc2&&(DisplayUtils.dispose(this.effMc2),this.effMc2=null),this.effMc1&&(DisplayUtils.dispose(this.effMc1),this.effMc1=null),this.challengeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.challenge,this),this.simpleRankPanel.close(),MessageCenter.ins().removeAll(this)},t.prototype._OnClick=function(e){var t=this;switch(e.target){case this.movieLayer:var i=GlobalConfig.fbChallengeConfig[UserFb2.ins().mPreLevel];i&&ViewManager.ins().open(GetRewardPanel,GlobalConfig.jifengTiaoyueLg.st100367,GlobalConfig.jifengTiaoyueLg.st100368+UserFb2.ins().mPreLevel+GlobalConfig.jifengTiaoyueLg.st100369,RewardData.ToRewardDatas(i.dayAward),function(){UserFb2.ins().mPreStatus||(UserFb2.ins().SendChallengeReward(),t.playEffect(t.mc1,!1))},!UserFb2.ins().mPreStatus)}},t.prototype.getRewad1=function(){GuideUtils.ins().next(this.m_Group1),UserFb2.ins().fbChallengeId>=UserFb2.ins().commonLv?UserFb2.ins().sendGetRewad(1,UserFb2.ins().commonLv):UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102100,[UserFb2.ins().commonLv]))},t.prototype.getRewad2=function(){UserFb2.ins().fbChallengeId>=UserFb2.ins().tagerLv?UserFb2.ins().sendGetRewad(2,UserFb2.ins().tagerLv):UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102100,[UserFb2.ins().tagerLv]))},t.prototype.openRankWin=function(){Rank.ins().rankModel[RankDataType.TYPE_COPY]&&Rank.ins().rankModel[RankDataType.TYPE_COPY].getDataList().length>0?ViewManager.ins().open(FbAndLevelsRankWin,RankDataType.TYPE_COPY):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100370)},t.prototype.updateData=function(){var e=CommonUtils.getObjectLength(GlobalConfig.fbChallengeConfig);UserFb2.ins().fbChallengeId>=e?(this.passAllTip.visible=!0,this.challengeBtn.visible=!1):(e=UserFb2.ins().fbChallengeId,this.passAllTip.visible=!1,this.challengeBtn.visible=!0);var t=UserFb2.ins().fbChallengeId,i=GlobalConfig.fbChallengeConfig[t+1];this.m_NextGroup.visible=!0,this.m_LvLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100386,[t+1])+GlobalConfig.jifengTiaoyueLg.st101386,this.m_NowLvLab.text=t+1+"",this.m_NextLvLab.text=t+2+"",this.m_TipsLab.visible=!0,i||(i=GlobalConfig.fbChallengeConfig[t],this.m_NextGroup.visible=!1,this.m_LvLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100386,[t])+GlobalConfig.jifengTiaoyueLg.st101386,this.m_NowLvLab.text=t+"",this.m_TipsLab.visible=!1);var o="";i.zsLv&&(o+=StringUtils.addColor(i.zsLv+GlobalConfig.jifengTiaoyueLg.st100067,GameGlobal.actorModel.zsLv>=i.zsLv?Color.Green:Color.Red)),i.lv&&(o.length>0&&(o+=GlobalConfig.jifengTiaoyueLg.st100374),o+=StringUtils.addColor(i.lv+GlobalConfig.jifengTiaoyueLg.st100093,GameGlobal.actorModel.level>=i.lv?Color.Green:Color.Red)),this.m_TipsLab.textFlow=TextFlowMaker.generateTextFlow(GlobalConfig.jifengTiaoyueLg.st100375+o),this.m_List.dataProvider=new eui.ArrayCollection(i.firstAward),this.effMc1&&(this.effMc1.visible=!1);var s=GlobalConfig.ins("FbChallengeStageAwardConfig")[UserFb2.ins().commonLv];if(s){var n=s.taskAward[0];this.m_ItemBase1.data={type:n.type,id:n.id,count:n.count,isShowName:1},this.m_ItemBase1.IsShowRedPoint(!1),this.m_Cont1.text=s.fbNum+GlobalConfig.jifengTiaoyueLg.st102101,this.m_Cont1.textColor=Color.White,this.m_Group1.visible=!0,this.m_Group1.touchChildren=!0,t+1>UserFb2.ins().commonLv&&(this.m_ItemBase1.IsShowRedPoint(!0),this.m_Cont1.text=GlobalConfig.jifengTiaoyueLg.st101344,this.m_Cont1.textColor=Color.White,this.m_Group1.touchChildren=!1,this.effMc1=ViewManager.ins().createEff(this.effMc1,this.m_EffGroup1,"quaeff5",-1),this.effMc1.visible=!0)}else this.m_Group1.visible=!1;this.effMc2&&(this.effMc2.visible=!1);var r=GlobalConfig.ins("FbChallengeTaskAwardConfig")[UserFb2.ins().tagerLv];if(r){var n=r.taskAward[0];this.m_ItemBase2.data={type:n.type,id:n.id,count:n.count,isShowName:1},this.m_Cont2.text=r.fbNum+GlobalConfig.jifengTiaoyueLg.st102101,this.m_Group2.visible=!0,this.m_Group2.touchChildren=!0,this.m_ItemBase2.IsShowRedPoint(!1),t+1>UserFb2.ins().tagerLv&&(this.m_ItemBase2.IsShowRedPoint(!0),this.m_Cont2.text=GlobalConfig.jifengTiaoyueLg.st101344,this.m_Cont2.textColor=Color.White,this.m_Group2.touchChildren=!1,this.effMc2=ViewManager.ins().createEff(this.effMc2,this.m_EffGroup2,"quaeff5",-1),this.effMc2.visible=!0)}else this.m_Group2.visible=!1;this.checkGuide()},t.prototype.challenge=function(){var e=GlobalConfig.fbChallengeConfig[UserFb2.ins().fbChallengeId+1];if(e){if(!Checker.Level(e.zsLv,e.lv))return;UserFb2.ins().sendChallenge(),ViewManager.ins().close(FbWin)}},t.prototype.playEffect=function(e,t){t?(e.loadUrl(ResDataPath.GetUIEffePath("eff_task_box"),!0,100),this.movieLayer.addChild(e)):e.parent&&DisplayUtils.dispose(e)},t.prototype.UpdateContent=function(){null==this.mc1&&(this.mc1=new MovieClip),this.mc1.x=-10,this.mc1.y=-10;var e=GlobalConfig.fbChallengeConfig[UserFb2.ins().mPreLevel];e?(this.movieLayer.visible=!0,this.movieLayerRedPoint.visible=!UserFb2.ins().mPreStatus,this.playEffect(this.mc1,!UserFb2.ins().mPreStatus)):this.movieLayer.visible=!1,this.getway.visible=UserFb2.ins().mPreStatus,this.updateData()},t.openCheck=function(){return Deblocking.Check(DeblockingType.TYPE_04)},t.prototype.onClickSQ=function(){GuideUtils.ins().next(this.m_SQBtn),Deblocking.Check(DeblockingType.TYPE_15)&&ViewManager.ins().open(ArtifactMainWin)},t.prototype.checkGuide=function(){UserFb2.ins().fbChallengeId==GuideArtifact.Artifact&&GuideUtils.ins().show(this.m_Group1,68,1)},t.prototype.checkGuide2=function(){UserFb2.ins().fbChallengeId==GuideArtifact.Artifact&&GuideUtils.ins().show(this.m_SQBtn,68,3)},t}(BaseView);__reflect(FBChallengePanel.prototype,"FBChallengePanel",["ICommonWindowTitle"]),window.FBChallengePanel=FBChallengePanel;var FbWin=function(e){function t(){var t=e.call(this)||this;return t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.dailyFbPanel=new DailyFbPanel,this.dailyFbPanel.name=GlobalConfig.jifengTiaoyueLg.st100361,this.commonWindowBg.AddChildStack(this.dailyFbPanel),this.fbChallengePanel=new FBChallengePanel,this.fbChallengePanel.name=GlobalConfig.jifengTiaoyueLg.st100362,this.commonWindowBg.AddChildStack(this.fbChallengePanel),this.teamFbPanel=new TeamFbPanel,this.commonWindowBg.AddChildStack(this.teamFbPanel),this.petClimbTowerPanel=new PetClimbTowerPanel,this.petClimbTowerPanel.name=GlobalConfig.jifengTiaoyueLg.st100364,this.commonWindowBg.AddChildStack(this.petClimbTowerPanel),this.mountClimbTowerPanel=new MountClimbTowerPanel,this.mountClimbTowerPanel.name=GlobalConfig.jifengTiaoyueLg.st100365,this.commonWindowBg.AddChildStack(this.mountClimbTowerPanel),this.drillPanel=new DrillPanel,this.drillPanel.name=GlobalConfig.jifengTiaoyueLg.st100363,this.commonWindowBg.AddChildStack(this.drillPanel)},t.openCheck=function(e){var t=void 0==e[0]?0:e[0];return 0==t?Deblocking.Check(DeblockingType.TYPE_03):1==t?Deblocking.Check(DeblockingType.TYPE_04):2==t?Deblocking.Check(DeblockingType.TYPE_83):3==t?Deblocking.Check(DeblockingType.TYPE_73):4==t?Deblocking.Check(DeblockingType.TYPE_74):5==t?Deblocking.Check(DeblockingType.TYPE_25):!0},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=void 0==e[0]?0:e[0];this.commonWindowBg.OnAdded(this,i),this.observe(MessageDef.CHALLENGE_UPDATE_INFO,this.updateRedPoint),this.observe(MessageDef.TRYROAD_DATAS,this.updateRedPoint),this.updateRedPoint()},t.prototype.updateRedPoint=function(){this.commonWindowBg.ShowTalRedPoint(0,UserFb.ins().hasCount()),this.commonWindowBg.ShowTalRedPoint(1,UserFb2.ins().IsRed()),this.commonWindowBg.ShowTalRedPoint(5,DrillModel.ins().isRed()),Deblocking.Check(DeblockingType.TYPE_48,!0),this.commonWindowBg.ShowTalRedPoint(2,TeamFbModel.getInstance.isShowRedPoint())},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),this.removeObserve(),this.petClimbTowerPanel.release(),this.mountClimbTowerPanel.release()},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return 1==e?Deblocking.Check(DeblockingType.TYPE_04):2==e?Deblocking.Check(DeblockingType.TYPE_83):3==e?Deblocking.Check(DeblockingType.TYPE_73):4==e?Deblocking.Check(DeblockingType.TYPE_74):5==e?Deblocking.Check(DeblockingType.TYPE_25):!0},t}(BaseEuiPanel);__reflect(FbWin.prototype,"FbWin",["ICommonWindow"]),ViewManager.ins().reg(FbWin,LayerManager.UI_Main),window.FbWin=FbWin;var GetRewardPanel=function(e){function t(){var t=e.call(this)||this;return t.m_Rewards=[],t.skinName="ChapterRewardPanelSkin",t.group.itemRenderer=ItemBase,t.sure.label=GlobalConfig.jifengTiaoyueLg.st100004,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_bg.init("GetRewardPanel",e[0]),this.m_Des=e[1],this.m_Rewards=e[2],this.m_Callback=e[3],this.m_CanReward=null==e[4]?!0:e[4],this.addTouchEvent(this,this.OnClick,this.sure),this.AddClick(this.dialogCloseBtn,this._OnClick),this.UpdateContent()},t.prototype.CanReward=function(){return this.m_CanReward},t.prototype.SetDes=function(e){this.m_Des=e,this.desc.text=e},t.prototype.SetReward=function(e){this.m_Rewards=e||[],this.group.dataProvider=new eui.ArrayCollection(this.m_Rewards)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.close=function(){this.removeEvents(),this.removeObserve()},t.prototype.UpdateContent=function(){var e=this.CanReward();this.sure.enabled=e,this.getway.visible=!e,this.m_Rewards&&this.SetReward(this.m_Rewards),this.m_Des&&this.SetDes(this.m_Des)},t.prototype.OnClick=function(){for(var e=this.m_Rewards,t=0,i=0;i<e.length;i++)1==e[i].type&&e[i].id<2e5&&t++;UserBag.ins().getSurplusCount()>=t?(this.m_Callback&&!this.m_Callback()&&ViewManager.ins().close(this),this.m_Callback=null):UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101030,[t]))},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(GetRewardPanel.prototype,"GetRewardPanel"),window.GetRewardPanel=GetRewardPanel;var ChallengeResultWin=function(e){function t(){var t=e.call(this)||this;return t.m_HasNext=!0,t.skinName="ChallengeResultSkin",t.list0.itemRenderer=ItemBase,t.list1.itemRenderer=ItemBase,t.exitBtn.label=GlobalConfig.jifengTiaoyueLg.st100962,t.nextLabel.text=GlobalConfig.jifengTiaoyueLg.st101837,t.award_label.text=GlobalConfig.jifengTiaoyueLg.st101838,t}return __extends(t,e),Object.defineProperty(t.prototype,"closeBtn",{get:function(){return this.fightResultBg.closeBtn},enumerable:!0,configurable:!0}),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_CloseFunc=e[0],this.AddClick(this.exitBtn,this._OnClick),this.AddClick(this.closeBtn,this._ContinueChallenge);var i=UserFb2.ins().fbChallengeId;this.fightResultBg.SetState("win");var o=GlobalConfig.fbChallengeConfig[i];o?this.list0.dataProvider=new eui.ArrayCollection(o.firstAward):Main.errorBack("ChallengeResultWin fbChallengeConfig = null fubenID:"+i);var s=GlobalConfig.fbChallengeConfig[i+1];s&&!Checker.Level(s.zsLv,s.lv)&&(s=null),s?(this.closeBtn.x=95,this.closeBtn.name=GlobalConfig.jifengTiaoyueLg.st101602,this.list1.dataProvider=new eui.ArrayCollection(s.firstAward)):(this.list1.visible=!1,this.nextLabel.visible=!1,this.closeBtn.name=GlobalConfig.jifengTiaoyueLg.st100962,this.exitBtn.visible=!1,this.m_HasNext=!1),this.m_Time=5,this._UpdateCloseBtnLabel(),TimerManager.ins().doTimer(1e3,this.m_Time,this._UpdateCloseBtnLabel,this),this.checkGuide()},t.prototype.removeTime=function(){TimerManager.ins().remove(this._UpdateCloseBtnLabel,this)},t.prototype.close=function(){this.removeTime(),TimerManager.ins().remove(this._UpdateCloseBtnLabel,this)},t.prototype.onMaskTap=function(){},t.prototype._OnClick=function(){GuideUtils.ins().next(this.exitBtn),UserFb.ins().sendExitFb(),ViewManager.ins().close(this),this.m_CloseFunc&&(this.m_CloseFunc(),this.m_CloseFunc=null)},t.prototype._UpdateCloseBtnLabel=function(){--this.m_Time<=0&&this._ContinueChallenge(),this.closeBtn.label=this.closeBtn.name+"("+Math.max(this.m_Time,0)+"s)"},t.prototype._ContinueChallenge=function(){this.m_HasNext?(ViewManager.ins().close(this),UserFb2.ins().sendChallenge()):this._OnClick()},t.prototype.checkGuide=function(){UserFb2.ins().fbChallengeId==GuideArtifact.Artifact&&(this.removeTime(),Setting.currPart=68,Setting.currStep=0,GuideUtils.ins().show(this.exitBtn,68,0))},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(ChallengeResultWin.prototype,"ChallengeResultWin"),window.ChallengeResultWin=ChallengeResultWin;var ResultWin=function(e){function t(){var t=e.call(this)||this;return t.isQuit=!0,t.btnStr="",t.layerLevel=VIEW_LAYER_LEVEL.MIDDLE,t}return __extends(t,e),Object.defineProperty(t.prototype,"closeBtn",{get:function(){return this.fightResultBg.closeBtn},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeBtn0",{get:function(){return this.fightResultBg.closeBtn0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeBtn1",{get:function(){return this.fightResultBg.closeBtn1},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ResultSkin",this.list.itemRenderer=ItemBase,this.listData=new eui.ArrayCollection,this.closeBtn.labelDisplay.size=18,this.lostTxt.text=GlobalConfig.jifengTiaoyueLg.st101863,this.languageText.text=GlobalConfig.jifengTiaoyueLg.st100795,this.languageText0.text=GlobalConfig.jifengTiaoyueLg.st100796,this.txt.text=GlobalConfig.jifengTiaoyueLg.st100797},t.prototype.sortFunc=function(e,t){if(1==e.type&&1==t.type){var i=GlobalConfig.itemConfig[e.id],o=GlobalConfig.itemConfig[t.id];if(i.quality>o.quality)return-1;if(i.quality<o.quality)return 1;if(i.level>o.level)return-1;if(i.level<o.level)return 1}else{if(e.type<t.type)return-1;if(e.type>t.type)return 1}return 0},t.prototype.open=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e.prototype.open.call(this,i);var s=i[0],n=i[1],r=i[4];if(n&&n.sort(this.sortFunc),this.currentState=s?"win":"lose",this.fightResultBg.SetState(s?"win":"lose"),egret.setTimeout(function(){r?this.fightResultBg.m_TitleImg&&(this.fightResultBg.m_TitleImg.visible=!1,this.fightResultBg.m_TitileImg2.visible=!0):this.fightResultBg.m_TitleImg&&(this.fightResultBg.m_TitleImg.visible=!0,this.fightResultBg.m_TitileImg2.visible=!1)},this,100),this.btnStr=s&&n&&n.length?GlobalConfig.jifengTiaoyueLg.st100004:i[4]?GlobalConfig.jifengTiaoyueLg.st100793:GlobalConfig.jifengTiaoyueLg.st100962,GameMap.IsGuanQiaBoss()&&OmGifBagModel.getInstance.isShow(1)?(this.fightResultBg.m_Double.visible=!0,this.closeBtn.visible=!1,UIHelper.SetBtnNormalEffe(this.closeBtn1,!0),this.fightResultBg.closeBtn1.visible=!WxSdk.ins().isHidePay()):(this.fightResultBg.m_Double.visible=!1,this.closeBtn.visible=!0),this.s=5,this.updateCloseBtnLabel(),TimerManager.ins().doTimer(1e3,6,this.updateCloseBtnLabel,this),s){this.listData.source=n,this.list.dataProvider=this.listData,this.list.validateNow();for(var a=this.list.numChildren,l=0;a>l;++l){n&&n[l]&&1==n[l].type?(this.list.getChildAt(l).isCheckEff=!0,this.list.getChildAt(l).showItemEffect(),t.item=new ItemBase,t.item.data=n[l].id):t.item=null;var h=this.list.getChildAt(l);h&&h instanceof ItemBase&&(h.nameTxt.strokeColor=Color.White,h.nameTxt.stroke=1)}}if(i[2]&&(this.txt.text=i[2]),this.isQuit=!i[4],i[3]instanceof Function?this.closeFunc=i[3]:0==i[3]&&(this.isQuit=i[3]),n&&n.length>0?this.txt.visible=!0:(this.txt.visible=!1,this.txt.text=""),egret.setTimeout(function(){this.defeat&&(this.defeat.visible=0==s)},this,50),!s)for(var c=1;6>c;c++)this["img"+c].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this);this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.openRole.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.openRole1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.openRole.visible=this.openRole1.visible=SubRoles.ins().subRolesLen<3},t.prototype.close=function(){if(UIHelper.SetBtnNormalEffe(this.closeBtn1,!1),this.m_Scroller.stopAnimation(),TimerManager.ins().remove(this.updateCloseBtnLabel,this),!this.currentState)for(var e=1;6>e;e++)this["img"+e].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this);this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.openRole.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.openRole1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameMap.fubenID>0&&this.isQuit&&UserFb.ins().sendExitFb(),this.closeFunc&&(this.closeFunc(),this.closeFunc=null),this.bossmc&&(DisplayUtils.removeFromParent(this.bossmc),ObjectPool.ins().push(this.bossmc))},t.prototype.updateCloseBtnLabel=function(){this.s--,this.s<=0&&(GameMap.IsCityBoss()&&ViewManager.ins().open(GuanQiaBossWin),GameMap.IsTeamFb()&&ViewManager.ins().open(FbWin,2),ViewManager.ins().close(this),TimerManager.ins().removeAll(this)),this.closeBtn.label=this.btnStr+"("+this.s+"s)",this.closeBtn0.label=GlobalConfig.jifengTiaoyueLg.st101982+"("+this.s+"s)"},t.prototype.onTap=function(e){switch(e.currentTarget){case this.img1:case this.img2:case this.img3:case this.img4:case this.img5:this.openWin(e.currentTarget);break;case this.closeBtn:case this.closeBtn0:GameMap.IsCityBoss()&&ViewManager.ins().open(GuanQiaBossWin),GameMap.IsTeamFb()&&ViewManager.ins().open(FbWin,2),ViewManager.ins().close(this);break;case this.closeBtn1:GameMap.IsCityBoss()&&ViewManager.ins().open(GuanQiaBossWin),GameMap.IsTeamFb()&&ViewManager.ins().open(FbWin,2),GameMap.IsGuanQiaBoss()&&!OmGifBagModel.getInstance.isBuy(1)&&ViewManager.ins().open(OmGifBagWin),ViewManager.ins().close(this);break;case this.openRole:case this.openRole1:ViewManager.ins().close(this),ViewManager.ins().open(StrongWin)}},t.prototype.openWin=function(e){var t=this;ViewManager.ins().close(this);var i=egret.setTimeout(function(){switch(e){case t.img1:ViewManager.ins().open(RoleWin);break;case t.img2:ViewManager.ins().open(ForgeWin,0);break;case t.img3:ViewManager.ins().open(PetWin);break;case t.img4:ViewManager.ins().open(RoleWin,1);break;case t.img5:ViewManager.ins().open(ForgeWin,2)}egret.clearTimeout(i)},this,200)},t.prototype.onMaskTap=function(){},t.item=null,t}(BaseEuiPanel);__reflect(ResultWin.prototype,"ResultWin"),ViewManager.ins().reg(ResultWin,LayerManager.UI_Popup),window.ResultWin=ResultWin;var UserForge=function(e){function t(){var t=e.call(this)||this;return t.forgeMaxLv=0,t.gemMaxLv=0,t.zhuLinMaxLv=0,t.forgeMinLv=0,t.gemMinLv=0,t.zhuLinMinLv=0,t.sysId=PackageID.strongthen,t.regNetMsg(S2cProtocol.sc_forge_update_data,t.doForgeUpdata),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.doForgeUpdata=function(e){var t=e.roleId;SubRoles.ins().getSubRoleByIndex(t).parseForgeChange(e,this.sysId),this.postForgeUpdate(this.sysId)},t.prototype.postForgeUpdate=function(e){return e},t.prototype.sendUpGrade=function(e,t,i){void 0===i&&(i=!1);var o=new Sproto.cs_forge_upgrade_grade_request;o.roleId=e,o.pos=t,o.canUseYuanbao=i,GameSocket.ins().Rpc(C2sProtocol.cs_forge_upgrade_grade,o)},t.prototype.seekForgeItem=function(){for(var e=Bless.ins().checkIsHaveUp(),t=UserBag.ins().getBagItemNum(UserBag.BAG_TYPE_OTHTER),i=0;t>i&&!e;i++){var o=UserBag.ins().getBagGoodsByIndex(0,i);switch(o.itemConfig.id){case 200002:e=this.forgeHint(0,o.count);break;case 200003:e=this.forgeHint(1,o.count);break;case 200012:e=this.forgeHint(3,o.count)}e||(e=this.forgeHint(2,GameLogic.ins().actorModel.soul))}return e},t.prototype.getForgeConfigByPos=function(e,t,i){var o;switch(i){case 0:o=GlobalConfig.ins("EnhanceAttrConfig");break;case 1:o=GlobalConfig.ins("StoneLevelConfig");break;case 2:o=GlobalConfig.ins("ZhulingAttrConfig");break;case 3:o=GlobalConfig.ins("TupoAttrConfig")}var s,n;for(s in o)if(n=o[s],n.posId==e&&n.level==t)return n;return null},t.prototype.getEnhanceCostConfigByLv=function(e){var t,i=GlobalConfig.ins("EnhanceCostConfig");for(t in i){var o=i[t];if(o.level==e)return o}return null},t.prototype.getStoneLevelCostConfigByLv=function(e){var t,i=GlobalConfig.ins("StoneLevelCostConfig");for(t in i){var o=i[t];if(o.level==e)return o}return null},t.prototype.getZhulingCostConfigByLv=function(e){null==this.zhulingCostConfig&&(this.zhulingCostConfig=GlobalConfig.ins("ZhulingCostConfig"));var t,i=this.zhulingCostConfig;for(t in i){var o=i[t];if(o.level==e)return o}return null},t.prototype.getTupoCostConfigByLv=function(e){var t,i=GlobalConfig.ins("TupoCostConfig");for(t in i){var o=i[t];if(o.level==e)return o}return null},t.prototype.forgeHint=function(e,t){for(var i=SubRoles.ins().subRolesLen,o=0;i>o;o++){var s=SubRoles.ins().getSubRoleByIndex(o),n=s.getMinEquipIndexByType(e),r=this.getForgeLv(e,s,n),a=this.getForgeCount(e,r);if(a&&t>=a)return!0}return!1},t.prototype.getForgeLv=function(e,t,i){switch(e){case 0:return t.getEquipByIndex(i).strengthen;case 1:return t.getEquipByIndex(i).gem;case 2:return t.getEquipByIndex(i).zhuling;case 3:return t.getEquipByIndex(i).tupo}},t.prototype.getForgeCount=function(e,t){switch(e){case 0:var i=this.getEnhanceCostConfigByLv(t+1);if(i)return i.stoneNum;break;case 1:var o=this.getStoneLevelCostConfigByLv(t+1);if(o)return o.count;break;case 2:var s=this.getZhulingCostConfigByLv(t+1);if(s)return s.soulNum;break;case 3:return 0}return 0},t.prototype.sendEssenceOneKey=function(e){var t=new Sproto.cs_essence_onekey_request;t.roleId=e,this.Rpc(C2sProtocol.cs_essence_onekey,t)},t.prototype.sendForgeOneKey=function(e){var t=new Sproto.cs_forge_onekey_request;t.roleId=e,this.Rpc(C2sProtocol.cs_forge_onekey,t)},t.prototype.sendGemOneKey=function(e){var t=new Sproto.cs_gem_onekey_request;t.roleId=e,this.Rpc(C2sProtocol.cs_gem_onekey,t)},t.prototype.getMaxLv=function(e,t){for(var i=SubRoles.ins().getSubRoleByIndex(t),o=8,s=0,n=0;o>n;n++){var r=void 0;switch(e){case 0:r=i.getEquipByIndex(n).strengthen,r&&(s+=r);break;case 1:r=i.getEquipByIndex(n).gem,r&&(s+=r);break;case 2:r=i.getEquipByIndex(n).zhuling,r&&(s+=r)}}return s},t.prototype.getDashiMinMaxLv=function(e,t){var i=0,o=0;switch(e){case DaShiType.forge:if(0==this.forgeMaxLv){var s=GlobalConfig.ins("EnhanceJieDuanConfig"),n=0;for(var r in s)s[r].rank>this.forgeMaxLv&&(this.forgeMaxLv=s[r].rank),0==n&&0==this.forgeMinLv&&(this.forgeMinLv=s[r].rank),n++}o=this.forgeMinLv,i=this.forgeMaxLv;break;case DaShiType.gem:if(0==this.gemMaxLv){var a=GlobalConfig.ins("StoneJieDuanConfig"),n=0;for(var r in a)a[r].rank>this.forgeMaxLv&&(this.gemMaxLv=a[r].rank),0==n&&0==this.gemMinLv&&(this.gemMinLv=a[r].rank),n++}o=this.gemMinLv,i=this.gemMaxLv;break;case DaShiType.zhulin:if(0==this.zhuLinMaxLv){var l=GlobalConfig.ins("ZhulingJieDuanConfig"),n=0;for(var r in l)l[r].rank>this.forgeMaxLv&&(this.zhuLinMaxLv=l[r].rank),0==n&&0==this.gemMinLv&&(this.zhuLinMinLv=l[r].rank),n++}o=this.zhuLinMinLv,i=this.zhuLinMaxLv}return 1==t?i:o},t.prototype.getDashiConfig=function(e,t){var i;switch(e){case DaShiType.forge:var o=GlobalConfig.ins("EnhanceJieDuanConfig");i=o[1];for(var s in o)t>=o[s].rank&&(i=o[s]);break;case DaShiType.gem:var n=GlobalConfig.ins("StoneJieDuanConfig");i=n[1];for(var s in n)t>=n[s].rank&&(i=n[s]);break;case DaShiType.zhulin:var r=GlobalConfig.ins("ZhulingJieDuanConfig");i=r[1];for(var s in r)t>=r[s].rank&&(i=r[s])}return i},t.prototype.getNextDashiConfig=function(e,t){var i;switch(e){case DaShiType.forge:var o=GlobalConfig.ins("EnhanceJieDuanConfig")[t+1];i=o;break;case DaShiType.gem:var s=GlobalConfig.ins("StoneJieDuanConfig")[t+1];i=s;break;case DaShiType.zhulin:var n=GlobalConfig.ins("ZhulingJieDuanConfig")[t+1];i=n}return i},t}(BaseSystem);__reflect(UserForge.prototype,"UserForge");var DaShiType;!function(e){e[e.forge=0]="forge",e[e.gem=1]="gem",e[e.zhulin=2]="zhulin"}(DaShiType||(DaShiType={})),MessageCenter.compile(UserForge),window.UserForge=UserForge;var UserGem=function(e){function t(){var t=e.call(this)||this;return t.bAutoBuyCailiao=!1,t.sysId=PackageID.Gem,t.regNetMsg(S2cProtocol.sc_gem_update_data,t.postForgeUpdata),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postForgeUpdata=function(e){var t=e.roleId,i=SubRoles.ins().getSubRoleByIndex(t);i.parseForgeChange(e,this.sysId),UserForge.ins().postForgeUpdate(this.sysId)},t.prototype.sendUpGrade=function(e,t,i){void 0===i&&(i=!1);var o=new Sproto.cs_gem_upgrade_grade_request;o.roleId=e,o.pos=t,o.canUseYuanbao=i,GameSocket.ins().Rpc(C2sProtocol.cs_gem_upgrade_grade,o)},Object.defineProperty(t.prototype,"isAutoBuy",{get:function(){return this.bAutoBuyCailiao},set:function(e){this.bAutoBuyCailiao!=e&&(this.bAutoBuyCailiao=e)},enumerable:!0,configurable:!0}),t}(BaseSystem);__reflect(UserGem.prototype,"UserGem"),MessageCenter.compile(UserGem),window.UserGem=UserGem;var UserZhuLing=function(e){function t(){var t=e.call(this)||this;return t.sysId=PackageID.Zhuling,t.regNetMsg(S2cProtocol.sc_essence_update_data,t.postForgeUpdata),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postForgeUpdata=function(e){var t=e.roleId,i=SubRoles.ins().getSubRoleByIndex(t);i.parseForgeChange(e,this.sysId),UserForge.ins().postForgeUpdate(this.sysId)},t.prototype.sendUpGrade=function(e,t,i){void 0===i&&(i=!1);var o=new Sproto.cs_essence_upgrade_grade_request;o.roleId=e,o.pos=t,o.isAuto=i,GameSocket.ins().Rpc(C2sProtocol.cs_essence_upgrade_grade,o);var s=this.getBytes(2);s.writeShort(e),s.writeShort(t),this.sendToServer(s)},t}(BaseSystem);__reflect(UserZhuLing.prototype,"UserZhuLing"),MessageCenter.compile(UserZhuLing),window.UserZhuLing=UserZhuLing;var CRC16=function(){function e(){}return e.update=function(t,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var s=0,n=0;0==o&&(o=t.length),t.position=i;for(var r=i;o>r;++r)n=255&e.CRCBitReflect(t.readByte(),8)^s>>8&16777215,n&=255,s=e.CRCTable[n]^s<<8&4294967040;return 65535&(0^e.CRCBitReflect(s,16))},e.makeCRCTable=function(){for(var t=0,i=new Array(256),o=0;256>o;++o){t=o<<8&4294967040;for(var s=0;8>s;++s)t=32768&t?t<<1&4294967294^e.POLYNOMIAL:t<<1&4294967294;i[o]=t}return i},e.CRCBitReflect=function(t,i){var o=0,s=0;i--;for(var n=0;i>=n;++n)s=i-n,1&t&&(o|=1<<s&e.DropBits[s]),t=t>>1&2147483647;return o},e.POLYNOMIAL=4129,e.CRCTable=e.makeCRCTable(),e.DropBits=[4294967295,4294967294,4294967292,4294967288,4294967280,4294967264,4294967232,4294967168,4294967040,4294966784,4294966272,4294965248,4294963200,4294959104,4294950912,4294934528],e}();__reflect(CRC16.prototype,"CRC16"),window.CRC16=CRC16;var ForgeItemView=function(){function e(e,t){this.m_Items=[],this.currentIdx=0,this.mPanel=e,this.m_Items=t;for(var i=0;8>i;++i)this.m_Items[i].item.source=ResDataPath.GetEquipDefaultIcon(i)}return Object.defineProperty(e.prototype,"type",{set:function(e){this._type=e;for(var t=0;t<this.m_Items.length;t++)this.m_Items[t].setType(this._type)},enumerable:!0,configurable:!0}),e.prototype.setPos=function(e){for(var t=0;t<this.m_Items.length;t++)this.m_Items[t].setState(e==t)},e.prototype.setValue=function(){for(var e=SubRoles.ins().getSubRoleByIndex(this.mPanel.curRole()),t=this.m_Items.length,i=0;t>i;i++){var o=0;switch(this._type){case 0:o=e.getEquipByIndex(i).strengthen;break;case 1:o=e.getEquipByIndex(i).gem;break;case 2:o=e.getEquipByIndex(i).zhuling;break;case 3:o=e.getEquipByIndex(i).tupo}this.m_Items[i].setValue(o),o>0?this.m_Items[i].setSource(ResDataPath.GetEquipDefaultPIcon(i)):this.m_Items[i].setSource(ResDataPath.GetEquipDefaultIcon(i));var s=UserForge.ins().getForgeConfigByPos(i,o,this._type);s?(this.m_Items[i].setBgSource(ResDataPath.GetItemQualityName(s.quality)),this.m_Items[i].showItemEffect(s.quality)):(this.m_Items[i].setBgSource(ResDataPath.GetItemQualityName(0)),this.m_Items[i].showItemEffect(0))}},e.prototype.clear=function(){if(null!=this.m_Items)for(var e=this.m_Items.length,t=0;e>t;t++)this.m_Items[t].clear()},Object.defineProperty(e.prototype,"itemList",{get:function(){return this.m_Items},enumerable:!0,configurable:!0}),e}();__reflect(ForgeItemView.prototype,"ForgeItemView");var CircleRunView=function(e){function t(){var t=e.call(this)||this;return t.skinName="CircleRunSkin",t}return __extends(t,e),Object.defineProperty(t.prototype,"mPanel",{set:function(e){this.m_ForgeItemView.mPanel=e},enumerable:!0,configurable:!0}),t.prototype.childrenCreated=function(){for(var e=[],t=0;8>t;++t)e[t]=this["item"+t];this.m_ForgeItemView=new ForgeItemView(null,e)},Object.defineProperty(t.prototype,"type",{set:function(e){this.m_ForgeItemView.type=e},enumerable:!0,configurable:!0}),t.prototype.setValue=function(){this.m_ForgeItemView.setValue()},t.prototype.setPos=function(e){this.m_ForgeItemView.setPos(e)},t.prototype.turnItem=function(e){},t.prototype.clear=function(){this.m_ForgeItemView.clear()},t}(eui.Component);__reflect(CircleRunView.prototype,"CircleRunView",["eui.UIComponent","egret.DisplayObject"]),window.ForgeItemView=ForgeItemView,window.CircleRunView=CircleRunView;
var Encrypt=function(){function e(){}return e.encode=function(t,i,o){if(void 0===i&&(i=0),void 0===o&&(o=0),i>=t.length)return 0;var s=o?i+o:t.length;s>t.length&&(s=t.length),t.position=i;for(var n=i;s>n;++n){var r=t.readByte();r^=e.sKeyBuff[n%4],t.position--,t.writeByte(r)}return s-i},e.decode=function(t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),e.encode(t,i,o)},e.getCRC16=function(e,t){return void 0===t&&(t=0),CRC16.update(e,0,t)},e.getCRC16ByPos=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=0),CRC16.update(e,t,i)},e.getCheckKey=function(){var t=new egret.ByteArray;t.endian=egret.Endian.LITTLE_ENDIAN,t.writeUnsignedInt(e.sKey);var i=CRC16.update(t);return i},e.getSelfSalt=function(){return e.sSelfSalt},e.getTargetSalt=function(){return e.sTargetSalt},e.setTargetSalt=function(t){e.sTargetSalt=t,e.makeKey()},e.makeSalt=function(){var e=new Date;return Math.random()*e.getTime()},e.makeKey=function(){e.sKey=(e.sSelfSalt^e.sTargetSalt)+8254;for(var t=0;4>t;++t)e.sKeyBuff[t]=(e.sKey&255<<(t<<3))>>(t<<3)},e.sSelfSalt=e.makeSalt(),e.sKeyBuff=new Array(4),e}();__reflect(Encrypt.prototype,"Encrypt"),window.Encrypt=Encrypt;var ForgeBoostPanel=function(e){function t(){var t=e.call(this)||this;return t.mForgeType=0,t.windowCommonBg="pic_bj_20_png",t._isAutoUp=!1,t.skinName="BoostSkin",t.name=GlobalConfig.jifengTiaoyueLg.st100317,t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100317,t.checkAttr.text=GlobalConfig.jifengTiaoyueLg.st100095,t.getItemTxt.textFlow=(new egret.HtmlTextParser).parser('<a href="event:"><u>'+t.getItemTxt.text+"</u></a>"),t}return __extends(t,e),t.prototype.Init=function(){this.consumeLabel.consumeType=GlobalConfig.jifengTiaoyueLg.st101181,this.upGradeBtn.label=GlobalConfig.jifengTiaoyueLg.st101180,this.circleRun.mPanel=this,this.circleRun.type=this.mForgeType},t.prototype.UpdateContent=function(){e.prototype.UpdateContent.call(this);var t=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole());this.imgRole.source="comp_rw_"+t.sex+t.job+"_png"},t.prototype.open=function(){e.prototype.open.call(this),this.getItemTxt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetItem,this),UIHelper.SetLinkStyleLabel(this.checkAttr)},t.prototype.close=function(){e.prototype.close.call(this),this.getItemTxt.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetItem,this),MessageCenter.ins().removeAll(this),this.stopAutoUp()},t.prototype.onTouch=function(){var e=UserForge.ins().getEnhanceCostConfigByLv(this.lv+1);if(null==e)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101098);if(this.m_AutoBuy.selected&&this.itemNum<e.stoneNum){var i=Shop.ins().getShopPrice(e.stoneId,e.stoneNum);return void(Checker.Money(MoneyConst.yuanbao,i,Checker.YUNBAO_FRAME)&&(0==t.isTips?(t.isTips=!0,WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102089,[i,GlobalConfig.jifengTiaoyueLg.st100208]),function(){UserForge.ins().sendUpGrade(this.curRole(),this.pos,!0)},this)):UserForge.ins().sendUpGrade(this.curRole(),this.pos,!0)))}this.itemNum>=e.stoneNum?UserForge.ins().sendUpGrade(this.curRole(),this.pos):UserWarn.ins().setBuyGoodsWarn(e.stoneId,e.stoneNum-this.itemNum)},t.prototype.onGetWay=function(){var e=UserForge.ins().getEnhanceCostConfigByLv(this.lv+1);return null==e?void UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101098):void UserWarn.ins().setBuyGoodsWarn(e.stoneId,e.stoneNum-this.itemNum)},t.prototype.onGetItem=function(e){UserWarn.ins().setBuyGoodsWarn(UserForge.ins().getEnhanceCostConfigByLv(this.lv+1).stoneId,1)},t.prototype.moveAttr=function(){this.attrLabel.moveAttr()},t.prototype.setAttrData=function(e,t){this.circleRun.setValue(),this.circleRun.setPos(this.pos);var t;if(e){var i=AttributeData.getAttrStrAdd(e.attr,0==this.mForgeType?11:12);this.attrLabel.SetCurAttr(AttributeData.getAttStr(i,1))}else{for(var i=[],o=0;o<t.attr.length;o++){var s=new AttributeData;s.type=t.attr[o].type,s.value=0,i.push(s)}this.attrLabel.SetCurAttr(AttributeData.getAttStr(i,1))}if(t){for(var n="",r=0;r<t.attr.length;r++)n+=t.attr[r].value,r<t.attr.length-1&&(n+="\n");this.attrLabel.SetNextAttr(n)}},t.prototype.SetItemCount=function(){this.cost=0;var e=UserForge.ins().getEnhanceCostConfigByLv(this.lv+1);e&&(this.itemNum=UserBag.ins().getBagGoodsCountById(0,e.stoneId),this.cost=e.stoneNum)},t.prototype.clear=function(){this.circleRun.clear()},t.prototype.btnAutoUpClick=function(){var e=this;if(Deblocking.Check(DeblockingType.TYPE_84)){var i=UserForge.ins().getEnhanceCostConfigByLv(this.lv+1);if(null==i)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101098);if(this.itemNum>=i.stoneNum)WarnWin.show(GlobalConfig.jifengTiaoyueLg.st100243,function(){UserForge.ins().sendForgeOneKey(e.curRole())},this);else{if(this.m_AutoBuy.selected){var o=Shop.ins().getShopPrice(i.stoneId,i.stoneNum);return void(Checker.Money(MoneyConst.yuanbao,o,Checker.YUNBAO_FRAME)&&(0==t.isTips?(t.isTips=!0,WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102089,[o,GlobalConfig.jifengTiaoyueLg.st100208]),function(){UserForge.ins().sendUpGrade(this.curRole(),this.pos,!0)},this)):UserForge.ins().sendUpGrade(this.curRole(),this.pos,!0)))}UserWarn.ins().setBuyGoodsWarn(i.stoneId,i.stoneNum-this.itemNum)}}},t.prototype.onClickCheckAttr=function(){ViewManager.ins().open(RoleZBAttrPanel,this.m_RoleSelectPanel.getCurRole(),ForgeType.TYPE0)},t.prototype.onClickDaShi=function(){e.prototype.onClickDaShi.call(this),ViewManager.ins().open(ForgeDashiWin,0,this.curRole())},t.isTips=!1,t}(ForgeBasePanel);__reflect(ForgeBoostPanel.prototype,"ForgeBoostPanel"),window.ForgeBoostPanel=ForgeBoostPanel;var ForgeDashiWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="ForgeDashiWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_Title1.text=GlobalConfig.jifengTiaoyueLg.st101186,this.m_FirTips.text=GlobalConfig.jifengTiaoyueLg.st101187,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101188,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101188},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addViewEvent(),this.type=e[0],this.roleId=e[1],this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.AddClick(this.m_CloseBtn1,this.onClickClose),this.AddClick(this.m_CloseBtn2,this.onClickClose)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=this.type,t=this.roleId,i=UserForge.ins().getMaxLv(e,t),o=UserForge.ins().getDashiMinMaxLv(e,!0),s=UserForge.ins().getDashiMinMaxLv(e,!1),n=UserForge.ins().getDashiConfig(e,i),r=UserForge.ins().getNextDashiConfig(e,n.id);if(this.m_TipsLab.visible=!0,this.m_CfgGroup.visible=!0,this.m_CfgAddGroup.visible=!0,this.m_SecGroup.visible=!0,this.m_FirTips.visible=!0,s>i){this.m_SecGroup.visible=!1,this.m_Bg.height=255,this.m_NowTitleLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101189,[i,n.rank]),AttributeData.setAttrGroup(n.attr,this.m_LeftAttrGroup,16,3881787,!1);for(var a=0;a<this.m_CfgGroup.numChildren;a++){var l=n.tisheng[a],h=this.m_CfgGroup.getChildAt(a),c=this.m_CfgAddGroup.getChildAt(a);l&&h&&h instanceof eui.Label?(h.text=l,c&&c instanceof eui.Image&&(c.visible=!0)):h&&h instanceof eui.Label&&(h.text="",c&&c instanceof eui.Image&&(c.visible=!1))}}else if(i>=s&&o>i){this.m_FirTips.visible=!1,this.m_TipsLab.visible=!1,this.m_CfgGroup.visible=!1,this.m_CfgAddGroup.visible=!1,this.m_Bg.height=410,this.m_NowTitleLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101190,[i,n.rank]),AttributeData.setAttrGroup(n.attr,this.m_LeftAttrGroup,16,3881787,!1),this.m_NextTitleLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101189,[i,r.rank]),AttributeData.setAttrGroup(r.attr,this.m_SecLeftAttrGroup,16,3881787,!1);for(var a=0;a<this.m_SecCfgGroup.numChildren;a++){var l=r.tisheng[a],h=this.m_SecCfgGroup.getChildAt(a),c=this.m_SecCfgAddGroup.getChildAt(a);l&&h&&h instanceof eui.Label?(h.text=l,c&&c instanceof eui.Image&&(c.visible=!0)):h&&h instanceof eui.Label&&(h.text="",c&&c instanceof eui.Image&&(c.visible=!1))}}else i>=o&&(this.m_Bg.height=255,this.m_CfgGroup.visible=!1,this.m_CfgAddGroup.visible=!1,this.m_FirTips.visible=!1,this.m_SecGroup.visible=!1,this.m_NowTitleLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101190,[i,n.rank]),AttributeData.setAttrGroup(n.attr,this.m_LeftAttrGroup,16,3881787,!1));switch(e){case DaShiType.forge:this.m_Title1.text=GlobalConfig.jifengTiaoyueLg.st101191;break;case DaShiType.gem:this.m_Title1.text=GlobalConfig.jifengTiaoyueLg.st101192;break;case DaShiType.zhulin:this.m_Title1.text=GlobalConfig.jifengTiaoyueLg.st101193}},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(ForgeDashiWin.prototype,"ForgeDashiWin"),ViewManager.ins().reg(ForgeDashiWin,LayerManager.UI_Popup),window.ForgeDashiWin=ForgeDashiWin;var ForgeGemPanel=function(e){function t(){var t=e.call(this)||this;t._isAutoUp=!1,t.m_GemLabel=[],t.mForgeType=1,t.skinName="GemSkin",t.name=GlobalConfig.jifengTiaoyueLg.st101194,t.checkAttr.text=GlobalConfig.jifengTiaoyueLg.st100095;for(var i=[],o=1;8>=o;++o)i[o-1]=t["itemForge"+o];return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101194,t.m_ForgeItemView=new ForgeItemView(t,i),t.m_ForgeItemView.type=t.mForgeType,t}return __extends(t,e),t.prototype.Init=function(){this.consumeLabel.consumeType=GlobalConfig.jifengTiaoyueLg.st101195,this.upGradeBtn.label=GlobalConfig.jifengTiaoyueLg.st101196;for(var e=0;4>e;++e)this.m_GemLabel[e]=this["gemLabel"+e]},t.prototype.open=function(){e.prototype.open.call(this),UIHelper.SetLinkStyleLabel(this.checkAttr)},t.prototype.close=function(){e.prototype.close.call(this),this.stopAutoUp()},t.prototype.canShow=function(){var e=GlobalConfig.ins("StoneCommonConfig").autoLv;return GameGlobal.actorModel.level>=e[0]||GameGlobal.actorModel.vipLv>=e[1]},t.prototype.updateLevel=function(){},t.prototype.onTouch=function(){var e=UserForge.ins().getStoneLevelCostConfigByLv(this.lv+1);if(null==e)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101098);if(this.m_AutoBuy.selected&&this.itemNum<e.count){var i=Shop.ins().getShopPrice(e.itemId,e.count);return void(Checker.Money(MoneyConst.yuanbao,i,Checker.YUNBAO_FRAME)&&(0==t.isTips?(t.isTips=!0,WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102089,[i,GlobalConfig.jifengTiaoyueLg.st100208]),function(){UserGem.ins().sendUpGrade(this.curRole(),this.pos,!0)},this)):UserGem.ins().sendUpGrade(this.curRole(),this.pos,!0)))}this.itemNum>=e.count?UserGem.ins().sendUpGrade(this.curRole(),this.pos):UserWarn.ins().setBuyGoodsWarn(e.itemId,e.count-this.itemNum)},t.prototype.btnAutoUpClick=function(){var e=this;if(Deblocking.Check(DeblockingType.TYPE_85)){var i=UserForge.ins().getStoneLevelCostConfigByLv(this.lv+1);if(null==i)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101098);if(this.itemNum>=i.count)WarnWin.show(GlobalConfig.jifengTiaoyueLg.st100243,function(){UserForge.ins().sendGemOneKey(e.curRole())},this);else{if(this.m_AutoBuy.selected){var o=Shop.ins().getShopPrice(i.itemId,i.count);return void(Checker.Money(MoneyConst.yuanbao,o,Checker.YUNBAO_FRAME)&&(0==t.isTips?(t.isTips=!0,WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102089,[o,GlobalConfig.jifengTiaoyueLg.st100208]),function(){UserGem.ins().sendUpGrade(this.curRole(),this.pos,!0)},this)):UserGem.ins().sendUpGrade(this.curRole(),this.pos,!0)))}UserWarn.ins().setBuyGoodsWarn(i.itemId,i.count-this.itemNum)}}},t.prototype.onGetWay=function(){var e=UserForge.ins().getStoneLevelCostConfigByLv(this.lv+1);return null==e?void UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101098):void(e&&UserWarn.ins().setBuyGoodsWarn(e.itemId,e.count-this.itemNum))},t.prototype.setAttrData=function(e,t){this.m_ForgeItemView.setValue(),this.m_ForgeItemView.setPos(this.pos),this.equipItemIcon.source=ResDataPath.GetEquipDefaultPIcon(this.pos);var i=this.lv,o="";if(e){var s=AttributeData.getAttrStrAdd(e.attr,15);o=AttributeData.getAttrStrByType(e.attr[0].type);for(var n=1;n<=this.m_GemLabel.length;++n){var r=this.m_GemLabel[n-1],a=this["item"+n];if(e.attr.length<n)a.iconImg.source="",this.SetGemLabel(r,"bs_00_png",o,null,null);else{var l=i;e.attr.length>n&&(l=20,i-=20);var h="bs_"+e.attr[0].type+l+"_png";a.iconImg.source=h,this.SetGemLabel(r,h,o,l,s[n-1].value)}}}else{o=AttributeData.getAttrStrByType(t.attr[0].type);for(var n=0;n<this.m_GemLabel.length;++n){this["item"+(n+1)].iconImg.source="";var r=this.m_GemLabel[n];this.SetGemLabel(r,"bs_00_png",o,null,null)}}this.updateLevel()},t.prototype.SetGemLabel=function(e,t,i,o,s){e.gem.source=t||"bs_00_png",s?(e.lvLabel.textColor=Color.Black,e.lvLabel.text="Lv"+o+"    "+i+"+"+s):(e.lvLabel.textColor=Color.Red,e.lvLabel.text=i+GlobalConfig.jifengTiaoyueLg.st101197)},t.prototype.moveAttr=function(){},t.prototype.onGetItem=function(e){UserWarn.ins().setBuyGoodsWarn(UserForge.ins().getStoneLevelCostConfigByLv(this.lv+1).itemId,1)},t.prototype.SetItemCount=function(){this.cost=0;var e=UserForge.ins().getStoneLevelCostConfigByLv(this.lv+1);e&&(this.itemNum=UserBag.ins().getBagGoodsCountById(0,e.itemId),this.cost=e.count)},t.prototype.cbAutoBuyClick=function(){var e=UserForge.ins().getStoneLevelCostConfigByLv(this.lv+1);return null==e?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101098):void(this.itemNum>=e.count?UserForge.ins().sendForgeOneKey(this.curRole()):UserWarn.ins().setBuyGoodsWarn(e.itemId,e.count-this.itemNum))},t.prototype.clear=function(){this.m_ForgeItemView.clear()},t.prototype.onClickCheckAttr=function(){ViewManager.ins().open(RoleZBAttrPanel,this.m_RoleSelectPanel.getCurRole(),ForgeType.TYPE1)},t.prototype.onClickDaShi=function(){e.prototype.onClickDaShi.call(this),ViewManager.ins().open(ForgeDashiWin,1,this.curRole())},t.isTips=!1,t}(ForgeBasePanel);__reflect(ForgeGemPanel.prototype,"ForgeGemPanel"),window.ForgeGemPanel=ForgeGemPanel;var ForgeItem=function(e){function t(){var t=e.call(this)||this;return t.oldlv=null,t}return __extends(t,e),t.prototype.getSource=function(){return this._source},t.prototype.setSource=function(e){this._source!=e&&(this._source=e,this.item.source=this._source)},t.prototype.setBgSource=function(e){this._bgSource!=e&&(this._bgSource=e,this.imgBg.source=this._bgSource)},t.prototype.setState=function(e){this.aperture.visible=e},t.prototype.setValue=function(e){switch(this._type){case 0:this.boost.text="+"+e;break;case 1:this.gem.text="+"+e;break;case 2:this.tupo0.text="+"+e;break;case 3:this.tupo.text=e+"星"}null!=this.oldlv&&this.oldlv<e&&this.playeEff(),this.oldlv=e},t.prototype.getType=function(){return this._type},t.prototype.setType=function(e){if(this._type!=e)switch(this._type=e,this._type){case 0:this.boost.visible=!0,this.gem.visible=!1,this.tupo0.visible=!1,this.tupo.visible=!1;break;case 1:this.boost.visible=!1,this.gem.visible=!0,this.tupo0.visible=!1,this.tupo.visible=!1;break;case 2:this.boost.visible=!1,this.gem.visible=!1,this.tupo0.visible=!0,this.tupo.visible=!1;break;case 3:this.boost.visible=!1,this.gem.visible=!1,this.tupo0.visible=!1,this.tupo.visible=!0}},t.prototype.clear=function(){this.EquipEffect&&(DisplayUtils.removeFromParent(this.EquipEffect),ObjectPool.ins().push(this.EquipEffect))},t.prototype.showItemEffect=function(e){e>3?this.showEffect(e):this.EquipEffect&&(DisplayUtils.removeFromParent(this.EquipEffect),ObjectPool.ins().push(this.EquipEffect))},t.prototype.showEffect=function(e){this.EquipEffect||(this.EquipEffect=new MovieClip),this.EquipEffect.touchEnabled=!1,e>=4?(this.EquipEffect.loadUrl(ResDataPath.GetUIEffePath("quaeff"+e),!0),this.EquipEffect.x=40,this.EquipEffect.y=35):(this.EquipEffect.loadFile(RES_DIR_EFF+"quality_0"+e,!0),this.EquipEffect.x=40,this.EquipEffect.y=35),this.addChild(this.EquipEffect)},t.prototype.playeEff=function(){this.eff=ViewManager.ins().createEff(this.eff,this.m_EffGroup,"eff_ui_icon",1)},t}(BaseView);__reflect(ForgeItem.prototype,"ForgeItem"),window.ForgeItem=ForgeItem;var ForgeTipsWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="forgeTips"},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.attr=e[0],this.attrStr=e[1],this.addEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this),this.attrTxt.text=this.attrStr,this.attrTxt0.text="";for(var i=0;i<this.attr.length;i++)this.attrTxt0.text+=this.attr[i]+(i==this.attr.length-1?"":"\n");this.background.height=this.attrTxt.textHeight+60,this.group.y=this.group.height/2-this.background.height/2},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.removeEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this)},t.prototype.otherClose=function(e){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(ForgeTipsWin.prototype,"ForgeTipsWin"),ViewManager.ins().reg(ForgeTipsWin,LayerManager.UI_Popup),window.ForgeTipsWin=ForgeTipsWin;var ForgeWin=function(e){function t(){var t=e.call(this)||this;return t.equip_upEffeX=[61,61,61,61,411,411,411,411],t.equip_upEffeY=[120,234,304,374,166,234,304,374],t.gem_upEffeX=[60,415,60,415,60,415,60,415,56,422],t.gem_upEffeY=[100,100,183,183,263,263,343,343,438,438],t.zhuling_upEffeX=[60,415,60,415,60,415,60,415],t.zhuling_upEffeY=[100,100,183,183,263,263,343,343],t.redOpenState=[!0,Deblocking.Check(DeblockingType.TYPE_76,!0),Deblocking.Check(DeblockingType.TYPE_78,!0)],t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ForgeSkin",this.maxLvTF.text=GlobalConfig.jifengTiaoyueLg.st100234,this.btnAutoUp.label=GlobalConfig.jifengTiaoyueLg.st101179,this.m_AutoBuy.label=GlobalConfig.jifengTiaoyueLg.st101147,this.upGradeBtn.label=GlobalConfig.jifengTiaoyueLg.st101180,this.getItem.text=GlobalConfig.jifengTiaoyueLg.st100418,UIHelper.SetLinkStyleLabel(this.getItem),this.boostPanel=new ForgeBoostPanel,this.boostPanel.SetComp(this.powerLabel,this.consumeLabel,this.upGradeBtn,this.btnAutoUp,this.maxLvTF,this.getItem,this.BOTTON_GROUP_FULL,this.m_AutoBuy),this.commonWindowBg.AddChildStack(this.boostPanel),this.blessWin=new BlessWin,this.blessWin.name=GlobalConfig.jifengTiaoyueLg.st101178,this.blessWin.setComp(this.powerLabel,this.maxLvTF,this.BOTTON_GROUP_FULL),this.commonWindowBg.AddChildStack(this.blessWin),this.gemPanel=new ForgeGemPanel,this.gemPanel.SetComp(this.powerLabel,this.consumeLabel,this.upGradeBtn,this.btnAutoUp,this.maxLvTF,this.getItem,this.BOTTON_GROUP_FULL,this.m_AutoBuy),this.commonWindowBg.AddChildStack(this.gemPanel),this.zhulingPanel=new ForgeZhulingPanel,this.zhulingPanel.SetComp(this.powerLabel,this.consumeLabel,this.upGradeBtn,this.btnAutoUp,this.maxLvTF,this.getItem,this.BOTTON_GROUP_FULL,this.m_AutoBuy),this.commonWindowBg.AddChildStack(this.zhulingPanel),this.mc_succeed=new MovieClip,this.mc_succeed.x=142,this.mc_succeed.y=-9},t.prototype.destoryView=function(){e.prototype.destoryView.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e[0]?e[0]:0,e[1]?e[1]:0),MessageCenter.addListener(UserForge.ins().postForgeUpdate,this.onEvent,this),this.observe(MessageDef.DELETE_ITEM,this.redPoint),this.observe(MessageDef.ADD_ITEM,this.redPoint),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.redPoint),this.redPoint()},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),MessageCenter.ins().removeAll(this);var e=ViewManager.ins().getView(UIView2);e&&e.closeNav(UIView2.NAV_BAG)},t.prototype.onEvent=function(e){var t=0,i=[],o=[],s=null;switch(e){case PackageID.strongthen:s=this.boostPanel,t=0,i=this.equip_upEffeX,o=this.equip_upEffeY,this.playEffect(t,s,i,o);break;case PackageID.Gem:s=this.gemPanel,t=1,i=this.gem_upEffeX,o=this.gem_upEffeY,this.playEffect(t,s,i,o);break;case PackageID.Zhuling:t=2,s=this.zhulingPanel,i=this.zhuling_upEffeX,o=this.zhuling_upEffeY,this.playEffect(t,s,i,o)}},t.prototype.playEffect=function(e,t,i,o){var s=this;if(!this.canPlayEffect(t)){var n=SubRoles.ins().getSubRoleByIndex(this.commonWindowBg.getCurRole()),r=n.getMinEquipIndexByType(e);r=0==r?7:r-1,t.UpdateContent(),null==this.mc&&(this.mc=new MovieClip),this.mc.x=240,this.mc.y=340,this.mc.loadUrl(ResDataPath.GetUIEffePath("eff_success_strengthen"),!0,1,function(){DisplayUtils.dispose(s.mc),s.mc=null}),this.addChild(this.mc),this.redPoint()}},t.prototype.playEffectPic=function(e,t){this.canPlayEffect(t)||(t.UpdateContent(),this.redPoint())},t.prototype.canPlayEffect=function(e){var t=this.commonWindowBg.GetCurViewStackElement(),i=e!=t;return e!=t&&console.log("ForgeWin:Event 当前事件 "+e+", 当前显示界面 "+t),i},t.prototype.redPoint=function(){var e=this.commonWindowBg.GetSelectedIndex(),t=SubRoles.ins().subRolesLen;this.commonWindowBg.clearRedPoint(),this.commonWindowBg.ClearTalRedPoint(),this.commonWindowBg.ShowTalRedPoint(1,Bless.ins().checkIsHaveUp());for(var i=0;t>i;i++)for(var o=0;4>o;o++)if(1!=o){var s=o>1?o-1:o,n=SubRoles.ins().getSubRoleByIndex(i),r=n.getMinEquipIndexByType(s),a=this.getForgeLv(s,n,r),l=this.getForgeIdOrCount(s,a,0);if(l&&this.redOpenState[s]){var h=void 0;h=2==s?GameLogic.ins().actorModel.soul:UserBag.ins().getBagGoodsCountById(0,this.getForgeIdOrCount(s,a,1)),h>=l&&(e==o&&this.commonWindowBg.showRedPoint(i,!0),this.commonWindowBg.ShowTalRedPoint(o,!0))}}},t.prototype.getForgeLv=function(e,t,i){switch(e){case 0:return t.getEquipByIndex(i).strengthen;case 1:return t.getEquipByIndex(i).gem;case 2:return t.getEquipByIndex(i).zhuling}},t.prototype.getForgeIdOrCount=function(e,t,i){switch(e){case 0:var o=UserForge.ins().getEnhanceCostConfigByLv(t+1);if(o)return i?o.stoneId:o.stoneNum;case 1:var s=UserForge.ins().getStoneLevelCostConfigByLv(t+1);if(s)return i?s.itemId:s.count;case 2:var n=UserForge.ins().getZhulingCostConfigByLv(t+1);if(n)return n.soulNum;case 3:return 0}return 0},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return 1==e?!0:2==e?Deblocking.Check(DeblockingType.TYPE_76):3==e?Deblocking.Check(DeblockingType.TYPE_78):!0},t}(BaseEuiPanel);__reflect(ForgeWin.prototype,"ForgeWin",["ICommonWindow"]),ViewManager.ins().reg(ForgeWin,LayerManager.UI_Main),window.ForgeWin=ForgeWin;var ForgeZhulingPanel=function(e){function t(){var t=e.call(this)||this;t._isAutoUp=!1,t.mForgeType=2,t.skinName="GemZhulingPanelSkin",t.name=GlobalConfig.jifengTiaoyueLg.st101198,t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101198,t.checkAttr.text=GlobalConfig.jifengTiaoyueLg.st100095;for(var i=[],o=0;8>o;++o)i[o]=t["itemForge"+o];return t.m_ForgeItemView=new ForgeItemView(t,i),t.m_ForgeItemView.type=t.mForgeType,t}return __extends(t,e),t.prototype.Init=function(){this.consumeLabel.consumeType=GlobalConfig.jifengTiaoyueLg.st100657,this.upGradeBtn.label=GlobalConfig.jifengTiaoyueLg.st101199},t.prototype.open=function(){e.prototype.open.call(this),UIHelper.SetLinkStyleLabel(this.checkAttr)},t.prototype.close=function(){e.prototype.close.call(this),this.stopAutoUp()},t.prototype.onTouch=function(){var e=UserForge.ins().getZhulingCostConfigByLv(this.lv+1);if(null==e)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101098);if(this.m_AutoBuy.selected&&this.itemNum<e.soulNum){var i=Shop.ins().getShopPrice(4,e.soulNum);return void(Checker.Money(MoneyConst.yuanbao,i,Checker.YUNBAO_FRAME)&&(0==t.isTips?(t.isTips=!0,WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102089,[i,GlobalConfig.jifengTiaoyueLg.st100208]),function(){UserZhuLing.ins().sendUpGrade(this.curRole(),this.pos,!0)},this)):UserZhuLing.ins().sendUpGrade(this.curRole(),this.pos,!0)))}this.itemNum>=e.soulNum?UserZhuLing.ins().sendUpGrade(this.curRole(),this.pos):UserWarn.ins().setBuyGoodsWarn(4,1)},t.prototype.onGetWay=function(){UserWarn.ins().setBuyGoodsWarn(4,1)},t.prototype.setAttrData=function(e,t){if(this.m_ForgeItemView.setValue(),this.m_ForgeItemView.setPos(this.pos),this.equipItemIcon.source=ResDataPath.GetEquipDefaultPIcon(this.pos),e){var i=AttributeData.getAttrStrAdd(e.attr,0==this.mForgeType?11:12);this.attrLabel.SetCurAttr(AttributeData.getAttStr(i,1))}else{for(var i=[],o=0;o<t.attr.length;o++){var s=new AttributeData;s.type=t.attr[o].type,s.value=0,i.push(s)}this.attrLabel.SetCurAttr(AttributeData.getAttStr(i,1))}if(t){for(var n="",r=0;r<t.attr.length;r++)n+=t.attr[r].value,r<t.attr.length-1&&(n+="\n");this.attrLabel.SetNextAttr(n)}},t.prototype.SetItemCount=function(){this.cost=0,this.itemNum=parseInt(GameLogic.ins().actorModel.soul.toString());var e=UserForge.ins().getZhulingCostConfigByLv(this.lv+1);e&&(this.cost=e.soulNum)},t.prototype.clear=function(){this.m_ForgeItemView.clear()},t.prototype.btnAutoUpClick=function(){var e=this;if(Deblocking.Check(DeblockingType.TYPE_86)){var i=UserForge.ins().getZhulingCostConfigByLv(this.lv+1);if(null==i)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101098);if(this.itemNum>=i.soulNum)WarnWin.show(GlobalConfig.jifengTiaoyueLg.st100243,function(){UserForge.ins().sendEssenceOneKey(e.curRole())},this);else{if(this.m_AutoBuy.selected){var o=Shop.ins().getShopPrice(4,i.soulNum);return void(Checker.Money(MoneyConst.yuanbao,o,Checker.YUNBAO_FRAME)&&(0==t.isTips?(t.isTips=!0,WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102089,[o,GlobalConfig.jifengTiaoyueLg.st100208]),function(){UserZhuLing.ins().sendUpGrade(this.curRole(),this.pos,!0)},this)):UserZhuLing.ins().sendUpGrade(this.curRole(),this.pos,!0)))}UserWarn.ins().setBuyGoodsWarn(4,1)}}},t.prototype.onClickCheckAttr=function(){ViewManager.ins().open(RoleZBAttrPanel,this.m_RoleSelectPanel.getCurRole(),ForgeType.TYPE2)},t.prototype.onClickDaShi=function(){e.prototype.onClickDaShi.call(this),ViewManager.ins().open(ForgeDashiWin,2,this.curRole())},t.isTips=!1,t}(ForgeBasePanel);__reflect(ForgeZhulingPanel.prototype,"ForgeZhulingPanel"),window.ForgeZhulingPanel=ForgeZhulingPanel;var CdkeyPanle=function(e){function t(){var t=e.call(this)||this;return t.skinName="CDKeySkin",t.m_Lan.text=GlobalConfig.jifengTiaoyueLg.st100029,t.sendBtn.label=GlobalConfig.jifengTiaoyueLg.st100004,t}return __extends(t,e),t.prototype.open=function(){this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.close=function(){this.sendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.sendBtn:var t=this.input?this.input.text:"";if((StartGetUserInfo.gmLevel>0||Main.isDebug)&&-1!=t.indexOf("@ "))return void GameLogic.ins().sendGMCommad(t.substring(2));SdkMgr.sendCdkey(t)}},t}(eui.Component);__reflect(CdkeyPanle.prototype,"CdkeyPanle"),window.CdkeyPanle=CdkeyPanle;var FAQPanel=function(e){function t(){var t=e.call(this)||this;t.skinName="FAQSkin";var i=GlobalConfig.jifengTiaoyueLg.st100030;return t.des.text=i,SdkMgr.currSdk==SdkMgr.P_TYPE_8&&(t.des.text="经典大作回归，缔造只属于你的神装!\n如果您在游戏过程中有发现bug和游戏问题，及对游戏的建议想法，欢迎您联系我们客服反馈。核实采纳后将会给您50-1000不等的钻石奖励。加群更有丰厚礼包哦！\n客服QQ：3091603763"),t.opinionBtn.label=GlobalConfig.jifengTiaoyueLg.st100031,t}return __extends(t,e),t.prototype.open=function(){this.opinionBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tapClick,this)},t.prototype.close=function(){this.opinionBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.tapClick,this)},t.prototype.tapClick=function(e){ViewManager.ins().open(OpinionPanel)},t}(eui.Component);__reflect(FAQPanel.prototype,"FAQPanel"),window.FAQPanel=FAQPanel;var FindAssetsModel=function(e){function t(){var t=e.call(this)||this;return t.m_Assets=[],t.regNetMsg(S2cProtocol.sc_find_assets_init_info,t._DoAssetsInit),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype._DoAssetsInit=function(e){this.m_Assets=e.datas;for(var t=this.m_Assets.length-1;t>=0;--t){var i=this.m_Assets[t],o=GlobalConfig.ins("RetrieveConfig")[i.type];o||this.m_Assets.splice(t,1)}GameGlobal.MessageCenter.dispatch(MessageDef.FIND_ASSETS_UPDATE)},t.prototype.SendInit=function(){this.Rpc(C2sProtocol.cs_find_assets_init)},t.prototype.SendAssetsGet=function(e,t){var i=new Sproto.cs_find_assets_get_request;i.type=e,i.moneyType=t,this.Rpc(C2sProtocol.cs_find_assets_get,i)},Object.defineProperty(t.prototype,"assets",{get:function(){return this.m_Assets},enumerable:!0,configurable:!0}),t.prototype.HasFindAssets=function(){if(GameServer.loginDay<=1)return!1;if(this.m_Assets.length>0)for(var e=0,t=this.m_Assets;e<t.length;e++){var i=t[e];if(i.state==FindAssetsState.NONE)return!0}return!1},t}(BaseSystem);__reflect(FindAssetsModel.prototype,"FindAssetsModel");var FindAssetsState;!function(e){e[e.NONE=0]="NONE",e[e.GET=1]="GET"}(FindAssetsState||(FindAssetsState={})),window.FindAssetsModel=FindAssetsModel;var HttpClient=function(){function e(){}return e.prototype.paramsBuilder=function(e){var t=[];if("object"==typeof e){var i;for(i in e)t.push(i+"="+e[i]);return t.join("&")}return"string"==typeof e?e:""},e.prototype.send=function(t,i,o,s,n){void 0===n&&(n=e.serverUrl),this.returnFunc=i,this.target=o,this.request=new egret.HttpRequest;var r=this.request,a=this.paramsBuilder(s),l=n?n:e.serverUrl;t==egret.HttpMethod.POST?r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):(l+="?"+a,a=""),r.responseType=egret.HttpResponseType.TEXT,r.open(l,t),r.send(s),r.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),r.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),r.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this)},e.prototype.onGetComplete=function(e){var t=e.currentTarget,i="JSON"==this.responseType?JSON.parse(t.response):t.response;null!=this.returnFunc&&this.returnFunc.call(this.target,i),this.destory()},e.prototype.onGetIOError=function(e){this.destory()},e.prototype.onGetProgress=function(e){console.log("get progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},e.prototype.destory=function(){var e=this.request;e.removeEventListener(egret.Event.COMPLETE,this.onGetComplete,this),e.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),e.removeEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this),this.returnFunc=null,this.request=null},e.get=function(t,i,o,s,n){void 0===s&&(s="JSON"),void 0===n&&(n=e.serverUrl);var r=new e;r.responseType=s,r.send(egret.HttpMethod.GET,t,i,o,n)},e.post=function(t,i,o,s,n){void 0===s&&(s="JSON"),void 0===n&&(n=e.serverUrl);var r=new e;r.responseType=s,r.send(egret.HttpMethod.POST,t,i,o,n)},e.serverUrl="http://192.168.1.38:7071/api/report",e}();__reflect(HttpClient.prototype,"HttpClient"),window.HttpClient=HttpClient;var FuliWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100005,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="FuliMainSkin",this.iconList.itemRenderer=FuliActBtnRenderer,this.panels=[CdkeyPanle,MoneyTreePanel,GameNoticePanle,MonthCardWin,null,RechargeGiftPanel,FindAssetsPanel,Recharge3Win,DayLoginPanel,FAQPanel,MonthSingPanel],this.panels2=this.panels,this.arrList=new eui.ArrayCollection,this.listBar.horizontalScrollBar.autoVisibility=!1,this.listBar.horizontalScrollBar.visible=!1,this.commonWindowBg.tabBar.visible=!1,this.commonWindowBg.imgNav.visible=!1},t.prototype.UpdateContent=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.listBar.addEventListener(egret.Event.CHANGE,this.onChange,this),this.iconList.addEventListener(egret.Event.CHANGE,this.onClickMenu,this),GameGlobal.MessageCenter.addListener(MessageDef.MONEY_INFO_CHANGE,this.updateMenuList,this),GameGlobal.MessageCenter.addListener(MessageDef.GAME_NOTICE_OPEN,this.updateMenuList,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATA_TASK,this.updateMenuList,this),GameGlobal.MessageCenter.addListener(MessageDef.FIND_ASSETS_UPDATE,this.updateMenuList,this),GameGlobal.MessageCenter.addListener(MessageDef.MONEY_RECHARGE_GIFT_CHANGE,this.UpdateListRedPoint,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_RECHARGE,this.UpdateListRedPoint,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.UpdateListRedPoint,this),this.panleType=e[0],this.curPanleList=1==this.panleType?this.panels:this.panels2,this.selectBtnType=0,this.iconList.selectedIndex=0,this.updateMenuList(!0),e[1]&&(this.selectBtnType=e[1],this.iconList.selectedIndex=this.getSelectIdx(e[1]),this.updateMenuList(!0))
},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.listBar.addEventListener(egret.Event.CHANGE,this.onChange,this),this.iconList.removeEventListener(egret.Event.CHANGE,this.onClickMenu,this),GameGlobal.MessageCenter.removeListener(MessageDef.MONEY_INFO_CHANGE,this.updateMenuList,this),GameGlobal.MessageCenter.removeListener(MessageDef.GAME_NOTICE_OPEN,this.updateMenuList,this),GameGlobal.MessageCenter.removeListener(MessageDef.UPDATA_TASK,this.updateMenuList,this),GameGlobal.MessageCenter.removeListener(MessageDef.FIND_ASSETS_UPDATE,this.updateMenuList,this),GameGlobal.MessageCenter.removeListener(MessageDef.MONEY_RECHARGE_GIFT_CHANGE,this.UpdateListRedPoint,this),GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_RECHARGE,this.UpdateListRedPoint,this),GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.UpdateListRedPoint,this),this.removeObserve(),this.curPanel.close()},t.prototype.updateMenuList=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=0),this._datas=[];var i;for(var o in GlobalConfig.welfareConfig)if(i=GlobalConfig.welfareConfig[o],4!=i.id||!WxSdk.ins().isHidePay()){var s=!1;this.panleType==i.panel&&(2==i.type?MoneyTreeModel.CheckOpen()&&(this._datas.push(i),s=!0):9==i.type?DayLoginIconRule.CheckShow()&&(this._datas.push(i),s=!0):7==i.type?FindAssetsModel.ins().HasFindAssets()&&(this._datas.push(i),s=!0):5==i.type||(this._datas.push(i),s=!0))}this.arrList.replaceAll(this._datas),this.iconList.dataProvider=this.arrList,e&&(this.curId=this._datas[this.iconList.selectedIndex].type,this.updateDetail()),this.btnNum=this._datas.length,this.onChange()},t.prototype.onClickMenu=function(e){this.curId=this._datas[this.iconList.selectedIndex].type,this.updateDetail()},t.prototype.onChange=function(){this.listBar&&(this.m_RightBtnRedPoint.visible=this.arrList.length>4,0!=this.m_RightBtnRedPoint.visible&&(this.listBar&&this.listBar.viewport&&0==this.listBar.viewport.scrollH?this.m_RightBtnRedPoint.source="cycle_btn_01_01_png":this.listBar&&this.listBar.viewport&&this.listBar.viewport.scrollH==this.listBar.viewport.contentWidth-this.listBar.width&&(this.m_RightBtnRedPoint.source="cycle_btn_01_02_png")))},t.prototype.updateDetail=function(){this.curPanel&&(DisplayUtils.removeFromParent(this.curPanel),this.curPanel.close());var e=this.curPanleList[this.curId-1];e&&(this.curPanel=new e,MoneyTreeModel.ins().isOpen[this.curId]||(MoneyTreeModel.ins().isOpen[this.curId]=!0,this.updateMenuList()),this.curPanel&&(this.curPanel.open(),this.info.addChild(this.curPanel)),egret.is(this.curPanel,"ICommonWindowTitle")&&this.curPanel.windowCommonBg&&""!=this.curPanel.windowCommonBg?this.commonWindowBg.ActivityWinBgUpdate(this.curPanel.windowCommonBg):this.commonWindowBg.ActivityWinBgUpdate(""))},t.prototype.UpdateListRedPoint=function(){for(var e=0;e<this.iconList.numChildren;++e){var t=this.iconList.getChildAt(e);t&&t.UpdateRedPoint&&t.UpdateRedPoint()}},t.prototype.getSelectIdx=function(e){if(!this._datas)return 0;var t=0;for(var i in this._datas){if(this._datas[i].panel==this.panleType&&this._datas[i].type==e)return t;t++}return 0},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(FuliWin.prototype,"FuliWin",["ICommonWindow","ICommonWindowTitle"]),window.FuliWin=FuliWin;var GameNoticePanle=function(e){function t(){var t=e.call(this)||this;return t.skinName="gameNoticeSkin",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=GlobalConfig.ins("HelpInfoConfig")[5].text,o=i.split("_");this.title.textFlow=TextFlowMaker.generateTextFlow(o[0]),this.desc.textFlow=TextFlowMaker.generateTextFlow(o[1]);var s=new egret.HttpRequest;s.responseType=egret.HttpResponseType.TEXT;var n="";n=SdkMgr.isWxGame()||1==SdkMgr.requestType?Const.SERVER_LIST_URL+"get_total_notice?platformid="+SdkMgr.platformid+"&channelid="+SdkMgr.channelid:Const.SERVER_LIST_URL+"api/server/getnoticecontent?platformid="+SdkMgr.platformid+"&channelid="+SdkMgr.channelid+"&ver="+SdkMgr.ver,s.open(n,egret.HttpMethod.GET),s.send(),s.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),s.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),s.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this)},t.prototype.onPostComplete=function(e){var t=e.currentTarget;try{var i=JSON.parse(t.response);(1==i.result||200==i.code)&&null!=i.data&&i.data.length>0&&(this.desc.textFlow=TextFlowMaker.generateTextFlow(i.data.replace(new RegExp("/n","gm"),"\n")))}catch(o){console.log(o)}},t.prototype.onPostIOError=function(e){egret.log("post error : "+e)},t.prototype.onPostProgress=function(e){egret.log("post progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},t.prototype.close=function(){},t}(eui.Component);__reflect(GameNoticePanle.prototype,"GameNoticePanle"),window.GameNoticePanle=GameNoticePanle;var MoneyTreeBoxWin=function(e){function t(){var t=e.call(this)||this;return t.dataList=[],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MoneyTreeBoxSkin",this.list.itemRenderer=ItemBase},t.prototype.open=function(){this.m_bg.init("MoneyTreeBoxWin",GlobalConfig.jifengTiaoyueLg.st101386);for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.sure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.index=e[0];var i=MoneyTreeModel.ins().getBoxInfoByIndex(this.index);this.desc.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101749,i.time),this.creatRewardList(i.box),this.list.dataProvider=new eui.ArrayCollection(this.dataList),this.sure.label=GlobalConfig.jifengTiaoyueLg.st101210,this.sure.enabled=!1,MoneyTreeModel.ins().playNum>=i.time&&(0==MoneyTreeModel.ins().getOrderByIndex(this.index-1)?this.sure.enabled=!0:this.sure.label=GlobalConfig.jifengTiaoyueLg.st100981)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.sure.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.creatRewardList=function(e){for(var t,i=0;3>i;i++)this.dataList[i]?t=this.dataList[i]:(t=new RewardData,t.type=0,t.id=1,this.dataList.push(t)),t.count=e[i]},t.prototype.onTap=function(e){switch(e.currentTarget){case this.sure:MoneyTreeModel.ins().sendGetCaseReward(this.index),ViewManager.ins().close(t)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(MoneyTreeBoxWin.prototype,"MoneyTreeBoxWin"),window.MoneyTreeBoxWin=MoneyTreeBoxWin;var MoneyTreeModel=function(e){function t(){var t=e.call(this)||this;return t.isOpen=[],t.playNum=0,t.boxOn=0,t.addCoefficient=1,t.exp=0,t.boxInfo=0,t.mRechargeDay=0,t.mAwardBits=[],t._maxNum=0,t.regNetMsg(S2cProtocol.sc_money_tree_info,t.doMoneyTreeInfo),t.regNetMsg(S2cProtocol.sc_money_tree_play_info,t.doPalyBack),t.regNetMsg(S2cProtocol.sc_money_tree_reward_info,t.doGetRewardBack),t.regNetMsg(S2cProtocol.sc_recharge_gift_reward,t.DoRechargeInfo),t}return __extends(t,e),t.prototype.sendPlayYaoYao=function(){this.Rpc(C2sProtocol.cs_money_tree_play)},t.prototype.GetRechargeGift=function(e){var t=new Sproto.cs_recharge_gift_reward_request;t.index=e,this.Rpc(C2sProtocol.cs_recharge_gift_reward,t)},t.prototype.sendGetCaseReward=function(e){var t=new Sproto.cs_money_tree_reward_request;t.id=e,this.Rpc(C2sProtocol.cs_money_tree_reward,t)},t.prototype.DoRechargeInfo=function(e){this.mRechargeDay=e.dayNum,this.mAwardBits=e.drawBinList,GameGlobal.MessageCenter.dispatch(MessageDef.MONEY_RECHARGE_GIFT_CHANGE)},t.prototype.doMoneyTreeInfo=function(e){this.playNum=e.playNum,this.boxOn=e.boxOn,this.addCoefficient=e.addCoefficient,this.exp=e.exp,this.boxInfo=e.boxInfo,GameGlobal.MessageCenter.dispatch(MessageDef.MONEY_INFO_CHANGE)},t.prototype.doPalyBack=function(e){this.playNum=e.playNum,this.boxOn=e.boxOn,this.addCoefficient=e.addCoefficient,this.exp=e.exp,this.baoji=e.baoji,GameGlobal.MessageCenter.dispatch(MessageDef.MONEY_INFO_CHANGE,!1,this.baoji)},t.prototype.doGetRewardBack=function(e){this.boxInfo=e.boxInfo,GameGlobal.MessageCenter.dispatch(MessageDef.MONEY_INFO_CHANGE)},t.ins=function(){return e.ins.call(this)},t.prototype.getOrderByIndex=function(e){void 0===e&&(e=0);var t=this.boxInfo>>e&1;return t},t.prototype.getNowCoefficientinfo=function(e){void 0===e&&(e=0);var t=GlobalConfig.ins("CashCowAmplitudeConfig");for(var i in t)if(t[i].level==this.addCoefficient+e)return t[i];return null},Object.defineProperty(t.prototype,"maxNum",{get:function(){if(0==this._maxNum){var e=GlobalConfig.ins("CashCowLimitConfig"),t=0;for(var i in e)t=e[i].maxTime;this._maxNum=t}return this._maxNum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cruMaxNum",{get:function(){return this.checkCashCowBasicLenght()},enumerable:!0,configurable:!0}),t.prototype.getIndexCost=function(){var e=GlobalConfig.ins("CashCowBasicConfig");for(var t in e)if(e[t].time==this.boxOn+1)return e[t];return null},t.prototype.getBoxInfoByIndex=function(e){null==this.cashCowBoxConfig&&(this.cashCowBoxConfig=GlobalConfig.ins("CashCowBoxConfig"));var t=this.cashCowBoxConfig;for(var i in t)if(t[i].index==e)return t[i];return null},t.prototype.checkCashCowBasicLenght=function(e){void 0===e&&(e=0),0==e&&(e=GameGlobal.actorModel.vipLv);var t=GlobalConfig.ins("CashCowLimitConfig");for(var i in t)if(t[i].vip==e)return t[i].maxTime;return 0},t.prototype.checkBoxIsCanget=function(e){var t=this.getBoxInfoByIndex(e);return t.time<=this.playNum&&this.getOrderByIndex(e-1)<=0?!0:!1},t.prototype.isHaveReward=function(){if(GameGlobal.serverOpenDay<2)return!1;for(var e=1;4>e;e++)if(this.checkBoxIsCanget(e))return!0;return!1},t.GetTodayRecharge=function(){return GameGlobal.rechargeData[1]?GameGlobal.rechargeData[1].num:void 0},t.prototype.GetRechargeGiftState=function(e){var t=GameGlobal.rechargeData[1].num,i=Math.ceil(e/30)-1,o=this.mAwardBits[i];return BitUtil.Has(o||0,e-30*i)?RewardState.Gotten:this.mRechargeDay>=e?RewardState.CanGet:this.mRechargeDay==e-1&&(null==t||0>=t)?RewardState.NotReached:RewardState.Undo},t.HasRechargeGift=function(){var e=GlobalConfig.ins("RechargeGiftConfig"),i=t.ins();for(var o in e){var s=e[o];if(i.GetRechargeGiftState(s.index)==RewardState.CanGet)return!0}return!1},t.CheckOpen=function(e){return void 0===e&&(e=!1),!0},t}(BaseSystem);__reflect(MoneyTreeModel.prototype,"MoneyTreeModel"),window.MoneyTreeModel=MoneyTreeModel;var MoneyTreePanel=function(e){function t(){var t=e.call(this)||this;t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100012,t.posY=110;return t.skinName="MoneyTreeSkin",t.expMc=new MovieClip,t.expMc.x=t.groupExp.width>>1,t.expMc.y=t.groupExp.height>>1,t.expMc.scaleX=1,t.expMc.scaleY=1,t.rect=new egret.Rectangle(-65,-30,120,130),t.groupExp.addChild(t.expMc),t.baojiMc=new MovieClip,t.baojiMc.x=240,t.baojiMc.y=380,t.movieExp=new MovieClip,UIHelper.SetLinkStyleLabel(t.depictLabel2,GlobalConfig.jifengTiaoyueLg.st100013),t.starMc=new MovieClip,t.starMc.loadUrl(ResDataPath.GetUIEffePath("eff_moneytree_bg"),!0),t.addChild(t.starMc),t.starMc.x=240,t.starMc.y=200,t.depictLabel0.text=GlobalConfig.jifengTiaoyueLg.st100021,t.depictLabel1.text=GlobalConfig.jifengTiaoyueLg.st100022,t.goUpBtn.label=GlobalConfig.jifengTiaoyueLg.st100023,t.m_Lan1.text=5+GlobalConfig.jifengTiaoyueLg.st100024,t.m_Lan2.text=20+GlobalConfig.jifengTiaoyueLg.st100024,t.m_Lan3.text=50+GlobalConfig.jifengTiaoyueLg.st100024,t}return __extends(t,e),t.prototype.UpdateContent=function(){},t.prototype.open=function(){this.depictLabel2.visible=!WxSdk.ins().isHidePay();for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null==this.mc1&&(this.mc1=new MovieClip,this.mc1.x=this.image1.x-29,this.mc1.y=this.image1.y-27,this.mc2=new MovieClip,this.mc2.x=this.image2.x-29,this.mc2.y=this.image2.y-27,this.mc3=new MovieClip,this.mc3.x=this.image3.x-29,this.mc3.y=this.image3.y-27),GameGlobal.MessageCenter.addListener(MessageDef.MONEY_INFO_CHANGE,this.refushInfo,this),this.goUpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.image1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.image2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.image3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.depictLabel2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.descBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.refushInfo(!0),this.expMc.loadUrl(ResDataPath.GetUIEffePath("eff_moneytree_ball"),!0),this.bar.labelDisplay.visible=!1},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.goUpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.image1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.image2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.image3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.depictLabel2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.descBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.removeListener(MessageDef.MONEY_INFO_CHANGE,this.refushInfo,this),DisplayUtils.dispose(this.starMc),this.starMc=null,DisplayUtils.dispose(this.expMc),this.expMc=null,DisplayUtils.dispose(this.baojiMc),this.baojiMc=null,DisplayUtils.dispose(this.mc1),this.mc1=null,DisplayUtils.dispose(this.mc2),this.mc2=null,DisplayUtils.dispose(this.mc3),this.mc3=null},t.prototype.onTap=function(e){switch(e.currentTarget){case this.goUpBtn:if(MoneyTreeModel.ins().playNum>=MoneyTreeModel.ins().cruMaxNum)return void(GameGlobal.actorModel.vipLv>=MoneyTreeModel.ins().maxNum?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101612):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101613));if(GameGlobal.actorModel.yb>=this.costNum)return void MoneyTreeModel.ins().sendPlayYaoYao();UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100014);break;case this.image1:ViewManager.ins().open(MoneyTreeBoxWin,1);break;case this.image2:ViewManager.ins().open(MoneyTreeBoxWin,2);break;case this.image3:ViewManager.ins().open(MoneyTreeBoxWin,3);break;case this.depictLabel2:ViewManager.ins().open(VipWin);break;case this.descBtn:}},t.prototype.refushInfo=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=0);var o=MoneyTreeModel.ins(),s=o.getIndexCost(),n=o.getNowCoefficientinfo(),r=o.getNowCoefficientinfo(1);this.bar.maximum=50,o.playNum==o.maxNum?(this.depictLabel1.visible=!1,this.playNum.visible=!1,this.cost.visible=!1,this.getNum.text=GlobalConfig.jifengTiaoyueLg.st100015):(this.depictLabel1.visible=!0,this.playNum.visible=!0,this.cost.visible=!0,this.playNum.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100016,[o.playNum,o.cruMaxNum]),s&&(this.costNum=s.yuanbao,this.cost.setText(s.yuanbao+""),this.getNum.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st100017+"<font color = '#bfcd00' stroke='1' strokeColor='#535557'>"+CommonUtils.overLength(Math.floor(s.gold*n.rate/100))+"(+"+(n.rate-100)+"%)</font> "+GlobalConfig.jifengTiaoyueLg.st100018))),this.add.text=GlobalConfig.jifengTiaoyueLg.st100019+(n.rate-100)+"%",this.bar.value=o.playNum,e||this.moveExpMc();var a=0;null==r?this.addPoint.text=GlobalConfig.jifengTiaoyueLg.st100020:(this.addPoint.text=o.exp+"/"+r.needExp,a=85*(.5-o.exp/r.needExp)),this.rect.y=a,this.expMc.mask=this.rect,this.refushBoxInfo(),t>1&&(this.baojiMc.loadUrl(ResDataPath.GetUIEffePath("eff_critical"),!0,1,function(){i.baojiMc.parent&&i.baojiMc.parent.removeChild(i.baojiMc)}),this.addChild(this.baojiMc))},t.prototype.moveExpMc=function(){var e=this;this.movieExp.x=360,this.movieExp.y=300,this.movieExp.loadUrl(ResDataPath.GetUIEffePath("eff_moneytree_star"),!0,1),this.addChild(this.movieExp);var t=egret.Tween.get(this.movieExp);t.to({y:435,x:100},420).call(function(){egret.Tween.removeTweens(e.movieExp)})},t.prototype.refushBoxInfo=function(){for(var e=MoneyTreeModel.ins(),t=1;4>t;t++){var i=this["mc"+t];e.checkBoxIsCanget(t)?this.playEffect(i):i.parent&&DisplayUtils.removeFromParent(i)}},t.prototype.playEffect=function(e){e.loadUrl(ResDataPath.GetUIEffePath("eff_task_box"),!0,100),this.image1.parent.addChild(e)},t}(eui.Component);__reflect(MoneyTreePanel.prototype,"MoneyTreePanel",["ICommonWindowTitle"]),window.MoneyTreePanel=MoneyTreePanel;var OpinionPanel=function(e){function t(){var t=e.call(this)||this;return t.type=1,t.title="",t.skinName="OpinionPanelSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.check_1.selected=!0},t.prototype.open=function(){this.m_bg.init("OpinionPanel",GlobalConfig.jifengTiaoyueLg.st101750),this.contentTxt.text=this.qqTxt.text="",this.AddClick(this.maskBg,this.onClick),this.AddClick(this.sendBtn,this.onClick),this.AddClick(this.check_1,this.onClick),this.AddClick(this.check_2,this.onClick),this.AddClick(this.check_3,this.onClick),Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_faq_res,this.sc_faq_res_request,this)},t.prototype.close=function(){this.removeChildren()},t.prototype.onClick=function(e){if(e.currentTarget==this.maskBg)ViewManager.ins().close(t);else if(e.currentTarget==this.sendBtn){egret.log("发送");var i=new Sproto.cs_faq_req_request;i.title=this.title,i.type=this.type,i.content=this.contentTxt.text,i.contact=this.qqTxt.text,GameSocket.ins().Rpc(C2sProtocol.cs_faq_req,i)}else e.currentTarget==this.check_1?(this.check_1.selected=!0,this.check_2.selected=!1,this.check_3.selected=!1,this.type=1,this.title="bug"):e.currentTarget==this.check_2?(this.check_1.selected=!1,this.check_2.selected=!0,this.check_3.selected=!1,this.type=2,this.title=GlobalConfig.jifengTiaoyueLg.st101750):e.currentTarget==this.check_3&&(this.check_1.selected=!1,this.check_2.selected=!1,this.check_3.selected=!0,this.type=3,this.title=GlobalConfig.jifengTiaoyueLg.st101751)},t.prototype.sc_faq_res_request=function(e){egret.log(e.ret),0==e.ret?(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101752),ViewManager.ins().close(t)):1==e.ret?UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101753):2==e.ret&&UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101754)},t}(BaseEuiPanel);__reflect(OpinionPanel.prototype,"OpinionPanel"),ViewManager.ins().reg(OpinionPanel,LayerManager.UI_Popup),window.OpinionPanel=OpinionPanel;var AStarNode=function(){function e(e,t,i){this.nX=e,this.nY=t,this.nDir=i}return e}();__reflect(AStarNode.prototype,"AStarNode"),window.AStarNode=AStarNode;var MonthSingItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_ItemList.itemRenderer=ItemBase,this.m_ListData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.m_ListData,this.m_TouchGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.m_SelectImg.visible=!1,this.m_VipGroup.visible=!1,this.m_BuQingImg.visible=!1,this.m_DoubleImg.visible=!1,this.m_CompleGroup.visible=!1;var t=this.data;switch(t.siganInData){case SingType.SINGTYPE0:break;case SingType.SINGTYPE1:this.m_BuQingImg.visible=!0;break;case SingType.SINGTYPE2:this.m_CompleGroup.visible=!0;break;case SingType.SINGTYPE3:this.m_SelectImg.visible=!0}t.vipLimit&&(this.m_VipGroup.visible=!0,this.m_VipLvLab.text=t.vipLimit),this.m_ListData.removeAll(),this.m_ListData.replaceAll(t.awardList),egret.setTimeout(function(){var e=this.m_ItemList.getChildAt(0);e&&e instanceof ItemBase&&(e.count.textAlign="right")},this,100)},t.prototype.onClick=function(){if(this.data.siganInData==SingType.SINGTYPE3){var e=new Sproto.cs_activity_send_reward_request;e.id=201,e.index=this.data.singIndex,GameSocket.ins().Rpc(C2sProtocol.cs_activity_send_reward,e)}else if(this.data.siganInData==SingType.SINGTYPE1){var t=GameGlobal.activityData[201];if(t.mondCnt>0){var i=GlobalConfig.ins("LoginBaseConfig"),o=t.mondAllCnt,s=200,n=i.supplementPrice[o];null!=n&&(s=n),WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100007,[s]),function(){var e=GameLogic.ins().actorModel.yb,i=GlobalConfig.ins("LoginBaseConfig"),o=t.mondAllCnt,s=200,n=i.supplementPrice[o];if(null!=n&&(s=n),e>=s){var r=new Sproto.cs_mond_Sign_send_reward_request;r.id=201,r.index=this.data.singIndex,GameSocket.ins().Rpc(C2sProtocol.cs_mond_Sign_send_reward,r)}else UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008)},this)}else UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100009)}else UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100010)},t}(eui.ItemRenderer);__reflect(MonthSingItem.prototype,"MonthSingItem");var SingType;!function(e){e[e.SINGTYPE0=0]="SINGTYPE0",e[e.SINGTYPE1=1]="SINGTYPE1",e[e.SINGTYPE2=2]="SINGTYPE2",e[e.SINGTYPE3=3]="SINGTYPE3"}(SingType||(SingType={})),window.MonthSingItem=MonthSingItem;var MonthSingPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="MonthSingSkin",t.m_List.itemRenderer=MonthSingItem,t.m_ListData=new eui.ArrayCollection,t.m_List.dataProvider=t.m_ListData,t.m_LanLab.text=GlobalConfig.jifengTiaoyueLg.st100011,t}return __extends(t,e),t.prototype.removeEvent=function(){GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.setData,this)},t.prototype.open=function(){GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_ACTIVITY_PANEL,this.setData,this),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeEvent()},t.prototype.setData=function(){var e=GameGlobal.activityData[201];if(e){this.m_SingDayLab.text=e.signInDay+"",this.m_RetroactiveLab.text=e.mondCnt+GlobalConfig.jifengTiaoyueLg.st100006;var t=[],i=!1,o=GlobalConfig.ins("LoginConfig");1==e.todaySigan&&(i=!0);for(var s=0,n=0;n<e.siganInData.length;n++){var r=o[e.month][n][0];0==i&&e.siganInData[n]==SingType.SINGTYPE1?(i=!0,r.siganInData=SingType.SINGTYPE3):s<e.mondCnt&&e.siganInData[n]==SingType.SINGTYPE1?(s++,r.siganInData=e.siganInData[n]):e.siganInData[n]==SingType.SINGTYPE1?r.siganInData=SingType.SINGTYPE0:r.siganInData=e.siganInData[n],r.singIndex=n+1,t.push(r)}this.m_ListData.replaceAll(t)}},t}(BaseView);__reflect(MonthSingPanel.prototype,"MonthSingPanel"),window.MonthSingPanel=MonthSingPanel;var FindAssetsPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FindAssetsPanelSkin",t.list.itemRenderer=FindAssetsItem,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101305,t.onekeyYb.label=GlobalConfig.jifengTiaoyueLg.st101306,t.onkeyGold.label=GlobalConfig.jifengTiaoyueLg.st101307,t}return __extends(t,e),t.prototype.open=function(){this.onekeyYb.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.onkeyGold.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),GameGlobal.MessageCenter.addListener(MessageDef.FIND_ASSETS_UPDATE,this._DoEvent,this),FindAssetsModel.ins().SendInit(),this.UpdateContent()},t.prototype.close=function(){this.onekeyYb.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.onkeyGold.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),GameGlobal.MessageCenter.removeListener(MessageDef.FIND_ASSETS_UPDATE,this._DoEvent,this)},t.prototype._DoEvent=function(){this.UpdateContent()},t.prototype._OnClick=function(e){var i=null;switch(e.currentTarget){case this.onekeyYb:i=MoneyConst.yuanbao;break;case this.onkeyGold:i=MoneyConst.gold}if(i){for(var o=GlobalConfig.ins("RetrieveConfig"),s=0,n=[],r=0,a=FindAssetsModel.ins().assets;r<a.length;r++){var l=a[r];if(l.state==FindAssetsState.NONE){n.push(l.type);var h=o[l.type],c=i==MoneyConst.yuanbao?h.yuanbao:h.gold;c*=l.size,s+=c}}t.FindAssetsTip(!0,i,s,function(){if(Checker.Money(i,s))for(var e=0,t=n;e<t.length;e++){var o=t[e];FindAssetsModel.ins().SendAssetsGet(o,i)}},null)}},t.prototype.UpdateContent=function(){var e=FindAssetsModel.ins().assets;if(e.length>0){this.getallFlag.visible=!0;for(var t=0,i=e;t<i.length;t++){var o=i[t];if(o.state==FindAssetsState.NONE){this.getallFlag.visible=!1;break}}}else this.getallFlag.visible=!1;this.onekeyYb.enabled=!this.getallFlag.visible,this.onkeyGold.enabled=!this.getallFlag.visible,this.list.dataProvider=new eui.ArrayCollection(e)},t.FindAssetsTip=function(e,t,i,o,s){var n=t==MoneyConst.gold?GlobalConfig.jifengTiaoyueLg.st100018:GlobalConfig.jifengTiaoyueLg.st100050,r=e?GlobalConfig.jifengTiaoyueLg.st100288:"",a=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101301,[i,n,r]);WarnWin.show(a,o,s)},t}(eui.Component);__reflect(FindAssetsPanel.prototype,"FindAssetsPanel");var FindAssetsItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"NAME_TITLE",{get:function(){var e=(t={},t[1]=GlobalConfig.jifengTiaoyueLg.st101302,t[2]=GlobalConfig.jifengTiaoyueLg.st101303,t[3]=GlobalConfig.jifengTiaoyueLg.st100349,t[4]=GlobalConfig.jifengTiaoyueLg.st100362,t[5]=GlobalConfig.jifengTiaoyueLg.st101304,t[6]="",t[7]="",t);return e;var t},enumerable:!0,configurable:!0}),t.prototype.childrenCreated=function(){this.m_ItemBase=this.group.$children,this.ybGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.goldGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101308,this.ybGet.label=GlobalConfig.jifengTiaoyueLg.st101306,this.goldGet.label=GlobalConfig.jifengTiaoyueLg.st101307},t.prototype._OnClick=function(e){var t=this.data;if(t.state==FindAssetsState.NONE){var i=null;switch(e.currentTarget){case this.ybGet:i=MoneyConst.yuanbao;break;case this.goldGet:i=MoneyConst.gold}if(i){var o=t.type,s=GlobalConfig.ins("RetrieveConfig")[o],n=i==MoneyConst.yuanbao?s.yuanbao:s.gold;n*=null==t.size||0==t.size?1:t.size,FindAssetsPanel.FindAssetsTip(!1,i,n,function(){Checker.Money(i,n)&&FindAssetsModel.ins().SendAssetsGet(o,i)},null)}}},t.prototype.dataChanged=function(){var e=this.data;this.title.text=t.NAME_TITLE[e.type];var i=e.state==FindAssetsState.GET;this.getFlag.visible=i,this.ybGet.enabled=!i,this.goldGet.enabled=!i;var o,s=GlobalConfig.ins("RetrieveConfig")[e.type];o=s?s.showreward:[];for(var n=0;n<this.m_ItemBase.length;++n){var r=this.m_ItemBase[n],a=o[n];if(a){r.visible=!0;var l=new RewardData;l.id=a.id,l.type=a.type,l.count=a.count,r.data=l,r.showLegendEffe()}else r.visible=!1}},t}(eui.ItemRenderer);__reflect(FindAssetsItem.prototype,"FindAssetsItem"),window.FindAssetsPanel=FindAssetsPanel,window.FindAssetsItem=FindAssetsItem;var FuncOpenModel=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t,"INDEX_TO_NAME",{get:function(){var e=["",GlobalConfig.jifengTiaoyueLg.st101302,GlobalConfig.jifengTiaoyueLg.st100339,GlobalConfig.jifengTiaoyueLg.st101246,"PK",GlobalConfig.jifengTiaoyueLg.st101427,GlobalConfig.jifengTiaoyueLg.st101428,GlobalConfig.jifengTiaoyueLg.st101429,GlobalConfig.jifengTiaoyueLg.st100362,GlobalConfig.jifengTiaoyueLg.st101430,GlobalConfig.jifengTiaoyueLg.st101431];return e},enumerable:!0,configurable:!0}),t.ins=function(){return e.ins.call(this)},t.prototype.bReceiveState=function(e){var t=GameGlobal.actorModel.mFuncOpen,i=1<<e,o=t&i;return 0==o?!1:!0},t.prototype.sendPacket=function(e){var t=new Sproto.cs_get_gongnengyugao_reward_request;t.index=e,this.Rpc(C2sProtocol.cs_get_gongnengyugao_reward,t,this.getRewardresponse)},t.prototype.getRewardresponse=function(e){var t=e;0==t.index?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101432):(GameGlobal.actorModel.mFuncOpen=t.gongnengYugao,GameGlobal.MessageCenter.dispatch(MessageDef.FUNC_OPEN_UPDATE,!0))},t.prototype.SendGetFuncOpen=function(e){var t=new Sproto.cs_get_gongnengyugao_reward_request;t.index=e,this.Rpc(C2sProtocol.cs_get_gongnengyugao_reward,t,function(e){var t=e;0==t.index?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101432):(GameGlobal.actorModel.mFuncOpen=BitUtil.Set(GameGlobal.actorModel.mFuncOpen,t.index,!0),GameGlobal.MessageCenter.dispatch(MessageDef.FUNC_OPEN_UPDATE))})},Object.defineProperty(t.prototype,"m_Reward",{get:function(){return GameGlobal.actorModel.mFuncOpen},enumerable:!0,configurable:!0}),t.prototype.GetNextIndex=function(){null==this.funcNoticeConfig&&(this.funcNoticeConfig=GlobalConfig.ins("FuncNoticeConfig"));this.funcNoticeConfig;for(var e in GlobalConfig.funcNoticeConfig){var i=GlobalConfig.funcNoticeConfig[e];if(0==t.CheckByData(i.openLv))return i.index}return-1},t.prototype.GetNextConfigData=function(){null==this.funcNoticeConfig&&(this.funcNoticeConfig=GlobalConfig.ins("FuncNoticeConfig"));var e=this.GetNextIndex();return-1!=e?this.funcNoticeConfig[e]:null},t.prototype.GetCurCanRewardIndex=function(){for(var e in GlobalConfig.funcNoticeConfig){var t=GlobalConfig.funcNoticeConfig[e];if(this.CanReward(t.index))return t.index}return-1},t.prototype.CanReward=function(e){return this.GetRewardState(e)==RewardState.CanGet},t.prototype.AllRewardIsGet=function(){for(var e in GlobalConfig.funcNoticeConfig){var t=GlobalConfig.funcNoticeConfig[e];if(this.GetRewardState(t.index)!=RewardState.Gotten)return!1}return!0},t.prototype.GetRewardState=function(e){null==this.funcNoticeConfig&&(this.funcNoticeConfig=GlobalConfig.ins("FuncNoticeConfig"));var i=this.funcNoticeConfig[e];return i&&t.CheckByData(i.openLv)?BitUtil.Has(this.m_Reward,e)?RewardState.Gotten:RewardState.CanGet:RewardState.NotReached},t.prototype.HasReward=function(){for(var e=1;e<=t.MAX;++e)if(this.CanReward(e))return!0;return!1},t.Check=function(e,t){switch(e){case 1:return UserFb.ins().guanqiaID>=t;case 2:return t>=1e3?GameGlobal.actorModel.zsLv>=.001*t:GameGlobal.actorModel.level>=t;case 3:return GameServer.serverOpenDay>=t;case 4:return GameServer.loginDay>=t}return!1},t.CheckByData=function(e){return this.Check(e[0],e[1])},t.GetTipStrByIndex=function(e){null==this.FuncNoticeConfig&&(this.FuncNoticeConfig=GlobalConfig.ins("FuncNoticeConfig"));var i=this.FuncNoticeConfig[e],o=t.GetTipStr(i.openLv[0],i.openLv[1]);return o},t.GetTipStr=function(e,t){switch(e){case 1:return LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101433,[t]);case 2:return LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101434,[t])}return""},t.GetTipStr3=function(e,t,i){switch(e){case 1:return LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101436,[t,i]);case 2:if(t>=1e3){var o=.001*t;return LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102115,[o,i])}return LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101437,[t,i]);case 3:return LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102117,[t,i]);case 4:return LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102116,[t,i])}return""},t.HasSaveData=function(e){var t=GameGlobal.actorModel.mSaveData;return BitUtil.Has(t,e)},t.SetSaveData=function(e){GameGlobal.actorModel.mSaveData=BitUtil.Set(GameGlobal.actorModel.mSaveData,e,!0);var t=new Sproto.cs_set_clientvalue_request;t.value=GameGlobal.actorModel.mSaveData,GameSocket.ins().Rpc(C2sProtocol.cs_set_clientvalue,t)},t.MAX=10,t.SAVE_DATA_BOSS01=1,t.SAVE_DATA_BOSS02=2,t.SAVE_DATA_FALG=!1,t}(BaseSystem);__reflect(FuncOpenModel.prototype,"FuncOpenModel"),window.FuncOpenModel=FuncOpenModel;var FuwenItemData=function(){function e(e){this.openStatus=e.openStatus,this.level=e.level,this.equipDatas=[];for(var t=0,i=e.equipDatas;t<i.length;t++){var o=i[t],s=new ItemData;s.parser(o),this.equipDatas.push(s)}}return e}();__reflect(FuwenItemData.prototype,"FuwenItemData"),window.FuwenItemData=FuwenItemData;var FuwenListPanel=function(e){function t(){var t=e.call(this)||this;t.m_List=[],t.skinName="FuwenListPanelSkin",t.list.itemRenderer=FuwenListItem;var i=[GlobalConfig.jifengTiaoyueLg.st100287,GlobalConfig.jifengTiaoyueLg.st100288];return t.tabBar.dataProvider=new eui.ArrayCollection(i),t.tabBar.selectedIndex=0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100291
},t.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.m_RoleIndex=e[0],t.m_Type=e[1],this.AddClick(this.getwayLabel,this._OnClick),this.AddItemClick(this.tabBar,this._UpdateContent),this.observe(MessageDef.FUWEN_EQUIP_UPDATE,this._UpdateContent),this._UpdateContent(),this.m_bg.init("FuwenListPanel",GlobalConfig.jifengTiaoyueLg.st100289)},t.prototype.close=function(){},t.prototype._OnClose=function(e){ViewManager.ins().close(this)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.getwayLabel:FuwenPanel.BuyGoodsWarn()}},t.prototype._UpdateContent=function(){for(var e=GameGlobal.actorModel.level,i=GameGlobal.zsModel.lv,o=[],s=UserBag.ins().getBagEquipByType(ItemType.FUWEN),n=SubRoles.ins().getSubRoleByIndex(t.m_RoleIndex),r=0,a=s;r<a.length;r++){var l=a[r];l.itemConfig.job==n.job&&l.itemConfig.subType==t.m_Type&&e>=l.itemConfig.level&&i>=l.itemConfig.zsLevel&&o.push(l)}this.m_List[0]=o,this.m_List[1]=s,this.list.dataProvider=new eui.ArrayCollection(this.m_List[this.tabBar.selectedIndex])},t.LAYER_LEVEL=LayerManager.UI_Popup,t.m_RoleIndex=0,t.m_Type=0,t}(BaseEuiPanel);__reflect(FuwenListPanel.prototype,"FuwenListPanel");var FuwenListItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.isShowJob(!0)},t.prototype.showDetail=function(){this.data.itemConfig.subType==FuwenListPanel.m_Type?WarnWin.show(GlobalConfig.jifengTiaoyueLg.st100290,this._OnClick,this):e.prototype.showDetail.call(this)},t.prototype._OnClick=function(){FuwenModel.ins().SendEquipup(FuwenListPanel.m_RoleIndex,this.data.handle,FuwenListPanel.m_Type)},t}(ItemBase);__reflect(FuwenListItem.prototype,"FuwenListItem"),window.FuwenListPanel=FuwenListPanel,window.FuwenListItem=FuwenListItem;var FuwenModel=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_fuwen_open_ret,t._DoOpenResult),t.regNetMsg(S2cProtocol.sc_fuwen_equipup_data,t._DoEquipData),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype._DoOpenResult=function(e){if(0!=e.result)return void console.log("FuwenModel:_DoOpenResult result",e.result);var t=SubRoles.ins().getSubRoleByIndex(e.roleID);if(t){t.fuwen.openStatus=!0;for(var i=0,o=t.fuwen.equipDatas;i<o.length;i++){var s=o[i],n=s.itemConfig.id%100;n>t.fuwen.level&&(t.fuwen.level=n)}GameGlobal.MessageCenter.dispatch(MessageDef.FUWEN_EQUIP_OPEN)}},t.prototype._DoEquipData=function(e){var t=SubRoles.ins().getSubRoleByIndex(e.roleID);if(t){var i=new ItemData;i.parser(e.data),t.fuwen.equipDatas[e.equipPos]=i,t.fuwen.level=e.level,GameGlobal.MessageCenter.dispatch(MessageDef.FUWEN_EQUIP_UPDATE)}},t.prototype.SendEquipup=function(e,t,i){var o=new Sproto.cs_fuwen_equipup_request;o.itemHandle=t,o.roleID=e,o.pos=i,this.Rpc(C2sProtocol.cs_fuwen_equipup,o)},t.prototype.SendOpen=function(e){var t=new Sproto.cs_fuwen_open_request;t.roleID=e,this.Rpc(C2sProtocol.cs_fuwen_open,t)},t.prototype.GetRoleFuwen=function(e){var t=SubRoles.ins().getSubRoleByIndex(e);return t?t.fuwen:null},t.prototype.CalculationFuwenRedPointByRoleIndex=function(e){var t=SubRoles.ins().getSubRoleByIndex(e);if(!t)return!1;var i=this.CalculationFuwenScore(e,!0,!0);for(var o in i)if(i[o])return!0;return!1},t.prototype.CalculationFuwenRedPoint=function(){for(var e=0,t=SubRoles.ins().subRolesLen;t>e;++e)if(this.CalculationFuwenRedPointByRoleIndex(e))return!0;return!1},t.prototype.CalculationFuwenScore=function(e,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1);var s=SubRoles.ins().getSubRoleByIndex(e);if(!s)return t.EMPTY_TABLE;for(var n=s.fuwen.equipDatas,r=GameLogic.ins().actorModel.level,a=UserZs.ins().lv,l={},h=UserBag.ins().getBagEquipByType(ItemType.FUWEN),c=0,u=h;c<u.length;c++){var d=u[c],p=d.itemConfig;if(!(p.job!=s.job||p.level>r||p.zsLevel>a)){var f=l[p.subType];f||(f=l[p.subType]=[]),f.push(d)}}for(var g=null,_=0;_<=n.length;++_){var f=l[_];if(f){var m=n[_],v=void 0;v=0==m.configID?-1:m.point;for(var y=0,b=f;y<b.length;y++){var C=b[y],T=ItemConfig.calculateBagItemScore(C);if((-1==v||!o||C.mIsNewItem)&&T>v&&(g||(g=[]),g[_]=C,v=T,i))break}if(i&&g)break}}return g||t.EMPTY_TABLE},t.prototype.MarkLookupItem=function(e){var t=SubRoles.ins().getSubRoleByIndex(e);if(t)for(var i=UserBag.ins().getBagEquipByType(ItemType.FUWEN),o=0,s=i;o<s.length;o++){var n=s[o];n.itemConfig.job==t.job&&(n.mIsNewItem=!1)}},t.prototype.showHejiDetail=function(){if(!(SubRoles.ins().subRolesLen<=1)){for(var e={PlayerEnhance:0,MonsterEnhance:0,power:0},t=0;t<SubRoles.ins().subRolesLen;++t){var i=SubRoles.ins().getSubRoleByIndex(t).fuwen,o=GlobalConfig.ins("FuwenLevelConfig")[i.level];e.PlayerEnhance+=o.PlayerEnhance,e.MonsterEnhance+=o.MonsterEnhance,e.power+=o.power}var s=new eui.Component;s.skinName="FuwenTipsSkin",s.currentState="total",s.cd.text=GlobalConfig.skillsConfig[UserSkill.POWER_SKILL].cd/1e3+"S",s.info0.text="对玩家造成"+e.PlayerEnhance/100+"%伤害",s.info1.text="对怪物造成"+e.MonsterEnhance/100+"%伤害",s.power.text="战斗力："+e.power,s.powerLabel.text=e.power+"",s.gotoLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Deblocking.Check(DeblockingType.TYPE_07)&&ViewManager.ins().open(ZsWin,1)},null),s.addEventListener(egret.TouchEvent.TOUCH_END,function(){s.$getEventMap()[egret.TouchEvent.TOUCH_END]=null,LayerManager.UI_Popup.removeChild(s)},s),LayerManager.UI_Popup.addChild(s)}},t.EMPTY_TABLE=[],t}(BaseSystem);__reflect(FuwenModel.prototype,"FuwenModel"),window.FuwenModel=FuwenModel;var FuwenPanel=function(e){function t(){var t=e.call(this)||this;return t.m_FuwenIndex=0,t.isUp=!1,t.redIndex=[!1,!1,!1,!1,!1,!1,!1,!1,!1],t._fuwenPosIcon=["comp_80_80_07","comp_80_80_03","comp_80_80_04","comp_80_80_10","comp_80_80_05","comp_80_80_11","comp_80_80_06","comp_80_80_09","comp_80_80_08"],t._fuwenPosIconWu=["comp_80_80_22","comp_80_80_21","comp_80_80_20","comp_80_80_19","comp_80_80_18","comp_80_80_17","comp_80_80_16","comp_80_80_15","comp_80_80_23"],t._fuwenPosIconBg=["comp_80_80_24","comp_80_80_25","comp_80_80_26","comp_80_80_27","comp_80_80_28","comp_80_80_27","comp_80_80_26","comp_80_80_25","comp_80_80_24"],t.mWindowHelpId=17,t.skinName="FuwenPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.oneKeyBtn.label=GlobalConfig.jifengTiaoyueLg.st100283,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100284},t.prototype.open=function(){this.initMc(),this.m_Items=this.itemGroup.$children;for(var e=0,t=this.m_Items;e<t.length;e++){var i=t[e];i.item.isShowJob(!1),i.item.itemIcon.ResetScale(),this.AddClick(i,this._OnItemClick)}this.AddClick(this.oneKeyBtn,this._OnClick),this.AddClick(this.ronglianBtn,this._OnClick),this.AddClick(this.openBtn,this._OnClick),this.AddClick(this.getwayLabel,this._OnClick),this.observe(MessageDef.FUWEN_EQUIP_UPDATE,this._DoEventUpdate),this.observe(MessageDef.FUWEN_EQUIP_OPEN,this._DoEventUpdate),this.observe(MessageDef.FUWEN_EQUIP_REPLACE,this._DoEventReplace)},t.prototype.initMc=function(){this.mcBgEff||(this.mcBgEff=new MovieClip,this.mcBgEff.x=this.m_BgEffGroup.width/2,this.mcBgEff.y=this.m_BgEffGroup.height/2,this.m_BgEffGroup.addChildAt(this.mcBgEff,1)),this.mcBgEff.loadUrl(ResDataPath.GetUIEffePath("eff_rune_bg"),!0,-1),this.mcIconEff||(this.mcIconEff=new MovieClip,this.mcIconEff.x=this.m_IconEffGroup.width/2,this.mcIconEff.y=this.m_IconEffGroup.height/2,this.m_IconEffGroup.addChildAt(this.mcIconEff,this.getChildIndex(this.openBtn)+1)),this.mcIconEff.loadUrl(ResDataPath.GetUIEffePath("eff_rune_icon"),!0,-1)},t.prototype.close=function(){DisplayUtils.dispose(this.mcBgEff),this.mcBgEff=null,DisplayUtils.dispose(this.mcIconEff),this.mcIconEff=null},t.prototype._DoEventUpdate=function(){UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100274),this.UpdateContent()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.oneKeyBtn:for(var i=FuwenModel.ins().CalculationFuwenScore(this.m_RoleSelectPanel.getCurRole()),o=ItemConfig.FuwenEquipSlot.Slot0;o<ItemConfig.FuwenEquipSlot.Count;++o){var s=i[o];s&&(this.isUp=!0,FuwenModel.ins().SendEquipup(this.m_RoleSelectPanel.getCurRole(),s.handle,o))}break;case this.openBtn:UserSkill.ins().CheckHejiSkill()&&this.showFuwenZhenDetail();break;case this.ronglianBtn:this.showFuwenAllAttr();break;case this.getwayLabel:t.BuyGoodsWarn()}},t.prototype.showFuwenZhenDetail=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()),t=e.fuwen,i=GlobalConfig.ins("FuwenLevelConfig")[t.level],o=new eui.Component,s=0;o.skinName="FuwenTipsSkin",o.cd.text=GlobalConfig.skillsConfig[UserSkill.POWER_SKILL].cd/1e3+"S",o.jobLevelLabel.text=Role.jobNumberToName(e.job)+GlobalConfig.jifengTiaoyueLg.st100275+"：",o.jobEffeLabel.text=Role.jobNumberToName(e.job)+GlobalConfig.jifengTiaoyueLg.st100276+"：",o.nextJobEffeLabel.text=Role.jobNumberToName(e.job)+GlobalConfig.jifengTiaoyueLg.st100276+"：",o.lv.text=this._GetFuwenLevelText(t.level);var n=0;if(SubRoles.ins().subRolesLen>1){o.lv0.text=o.lv.text,o.info0.text=GlobalConfig.jifengTiaoyueLg.st100277+(i.PlayerEnhance/100+"%"),o.info1.text=GlobalConfig.jifengTiaoyueLg.st100278+(i.MonsterEnhance/100+"%");for(var r=0;r<SubRoles.ins().subRolesLen;++r){var a=SubRoles.ins().getSubRoleByIndex(r).fuwen,l=GlobalConfig.ins("FuwenLevelConfig")[a.level];s+=l.power}o.powerLabel.text=s+""}else o.lv0.text=GlobalConfig.jifengTiaoyueLg.st100279,o.info0.text=GlobalConfig.jifengTiaoyueLg.st100280,o.info1.visible=!1,o.powerLabel.text="0",n=138;o.power.text=GlobalConfig.jifengTiaoyueLg.st100306+("："+i.power);var h=Role.GetNextLv(t.level);if(h){i=GlobalConfig.ins("FuwenLevelConfig")[h],o.lv1.text=this._GetFuwenLevelText(h)+"",o.info2.text=GlobalConfig.jifengTiaoyueLg.st100277+(i.PlayerEnhance/100+"%"),o.info3.text=GlobalConfig.jifengTiaoyueLg.st100278+(i.MonsterEnhance/100+"%");for(var c=[],u=0,d="",r=0,p=t.equipDatas.length;p>r;++r){var f=t.equipDatas[r],g=null!=f.itemConfig&&1e3*f.itemConfig.zsLevel+f.itemConfig.level>=h;u+=g?1:0,c.push(g),d+=StringUtils.addColor(Role.typeFuwenNumberToName(r)+" ",g?Color.Green:Color.Gray)}o.nextLevelTip.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100281,[this._GetFuwenLevelText(h),u,c.length]),o.nextLabelList.textFlow=TextFlowMaker.generateTextFlow(d)}else n=141;if(n>0){o.group.height-=n,o.background.height-=n;for(var _=o.moreGroup,r=0;r<_.numChildren;++r)_.getChildAt(r).visible=!1}o.addEventListener(egret.TouchEvent.TOUCH_END,function(){o.$getEventMap()[egret.TouchEvent.TOUCH_END]=null,LayerManager.UI_Popup.removeChild(o)},o),LayerManager.UI_Popup.addChild(o)},t.prototype.showFuwenAllAttr=function(){for(var e="",t=0,i=0,o=[],s=[],n=[],r=0;r<=JobConst.DaoShi;++r){var a=SubRoles.ins().GetSubRoleByJob(r);if(null!=a){var l=a.fuwen;l.level>0&&(e.length>0&&(e+="\n"),e+="|C:0xD2C76A&T:"+Role.jobNumberToName(r)+GlobalConfig.jifengTiaoyueLg.st100275+"：|C:0x535557&T:"+this._GetFuwenLevelText(l.level)+"|");var h=GlobalConfig.ins("FuwenLevelConfig")[l.level];t+=h.PlayerEnhance,i+=h.MonsterEnhance,null==this.EquipConfig&&(this.EquipConfig=GlobalConfig.equipConfig);for(var c=0;c<ItemConfig.FuwenEquipSlot.Count;++c){var u=this.EquipConfig[l.equipDatas[c].configID];if(u){for(var d in Role.translate){var p=u[d];if(!(0>=p)){var f=o[d];f&&(p+=f),o[d]=p}}s=AttributeData.AttrAddition(s,l.equipDatas[c].att),n=AttributeData.AttrAddition(n,u.baseAttr)}}}}var g=new eui.Component;g.skinName="FuwenAllAttrSkin",g.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100285,g.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st100301+"：",g.languageTxt1.text=GlobalConfig.jifengTiaoyueLg.st100304+"：",g.des.text=GlobalConfig.jifengTiaoyueLg.st100286;e.length>0?g.lvInfo.textFlow=TextFlowMaker.generateTextFlow(e):g.lvInfo.textFlow=TextFlowMaker.generateTextFlow("|C:0xD2C76A&T:"+GlobalConfig.jifengTiaoyueLg.st100275+"：|C:0x535557&T:0"+GlobalConfig.jifengTiaoyueLg.st100093+"|"),SubRoles.ins().subRolesLen>=2&&t>0?g.infoHurt.textFlow=TextFlowMaker.generateTextFlow("|C:0xCA8A00&S:20&T:"+GlobalConfig.jifengTiaoyueLg.st100276+("：|\n"+GlobalConfig.jifengTiaoyueLg.st100277+" +"+Math.floor(t/100)+"%\n"+GlobalConfig.jifengTiaoyueLg.st100278+" +"+Math.floor(i/100)+"%")):g.infoHurt.text=GlobalConfig.jifengTiaoyueLg.st100282;var _=0;if(s.forEach(function(e){o[Role.inverseTranslate[e.type]]&&(g["attr"+_].text=AttributeData.getAttrStrByType(e.type)+": "+o[Role.inverseTranslate[e.type]]+" +"+e.value),++_}),0==n.length)g.moreAttr.text=GlobalConfig.jifengTiaoyueLg.st100280;else{var m="";n.forEach(function(e){m.length>0&&(m+="\n"),m+=AttributeData.getAttStr(e,0,1,": ")}),g.moreAttr.text+=m}g.background.height=550+g.moreAttr.height,g.addEventListener(egret.TouchEvent.TOUCH_END,function(){g.$getEventMap()[egret.TouchEvent.TOUCH_END]=null,LayerManager.UI_Popup.removeChild(g)},g),LayerManager.UI_Popup.addChild(g)},t.BuyGoodsWarn=function(){UserWarn.ins().setBuyGoodsWarn(501001,1)},t.prototype._OnItemClick=function(e){var t=this.m_Items.indexOf(e.currentTarget);if(-1!=t){var i=this._GetCurFuwenData().equipDatas,o=i[t];if(o){var s=o.configID;if(0==s)return void ViewManager.ins().open(FuwenListPanel,this.m_RoleSelectPanel.getCurRole(),t);var n=GlobalConfig.itemConfig[s];ViewManager.ins().open(EquipDetailedWin,1,o.handle,n.id,o,null,t)}}},t.prototype._DoEventReplace=function(e){ViewManager.ins().open(FuwenListPanel,this.m_RoleSelectPanel.getCurRole(),e)},t.prototype._GetCurFuwenData=function(){return SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()).fuwen},t.prototype._GetFuwenLevelText=function(e){return 1e3>e?""+e+GlobalConfig.jifengTiaoyueLg.st100093:""+e/1e3+GlobalConfig.jifengTiaoyueLg.st100067},t.prototype.UpdateContent=function(){for(var e=this._GetCurFuwenData(),t=GlobalConfig.ins("FuwenLevelConfig")[e.level],i=e.openStatus&&t.power||0,o=0,s=e.equipDatas.length;s>o;++o){var n=e.equipDatas[o],r=this.m_Items[o];if(0==n.configID)r.item.clear(),r.item.itemIcon.setItemImg(this._fuwenPosIconWu[o]+"_png"),r.imgBg.source="comp_80_80_29_png",r.item.itemIcon.hideItemBg(!1);else if(r.imgBg.source=this._fuwenPosIconBg[o]+"_png",i+=ItemConfig.calculateBagItemScore(n),r.item.data=n.configID,r.item.itemIcon.setItemImg(this._fuwenPosIcon[o]+"_png"),r.item.itemIcon.hideItemBg(!1),this.isUp&&this.redIndex[o]){var a=new MovieClip;a.x=r.x+40,a.y=r.y+31,a.loadUrl(ResDataPath.GetUIEffePath("eff_rune_set"),!0,1,function(e){DisplayUtils.dispose(e),e=null}),this.itemGroup.addChild(a)}r.item.nameTxt.y=115,r.item.itemIcon.imgBg.verticalCenter=1,r.item.itemIcon.imgBg.horizontalCenter=-.5}this.powerLabel.text=i,this.isUp=!1;for(var l=!1,h=FuwenModel.ins(),c=h.CalculationFuwenScore(this.m_RoleSelectPanel.getCurRole()),u=ItemConfig.FuwenEquipSlot.Slot0;u<ItemConfig.FuwenEquipSlot.Count;++u){var d=c[u];d&&d.mIsNewItem&&(l=!0),this.m_Items[u].item.IsShowRedPoint(d?!0:!1),this.redIndex[u]=d?!0:!1}for(var o=0,s=SubRoles.ins().subRolesLen;s>o;++o)this.m_RoleSelectPanel.showRedPoint(o,h.CalculationFuwenRedPointByRoleIndex(o));UIHelper.SetBtnNormalEffe(this.oneKeyBtn,l),FuwenModel.ins().MarkLookupItem(this.m_RoleSelectPanel.getCurRole()),this.levelLabel.text=GlobalConfig.jifengTiaoyueLg.st100275+"："+this._GetFuwenLevelText(e.level)},t}(BaseView);__reflect(FuwenPanel.prototype,"FuwenPanel",["ICommonWindowRoleSelect","ICommonWindowTitle"]),window.FuwenPanel=FuwenPanel;var BarDoubleComp=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.setLelDisp=function(){this.labelDisplay.text=this.m_ExpBar.labelDisplay.text},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_ExpBar.labelDisplay.visible=!1,this.m_ExpBar.labelDisplay.addEventListener(egret.Event.CHANGE,this.setLelDisp,this)},t}(eui.ProgressBar);__reflect(BarDoubleComp.prototype,"BarDoubleComp"),window.BarDoubleComp=BarDoubleComp;var GadBagItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GadBagItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=GadModel.getInstance;t.setStarNum(this.itemConfig.quality,this.m_StarGroup);var i=this.data,o=t.gadBagDic.get(i.handle);this.m_Lv.text="+"+o.level},t}(ItemBase);__reflect(GadBagItem.prototype,"GadBagItem"),window.GadBagItem=GadBagItem;var GadItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GadItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_AddImg.visible=!1,this.m_SelectGouImg.visible=!1},t.prototype.setData=function(e,t){void 0===t&&(t=!0);var i=e.itemConfig.quality;this.m_Icon.source=e.itemConfig.icon+"_png","GadItemBigStarSkin"==this.skinName?GadModel.getInstance.setStarNum(i,this.m_StarGroup,.8):GadModel.getInstance.setStarNum(i,this.m_StarGroup),t?(this.m_Lv.visible=!0,this.m_Lv.text="+"+e.level):this.m_Lv.visible=!1,this.m_Bg.source=ResDataPath.GetItemQualityName(i)},t}(eui.Component);__reflect(GadItem.prototype,"GadItem"),window.GadItem=GadItem;var GadLvUpItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GadItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_SelectGouImg.visible=!1},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;if(t.configID>0){this.m_Icon.visible=!0,this.m_Lv.visible=!0,this.m_StarGroup.visible=!0,this.m_Icon.source=t.itemConfig.icon+"_png",this.m_Lv.text="+"+t.level;var i=t.star;GadModel.getInstance.setStarNum(i,this.m_StarGroup),this.m_Bg.source=ResDataPath.GetItemQualityName(t.star)}else this.m_Bg.source=ResDataPath.GetItemQualityName(0),this.m_Icon.visible=!1,this.m_Lv.visible=!1,this.m_StarGroup.visible=!1},t.prototype.release=function(){DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null},t.prototype.playEff=function(){var e=this.data;e.configID>0&&this.playBodyEff()},t.prototype.playBodyEff=function(){this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_MianGroup,"eff_ui_icon")},t.prototype.guideSet=function(){this.m_Bg.source=ResDataPath.GetItemQualityName(0),this.m_Icon.visible=!1,this.m_Lv.visible=!1,this.m_StarGroup.visible=!1},t}(eui.ItemRenderer);__reflect(GadLvUpItem.prototype,"GadLvUpItem"),window.GadLvUpItem=GadLvUpItem;var GadLvUpSelectItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GadItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent(),this.m_AddImg.visible=!1},t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=GadModel.getInstance,i=this.data;this.m_Icon.source=i.itemConfig.icon+"_png",this.m_Lv.text="+"+i.level;var o=i.star;GadModel.getInstance.setStarNum(o,this.m_StarGroup);var s=t.lvUpSelectData.get(i.handle);s?this.m_SelectGouImg.visible=!0:this.m_SelectGouImg.visible=!1,this.m_Bg.source=ResDataPath.GetItemQualityName(i.star)},t.prototype.onClick=function(){var e=GadModel.getInstance,t=this.data,i=e.lvUpSelectData.get(t.handle);i?(e.lvUpSelectData.remove(t.handle),GameGlobal.MessageCenter.dispatch(GadEvent.GAD_SELECT_DATAUPDATE_MSG),this.dataChanged()):e.lvUpSelectData.length<20?(e.lvUpSelectData.set(t.handle,t),GameGlobal.MessageCenter.dispatch(GadEvent.GAD_SELECT_DATAUPDATE_MSG),this.dataChanged()):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101755)},t}(eui.ItemRenderer);__reflect(GadLvUpSelectItem.prototype,"GadLvUpSelectItem"),window.GadLvUpSelectItem=GadLvUpSelectItem;var GadLvUpSelectWin=function(e){function t(){var t=e.call(this)||this;return t.isUPSort=!1,t.skinName="GadLvUpSelectWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=GadLvUpSelectItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData;for(var t=0;t<this.m_TogGroup.numChildren;t++){var i=this.m_TogGroup.getChildAt(t);i&&i instanceof eui.ToggleButton&&1==i.selected&&(i.touchEnabled=!1)}this.m_LvTog.label=GlobalConfig.jifengTiaoyueLg.st100333,this.m_StarTog.label=GlobalConfig.jifengTiaoyueLg.st100334,this.m_PointTog.label=GlobalConfig.jifengTiaoyueLg.st100335,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100337,this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100040,this.m_AllAddBtn.label=GlobalConfig.jifengTiaoyueLg.st100338,this.m_bg.init("GadLvUpSelectWin",GlobalConfig.jifengTiaoyueLg.st100336)},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.m_SortLab.text=GlobalConfig.jifengTiaoyueLg.st100332},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release(),GameGlobal.MessageCenter.dispatch(GadEvent.GAD_SURESELECT_DATAUPDATE_MSG)},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.observe(GadEvent.GAD_SELECT_DATAUPDATE_MSG,this.changeSelect),this.AddClick(this.m_MainBtn,this.onClickMainBtn),this.AddClick(this.m_LvTog,this.onClickTog),this.AddClick(this.m_StarTog,this.onClickTog),this.AddClick(this.m_PointTog,this.onClickTog),this.AddClick(this.m_SortGroup,this.onClickSort),this.AddClick(this.m_AllAddBtn,this.onClickAddAll)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=GadModel.getInstance,t=e.gadBagDic.values;1==this.m_LvTog.selected?1==this.isUPSort?t.sort(this.sorUpLevel):t.sort(this.sorDownLevel):1==this.m_StarTog.selected?1==this.isUPSort?t.sort(this.sorUpStar):t.sort(this.sorDownStar):1==this.m_PointTog.selected&&(1==this.isUPSort?t.sort(this.sorUpSlot):t.sort(this.sorDownSlot)),this.listData.replaceAll(t);var i=e.lvUpSelectData.values.length;this.m_SelectNumLab.text=GlobalConfig.jifengTiaoyueLg.st100330+i+"/20",this.checkGuide()},t.prototype.onClickMainBtn=function(){this.onClickClose()},t.prototype.onClickTog=function(e){for(var t=0;t<this.m_TogGroup.numChildren;t++){var i=this.m_TogGroup.getChildAt(t);i&&i instanceof eui.ToggleButton&&1==i.selected&&(i.touchEnabled=!0,i.selected=!1)}var o=e.currentTarget;o.touchEnabled=!1,o.selected=!0,this.setData()},t.prototype.onClickSort=function(){this.isUPSort=!this.isUPSort,this.isUPSort?(this.m_SortImg.source="rect_btn_39_28_png",this.m_SortLab.text=GlobalConfig.jifengTiaoyueLg.st100331):(this.m_SortImg.source="rect_btn_39_28_02_png",this.m_SortLab.text=GlobalConfig.jifengTiaoyueLg.st100332),this.setData()},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.sorUpLevel=function(e,t){return e.level-t.level},t.prototype.sorDownLevel=function(e,t){return t.level-e.level},t.prototype.sorUpStar=function(e,t){return e.star-t.star},t.prototype.sorDownStar=function(e,t){return t.star-e.star},t.prototype.sorUpSlot=function(e,t){return e.slot-t.slot},t.prototype.sorDownSlot=function(e,t){return t.slot-e.slot},t.prototype.changeSelect=function(){var e=GadModel.getInstance,t=e.lvUpSelectData.values.length;this.m_SelectNumLab.text=GlobalConfig.jifengTiaoyueLg.st100330+t+"/20"},t.prototype.onClickAddAll=function(){var e=GadModel.getInstance,t=this.listData.source;e.lvUpSelectData.clear();var i=20;t.length<20&&(i=t.length);for(var o=0;i>o;o++)e.lvUpSelectData.set(t[o].handle,t[o]);this.setData()},t.prototype.checkGuide=function(){20==Setting.currPart&&7==Setting.currStep?(GuideUtils.ins().show(this.m_AllAddBtn,20,7),this.m_AllAddBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextGuide,this,!0,10)):20==Setting.currPart&&8==Setting.currStep&&(GuideUtils.ins().show(this.m_MainBtn,20,8),this.m_MainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextGuide2,this,!0,10))},t.prototype.nextGuide=function(){GuideUtils.ins().next(this.m_AllAddBtn),this.m_AllAddBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.nextGuide,this,!0)},t.prototype.nextGuide2=function(){GuideUtils.ins().next(this.m_MainBtn),this.m_MainBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.nextGuide2,this,!0)},t}(BaseEuiPanel);__reflect(GadLvUpSelectWin.prototype,"GadLvUpSelectWin"),ViewManager.ins().reg(GadLvUpSelectWin,LayerManager.UI_Popup),window.GadLvUpSelectWin=GadLvUpSelectWin;var GadLvUpWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GadLvUpWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=GadLvUpItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100325,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100326,this.m_FullLab.text=GlobalConfig.jifengTiaoyueLg.st100327,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100218,this.m_UpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st100317,this.m_StateTile.text=GlobalConfig.jifengTiaoyueLg.st100328,this.m_StateTile0.text=GlobalConfig.jifengTiaoyueLg.st100329,this.m_bg.init("GadLvUpWin",GlobalConfig.jifengTiaoyueLg.st100324)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.gadData=e[0],GadModel.getInstance.setAutoLvUpItem(),this.addViewEvent(),this.setData()},t.prototype.close=function(){var e=GadModel.getInstance;e.lvUpSelectData.clear(),this.release()},t.prototype.release=function(){for(var e=this.m_List.numChildren,t=0;e>t;t++){var i=this.m_List.getChildAt(t);i&&i instanceof GadLvUpItem&&i.release()}DisplayUtils.dispose(this.m_BodyEff),this.m_BodyEff=null,DisplayUtils.dispose(this.m_BodyEff0),this.m_BodyEff0=null,DisplayUtils.dispose(this.m_UpLvEff),this.m_UpLvEff=null,DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null,this.removeViewEvent()},t.prototype.addViewEvent=function(){this.m_List.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClickList,this),this.observe(GadEvent.GAD_DATAUPDATE_MSG,this.setData),this.observe(GadEvent.GAD_SURESELECT_DATAUPDATE_MSG,this.setData),this.observe(GadEvent.GAD_LVUP_MSG,this.getLvUpMsg),this.AddClick(this.m_UpLvBtn,this.onClickLvUpBtn)},t.prototype.removeViewEvent=function(){this.m_List.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClickList,this)},t.prototype.getLvUpMsg=function(){for(var e=this.m_List.numChildren,t=0;e>t;t++){var i=this.m_List.getChildAt(t);i&&i instanceof GadLvUpItem&&i.playEff()}this.playBodyEff(),this.setData()},t.prototype.setData=function(){var e=GadModel.getInstance,t=this.gadData;this.m_TipsLab.visible=!1,this.m_GadItem.setData(t,!1);var i=Math.floor(UserBag.getAttrPower(t.attr));this.m_Power.text=i,this.m_NameLab.text=t.itemConfig.name+" +"+t.level,this.m_PointLab.text=GlobalConfig.jifengTiaoyueLg.st100315+t.slot;for(var o=[],s=0,n=[],r=0;20>r;r++){var a=e.lvUpSelectData.values[r];if(a&&!t.isLvMax&&s<t.maxLvNeedExp)o.push(a),s+=a.supexp;else if(a){n.push(a.handle);var l=new GadBagData;l.configID=-1,o.push(l)}else{var l=new GadBagData;l.configID=-1,o.push(l)}}for(var r=0;r<n.length;r++)e.lvUpSelectData.remove(n[r]);this.listData.replaceAll(o);var h=e.getNowSelectItemAllExpAndGold(),c=GlobalConfig.ins("COAlevelConfig")[t.itemConfig.quality][t.level],u=0;c&&(u=c.exp),this.m_ExpBar.maximum=u,this.m_ExpBar.value=t.exp,this.m_ExpBar.m_ExpBar.maximum=u,this.m_ExpBar.m_ExpBar.value=h.exp+t.exp,this.m_LeftLvLab.text="+"+t.level,AttributeData.setAttrGroup(this.gadData.mainAttr,this.m_LvLeftAttrGroup),AttributeData.setAttrGroup(this.gadData.lotAttr,this.m_LastAttrGroup);var d=GlobalConfig.ins("COAlevelConfig")[t.itemConfig.quality][t.level+1];if(d)if(e.lvUpSelectData.length>0){this.m_ArrImg.visible=!0,this.m_RightGroup.visible=!0,this.m_RightLvLab.visible=!0,this.m_LeftGroup.horizontalCenter=-121,this.m_MainBtnGroup.visible=!0,this.m_FullLab.visible=!1;var p=e.getUpLvNumBuyExp(t,h.exp);this.m_RightLvLab.text="+"+p.lv,(p.lv%3==0||p.lv-t.level>=3)&&p.lv>t.level&&(this.m_TipsLab.visible=!0,this.gadData.lotAttr.length>=4?this.m_TipsLab.text=GlobalConfig.jifengTiaoyueLg.st100320:this.m_TipsLab.text=GlobalConfig.jifengTiaoyueLg.st100321);var f=GlobalConfig.ins("COAwordproduceConfig")[t.itemid],g=1e-4*f.mainlevelup;if(f){var _=GlobalConfig.ins("COAmainwordConfig"),m=[],v=_[t.mainId];if(v){var y={type:v.value[0].type,value:v.value[0].value+v.value[0].value*g*p.lv};m.push(y)}p.lv>t.level?AttributeData.setAttrGroup(m,this.m_LvRightAttrGroup,18,Color.Red):AttributeData.setAttrGroup(this.gadData.mainAttr,this.m_LvRightAttrGroup,18,Color.FontColor)}this.setNeeItem(h.gold)}else this.m_ArrImg.visible=!1,this.m_RightGroup.visible=!1,this.m_RightLvLab.visible=!1,this.m_LeftGroup.horizontalCenter=0,this.m_MainBtnGroup.visible=!0,this.m_FullLab.visible=!1,this.setNeeItem(0);else this.m_ArrImg.visible=!1,this.m_RightGroup.visible=!1,this.m_RightLvLab.visible=!1,this.m_LeftGroup.horizontalCenter=0,this.m_MainBtnGroup.visible=!1,this.m_FullLab.visible=!0,this.m_ExpBar.maximum=0,this.m_ExpBar.value=0;this.checkGuide()},t.prototype.setNeeItem=function(e){var t=[],i={type:0,id:1,count:e};t.push(i),UserBag.ins().setNeedItem(t,this.m_NeedItemGroup)},t.prototype.onClickLvUpBtn=function(){var e=GadModel.getInstance,t=e.getNowSelectItemAllExpAndGold(),i=GameLogic.ins().actorModel.gold;if(i>=t.gold){for(var o=[],s=0;s<e.lvUpSelectData.values.length;s++)o.push(e.lvUpSelectData.values[s].handle);o.length>0?GadSproto.ins().sendGadLvUp(this.gadData.roleId,this.gadData.slot,o):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100322)}else UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100323)},t.prototype.onClickList=function(){ViewManager.ins().open(GadLvUpSelectWin)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.playBodyEff=function(){this.m_BodyEff=ViewManager.ins().createEff(this.m_BodyEff,this.m_BodyEffGrouo,"eff_ui_upgrade"),this.m_BodyEff0=ViewManager.ins().createEff(this.m_BodyEff0,this.m_BodyEffGrouo0,"eff_ui_iconUpgrade"),this.m_UpLvEff=ViewManager.ins().createEff(this.m_UpLvEff,this.m_LvUpEffGroup,"eff_ui_success"),this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_icon")},t.prototype.checkGuide=function(){20==Setting.currPart&&6==Setting.currStep?(this.m_GuideGadLvUpItem.visible=!0,this.m_GuideGadLvUpItem.guideSet(),GuideUtils.ins().show(this.m_GuideGadLvUpItem,20,6),this.m_GuideGadLvUpItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextGuide,this,!0,10)):this.m_GuideGadLvUpItem.visible=!1,20==Setting.currPart&&9==Setting.currStep&&(GuideUtils.ins().show(this.m_UpLvBtn,20,9),this.m_UpLvBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextGuide2,this,!0,10)),20==Setting.currPart&&10==Setting.currStep&&(GuideUtils.ins().show(this.m_bg.closeButtomBtn,20,10),this.m_bg.closeButtomBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextGuide3,this,!0,10))},t.prototype.nextGuide=function(){GuideUtils.ins().next(this.m_GuideGadLvUpItem),ViewManager.ins().open(GadLvUpSelectWin),this.m_GuideGadLvUpItem.visible=!1,this.m_GuideGadLvUpItem.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.nextGuide,this,!0)},t.prototype.nextGuide2=function(){GuideUtils.ins().next(this.m_UpLvBtn),this.m_UpLvBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.nextGuide2,this,!0)},t.prototype.nextGuide3=function(){GuideUtils.ins().next(this.m_bg.closeButtomBtn),GameGlobal.MessageCenter.dispatch(GadEvent.GAD_GUIDEEND_MSG),this.m_bg.closeButtomBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.nextGuide3,this,!0)},t}(BaseEuiPanel);__reflect(GadLvUpWin.prototype,"GadLvUpWin"),ViewManager.ins().reg(GadLvUpWin,LayerManager.UI_Popup),window.GadLvUpWin=GadLvUpWin;var GadPanel=function(e){function t(t){var i=e.call(this)||this;return i.attrState=0,i.name=GlobalConfig.jifengTiaoyueLg.st100305,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100305,i.skinName="GadPanelSkin",i.touchEnabled=!1,i.m_GetItem.text=GlobalConfig.jifengTiaoyueLg.st100418,UIHelper.SetLinkStyleLabel(i.m_GetItem),i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100307,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100308
},t.prototype.addViewEvent=function(){this.observe(GadEvent.GAD_DATAUPDATE_MSG,this.initData),this.observe(GadEvent.GAD_GUIDE_MSG,this.checkNextGuide),this.observe(GadEvent.GAD_LVUP_MSG,this.initData),this.AddClick(this.m_GadBagBtn,this.onClick),this.AddClick(this.m_GetItem,this.onClickGetLab1),this.AddClick(this.m_RightArrImg,this.onClickAttr),this.AddClick(this.m_LeftArrImg,this.onClickAttr)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.addViewEvent()},t.prototype.close=function(){this.removeEvent()},t.prototype.release=function(){this.removeEvent()},t.prototype.initData=function(){var e=GadModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.gadDic.get(i.roleID);if(e.nowSelectRoleId=i.roleID,o){for(var s=[],n=0;6>n;n++){var r=n+1,a=this["m_GadShowItem"+r];if(a&&a instanceof GadShowItem){var l=o.get(r);a.setData(l,r),s.push(l.attr);var h=this["m_Bg"+r];if(h)if(l&&l.itemid>0){var c=GlobalConfig.ins("ItemConfig")[l.itemid];c?h.source="wz_bg_85_100_0"+c.quality+"_png":h.source="comp_86_100_1_png"}else h.source="comp_86_100_1_png"}var u=AttributeData.getAttr(s);this.checkAttrState(u);var d=Math.floor(UserBag.getAttrPower(u));this.m_Power.text=d;var p=u.splice(8,u.length);0==this.attrState?AttributeData.setAttrGroup(u,this.m_AttrGroup):AttributeData.setAttrGroup(p,this.m_AttrGroup);var f=e.getShowSuitByRole(i.roleID);this.setShowSuitData(f[0],this.m_ContLab1),this.setShowSuitData(f[1],this.m_ContLab2),this.setShowSuitData(f[2],this.m_ContLab3)}this.checkRedPoint(),this.checkGuide()}},t.prototype.onClickAttr=function(e){switch(e.currentTarget){case this.m_RightArrImg:this.attrState=1;break;case this.m_LeftArrImg:this.attrState=0}this.changeShowAttr()},t.prototype.changeShowAttr=function(){var e=GadModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.gadDic.get(i.roleID);if(o)for(var s=[],n=0;6>n;n++){var r=n+1,a=o.get(r);s.push(a.attr);var l=AttributeData.getAttr(s);this.checkAttrState(l);var h=l.splice(8,l.length);0==this.attrState?AttributeData.setAttrGroup(l,this.m_AttrGroup):AttributeData.setAttrGroup(h,this.m_AttrGroup)}},t.prototype.checkAttrState=function(e){this.m_LeftArrImg.visible=!1,this.m_RightArrImg.visible=!1,e.length<=8||(0==this.attrState&&e.length>8?this.m_RightArrImg.visible=!0:1==this.attrState&&e.length>8&&(this.m_LeftArrImg.visible=!0))},t.prototype.setShowSuitData=function(e,t){if(e){var i=GlobalConfig.ins("COAsuitConfig")[e.type];if(i){var o=void 0,s=void 0;for(var n in i)i[n].Requirement<=e.haveNum&&(o=i[n]),s||(s=n);o?t.textColor=Color.Green:(t.textColor=Color.Gray,o=i[s]),t.text=o.mainname+"("+e.haveNum+"/"+o.Requirement+")     "+o.name}}else t.text=""},t.prototype.UpdateContent=function(){this.initData()},t.prototype.onClick=function(){ViewManager.ins().open(BagWin,2)},t.prototype.checkRedPoint=function(){for(var e=GadModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=0;o<this.m_RedPointGroup.numChildren;o++){var s=this.m_RedPointGroup.getChildAt(o);if(s&&s instanceof eui.Image){s.visible=!1;var n=e.checkIsCanLvUp(i.roleID,o+1);if(n){s.visible=!0;continue}var r=e.checkIsCanChangeItem(i.roleID,o+1);if(r){s.visible=!0;continue}}}},t.prototype.checkGuide=function(){20==Setting.currPart&&2==Setting.currStep&&(GuideUtils.ins().show(this.m_GadShowItem1,20,2),this.m_GadShowItem1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextGuide,this,!0,10))},t.prototype.checkNextGuide=function(){20==Setting.currPart&&4==Setting.currStep&&(GuideUtils.ins().show(this.m_GadShowItem1,20,4),this.m_GadShowItem1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextGuide,this,!0,10))},t.prototype.nextGuide=function(){GuideUtils.ins().next(this.m_GadShowItem1),this.m_GadShowItem1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.nextGuide,this,!0)},t.prototype.onClickGetLab1=function(){UserWarn.ins().setBuyGoodsWarn(400127)},t}(BaseView);__reflect(GadPanel.prototype,"GadPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.GadPanel=GadPanel;var GadSelectItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent(),this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100314},t.prototype.addEvent=function(){this.m_MainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.removeEvent=function(){this.m_MainBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data,i=GlobalConfig.ins("COAwordproduceConfig")[t.configID];if(i){-1==t.handle?this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100313:this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100314,this.m_Lab.text=t.itemConfig.name+" +"+t.level,this.m_PointLab.text=GlobalConfig.jifengTiaoyueLg.st100315+i.site,this.slot=i.site,AttributeData.setAttrGroup(t.mainAttr,this.m_StateMainGroup,18,Color.Red),AttributeData.setAttrGroup(t.lotAttr,this.m_StateGroup),this.m_GadItem.setData(t,!1);var o=Math.floor(UserBag.getAttrPower(t.attr));this.m_ScoreLab.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100316,style:{textColor:5461335}},{text:o.toString(),style:{textColor:16760614}}]}0==this.itemIndex&&this.checkGuide()},t.prototype.onClick=function(){20==Setting.currPart&&3==Setting.currStep&&(GuideUtils.ins().next(this.m_MainBtn),MessageCenter.ins().dispatch(GadEvent.GAD_GUIDE_MSG));var e=this.data,t=GadModel.getInstance;-1==e.handle?this.slot&&GadSproto.ins().sendGadEquipOff(t.nowSelectRoleId,this.slot):this.slot&&GadSproto.ins().sendGadEquipChange(t.nowSelectRoleId,this.slot,e.handle)},t.prototype.checkGuide=function(){20==Setting.currPart&&3==Setting.currStep&&GuideUtils.ins().show(this.m_MainBtn,20,3)},t}(eui.ItemRenderer);__reflect(GadSelectItem.prototype,"GadSelectItem"),window.GadSelectItem=GadSelectItem;var GadSelectWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GadSelectWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=GadSelectItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,this.m_NoGad.text=GlobalConfig.jifengTiaoyueLg.st100312,this.m_bg.init("GadSelectWin",GlobalConfig.jifengTiaoyueLg.st100311)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.gadData=e[0],this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=GadModel.getInstance;this.m_NoGad.visible=!1;var t=this.gadData;if(e){var i=[];if(t.itemid>0){var o=new GadBagData;o.attr=t.attr,o.configID=t.itemid,o.exp=t.exp,o.handle=-1,o.level=t.level,i.push(o)}for(var s=e.getGadBuySlot(t.slot),n=0;n<s.length;n++){var r=s[n],a=0;a+=r.power/1e4,a+=r.level,a+=100*r.attr.length,a+=1e3*r.suit,a+=1e4*r.star,r.weight=a,i.push(s[n])}i.sort(this.sorUpWeight),this.listData.replaceAll(i),i.length>0?this.m_NoGad.visible=!1:this.m_NoGad.visible=!0}},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.sorUpWeight=function(e,t){return t.weight-e.weight},t}(BaseEuiPanel);__reflect(GadSelectWin.prototype,"GadSelectWin"),ViewManager.ins().reg(GadSelectWin,LayerManager.UI_Popup),window.GadSelectWin=GadSelectWin;var GadShowItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent()},t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.setData=function(e,t){this.m_Icon.source="wz_54_54_0_png",this.m_LockGroup.visible=!1,this.gadData=e,this.slot=t,this.m_LvLab.visible=!1,this.m_StarGroup.visible=!1;var i=GlobalConfig.ins("COAConfig")[t];if(i)switch(i.conditionkind){case 2:var o=GameLogic.ins().actorModel.level;o<i.conditionnum?(this.m_LockGroup.visible=!0,this.m_ContLab.text=i.conditionnum+GlobalConfig.jifengTiaoyueLg.st100310):this.setGadIcon(e);break;case 1:UserFb.ins().guanqiaID<i.conditionnum?(this.m_LockGroup.visible=!0,this.m_ContLab.text=i.conditionnum+GlobalConfig.jifengTiaoyueLg.st102095):this.setGadIcon(e)}},t.prototype.setGadIcon=function(e){if(e.itemid>0){var t=GlobalConfig.ins("COAwordproduceConfig")[e.itemid];this.m_Icon.source="wz_54_54_"+t.suit+"_png",this.m_LvLab.text="+"+e.level,this.m_LvLab.visible=!0,this.m_StarGroup.visible=!0,GadModel.getInstance.setStarNum(e.star,this.m_StarGroup)}},t.prototype.onClick=function(){var e=this.gadData,t=this.slot,i=GlobalConfig.ins("COAConfig")[t];if(i)switch(i.conditionkind){case 2:var o=GameLogic.ins().actorModel.level;this.clickResult(o<i.conditionnum,e);break;case 1:this.clickResult(UserFb.ins().guanqiaID<i.conditionnum,e)}},t.prototype.clickResult=function(e,t){e?UserTips.ins().showTips(this.m_ContLab.text):t.itemid>0?ViewManager.ins().open(GadStateWin,t):ViewManager.ins().open(GadSelectWin,t)},t}(eui.Component);__reflect(GadShowItem.prototype,"GadShowItem"),window.GadShowItem=GadShowItem;var GadStateWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GadStateWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.m_ChangeBtn.label=GlobalConfig.jifengTiaoyueLg.st100318,this.m_LvUpBtn.label=GlobalConfig.jifengTiaoyueLg.st100317,this.m_bg.init("GadStateWin",GlobalConfig.jifengTiaoyueLg.st100319)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.gadData=e[0],this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.AddClick(this.m_LvUpBtn,this.onClickLvUpBtn),this.AddClick(this.m_ChangeBtn,this.onClickChange)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){this.m_LvUpBtn.visible=!0,this.m_ChangeBtn.visible=!0,this.m_LvUpRedPoint.visible=!1,this.m_ItemChangeRedPoint.visible=!1;var e=GadModel.getInstance,t=this.gadData;AttributeData.setAttrGroup(t.mainAttr,this.m_MainStateGroup,18,Color.Red),AttributeData.setAttrGroup(t.lotAttr,this.m_StateGroup),this.m_GadItem.setData(t,!1),this.m_NameLab.text=t.itemConfig.name+" +"+t.level,this.m_PointLab.text=GlobalConfig.jifengTiaoyueLg.st100315+t.slot;var i;t instanceof GadData?(i=e.getSuitNum(t.roleId,t.suit),this.setShowSuitData(i),this.checkIsCanChangeItem(t),this.checkIsCanLvUp(t)):(i={type:t.suit,haveNum:0},this.setShowSuitData(i),this.m_LvUpBtn.visible=!1,this.m_ChangeBtn.visible=!1);var o=Math.floor(UserBag.getAttrPower(t.attr));this.m_ScoreLab.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100316,style:{textColor:5461335}},{text:o.toString(),style:{textColor:16760614}}],this.checkGuide()},t.prototype.setShowSuitData=function(e){if(e){this.m_DataGroup.visible=!0;var t=GlobalConfig.ins("COAsuitConfig")[e.type];if(t){var i=0,o=0,s=void 0;for(var n in t){t[n].Requirement<=e.haveNum&&(i=o+1);var r=this["m_ContLab"+(o+1)];r.text=t[n].name,r.textColor=Color.Gray;var a=this["m_Title"+(o+1)];a.text=t[n].mainname+"("+e.haveNum+"/"+t[n].Requirement+")",a.textColor=Color.Gray,o++,s=n}if(i){var l=this["m_ContLab"+i];l.textColor=Color.Green;var h=this["m_Title"+i];h.textColor=Color.Green}else i=1;this.m_ActivateTitle.text=t[s].mainname+GlobalConfig.jifengTiaoyueLg.st101966+"("+e.haveNum+"/"+t[s].Requirement+")"}else this.m_DataGroup.visible=!1,this.m_ActivateTitle.text=""}else this.m_DataGroup.visible=!1,this.m_ActivateTitle.text=""},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.onClickLvUpBtn=function(){ViewManager.ins().open(GadLvUpWin,this.gadData),this.onClickClose()},t.prototype.onClickChange=function(){ViewManager.ins().open(GadSelectWin,this.gadData),this.onClickClose()},t.prototype.checkIsCanLvUp=function(e){var t=GadModel.getInstance,i=t.checkIsCanLvUp(e.roleId,e.slot);i?this.m_LvUpRedPoint.visible=!0:this.m_LvUpRedPoint.visible=!1},t.prototype.checkIsCanChangeItem=function(e){var t=GadModel.getInstance,i=t.checkIsCanChangeItem(e.roleId,e.slot);i?this.m_ItemChangeRedPoint.visible=!0:this.m_ItemChangeRedPoint.visible=!1},t.prototype.checkGuide=function(){20==Setting.currPart&&5==Setting.currStep&&(GuideUtils.ins().show(this.m_LvUpBtn,20,5),this.m_LvUpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextGuide,this,!0,10))},t.prototype.nextGuide=function(){GuideUtils.ins().next(this.m_LvUpBtn),this.m_LvUpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.nextGuide,this,!0)},t}(BaseEuiPanel);__reflect(GadStateWin.prototype,"GadStateWin"),ViewManager.ins().reg(GadStateWin,LayerManager.UI_Popup),window.GadStateWin=GadStateWin;var GadWin=function(e){function t(){var t=e.call(this)||this;return t.mWindowHelpId=29,t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100305,t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.gadPanel=new GadPanel,this.gadPanel.name=GlobalConfig.jifengTiaoyueLg.st100305,this.commonWindowBg.AddChildStack(this.gadPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e&&e[0]),this.addWinEvent(),this.updateRedPoint()},t.prototype.close=function(){this.gadPanel.release();var e=ViewManager.ins().getView(UIView2);null!=e&&e.closeNav(UIView2.NAV_PET),this.removeObserve(),this.removeWinEvetn(),this.commonWindowBg.OnRemoved()},t.prototype.addWinEvent=function(){this.observe(GadEvent.GAD_DATAUPDATE_MSG,this.updateRedPoint),this.observe(GadEvent.GAD_GUIDEEND_MSG,this.checkLastGadGuide)},t.prototype.removeWinEvetn=function(){},t.prototype.updateRedPoint=function(){var e=GadModel.getInstance,t=!1;(e.checkAllRoleCanChangeItem()||e.checkAllRoleCanLvUp())&&(t=!0),this.commonWindowBg.ShowTalRedPoint(0,t)},t.prototype.checkLastGadGuide=function(){20==Setting.currPart&&11==Setting.currStep&&(GuideUtils.ins().show(this.commonWindowBg.returnBtn,20,11),this.commonWindowBg.returnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGuideEnd,this))},t.prototype.onClickGuideEnd=function(){GuideUtils.ins().next(this.commonWindowBg.returnBtn),this.commonWindowBg.returnBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGuideEnd,this),MessageCenter.ins().dispatch(GadEvent.GAD_GUIDEENDBATTLE_MSG)},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(GadWin.prototype,"GadWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(GadWin,LayerManager.UI_Main),window.GadWin=GadWin;var GadBagData=function(){function e(){}return Object.defineProperty(e.prototype,"itemConfig",{get:function(){var e=GlobalConfig.ins("ItemConfig")[this.configID];return e?e:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainAttr",{get:function(){var e=this.attr[0];return e?[e]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lotAttr",{get:function(){for(var e=[],t=1;t<this.attr.length;t++)e.push(this.attr[t]);return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"star",{get:function(){return this.itemConfig?this.itemConfig.quality:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slot",{get:function(){var e=GlobalConfig.ins("COAwordproduceConfig")[this.configID];return e?e.site:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){var e=Math.floor(UserBag.getAttrPower(this.attr));return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"suit",{get:function(){var e=GlobalConfig.ins("COAwordproduceConfig")[this.configID];return e?e.suit:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supexp",{get:function(){var e=GlobalConfig.ins("COAlevelConfig")[this.star];if(e){var t=e[this.level];return t.supexp}return 0},enumerable:!0,configurable:!0}),e}();__reflect(GadBagData.prototype,"GadBagData"),window.GadBagData=GadBagData;var GadData=function(){function e(){}return Object.defineProperty(e.prototype,"itemConfig",{get:function(){var e=GlobalConfig.ins("ItemConfig")[this.itemid];return e?e:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainAttr",{get:function(){var e=this.attr[0];return e?[e]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lotAttr",{get:function(){for(var e=[],t=1;t<this.attr.length;t++)e.push(this.attr[t]);return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"suit",{get:function(){var e=GlobalConfig.ins("COAwordproduceConfig")[this.itemid];return e?e.suit:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"star",{get:function(){return this.itemConfig?this.itemConfig.quality:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHaveItem",{get:function(){return this.itemid>0?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLvMax",{get:function(){var e=GlobalConfig.ins("COAlevelConfig")[this.star][this.level+1];return e?!1:!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLvNeedExp",{get:function(){var e=0,t=GlobalConfig.ins("COAlevelConfig")[this.star];if(t){var i=t[this.level];if(i){e=i.exp-this.exp;for(var o in t)this.level+1<=parseInt(o)&&(e+=t[o].exp)}}return e},enumerable:!0,configurable:!0}),e}();__reflect(GadData.prototype,"GadData"),window.GadData=GadData;var GadEvent=function(){function e(){}return e.GAD_DATAUPDATE_MSG="GAD_DATAUPDATE_MSG",e.GAD_BAG_DATAUPDATE_MSG="GAD_BAG_DATAUPDATE_MSG",e.GAD_SELECT_DATAUPDATE_MSG="GAD_SELECT_DATAUPDATE_MSG",e.GAD_SURESELECT_DATAUPDATE_MSG="GAD_SURESELECT_DATAUPDATE_MSG",e.GAD_GUIDE_MSG="GAD_GUIDE_MSG",e.GAD_GUIDEEND_MSG="GAD_GUIDEEND_MSG",e.GAD_GUIDEENDBATTLE_MSG="GAD_GUIDEENDBATTLE_MSG",e.GAD_LVUP_MSG="GAD_LVUP_MSG",e}();__reflect(GadEvent.prototype,"GadEvent"),window.GadEvent=GadEvent;var GadModel=function(){function e(){this.nowSelectRoleId=0,this.gadDic=new Dictionary,this.gadBagDic=new Dictionary,this.lvUpSelectData=new Dictionary;for(var e=0;3>e;e++){var t=new Dictionary;this.gadDic.set(e,t);for(var i=0;6>i;i++){var o=new GadData;o.slot=i+1,o.itemid=-1,o.roleId=e,o.exp=0,o.level=0,o.attr=[],o.mainId=-1,t.set(i+1,o)}}}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.setGadBagDic=function(e){for(var t=0;t<e.length;t++){var i=new GadBagData;i.configID=e[t].configID,i.attr=e[t].att,i.exp=e[t].exp,i.handle=e[t].handle,i.level=e[t].level,i.mainId=e[t].mainid,this.gadBagDic.set(i.handle,i)}},e.prototype.setGadDic=function(e){for(var t=0;t<e.length;t++){var i=e[t],o=this.gadDic.get(i.roleid);o||(o=new Dictionary);for(var s=0;s<i.tatoo.length;s++){var n=i.tatoo[s],r=new GadData;n.slot?(r.attr=n.attr,r.exp=n.exp,r.itemid=n.itemid,r.level=n.level,r.slot=n.slot,r.roleId=i.roleid,r.mainId=n.mainid):(r.attr=[],r.exp=0,r.itemid=-1,r.level=0,r.slot=s+1,r.roleId=i.roleid,r.mainId=-1),o.set(r.slot,r)}this.gadDic.set(i.roleid,o)}},e.prototype.getSuitByRole=function(e){for(var t=this.gadDic.get(e),i=t.values,o=new Dictionary,s=0;s<i.length;s++)if(i[s].itemid>0){var n=GlobalConfig.ins("COAwordproduceConfig")[i[s].itemid];if(n){var r=GlobalConfig.ins("COAsuitConfig")[n.suit];if(r){var a=(n.suit,o.get(n.suit));if(a){a.haveNum+=1;var l=1e10*a.haveNum+1e9*i[s].itemConfig.quality+(1e7-i[s].itemid);a.weight<l&&(a.weight=l)}else{var l=1e10+1e9*i[s].itemConfig.quality+(1e7-i[s].itemid),h={type:n.suit,haveNum:1,quality:i[s].itemConfig.quality,id:i[s].itemConfig.id,weight:l};o.set(n.suit,h)}}}}return o},e.prototype.getShowSuitByRole=function(e){var t=this.getSuitByRole(e),i=t.values;return i.sort(this.sorWeight),i},e.prototype.sorWeight=function(e,t){return t.weight-e.weight},e.prototype.getMainSuitByRole=function(e){var t=this.getSuitByRole(e),i=t.values;if(i.length>0){for(var o={suit:i[0].type,suitLen:i[0].haveNum},s=0;s<i.length;s++)i[s+1]&&i[s].haveNum<i[s+1].haveNum&&(o.suit=i[s+1].type,o.suitLen=i[s+1].haveNum);return o}return null},e.prototype.getSuitNum=function(e,t){var i=this.getSuitByRole(e),o=i.get(t);return o?{type:t,haveNum:o.haveNum}:null},e.prototype.getGadBuySlot=function(e){for(var t=this.gadBagDic.values,i=[],o=GlobalConfig.ins("COAwordproduceConfig"),s=0;s<t.length;s++){var n=t[s].configID,r=o[n];r&&r.site==e&&i.push(t[s])}return i},e.prototype.getNowSelectItemAllExpAndGold=function(){for(var e=this.lvUpSelectData.values,t=0,i=0,o=0;o<e.length;o++){var s=e[o],n=GlobalConfig.ins("COAlevelConfig")[s.itemConfig.quality][s.level];n&&(t+=n.supexp,i+=n.gold)}var r={exp:t,gold:i};return r},e.prototype.getUpLvNumBuyExp=function(e,t,i){void 0===i&&(i=0);var o,s=GlobalConfig.ins("COAlevelConfig")[e.itemConfig.quality],n=e.level+i,r=s[n];if(o=0==i?t+e.exp:t,o<r.exp)return{lv:n,isbeyond:!1};var a=s[n+1];if(a){var l=t-r.exp;return this.getUpLvNumBuyExp(e,l,i+1)}return{lv:n,isbeyond:!0}},e.prototype.getGadItemData=function(){for(var e=this.gadBagDic.values,t=[],i=0;i<e.length;i++){var o=e[i];o.weight=0,o.weight+=o.suit,o.weight+=10*o.star}e.sort(this.sorUpWeight);for(var i=0;i<e.length;i++){var o=e[i],s=new ItemData,n=new Sproto.item_data;n.handle=o.handle,n.att=o.attr,n.configID=o.configID,n.count=1,n.invalidtime=0,s.parser(n),t.push(s)}return t},e.prototype.getChangeGadItemData=function(e){for(var t=[],i=0;i<e.length;i++){var o=e[i],s=new ItemData,n=new Sproto.item_data;n.handle=o.handle,n.att=o.attr,n.configID=o.configID,n.count=1,n.invalidtime=0,s.parser(n),t.push(s)}return t},e.prototype.sorUpWeight=function(e,t){return t.weight-e.weight},e.prototype.setStarNum=function(e,t,i,o){void 0===i&&(i=.5),void 0===o&&(o=20),t.removeChildren();for(var s=0;5>s;s++){var n=new eui.Image;n.scaleX=n.scaleY=i,n.width=n.height=o,t.addChild(n),e>s?n.source="comp_23_23_1_png":n.source="comp_23_23_2_png"}},e.prototype.checkAllRoleCanChangeItem=function(){if(!Deblocking.Check(DeblockingType.TYPE_62,!0))return!1;for(var e=0;3>e;e++){var t=this.checkRoleCanChangeItem(e);if(t)return!0}return!1},e.prototype.checkRoleCanChangeItem=function(e){if(!Deblocking.Check(DeblockingType.TYPE_62,!0))return!1;var t=this.gadDic.get(e);if(t)for(var i=0;i<t.values.length;i++){var o=this.checkIsCanChangeItem(e,i+1);if(o)return!0}return!1},e.prototype.checkIsCanChangeItem=function(e,t){if(!Deblocking.Check(DeblockingType.TYPE_62,!0))return!1;var i=SubRoles.ins().getSubRoleByIndex(e);if(!i)return!1;var o=GlobalConfig.ins("COAConfig")[t];if(o)switch(o.conditionkind){case 2:var s=GameLogic.ins().actorModel.level;if(s<o.conditionnum)return!1;break;case 1:if(UserFb.ins().guanqiaID<o.conditionnum)return!1}var n=this.gadDic.get(e);if(n){var r=n.get(t);if(r.isHaveItem){for(var a=this.gadBagDic.values,l=0;l<a.length;l++)if(a[l].slot==r.slot&&a[l].level>r.level)return!0}else for(var a=this.gadBagDic.values,l=0;l<a.length;l++)if(a[l].slot==r.slot)return!0}return!1},e.prototype.checkAllRoleCanLvUp=function(){if(!Deblocking.Check(DeblockingType.TYPE_62,!0))return!1;for(var e=0;3>e;e++){var t=this.checkRoleCanLvUp(e);if(t)return!0}return!1},e.prototype.checkRoleCanLvUp=function(e){if(!Deblocking.Check(DeblockingType.TYPE_62,!0))return!1;var t=this.gadDic.get(e);if(t)for(var i=0;i<t.values.length;i++){var o=this.checkIsCanLvUp(e,i+1);if(o)return!0}return!1},e.prototype.checkIsCanLvUp=function(e,t){if(!Deblocking.Check(DeblockingType.TYPE_62,!0))return!1;var i=this.gadDic.get(e);if(i){var o=i.get(t);if(o&&o.isHaveItem&&!o.isLvMax&&this.gadBagDic.length>0)return this.setAutoLvUpItem()}return!1},e.prototype.setAutoLvUpItem=function(){for(var t=e.getInstance,i=t.gadBagDic.values,o=new Dictionary,s=0;3>s;s++)for(var n=t.gadDic.get(s),r=0;6>r;r++){var a=n.get(r+1),l=a.star;l||(l=0);var h=o.get(a.slot);h?h.push(l):(h=[],h.push(l)),o.set(a.slot,h)}for(var c=new Dictionary,s=0;s<i.length;s++){var u=i[s],d=c.get(u.slot);d?d.push(u):(d=[],d.push(u)),c.set(u.slot,d)}for(var s=0;6>s;s++){var p=o.get(s+1),d=c.get(s+1);if(d)for(var r=0;r<d.length;r++){var f=Math.min.apply(null,p);if(d[r].star>f)for(var g=0;g<p.length;g++)if(d[r].star>p[g]){p[g]=d[r].star;break}}}this.lvUpSelectData.clear();for(var s=0;6>s;s++){var d=c.get(s+1),p=o.get(s+1),f=Math.min.apply(null,p);if(d)for(var r=0;r<d.length;r++)if(d[r].star<f){if(!(this.lvUpSelectData.length<20))return this.lvUpSelectData.length>0?!0:!1;this.lvUpSelectData.set(d[r].handle,d[r])}}return this.lvUpSelectData.length>0?!0:!1},e}();__reflect(GadModel.prototype,"GadModel"),window.GadModel=GadModel;var GadSproto=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_tatoo_init_res,t.getGadInit),t.regNetMsg(S2cProtocol.sc_tatoo_equipon_res,t.getEquipChange),t.regNetMsg(S2cProtocol.sc_tatoo_equipoff_res,t.getEquipOff),t.regNetMsg(S2cProtocol.sc_tatoo_strength_res,t.getGadLvUp),t.regNetMsg(S2cProtocol.sc_tatoo_bag_init,t.gatGadBag),t.regNetMsg(S2cProtocol.sc_tatoo_add_res,t.gatGadAddBag),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getGadInit=function(e){var t=GadModel.getInstance;t.setGadDic(e.data),GameGlobal.MessageCenter.dispatch(GadEvent.GAD_DATAUPDATE_MSG)},t.prototype.getEquipChange=function(e){var t=GadModel.getInstance,i=t.gadDic.get(e.roleid),o=e.item,s=i.get(o.slot);s.attr=o.attr,s.exp=o.exp,s.itemid=o.itemid,s.level=o.level,s.roleId=e.roleid,s.slot=o.slot,s.mainId=o.mainid,GameGlobal.MessageCenter.dispatch(GadEvent.GAD_DATAUPDATE_MSG),ViewManager.ins().close(GadSelectWin)},t.prototype.getEquipOff=function(e){var t=GadModel.getInstance,i=t.gadDic.get(e.roleid),o=i.get(e.slot);o.attr=[],o.exp=0,o.itemid=-1,o.level=0,GameGlobal.MessageCenter.dispatch(GadEvent.GAD_DATAUPDATE_MSG),ViewManager.ins().close(GadSelectWin)},t.prototype.getGadLvUp=function(e){var t=GadModel.getInstance,i=t.gadDic.get(e.roleid),o=e.item,s=i.get(o.slot);s.attr=o.attr,s.exp=o.exp,s.itemid=o.itemid,s.level=o.level,s.roleId=e.roleid,s.slot=o.slot,s.mainId=o.mainid,t.lvUpSelectData.clear(),t.setAutoLvUpItem(),GameGlobal.MessageCenter.dispatch(GadEvent.GAD_LVUP_MSG)},t.prototype.gatGadBag=function(e){var t=GadModel.getInstance;0==e.code?t.setGadBagDic(e.datas):t.setGadBagDic(e.datas),GameGlobal.MessageCenter.dispatch(GadEvent.GAD_BAG_DATAUPDATE_MSG)},t.prototype.gatGadAddBag=function(e){var t=GadModel.getInstance,i=new GadBagData,o=e.data;i.attr=o.att,i.handle=o.handle,i.configID=o.configID,i.level=o.level,i.exp=o.exp,t.gadBagDic.set(i.handle,i),GameGlobal.MessageCenter.dispatch(GadEvent.GAD_BAG_DATAUPDATE_MSG),this.tips(o)},t.prototype.getGadDelBag=function(e){if(4==e.type){var t=GadModel.getInstance;t.gadBagDic.remove(e.handle),GameGlobal.MessageCenter.dispatch(GadEvent.GAD_BAG_DATAUPDATE_MSG)}},t.prototype.sendGadInit=function(){var e=new Sproto.cs_tatoo_init_req_request;this.Rpc(C2sProtocol.cs_tatoo_init_req,e)},t.prototype.sendGadEquipChange=function(e,t,i){var o=new Sproto.cs_tatoo_equipon_req_request;o.roleid=e,o.slot=t,o.handler=i,this.Rpc(C2sProtocol.cs_tatoo_equipon_req,o)},t.prototype.sendGadEquipOff=function(e,t){var i=new Sproto.cs_tatoo_equipoff_req_request;i.roleid=e,i.slot=t,this.Rpc(C2sProtocol.cs_tatoo_equipoff_req,i)},t.prototype.sendGadLvUp=function(e,t,i){var o=new Sproto.cs_tatoo_strength_req_request;o.roleid=e,o.slot=t,o.handler=i,this.Rpc(C2sProtocol.cs_tatoo_strength_req,o)},t.prototype.tips=function(e){var t=new Sproto.sc_bag_deal_add_item_request;t.type=0,t.data=new Sproto.item_data,t.data.configID=e.configID,t.data.att=e.att,t.data.handle=e.handle,t.data.count=1,t.data.invalidtime=0;var i=new ItemData,o=t.type;i.parser(t.data),i.itemConfig.type==ItemType.FUWEN&&(i.mIsNewItem=!0);var s=!0;if(s)if(i.itemConfig.quality>=4&&o==UserBag.BAG_TYPE_EQUIP)UserTips.ins().showGoodEquipTips(i);else if(o!=UserBag.BAG_TYPE_TREASUREHUNT&&GameMap.IsNoramlLevel()){var n=ItemBase.QUALITY_COLOR[i.itemConfig.quality],r=GlobalConfig.jifengTiaoyueLg.st101471+"|C:"+n+"&T:"+i.itemConfig.name+" x "+i.count+"|";UserTips.ins().showTips(r)}},t}(BaseSystem);__reflect(GadSproto.prototype,"GadSproto"),window.GadSproto=GadSproto;var GameLogic=function(e){function t(){var t=e.call(this)||this;t.MONSTER_RADIUS=2,t.MONSTER_LEN=2*t.MONSTER_RADIUS+1,t.actorModel=new ActorModel,t.rPosindex=0,t.isInit=!0,t.m_ShowOtherActor={},t.m_ShowOtherCallback={},t.dropItemIdDic=new Dictionary,t.addOneModels=[egret.BlendMode.NORMAL,egret.BlendMode.NORMAL,egret.BlendMode.ADD,egret.BlendMode.ERASE],t.skillEffDic=new Dictionary,t.fristEnterGame=!0,t.timerID=0,t.m_IsRepeatCreateMonster=0,t.m_RepeatCount=0,t.m_IsRepeatStart=!1,t.m_Reward=[],t.m_RewardDict={},t.m_RepeatPoint=new egret.Point,t.posDict={},t.sysId=PackageID.Default,t.regNetMsg(S2cProtocol.enter_map,t.postEnterMap),t.regNetMsg(S2cProtocol.create_monster_entity,t.doCreateMonsterEntity),t.regNetMsg(S2cProtocol.create_role_entity,t.doCreateRoleEntity),t.regNetMsg(S2cProtocol.gold_change,t.doGoldChange),t.regNetMsg(S2cProtocol.exp_change,t.doExp),t.regNetMsg(S2cProtocol.sub_role_att_change,t.doSubRoleAtt),t.regNetMsg(S2cProtocol.blood_update,t.doBloodUpdata),t.regNetMsg(S2cProtocol.remove_entity,t.doRemoveEntity),t.regNetMsg(S2cProtocol.move_entity,t.doMoveEntity),t.regNetMsg(S2cProtocol.stop_move_entity,t.doStopMoveEntity),t.regNetMsg(S2cProtocol.sync_entity_pos,t.doSyncPos),t.regNetMsg(S2cProtocol.entity_mp_update,t.doMp),t.regNetMsg(S2cProtocol.show_server_tip,t.doTips),t.regNetMsg(S2cProtocol.first_register,t.doFirstRegister),t.regNetMsg(S2cProtocol.actor_guild_change,t.doGuildChange),t.regNetMsg(S2cProtocol.sc_rename_result,t.doRename),t.regNetMsg(S2cProtocol.sc_shapeshift_send_shapeInfo,t.bianShenUpdate),t.regNetMsg(S2cProtocol.shape_update,t.shape_update_request),t.regNetMsg(S2cProtocol.attr_update,t.attr_update_request),t.regNetMsg(S2cProtocol.attr_update,t.attr_update_request),t.regNetMsg(S2cProtocol.sc_element_set_res,t.changeMainEle),t.regNetMsg(S2cProtocol.sc_actor_power,t.changePower),t.regNetMsg(S2cProtocol.create_pet_entity,t.doCreatePetEntity),Sproto.SprotoReceiver.AddHandler(S2cProtocol.scActorBase,t.doActorInfo,t),Sproto.SprotoReceiver.AddHandler(S2cProtocol.sub_roles,t.doSubRole,t),t.regNetMsg(S2cProtocol.sc_show_other_actor,t._DoShowOtherActor),t.regNetMsg(S2cProtocol.sc_currency_change,t.maxCurrencyChange),KeyboardUtils.ins().addKeyDown(t.QuickSendMsg,t),KeyboardUtils.ins().addKeyDown(t.TestKeyDown,t),KeyboardUtils.ins().addKeyUp(t.TestKeyUp,t),t.radiusMap=[];for(var i=2*t.MONSTER_RADIUS+1,o=0;i>o;o++)t.radiusMap[o]=[];return t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.changePower=function(e){t.ins().actorModel.power=e.power},t.prototype.sendNewRole=function(e,t){var i=new Sproto.cs_create_new_sub_role_request;i.job=e,i.sex=t,GameSocket.ins().Rpc(C2sProtocol.cs_create_new_sub_role,i)},t.prototype.sendHeartbeat=function(){if(!this.heartBeatTimer){var e=function(){var e=this.getBytes();e.writeCmd(this.protoSysID,255),this.sendToServer(e)};this.heartBeatTimer=new egret.Timer(6e4),this.heartBeatTimer.addEventListener(egret.TimerEvent.TIMER,e,this),this.heartBeatTimer.start()}},t.SendGM=function(e){var t=new Sproto.cs_sene_gm_command_request;t.cmd=e,GameSocket.ins().Rpc(C2sProtocol.cs_sene_gm_command,t)},t.prototype.sendGMCommad=function(e){t.SendGM(e)},t.prototype._DoShowOtherActor=function(e){var t=e.actorData.actorid;this.m_ShowOtherActor[t]=e;var i=this.m_ShowOtherCallback[t];if(i){for(var o=0,s=i;o<s.length;o++){var n=s[o];n(e)}delete this.m_ShowOtherCallback[t]}GameGlobal.MessageCenter.dispatch(MessageDef.SHOW_OTHER_ACTOR,t)},t.prototype.GetShowOtherActor=function(e){var t=this.m_ShowOtherActor[e];return t},t.prototype.SendGetOtherActorInfo=function(e,t){if(t){var i=this.m_ShowOtherCallback[e];i||(i=this.m_ShowOtherCallback[e]=[]),i.push(t)
}var o=new Sproto.cs_get_other_actor_info_request;o.otherid=e,this.Rpc(C2sProtocol.cs_get_other_actor_info,o)},t.prototype.doActorInfo=function(e){t.ins().actorModel.parser(e),SubRoles.ins().resetRolesModel(),Shop.ins().shopNorefrush=e.shopNorefrush,this.postExpChange(),this.isInit&&(this.isInit=!1,this.postInitActorInfo()),Shop.ins().shopNorefrush&&UserFb.ins().guanqiaID>=11&&GameGlobal.MessageCenter.dispatch(MessageDef.SHOP_REFRESH,!0),-1==StatisticsUtils.time1&&(StatisticsUtils.time1=0),SdkMgr.isLogin=!0,SdkMgr.setExtData(SdkMgr.extDataType_1),SdkMgr.currSdk==SdkMgr.P_TYPE_8&&this.wanbaVipServer(),StatisticsUtils.setPhpLoading(3)},t.prototype.wanbaVipServer=function(){},t.prototype.postInitActorInfo=function(){},t.prototype.doSubRole=function(e){SubRoles.ins().doSubRole(e),this.postSubRoleChange(),GameGlobal.MessageCenter.dispatch(MessageDef.SUB_ROLE_CHANGE)},t.prototype.postSubRoleChange=function(){},t.prototype.postEnterMap=function(e){GameMap.parser(e),GameMap.update()},t.prototype.doCreatePetEntity=function(e){var t=e.handler,i=EntityManager.ins().getEntityByHandle(t);if(i){var o=i.infoModel;o.Parser(e.entityModelBase,e.attributeData),o.lv=e.lv,o.name=e.name,o.inRoleId=0}else{var o=new EntityModel;o.Parser(e.entityModelBase,e.attributeData),o.lv=e.lv,o.name=e.name,o.inRoleId=0,this.createEntityByModel(o)}},t.prototype.doCreateMonsterEntity=function(e){var t=(e.entityType,e.handler),i=EntityManager.ins().getEntityByHandle(t);if(i){var o=i.infoModel;i.updateBlood(),o.Parser(e.entityModelBase,e.attributeData);var s=parseInt(o.configID.toString().substring(0,2));(21==s||22==s||23==s)&&GameGlobal.MessageCenter.dispatch(MessageDef.ON_HOOK_BOOS,o),TenKillModel.getInstance.raidType==RaidType.Type3&&1==o.monstersType&&GameGlobal.MessageCenter.dispatch(MessageDef.TENKILL_BOSS_INIT,o),GameMap.IsMiJing()&&1==o.monstersType&&GameGlobal.MessageCenter.dispatch(MessageDef.MIJING_BOSSBLOOD_UPDATE,o),1==o.monstersType&&GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_BOSS_HP,o)}else{var o=new EntityModel;o.Parser(e.entityModelBase,e.attributeData),this.createEntityByModel(o);var s=parseInt(o.configID.toString().substring(0,2));(21==s||22==s||23==s)&&GameGlobal.MessageCenter.dispatch(MessageDef.ON_HOOK_BOOS,o),TenKillModel.getInstance.raidType==RaidType.Type3&&1==o.monstersType&&GameGlobal.MessageCenter.dispatch(MessageDef.TENKILL_BOSS_INIT,o),GameMap.IsMiJing()&&1==o.monstersType&&GameGlobal.MessageCenter.dispatch(MessageDef.MIJING_BOSSBLOOD_UPDATE,o),1==o.monstersType&&GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_BOSS_HP,o)}},t.prototype.doCreateRoleEntity=function(e){var t=(e.entityType,e.handler,new Role);t.parserBase(e.entityModelBase),t.parserOtherRole(e),this.createEntityByModel(t)},t.prototype.maxCurrencyChange=function(e){var i=t.ins().actorModel,o=e.type;o==MoneyConst.COUPON&&(i.maxCoupon=e.value,this.postCouponChange())},t.prototype.doGoldChange=function(e){var i=t.ins().actorModel,o=e.type;if(1==o){var s=i.gold,n=e.value;i.gold=n,n!=s&&(this.postGoldChange(),GameGlobal.MessageCenter.dispatch(MessageDef.GOLD_CHANGE))}else if(4==o){var r=e.value;if(i.soul>0){var a=r-i.soul;if(a>0){var l="";l=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101627,[a]),UserTips.ins().showTips(l)}}i.soul=r,this.postSoulChange()}else if(o==MoneyConst.PETCREDIT)i.petCredit=e.value;else if(o==MoneyConst.RIDECREDIT)i.rideCredit=e.value;else if(o==MoneyConst.CROSSCREDIT)i.crossCredit=e.value;else if(o==MoneyConst.ARTIFACTCREDIT)i.artifactCredit=e.value;else if(o==MoneyConst.FEATS)i.feats=e.value,this.postGoldChange();else if(o==MoneyConst.HONOR){var h=i.honor-e.value;0>h&&UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101628),i.honor=e.value,this.postHonorChange()}else if(o==MoneyConst.ZHENQI)i.zhenqi=e.value,this.postZhenQiChange();else if(o==MoneyConst.sharecoin)i.sharecoin=e.value;else if(o==MoneyConst.VIPEXP)l=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101629,[e.value]),UserTips.ins().showTips(l);else if(o==MoneyConst.yuanbao){var c=i.yb,u=e.value;i.yb=u,c!=u&&this.postYbChange()}else if(o==MoneyConst.RedNameScore){var d=i.redName,p=e.value;i.redName=p,d!=p&&this.postRedNameChange()}else if(o==MoneyConst.PRESTIGE){var f=i.prestige,g=e.value;i.prestige=g,f!=g&&GameGlobal.MessageCenter.dispatch(MessageDef.ACTOR_PRESTIGE_UPDATE)}else if(o==MoneyConst.GuildContrib){var _=e.value;_>0&&_>0&&UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101630+" +"+_)}else if(o==MoneyConst.GuildFund){var _=e.value;_>0&&_>0&&UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101631+" +"+_)}else o==MoneyConst.COUPON?(i.coupon=e.value,this.postCouponChange()):console.log("GameLogic:doGoldChange type => "+o)},t.prototype.postSoulChange=function(){},t.prototype.postGoldChange=function(){},t.prototype.postHonorChange=function(){},t.prototype.postZhenQiChange=function(){},t.prototype.postYbChange=function(){},t.prototype.postCouponChange=function(){},t.prototype.postRedNameChange=function(){},t.prototype.doExp=function(e){var i=t.ins().actorModel,o=i.level,s=e.level;i.level=s;var n=i.exp;s=e.exp,i.exp=s,n!=s&&this.postExpChange(),o<i.level&&(this.levelEffect(),SdkMgr.setExtData(SdkMgr.extDataType_3)),e.upexp>0&&UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101632,[e.upexp]))},t.prototype.postLevelChange=function(){},t.prototype.postExpChange=function(){},t.prototype.postNameChange=function(){},t.prototype.doSubRoleAtt=function(e){SubRoles.ins().doSubRoleAtt(e)},t.prototype.postPowerChange=function(){},t.prototype.doBloodUpdata=function(e){var t=e.handle,i=e.hp,o=EntityManager.ins().getEntityByHandle(t);if(o){var s=-e.dhp;s&&o.team==Team.My&&this.postEntityHpChange(o,null,e.showType||0,s);var n=o.infoModel.configID;n&&n==UserBoss.ins().monsterID&&(UserBoss.ins().hp=i,0>=i&&ViewManager.ins().close(BossBloodPanel))}this.entityBloodUpData(t,i),GameGlobal.MessageCenter.dispatch(MessageDef.TENKILL_BLOOD_UPDATE)},t.prototype.postEntityHpChange=function(e,t,i,o,s,n){if(void 0===s&&(s=1),void 0===n&&(n=[null,SkillType.TYPE1]),t&&t.infoModel.type!=EntityType.WillDummy&&(t&&t.team==Team.My||e&&e.team==Team.My))if(i==DamageTypes.CRIT){var r=ViewManager.ins().getView(GameSceneView);DisplayUtils.shakeIt(r.map,2,150,1)}else if(n[1]==SkillType.TYPE3){var r=ViewManager.ins().getView(GameSceneView);DisplayUtils.shakeIt(r.map,3,150,3)}if(i==DamageTypes.HEJI){var r=ViewManager.ins().getView(GameSceneView);DisplayUtils.shakeIt(r.map,8,150,15)}return[e,t,i,o,s,n]},t.prototype.doRemoveEntity=function(e){var t=e.handle,i=EntityManager.ins().getEntityByHandle(t);if(i&&i.infoModel&&(i.infoModel.setAtt(AttributeType.atHp,0),1==i.infoModel.monstersType&&(GameMap.IsChaosBttle()&&ChaosBattleModel.getInstance.roleDic.remove(i.handle),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_BOSS_HP,i.infoModel))),t==UserBoss.ins().bossHandler&&ViewManager.ins().isShow(BossBloodPanel)&&ViewManager.ins().close(BossBloodPanel),i){DropHelp.setTempDropPoint(Const.PixelToPos(i.x),Const.PixelToPos(i.y)),this.dropMonsterFb(i);var o=egret.setTimeout(function(e){egret.clearTimeout(o),EntityManager.ins().removeByHandle(e[0],!1)},this,500,[t]);GameGlobal.MessageCenter.dispatch(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_ROLE)}},t.prototype.dropMonsterFb=function(e){if(e.team!=Team.My&&GameMap.fbType==UserFb.FB_TYPE_MATERIAL){var t=this.dropItemIdDic.get(GameMap.fubenID);if(!t){var i=GlobalConfig.ins("DailyFubenConfig");if(i)for(var o in i)if(i[o].fbId==GameMap.fubenID){var s=i[o].diplayItem;t={id:s.id,type:s.type,count:s.count},this.dropItemIdDic.set(GameMap.fubenID,t);break}}if(!t)return;var n=[],r=Const.PixelToPos(e.x),a=Const.PixelToPos(e.y);n.push(r,a,t),DropHelp.addDrop(n,!1)}},t.prototype.doMoveEntity=function(e){var t=e.handle,i=e.endX,o=e.endY,s=EntityManager.ins().getEntityByHandle(t);s&&GameMap.moveEntity(s,i,o,!0)},t.prototype.doStopMoveEntity=function(e){var t=e.handle,i=EntityManager.ins().getEntityByHandle(t);i&&GameMap.moveEntity(i,e.endX,e.endY,!0)},t.prototype.doSyncPos=function(e){var t=this,i=e.handle,o=EntityManager.ins().getEntityByHandle(i);if(o){var s=e.type;o.stopMove();var n=void 0;switch(s){case 0:o.playAction(EntityAction.STAND),o.x=e.x,o.y=e.y,this.postMoveCamera();break;case 1:o.playAction(EntityAction.RUN),egret.Tween.removeTweens(o),n=egret.Tween.get(o,{onChange:function(){t.postMoveCamera()}}),n.to({x:e.x,y:e.y},e.arg1).call(function(){egret.Tween.removeTweens(o),o.playAction(EntityAction.STAND)});break;case 2:o.playAction(EntityAction.STAND),egret.Tween.removeTweens(o),n=egret.Tween.get(o,{onChange:function(){t.postMoveCamera()}}),n.to({x:e.x,y:e.y},e.arg1).call(function(){egret.Tween.removeTweens(o)})}}},t.prototype.postMoveCamera=function(){},t.prototype.sendSyncServerTime=function(){var e=this.getBytes(14);this.sendToServer(e)},t.prototype.doMp=function(e){var i=e.handle,o=EntityManager.ins().getEntityByHandle(i),s=e.mp/100;if(o){o.infoModel.setAtt(AttributeType.atMp,s),o.infoModel.masterHandle==t.ins().actorModel.handle&&this.postMpChange();var n=e.playEff;n&&o.addEffect(2)}},t.prototype.postMpChange=function(){},t.prototype.doTips=function(e){var t=GlobalConfig.ins("ServerTips")[e.type].tips;UserTips.ins().showTips(t)},t.prototype.doFirstRegister=function(e){GuideLocalStorage.reset(),ViewManager.ins().open(WelcomeWin)},t.prototype.doDieNotice=function(e){},t.prototype.doGuildChange=function(e){t.ins().actorModel.setGuild(e.guildID,e.guildName)},t.prototype.doGuildFbBossBlood=function(e){},t.prototype.sendRename=function(e){var t=new Sproto.cs_change_actor_name_request;t.name=e,GameSocket.ins().Rpc(C2sProtocol.cs_change_actor_name,t)},t.prototype.doRename=function(e){var t=e.result;0==t?(GameSocket.ins().close(),alert(GlobalConfig.jifengTiaoyueLg.st101633),SdkMgr.setExtData(SdkMgr.extDataType_4),location.reload()):RoleMgr.ins().showErrorTips(t)},t.prototype.bianShenUpdate=function(e){var t=EntityManager.ins().getEntityByHandle(GameGlobal.rolesModel[e.roleid].handle);t instanceof CharRole&&(1==e.relute?t.infoModel.bianShen=e.shapeid:t.infoModel.bianShen=0,t.updateModel())},t.prototype.shape_update_request=function(e){var t=EntityManager.ins().getEntityByHandle(e.handle);t&&(t.infoModel.bianShen=e.shapeid,t.updateModel())},t.prototype.attr_update_request=function(e){var t=EntityManager.ins().getEntityByHandle(e.handle);t&&t.infoModel.setAtt(e.atrrid,e.atrr)},t.prototype.showEseBtn=function(e){this.gamescene&&(this.gamescene.escBtn.visible=e)},t.prototype.QuickSendMsg=function(e){e==Keyboard.ESC&&MiniChatPanel.CancelSend(),e==Keyboard.ENTER&&MiniChatPanel.CheckSend()},t.prototype.TestKeyUp=function(e){e==Keyboard.CTRL&&(t.IS_CTRL_KEY=!1)},t.prototype.TestKeyDown=function(e){if(e==Keyboard.CTRL&&(t.IS_CTRL_KEY=!0),e==Keyboard.BRACE_R,e==Keyboard.BRACE_L,e==Keyboard.BACKSLASH,e==Keyboard.I,e==Keyboard.O,e==Keyboard.P,Main.isDebug&&(t.IS_CTRL_KEY&&(e==Keyboard.BRACE_R?this.gamescene.input.visible=!this.gamescene.input.visible:e==Keyboard.BRACE_L&&newAI.ins().togglePause()),ActorModel.IsGM()&&t.IS_CTRL_KEY))try{e==Keyboard.ENTER&&this.gamescene&&this.gamescene.input.visible&&this.sendGMCommad(this.gamescene.input.text)}catch(i){}},t.prototype.levelEffect=function(){var e=EntityManager.ins().getNoDieRole();if(e){var t=new MovieClip;t.y=-100,t.loadUrl(ResDataPath.GetUIEffePath("eff_levelup"),!0,1,function(){DisplayUtils.dispose(t),t=null}),e.addChild(t)}},t.prototype.startPkBoss=function(){UserFb.ins().bossIsChallenged=!0,UserFb.ins().sendPKBoss()},t.prototype.createEntityByModel=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=EntityManager.ins().createEntity(e,t);return o&&this.gamescene&&this.gamescene.map&&this.gamescene.map.addEntity(o),e.team!=Team.My?0==GameMap.IsNoramlLevel()&&EntityManager.ins().hideOtherEntity(ZsBoss.ins().clearOther):(GameMap.IsPublicBoss()||GameMap.IsHomeBoss()||GameMap.IsSyBoss()||GameMap.IsTenKill()||GameMap.IsMiJing()||GameMap.IsZhuanshengBoss()||GameMap.IsGuildBoss()||GameMap.IsGuildWar()||GameMap.IsKfBoss()||GameMap.IsWorldBoss()||GameMap.IsXbBoss()||GameMap.IsHeroBattle()||GameMap.IsGuanQiaBoss()||GameMap.IsTeamFb()||GameMap.IsPersonalBoss()||GameMap.IsCityBoss()||GameMap.IsChaosBttle()?(ViewManager.ins().hideUIView(UIView1_1,!1),GameGlobal.MessageCenter.dispatch(MessageDef.ON_HOOK_ROLE_UPDATE)):ViewManager.ins().hideUIView(UIView1_1,!0),GameMap.IsMiJing()&&GameGlobal.MessageCenter.dispatch(MessageDef.MJBT_UPDATE_ROLE)),o},t.prototype.addEntity=function(e){null!=this.gamescene&&null!=this.gamescene.map&&this.gamescene.map.addEntity(e)},t.prototype.PlayDummySkillEff=function(e,t){if(null!=this.gamescene&&null!=this.gamescene.map){var i=ObjectPool.ins().pop("MovieClip"),o=e.localToGlobal();this.gamescene.map.globalToLocal(o.x,o.y,o),i.loadUrl(ResDataPath.GetSkillPathByID(t),!0,1,function(){DisplayUtils.dispose(i);var e=ObjectPool.ins().push(i);e||(i=null)}),i.x=o.x,i.y=o.y,this.gamescene.map.addEntity(i)}},t.prototype.changePoint=function(e,t,i){var o=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y),n=Math.atan2(s,o),r=Math.sin(n),a=Math.cos(n),l=r*i,h=a*i;t.x>e.x?t.x+=h:t.x<e.x&&(t.x-=h),t.y>e.y?t.y+=l:t.y<e.y&&(t.y-=l)},t.prototype.playSkillEff=function(e,t,i,o){var s=this;if(null==t||null==t.parent)return 0;if(null==e)return 0;if(t!=i&&(t.dir=DirUtil.get4DirBy2Point(t,i)),e.icon&&t.team==Team.My){var n=GlobalConfig.soundConfig[e.icon],r=SoundSetPanel.getSoundLocalData("skillSoundEff"),a=ViewManager.ins().isShow(MainCityView);n&&r&&!a&&SoundUtils.getInstance().playSound(n.id)}if(t.playAction(e.actionType),void 0==e.effType)return 0;if(0==e.effectId||0/0==e.effectId)return 0;var l,h;this.skillScale||(SdkMgr.isWxGame()?this.skillScale=GlobalConfig.ins("UniversalConfig").skillRatewx:this.skillScale=GlobalConfig.ins("UniversalConfig").skillRate);var c=t._body.scaleX*this.skillScale,u=t._body.scaleY*this.skillScale;if(e.id!=UserSkill.POWER_SKILL||t.team!=Team.My){var d=ObjectPool.ins().pop("MovieClip");switch(d.scaleX=c,d.scaleY=u,e.effType){case EffectType.Targer:if(l=i.localToGlobal(),null==this.gamescene||null==this.gamescene.map)break;if(9999==e.effectId){d.parent&&d.parent.removeChild(d);var p=ObjectPool.ins().push(d);p||(d=null)}else{this.gamescene.map.globalToLocal(l.x,l.y,l);var f=this.setSkillEff(d,e.effectId,l.x,l.y,c,u);f&&(o?(d.x=0,d.y=0,o.addChild(d)):this.gamescene.map.addEntity(d))}if(e.effectId2)if(e.id==UserSkill.POWER_SKILL){if(t.team==Team.My)for(var g=0,_=EntityManager.ins().GetRoles();g<_.length;g++){var m=_[g];this.PlayDummySkillEff(m,e.effectId2)}}else this.PlayDummySkillEff(i,e.effectId2);break;case EffectType.Self:var v=e.effectId+(1==e.isDir?"_"+DirUtil.get2Dir(t.dir):"");l=t.localToGlobal(),this.gamescene.map.globalToLocal(l.x,l.y,l);var y=this.setSkillEff(d,v,l.x,l.y,c,u);if(y){if(null==this.gamescene||null==this.gamescene.map)break;o?(d.x=0,d.y=0,o.addChild(d)):232001==e.id?this.gamescene.map.addEntity(d,0):this.gamescene.map.addEntity(d)}break;case EffectType.Ballistic:var v=e.effectId+(1==e.isDir?"_"+DirUtil.get2Dir(t.dir):"");if(d.loadUrl(ResDataPath.GetSkillPathByID(v),!0),l=t.localToGlobal(),null==this.gamescene||null==this.gamescene.map)break;this.gamescene.map.globalToLocal(l.x,l.y,l);var b=l;d.x=l.x,d.y=l.y-50,d.scaleX=c,d.scaleY=u,h=MathUtils.getAngle(MathUtils.getRadian2(t.x,t.y,i.x,i.y)),0==e.isDir?d.rotation=h+90:(d.scaleX=c,d.scaleY=u),TimerManager.ins().doTimer(200,1,function(){null!=s.gamescene&&null!=s.gamescene.map&&s.gamescene.map&&(o?(d.x=d.y=0,o.addChild(d)):s.gamescene.map.addChild(d))},this),l=i.localToGlobal(),this.gamescene.map.globalToLocal(l.x,l.y,l),this.changePoint(b,l,200);var C=egret.Tween.get(d);if(C.wait(100).to({x:l.x,y:l.y-30},400).call(function(e){egret.Tween.removeTweens(e),DisplayUtils.dispose(e);var t=ObjectPool.ins().push(e);t||(e=null)},this,[d]),e.effectId2)var T=egret.setTimeout(function(){egret.clearTimeout(T),l=i.localToGlobal(),s.gamescene.map.globalToLocal(l.x,l.y,l);var t=ObjectPool.ins().pop("MovieClip"),n=s.setSkillEff(t,e.effectId2,l.x,l.y,c,u);n&&s.gamescene.map&&(o?(t.x=t.y=0,o.addChild(t)):s.gamescene.map.addChild(t))},this,150);break;case EffectType.AnyAngle:h=MathUtils.getAngle(MathUtils.getRadian2(t.x,t.y,i.x,i.y)),d.rotation=h+90;var S=this.setSkillEff(d,e.effectId,0,-45,c,u);return S&&t.parent&&t.addChild(d),700;case EffectType.Sustain:d.loadUrl(ResDataPath.GetSkillPathByID(e.effectId),!0),null==this.effectsConfig&&(this.effectsConfig=GlobalConfig.ins("EffectsConfig"));var w=this.effectsConfig[e.tarEff[0]],I=t.getChildByName(w.group+"");I&&DisplayUtils.dispose(I),d.name=w.group+"";var G=egret.Tween.get(d);G.wait(w.duration).call(function(e){egret.Tween.removeTweens(e),DisplayUtils.dispose(e);var t=ObjectPool.ins().push(e);t||(e=null)},this,[d]),d.scaleX=c,d.scaleY=u,t.parent&&t.addChild(d);break;case EffectType.Zidan:var L=t.dir,v=e.effectId+(1==e.isDir?"_"+DirUtil.get2Dir(L):"");l=t.localToGlobal(),this.gamescene.map.globalToLocal(l.x,l.y,l);var P=this.setSkillEff(d,v,l.x,l.y,c,u);if(P){if(null==this.gamescene||null==this.gamescene.map)break;if(o?(d.x=0,d.y=0,o.addChild(d)):this.gamescene.map.addEntity(d),t.buffList[Const.zidanBuff]){var k=t.buffList[Const.zidanBuff].effConfig.args.t;egret.setTimeout(function(){if(e.effectId2){v=e.effectId2+(1==e.isDir?"_"+DirUtil.get2Dir(L):"");var i=ObjectPool.ins().pop("MovieClip");s.setSkillEff(i,v,l.x,l.y,c,u),t.parent&&t.parent.addChildAt(i,t.parent.getChildIndex(t)-1)}},this,k)}break}case EffectType.FashiBall:var E=e.effectId2.split(",");l=i.localToGlobal(),this.gamescene.map.globalToLocal(l.x,l.y,l);var R=this.setSkillEff(d,E[0],l.x,l.y,c,u);if(R){if(null==this.gamescene||null==this.gamescene.map)break;i.parent&&i.parent.addChildAt(d,i.parent.getChildIndex(i)-1);var D=ObjectPool.ins().pop("MovieClip");D.loadUrl(ResDataPath.GetSkillPathByID(e.effectId),!0);var M=parseInt(MathUtils.limit(0,2));D.rotation=0==M?MathUtils.limit(-40,-20):MathUtils.limit(20,40);var A=10*D.rotation;D.x=l.x+A,D.y=l.y-500,D.scaleX=c,D.scaleY=u,i.parent&&i.parent.addChild(D);var C=egret.Tween.get(D);C.to({x:l.x,y:l.y},400).call(function(e){egret.Tween.removeTweens(e),DisplayUtils.dispose(e);var t=ObjectPool.ins().push(e);t||(e=null);var o=ObjectPool.ins().pop("MovieClip"),n=s.setSkillEff(o,E[1],l.x,l.y,c,u);n&&i.parent&&i.parent.addChild(o)},this,[D])}}return 300}this.skillEff||(this.skillEff=new SkillEff,LayerManager.Game_Main.addChildAt(this.skillEff,-1)),this.skillEff.playEff(e.effectId);for(var B=0,x=EntityManager.ins().GetRoles();B<x.length;B++){var m=x[B];this.PlayDummySkillEff(m,e.effectId2)}},t.prototype.setSkillEff=function(e,t,i,o,s,n){var r=this.skillEffDic.get(t);if(!r){var a={isCanPlay:!1,time:egret.getTimer()};return this.skillEffDic.set(t,a),this.playEffMc(e,t,i,o,s,n),!0}if(r.isCanPlay||egret.getTimer()-r.time>=1e4)return r.time=egret.getTimer(),this.playEffMc(e,t,i,o,s,n),!0;DisplayUtils.dispose(e);var l=ObjectPool.ins().push(e);return l||(e=null),!1},t.prototype.playEffMc=function(e,t,i,o,s,n){var r=this;return e.loadUrl(ResDataPath.GetSkillPathByID(t),!0,1,function(e){DisplayUtils.dispose(e);var i=ObjectPool.ins().push(e);i||(e=null);try{var o=r.skillEffDic.get(t);o.isCanPlay=!0}catch(s){egret.log("技能记录报错了str："+t)}},3e3),e.x=i,e.y=o,e.scaleX=s,e.scaleY=n,e},t.prototype.enterMap=function(){if(newAI.ins().stop(),newAI.ins().ChangeMap(),EntityManager.ins().removeAll(),TimerManager.ins().removeAll(GameMap),DropHelp.clearDrop(),this.gamescene&&this.gamescene.map&&(this.gamescene.map.clearBloodLayer(),this.gamescene.map.changeMap()),GameMap.IsNoramlLevel()){var e=Encounter.ins().encounterModel;for(var t in e){var i=e[t];i&&this.createEntityByModel(i)}Encounter.ins().zyKeyId>0&&Encounter.ins().createBoss()}var o=ViewManager.ins().getView(BossBloodPanel);o&&o.ClearData();var s=ViewManager.ins().getView(UIView2);ViewManager.ins().close(BossBloodPanel),GameMap.IsPublicBoss()||GameMap.IsHomeBoss()||GameMap.IsSyBoss()||GameMap.IsTenKill()||GameMap.IsMiJing()||GameMap.IsZhuanshengBoss()||GameMap.IsGuildBoss()||GameMap.IsGuildWar()||GameMap.IsKfBoss()||GameMap.IsWorldBoss()||GameMap.IsXbBoss()||GameMap.IsHeroBattle()||GameMap.IsGuanQiaBoss()||GameMap.IsTeamFb()||GameMap.IsMaterialFb()||GameMap.IsPersonalBoss()||GameMap.IsCityBoss()||GameMap.IsChaosBttle()?(ViewManager.ins().close(UIView1_1),s&&s.isShow&&(GameMap.IsGuanQiaBoss()||s.showSelectView(UIView2.NAV_BATTLE),ViewManager.ins().close(PlayFunView))):(ViewManager.ins().open(UIView1_1),s&&s.isShow&&(GameMap.IsNoramlLevel()||s.showSelectView(UIView2.NAV_BATTLE),ViewManager.ins().open(PlayFunView))),GameMap.IsHeroBattle()||GameMap.IsGuanQiaBoss()||GameMap.IsTeamFb()||GameMap.IsMaterialFb()||GameMap.IsPersonalBoss()||GameMap.IsCityBoss()?ViewManager.ins().open(BossBattleView,GameMap.fbType):ViewManager.ins().close(BossBattleView),GameMap.IsTenKill()?ViewManager.ins().open(TenKillBattleView):ViewManager.ins().close(TenKillBattleView),GameMap.IsHeroBattle()||GameMap.IsTiaoZhan()||GameMap.IsTeamFb()?ViewManager.ins().open(ActivityType303TimePanel):ViewManager.ins().close(ActivityType303TimePanel),GameMap.IsNoramlLevel()||GameMap.IsTenKill()||GameMap.IsMiJing()||ViewManager.ins().open(BattleStart),GameMap.IsTeamFb()&&ViewManager.ins().close(FbWin),GameMap.IsChaosBttle()?ViewManager.ins().open(ChaosBattleAtkWin):ViewManager.ins().close(ChaosBattleAtkWin),MessageCenter.ins().dispatch(MessageDef.CHANGE_MAP_MSG)},t.prototype.entityBloodUpData=function(e,i){var o=EntityManager.ins().getEntityByHandle(e);o&&(o.infoModel.setAtt(AttributeType.atHp,i),o.updateBlood(),0==i&&DropHelp.setTempDropPoint(Const.PixelToPos(o.x),Const.PixelToPos(o.y)),o.infoModel.masterHandle==t.ins().actorModel.handle&&t.ins().postHpChange())},t.prototype.postHpChange=function(){},Object.defineProperty(t.prototype,"gamescene",{get:function(){return ViewManager.ins().getView(GameSceneView)},enumerable:!0,configurable:!0}),t.prototype.createGuanqiaMonster=function(e){void 0===e&&(e=!1),null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig);var t=UserFb.ins();null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig"));var i=this.chaptersConfig[t.guanqiaID];if(null==i)return void Main.errorBack("gamelogic.createGuanqiaMonster guanqieID "+t.guanqiaID);var o=t.GetWaveMonsterCount();this.rPosindex>=t.GetRPos().length&&(this.rPosindex=0);for(var s=this.rPosindex,n=0,r=this.radiusMap;n<r.length;n++){var a=r[n];a.length=0}var l=t.GetRPos()[s],h=l.x-this.MONSTER_RADIUS,c=l.y-this.MONSTER_RADIUS;this.writeMap(this.radiusMap,h,c,o),e||this.CreateRewardsPop();for(var u=0;u<this.MONSTER_LEN;u++)for(var d=0;d<this.MONSTER_LEN;d++){var p=this.radiusMap[u][d];if(p){var f=null;if(!e){var g=MonstersConfig.createModel(this.monstersConfig[i.waveMonsterId],f?2:0);g.x=(h+u)*GameMap.CELL_SIZE+(GameMap.CELL_SIZE>>1),g.y=(c+d)*GameMap.CELL_SIZE+(GameMap.CELL_SIZE>>1);var _=this.createEntityByModel(g);this.CacheReward(_.handle)}if(e){var m=MonstersConfig.createModel(this.monstersConfig[i.waveMonsterId],f?2:0);m.x=(h+u)*GameMap.CELL_SIZE+(GameMap.CELL_SIZE>>1),m.y=(c+d)*GameMap.CELL_SIZE+(GameMap.CELL_SIZE>>1),OtherAIModel.getInstance.createMonsters(m)}}}this.m_IsRepeatCreateMonster=i.wavePointCount-1,this.m_IsRepeatStart=!1,this.rPosindex++,this.fristEnterGame?this.timerID=egret.setTimeout(this.startAI,this,3e3):this.startAI(),e||this.createGuanqiaMonster(!0)},t.prototype.startAI=function(){egret.clearTimeout(this.timerID),this.fristEnterGame=!1,GameMap.IsNoramlLevel()?newAI.ins().start():newAI.ins().stop()},t.prototype.CacheReward=function(e){var t=this.m_Reward.shift();this.m_RewardDict[e]=t},t.prototype.GetReward=function(e){var t=this.m_RewardDict[e];return t&&delete this.m_RewardDict[e],t},t.prototype.CreateRewardsPop=function(){for(var e=[];;){var t=UserFb.ins().getRewardsPop();if(null==t)break;for(var i=0;i<t.drops.length;i++)e.push(t.drops[i])}for(var o=0,s=e.length-1;s>=0;--s){var n=e[s];1==n.id&&(o+=n.count,e.splice(s,1))}this.m_RewardDict=[],this.m_Reward=[],null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig"));for(var r=this.chaptersConfig[UserFb.ins().guanqiaID],a=r.wavePointCount*r.waveMonsterCount,l=this._GetRandomList(a-1,o),h=l[0],c=l[1],u=0,d=0,p=h;d<p.length;d++){var f=p[d];f?(++u,this.m_Reward.push([{id:1,count:f}])):this.m_Reward.push(null)}c>0&&e.push({id:1,count:c}),this.m_Reward.push(e)},t.prototype._GetRandomList=function(e,t){for(var i=MathUtils.limitInteger(.1*e,.65*e),o=Math.round(t/i),s=[],n=[],r=0;e>r;++r)s.push(r),n.push(null);for(var r=0;e-i>r;++r){var a=Math.floor(Math.random()*s.length);s.splice(a,1)}for(var l=0,h=s;l<h.length;l++){var c=h[l],u=Math.round(o+(Math.random()-.5)*o);if(!(t>=u)){0!=t&&(n[c]=t);break}t-=u,n[c]=u}return[n,t]},t.prototype.ClearRepeatCreate=function(){this.m_IsRepeatStart=!1,TimerManager.ins().remove(this.RepeatCreateMonster,this),TimerManager.ins().remove(this.RepeatCreateMonster2,this)},t.prototype.IsRepeatCreateFinish=function(){return!this.m_IsRepeatStart||this.m_IsRepeatCreateMonster<=0},t.prototype.StartRepeatMonster=function(){if(!(this.m_IsRepeatStart||!GameMap.IsNoramlLevel()||Encounter.IsBoss()||this.m_IsRepeatCreateMonster<=0)){var e=EntityManager.ins().getMainRole(0);if(e){null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig"));var t=this.chaptersConfig[UserFb.ins().guanqiaID],i=(GlobalConfig.chaptersCommonConfig,t.wavePointGap<=t.waveTimeGap?t.waveTimeGap+100:t.wavePointGap);this.m_IsRepeatStart=!0,TimerManager.ins().doTimer(i,0,this.RepeatCreateMonster,this)}}},t.prototype.RepeatCreateMonster=function(){var e=this.m_IsRepeatCreateMonster;if(this.m_IsRepeatCreateMonster=Math.max(this.m_IsRepeatCreateMonster-1,0),!GameMap.IsNoramlLevel()||0>=e&&this.m_RepeatCount<=0)return void this.ClearRepeatCreate();if(!(0>=e)){var t=EntityManager.ins().getMainRole(0);if(t){null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig"));var i=this.chaptersConfig[UserFb.ins().guanqiaID],o=GlobalConfig.chaptersCommonConfig;this.posDict={},this.m_RepeatCount=i.waveMonsterCount;for(var s=Math.floor(i.waveTimeGap/(this.m_RepeatCount-1)),n=0;99>n;++n){var r=MathUtils.limitInteger(0,4),a=MathUtils.limitInteger(o.minRange,o.maxRange),l=MathUtils.limitInteger(1-a,a-1),h=void 0,c=void 0,u=Const.PixelToPos(t.x),d=Const.PixelToPos(t.y);if(0==r?(h=u-l,c=d+a):1==r?(h=u+r,c=d-l):2==r?(h=u+l,c=d-a):(h=u-a,c=d+l),GameMap.checkWalkable(h,c)){this.m_RepeatPoint.x=h,this.m_RepeatPoint.y=c;break}}TimerManager.ins().isExists(this.RepeatCreateMonster2,this)||TimerManager.ins().doTimer(s,this.m_RepeatCount,this.RepeatCreateMonster2,this)}}},t.prototype.RepeatCreateMonster2=function(){var e=this;if(!(this.m_RepeatCount<=0)){var t,i,o=GlobalConfig.chaptersCommonConfig,s=o.range,n=function(){for(var o=0;99>o;++o){var n=2*s+1,r=MathUtils.limitInteger(0,n*n-1),a=e.m_RepeatPoint.x+Math.floor(r/n),l=e.m_RepeatPoint.y+Math.floor(r%n),h=1e4*a+l;if(GameMap.checkWalkable(a,l)&&!e.posDict[h])return e.posDict[h]=!0,t=a,void(i=l)}};n(),t&&i||(t=this.m_RepeatPoint.x,i=this.m_RepeatPoint.y),null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig);var r=this.m_RepeatCount--<=1&&this.m_IsRepeatCreateMonster<=0;null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig"));var a=this.chaptersConfig[UserFb.ins().guanqiaID],l=MonstersConfig.createModel(this.monstersConfig[a.waveMonsterId],r?a.eliteRate:0);l.x=t*GameMap.CELL_SIZE+(GameMap.CELL_SIZE>>1),l.y=i*GameMap.CELL_SIZE+(GameMap.CELL_SIZE>>1),GameMap.checkWalkable(t,i)||console.log("怪物不能走。。。。。。。");var h=this.createEntityByModel(l);this.CacheReward(h.handle),r&&(h.setFootRing(CharMonster.FOOT_RING_TYPE_LEVEL_BOSS),h.setScale(1.2)),r&&this.ClearRepeatCreate()}},t.prototype.writeMap=function(e,t,i,o){var s=MathUtils.limitInteger(0,this.MONSTER_LEN-1),n=MathUtils.limitInteger(0,this.MONSTER_LEN-1);if(e[s][n])o--,o>0&&this.writeMap(e,t,i,o);else{var r=GameMap.checkWalkable(t+s,i+n);r&&(e[s][n]=1),o--,o>0&&this.writeMap(e,t,i,o)}},t.prototype.postHookStateChange=function(e){return this.hookState=e,e},t.prototype.postMoveEntity=function(e,t){return[e,t]},t.calculateRealAttribute=function(e,t){var i,o=e.infoModel.getAtt(t),s=e.buffList;for(var n in s)i=s[n],i.effConfig.type==SkillEffType.ADD_ATTR&&i.effConfig.args.d==t&&(o+=i.value);return o},t.prototype.sendChangElement=function(e,t){var i=new Sproto.cs_element_set_req_request;i.roleid=e,i.mainEle=t,GameSocket.ins().Rpc(C2sProtocol.cs_element_set_req,i)},t.prototype.changeMainEle=function(e){for(var t=e.roleid,i=SubRoles.ins().rolesModel.length,o=0;i>o;o++){var s=SubRoles.ins().getSubRoleByIndex(o);if(s.index==t){s.attrElementMianType=e.mainEle;var n=EntityManager.ins().entityList[s.handle];n&&n.setElementImg(e.mainEle)}}GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_MAINELEMENT)},t.prototype.sendReadyComple=function(){var e=new Sproto.cs_client_ready_req_request;this.Rpc(C2sProtocol.cs_client_ready_req,e),this.sendRedPointGetData()},t.prototype.sendRedPointGetData=function(){NeiGongControl.ins().getAllRoleNeiGongMsg(),UserFb.ins().sendGetQuanQiaBossInit(),PetSproto.ins().sendGetPetInitMsg(),PetSproto.ins().sendPetAttachInit(),MountSproto.ins().sendGetMountInitMsg(),GadSproto.ins().sendGadInit(),OnlineRewardsModel.ins().sendExpWelExpInitMsg(),ChaosBattleSproto.ins().sendInfo(),ChaosBattleSproto.ins().sendRank(),TheGunSproto.ins().sendTheGunInitMsg()},t.prototype.SendGetOtherActorBaseInfo=function(e,t){var i=new Sproto.cs_get_actor_module_isactive_request;i.otherid=e,i.roleid=t,this.Rpc(C2sProtocol.cs_get_actor_module_isactive,i)},t.prototype.SendGetOtherInfo=function(e,t,i){var o=new Sproto.cs_get_other_actor_base_info_request;o.otherid=e,o.roleid=t,o.id=i,this.Rpc(C2sProtocol.cs_get_other_actor_base_info,o)},t.prototype.SendGetOtherPlayerInfo=function(e,t){var i=new Sproto.cs_rank_player_info_request;i.dbid=e,i.roleId=t,this.Rpc(C2sProtocol.cs_rank_player_info,i)},t.prototype.sendBattleBegin=function(){var e=new Sproto.cs_monopoly_raid_open_request;this.Rpc(C2sProtocol.cs_monopoly_raid_open,e)},t.IS_CTRL_KEY=!1,t.SKILL_EFF_SCALE=1,t.HOOK_STATE_HOOK=0,t.HOOK_STATE_FIND_ENMENY=1,t}(BaseSystem);__reflect(GameLogic.prototype,"GameLogic"),MessageCenter.compile(GameLogic),window.GameLogic=GameLogic;var MainScene=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnter=function(){e.prototype.onEnter.call(this),this.addLayerAt(LayerManager.Game_Bg,1),this.addLayerAt(LayerManager.Game_Main,2),this.addLayer(LayerManager.UI_HUD),this.addLayer(LayerManager.UI_USER_INFO),this.addLayer(LayerManager.UI_Main),this.addLayer(LayerManager.UI_NAVIGATION),this.addLayer(LayerManager.UI_Main_2),this.addLayer(LayerManager.UI_Popup),this.addLayer(LayerManager.UI_Tips),this.addLayer(LayerManager.UI_Top),Rank.ins().sendGetRankingData(0),Rank.ins().sendGetAllPraiseData(),ViewManager.ins().open(GameSceneView),ViewManager.ins().open(UIView1),ViewManager.ins().open(UIView1_1),ViewManager.ins().open(UIView2),ViewManager.ins().open(TipsView),RoleMgr.ins().hideLabel(),newAI.ins().init(),GameMap.IsPublicBoss()||GameMap.IsHomeBoss()||GameMap.IsSyBoss()||GameMap.IsZhuanshengBoss()||GameMap.IsGuildBoss()||GameMap.IsGuildWar()||GameMap.IsKfBoss()||GameMap.IsWorldBoss()||GameMap.IsXbBoss()||GameMap.IsHeroBattle()||GameMap.IsGuanQiaBoss()||GameMap.IsTeamFb()||GameMap.IsMaterialFb()||GameMap.IsPersonalBoss()||GameMap.IsCityBoss()?ViewManager.ins().hideUIView(UIView1_1,!1):ViewManager.ins().hideUIView(UIView1_1,!0);var t=egret.setTimeout(function(){egret.clearTimeout(t),ResMgr.ins().clearLoadingRes(),SdkMgr.isWxGame()&&WxSdk.ins().setKeepScreenOn(),WxSdk.ins().IsLoinged=!0},this,5e3);DeviceUtils.isIOS&&StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTap,this)},t.prototype.onTap=function(){var e=SoundSetPanel.getSoundLocalData("soundBg");SoundUtils.getInstance().setMusicEnable(e),e&&(SoundUtils.getInstance().setMusicEnable(!0),GameMap.IsNoramlLevel()?ViewManager.ins().isShow(MainCityView)?SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[3].id,-1,null,!1):SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[1].id,-1,null,!1):SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[2].id,-1,null,!1)),StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTap,this)
},t}(BaseScene);__reflect(MainScene.prototype,"MainScene"),window.MainScene=MainScene;var Role=function(e){function t(){var t=e.call(this)||this;return t.title=0,t.roleID=-1,t.job=0,t.sex=0,t.power=0,t.hjPower=0,t.jMPower=0,t.skillsData=[],t.skillsDataIndex=[],t.skillBreakData=[],t.jingMaiData=new JingMaiData,t.zhuanZhiJm=new JingMaiData,t.zhuangbei=[],t.bianShen=-1,t.legendDress=null,t.mountsLevel=100,t.mountsShowLv=100,t.zhuanzhiLv=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"shield",{get:function(){return this.shieldData.level},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loongSoul",{get:function(){return this.loongSoulData.level},enumerable:!0,configurable:!0}),t.getAttrTypeByName=function(e){return this.translate[e]},t.getJobNameByJob=function(e){return this.jobNumberToName(e)},t.getEquipNameByType=function(e){return this.typeNumberToName(e)},t.getWingEquipNameByType=function(e){return this.typeEquipWingToName(e)},t.getFuwenEquipNameByType=function(e){return this.typeFuwenNumberToName(e)},t.prototype.parser=function(e){this.title=e.title,this.index=e.index,this.job=e.job,this.sex=e.sex,this.power=e.power,this.hjPower=e.power2,this.skillsData=e.skillDatas,this.skillsDataIndex=e.fightSkill,this.skillBreakData=[1,1,1,1,1],this.equipsData=[];for(var t=0,i=e.equipsData;t<i.length;t++){var o=i[t],s=new EquipsData;s.parser(o),this.equipsData.push(s)}this.exRingsData=[0,0,0,0],this.wingsData=new WingsData,this.wingsData.parser(e.wingsData),this.jingMaiData.parser(e.jingmai_Data),this.zhuanZhiJm.parser(e.zzjingmai_Data),this.parserAtt(e.attributeData),this.parserExAtt(e.attributeExData),this.zhuZaiData=[];for(var n=0,r=e.zhuZaiData;n<r.length;n++){var o=r[n],a=new ZhuZaiData;a.parser(o),this.zhuZaiData[a.id-1]=a}this.zhuangbei=e.zhuangbei,this.longzhuangdata=e.longzhuang,e.fuwen&&(this.fuwen=new FuwenItemData(e.fuwen)),this.legendDress=e.legendDress,this.mountsLevel=e.ride,this.mountsShowLv=e.rideshow,this.attrElementData=e.elements,this.attrElementMianType=e.mainEle,this.zhuanzhiLv=e.zhuanzhiLv,this.masterHandle==GameLogic.ins().actorModel.handle&&(LocalStorageData.setItem(LocalDataKey.job+"_"+this.roleID,this.job+""),LocalStorageData.setItem(LocalDataKey.sex+"_"+this.roleID,this.sex+""),LocalStorageData.setItem(LocalDataKey.zhuangbei4+"_"+this.roleID,this.zhuangbei[4]+""),LocalStorageData.setItem(LocalDataKey.zhuangbei0+"_"+this.roleID,this.zhuangbei[0]+""),LocalStorageData.setItem(LocalDataKey.mountLv+"_"+this.roleID,this.mountsShowLv+""),LocalStorageData.setItem(LocalDataKey.zhuanzhiLv+"_"+this.roleID,this.zhuanzhiLv+""))},t.prototype.parseForgeChange=function(e,t){switch(t){case PackageID.strongthen:this.equipsData[e.index].strengthen=e.value;break;case PackageID.Gem:this.equipsData[e.index].gem=e.value;break;case PackageID.Zhuling:this.equipsData[e.index].zhuling=e.value;break;case PackageID.Tupo:this.equipsData[e.index].tupo=e.value;break;case 1100:this.equipsData[e.index].bless=e.value}},t.prototype.parserExAtt=function(e){this.attributeExData=e},t.prototype.parserOtherRole=function(e){this.mountsLevel=e.ridelv,this.mountsShowLv=e.rideshowLv,this.zhuanzhiLv=e.zhuanzhiLv,this.attrElementData=e.elements,this.attrElementMianType=e.mainEle,this.parserAtt(e.attributeData),this.parserExAtt(e.attributeExData),this._name=e.name,this.roleID=e.roleID,this.job=e.job,this.sex=e.sex,this._lv=e.lv,this.equipsData=[],this.equipsData[2]=new EquipsData,this.equipsData[2].item=new ItemData,this.equipsData[2].item.configID=e.bodyConfigID,this.equipsData[0]=new EquipsData,this.equipsData[0].item=new ItemData,this.equipsData[0].item.configID=e.weaponConfigID,this.wingsData=new WingsData,this.wingsData.lv=e.wingLv,this.wingsData.showLv=e.wingshowLv,this.wingsData.openStatus=e.wingOpenStatus,this.title=e.title,this.guildID=e.guildID,this.guildName=e.guildName,this.warLevel=e.warLevel,this.zhuangbei=e.zhuangbei,this.teamId=e.owerid,this.masterHandle==GameLogic.ins().actorModel.handle&&(LocalStorageData.setItem(LocalDataKey.job+"_"+this.roleID,this.job+""),LocalStorageData.setItem(LocalDataKey.sex+"_"+this.roleID,this.sex+""),LocalStorageData.setItem(LocalDataKey.zhuangbei4+"_"+this.roleID,this.zhuangbei[4]+""),LocalStorageData.setItem(LocalDataKey.zhuangbei0+"_"+this.roleID,this.zhuangbei[0]+""),LocalStorageData.setItem(LocalDataKey.mountLv+"_"+this.roleID,this.mountsShowLv+""),LocalStorageData.setItem(LocalDataKey.zhuanzhiLv+"_"+this.roleID,this.zhuanzhiLv+""))},t.prototype.getMinEquipIndexByType=function(e){for(var t=0,i=Number.MAX_VALUE,o=0,s=ForgeConst.CAN_FORGE_EQUIP.length,n=0;s>n;++n){var r=ForgeConst.CAN_FORGE_EQUIP[n];switch(e){case 0:o=this.equipsData[r].strengthen;break;case 1:o=this.equipsData[r].gem;break;case 2:o=this.equipsData[r].zhuling;break;case 3:o=this.equipsData[r].tupo}i>o&&(i=o,t=r)}return t},t.prototype.getEquipForgeTotalLv=function(e){for(var t=0,i=ForgeConst.CAN_FORGE_EQUIP.length;i--;){var o=ForgeConst.CAN_FORGE_EQUIP[i];switch(e){case 0:t+=this.getEquipByIndex(o).strengthen;break;case 1:t+=this.getEquipByIndex(o).gem;break;case 2:t+=this.getEquipByIndex(o).zhuling;break;case 3:t+=this.getEquipByIndex(o).tupo}}return t},t.prototype.GetMinEquipIndexAndLevel=function(e){for(var t=0,i=Number.MAX_VALUE,o=0,s=ForgeConst.CAN_FORGE_EQUIP.length,n=0;s>n;++n){var r=ForgeConst.CAN_FORGE_EQUIP[n];switch(e){case 0:o=this.equipsData[r].strengthen;break;case 1:o=this.equipsData[r].gem;break;case 2:o=this.equipsData[r].zhuling;break;case 3:o=this.equipsData[r].tupo}i>o&&(i=o,t=r)}return[t,i]},t.prototype.GetEquipLevelByType=function(e,t){var i=this.equipsData[e];switch(t){case ForgeType.BOOST:return i.strengthen;case ForgeType.GEM:return i.gem;case ForgeType.ZHULING:return i.zhuling;case ForgeType.TUPO:return i.tupo}return console.log("Role:GetEquipLevelByType 未定义的强化类型 "+t),0},t.prototype.getSkillIDs=function(){var e=[];if(this.skillsDataIndex)for(var t=0;t<this.skillsDataIndex.length;t++){var i=this.skillsDataIndex[t],o=this.skillsData[i-1];if(!(0>=o)&&null!=o&&null!=i){var s=UserSkill.ins().getSkillId(this.job,i,o);e.push(s)}}return e},t.prototype.getpPasserbySkillIDs=function(){for(var e=[],t=1;3>t;t++){var i=UserSkill.ins().getSkillId(this.job,t,1);e.push(i)}return e},t.prototype.getCurSkillIDs=function(){for(var e=[],t=0;t<this.skillsDataIndex.length;t++){var i=this.skillsDataIndex[t],o=this.skillsData[i-1];if(null!=o&&null!=i){var s=UserSkill.ins().getSkillId(this.job,i,o);e.push(s)}}return e},t.prototype.getSkillListByeType=function(e){for(var t=this.getSkillIDs(),i=[],o=GlobalConfig.ins("SkillsConfig"),s=0;s<t.length;s++){var n=o[t[s]];n&&n.skillType==e&&i.push(t[s])}return i},t.prototype.getAllPassSkillId=function(){var e=GlobalConfig.ins("SkillsOpenConfig")[this.job],t=[];if(this.skillsData)for(var i=0;i<this.skillsData.length;i++)if(this.skillsData[i]>0)for(var o=0;o<e.length;o++)if(e[o].index==i+1){var s=e[o].skillId-e[o].initialLevel+this.skillsData[i],n=GlobalConfig.ins("SkillsConfig")[s];n&&n.skillType==SkillType.TYPE4&&t.push(s);break}return t},t.prototype.mergeData=function(e){return this.masterHandle=e.masterHandle,this.handle=e.handle,this.type=e.type,this.x=e.x,this.y=e.y,this.attributeData=e.attributeData,this.attributeExData=e.attributeExData,this.team=e.team,this.name=e.name,this.guildID=e.guildID,this.guildName=e.guildName,e instanceof t&&(this.warLevel=e.warLevel,this.mountsLevel=e.mountsLevel,this.mountsShowLv=e.mountsShowLv,this.zhuanzhiLv=e.zhuanzhiLv),this},t.prototype.getEquipDataBysubType=function(e){for(var t=0;t<this.equipsData.length;t++){var i=this.equipsData[t+1].item.itemConfig;if(!i)return null;if(i.subType==e)return this.equipsData[t+1]}return null},t.prototype.getSkillTotalPower=function(){for(var e=0,t=0;t<this.skillsData.length;t++){var i=GlobalConfig.skillPowerConfig[t];e+=this.skillsData[t]*i.powerPerLevel}return e},t.prototype.getForgeTotalPower=function(e){for(var t=0,i=ForgeConst.CAN_FORGE_EQUIP.length;i--;){var o=ForgeConst.CAN_FORGE_EQUIP[i],s=void 0;switch(e){case 0:s=this.equipsData[o].strengthen;break;case 1:s=this.equipsData[o].gem;break;case 2:s=this.equipsData[o].zhuling;break;case 3:s=this.equipsData[o].tupo}if(s>0){var n=UserForge.ins().getForgeConfigByPos(o,s,e);t+=Math.floor(UserBag.getAttrPower(n.attr))}}return t},Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"guildAndName",{get:function(){return 0==this.guildID||void 0==this.guildID?this.name:"|C:0x3C8CF8&T:"+this.guildName+"|\n"+this.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lv",{get:function(){return this._lv},set:function(e){this._lv=e},enumerable:!0,configurable:!0}),t.prototype.getZhuZaiDataByIndex=function(e){return this.zhuZaiData[e]},t.prototype.getEquipByIndex=function(e){return this.equipsData[e]},t.prototype.getEquipLen=function(){return this.equipsData.length},t.prototype.getEquipLen2=function(){return EquipPos.MAX},t.prototype.getSkillsDataByIndex=function(e){return this.skillsData[e]},t.prototype.setSkillsDataByIndex=function(e,t){this.skillsData[e]=t},t.prototype.getExRingsData=function(e){return this.exRingsData[e]},t.prototype.setExRingsData=function(e,t){this.exRingsData[e]=t},t.prototype.setZhuZaiData=function(e,t){var i=this.zhuZaiData[e];if(i.id=t.id,t.level<i.level){null==this.EquipPointGrowUpConfig&&(this.EquipPointGrowUpConfig=GlobalConfig.ins("EquipPointGrowUpConfig"));var o=this.EquipPointGrowUpConfig[i.id][t.level];if(o){var s=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100139,[o.rank,o.star]);WarnWin.show(s,null,this)}}else t.level==i.level&&WarnWin.show(GlobalConfig.jifengTiaoyueLg.st100140,null,this);i.level=t.level},t.prototype.getSkillList=function(){for(var e=this.getCurSkillIDs(),t=[],i=0;i<e.length;i++){var o=e[i],s=GlobalConfig.skillsConfig[o];ErrorLog.Assert(s,"No such skillId config:"+o)||t.push(s)}return t},t.GetNextLv=function(e){t.levelList.indexOf(e);return t.levelList[t.levelList.indexOf(e)+1]},t.jobNumberToName=function(e){var t=[GlobalConfig.jifengTiaoyueLg.st100110,GlobalConfig.jifengTiaoyueLg.st100111,GlobalConfig.jifengTiaoyueLg.st100112,GlobalConfig.jifengTiaoyueLg.st100113];return t[e]},Object.defineProperty(t,"inverseTranslate",{get:function(){if(t._inverseTranslate)return t._inverseTranslate;t._inverseTranslate={};for(var e in t.translate)t._inverseTranslate[t.translate[e]]=e;return t._inverseTranslate},enumerable:!0,configurable:!0}),t.typeNumberToName=function(e){var t=[GlobalConfig.jifengTiaoyueLg.st100114,GlobalConfig.jifengTiaoyueLg.st100115,GlobalConfig.jifengTiaoyueLg.st100116,GlobalConfig.jifengTiaoyueLg.st100117,GlobalConfig.jifengTiaoyueLg.st100118,GlobalConfig.jifengTiaoyueLg.st100119,GlobalConfig.jifengTiaoyueLg.st100120,GlobalConfig.jifengTiaoyueLg.st100121,GlobalConfig.jifengTiaoyueLg.st100122,GlobalConfig.jifengTiaoyueLg.st100123,GlobalConfig.jifengTiaoyueLg.st100124,GlobalConfig.jifengTiaoyueLg.st100125];return t[e]},t.typeEquipWingToName=function(e){var t=[GlobalConfig.jifengTiaoyueLg.st100126,GlobalConfig.jifengTiaoyueLg.st100127,GlobalConfig.jifengTiaoyueLg.st100128,GlobalConfig.jifengTiaoyueLg.st100129];return t[e]},t.typeFuwenNumberToName=function(e){var t=[GlobalConfig.jifengTiaoyueLg.st100130,GlobalConfig.jifengTiaoyueLg.st100131,GlobalConfig.jifengTiaoyueLg.st100132,GlobalConfig.jifengTiaoyueLg.st100133,GlobalConfig.jifengTiaoyueLg.st100134,GlobalConfig.jifengTiaoyueLg.st100135,GlobalConfig.jifengTiaoyueLg.st100136,GlobalConfig.jifengTiaoyueLg.st100137,GlobalConfig.jifengTiaoyueLg.st100138];return t[e]},t.prototype.GetSubRoleData=function(){var e=new SubRole;e.job=this.job,e.sex=this.sex,e.legendDress=this.legendDress;var t=this.getEquipByIndex(EquipPos.CLOTHES);e.clothID=null!=t?t.item.configID:0;var i=this.getEquipByIndex(EquipPos.WEAPON);e.swordID=null!=i?i.item.configID:0,this.wingsData.openStatus&&(e.wingLevel=this.wingsData.lv,e.wingShowLevel=this.wingsData.showLv),e.wingOpenStatus=this.wingsData.openStatus,e.zhuangbei=[];for(var o=0;o<this.zhuangbei.length;++o)e.zhuangbei[o]=this.zhuangbei[o];return e.mountLv=this.mountsLevel,e.moubtShowLv=this.mountsShowLv,e.zhuanzhiLv=this.zhuanzhiLv,e},t.prototype.GetHeadImgName=function(){return ResDataPath.GetHeadMiniImgName(this.job,this.sex)},t.prototype.GetHeadImgName2=function(){return ResDataPath.GetHeadMiniImgName2(this.job,this.sex)},t.translate={hp:AttributeType.atMaxHp,atk:AttributeType.atAttack,def:AttributeType.atDef,res:AttributeType.atRes,crit:AttributeType.atCrit,tough:AttributeType.atTough},t.levelList=[0,1,10,20,30,40,50,60,70,80,1e3,2e3,3e3,4e3,5e3,6e3,7e3,8e3,9e3,1e4,11e3,12e3],t}(EntityModel);__reflect(Role.prototype,"Role"),window.Role=Role;var SubRoles=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rolesModel=[],t.m_JobToRole={},t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.doSubRole=function(e){for(var i=e.roleList.length,o=t.ins().subRolesLen,s=0,n=0;i>n;n++){var r=this.rolesModel[n];r||(r=new Role),r.roleID=n,r.parser(e.roleList[n]),this.rolesModel[n]||this.rolesModel.push(r),s+=r.power}this.m_JobToRole={},o&&o<this.rolesModel.length&&UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101756)},t.prototype.doSubRoleAtt=function(e){for(var t=e.roleID,i=0,o=this.rolesModel.length,s=0;o>s;s++){var n=this.getSubRoleByIndex(s);n.index==t&&(GameMap.IsNoramlLevel()&&(e.attributeData[0]=e.attributeData[2]),n.parserAtt(e.attributeData),n.power=e.power,n.attrElementData=e.elements),i+=n.power}n.attrElementData=e.elements},t.prototype.updateAttRoleCopy=function(e){for(var t=e.roleID,i=this.rolesModel.length,o=0;i>o;o++){var s=this.getSubRoleByIndex(o);s.index==t&&s.parserAtt(e.attributeData)}},t.prototype.getSubRoleByIndex=function(e){return this.rolesModel[e]},t.prototype.getEquipMinLevelByIndex=function(e,t){for(var i,o=this.rolesModel.length,s=0;o>s;s++){var n=this.rolesModel[s];if(n&&(n.job==t||0==t)){i=n.getEquipByIndex(e);break}}return i},t.prototype.GetSubRoleByJob=function(e){var t=this.m_JobToRole[e];if(null!=t)return t||null;t=!1;for(var i=0;i<this.rolesModel.length;++i){var o=this.rolesModel[i];if(null!=o&&o.job==e){t=o;break}}return this.m_JobToRole[e]=t,t||null},Object.defineProperty(t.prototype,"subRolesLen",{get:function(){return this.rolesModel.length},enumerable:!0,configurable:!0}),t.prototype.resetRolesModel=function(){this.rolesModel.length=0},t.prototype.GetZhuZaiData=function(e){var t=this.rolesModel[e];return t?t.zhuZaiData:null},t.MAX_COUNT=3,t}(BaseSystem);__reflect(SubRoles.prototype,"SubRoles"),window.SubRoles=SubRoles;var DamageTypes;!function(e){e[e.BLANK=0]="BLANK",e[e.HIT=1]="HIT",e[e.CRIT=2]="CRIT",e[e.HEJI=3]="HEJI"}(DamageTypes||(DamageTypes={}));var EffectType;!function(e){e[e.Targer=0]="Targer",e[e.Self=1]="Self",e[e.Ballistic=2]="Ballistic",e[e.AnyAngle=3]="AnyAngle",e[e.Sustain=4]="Sustain",e[e.Zidan=6]="Zidan",e[e.FashiBall=7]="FashiBall"}(EffectType||(EffectType={}));var EntityAction=function(){function e(){}return e.ATTACK="a",e.CAST="c",e.STAND="s",e.RUN="r",e.DIE="d",e}();__reflect(EntityAction.prototype,"EntityAction"),window.EntityAction=EntityAction;var ExAttributeType;!function(e){e[e.eatReflectProbability=0]="eatReflectProbability",e[e.eatReflectRate=1]="eatReflectRate",e[e.eatIgnoreReflect=2]="eatIgnoreReflect",e[e.eatGodBlessProbability=3]="eatGodBlessProbability",e[e.eatGodBlessRate=4]="eatGodBlessRate",e[e.eatDeathCurseProbability=5]="eatDeathCurseProbability",e[e.eatDeathCurseDamageIncrease=6]="eatDeathCurseDamageIncrease",e[e.eatDeathCurseTime=7]="eatDeathCurseTime",e[e.eatAllCrit=8]="eatAllCrit",e[e.eatAllCritTime=9]="eatAllCritTime",e[e.eatPrestigeReduction=10]="eatPrestigeReduction",e[e.eatPrestigeLevel=11]="eatPrestigeLevel",e[e.eatHejiDamageRole=12]="eatHejiDamageRole",e[e.eatHejiDamageMonstor=13]="eatHejiDamageMonstor",e[e.eatCount=14]="eatCount"}(ExAttributeType||(ExAttributeType={}));var RoleStateType;!function(e){e[e.COMA=1]="COMA",e[e.SHIELD=2]="SHIELD",e[e.SUPERARMOR=3]="SUPERARMOR",e[e.DENYMOVE=4]="DENYMOVE",e[e.CURSE_DEATH=5]="CURSE_DEATH",e[e.TIANZHU_CRIT=6]="TIANZHU_CRIT",e[e.MAX_DAMAGE=7]="MAX_DAMAGE",e[e.IMMUNE_COMA=8]="IMMUNE_COMA",e[e.SUCK_BLOOD=9]="SUCK_BLOOD",e[e.MAX_TARGET=10]="MAX_TARGET",e[e.NO_SKILL=11]="NO_SKILL",e[e.FROZEN=12]="FROZEN",e[e.SHARE=13]="SHARE",e[e.NOTMOVE=14]="NOTMOVE",e[e.INVINCIBLE=15]="INVINCIBLE",e[e.ANTIDES=16]="ANTIDES",e[e.GODKILL=17]="GODKILL",e[e.SLOW_SPEED=18]="SLOW_SPEED",e[e.CLEAN_BAD=19]="CLEAN_BAD",e[e.DOUBLE_ATK=21]="DOUBLE_ATK",e[e.MP_RECOVER=22]="MP_RECOVER"}(RoleStateType||(RoleStateType={}));var SkillEffType;!function(e){e[e.DAMAGE=1]="DAMAGE",e[e.ADD_HP=2]="ADD_HP",e[e.ADD_ATTR=3]="ADD_ATTR",e[e.STATE=4]="STATE",e[e.SUMMON=5]="SUMMON",e[e.DELAY_HIT=6]="DELAY_HIT",e[e.TRIGGER_SKILL=9]="TRIGGER_SKILL",e[e.CHANGE_ATTR=10]="CHANGE_ATTR",e[e.SUDDEN_MOVE=11]="SUDDEN_MOVE",e[e.INVISIBLE=12]="INVISIBLE",e[e.GHOST=13]="GHOST",e[e.BULLETTIME=14]="BULLETTIME",e[e.SELFKILL=15]="SELFKILL",e[e.RANNSKILL=16]="RANNSKILL",e[e.CLEANBAD=17]="CLEANBAD",e[e.RECOVER_MP=18]="RECOVER_MP",e[e.COST_MP=19]="COST_MP",e[e.DAMAGE_EX=20]="DAMAGE_EX",e[e.CHANGE_CD=21]="CHANGE_CD",e[e.MOATK=23]="MOATK",e[e.HEAL_EX=24]="HEAL_EX"}(SkillEffType||(SkillEffType={}));var DropHelp=function(){function e(){}return e.init=function(e){this.dropContainer=e,MessageCenter.addListener(Encounter.postCreateDrop,this.addDrop,this)},e.start=function(){TimerManager.ins().doTimer(100,0,this.findDrop,this),this.starting=!0},e.stop=function(){TimerManager.ins().remove(this.findDrop,this),this.starting=!1},e.addDrop=function(e,t){void 0===t&&(t=!0);var i=e[0],o=e[1],s=e[2];if(!this.itemPos[i+h+o]){var n=ObjectPool.ins().pop("CharItem");n.setData(s),n.tx=i,n.ty=o;var r=0,a=0,l=0,h="|";if(this.itemPos[i+h+o]||!this._CheckWalkable(i,o)){for(l=0;l<this.orderX.length&&(r=i+this.orderX[l],a=o+this.orderY[l],0==this._CheckWalkable(r,a)||null!=this.itemPos[r+h+a]);l++);if(l>=this.orderX.length){for(var c=2,u=!0,d=0;u&&++d<99;){for(var p=i-c;i+c>p&&u;p++)for(var f=o-c;o+c>f&&u;f++)r=p,a=f,0!=this._CheckWalkable(r,a)&&null==this.itemPos[r+h+a]&&(u=!1);c++}d>99&&console.error("addDrop while error!!!")}}else r=i,a=o;n.x=GameMap.CELL_SIZE*r+(GameMap.CELL_SIZE>>1),n.y=GameMap.CELL_SIZE*a+(GameMap.CELL_SIZE>>1),n.scaleX=n.scaleY=.3,n.alpha=0,egret.Tween.removeTweens(n);var g=300*Math.random();egret.Tween.get(n).wait(g).to({scaleX:1,scaleY:1,alpha:1},100).call(function(){egret.Tween.removeTweens(n)});var _=n.y;if(n.y=_-10,egret.Tween.get(n).wait(g).to({y:_},150).call(function(){egret.Tween.removeTweens(n)}),this.itemPos[r+h+a]=n,this.dropContainer&&(this.dropContainer.addChild(n),GameMap.fbType==UserFb.FB_TYPE_PERSONAL_BOSS||GameMap.fbType==UserFb.FB_TYPE_GUANQIABOSS||GameMap.fbType==UserFb.FB_TYPE_MATERIAL)){var m=this.dropContainer.numChildren;(m>=UserFb.ins().rewardNum||0==t)&&(this.timeOut=egret.setTimeout(this.autoFlyDrop,this,500,t))}}},e.clearDrop=function(){this.stop(),this.itemPos={},this.m_DropItem={},this.m_DropData={},this.dropContainer&&this.dropContainer.removeChildren(),this.completeFunc=null},e._MoveEntity=function(e,t,i){GameMap.IsNoramlLevel()?GameMap.moveEntity(e,t,i):GameMap.moveEntity(e,t,i,!0)},e._CheckWalkable=function(e,t){return GameMap.IsNoramlLevel()?GameMap.checkWalkable(e,t):!0},e.SingleDrop=function(t){if(t&&t.infoModel){var i=t.infoModel.handle,o=e.m_DropData[i];if(o){if(t.action==EntityAction.RUN||t.atking)return;if(MathUtils.getDistance(t.x,t.y,o.x,o.y)<Const.CELL_SIZE){for(var s in this.itemPos)if(this.itemPos[s].index==o.index){delete this.itemPos[s];break}delete e.m_DropData[i],delete e.m_DropItem[o.index],DisplayUtils.dispose(o),o=null}else t.action!=EntityAction.RUN&&this._MoveEntity(t,o.x,o.y)}else{var n=Number.MAX_VALUE,r=void 0;for(var s in this.itemPos){var a=this.itemPos[s];this.m_DropItem[a.index]||n>MathUtils.getDistance(t.x,t.y,a.x,a.y)&&(n=MathUtils.getDistance(t.x,t.y,a.x,a.y),r=a)}if(r)e.m_DropData[i]=r,e.m_DropItem[r.index]=!0,this._MoveEntity(t,r.x,r.y);else{var l=null,h=Number.MAX_VALUE;for(var c in e.m_DropData){var u=parseInt(c);if(i!=u){var d=EntityManager.ins().getEntityByHandle(u);if(null!=d){var p=MathUtils.getDistance(d.x,d.y,t.x,t.y);p>2*Const.CELL_SIZE&&h>p&&(h=p,l=d)}}}if(null!=l&&2*GameMap.CELL_SIZE<p){var f=DirUtil.getGridByDir(l.dir+1),g=l.x+f.x,_=l.y+f.y;this._CheckWalkable(g,g)||(g=l.x,_=l.y),this._MoveEntity(t,g,_)}}}}},e.findDrop=function(){if(0==GameMap.fubenID&&!EntityManager.ins().checkHaveEnemy()){for(var e=0;e<SubRoles.ins().subRolesLen;++e)this.SingleDrop(EntityManager.ins().getMainRole(e));for(var t in this.itemPos)return;if(this.stop(),this.completeFunc)return this.completeFunc.func.call(this.completeFunc.funcThis),void(this.completeFunc=null);UserFb.ins().sendWaveComplete()}},e.autoFlyDrop=function(t){var i=this;void 0===t&&(t=!0);var o=0,s=240,n=400,r=0,a=EntityManager.ins().getNoDieRole();a&&(s=a.x,n=a.y-50);for(var l in this.itemPos){var h=this.itemPos[l];h&&!h.parent&&delete this.itemPos[l]}var c=function(a){var l=u.itemPos[a],h=egret.Tween.get(l);o++;var c=MathUtils.limit(800,1100);h.to({x:s,y:n},c,egret.Ease.backIn).call(function(){r++,delete e.m_DropData[l.hashCode],delete e.m_DropItem[l.index],DisplayUtils.dispose(l),l=null,r==o&&t&&(i.itemPos={},i.completeFunc&&(i.completeFunc.func.call(i.completeFunc.funcThis),i.completeFunc=null))})},u=this;for(var l in this.itemPos)c(l)},e.addCompleteFunc=function(e,t){this.completeFunc={func:e,funcThis:t}},e.setTempDropPoint=function(t,i){e.tempDropPoint.x=t,e.tempDropPoint.y=i},e.m_DropItem={},e.tempDropPoint=new egret.Point,e.itemPos={},e.orderX=[-1,1,-1,0,1,-1,0,1],e.orderY=[0,0,1,1,1,-1,-1,-1],e}();__reflect(DropHelp.prototype,"DropHelp"),window.DropHelp=DropHelp;var GameSceneView=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GameFightSceneSkin",this.touchEnabled=!1,this.map=new MapView,this.map.initMap(),this.addChildAt(this.map,0),this.pkBossBtn.touchEnabled=!0,this.pkBossBtn.visible=!1,this.input=new eui.EditableText,this.input.visible=!1,this.input.text="",this.input.size=20,this.input.prompt="点我输入命令1645",this.input.promptColor=16711680,this.input.textColor=16711680,this.input.x=68,this.input.y=425,this.addChild(this.input),this.escBtn.visible=!1,this.miniChat.visible=0==StartGetUserInfo.isOne,this.escBtn.label=GlobalConfig.jifengTiaoyueLg.st101397},t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),this.miniChat.name="miniChat",GameGlobal.dressmodel.sendDressInfoReq(),MessageCenter.addListener(GameLogic.ins().postHookStateChange,this.upDataGuajiState,this),this.pkBossBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.escBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.miniChat.openPanel&&this.miniChat.openPanel(),this.observe(MessageDef.GAME_SCENE_WORD,this._ShowSkillWord)},t.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.pkBossBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.escBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this),this.miniChat.closePanel&&this.miniChat.closePanel()},t.prototype.upDataGuajiState=function(e){0!=GameMap.fubenID&&1==e&&(e=0),this.stateImg.source=e?"comp_133_31_01_png":""},t.prototype.onTap=function(e){switch(e.currentTarget){case this.pkBossBtn:GameLogic.ins().startPkBoss();break;case this.escBtn:var t=ViewManager.ins().getView("UIView2");if(null!=t&&t.clearFB(),GameMap.fbType==UserFb.FB_TYPE_GUANQIABOSS&&PlayFun.ins().closeAuto(),(ZsBoss.ins().isZsBossFb(GameMap.fubenID)||GameMap.IsWorldBoss())&&(ZsBoss.ins().autoClear=!1),GuildWar.ins().checkinAppoint())return void ViewManager.ins().open(GuileWarReliveWin,3);if(GameMap.IsPublicBoss()){var i=new Sproto.cs_raid_exit_raid_request;return i.fbType=UserFb.FB_TYPE_PUBLIC_BOSS,void GameSocket.ins().Rpc(C2sProtocol.cs_raid_exit_raid,i)}if(GameMap.IsHomeBoss()){var i=new Sproto.cs_raid_exit_raid_request;return i.fbType=UserFb.FB_TYPE_HOME_BOSS,void GameSocket.ins().Rpc(C2sProtocol.cs_raid_exit_raid,i)}if(GameMap.IsSyBoss()){var i=new Sproto.cs_raid_exit_raid_request;return i.fbType=UserFb.FB_TYPE_SYBOSS,void GameSocket.ins().Rpc(C2sProtocol.cs_raid_exit_raid,i)}GameMap.IsTeamFb()?(TeamFbSproto.ins().sendQuitTeam(),UserFb.ins().sendExitFb()):UserFb.ins().sendExitFb()}},t.prototype._ShowSkillWord=function(e){var t=this;if(this.skillWordImg&&egret.Tween.removeTweens(this.skillWordImg),e){this.skillWordImg.source=null,this.skillWordImg.source=e,this.skillWordImg.visible=!0;var i=egret.Tween.get(this.skillWordImg);this.skillWordImg.scaleX=3,this.skillWordImg.scaleY=3,this.skillWordImg.alpha=1,this.skillWordImg.y=250,i.to({y:250,scaleX:1,scaleY:1},200).wait(500).to({alpha:0},400).call(function(){egret.Tween.removeTweens(t.skillWordImg)})}},t.prototype.destoryView=function(){},t}(BaseEuiView);__reflect(GameSceneView.prototype,"GameSceneView"),ViewManager.ins().reg(GameSceneView,LayerManager.Game_Bg),window.GameSceneView=GameSceneView;var BloodView=function(e){function t(){var i=e.call(this)||this;return i.m_Cache={},i.hengYiTime=800,i.hengYiJuLi=80,i.hengYiShangSheng=50,i.hengYiXiaJiang=50,i.hengYiSize=.6,i.hengYiBaojiSize=1.8,i.shuYiTime=1400,i.shuYiJuLi=80,i.baojiFangDaTime=100,i.baojiReTime=100,i.baojiFangDaSize=2,i.baojiReSize=1,null==t.timeoutDic&&(t.timeoutDic=new Array),egret.setInterval(i.GC,i,6e5),MessageCenter.addListener(GameLogic.ins().postEntityHpChange,i.showBlood2,i),i}return __extends(t,e),t.prototype._GetBitmapLabel=function(e,t){e=t?"HJ":e;var i=null,o=this.m_Cache[e];return o&&(i=o.pop()),i||(i=new BloodItem(e)),i.visible=!0,this.addChild(i),i},t.prototype._CacheBitmapLabel=function(e){if(e){egret.Tween.removeTweens(e);var t=e.name,i=this.m_Cache[t];i||(i=this.m_Cache[t]=[]),e.visible=!1,e.alpha=1,e.parent==this&&(e.dispose(),this.removeChild(e)),i.push(e)}},t.prototype._CacheLabel=function(e){e.parent&&e.parent.removeChild(e),ObjectPool.ins().push(e)},t.prototype.showBlood2=function(e){var i=this;if(null!=e&&!t.isGC){var o=e[0],s=e[1],n=e[2],r=e[3],a=e[4],l=e[5][0],h=e[5][1]!=SkillType.TYPE1;0/0==a&&(a=1);var c=.7*r/a;c=Math.ceil(c);var u=.3*r;u=Math.ceil(u);for(var d=[],p=u,f=0;a>f;f++){if(f==a-1){d[f]=p;break}d[f]=MathUtils.limitInteger(0,p),p-=d[f]}for(var g=function(e){var r=egret.setTimeout(function(){i.showBlood([o,s,n,c+d[e],l,h])},_,200*e);t.timeoutDic.push(r)},_=this,m=0;a>m;m++)g(m)}},t.prototype.GC=function(){t.isGC=!0;for(var e=t.timeoutDic,i=e.length,o=0;i>o;o++)egret.clearTimeout(e[o]);t.timeoutDic.length=0,t.isGC=!1},t.prototype.showBlood=function(e){try{var t=e[0],i=e[1],o=e[2],s=e[3],n=e[4],r=e[5];if(t.team!=Team.My&&null!=i&&i.team!=Team.My)return;if(t&&i&&t.team==Team.My)return;if(0==s)return;var a=void 0;a=o==DamageTypes.CRIT||r?"j2":"j3",null==i&&(a="2");var l=0>s?"+"+Math.abs(s):(s>>0)+"",h=0>s?"a":a,c=this._GetBitmapLabel(h,o==DamageTypes.HEJI);c.valueType=o,c.text=l,c.baoji(o,i);c.m_MainGroup.width/2;c.x=t.x,c.y=t.y,c.setLab2(n),this.floatImg(c,o,t,i,0>s,r)}catch(u){}},t.prototype.repositionNumPic=function(e){var t,i=1;for(i;i<e.numChildren;i++)t=e.getChildAt(i),t.y=20},t.prototype.floatImg=function(e,t,i,o,s,n){var r=e.m_MainGroup;egret.Tween.removeTweens(r);var a=egret.Tween.get(r),l=egret.Tween.get(r);if(r.x=r.y=0,r.scaleX=r.scaleY=1,r.alpha=1,t==DamageTypes.HEJI)r.scaleX=r.scaleY=1.8,r.alpha=1,r.y=r.y+40,a.to({scaleX:1,scaleY:1},200).wait(400).to({alpha:0},200);else if(null==o||i.team==Team.My)if(t==DamageTypes.CRIT){var h=!1;(1==i.dir||2==i.dir||3==i.dir)&&(h=!0);var c=this.hengYiJuLi;1==h&&(c=-this.hengYiJuLi),l.to({y:-this.hengYiShangSheng,scaleX:this.hengYiBaojiSize,scaleY:this.hengYiBaojiSize},.4*this.hengYiTime,egret.Ease.backOut).to({y:this.hengYiXiaJiang,scaleX:this.hengYiSize,scaleY:this.hengYiSize},.6*this.hengYiTime).call(function(){r.scaleX=r.scaleY=1}),a.to({x:c},this.hengYiTime)}else{var h=!1;(1==i.dir||2==i.dir||3==i.dir)&&(h=!0);var c=this.hengYiJuLi;1==h&&(c=-this.hengYiJuLi),l.to({y:-this.hengYiShangSheng},.4*this.hengYiTime,egret.Ease.backOut).to({y:this.hengYiXiaJiang,scaleX:this.hengYiSize,scaleY:this.hengYiSize},.6*this.hengYiTime),a.to({x:c},this.hengYiTime)}else if(s){var c=-this.shuYiJuLi;a.to({y:c},this.shuYiTime),l.to({scaleX:this.baojiFangDaSize,scaleY:this.baojiFangDaSize},this.baojiFangDaTime).to({scaleX:this.baojiReSize,scaleY:this.baojiReSize},this.baojiReTime)}else if(n)if(t==DamageTypes.CRIT){var c=-this.shuYiJuLi;a.to({y:c},this.shuYiTime),l.to({scaleX:this.baojiFangDaSize,scaleY:this.baojiFangDaSize},this.baojiFangDaTime).to({scaleX:this.baojiReSize,scaleY:this.baojiReSize},this.baojiReTime)}else{var c=-this.shuYiJuLi;a.to({y:c},this.shuYiTime)}else{var h=o.x-i.x,c=this.hengYiJuLi;h>0&&(c=-this.hengYiJuLi),l.to({y:-this.hengYiShangSheng},.4*this.hengYiTime,egret.Ease.backOut).to({y:this.hengYiXiaJiang,scaleX:this.hengYiSize,scaleY:this.hengYiSize},.6*this.hengYiTime),a.to({x:c},this.hengYiTime)}a.call(this._CacheBitmapLabel,this,[e])},t.TweenType1=function(e,i,o){e.to({x:i,y:o,scaleX:t.CRIT_SCALE_1,scaleY:t.CRIT_SCALE_1},t.SPEED2,t.EASE_FUNC2).to({x:i,y:o-100,scaleX:t.CRIT_SCALE_2,scaleY:t.CRIT_SCALE_2},t.SPEED2,t.EASE_FUNC2).wait(t.WAIT2).to({y:o-30},500).to({alpha:0,y:o-35},400)},t.timeDic=new Dictionary,t.FONT=(_a={},_a.j1="font_pz_zi_j1_fnt",_a[2]="font_pz_zi02_fnt",_a.j3="font_pz_zi_j3_fnt",_a.j2="font_pz_zi_j2_fnt",_a[6]="font_pz_zi02_fnt",_a.a="font_pz_zi0a_fnt",_a.HJ="font_pz_zi_j3_fnt",_a),t.isGC=!1,t.MAX_BLOOD_CNT=30,t.EASE_FUNC1=egret.Ease.circInOut,t.SPEED1=150,t.WAIT1=250,t.MINANGLE=70,t.MAXANGLE=125,t.DISTANCE=40,t.EASE_FUNC2=egret.Ease.circInOut,t.SPEED2=175,t.WAIT2=200,t.NORMAL_SCALE_1=1.1,t.NORMAL_SCALE_2=.95,t.CRIT_SCALE_1=1.85,t.CRIT_SCALE_2=1.2,t.INTERVAL_Y=0,t}(egret.DisplayObjectContainer);__reflect(BloodView.prototype,"BloodView");var BloodItem=function(e){function t(t){var i=e.call(this)||this;return i.name=t,i.skinName="BloodItemSkin",i.m_Lab.font=BloodView.FONT[t],i}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},Object.defineProperty(t.prototype,"text",{set:function(e){this.m_Lab.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueType",{set:function(e){e==DamageTypes.HEJI?this.m_HeJiImg.source="comp_36_21_01_png":this.m_HeJiImg.source=null},enumerable:!0,configurable:!0}),t.prototype.baoji=function(e,t){t&&e==DamageTypes.CRIT?(this.m_Bg.visible=!0,t.infoModel.job==JobConst.ZhanShi?this.m_Bg.source="comp_160_114_01_png":t.infoModel.job==JobConst.FaShi?this.m_Bg.source="comp_160_114_02_png":t.infoModel.job==JobConst.DaoShi&&(this.m_Bg.source="comp_160_114_03_png")):this.m_Bg.visible=!1},t.prototype.dispose=function(){egret.Tween.removeTweens(this.m_MainGroup),this.m_HeJiImg.source=null,this.m_Lab.text=null,this.m_State.source=null,this.m_Bg.source=null},t.prototype.setLab2=function(e){this.m_State.visible=!0,e==ElementRestrainType.KTYPE?this.m_State.source="comp_36_21_02_png":e==ElementRestrainType.BKTYPE?this.m_State.source="comp_36_21_03_png":this.m_State.visible=!1},t.prototype.GetWidth=function(){return this.width},t}(eui.Component);__reflect(BloodItem.prototype,"BloodItem"),window.BloodView=BloodView,window.BloodItem=BloodItem;var _a,BattleStart=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="BattleStartSkin"},t.prototype.initData=function(){},t.prototype.open=function(){for(var t=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e.prototype.open.call(this,i),this.imgIcon.alpha=0,this.imgIcon.scaleX=this.imgIcon.scaleY=.5,egret.Tween.get(this.imgTop).to({top:-191},350).to({top:-400},400),egret.Tween.get(this.imgBottom).to({bottom:-191},350).to({bottom:-400},400),egret.Tween.get(this.imgIcon).to({scaleX:1.3,scaleY:1.3},50).to({scaleX:1,scaleY:1},200).to({alpha:1,scaleX:1.1,scaleY:1.1},100).to({scaleX:1.15,scaleY:1.15},100).to({scaleX:1.18,scaleY:1.18},300).to({scaleX:1.2,scaleY:1.2},200).call(function(){t.close()
})},t.prototype._onTweenGroupComplete=function(){this.close()},t.prototype.close=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e.prototype.close.call(this,i),this.imgTop.top=0,this.imgBottom.bottom=0,this.imgIcon.verticalCenter=0,egret.Tween.removeTweens(this.imgTop),egret.Tween.removeTweens(this.imgBottom),egret.Tween.removeTweens(this.imgIcon),ViewManager.ins().close(t),GameLogic.ins().sendBattleBegin()},t}(BaseEuiView);__reflect(BattleStart.prototype,"BattleStart"),ViewManager.ins().reg(BattleStart,LayerManager.UI_Popup),window.BattleStart=BattleStart;var ModulePrompt=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ModulePromptSikn"},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0]+"";this.icon.x=190,this.icon.y=329,this.icon.scaleX=this.icon.scaleY=1,this.mask_bg.visible=!0,this.dec_label.visible=!0,this.prompt_img.visible=!0,null==this.moduleConfig&&(this.moduleConfig=GlobalConfig.ins("FuncOpenConfig")),this.AddClick(this,this.moveIcon);var o=this.moduleConfig[i];return null==o?(console.error(i+" moduleConfig not found"),void ViewManager.ins().close(this)):(this.icon.source=o.iconid+"_png",this.dec_label.text=o.introduce,this.ascription=o.ascription,void(null==this.mc&&(this.mc=new MovieClip,this.mc.loadUrl(ResDataPath.GetUIEffePath("eff_tips"),!0,-1),this.mc.x=245,this.mc.y=310,this.addChildAt(this.mc,1))))},t.prototype.moveIcon=function(e){var t=this;this.mc&&(DisplayUtils.dispose(this.mc),this.mc=null),this.mask_bg.visible=!1,this.dec_label.visible=!1,this.prompt_img.visible=!1;var i=egret.Tween.get(this.icon),o=this.getPoint(this.ascription);i.to({x:o.x,y:o.y,scaleX:.5,scaleY:.5},1e3).call(function(){egret.Tween.removeTweens(t.icon),t.close()},this,null)},t.prototype.getPoint=function(e){var t=null,i=ViewManager.ins().getView("UIView2"),o=ViewManager.ins().getView("PlayFunView");switch(e){case 1:t=this.getGlobalPoint(i.roleBtn),t.x+=20,t.y+=20;break;case 9:t=this.getGlobalPoint(o.taskBtn);break;case 10:t=this.getGlobalPoint(o.zhuanZhiTask),t.x+=20,t.y+=20}return null==t&&(t=new egret.Point),t.x=30,t.y=750,t},t.prototype.getGlobalPoint=function(e){var t=new egret.Point;t.x=e.x,t.y=e.y;for(var i=e.parent;i;){if(i instanceof eui.Component&&i.validateNow(),i instanceof egret.Stage)return t;t.x+=i.x,t.y+=i.y,i=i.parent}return t},t.prototype.close=function(){egret.Tween.removeTweens(this.icon),ViewManager.ins().close(t),GameGlobal.MessageCenter.dispatch(MessageDef.MODULE_PROMPT_CLOSE)},t}(BaseEuiPanel);__reflect(ModulePrompt.prototype,"ModulePrompt"),ViewManager.ins().reg(ModulePrompt,LayerManager.UI_Popup),window.ModulePrompt=ModulePrompt;var SoundSetPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="SoundSetPanelSkin",this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100344,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100345,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100346,SdkMgr.currSdk==SdkMgr.P_TYPE_8&&(this.m_Lan4.visible=!0,this.m_Lan4.text=h5_sdk.Sdk_8.openid),SdkMgr.currSdk==SdkMgr.P_TYPE_1&&"32"==StartGetUserInfo.channelId2&&(this.exitBtn.visible=!0)},t.prototype.open=function(){this.m_bg.init("SoundSetPanel",GlobalConfig.jifengTiaoyueLg.st100343),this.cbAutoSound0.addEventListener(egret.Event.CHANGE,this.cbAutoSoundChange,this),this.cbAutoSound0.selected=t.getSoundLocalData("soundBg"),this.cbAutoSound1.addEventListener(egret.Event.CHANGE,this.cbAutoSoundChange,this),this.cbAutoSound1.selected=t.getSoundLocalData("skillSoundEff"),this.cbAutoSound2.addEventListener(egret.Event.CHANGE,this.cbAutoSoundChange,this),this.cbAutoSound2.selected=t.getSoundLocalData("btnSoundEff"),this.exitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.exitGame,this)},t.prototype.close=function(){this.cbAutoSound0.removeEventListener(egret.Event.CHANGE,this.cbAutoSoundChange,this),this.cbAutoSound1.removeEventListener(egret.Event.CHANGE,this.cbAutoSoundChange,this),this.cbAutoSound2.removeEventListener(egret.Event.CHANGE,this.cbAutoSoundChange,this),this.exitBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.exitGame,this)},t.prototype.cbAutoSoundChange=function(e){switch(e.currentTarget){case this.cbAutoSound0:this.cbAutoSound0.selected||SoundUtils.getInstance().stopAllSound(),SoundUtils.getInstance().setMusicEnable(this.cbAutoSound0.selected),this.cbAutoSound0.selected&&(GameMap.IsNoramlLevel()?ViewManager.ins().isShow(MainCityView)?SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[3].id):SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[1].id,-1):SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[2].id,-1)),LocalStorageData.setItem("soundBg",this.cbAutoSound0.selected?"1":"0");break;case this.cbAutoSound1:LocalStorageData.setItem("skillSoundEff",this.cbAutoSound1.selected?"1":"0");break;case this.cbAutoSound2:LocalStorageData.setItem("btnSoundEff",this.cbAutoSound2.selected?"1":"0")}},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.getSoundLocalData=function(e){var t=parseInt(LocalStorageData.getItem(e));return isNaN(t)?!0:t>0},t.prototype.exitGame=function(){SdkMgr.loginOut()},t}(BaseEuiPanel);__reflect(SoundSetPanel.prototype,"SoundSetPanel"),ViewManager.ins().reg(SoundSetPanel,LayerManager.UI_Popup),window.SoundSetPanel=SoundSetPanel;var UIView1_1=function(e){function t(){var t=e.call(this)||this;return t.itemary=[],t.index=0,t.timerEnd=60,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainTop2PanelSkin",this.touchEnabled=!1,Main.isLiuhai&&(this.m_MapStateGroup.top=120),this.bossTimer&&(this.bossTimer.visible=!1,this.guildfb_time.visible=!1,this.guildfb_timenum.visible=!1,this.timeshenyu.visible=!1),this.m_MapStateGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMap,this),this.m_Group1.touchChildren=!0},t.prototype.initData=function(){},t.prototype.setData=function(){egret.clearTimeout(this.timeID),this.timeID=0;SubRoles.ins().getSubRoleByIndex(0);this.changeExpBtn()},t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),MessageCenter.ins().addListener(MessageDef.GUANQIA_CHANGE,this.checkQuanQiaGuide,this),MessageCenter.addListener(UserFb.ins().postGuanKaIdChange,this.upDataGuanqia,this),MessageCenter.addListener(UserFb.ins().postWaveChange,this.upDataGuanqia,this),MessageCenter.addListener(GameLogic.ins().postEnterMap,this.upDataGuanqia,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATA_VIP_EXP,this.changeExpBtn,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATA_VIP_AWARDS,this.showVipRedPoint,this),MessageCenter.addListener(GuildFB.ins().postGuildFBBossInfo,this.upDataBossInfo,this),MessageCenter.addListener(GuildFB.ins().postGuildFBBossTimerEndInfo,this.guildFBTimer,this),this.observe(UserFb.ins().postZhangJieAwardChange,this.upDataGuanqia),this.observe(MessageDef.GUANQIA_CHANGE,this.upDataGuanqia),this.observe(GuanQiaEvt.GUANQIA_UPDATE_MSG,this.upDataGuanqia),this.initData(),this.upDataGuanqia(),this.showVipRedPoint()},t.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),MessageCenter.ins().removeAll(this)},t.prototype.showVipRedPoint=function(){},t.prototype.changeExpBtn=function(){},t.prototype.upDataBossInfo=function(){this.index=0,this.mapName.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100390,[GuildFB.ins().bossGKNum-1]),this.bossTimer.visible=!0,this.bossTimer.text=""+(3-this.index),this.guildfb_time.visible=!0,this.guildfb_timenum.visible=!0,this.timeshenyu.visible=!1,TimerManager.ins().remove(this.guildTimer,this),TimerManager.ins().doTimer(1e3,3,this.setBagData,this)},t.prototype.setBagData=function(){this.index++,this.bossTimer.text=""+(3-this.index),3==this.index&&(this.bossTimer.visible=!1,this.guildfb_time.visible=!1,this.guildfb_timenum.visible=!1,TimerManager.ins().remove(this.setBagData,this))},t.prototype.guildFBTimer=function(){TimerManager.ins().remove(this.guildTimer,this),this.mapName.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100390,[GuildFB.ins().bossGKNum]),this.rewardUpdate(),this._UpdateGuildTimer()&&TimerManager.ins().doTimer(1e3,60,this.guildTimer,this)},t.prototype.rewardUpdate=function(){var e=[];this.itemary.forEach(function(e){e.parent&&(e.parent.removeChild(e),e=null)}),this.itemary=[];for(var t in GlobalConfig.ins("guildfbAwardConfig"))GuildFB.ins().bossGKNum==GlobalConfig.ins("guildfbAwardConfig")[t].id&&(e=GlobalConfig.ins("guildfbAwardConfig")[t].waveShowAward);for(var i=0;i<e.length;i++){var o=new ItemBase;o.scaleX=.6,o.scaleY=.6,this.group1.addChild(o),this.itemary.push(o),o.data=e[i],o.isShowName(!1)}},t.prototype._UpdateGuildTimer=function(){return this.timerEnd=GuildFB.ins().bossTimerEnd-GameServer.serverTime,this.timerEnd>0?(this.timeshenyu.visible=!0,this.timeshenyu.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101369,[this.timerEnd])),!0):(this.timeshenyu.visible=!1,!1)},t.prototype.guildTimer=function(){this._UpdateGuildTimer()||TimerManager.ins().remove(this.guildTimer,this)},t.prototype.upDataGuanqia=function(){if(this.bossTimer.visible=!1,this.guildfb_time.visible=!1,this.guildfb_timenum.visible=!1,this.timeshenyu.visible=!1,TimerManager.ins().remove(this.guildTimer,this),this.m_RedPoint.visible=!1,GameMap.fubenID)if(this.currentState="fb",GlobalConfig.guildfbconfig.fbId==GameMap.fubenID){this.currentState="guildfb";var e=GameMap.fbName||GlobalConfig.jifengTiaoyueLg.st101376;this.mapName.text=e+(GuildFB.ins().bossGKNum-1),this.goldTxt.text="",this.guildFBTimer()}else this.mapName.text=GameMap.fbName,this.goldTxt.text=GameMap.fbDesc;else this.currentState=t.STATE_GUANQIA,this.m_RedPoint.visible=GuanQiaModel.getInstance.checkAllRedPoint(),egret.setTimeout(function(){var e=UserFb.ins().guanqiaID;if(!(0>e)){null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig"));var t=this.chaptersConfig[e];if(t&&(this.mapName.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101377,[t.mapsubid+"-"+t.turn])),t&&this.goldTxt){this.goldTxt.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101378,[t.goldEff]);var i=GlobalConfig.ins("ChaptersRewardConfig")[t.mapid];i&&(this.expTxt.text=i.name)}else Main.errorBack("UIView1_1.upDataGuanqia ChaptersConfig配置ID不存在= "+e)}},this,100);if(this.m_Group1.visible=!1,this.m_ArtifactTipsAnim.visible=!1,GameMap.IsTiaoZhan()){var i=(UserFb2.ins().fbChallengeId,GlobalConfig.ins("FbChallengeStageAwardConfig")[UserFb2.ins().commonLv2]);if(i)if(i.disPlayType)this.m_ArtifactTipsAnim.visible=!0,this.m_ArtifactTipsAnim.setData(i.effUi),this.m_ArtifactTipsAnim.m_RAndNameLab.text=i.fbNum+GlobalConfig.jifengTiaoyueLg.st102101;else{var o=i.taskAward[0];this.m_ItemBase1.data={type:o.type,id:o.id,count:o.count,isShowName:1},this.m_Cont1.text=i.fbNum+GlobalConfig.jifengTiaoyueLg.st102101,this.m_Cont1.textColor=Color.White,this.m_Group1.visible=!0}else this.m_Group1.visible=!1,this.m_ArtifactTipsAnim.visible=!1}},t.prototype.checkQuanQiaGuide=function(){var e=GuanQiaModel.getInstance.checkIsCanGoNextLayer();if(e){var t=GuanQiaModel.getInstance.setGuideConfig();t&&(Setting.currStep=0,Setting.currPart=t.groupId,egret.setTimeout(function(){GuideUtils.ins().show(this.m_MapStateGroup,t.groupId,0)},this,100))}},t.prototype.onClickMap=function(){GuideUtils.ins().next(this.m_MapStateGroup),ViewManager.ins().open(GuanQiaMapWin)},t.prototype.onClick=function(e){ViewManager.ins().open(VipWin)},t.LAYER_LEVEL=LayerManager.UI_USER_INFO,t.STATE_GUANQIA="guanqia",t}(BaseEuiView);__reflect(UIView1_1.prototype,"UIView1_1"),window.UIView1_1=UIView1_1;var UIView1=function(e){function t(){var t=e.call(this)||this;return t.ft=new FrameTick,t.heJIMaxCD=0,t.nowHJCD=0,t.playTime=200,t.m_pShape=new egret.Shape,t.m_pMaskColor=16777215,t.m_pRadius=37,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainTopPanelSkin",this.touchEnabled=!1,Main.isLiuhai&&(this.m_MainGroup.top=40),this.expBar.slideDuration=0},t.prototype.initData=function(){this.ft.checkAndTick(0)||this.updateData()},t.prototype.open=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.observe(GameLogic.ins().postSubRoleChange,this.initData),this.observe(GameLogic.ins().postGoldChange,this.initData),this.observe(GameLogic.ins().postYbChange,this.initData),this.observe(GameLogic.ins().postNameChange,this.initData),this.observe(GameLogic.ins().postCouponChange,this.initData),MessageCenter.ins().addListener(MessageDef.POWER_CHANGE,this.initData,this),this.observe(MessageDef.EXP_CHANGE,this.updataExp),this.observe(GameLogic.ins().postExpChange,this.expChange),GameGlobal.MessageCenter.addListener(MessageDef.UPDATA_VIP_AWARDS,this.showVipRedPoint,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATA_VIP_EXP,this.changeExp,this),GameGlobal.MessageCenter.addListener(MessageDef.SUB_ROLE_CHANGE,this._roleChange,this),this.observe(MessageDef.UPDATA_VIP_EXP,this.changeExpBtn),this.observe(MessageDef.UPDATA_VIP_AWARDS,this.upDataVipBtnRedPoint),this.observe(MessageDef.POWER_CHANGE,this._updatePower),this.observe(GameLogic.ins().postLevelChange,this.expChange),this.observe(GameLogic.ins().postInitActorInfo,this.updateData),this.addTouchEvent(this,this.onClick,this.recharge),this.addTouchEvent(this,this.onClick,this.recharge0),this.addTouchEvent(this,this.onClick,this.recharge00),this.addTouchEvent(this,this.onClick,this.recharge11),this.addTouchEvent(this,this.onClick,this.txtVipLevel),this.addTouchEvent(this,this.onClick,this.headGroup),this.addTouchEvent(this,this.onClick,this.recharge1),this.observe(MessageDef.CHANGE_MAP_MSG,this.onChangeMap),this.initData(),this.changeExp(),this.upDataVipBtnRedPoint(),this.txtVipLevel.visible=0==StartGetUserInfo.isOne,this._initMc(),newAI.ins().mPowerSkillAction=function(t,i){e.setHJAnim(t,i)},this.heJIMaxCD=GlobalConfig.ins("SkillsConfig")[68001].cd},t.prototype.setHJAnim=function(e,t){switch(e){case PowerSkillState.INIT:case PowerSkillState.USE:GameMap.IsNoramlLevel()&&(this._RemovehejiMc(),this._RemovehejiMc2());break;case PowerSkillState.LOADING:var i=100*t/.9,o=3.6*i;o>360&&(o=360),this.drawRoundness(o),this._LoadHejiMc(),i>=100?this._LoadHejiMc2():this._RemovehejiMc2()}},t.prototype.onChangeMap=function(){this._RemovehejiMc(),this._RemovehejiMc2(),this.removeTimer(),!GameMap.IsNoramlLevel()&&EntityManager.ins().CanUseHeji()&&(this.nowHJCD=0,this.setTimer())},t.prototype.setTimer=function(){this.removeTimer(),TimerManager.ins().doTimer(this.playTime,0,this.fpRunHeji,this)},t.prototype.removeTimer=function(){TimerManager.ins().remove(this.fpRunHeji,this)},t.prototype.fpRunHeji=function(){this.nowHJCD+=this.playTime;var e=this.nowHJCD/this.heJIMaxCD;this.setHJAnim(PowerSkillState.LOADING,e)},t.prototype._RemovehejiMc=function(){this.m_HejiMc&&this.m_HejiMc.parent&&this.m_HejiMc.parent.removeChild(this.m_HejiMc)},t.prototype._RemovehejiMc2=function(){this.m_UserHejiMc&&this.m_UserHejiMc.parent&&this.m_UserHejiMc.parent.removeChild(this.m_UserHejiMc)},t.prototype._LoadHejiMc=function(){this.m_HejiMc&&this.m_HejiMc.parent||(this.m_HejiMc||(this.m_HejiMc=new MovieClip),this.m_HejiMc.loadUrl(ResDataPath.GetUIEffePath("eff_main_energy1"),!0,-1),this.m_HejiMc.x=this.m_HJGroup.width/2,this.m_HejiMc.y=this.m_HJGroup.height/2,this.m_HJGroup.addChildAt(this.m_HejiMc,-1),this.initShape(this.m_pShape,this.m_HJGroup))},t.prototype._LoadHejiMc2=function(){this.m_UserHejiMc&&this.m_UserHejiMc.parent||(this.m_UserHejiMc||(this.m_UserHejiMc=new MovieClip),this.m_UserHejiMc.loadUrl(ResDataPath.GetUIEffePath("eff_main_energy"),!0,-1),this.m_UserHejiMc.x=this.m_HJGroup.width/2,this.m_UserHejiMc.y=this.m_HJGroup.height/2,this.m_HJGroup.addChildAt(this.m_UserHejiMc,10))},t.prototype.initShape=function(e,t){e.x=.5*t.width,e.y=.5*t.height,e.rotation=-90,this.m_HejiMc.mask=e,t.addChildAt(e,2)},t.prototype.drawRoundness=function(e){var t=this.m_pShape;t&&(t.graphics.clear(),t.graphics.beginFill(this.m_pMaskColor),t.graphics.drawArc(0,0,this.m_pRadius,e%360*Math.PI/180,360*Math.PI/180,!0),t.graphics.lineTo(0,0),t.graphics.endFill())},t.prototype.updateData=function(){CommonUtils.labelIsOverLenght(this.goldTxt,GameLogic.ins().actorModel.gold),CommonUtils.labelIsOverLenght(this.ybTxt,GameLogic.ins().actorModel.yb),CommonUtils.labelIsOverLenght(this.couponTxt,GameLogic.ins().actorModel.coupon),this.nameTxt.text=GameLogic.ins().actorModel.name,this.changeExpBtn(),this.expChange()},t.prototype.drawCircle=function(e,t,i,o,s){var n=new egret.Shape;n.x=e,n.y=t,n.graphics.beginFill(16777215,15),n.graphics.drawCircle(0,0,i),n.graphics.endFill(),s.mask=n,n.blendMode=egret.BlendMode.ERASE,o.addChild(n)},t.prototype.refreshHeadIcon=function(){console.log(">>>>>>>>>>>>>>>>>>>>获取到了用户信息，收到事件"),this.imgRole.source=WxSdk.ins().imgURL,this.imgRole.scaleX=this.imgRole.scaleY=.6;this.drawCircle(37,37,37,this.imgRole.parent,this.imgRole)},t.prototype._roleChange=function(){var e=SubRoles.ins().getSubRoleByIndex(0);null!=e&&(SdkMgr.isWxGame()&&WxSdk.ins().imgURL?this.refreshHeadIcon():this.imgRole.source=ResDataPath.GetHeadMiniImgName(e.job,e.sex),GameGlobal.MessageCenter.removeListener(MessageDef.SUB_ROLE_CHANGE,this._roleChange,this))},t.prototype.changeExp=function(){this.txtVipLevel.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101366,[UserVip.ins().lv])},t.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),MessageCenter.ins().removeAll(this),DisplayUtils.removeFromParent(this._mc),this._mc=null},t.prototype.showVipRedPoint=function(){this.vipRedPoint.visible=UserVip.ins().CheckRedPoint(),this.changeExp()},t.prototype.showNameOrVIP=function(e){},t.prototype._updatePower=function(){this.powLabel.text=GlobalConfig.jifengTiaoyueLg.st101117+(""+GameLogic.ins().actorModel.power)},t.prototype.upDataVipBtnRedPoint=function(){},t.prototype.changeExpBtn=function(){},t.prototype.onClick=function(e){switch(e.currentTarget){case this.recharge1:WxSdk.ins().isHidePay()||ViewManager.ins().open(CouponWin);break;case this.recharge:case this.recharge11:WxSdk.ins().isHidePay()||ViewManager.ins().open(ChargeFirstWin);break;case this.recharge0:case this.recharge00:MoneyTreeModel.CheckOpen(!0)&&ViewManager.ins().open(FuliWin,1,2);break;case this.txtVipLevel:ViewManager.ins().open(VipWin,UserVip.ins().lv);break;case this.headGroup:ViewManager.ins().open(SoundSetPanel)}},t.prototype._initMc=function(){null==this._mc&&(this._mc=new MovieClip,this._mc.x=this.groupVip.width/2,this._mc.y=this.groupVip.height/2,this.groupVip.addChild(this._mc),this._mc.loadUrl(ResDataPath.GetUIEffePath("eff_vip01"),!0,-1))},t.prototype.updataExp=function(){null==this.expConfig&&(this.expConfig=GlobalConfig.ins("ExpConfig")),this.expBar.maximum=this.expConfig[GameLogic.ins().actorModel.level].exp,this.expBar.value=GameLogic.ins().actorModel.exp,MessageCenter.ins().removeListener(MessageDef.EXP_CHANGE,this.updataExp,this)},t.prototype.expChange=function(){var e=this,t=GameLogic.ins().actorModel.level;0==t&&(t=1);var i=UserZs.ins()?UserZs.ins().lv:0;this.lvTxt.text=(i?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[i]):"")+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[t]),null==this.expConfig&&(this.expConfig=GlobalConfig.ins("ExpConfig"));var o=this.expConfig[t].exp;this.expBarLabel.text=GameLogic.ins().actorModel.exp+"/"+o,egret.Tween.removeTweens(this.expBar);var s=egret.Tween.get(this.expBar);return this.expBar.maximum!=o?void s.to({value:this.expBar.maximum},500).wait(200).call(function(){e.expBar.maximum=o,e.expBar.value=0,e.expChange()},this).call(function(){egret.Tween.removeTweens(e.expBar)}):void s.to({value:GameLogic.ins().actorModel.exp},500)},t.LAYER_LEVEL=LayerManager.UI_NAVIGATION,t}(BaseEuiView);__reflect(UIView1.prototype,"UIView1"),window.UIView1=UIView1;var UIView2=function(e){function t(){var t=e.call(this)||this;return t.index=0,t.timerEnd=60,t.shenQiFBTime0=0,t.boShu=0,t.boShu1=0,t.m_OldSelectIndex=2,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainBottomPanelSkin",this.touchEnabled=!1,this.navBtn=[this.cityBtn,this.roleBtn,this.battleBtn,this.forgeBtn,this.bagBtn,this.petBtn],this.navBind=[egret.getQualifiedClassName(MainCityView),egret.getQualifiedClassName(RoleWin),egret.getQualifiedClassName(PlayFunView),egret.getQualifiedClassName(ForgeWin),egret.getQualifiedClassName(BagWin),egret.getQualifiedClassName(PetWin)],this.taskItemImg=new eui.Image,this.taskItemImg.x=50,this.taskItemImg.y=500,this.taskItemImg.visible=!1,this.addChild(this.taskItemImg),this.rebirthTips.visible=!1,this.bossTimer.visible=!1,this.guildfb_time.visible=!1,this.guildfb_timenum.visible=!1,this.timeshenyu.visible=!1,this.battleBtn.selected=!0,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101375},t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),this.timeshenyu.y=135,this.timeshenyu0.y=-389,this.sq_count_bg.y=124,this.sq_count_bg0.visible=!1;for(var o=0;o<this.navBtn.length;o++)this.navBtn[o].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this);MessageCenter.addListener(TaskTraceIconRule.postParabolicItem,this.runItem,this),MessageCenter.ins().addListener(GadEvent.GAD_GUIDEENDBATTLE_MSG,this.checkGadEndGuide,this),MessageCenter.ins().addListener(MessageDef.GUIDE_SKILLBATTLE_END,this.checkSkillEndGuide,this),MessageCenter.ins().addListener(MessageDef.EXP_CHANGE,this.updataExp,this),this.observe(PetEvt.PET_TREASUREGUIDE_END,this.checkPetTrEndGuide),this.observe(MessageDef.PUBLIC_BOSS_REBIRTHT_TIPS,this.publicBossRebirthtBubble),this.observe(UserTask.postUpdteTaskTrace,this.checkTaskGuide),this.observe(PetEvt.PET_DATAUPDATE_MSG,this.checkTaskGuide),MessageCenter.addListener(UserFb.ins().postGuanKaIdChange,this.checkGuide,this),this.checkGuide(),this.addRedPointTime()},t.prototype.addRedPointTime=function(){this.removeTime(),TimerManager.ins().doTimer(1e4,0,this.redTimeToRefresh,this)},t.prototype.removeTime=function(){TimerManager.ins().remove(this.redTimeToRefresh,this)},t.prototype.updataExp=function(){null==this.expConfig&&(this.expConfig=GlobalConfig.ins("ExpConfig")),MessageCenter.ins().removeListener(MessageDef.EXP_CHANGE,this.updataExp,this)},t.prototype.guildTimer=function(){this._UpdateGuildTimer()||TimerManager.ins().remove(this.guildTimer,this)},t.prototype._UpdateGuildTimer=function(){return this.timerEnd=GuildFB.ins().bossTimerEnd-GameServer.serverTime,this.timerEnd>0?(this.timeshenyu.visible=!0,this.timeshenyu.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101369,[this.timerEnd])),!0):(this.timeshenyu.visible=!1,!1)},t.prototype.shenQiFBTimer=function(){this.timeshenyu.y=-135,this.timeshenyu0.y=-49,this.sq_count_bg.y=-144,TimerManager.ins().remove(this.shenQiFBTimer,this),this.sQFBTimer()&&TimerManager.ins().doTimer(1e3,60,this.shenQiFBTimer,this)},t.prototype.sQFBTimer=function(){if(this.shenQiFBTime0-=1,this.shenQiFBTime0>=0){this.timeshenyu.visible=!0,this.sq_count_bg0.visible=!0,this.timeshenyu.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101370,[this.boShu1,this.boShu])),this.timeshenyu0.visible=!0,this.sq_count_bg.visible=!0,this.buff.visible=!0;var e=this.timeStr(this.shenQiFBTime0);return this.timeshenyu0.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101371,[e])),!0}return this.timeshenyu.visible=!1,this.timeshenyu0.visible=!1,this.sq_count_bg.visible=!1,this.buff.visible=!1,this.sq_count_bg0.visible=!1,!1},t.prototype.timeStr=function(e){var t;if(e>=3600)return t=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101372,[e/3600]);var i=Math.floor(e/60);return t=10>i?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101373,[i]):LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101373,[i]),i=e-60*i,t+=10>i?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101374,["0"+i]):LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101374,[i])},t.prototype.clearFB=function(){TimerManager.ins().removeAll(this),this.timeshenyu.visible=!1,this.timeshenyu0.visible=!1,this.bossTimer.visible=!1,this.guildfb_time.visible=!1,this.guildfb_timenum.visible=!1,this.buff.visible=!1,this.sq_count_bg.visible=!1,this.sq_count_bg0.visible=!1,this.timeshenyu.y=135,this.timeshenyu0.y=-389,this.sq_count_bg.y=124},t.prototype.upDataBossInfo=function(){this.index=0,this.bossTimer.visible=!0,this.bossTimer.text=""+(3-this.index),this.guildfb_time.visible=!0,this.guildfb_timenum.visible=!0,this.timeshenyu.visible=!1,TimerManager.ins().remove(this.guildTimer,this),TimerManager.ins().doTimer(1e3,3,this.setBagData,this)},t.prototype.setBagData=function(){this.index++,this.bossTimer.text=""+(3-this.index),3==this.index&&(this.bossTimer.visible=!1,this.guildfb_time.visible=!1,this.guildfb_timenum.visible=!1,TimerManager.ins().remove(this.setBagData,this))},t.prototype.guildFBTimer=function(){TimerManager.ins().remove(this.guildTimer,this),this._UpdateGuildTimer()&&TimerManager.ins().doTimer(1e3,60,this.guildTimer,this)},t.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t);for(var o=0;o<this.navBtn.length;o++)this.navBtn[o].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this);this.removeObserve()},t.prototype.guideUpgrade=function(){GuideUtils.ins().show(this.roleBtn,1,0)},t.prototype.and=function(e){for(var t in e)if(1==e[t])return!0;return!1},t.prototype.redTimeToRefresh=function(){this.roleBtn.redPoint.visible=UserRole.ins().showNavBtnRedPoint(),this.forgeBtn.redPoint.visible=UserForge.ins().seekForgeItem(),this.cityBtn.redPoint.visible=this._updateCityBtnRedPoint();var e=PetModel.getInstance;e.checkAllPetRedPoint()?this.petBtn.redPoint.visible=!0:this.petBtn.redPoint.visible=!1},t.prototype._updateCityBtnRedPoint=function(){return Deblocking.IsRedDotArtifactBtn()?!0:Deblocking.IsRedDotBossBtn()?!0:Deblocking.IsRedDotGuildBtn()?!0:Deblocking.IsRedDotLadderBtn()?!0:Deblocking.IsRedDotGadrBtn()?!0:Deblocking.IsRedDotFubenBtn()?!0:!1},t.prototype.onClick=function(e){e.currentTarget==this.roleBtn?GuideUtils.ins().next(this.roleBtn):e.currentTarget==this.petBtn?GuideUtils.ins().next(this.petBtn):e.currentTarget==this.cityBtn?GuideUtils.ins().next(this.cityBtn):e.currentTarget==this.battleBtn&&GuideUtils.ins().next(this.battleBtn);var t=this.navBtn.indexOf(e.currentTarget);this.navBtn[t].redPoint.visible=!1,this.showSelectView(t,!0)},t.prototype.showSelectView=function(e,i){if(void 0===i&&(i=!1),!this._checkPanelCanOpen(e))return void(this.navBtn[this.m_OldSelectIndex].selected=!0);if(this.m_OldSelectIndex==e&&e!=t.NAV_BATTLE)return void(t.NAV_BATTLE!=e&&this.closeWindow(e));for(var o=0;o<this.navBtn.length;o++)e!=o&&this.closeWindow(o);if(this.navBtn[e].selected=!0,this.navBtn[e].selected){var s=this.openWindow(e);null==s?this.navBtn[e].selected=!1:s&&!s.isShow()?this.navBtn[e].selected=!1:(this.m_OldSelectIndex=e,e==t.NAV_BATTLE&&(UserFb.ins().CheckFb()?ViewManager.ins().open(PlayFunView):ViewManager.ins().close(PlayFunView),(!GameMap.IsNoramlLevel()&&!GameMap.IsGuanQiaBoss()||i)&&ViewManager.ins().closePartPanel()))}else this.closeWindow(e)},t.prototype._checkPanelCanOpen=function(e){switch(e){case t.NAV_PET:return Deblocking.Check(DeblockingType.TYPE_60);default:return!0}},t.prototype.openWindow=function(e){return this.navBind[e]?ViewManager.ins().open(this.navBind[e]):null},t.prototype.closeWindow=function(e){this.navBind[e]&&ViewManager.ins().close(this.navBind[e])},t.prototype.closeNav=function(e){this.navBtn[e].selected=!1;for(var i=0,o=this.navBtn.length;o>i;i++)if(1==this.navBtn[i].selected)return;e!=t.NAV_BATTLE&&(this.navBtn[t.NAV_BATTLE].selected=!0,this.m_OldSelectIndex=t.NAV_BATTLE)},t.prototype.lilianUpgradeSuccess=function(e){for(var t=this,i=function(i){var o=new eui.Image;o.source=e[i],o.x=261+63*i,o.y=200,t.addChild(o),o.visible=!1;var s=egret.Tween.get(o);s.wait(130*i).to({visible:!0},1).to({x:326,y:730},900).call(function(){egret.Tween.removeTweens(o),t.removeChild(o)})},o=0;3>o;o++)i(o)},t.prototype.runItem=function(e){var t=UserTask.ins().getAchieveConfById(e.id).awardList;this.runStrat(t,0)},t.prototype.runStrat=function(e,t){var i=this,o="";if(0==e[t].type)switch(e[t].id){case MoneyConst.exp:o="";break;case MoneyConst.gold:o="icgoods117_png";break;case MoneyConst.yuanbao:o="icgoods121_png"}else o=""+e[t].id;""!=o&&-1==o.indexOf("_png")&&(o+="_png"),this.taskItemImg.visible=!0,this.taskItemImg.source=o;var s=egret.Tween.get(this);s.to({factor:1},800).call(function(){egret.Tween.removeTweens(i.taskItemImg),i.taskItemImg.visible=!1,e.length>++t&&i.runStrat(e,t)},this)},Object.defineProperty(t.prototype,"factor",{get:function(){return 0},set:function(e){this.taskItemImg.x=(1-e)*(1-e)*50+2*e*(1-e)*180+e*e*270,this.taskItemImg.y=(1-e)*(1-e)*500+2*e*(1-e)*400+e*e*730},enumerable:!0,configurable:!0}),t.prototype.publicBossRebirthtBubble=function(){var e=this;this.rebirthTips.visible=!0,this.rebirthTips.alpha=1;var t=egret.Tween.get(this.rebirthTips);t.wait(3e3).to({alpha:0},1500).call(function(){e.rebirthTips.visible=!1,egret.Tween.removeTweens(e.rebirthTips)})},t.CloseNav=function(e){var i=ViewManager.ins().getView(t);i&&i.closeNav(e)},t.prototype._playRedDotAni=function(){for(var e=0,t=this.navBtn.length;t>e;e++){var i=this.navBtn[e].redPoint;i&&(egret.Tween.removeTweens(i),1==i.visible&&(i.scaleX=i.scaleY=.8,egret.Tween.get(i,{loop:!0}).to({scaleX:1,scaleY:1},2500).to({scaleX:.8,scaleY:.8},2500)))}},t.prototype._stopRedDotAni=function(){for(var e=0,t=this.navBtn.length;t>e;e++){var i=this.navBtn[e].redPoint;egret.Tween.removeTweens(i),i.scaleX=i.scaleY=1}},t.prototype.checkGuide=function(){UserFb.ins().guanqiaID==GuideQuanQiaType.PET?(Setting.currStep=0,Setting.currPart=14,GuideUtils.ins().show(this.cityBtn,14,0)):UserFb.ins().guanqiaID==GuideQuanQiaType.GAD&&(Setting.currStep=0,Setting.currPart=20,GuideUtils.ins().show(this.cityBtn,20,0))},t.prototype.checkArGuide=function(){UserFb2.ins().fbChallengeId==GuideArtifact.Artifact&&GuideUtils.ins().show(this.battleBtn,68,6)},t.prototype.checkPetTrEndGuide=function(){14==Setting.currPart&&4==Setting.currStep&&GuideUtils.ins().show(this.petBtn,14,4)},t.prototype.checkGadEndGuide=function(){20==Setting.currPart&&12==Setting.currStep&&GuideUtils.ins().show(this.battleBtn,20,12)},t.prototype.checkSkillEndGuide=function(){19==Setting.currPart&&2==Setting.currStep?GuideUtils.ins().show(this.battleBtn,19,2):24==Setting.currPart&&2==Setting.currStep?GuideUtils.ins().show(this.battleBtn,24,2):26==Setting.currPart&&2==Setting.currStep&&GuideUtils.ins().show(this.battleBtn,26,2)},t.prototype.checkTaskGuide=function(){var e=UserTask.ins().taskTrace;if(e)switch(e.id){case GuideMissionType.PETSTAR:PetModel.getInstance.checkGuideStar()&&!GuideUtils.ins().isShow()&&(Setting.currPart=27,Setting.currStep=0,GuideUtils.ins().show(this.petBtn,27,0))}},t.LAYER_LEVEL=LayerManager.UI_NAVIGATION,t.NAV_CITY=0,t.NAV_BAG=3,t.NAV_BATTLE=2,t.NAV_ROLE=1,t.NAV_MYBAG=4,t.NAV_PET=5,t}(BaseEuiView);__reflect(UIView2.prototype,"UIView2"),window.UIView2=UIView2;var GuanQiaBossItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_ItemList.itemRenderer=ItemBase,this.listData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.listData,this.addEvt(),this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100046},t.prototype.addEvt=function(){this.m_MainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)
},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data,i=t.mapId;t.groupId<=1&&(i=t.mapId-1);var o=GlobalConfig.ins("ChaptersBossConfig")[t.groupId][i];if(o){var s=UserFb.ins().guanqiaID,n=GlobalConfig.ins("ChaptersRewardConfig")[t.mapId];n&&(s>n.needLevel?(this.m_MainBtn.enabled=!0,this.m_CountLab.textFlow=TextFlowMaker.generateTextFlow(o.bossTips),this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100046):(this.m_MainBtn.enabled=!1,this.m_CountLab.textFlow=TextFlowMaker.generateTextFlow(o.openTips)));var r=GlobalConfig.ins("MonstersConfig")[o.bossId];r&&(this.m_NameLab.text="Lv."+r.level+" "+r.name,this.m_BossHead.source=ResDataPath.getBossHeadImage(r.head)),this.listData.removeAll(),this.listData.replaceAll(o.showReward),this.listData.refresh()}this.checkIsBossGuide()},t.prototype.onClick=function(){var e=GuanQiaModel.getInstance;if(GuideUtils.ins().next(this.m_MainBtn),e.tiliNum>0){var t=this.data;UserFb.ins().sendQuanQiaBossBattle(t.mapId),ViewManager.ins().close(GuanQiaBossWin),ViewManager.ins().close(GuanQiaMapWin),ViewManager.ins().close(GuanQiaWin)}else UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100761)},t.prototype.checkIsBossGuide=function(){var e=(GuanQiaModel.getInstance,this.data);if(1==e.mapId){var t=GuanQiaModel.getInstance.guideConfig;t&&10==t.groupId&&GuideUtils.ins().show(this.m_MainBtn,t.groupId,3)}},t}(eui.ItemRenderer);__reflect(GuanQiaBossItem.prototype,"GuanQiaBossItem"),window.GuanQiaBossItem=GuanQiaBossItem;var GuanQiaBossTab=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.m_Bg.source="comp_204_44_"+(this.itemIndex+1)+"_png",GuanQiaBossWin.groupId==this.itemIndex+1?this.m_selectImg.visible=!0:this.m_selectImg.visible=!1},t}(eui.ItemRenderer);__reflect(GuanQiaBossTab.prototype,"GuanQiaBossTab"),window.GuanQiaBossTab=GuanQiaBossTab;var GuanQiaBossWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuanQiaBossWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=GuanQiaBossItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,UIHelper.SetLinkStyleLabel(this.m_GetTiliLab,GlobalConfig.jifengTiaoyueLg.st100754),this.m_TabBar.itemRenderer=GuanQiaBossTab,this.tabData=new eui.ArrayCollection([1,2,3,4]),this.m_TabBar.dataProvider=this.tabData,this.m_bg.init("GuanQiaBossWin",GlobalConfig.jifengTiaoyueLg.st100760)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.closeButtomGuideBtn.visible=!1,UserFb.ins().sendGetQuanQiaBossInit(),this.addViewEvent(),this.setData(),this.checkGuide()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeTick(),this.removeViewEvent()},t.prototype.addViewEvent=function(){this.m_TabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClickTabBar,this),this.m_GetTiliLab.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGetTili,this),MessageCenter.ins().addListener(GuanQiaEvt.GUANQIA_UPDATE_MSG,this.setData,this),this.AddClick(this.closeButtomGuideBtn,this.onClickClose)},t.prototype.removeViewEvent=function(){this.m_TabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClickTabBar,this),this.m_GetTiliLab.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGetTili,this),MessageCenter.ins().removeListener(GuanQiaEvt.GUANQIA_UPDATE_MSG,this.setData,this)},t.prototype.setData=function(){var e=GlobalConfig.ins("ChaptersBossConfig")[t.groupId],i=[];for(var o in e){var s={groupId:t.groupId,mapId:e[o].mapid};i.push(s)}this.listData.removeAll(),this.listData.replaceAll(i),this.listData.refresh();var n=GlobalConfig.ins("ChaptersBossCommonConfig"),r=GuanQiaModel.getInstance.tiliNum;this.m_TiliLab.text=GlobalConfig.jifengTiaoyueLg.st100755+"："+r+"/"+n.maxCount,r<n.maxCount?(this.m_TimeLab.visible=!0,this.addTick()):(this.m_TimeLab.visible=!1,this.removeTick()),this.tabData.refresh()},t.prototype.addTick=function(){this.removeTick(),TimerManager.ins().doTimer(1e3,0,this.playTime,this)},t.prototype.removeTick=function(){TimerManager.ins().remove(this.playTime,this)},t.prototype.playTime=function(){var e=GuanQiaModel.getInstance.time,t=GameServer.GetSurplusTime(e);this.m_TimeLab.text=GlobalConfig.jifengTiaoyueLg.st100475+"：（"+t+"）"},t.prototype.onClickClose=function(){GuideUtils.ins().next(this.closeButtomGuideBtn),ViewManager.ins().close(this)},t.prototype.onClickTabBar=function(e){t.groupId=e.itemIndex+1,this.setData()},t.prototype.onClickGetTili=function(){var e=GuanQiaModel.getInstance;LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100428,[]);WarnWin.show("<font color='#787878'>"+GlobalConfig.jifengTiaoyueLg.st100756+"<font color='#008f22'>"+e.buyTiliPrice+"</font>"+GlobalConfig.jifengTiaoyueLg.st100757+"</font>\n<font color='#3b3b3b'>"+GlobalConfig.jifengTiaoyueLg.st100758+"："+e.tiliBuyNum+"/"+e.canBuyMaxNum+"</font>",function(){var t=GameLogic.ins().actorModel.yb;e.tiliBuyNum>=e.canBuyMaxNum?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100759):t<e.buyTiliPrice?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008):UserFb.ins().sendQuanQiaBuyTili()},this)},t.prototype.checkGuide=function(){4==Setting.currStep&&10==Setting.currPart&&(this.closeButtomGuideBtn.visible=!0,GuideUtils.ins().show(this.closeButtomGuideBtn,10,4))},t.groupId=1,t}(BaseEuiPanel);__reflect(GuanQiaBossWin.prototype,"GuanQiaBossWin"),ViewManager.ins().reg(GuanQiaBossWin,LayerManager.UI_Popup),window.GuanQiaBossWin=GuanQiaBossWin;var GuanQiaMapIcon=function(e){function t(){var t=e.call(this)||this;return t.isGuide=!1,t.skinName="GuanQiaMapIconSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.x>280?this.m_box.x=-55:this.m_box.x=100},t.prototype.setData=function(e){this.config=e;var t=UserFb.ins().guanqiaID,i=e.needLevel;this.m_CompImg.visible=!1,this.m_ExpGroup.visible=!1;var o=GlobalConfig.ins("ChaptersConfig")[t];if(o){var s=GlobalConfig.ins("ChaptersRewardConfig")[o.mapid+1];s&&s.id==e.id&&(this.m_ExpGroup.visible=!0,this.m_ExpLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100753,[e.expEff]));var n=GlobalConfig.ins("ChaptersRewardConfig")[o.mapid];if(n){if(n.needLevel==i){this.m_NowAttrImg.visible=!0,this.m_ExpGroup.visible=!0,this.m_ExpLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100753,[e.expEff]);var r=SubRoles.ins().getSubRoleByIndex(0);this.roleShowPanel.creatAnim(r),this.roleShowPanel.setCharRoleMountLv(15),this.roleShowPanel.m_ElementImg.visible=!1}else this.m_NowAttrImg.visible=!1,this.roleShowPanel.release();GuanQiaModel.getInstance.checkIsComp(e.id)&&(this.m_CompImg.visible=!0),n.needLevel<i||!i?FilterUtil.setGayFilter(this.m_Icon):this.m_Icon.filters=null}GuanQiaModel.getInstance.checkGetAwardRedPoint(e.id)?(this.m_RedPoint.visible=!0,this.m_box.visible=!0):(this.m_RedPoint.visible=!1,this.m_box.visible=!1)}this.m_Name.text=e.name,this.m_Icon.source=e.icon,this.chickIsShowTips()},t.prototype.onClick=function(){var e=UserFb.ins().guanqiaID,t=GuanQiaModel.getInstance;if(t.checkIsCanGoNextLayer()){var i=e+1,o=GlobalConfig.ins("ChaptersConfig")[i];if(o.mapid==this.config.id)return void UserFb.ins().sendGoNextChapter()}ViewManager.ins().open(GuanQiaTipsWin,this.config.id)},t.prototype.chickIsShowTips=function(){this.m_TipsGroup.visible=!1;var e=GuanQiaModel.getInstance;if(e.checkIsCanGoNextLayer()){var t=UserFb.ins().guanqiaID+1,i=GlobalConfig.ins("ChaptersConfig")[t];i&&(i.mapid!=this.config.id||e.checkIsFirstGuide()||(this.m_TipsGroup.visible=!0,this.m_TipsLab.text=GlobalConfig.jifengTiaoyueLg.st101245+this.config.name))}},t.prototype.release=function(){this.roleShowPanel.release(),this.m_Icon.filters=null},t}(eui.Component);__reflect(GuanQiaMapIcon.prototype,"GuanQiaMapIcon"),window.GuanQiaMapIcon=GuanQiaMapIcon;var GuanQiaMapPanel=function(e){function t(t){var i=e.call(this)||this;return i.isFirstOpen=!0,i.mapMaxHeight=4157,i.showHeight=541,i.skinName="GuanQiaMapPanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.addViewEvent=function(){this.m_BossBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBoss,this),this.observe(UserFb.ins().postZhangJieAwardChange,this.initData),MessageCenter.ins().addListener(MessageDef.GUANQIA_CHANGE,this.initData,this),this.AddClick(this.iconGuide,this.onClickGuide),this.observe(GuanQiaEvt.GUANQIA_UPDATE_MSG,this.checkRedPoint)},t.prototype.removeEvent=function(){this.m_BossBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBoss,this),MessageCenter.ins().removeListener(MessageDef.GUANQIA_CHANGE,this.initData,this)},t.prototype.open=function(){this.iconGuide.visible=!1,this.iconGuide.isGuide=!0,this.addViewEvent(),this.isFirstOpen=!0,this.initData(),this.checkGuide()},t.prototype.close=function(){this.removeEvent()},t.prototype.release=function(){this.m_Scroller.stopAnimation(),this.removeEvent();for(var e=this.m_GuanQiaIconGroup.numChildren,t=0;e>t;t++){var i=this.m_GuanQiaIconGroup.getChildAt(t);i instanceof GuanQiaMapIcon&&i.release()}},t.prototype.initData=function(){var e=GlobalConfig.ins("ChaptersRewardConfig"),t=0;for(var i in e){var o=this.m_GuanQiaIconGroup.getChildAt(t);o instanceof GuanQiaMapIcon&&(o.setData(e[i]),1==o.m_NowAttrImg.visible&&this.setScrollPoint(o.y)),t++}this.checkBossGuide(),this.checkRedPoint()},t.prototype.checkRedPoint=function(){this.m_StrongBtn.redPoint.visible=GuanQiaModel.getInstance.checkSGQBossRedPoint()},t.prototype.onClickBoss=function(){GuideUtils.ins().next(this.m_BossBtn),Deblocking.Check(DeblockingType.TYPE_80)&&ViewManager.ins().open(GuanQiaBossWin)},t.prototype.setScrollPoint=function(e){if(1==this.isFirstOpen){this.isFirstOpen=!1;var t=e-this.showHeight/2,i=e-(this.mapMaxHeight-this.showHeight/2);this.m_Scroller&&this.m_Scroller.viewport&&(0>=t?this.m_Scroller.viewport.scrollV=0:i>=0?this.m_Scroller.viewport.scrollV=this.mapMaxHeight-this.showHeight:this.m_Scroller.viewport.scrollV=t)}},t.prototype.checkGuide=function(){var e=GuanQiaModel.getInstance;if(e.checkIsCanGoNextLayer()){var t=GuanQiaModel.getInstance.guideConfig;if(t){var i=this["icon"+GuanQiaModel.getInstance.getPoint(t)];this.mainIcon=i,this.iconGuide.setData(i.config),this.m_Scroller&&this.m_Scroller.viewport&&(this.iconGuide.y=i.y-this.m_Scroller.viewport.scrollV),this.iconGuide.x=i.x+15,this.iconGuide.visible=!0,this.mainIcon.visible=!1,GuideUtils.ins().show(this.iconGuide,t.groupId,1)}}},t.prototype.checkBossGuide=function(){var e=GuanQiaModel.getInstance.guideConfig;if(e&&10==e.groupId){var t=ViewManager.ins().getView(GuanQiaMapWin);t instanceof GuanQiaMapWin&&GuideUtils.ins().show(t.commonWindowBg.returnBtn,10,2)}},t.prototype.onClickGuide=function(){GuideUtils.ins().next(this.iconGuide),this.mainIcon.visible=!0,this.iconGuide.visible=!1},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(GuanQiaMapPanel.prototype,"GuanQiaMapPanel",["ICommonWindowTitle"]),window.GuanQiaMapPanel=GuanQiaMapPanel;var GuanQiaMapWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainWinSkin",t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.guanQiaMapPanel=new GuanQiaMapPanel,this.guanQiaMapPanel.name=GlobalConfig.jifengTiaoyueLg.st100752,this.commonWindowBg.AddChildStack(this.guanQiaMapPanel)},t.prototype.open=function(){e.prototype.open.call(this),this.commonWindowBg.OnAdded(this),this.commonWindowBg.tabBar.visible=!1},t.prototype.close=function(){e.prototype.close.call(this),this.guanQiaMapPanel.release(),this.commonWindowBg.OnRemoved()},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t}(BaseEuiPanel);__reflect(GuanQiaMapWin.prototype,"GuanQiaMapWin",["ICommonWindow"]),ViewManager.ins().reg(GuanQiaMapWin,LayerManager.UI_Main),window.GuanQiaMapWin=GuanQiaMapWin;var GuanQiaPanel=function(e){function t(){var t=e.call(this)||this;return t.guideHand=null,t.guideFrame=null,t.windowCommonBg="pic_bj_20_png",t.skinName="GuanQiaPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.m_RankType=RankDataType.TYPE_PASS,this.reward=[];for(var e=0;5>e;e++)this.reward[e]=this["item"+e];this.challengeBtn.visible=!1,this.bar.value=0,UIHelper.SetLinkStyleLabel(this.rank_label,GlobalConfig.jifengTiaoyueLg.st100091),this.m_RankList.itemRenderer=GuanQiaPanelRankItem,this.rankListData=new eui.ArrayCollection,this.m_RankList.dataProvider=this.rankListData,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100747,this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st100748,this.languageTxt1.text=GlobalConfig.jifengTiaoyueLg.st100380,this.challengeBtn.label=GlobalConfig.jifengTiaoyueLg.st100749},t.prototype.initMc=function(){this.bossImage||(this.bossImage=new MovieClip,this.bossImage.scaleX=-1,this.bossImage.scaleY=1,this.bossImage.x=this.groupBoss.width/2,this.bossImage.y=this.groupBoss.height/2,this.bossImage.touchEnabled=!1)},t.prototype.initMcEff=function(){this.awardItemEff||(this.awardItemEff=new MovieClip,this.awardItemEff.x=205,this.awardItemEff.y=221)},t.prototype.open=function(){this.addTouchEvent(this,this.onTouchTap,this.challengeBtn),this.addTouchEvent(this,this.onTouchTap,this.getReward),this.addTouchEvent(this,this.onClickMap,this.m_MapGroup),this.observe(GameLogic.ins().postEnterMap,this.upDataGuanqia),this.observe(UserFb.ins().postZhangJieAwardChange,this.upDataGuanqia),this.observe(Rank.postRankingData,this.upDataRank),this.observe(MessageDef.RAID_KILL_MONSTER_COUNT,this.upDateBattle),this.addTouchEvent(this,this.openRankWin,this.rank_label),Rank.ins().sendGetRankingData(this.m_RankType)},t.prototype.close=function(){DisplayUtils.dispose(this.bossImage),this.bossImage=null},t.prototype.openRankWin=function(){if(this.m_RankType){var e=Rank.ins().rankModel[this.m_RankType];e&&e.getDataList.length>0?GameGlobal.actorModel.level<60?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100379):ViewManager.ins().open(FbAndLevelsRankWin,this.m_RankType):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100370)}},t.prototype.release=function(){this.close()},t.prototype.upDateBattle=function(){1!=this.challengeBtn.visible&&this.UpdateContent()},t.prototype.onTouchTap=function(e){switch(e.currentTarget){case this.challengeBtn:GuideUtils.ins().next(this.challengeBtn),UserBag.ins().getSurplusCount()<UserBag.BAG_ENOUGH?BagFullTipsPanel.Open():(GameLogic.ins().startPkBoss(),ViewManager.ins().closePartPanel());break;case this.getReward:var t=UserFb.ins().guanqiaID,i=GlobalConfig.ins("ChaptersConfig")[t];ViewManager.ins().open(GuanQiaTipsWin,i.mapid)}},t.prototype.upDataGuanqia=function(){this.UpdateContent()},t.prototype.UpdateContent=function(){null==this.chaptersRewardConfig&&(this.chaptersRewardConfig=GlobalConfig.ins("ChaptersRewardConfig")),null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig);var e=UserFb.ins().guanqiaID,t=UserFb.ins().bossReward;null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig"));var i=this.chaptersConfig[e],o=this.chaptersRewardConfig[i.mapid];if(o&&(this.bar.maximum=o.needLevel,this.bar.value=e,this.m_MapNameLab.text=o.name,this.m_LittleMapImg.source=o.mapUi+"_png"),i){var s=this.monstersConfig[UserFb.ins().bossID];this.mapNameTxt.text=s.name+" 【"+i.cid+GlobalConfig.jifengTiaoyueLg.st100369+"】 ",this.m_MapLvLab.text="【"+i.mapsubid+"-"+i.turn+"】"}for(var n,r=0;r<this.reward.length;r++)n=this.reward[r],t[r]?n.data=t[r]:DisplayUtils.removeFromParent(n);this.initMc(),this.bossImage.loadUrl(ResDataPath.GetMonsterBodyPath(s.avatar+"_3s"),!0,-1),this.groupBoss.addChildAt(this.bossImage,5),this.updateChallenge(),this.showChallengeGuide();var a=GuanQiaModel.getInstance.checkAllRedPoint();a?this.m_MapRedPoint.visible=!0:this.m_MapRedPoint.visible=!1},t.prototype.updateChallenge=function(){this.challengeBtn.visible=UserFb.ins().isShowBossPK(),this.needWave.visible=!this.challengeBtn.visible,this.needWave.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100745,[UserFb.ins().getNeedWave()]),UserFb.ins().guanqiaID>=UserFb.ins().maxLen&&(this.challengeBtn.visible=!1,this.needWave.visible=!0,this.needWave.text=GlobalConfig.jifengTiaoyueLg.st100746)},t.prototype.showChallengeGuide=function(){UserFb.ins().guanqiaID<=1&&UserFb.ins().isShowBossPK()&&!UserFb.ins().bossIsChallenged&&!GuideUtils.ins().isShow()&&GuideUtils.ins().show(this.challengeBtn,1,1)},t.prototype.upDataRank=function(){var e=Rank.ins().rankModel[this.m_RankType];this.rankListData.replaceAll(e.getDataList())},t.prototype.onClickMap=function(){ViewManager.ins().open(GuanQiaMapWin)},t}(BaseView);__reflect(GuanQiaPanel.prototype,"GuanQiaPanel",["ICommonWindowTitle"]),window.GuanQiaPanel=GuanQiaPanel;var GuanQiaPanelRankItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.m_RankNum.text=this.itemIndex+1+"",this.m_Name.text=t.player,this.m_LayerNum.text=t.count+GlobalConfig.jifengTiaoyueLg.st100369},t}(eui.ItemRenderer);__reflect(GuanQiaPanelRankItem.prototype,"GuanQiaPanelRankItem"),window.GuanQiaPanelRankItem=GuanQiaPanelRankItem;var GuanQiaTipsWin=function(e){function t(){var t=e.call(this)||this;return t.id=1,t.skinName="GuanQiaTipsWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_ItemList.itemRenderer=ItemBase,this.listData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.listData,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100750+"：",this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st100399+"：",this.m_CheckInLab.text=GlobalConfig.jifengTiaoyueLg.st100751+"...",this.m_GetLab.text=GlobalConfig.jifengTiaoyueLg.st100981,this.m_bg.init("GuanQiaTipsWin",GlobalConfig.jifengTiaoyueLg.st100367)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.id=e[0],this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.m_MainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.removeViewEvent=function(){this.m_MainBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.setData=function(){this.m_MainBtn.visible=!1,this.m_CheckInLab.visible=!1,this.m_GetLab.visible=!1;var e=UserFb.ins().guanqiaID,t=GuanQiaModel.getInstance.checkCanGetAward(this.id),i=t[0],o=t[1],s=GlobalConfig.ins("ChaptersConfig")[e],n=GlobalConfig.ins("ChaptersRewardConfig")[s.mapid];n.needLevel==i.needLevel&&e<=n.needLevel?this.m_CheckInLab.visible=!0:o?(this.m_MainBtn.visible=!0,this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101210):e>i.needLevel?this.m_GetLab.visible=!0:(this.m_MainBtn.visible=!0,this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100040),this.listData.replaceAll(i.rewards),this.m_MapNameLab.text=i.name,this.m_ConditionLab.textFlow=TextFlowMaker.generateTextFlow(i.tips)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.onClick=function(){this.m_MainBtn.label==GlobalConfig.jifengTiaoyueLg.st101210?(UserFb.ins().sendGetAward(this.id),this.onClickClose()):this.onClickClose()},t}(BaseEuiPanel);__reflect(GuanQiaTipsWin.prototype,"GuanQiaTipsWin"),ViewManager.ins().reg(GuanQiaTipsWin,LayerManager.UI_Popup),window.GuanQiaTipsWin=GuanQiaTipsWin;var GuanQiaWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainWinSkin",t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.guanQiaRewardPanel=new GuanQiaPanel,this.guanQiaRewardPanel.name=GlobalConfig.jifengTiaoyueLg.st100744,this.commonWindowBg.AddChildStack(this.guanQiaRewardPanel)},t.prototype.open=function(){e.prototype.open.call(this),this.commonWindowBg.OnAdded(this),this.commonWindowBg.tabBar.visible=!1},t.prototype.close=function(){e.prototype.close.call(this),this.commonWindowBg.OnRemoved(),this.guanQiaRewardPanel.release()},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t}(BaseEuiPanel);__reflect(GuanQiaWin.prototype,"GuanQiaWin",["ICommonWindow"]),ViewManager.ins().reg(GuanQiaWin,LayerManager.UI_Main),window.GuanQiaWin=GuanQiaWin;var GuanQiaEvt=function(){function e(){}return e.GUANQIA_UPDATE_MSG="GUANQIA_UPDATE_MSG",e}();__reflect(GuanQiaEvt.prototype,"GuanQiaEvt"),window.GuanQiaEvt=GuanQiaEvt;var GuanQiaModel=function(){function e(){this.tiliNum=0,this.tiliBuyNum=0,this.info=0,this.time=0,this.isCanNextLayer=!0}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.checkAllRedPoint=function(){return this.checkSGQBossRedPoint()||this.checkAllGetAwardRedPoibt()?!0:!1},e.prototype.checkAllGetAwardRedPoibt=function(){var e=GlobalConfig.ins("ChaptersRewardConfig");for(var t in e){e[t];if(this.checkGetAwardRedPoint(parseInt(t)))return!0}return!1},e.prototype.checkGetAwardRedPoint=function(e){var t=(UserFb.ins().guanqiaID,this.checkCanGetAward(e)),i=(t[0],t[1]);return i?!0:!1},e.prototype.checkIsGetAward=function(e,t){var i=Math.floor(t/30),o=e[i]&1<<t-30*i;return o>0?!0:!1},e.prototype.checkCanGetAward=function(e){var t=GlobalConfig.ins("ChaptersRewardConfig"),i=!1,o=(UserFb.ins().guanqiaID,t[e]),s=UserFb.ins().guanqiaReward;if(o){var n=UserFb.ins().guanqiaID,r=this.checkIsGetAward(s,e);n>o.needLevel&&!r&&(i=!0)}return[o,i]},Object.defineProperty(e.prototype,"canBuyTili",{get:function(){return this.canBuyMaxNum>this.tiliBuyNum?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canBuyMaxNum",{get:function(){var e=GlobalConfig.ins("ChaptersBossCommonConfig");if(e){var t=e.timesCount[UserVip.ins().lv];return t}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buyTiliPrice",{get:function(){var e=GlobalConfig.ins("ChaptersBossCommonConfig");if(e){var t=e.timesPirce[this.tiliBuyNum];return t?t:t=e.timesPirce[e.timesPirce.length-1]}return 0},enumerable:!0,configurable:!0}),e.prototype.checkBossIsBattle=function(e){var t=this.info&1<<e;return t>0?!1:!0},e.prototype.checkIsFirstGuide=function(){var e=UserFb.ins().guanqiaID,t=GlobalConfig.ins("ChaptersRewardConfig"),i=!1,o=t[1];return o&&o.needLevel==e&&(i=!0),this.isCanNextLayer&&i?!0:!1},e.prototype.checkIsCanGoNextLayer=function(){var e=UserFb.ins().guanqiaID,t=GlobalConfig.ins("ChaptersRewardConfig"),i=!1;for(var o in t){var s=t[o];if(s&&s.needLevel==e){i=!0;break}}return this.isCanNextLayer&&i?!0:!1},e.prototype.checkIsComp=function(e){var t=UserFb.ins().guanqiaID,i=GlobalConfig.ins("ChaptersConfig")[t],o=GlobalConfig.ins("ChaptersRewardConfig")[e];if(!o.needLevel)return!1;if(i){var s=GlobalConfig.ins("ChaptersRewardConfig")[i.mapid];if(s&&(t>s.needLevel||s.needLevel>o.needLevel||this.checkIsCanGoNextLayer()&&o.needLevel==t))return!0}return!1},e.prototype.checkIsFirstBoss=function(){var e=this.checkBossIsBattle(1);if(e){var t=UserFb.ins().guanqiaID,i=GlobalConfig.ins("ChaptersRewardConfig")[1];if(t>i.needLevel)return!0}return!1},e.prototype.setGuideConfig=function(){var e=GlobalConfig.ins("dialogueSetConfig")[4],t=e[UserFb.ins().guanqiaID];return this.guideConfig=t,this.guideConfig},e.prototype.getPoint=function(e){var t=GlobalConfig.ins("dialogueSetConfig")[4],i=1;for(var o in t){if(t[o].param==e.param)return i+1;i++}return i},e.prototype.getLastJQGuideConfig=function(){var e=GlobalConfig.ins("dialogueSetConfig")[4];if(!this.lastJQConfig){var t=void 0;for(var i in e)t=e[i];this.lastJQConfig=t}return this.lastJQConfig},e.prototype.checkSGQBossRedPoint=function(){return this.tiliNum>0&&UserFb.ins().guanqiaID>10},e}();__reflect(GuanQiaModel.prototype,"GuanQiaModel"),window.GuanQiaModel=GuanQiaModel;var GuideLocalStorage=function(){function e(){}return e.setGuideLocalData=function(e,t){var i="Guide_"+t;LocalStorageData.setItem(i,e+"")},e.getGuideLocalData=function(e){var t="Guide_"+e,i=LocalStorageData.getItem(t)||"0";return parseInt(i)},e.addCompeleId=function(t){var i=this.getLastKey(t),o=this.getNewId(t),s=e.getGuideLocalData(i)+(1<<o);e.setGuideLocalData(s,i)},e.checkIdIsCompele=function(t){var i=this.getLastKey(t),o=this.getNewId(t),s=e.getGuideLocalData(i)&1<<o;return s>0?!0:!1},e.getLastKey=function(e){var t=Math.ceil(e/30);return 0==t&&(t=1),t},e.getNewId=function(e){var t=0;return 0!=e&&(t=e%30,0==t&&(t=e)),t},e.reset=function(){for(var t=0;5>t;t++)e.setGuideLocalData(0,t)},e}();__reflect(GuideLocalStorage.prototype,"GuideLocalStorage"),window.GuideLocalStorage=GuideLocalStorage;var GuideUtils=function(e){function t(){var t=e.call(this)||this;return t.WelcomeWin=!1,t.configData=GlobalConfig.ins("dialogueConfig"),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.next=function(e){if(this.triggered==e&&(this.view.resetParent(),null!=this.view&&null!=this.view.parent)){var t=Setting.currStep,i=Setting.currPart;if(this.configData[i]){if(t++,!this.configData[i][t]){var o=GuideLocalStorage.checkIdIsCompele(i);o||GuideLocalStorage.addCompeleId(i),i++,t=0}this.configData[i]||(i=0,t=0),Setting.currStep=t,Setting.currPart=i,this.hide()}}},t.prototype.checkHaveNext=function(){var e=!0,t=Setting.currStep,i=Setting.currPart;return t++,this.configData[i][t]||(e=!1),e},t.prototype.show=function(e,t,i){var o=GuideLocalStorage.checkIdIsCompele(t);if(!o&&0!=e.visible&&e.parent&&!this.isShow()){var s=Setting.currStep,n=Setting.currPart;if(n==t&&s==i&&this.configData[n]&&this.configData[n][s]){var r=ViewManager.ins().getView(PlayFunView);if(r&&1==r.autoPkBoss.selected&&(r.autoPkBoss.selected=!1),this.triggered=e,null==this.view&&(this.view=new GuideView),StageUtils.ins().getUIStage().addChild(this.view),TimerManager.ins().doNext(function(){this.view.setData(e,this.configData[n][s])},this),null!=GameLoadingView.m_Instance&&null!=GameLoadingView.m_Instance.parent){var a=StageUtils.ins().getStage().numChildren;StageUtils.ins().getStage().setChildIndex(GameLoadingView.m_Instance,a-1)}this._closePlayFunAni(),ViewManager.ins().close(ModulePrompt),ViewManager.ins().close(OmGifBagWin)}}},t.prototype._closePlayFunAni=function(){var e=ViewManager.ins().getView(PlayFunView);e&&(e._checkFinger(e.taskTraceBtn,!1),e._checkFinger(e.guanqiaBtn,!1))},t.prototype.hide=function(){this.view&&(this.view.resetParent(),DisplayUtils.removeFromParent(this.view)),this.triggered=null},t.prototype.hideFinge=function(){this.view&&this.view.hideFinger()},t.prototype.isShow=function(){return null!=this.view&&null!=this.view.parent||this.WelcomeWin},t}(BaseClass);__reflect(GuideUtils.prototype,"GuideUtils");var GuideQuanQiaType;!function(e){e[e.PET=7]="PET",e[e.SKILL=8]="SKILL",e[e.SKILL1=14]="SKILL1",e[e.SKILL2=23]="SKILL2",e[e.GAD=12]="GAD",e[e.Artifact=20]="Artifact",e[e.OnHook=15]="OnHook"}(GuideQuanQiaType||(GuideQuanQiaType={}));var GuideArtifact;!function(e){e[e.Artifact=10]="Artifact"}(GuideArtifact||(GuideArtifact={}));var GuideMissionType;!function(e){e[e.PETSTAR=100026]="PETSTAR"}(GuideMissionType||(GuideMissionType={}));var GuideJQType;!function(e){e[e.TYPE1=1]="TYPE1",e[e.TYPE2=2]="TYPE2",e[e.TYPE3=3]="TYPE3",e[e.TYPE4=4]="TYPE4",e[e.TYPE5=5]="TYPE5"}(GuideJQType||(GuideJQType={})),window.GuideUtils=GuideUtils;var GuideView=function(e){function t(){var t=e.call(this)||this;return t.list=[],t.talkLine=0,t.oldGroupId=0,t.skinName="GuideViewSkin",t.touchEnabled=!0,t.percentHeight=100,t.percentWidth=100,t.mc=new MovieClip,t.infoGroup.addChildAt(t.mc,3),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,t.onResize,t),t.m_StoryWin.m_TouchGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClickJQ,t),t}return __extends(t,e),t.prototype.onResize=function(){this.stage},t.prototype.refurbish=function(){this.setData(this._obj,this._data)},t.prototype.setData=function(e,t){if(null!=e){this._obj=e,this._objindex=e.parent.getChildIndex(e),this._data=t,this.list=[];var i=!0,o=e.parent;this.list.push(e),this.list.push(o);for(var s=0;i;){if(s++,o==this.parent){i=!1;break}if(o.parent&&(o=o.parent,this.list.push(o)),s>=20){i=!1;break}}this.triggeredParent=this.triggeredParent||e.parent,this.lab.text=t.txt,this.addChildAt(e,1),this._isRoleBtn(this._obj)&&(this.btn||(this.btn=new eui.Button,this.btn.skinName="MainBottomBtnSkin",this.triggeredParent.addChildAt(this.btn,this._objindex))),this.toPos(this._obj),this.isJQ(t)}},t.prototype._isRoleBtn=function(e){var t=ViewManager.ins().getView(UIView2);if(t){if(t.roleBtn==e)return!0;if(t.petBtn==e)return!0;if(t.cityBtn==e)return!0;if(t.battleBtn==e)return!0}return!1},t.prototype.toPos=function(e){new egret.Point;if(this.objX=e.x,this.objY=e.y,e.horizontalCenter||e.verticalCenter||e.left||e.right||e.top||e.bottom){for(var t=this.triggeredParent,i=(isNaN(e.horizontalCenter)?0:(t.width-e.width>>1)+parseInt(e.horizontalCenter))||parseInt(e.left)||e.x,o=(isNaN(e.verticalCenter)?0:(t.height-e.height>>1)+parseInt(e.verticalCenter))||parseInt(e.top)||e.y;t&&!(t instanceof egret.Stage);)i+=(isNaN(t.horizontalCenter)?0:(t.parent.width-t.width>>1)+parseInt(t.horizontalCenter))||parseInt(t.left)||t.x,o+=(isNaN(t.verticalCenter)?0:(t.parent.height-t.height>>1)+parseInt(t.verticalCenter))||parseInt(t.top)||t.y,t=t.parent;e.x=i,e.y=o}else{var s;this.list[1].horizontalCenter;for(var n=new egret.Point,r=0;r<this.list.length;r++)s=this.list[r],isNaN(s.horizontalCenter)&&isNaN(s.verticalCenter)&&isNaN(s.left)&&isNaN(s.right)&&isNaN(s.top)&&isNaN(s.bottom)?(n.x+=s.x,n.y+=s.y):this.list[r+1]&&(this.list[r+1].validateNow(),n.x+=s.x,n.y+=s.y);e.x=n.x,e.y=n.y}"gadBtn"==e.name&&(e.x=e.x-WIDTH/2),isNaN(e.horizontalCenter)&&isNaN(e.verticalCenter)&&isNaN(e.left)&&isNaN(e.right)&&isNaN(e.top)&&isNaN(e.bottom)||(e.includeInLayout=!1),this._obj.x>300?this.currentState="left":this._obj.x<50?this.currentState="right":this.currentState="above",this.validateNow();var a=this._obj.x+(this._obj.width>>1)+(this._data.pox?this._data.pox:0),l=this._obj.y+(this._obj.height>>1)+(this._data.poy?this._data.poy:0);this._obj,this._obj.hashCode,this._obj.name;"challengeBtn"==this._obj.name&&(a=this._obj.x+(this._obj.width>>1)+(this._data.pox?this._data.pox:0)+12),this.infoGroup.x=a,this.infoGroup.y=l,this.mc.loadUrl(ResDataPath.GetUIEffePath("eff_guide"),!0),this.mc.x=11,this.mc.y=7,this.playFinger()},t.prototype.resetParent=function(){this.triggeredParent&&(this._obj.x=this.objX,this._obj.y=this.objY,this._obj.includeInLayout=!0,this._isRoleBtn(this._obj)&&(this.triggeredParent.removeChildAt(this._objindex),this.btn=null),this.triggeredParent.addChildAt(this._obj,this._objindex),this.triggeredParent=null),egret.Tween.removeTweens(this.m_Finger),this.m_Finger.x=this.m_Finger.y=0},t.prototype.playFinger=function(){this.m_Finger.visible=!0,egret.Tween.removeTweens(this.m_Finger),egret.Tween.get(this.m_Finger,{loop:!0}).to({x:15,y:15},200).to({x:0,y:0},200)},t.prototype.hideFinger=function(){this.m_Finger.visible=!1},t.prototype.isJQ=function(e){switch(this._obj.visible=!1,this.infoGroup.visible=!1,this.m_StoryRoleTips.visible=!1,this.m_StoryWin.visible=!1,this.oldGroupId!=e.groupId&&(this.m_StoryWin.initPoint(),this.oldGroupId=e.groupId,this.talkLine=0),1==e.endWay?this.talkLine=0:this.talkLine+=1,this.oldConfig=e,e.type){case GuideJQType.TYPE1:case GuideJQType.TYPE2:case GuideJQType.TYPE5:this.m_StoryWin.visible=!0,this.m_StoryWin.setData(e,this.talkLine);break;case GuideJQType.TYPE3:this._obj.visible=!0,this.m_StoryRoleTips.visible=!0,this.infoGroup.visible=!0,this._img.visible=!1,this._img1.visible=!1,this.lab.visible=!1,this.m_StoryRoleTips.m_Tips.text=e.txt;
var t=e.coordinate;t&&(this.m_StoryRoleTips.x=t[0],this.m_StoryRoleTips.y=t[1]),Main.isLiuhai&&e.top?this.m_StoryRoleTips.top=e.top+20:this.m_StoryRoleTips.top=e.top,this.m_StoryRoleTips.bottom=e.bottom;break;case GuideJQType.TYPE4:this._obj.visible=!0,this.infoGroup.visible=!0,this._img.visible=!0,this._img1.visible=!0,this.lab.visible=!0}},t.prototype.onClickJQ=function(){if(1!=t.isPlayTween){this.m_StoryWin.initPoint(),1==this.oldConfig.endWay?this.m_StoryWin.m_Item1.setData(this.oldConfig):(this.m_StoryWin.m_Item1.setData(this.oldConfig),egret.Tween.get(this.m_StoryWin.m_MainGroup).to({y:326},400));var e=GuideUtils.ins().checkHaveNext();e?(Setting.currStep++,this.isJQ(GuideUtils.ins().configData[Setting.currPart][Setting.currStep])):(this.initObj(),GuideUtils.ins().next(this._obj))}},t.prototype.initObj=function(){this._obj.visible=!0,this.infoGroup.visible=!0,this.m_StoryRoleTips.visible=!0,this.m_StoryWin.visible=!0},t.isPlayTween=!1,t}(eui.Component);__reflect(GuideView.prototype,"GuideView"),window.GuideView=GuideView;var BresenhamLine=function(){function e(){}return e.isAbleToThrough=function(e,t,i,o,s){var n=0,r=0,a=0,l=0,h=0,c=0,u=0,d=0,p=0,f=0,g=0,_=0,m=0,v=0;for(this.throughCheckResult||(this.throughCheckResult=new Array(4)),this.throughCheckResult[0]=0,this.throughCheckResult[1]=0,_=(o-t)/(i-e),m=o-_*i,h=i>e?1:-1,c=o>t?1:-1,n=e>>0,r=t>>0,a=i>>0,l=o>>0,u=a-n,u=(u^u>>31)-(u>>31),d=n,f=r,this.throughCheckResult[2]=d,this.throughCheckResult[3]=f,v=0;u>v;v++){for(d+=h,g=_*(h>0?d:d+1)+m,p=g>>0;f!=p;){if(f+=c,!s(d-h,f))return this.throughCheckResult;this.throughCheckResult[2]=d-h,this.throughCheckResult[3]=f}if(!s(d,p))return this.throughCheckResult;this.throughCheckResult[2]=d,this.throughCheckResult[3]=p}for(;f!=l;){if(f+=c,!s(d,f))return this.throughCheckResult;this.throughCheckResult[2]=d,this.throughCheckResult[3]=f}return this.throughCheckResult[0]=1,this.throughCheckResult},e.tileLine=function(e,t,i,o){var s=0,n=0,r=0,a=0,l=0,h=0,c=0,u=0,d=0,p=0,f=0,g=0,_=0,m=0;for(this.coords||(this.coords=[]),this.coords.length=0,g=(o-t)/(i-e),_=o-g*i,l=i>e?1:-1,h=o>t?1:-1,s=e>>0,n=t>>0,r=i>>0,a=o>>0,c=r-s,c=(c^c>>31)-(c>>31),this.coords[this.coords.length]=s,this.coords[this.coords.length]=n,u=s,p=n,m=0;c>m;m++){for(u+=l,f=g*(l>0?u:u+1)+_,d=f>>0;p!=d;)p+=h,this.coords[this.coords.length]=u-l,this.coords[this.coords.length]=p;this.coords[this.coords.length]=u,this.coords[this.coords.length]=d}for(;p!=a;)p+=h,this.coords[this.coords.length]=u,this.coords[this.coords.length]=p;return this.coords},e.getPointOnLine=function(e,t,i,o,s){var n=0,r=0,a=0,l=0;return a=i-e,l=o-t,n=Math.sqrt(a*a+l*l),r=n+s,[Math.round(e+a*r/n),Math.round(t+l*r/n)]},e.shortenPath=function(t,i,o,s){var n,r=t,a=i,l=o[o.length-2],h=o[o.length-1],c=0,u=0;o.length>=4&&(r=o[o.length-4],a=o[o.length-3]),c=l-r,u=h-a,c*c+u*u>s*s?(n=e.getPointOnLine(r,a,l,h,-s),o[o.length-2]=n[0],o[o.length-1]=n[1]):o.length-=2},e}();__reflect(BresenhamLine.prototype,"BresenhamLine"),window.BresenhamLine=BresenhamLine;var GuildFB=function(e){function t(){var t=e.call(this)||this;return t.bossTimer=1,t._gkDatas=[],t.fbNum=0,t.sweep=0,t.sweepNum=1,t.tongguan=0,t.nextFb=0,t.isMaxGK=0,t.maxName="",t.maxCareer=1,t.maxSex=0,t.maxNum=0,t.maxZhuwei=0,t.rewardNum=0,t.m_ReqWave=null,t.sysId=PackageID.GuildFB,t.regNetMsg(S2cProtocol.sc_guild_raid_actor_info,t.doGuildFBInfo),t.regNetMsg(S2cProtocol.sc_guild_raid_ranklist,t.doGuildFBRankInfo),t.regNetMsg(S2cProtocol.sc_guild_raid_ranktop,t.doGuildFBMaxGKInfo),t.regNetMsg(S2cProtocol.sc_guild_raid_stagerank,t.doGuildFBGKInfo),t.regNetMsg(S2cProtocol.sc_guild_raid_reward_pro,t.doGuildFBRewardInfo),t.regNetMsg(S2cProtocol.sc_guild_raid_starttime,t.postGuildFBBossInfo),t.regNetMsg(S2cProtocol.sc_guild_raid_overtime,t.postGuildFBBossTimerEndInfo),t.regNetMsg(S2cProtocol.sc_guild_raid_waveover,t.postGuildFBSweep),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getGkDatas=function(){return this._gkDatas},t.prototype.doGuildFBInfo=function(e){this.fbNum=e.stage,this.sweep=e.sweep?1:0,this.sweepNum=e.wave||0,this.tongguan=e.reward?1:0,this.zuwei=e.boost?1:0,this.nextFb=e.number,this.m_ReqWave=null,this.postGuildFubenInfo()},t.prototype.postGuildFubenInfo=function(){},t.prototype.doGuildFBRankInfo=function(e){this.rankDatas=[];for(var t=e.ranks.length,i=0;t>i;i++){var o=e.ranks[i];if(!(o.stage<1)){var s=new GuildFBRankInfo;s.rank=o.rank,s.name=o.name,s.guanka=o.stage,this.rankDatas.push(s)}}this.rankDatas.sort(function(e,t){return t.guanka-e.guanka});for(var n=0;n<this.rankDatas.length;++n)this.rankDatas[n].rank=n+1;this.postGuildFubenInfo()},t.prototype.doGuildFBMaxGKInfo=function(e){this.isMaxGK=null!=e.name?1:0,0!=this.isMaxGK&&(this.maxName=e.name,this.maxCareer=1,this.maxSex=0,this.maxNum=e.stage,this.maxZhuwei=e.boost),this.postGuildFubenInfo()},t.prototype.doGuildFBGKInfo=function(e){this._gkDatas=[];for(var t=0;t<e.ranks.length;++t)this._gkDatas.push(e.ranks[t].name);this.postGuildFubenInfo(),this.postGuildFubenRoleInfo()},t.prototype.postGuildFubenRoleInfo=function(){},t.prototype.doGuildFBRewardInfo=function(e){this.rewardNum=Math.floor(e.value/5),this.postGuildFubenInfo()},t.prototype.postGuildFBBossInfo=function(e){t.ins().bossGKNum=e.stage},t.prototype.postGuildFBBossTimerEndInfo=function(e){this.bossGKNum=e.stage,this.bossTimer=e.time},t.prototype.postGuildFBSweepEnd=function(e){},t.prototype.postGuildFBSweep=function(e){this.m_ReqWave=null,this.sweepNum=e.wave},t.prototype.sendGuildFBRankInfo=function(){var e=this.getBytes(2);this.sendToServer(e)},t.prototype.SendGetGuildFbInfo=function(){this.Rpc(C2sProtocol.cs_guild_raid_info)},t.prototype.sendGuildFBMaxGKInfo=function(){var e=this.getBytes(3);this.sendToServer(e)},t.prototype.sendGuildFBGKRoleInfo=function(e){var t=new Sproto.cs_guild_raid_daily_request;t.index=e,this.Rpc(C2sProtocol.cs_guild_raid_daily,t)},t.prototype.sendGuildFBChallange=function(){this.Rpc(C2sProtocol.cs_guild_raid_attack)},t.prototype.sendGuildFBSweep=function(){var e=this.sweepNum+1;if(this.m_ReqWave==e)return void console.log("正在扫荡 "+e);var t=new Sproto.cs_guild_raid_sweep_request;t.wave=e,this.Rpc(C2sProtocol.cs_guild_raid_sweep,t)},t.prototype.sendGuildFBZhuwei=function(){this.Rpc(C2sProtocol.cs_guild_raid_boost)},t.prototype.sendGuildFBReward=function(){this.Rpc(C2sProtocol.cs_guild_raid_reward)},t.prototype.hasbtn=function(){return GameServer.serverOpenDay>0&&(0==this.sweep&&this.fbNum>0||0==this.tongguan&&this.rewardNum>0)},Object.defineProperty(t.prototype,"bossTimerEnd",{get:function(){return this.bossTimer},enumerable:!0,configurable:!0}),t}(BaseSystem);__reflect(GuildFB.prototype,"GuildFB"),MessageCenter.compile(GuildFB),window.GuildFB=GuildFB;var GuildRobber=function(e){function t(){var t=e.call(this)||this;return t.robberNum=0,t._robberList=[],t.robberChanllge=0,t.sysId=PackageID.GuildRobber,t.regNetMsg(S2cProtocol.sc_guild_robber_info,t.doGuildRobberInfo),t.regNetMsg(S2cProtocol.sc_guild_robber_actor_info,t.doGuildRobberChangller),t.regNetMsg(S2cProtocol.sc_guild_robber_notice,t._DoRobberNotice),t.regNetMsg(S2cProtocol.sc_guild_robber_update,t._DoRobberUpdate),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.Init=function(){this._robberList=[];for(var e=GlobalConfig.robberfbconfig,t=1,i=0,o=e.robberList;i<o.length;i++){var s=(o[i],new RobberStartInfo);s.robberStart=GuildRobberState.DEAD,s.pos=t,s.robberType=e.robberList[t-1],this._robberList[s.pos-1]=s,++t}},t.prototype.getRobberList=function(e){return void 0===e&&(e=-1),-1==e?this._robberList:this._robberList[e]},t.prototype.GetRobberList=function(){return this._robberList},t.prototype.doGuildRobberInfo=function(e){this._robberList=[];for(var t=GlobalConfig.robberfbconfig,i=0,o=e.robbers;i<o.length;i++){var s=o[i],n=new RobberStartInfo;if(n.robberStart=s.status,n.pos=s.pos,n.robberType=t.robberList[s.pos-1],this._robberList[n.pos-1]=n,void 0==n.robberStart){var r="=>S2C公会强盗信息索引=>"+(n.pos-1)+"=>robberStart状态为NULL";Main.errorBack(r)}}this.robberNum=this._robberList.length,this.postGuildRobberInfo()},t.prototype.postGuildRobberInfo=function(){},t.prototype.doGuildRobberChangller=function(e){this.robberChanllge=e.times||0},t.prototype.sendRobberInfo=function(){this.Rpc(C2sProtocol.cs_guild_robber_info)},t.prototype.sendRobberChanger=function(e){var t=new Sproto.cs_guild_robber_attack_request;t.pos=e,this.Rpc(C2sProtocol.cs_guild_robber_attack,t)},t.prototype.GetRobberNotice=function(){return this.m_RobberNotice},t.prototype._DoRobberNotice=function(e){this.m_RobberNotice=e,GameGlobal.MessageCenter.dispatch(MessageDef.GUILD_ROBBER_NOTICE)},t.prototype._DoRobberUpdate=function(e){var t=this._robberList[e.pos-1];if(t)t.robberStart=e.status;else{var i=GlobalConfig.robberfbconfig,o=new RobberStartInfo;o.robberStart=e.status,o.pos=e.pos,o.robberType=i.robberList[e.pos-1],this._robberList[e.pos-1]=o}this.postGuildRobberInfo()},t.prototype.hasbtn=function(){if(null==this._robberList||0==this._robberList.length)return!1;for(var e=!1,t=0,i=this._robberList;t<i.length;t++){var o=i[t];if(o&&o.robberStart==GuildRobberState.NORMAL){e=!0;break}}return e?null==GlobalConfig.robberfbconfig?!1:GlobalConfig.robberfbconfig.challengeMax>this.robberChanllge:!1},t.prototype.GetRobTotal=function(){return this._robberList.length},t.prototype.GetRobDeadNum=function(){for(var e=0,t=0,i=this._robberList;t<i.length;t++){var o=i[t];o&&o.robberStart==GuildRobberState.DEAD&&++e}return e},t}(BaseSystem);__reflect(GuildRobber.prototype,"GuildRobber"),MessageCenter.compile(GuildRobber),window.GuildRobber=GuildRobber;var GuildStore=function(e){function t(){var t=e.call(this)||this;return t.m_GuildStoreLv=0,t.guildStoreNum=0,t._recordInfoAry=[],t.sysId=PackageID.GuildStore,t.regNetMsg(S2cProtocol.sc_guildshop_info,t.postGuildStoreInfo),t.regNetMsg(S2cProtocol.sc_guildshop_record,t.postGuildStoreBoxInfo),t.regNetMsg(S2cProtocol.sc_guildshop_open_ret,t.postGuildStoreBox),t}return __extends(t,e),Object.defineProperty(t.prototype,"guildStoreLv",{get:function(){return this.m_GuildStoreLv},enumerable:!0,configurable:!0}),t.ins=function(){return e.ins.call(this)},t.prototype.getRecordInfoAry=function(e){return void 0===e&&(e=-1),this._recordInfoAry[e]},t.prototype.GetRecordInfos=function(){return this._recordInfoAry},t.prototype.getGuildStoreItemData=function(){return this._guildStoreItemData},t.prototype.postGuildStoreInfo=function(e){this.m_GuildStoreLv=e.level,this.guildStoreNum=e.leftCount},t.prototype.postGuildStoreBoxInfo=function(e){this._recordInfoAry=[];for(var t=0;t<e.records.length;t++){var i=new GuildStoreRecordInfo,o=e.records[t];i.times=o.time,i.roleName=o.name,i.itemId=o.itemid,this._recordInfoAry.push(i)}this._recordInfoAry.sort(function(e,t){return t.times-e.times})},t.prototype.postGuildStoreBox=function(e){this._guildStoreItemData=new GuildStoreItemData,this._guildStoreItemData.itemId=e.itemid,this._guildStoreItemData.num=e.count,this.guildStoreNum-=1},t.prototype.getGuildStoreInfo=function(){this.Rpc(C2sProtocol.cs_guildshop_getinfo)},t.prototype.sendGuildStoreBoxInfo=function(){this.Rpc(C2sProtocol.cs_guildshop_getrecord)},t.prototype.sendGuildStoreBox=function(){this.Rpc(C2sProtocol.cs_guildshop_open)},t}(BaseSystem);__reflect(GuildStore.prototype,"GuildStore"),MessageCenter.compile(GuildStore),window.GuildStore=GuildStore;var BaseSpriteLayer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchEnabled=!1,t}return __extends(t,e),t}(egret.DisplayObjectContainer);__reflect(BaseSpriteLayer.prototype,"BaseSpriteLayer"),window.BaseSpriteLayer=BaseSpriteLayer;var GuildLanguage=function(){function e(){}return e.guildOffice=function(e){var t=[GlobalConfig.jifengTiaoyueLg.st100934,GlobalConfig.jifengTiaoyueLg.st101504,GlobalConfig.jifengTiaoyueLg.st101505,GlobalConfig.jifengTiaoyueLg.st101506,GlobalConfig.jifengTiaoyueLg.st101507,GlobalConfig.jifengTiaoyueLg.st101508,GlobalConfig.jifengTiaoyueLg.st101036];return t[e]},e.guildOfficeColor=function(e){var t=["d1c3a8","00c832","1694ec","8e2abc","f4b12a","bf7d00","bf7d00"];return t[e]},e}();__reflect(GuildLanguage.prototype,"GuildLanguage"),window.GuildLanguage=GuildLanguage;var GuildOffice;!function(e){e[e.GUILD_MEMBER=0]="GUILD_MEMBER",e[e.GUILD_JINGYING=1]="GUILD_JINGYING",e[e.GUILD_TANGZHU=2]="GUILD_TANGZHU",e[e.GUILD_HUFA=3]="GUILD_HUFA",e[e.GUILD_ZHANGLAO=4]="GUILD_ZHANGLAO",e[e.GUILD_FUBANGZHU=5]="GUILD_FUBANGZHU",e[e.GUILD_BANGZHU=6]="GUILD_BANGZHU"}(GuildOffice||(GuildOffice={}));var GuildApplyInfo=function(){function e(){}return e}();__reflect(GuildApplyInfo.prototype,"GuildApplyInfo"),window.GuildApplyInfo=GuildApplyInfo;var GuildFBRankInfo=function(){function e(){}return e}();__reflect(GuildFBRankInfo.prototype,"GuildFBRankInfo"),window.GuildFBRankInfo=GuildFBRankInfo;var GuildListInfo=function(){function e(){}return e}();__reflect(GuildListInfo.prototype,"GuildListInfo"),window.GuildListInfo=GuildListInfo;var GuildMemberInfo=function(){function e(){}return e}();__reflect(GuildMemberInfo.prototype,"GuildMemberInfo"),window.GuildMemberInfo=GuildMemberInfo;var GuildMessageInfo=function(){function e(){}return e.prototype.parserMessage=function(e){this.type=e.type,this.content=e.content,1==this.type&&(this.roleId=e.actorid,this.name=e.name,this.job=e.job,this.sex=e.sex,this.vipLevel=e.vip_level,this.monthCard=e.monthcard,this.superMonthCard=e.monthcard_super,this.office=e.office,this.time=e.time)},e}();__reflect(GuildMessageInfo.prototype,"GuildMessageInfo"),window.GuildMessageInfo=GuildMessageInfo;var GuildRoleSkillInfo=function(){function e(){this.guildSkillInfo=[],this.practiceSkillInfo=[]}return e.prototype.GetSkillInfo=function(e){return e==GuildSkillType.NORMAL?this.guildSkillInfo:this.practiceSkillInfo},e.prototype.GetSkillInfoByIndex=function(e,t){var i=this.GetSkillInfo(e);return i?i[t]:null},e}();__reflect(GuildRoleSkillInfo.prototype,"GuildRoleSkillInfo"),window.GuildRoleSkillInfo=GuildRoleSkillInfo;var GuildSkillInfo=function(){function e(){this.level=0,this.exp=0}return e}();__reflect(GuildSkillInfo.prototype,"GuildSkillInfo"),window.GuildSkillInfo=GuildSkillInfo;var GuildStoreItemData=function(){function e(){}return e}();__reflect(GuildStoreItemData.prototype,"GuildStoreItemData"),window.GuildStoreItemData=GuildStoreItemData;var GuildStoreRecordInfo=function(){function e(){}return e}();__reflect(GuildStoreRecordInfo.prototype,"GuildStoreRecordInfo"),window.GuildStoreRecordInfo=GuildStoreRecordInfo;var GuildTaskInfo=function(){function e(){}return e}();__reflect(GuildTaskInfo.prototype,"GuildTaskInfo"),window.GuildTaskInfo=GuildTaskInfo;var RobberStartInfo=function(){function e(){}return e}();__reflect(RobberStartInfo.prototype,"RobberStartInfo"),window.RobberStartInfo=RobberStartInfo;var GuildActityItemRender=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.goBtn0.label=GlobalConfig.jifengTiaoyueLg.st100976},t.prototype.onTap=function(e){switch(e){case this.goBtn0:this.conBtnOnCLick()}},t.prototype.conBtnOnCLick=function(){var e=this.data;if(1==e.id){if(GuildRobber.ins().GetRobTotal()-GuildRobber.ins().GetRobDeadNum()<=0)return void UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st101792+"|");ViewManager.ins().close(GuildActivityWin)}else 2==e.id&&(ViewManager.ins().close(GuildActivityWin),GuildBoss.ins().IsOpen()?ViewManager.ins().open(GuildBossReadyPanel):ViewManager.ins().open(GuildBossCallPanel))},t.prototype._UpateCallNum=function(e,t){this.callNumLabel.text=e+"/"+t},t.prototype.dataChanged=function(){var e=this.data;e&&(e.id&&e.context&&(this.nameLab.textFlow=(new egret.HtmlTextParser).parser(e.context)),1==e.id&&(this.descLab.text=GlobalConfig.jifengTiaoyueLg.st101793+"："+(GuildRobber.ins().GetRobTotal()-GuildRobber.ins().GetRobDeadNum())+"/"+GuildRobber.ins().GetRobTotal(),this.label.text=GlobalConfig.robberfbconfig.challengeMax-GuildRobber.ins().robberChanllge+"/"+GlobalConfig.robberfbconfig.challengeMax,this.callNumLabel.visible=!1),this._UpateCallNum(GuildBoss.ins().times(),GuildBoss.ins().GetMaxCallTimes()),2==e.id&&(this.callNumLabel.visible=this.descLab.visible=!1,this.label.text=this.callNumLabel.text))},t}(eui.ItemRenderer);__reflect(GuildActityItemRender.prototype,"GuildActityItemRender"),window.GuildActityItemRender=GuildActityItemRender;var GuildActityPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101005,t.skinName="GuildActitySkin",t.name=GlobalConfig.jifengTiaoyueLg.st101005,t.list.itemRenderer=GuildActityItemRender,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.updateData(),this.list.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onListTouch,this)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.list.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onListTouch,this)},t.prototype.updateData=function(){var e=[],t=GlobalConfig.ins("guildActivityConfig");for(var i in t){var o=t[i];e.push(o)}this.list.dataProvider=new eui.ArrayCollection(e)},t.prototype.onListTouch=function(e){if(e.target instanceof eui.Button){var t=e.target.parent.parent;t.onTap(e.target)}},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(GuildActityPanel.prototype,"GuildActityPanel",["ICommonWindowTitle"]),window.GuildActityPanel=GuildActityPanel;var GuildActivityWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.commonWindowBg.AddChildStack(new GuildTaskPanel),this.commonWindowBg.AddChildStack(new GuildFubenWin),this.commonWindowBg.AddChildStack(new GuildActityPanel),GuildFB.ins().SendGetGuildFbInfo()},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];MessageCenter.addListener(GuildFB.ins().postGuildFubenInfo,this.updateRedpoint,this),MessageCenter.addListener(GuildFB.ins().postGuildFBSweep,this.updateRedpoint,this),MessageCenter.addListener(Guild.ins().postGuildTaskUpdate,this.updateRedpoint,this),this.updateRedpoint(),this.commonWindowBg.OnAdded(this,e[0]?e[0]:0)},t.prototype.updateRedpoint=function(){this.commonWindowBg.ShowTalRedPoint(0,Guild.ins().IsTaskRedPoint()),this.commonWindowBg.ShowTalRedPoint(1,GuildFB.ins().hasbtn())},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.OnOpenIndex=function(e){return 1==e&&GameServer.serverOpenDay<GlobalConfig.guildfbconfig.openDay-1?(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100974),!1):!0},t}(BaseEuiPanel);__reflect(GuildActivityWin.prototype,"GuildActivityWin",["ICommonWindow"]),ViewManager.ins().reg(GuildActivityWin,LayerManager.UI_Main),window.GuildActivityWin=GuildActivityWin;var GuildAppltListItemRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="MemberApplyItemSkin",t.ok.label=GlobalConfig.jifengTiaoyueLg.st101874,t.cancel.label=GlobalConfig.jifengTiaoyueLg.st101873,t}return __extends(t,e),t.prototype.onTap=function(e){switch(e){case this.ok:var t=GameServer.serverMergeTime>0?GlobalConfig.ins("GuildConfig").maxHeFuMember[Guild.ins().guildLv-1]:GlobalConfig.ins("GuildConfig").maxMember[Guild.ins().guildLv-1];if(Guild.ins().getMemberNum()>=t)return void UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st101794+"|");Guild.ins().sendProcessJoin(this.data.roleID,1),this.removeOne();break;case this.cancel:Guild.ins().sendProcessJoin(this.data.roleID,0),this.removeOne()}},t.prototype.removeOne=function(){for(var e=Guild.ins().applyPlayers,t=0;t<e.length;t++){var i=e[t];i.roleID==this.data.roleID&&(e.splice(t,1),Guild.ins().hasApply=e.length>0,Guild.ins().postGuildApplysInfos())}},t.prototype.dataChanged=function(){if(this.data instanceof GuildApplyInfo){var e=this.data;this.nameLab.Set(e.name,e.vipLevel,!1,!1),this.attack.text=GlobalConfig.jifengTiaoyueLg.st100809+CommonUtils.overLength(e.attack),UIHelper.SetHead(this.myFace,e.job,e.sex)}},t}(eui.ItemRenderer);__reflect(GuildAppltListItemRender.prototype,"GuildAppltListItemRender"),window.GuildAppltListItemRender=GuildAppltListItemRender;var GuildApplyListWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MemberApplySkin",this.list.itemRenderer=GuildAppltListItemRender,this.attrNum.restrict="0-9",this.attrNum.maxChars=8,this.noLabel.text=GlobalConfig.jifengTiaoyueLg.st100950,this.oneKeyOk.label=GlobalConfig.jifengTiaoyueLg.st100952,this.oneKeyCancel.label=GlobalConfig.jifengTiaoyueLg.st100953,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100951},t.prototype.open=function(){this.m_bg.init("GuildApplyListWin",GlobalConfig.jifengTiaoyueLg.st100948);for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.list.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onListTouch,this),MessageCenter.addListener(Guild.ins().postGuildApplysInfos,this.updateList,this),Guild.ins().sendApplyInfos(),this.checkBoxs.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.attrNum.addEventListener(egret.Event.CHANGE,this.onTxtChange,this),this.checkBoxs.selected=1==Guild.ins().isAuto,this.attrNum.text=Guild.ins().attrLimit+"",this.AddClick(this.oneKeyOk,this._OnClick),this.AddClick(this.oneKeyCancel,this._OnClick)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.oneKeyOk:var t=Guild.ins().applyPlayers.length;if(Guild.ins().getMemberNum()+t>Guild.ins().GetMaxMember())return void UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st100949);for(var i=0,o=Guild.ins().applyPlayers;i<o.length;i++){var s=o[i];Guild.ins().sendProcessJoin(s.roleID,1)}Guild.ins().applyPlayers=[],Guild.ins().hasApply=!1,Guild.ins().postGuildApplysInfos();break;case this.oneKeyCancel:for(var n=0,r=Guild.ins().applyPlayers;n<r.length;n++){var s=r[n];Guild.ins().sendProcessJoin(s.roleID,0)}Guild.ins().applyPlayers=[],Guild.ins().hasApply=!1,Guild.ins().postGuildApplysInfos()}},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.list.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onListTouch,this),Guild.ins().sendGuildMembers(),this.checkBoxs.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.attrNum.removeEventListener(egret.Event.CHANGE,this.onTxtChange,this),MessageCenter.ins().removeAll(this)},t.prototype.onTxtChange=function(e){Guild.ins().sendAddGuildLimit(this.checkBoxs.selected?1:0,parseInt(this.attrNum.text))},t.prototype.updateList=function(){var e=Guild.ins().applyPlayers;e.sort(this.sort),this.list.dataProvider=new eui.ArrayCollection(e),this.noLabel.visible=e.length<1},t.prototype._OnClose=function(e){ViewManager.ins().close(this)},t.prototype.onListTouch=function(e){if(e.target instanceof eui.Button){var t=e.target.parent;t.onTap(e.target)}},t.prototype.onTap=function(e){switch(e.currentTarget){case this.checkBoxs:this.onTxtChange(null)}},t.prototype.sort=function(e,t){return e.attack>t.attack?-1:e.attack<t.attack?1:0},t}(BaseEuiPanel);__reflect(GuildApplyListWin.prototype,"GuildApplyListWin"),ViewManager.ins().reg(GuildApplyListWin,LayerManager.UI_Popup),window.GuildApplyListWin=GuildApplyListWin;var GuildApplyWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100896,t}return __extends(t,e),t.prototype.UpdateContent=function(){},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GuildApplySkin",this.list.itemRenderer=GuildListItemRender,this.dataArr=new eui.ArrayCollection([]),this.list.dataProvider=this.dataArr,this.noGuild.text=GlobalConfig.jifengTiaoyueLg.st100897,this.createBtn.label=GlobalConfig.jifengTiaoyueLg.st100906},t.openCheck=function(){return!0},t.prototype.open=function(){this.commonWindowBg.OnAdded(this),this.createBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.list.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onListTouch,this),MessageCenter.addListener(Guild.ins().postGuildList,this.updateList,this),MessageCenter.addListener(Guild.ins().postGuildJoinResult,this.updateList,this),Guild.ins().sendGuildList()},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),this.createBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.list.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onListTouch,this),MessageCenter.ins().removeAll(this)},t.prototype.onListTouch=function(e){if(e.target instanceof eui.Button){var t=e.target.parent;t.onTap()}},t.prototype.updateList=function(){this.noGuild.visible=0==Guild.ins().guildListInfos.length,this.dataArr.replaceAll(Guild.ins().guildListInfos)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.createBtn:ViewManager.ins().open(GuildCreateWin)}},t.prototype.destoryView=function(){e.prototype.destoryView.call(this);for(var t=0;t<this.list.numElements;t++)this.list.getElementAt(t)&&this.list.getElementAt(t).destruct()},t}(BaseEuiPanel);__reflect(GuildApplyWin.prototype,"GuildApplyWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(GuildApplyWin,LayerManager.UI_Main),window.GuildApplyWin=GuildApplyWin;var GuildBuildItemRender=function(e){function t(){var t=e.call(this)||this;return t._maxLevel=0,t._curLevel=0,t._nextMoney=0,t.skinName="GuildManageItemSkin",t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100955,t.upBtn.label=GlobalConfig.jifengTiaoyueLg.st100296,t}return __extends(t,e),t.prototype.onTap=function(e){switch(e){case this.upBtn:var t=this.data;if(Guild.ins().myOffice<GuildOffice.GUILD_FUBANGZHU)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100954);if(t==GuildBuilding.GUILD_HALL&&this._curLevel>=this._maxLevel)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100327);if(t!=GuildBuilding.GUILD_HALL&&this._curLevel>=Guild.ins().guildLv)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100956);if(Guild.ins().money<this._nextMoney)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100957);Guild.ins().sendUpBuilding(t)}},t.prototype.dataChanged=function(){var e=this.data;this._curLevel=Guild.ins().getBuildingLevels(e-1);var t=GlobalConfig.ins("GuildLevelConfig")[e],i=null,o=null;for(var s in t)if(t.hasOwnProperty(s)){var n=t[s];this._maxLevel=n.level>this._maxLevel?n.level:this._maxLevel,n.level==this._curLevel&&(i=n),n.level==this._curLevel+1&&(o=n)}if(i||o||e==GuildBuilding.GUILD_LIANGONGFANG){var r=(null==this._curLevel?0:this._curLevel)+GlobalConfig.jifengTiaoyueLg.st100093+GlobalConfig.ins("GuildConfig").buildingNames[e-1];this.upLevelLab.visible=e!=GuildBuilding.GUILD_HALL,null==this._curLevel||this._curLevel<this._maxLevel?(this._nextMoney=o.upFund,this.upLevelLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101533,[this._curLevel+1]),this.bar.maximum=o.upFund,this.bar.value=Guild.ins().money):(this.upLevelLab.text=GlobalConfig.jifengTiaoyueLg.st100327,i?(this.bar.maximum=i.upFund,this.bar.value=Guild.ins().money):(this.bar.value=this.bar.maximum=1,this.bar.labelDisplay.text=GlobalConfig.jifengTiaoyueLg.st100020)),r+=" "+GlobalConfig.ins("GuildConfig").buildingTips[e-1],this.nameLab.text=r}},t}(eui.ItemRenderer);__reflect(GuildBuildItemRender.prototype,"GuildBuildItemRender"),window.GuildBuildItemRender=GuildBuildItemRender;var GuildConWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GuildConSkin",this.desc0.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100940,[GlobalConfig.ins("GuildDonateConfig")[1].count]),this.desc1.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100941,[GlobalConfig.ins("GuildDonateConfig")[2].count]),this.info0.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100942,[GlobalConfig.ins("GuildDonateConfig")[1].awardContri,GlobalConfig.ins("GuildDonateConfig")[1].awardFund]),this.info1.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100942,[GlobalConfig.ins("GuildDonateConfig")[2].awardContri,GlobalConfig.ins("GuildDonateConfig")[2].awardFund]),this.btn1.label=GlobalConfig.jifengTiaoyueLg.st100931,this.btn0.label=GlobalConfig.jifengTiaoyueLg.st100931},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return!0},t.prototype.update=function(){var e=GlobalConfig.ins("GuildDonateConfig")[1].dayCount[UserVip.ins().lv],t=GlobalConfig.ins("GuildDonateConfig")[1].dayCount[UserVip.ins().lv+1];Guild.ins().GetSurplusConCount(0)<=0?t&&t-e>0?(this.count0.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100943,[UserVip.ins().lv+1,t-e])),this.btn0.label=0==UserVip.ins().lv?GlobalConfig.jifengTiaoyueLg.st100944:GlobalConfig.jifengTiaoyueLg.st100945):(this.count0.text=Guild.ins().GetConCount(0)+"/"+Guild.ins().GetMaxConCount(0),this.btn0.label=GlobalConfig.jifengTiaoyueLg.st100931):this.count0.text=Guild.ins().GetConCount(0)+"/"+Guild.ins().GetMaxConCount(0),this.count1.text=Guild.ins().GetConCount(1)+"/"+Guild.ins().GetMaxConCount(1)},t.prototype.open=function(){this.m_bg.init("GuildConWin",GlobalConfig.jifengTiaoyueLg.st100946);for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.btn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.addListener(Guild.ins().postConCount,this.update,this),Guild.ins().sendConCount(),0==UserVip.ins().lv?this.btn0.label=GlobalConfig.jifengTiaoyueLg.st100944:this.btn0.label=GlobalConfig.jifengTiaoyueLg.st100931,this.btn0.visible=!WxSdk.ins().isHidePay(),this.count0.visible=!WxSdk.ins().isHidePay()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.btn0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.btn0:1==t.DonateYb()&&(ViewManager.ins().close(this),ViewManager.ins().open(VipWin));break;case this.btn1:Guild.ins().GetSurplusConCount(1)<=0?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100947):GameLogic.ins().actorModel.gold>GlobalConfig.ins("GuildDonateConfig")[2].count?Guild.ins().sendCon(2):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100222)}},t.DonateYb=function(){if(Guild.ins().GetSurplusConCount(0)<=0){var e=GlobalConfig.ins("GuildDonateConfig")[1].dayCount,t=UserVip.ins().lv,i=e[t],o=e[t+1];if(o&&o-i>0)return 1;UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100947)}else GameLogic.ins().actorModel.yb>GlobalConfig.ins("GuildDonateConfig")[1].count?Guild.ins().sendCon(1):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008);return 0},t}(BaseEuiPanel);__reflect(GuildConWin.prototype,"GuildConWin"),ViewManager.ins().reg(GuildConWin,LayerManager.UI_Popup),window.GuildConWin=GuildConWin;var GuildCreateWin=function(e){function t(){var t=e.call(this)||this;return t.selectLevel=1,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GuildBuildSkin";var t=this.formatLab(1),i=this.formatLab(2);this.leftLab.textFlow=(new egret.HtmlTextParser).parser(t),this.rightLab.textFlow=(new egret.HtmlTextParser).parser(i),this.textInput.maxChars=6,this.time.text=GlobalConfig.jifengTiaoyueLg.st100907,this.okBtn.label=GlobalConfig.jifengTiaoyueLg.st100908},t.prototype.changeSelect=function(e){this.selectLevel=e,this.selectBmp.horizontalCenter=1==this.selectLevel?this.leftLab.horizontalCenter:this.rightLab.horizontalCenter},t.prototype.formatLab=function(e){var t=GlobalConfig.ins("GuildCreateConfig"),i=GlobalConfig.ins("GuildConfig"),o=GameServer.serverMergeTime>0?i.maxHeFuMember[e-1]:i.maxMember[e-1],s=t[e].vipLv,n=s>0?"<font color='#535557' size='16'>(VIP"+s+GlobalConfig.jifengTiaoyueLg.st101795+")</font>":"",r=0==t[e].award?"\n":LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100909,[t[e].award.toString()]),a=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100910,[t[e].level.toString()])+"\n"+n+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100911,[o])+r+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100912,[t[e].moneyCount.toString()]),l="<font color='#535557' size='16'>"+a+"</font>";
return l},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return!0},t.prototype.open=function(){this.m_bg.init("GuildCreateWin",GlobalConfig.jifengTiaoyueLg.st100906),this.leftLab.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.rightLab.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.okBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.close=function(){this.leftLab.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.rightLab.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.okBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.onTap=function(e){var t=this;switch(e.currentTarget){case this.okBtn:var i=GlobalConfig.ins("GuildCreateConfig"),o=i[this.selectLevel],s=i[o.level].vipLv;if(UserVip.ins().lv<s)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100913);""==this.textInput.text?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100914):GameLogic.ins().actorModel.yb>o.moneyCount?WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100915,[o.moneyCount,o.level,this.textInput.text]),function(){Guild.ins().sendGuildCreate(t.selectLevel,t.textInput.text)},this):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008);break;case this.leftLab:this.changeSelect(1);break;case this.rightLab:this.changeSelect(2)}},t}(BaseEuiPanel);__reflect(GuildCreateWin.prototype,"GuildCreateWin"),ViewManager.ins().reg(GuildCreateWin,LayerManager.UI_Popup),window.GuildCreateWin=GuildCreateWin;var GuildEventItenRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuildEventItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){if("string"==typeof this.data){var e=this.data;e&&""!=e&&(this.info.textFlow=(new egret.HtmlTextParser).parser(e))}},t}(eui.ItemRenderer);__reflect(GuildEventItenRender.prototype,"GuildEventItenRender"),window.GuildEventItenRender=GuildEventItenRender;var GuildFBRankItemRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuildFBItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.data instanceof GuildFBRankInfo&&(this.rankinfo=this.data,this.rank.text=this.rankinfo.rank+"",this.rolename.text=this.rankinfo.name+"",this.guanka.text=this.rankinfo.guanka+GlobalConfig.jifengTiaoyueLg.st100369)},t}(eui.ItemRenderer);__reflect(GuildFBRankItemRender.prototype,"GuildFBRankItemRender"),window.GuildFBRankItemRender=GuildFBRankItemRender;var GuildFBRewardInfoWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GuildFbRewardSkin"},t.prototype.open=function(){this.m_bg.init("MailDetailedWin",GlobalConfig.jifengTiaoyueLg.st101236);for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.addListener(GuildFB.ins().postGuildFubenInfo,this.updateInfo,this),this.info=e[0],this.updateInfo()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.btn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.updateInfo=function(){var e=GuildFB.ins().getGkDatas();if(e)for(var t=0;5>t;t++)e.length<=t?this["label"+(t+1)].text=GlobalConfig.jifengTiaoyueLg.st100378:this["label"+(t+1)].text=e[t]},t.prototype.onTap=function(e){switch(e.currentTarget){case this.btn1:WarnWin.show(this.info.tips1,function(){},this);break;case this.btn2:WarnWin.show(this.info.tips2,function(){},this)}},t}(BaseEuiPanel);__reflect(GuildFBRewardInfoWin.prototype,"GuildFBRewardInfoWin"),ViewManager.ins().reg(GuildFBRewardInfoWin,LayerManager.UI_Popup),window.GuildFBRewardInfoWin=GuildFBRewardInfoWin;var GuildFBRewardItemRender=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.skinName="GuildFBRewardItemSkin",this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.dataChanged=function(){var e=this.data;this.info=e.info;var t=e.id;this.label.text=this.info.wave+GlobalConfig.jifengTiaoyueLg.st101796,t>GuildFB.ins().rewardNum?this.btn.enabled=!1:this.btn.enabled=!0},t.prototype.onTap=function(e){GuildFB.ins().sendGuildFBGKRoleInfo(this.info.id),ViewManager.ins().open(GuildFBRewardInfoWin,this.info)},t}(eui.ItemRenderer);__reflect(GuildFBRewardItemRender.prototype,"GuildFBRewardItemRender"),window.GuildFBRewardItemRender=GuildFBRewardItemRender;var GuildFubenWin=function(e){function t(){var t=e.call(this)||this;return t.tarValue=0,t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100980,t.name=GlobalConfig.jifengTiaoyueLg.st100980,t.skinName="GuildFubenSkin",GuildFB.ins().sendGuildFBRankInfo(),GuildFB.ins().sendGuildFBMaxGKInfo(),t.list.itemRenderer=GuildFBRankItemRender,t.bossmc=new MovieClip,t.bossmc.x=t.groupBoss.width/2,t.bossmc.y=t.groupBoss.height/2,t.bossmc.scaleX=-1,t.bossmc.scaleY=1,t.bossmc.touchEnabled=!1,t.groupBoss.addChild(t.bossmc),t.challage.label=GlobalConfig.jifengTiaoyueLg.st100046,t.zhuwei.label=GlobalConfig.jifengTiaoyueLg.st101003,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101004,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100380,t.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100992,t.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st101004,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.challage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sweepBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.zhuwei.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.zhuwei0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.addListener(GuildFB.ins().postGuildFubenInfo,this.updateData,this),MessageCenter.addListener(GuildFB.ins().postGuildFBSweep,this._DoGuildFBSweep,this),this.updateData(),GuildFB.ins().sendGuildFBRankInfo(),GuildFB.ins().sendGuildFBMaxGKInfo()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.challage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sweepBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.zhuwei.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.zhuwei0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this)},t.prototype._DoGuildFBSweep=function(){this.starSaoDang()},t.prototype._UpdateRedPoint0=function(){return GuildFB.ins().sweep>=1||GuildFB.ins().fbNum==GuildFB.ins().sweepNum?(this.sweepBtn.enabled=!1,this.redPoint0.visible=!1,void(this.sweepBtn.label=GlobalConfig.jifengTiaoyueLg.st100352)):(this.sweepBtn.enabled=!0,void(GuildFB.ins().fbNum>0&&(this.redPoint0.visible=!0)))},t.prototype.updateData=function(){this.redPoint0.visible=!1,this.redPoint2.visible=!1,GuildFB.ins().fbNum>=300?(this.guanka.text=GlobalConfig.jifengTiaoyueLg.st100991,this.reward.visible=!1):this.guanka.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100390,[GuildFB.ins().fbNum+1]),this._UpdateRedPoint0(),GuildFB.ins().tongguan>=1?(this.zhuwei0.enabled=!1,this.zhuwei0.label=GlobalConfig.jifengTiaoyueLg.st100981,this.redPoint2.visible=!1):(this.zhuwei0.enabled=!0,this.zhuwei0.label=GlobalConfig.jifengTiaoyueLg.st100982,0!=GuildFB.ins().rewardNum&&(this.redPoint2.visible=!0)),GuildFB.ins().zuwei>=1&&(this.zhuwei.enabled=!1),this.roleNum.text=GlobalConfig.jifengTiaoyueLg.st100983+GuildFB.ins().nextFb;var e=GuildFB.ins().nextFb*GlobalConfig.guildfbconfig.attrParam,t=100*(e>GlobalConfig.guildfbconfig.maxAttr?GlobalConfig.guildfbconfig.maxAttr:e);this.monstInfo.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100984,[t>>0]),this.recordka.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100985,[GuildFB.ins().fbNum]),this.everydaySweep.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100986,[GuildFB.ins().sweep]);var i="";if(GlobalConfig.ins("guildfbAwardConfig")[GuildFB.ins().fbNum+2]&&(i=GlobalConfig.ins("guildfbAwardConfig")[GuildFB.ins().fbNum+2].monid),null!=i&&""!=i&&(i=GlobalConfig.monstersConfig[i].avatar,this.bossmc.loadUrl(ResDataPath.GetMonsterBodyPath(i+"_3s"),!0,-1)),0==GuildFB.ins().isMaxGK)this.rolename.text=GlobalConfig.jifengTiaoyueLg.st100378,this.tongguanrecord.text=GlobalConfig.jifengTiaoyueLg.st100987,this.cheeringeffect.text=GlobalConfig.jifengTiaoyueLg.st100988;else{this.rolename.text=GuildFB.ins().maxName,this.tongguanrecord.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100989,[GuildFB.ins().maxNum]));var o=GuildFB.ins().maxZhuwei*GlobalConfig.guildfbconfig.cheerParam,s=100*(o>GlobalConfig.guildfbconfig.maxCheer?GlobalConfig.guildfbconfig.maxCheer:o);this.cheeringeffect.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100990,[s>>0]))}this.list.dataProvider=new eui.ArrayCollection(GuildFB.ins().rankDatas);var n=[];for(var r in GlobalConfig.ins("guildfbDayAwardConfig")){var a=new Object;a.id=r,a.info=GlobalConfig.ins("guildfbDayAwardConfig")[r],n.push(a)}var l;for(var h in GlobalConfig.ins("guildfbAwardConfig"))GuildFB.ins().fbNum+1==GlobalConfig.ins("guildfbAwardConfig")[h].id&&(l=GlobalConfig.ins("guildfbAwardConfig")[h].waveAward);void 0!=l&&(this.reward.data=l,this.reward.isShowName(!1))},t.prototype.starSaoDang=function(){GuildFB.ins().fbNum-GuildFB.ins().sweepNum>0&&UserBag.ins().getSurplusCount()>0&&(this.sweepBtn.label=GlobalConfig.jifengTiaoyueLg.st100350,GuildFB.ins().sendGuildFBSweep()),this._UpdateRedPoint0()},t.prototype.onTap=function(e){var t=this;switch(e.currentTarget){case this.challage:if(GuildFB.ins().fbNum>=300)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100993);GuildFB.ins().sendGuildFBChallange(),ViewManager.ins().close(GuildMap),ViewManager.ins().close(GuildWin),ViewManager.ins().close(GuildActivityWin);break;case this.sweepBtn:if(0==GuildFB.ins().fbNum)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100994);if(GuildFB.ins().sweep>=1)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100995);if(UserBag.ins().getSurplusCount()<=0)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100051);WarnWin.show(GlobalConfig.jifengTiaoyueLg.st101990,function(){t.starSaoDang()},this);break;case this.zhuwei:if(0==GuildFB.ins().isMaxGK)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100998);if(0==GuildFB.ins().fbNum)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100999);if(GuildFB.ins().maxZhuwei*GlobalConfig.guildfbconfig.cheerParam>GlobalConfig.guildfbconfig.maxCheer)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101000);GuildFB.ins().sendGuildFBZhuwei();break;case this.zhuwei0:if(0==GuildFB.ins().rewardNum)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101001);WarnWin.show(GlobalConfig.jifengTiaoyueLg.st101002,function(){GuildFB.ins().sendGuildFBReward()},this)}},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(GuildFubenWin.prototype,"GuildFubenWin",["ICommonWindowTitle"]),window.GuildFubenWin=GuildFubenWin;var GuildFuncNotice=function(e){function t(){var t=e.call(this)||this;t.skinName="GuildFuncNoticeSkin",t.dataGroup.itemRenderer=ItemBaseEffe;var i=new MovieClip;return i.loadUrl(ResDataPath.GetUIEffePath("eff_ui_sczbui_001"),!0,-1),t.group.addChild(i),t}return __extends(t,e),t.prototype.open=function(){this.commonWindowBg.OnAdded(this),null==this.guildBattleConst&&(this.guildBattleConst=GlobalConfig.ins("GuildBattleConst")),this.dataGroup.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(this.guildBattleConst.occupationAwardShow)),this.roleShowPanel.SetWing(ResDataPath.GetUIEffePath("eff_ui_god_wing"),null,!0),this.roleShowPanel.SetBody(ResDataPath.GetUIEffePath("eff_ui_body800_1"),null,null,!0),this.roleShowPanel.SetWeapon(ResDataPath.GetUIEffePath("eff_ui_weapon800_1"),null,!0),this.roleShowPanel.OffsetBody(64),this.roleShowPanel.OffsetWeapon(64),this.roleShowPanel.OffsetWing(15,-190)},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(GuildFuncNotice.prototype,"GuildFuncNotice",["ICommonWindow"]),window.GuildFuncNotice=GuildFuncNotice;var GuildListItem2Render=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuildListItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100898,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100899},t.prototype.dataChanged=function(){if(this.data instanceof GuildListInfo){var e=this.data,t=GlobalConfig.ins("GuildConfig");if(e&&t){this.nameLab.textFlow=(new egret.HtmlTextParser).parser(e.guildName+("<font color='#0FEE27'>(Lv."+e.guildLevel+")</font>")),this.president.text=e.guildPresident;var i=GameServer.serverMergeTime>0?t.maxHeFuMember[e.guildLevel-1]:t.maxMember[e.guildLevel-1];this.member.textColor=e.guildMember<i?5461335:16731648,this.member.text=e.guildMember+"/"+i,this.powerLabel.text=GlobalConfig.jifengTiaoyueLg.st100973+(""+CommonUtils.overLength(e.totalpower)),this.numLab.visible=!0,this.numLab.text=e.guildRank+""}}},t}(eui.ItemRenderer);__reflect(GuildListItem2Render.prototype,"GuildListItem2Render"),window.GuildListItem2Render=GuildListItem2Render;var GuildListItemRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="ApplyItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100898,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100899},t.prototype.onTap=function(){var e=this.data;if(-1==Guild.ins().applyGuilds.indexOf(e.guildID)){if(!GuildWar.ins().OtherOperation(GlobalConfig.jifengTiaoyueLg.st100900))return;if(this.data.attr>GameLogic.ins().actorModel.power)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100901);this.applyBtn.enabled=!1,this.applyBtn.label=GlobalConfig.jifengTiaoyueLg.st100902,Guild.ins().applyGuilds.push(e.guildID),Guild.ins().sendJoinGuild(e.guildID)}},t.prototype.dataChanged=function(){if(this.data instanceof GuildListInfo){var e=this.data,t=GlobalConfig.ins("GuildConfig"),i=GameLogic.ins().actorModel.power,o="";if(e&&t){this.numLab.text=e.guildRank+"",this.nameLab.textFlow=(new egret.HtmlTextParser).parser(e.guildName+("<font color='#0FEE27'>(Lv."+e.guildLevel+")</font>")),this.president.text=e.guildPresident;var s=GameServer.serverMergeTime>0?t.maxHeFuMember[e.guildLevel-1]:t.maxMember[e.guildLevel-1];this.member.textColor=e.guildMember<s?5226466:16282482,this.member.text=e.guildMember+"/"+s,this.attrLabel.text=GlobalConfig.jifengTiaoyueLg.st100903+CommonUtils.overLength(e.totalpower),o=CommonUtils.overLength(e.attr).toString(),this.label_Limit.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100809,style:{textColor:16757760}},{text:o,style:{textColor:i>=e.attr?16757760:13894403}}],Guild.ins().applyGuilds.indexOf(e.guildID)>-1?(this.applyBtn.enabled=!1,this.applyBtn.label=GlobalConfig.jifengTiaoyueLg.st100902):(this.applyBtn.enabled=!0,this.applyBtn.label=GlobalConfig.jifengTiaoyueLg.st100905)}}},t.prototype.destruct=function(){},t}(eui.ItemRenderer);__reflect(GuildListItemRender.prototype,"GuildListItemRender"),window.GuildListItemRender=GuildListItemRender;var GuildListPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100896,t.skinName="GuildListSkin",t}return __extends(t,e),t.prototype.UpdateContent=function(){},t.prototype.childrenCreated=function(){this.list.itemRenderer=GuildListItem2Render},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.addListener(Guild.ins().postGuildList,this.updateList,this),this.updateList(),this.pageChange(0)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this)},t.prototype.pageChange=function(e){this.curPage!=e&&e>=0&&e<Guild.ins().pageMax&&(this.curPage=e,Guild.ins().sendGuildList(),this.leftBtn.visible=0!=this.curPage)},t.prototype.updateList=function(){this.list.dataProvider=new eui.ArrayCollection(Guild.ins().guildListInfos),this.rightBtn.visible=this.curPage!=Guild.ins().pageMax-1},t.prototype.onTap=function(e){switch(e.currentTarget){case this.leftBtn:this.curPage>0&&this.pageChange(this.curPage-1);break;case this.rightBtn:this.curPage<Guild.ins().pageMax-1&&this.pageChange(this.curPage+1)}},t}(BaseView);__reflect(GuildListPanel.prototype,"GuildListPanel",["ICommonWindowTitle"]),window.GuildListPanel=GuildListPanel;var GuildManagePanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100896,t.skinName="GuildManageBuildSkin",t}return __extends(t,e),t.prototype.UpdateContent=function(){},t.prototype.childrenCreated=function(){this.buildList.itemRenderer=GuildBuildItemRender,this.messageList.itemRenderer=GuildEventItenRender,this.buildList.dataProvider=new eui.ArrayCollection},t.prototype.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return!0},t.prototype.open=function(){this.buildList.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onListTouch,this),MessageCenter.addListener(Guild.ins().postUpBuilding,this.updateList,this),MessageCenter.addListener(Guild.ins().postManageList,this.update,this),MessageCenter.addListener(Guild.ins().postGuildMoney,this.update,this),Guild.ins().sendManageList(),this.updateList()},t.prototype.close=function(){this.buildList.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onListTouch,this),MessageCenter.ins().removeAll(this)},t.prototype.update=function(){this.messageList.dataProvider=new eui.ArrayCollection(Guild.ins().records)},t.prototype.updateList=function(){this.buildList.dataProvider.replaceAll(t.DATA)},t.prototype.onListTouch=function(e){if(e.target instanceof eui.Button){var t=e.target.parent;t.onTap(e.target)}},t.DATA=[GuildBuilding.GUILD_HALL,GuildBuilding.GUILD_LIANGONGFANG,GuildBuilding.GUILD_SHOP,GuildBuilding.GUILD_BOSS],t}(BaseView);__reflect(GuildManagePanel.prototype,"GuildManagePanel",["ICommonWindowTitle"]),window.GuildManagePanel=GuildManagePanel;var GuildMap=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GuildSkin",this.list.itemRenderer=GuildMapMemberItemRender,this.nameIcon.text=GlobalConfig.jifengTiaoyueLg.st100896,this.manageBtn.getChildAt(1).label=GlobalConfig.jifengTiaoyueLg.st100917,this.practiseBtn.getChildAt(1).label=GlobalConfig.jifengTiaoyueLg.st100918,this.shopBtn.getChildAt(1).label=GlobalConfig.jifengTiaoyueLg.st100919,this.cityBtn.getChildAt(1).label=GlobalConfig.jifengTiaoyueLg.st100920,this.activityBtn.getChildAt(1).label=GlobalConfig.jifengTiaoyueLg.st100921,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100922},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return!0},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.showBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.manageBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.practiseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.activityBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.shopBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.celebrityBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.cityBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.chatBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.bossBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.guildWarReward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.guildWarReward1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.guildWarReward2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.addListener(Guild.ins().postGuildApplysInfos,this.updateApplys,this),MessageCenter.addListener(Guild.ins().postGuildTaskUpdate,this.updateRedpoint,this),MessageCenter.addListener(GuildFB.ins().postGuildFubenInfo,this.updateRedpoint,this),MessageCenter.addListener(Guild.ins().postGuildMembers,this.updateList,this),MessageCenter.addListener(GuildRobber.ins().postGuildRobberInfo,this.updateRobber,this),GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_REDBAGINFO_CHANGE,this.guildWarPointChange,this),GameGlobal.MessageCenter.addListener(MessageDef.GUILD_REWARD_UPDATE_DISP_INFO,this.guildWarPointChange,this),GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_SENDREWARD_SUCCESS,this.guildWarPointChange,this),Guild.ins().sendApplyInfos(),Guild.ins().sendGuildMembers(),this.updateRedpoint(),GuildRobber.ins().sendRobberInfo(),this.updateRobber(),this.guildWarPointChange()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.showBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.manageBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.practiseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.activityBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.shopBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.celebrityBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.cityBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.chatBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.bossBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.guildWarReward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.guildWarReward1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.guildWarReward2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeMonster(),MessageCenter.ins().removeAll(this)},t.prototype.updateRobber=function(){this.closeMonster();for(var e=GuildRobber.ins().GetRobberList(),t=0,i=e;t<i.length;t++){var o=i[t];if(null!=o&&o.robberStart!=GuildRobberState.DEAD){var s=new GuildMosterPanel,n=o.pos-1,r=GlobalConfig.robberfbconfig.point[n];r?(s.x=r[0],s.y=r[1],s.update(o,r[2]),this.addChild(s),this.robberary.push(s)):Main.errorBack("GuildMap updateRobber config=null,info.pos="+o.pos)}}},t.prototype.closeMonster=function(){if(this.robberary)for(var e=0;e<this.robberary.length;e++){var t=this.robberary[e];t.parent.removeChild(t)}this.robberary=[]},t.prototype.updateApplys=function(){UIHelper.ShowRedPoint(this.manageBtn.getChildByName("btn"),Guild.ins().hasApplys())},t.prototype.updateRedpoint=function(){UIHelper.ShowRedPoint(this.activityBtn.getChildByName("btn"),GuildFB.ins().hasbtn()||Guild.ins().IsTaskRedPoint())},t.prototype.guildWarPointChange=function(){UIHelper.ShowRedPoint(this.cityBtn.getChildByName("btn"),GuildReward.ins().IsShowRedPoint()),this.guildWarReward.visible=GuildReward.ins().canSendReward,this.guildWarReward1.visible=GuildReward.ins().canSendReward1,this.guildWarReward2.visible=GuildReward.ins().canSendReward2},t.prototype.updateList=function(){this.list.dataProvider=new eui.ArrayCollection(Guild.ins().getGuildMembers(2))},t.prototype.onTap=function(e){switch(e.currentTarget){case this.closeBtn:ViewManager.ins().close(t);break;case this.showBtn:this.list.visible=!this.list.visible,this.rankBg.visible=this.list.visible;break;case this.practiseBtn:ViewManager.ins().open(GuildSkillWin);break;case this.activityBtn:ViewManager.ins().open(GuildActivityWin);break;case this.manageBtn:ViewManager.ins().close(t),ViewManager.ins().open(GuildWin);break;case this.cityBtn:ViewManager.ins().open(GuildWarMainBgWin);break;case this.celebrityBtn:UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100916);break;case this.shopBtn:ViewManager.ins().open(GuildShopWin);break;case this.bossBtn:UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100916);break;case this.guildWarReward:ViewManager.ins().open(SelectMemberRewardWin,0);break;case this.guildWarReward1:ViewManager.ins().open(SelectMemberRewardWin,1);break;case this.guildWarReward2:ViewManager.ins().open(SelectMemberRewardWin,2);break;case this.chatBtn:console.log("-------------  ViewManager.ins().open(ChatWin);")}},t}(BaseEuiPanel);__reflect(GuildMap.prototype,"GuildMap"),ViewManager.ins().reg(GuildMap,LayerManager.UI_Main),window.GuildMap=GuildMap;var GuildMapMemberItemRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="gongxianitemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){if(this.data instanceof GuildMemberInfo){var e=this.data;e&&(this.nameLab.text=e.name,this.office.text=GuildLanguage.guildOffice(e.office),this.conLab.text=e.curContribution+"")}},t}(eui.ItemRenderer);__reflect(GuildMapMemberItemRender.prototype,"GuildMapMemberItemRender"),window.GuildMapMemberItemRender=GuildMapMemberItemRender;var GuildMemberItem1Render=function(e){function t(){var t=e.call(this)||this;return t.skinName="MemberItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){if(this.data instanceof GuildMemberInfo){var e=this.data;e&&(this.office.text=GuildLanguage.guildOffice(e.office),this.conLab.text=e.contribution+"",this.nameLab.Set(e.name,e.vipLevel,e.monthCard,e.superMonthCard))}},t}(eui.ItemRenderer);__reflect(GuildMemberItem1Render.prototype,"GuildMemberItem1Render"),window.GuildMemberItem1Render=GuildMemberItem1Render;var GuildMemberItem2Render=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.impeachBtn.label=GlobalConfig.jifengTiaoyueLg.st100963,this.demiseBtn.label=GlobalConfig.jifengTiaoyueLg.st100964,this.downBtn.label=GlobalConfig.jifengTiaoyueLg.st100965,this.kickBtn.label=GlobalConfig.jifengTiaoyueLg.st100966,this.appointBtn.label=GlobalConfig.jifengTiaoyueLg.st100967},t.prototype.onTap=function(e){var t=this.data,i=t.roleID;switch(e){case this.impeachBtn:if(!GuildWar.ins().OtherOperation(GlobalConfig.jifengTiaoyueLg.st100968))return;WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101509,[GlobalConfig.ins("GuildConfig").impeachCost]),function(){GameLogic.ins().actorModel.yb>GlobalConfig.ins("GuildConfig").impeachCost?Guild.ins().sendDemise():UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008)},this);break;case this.demiseBtn:if(!GuildWar.ins().OtherOperation(GlobalConfig.jifengTiaoyueLg.st100969))return;WarnWin.show(GlobalConfig.jifengTiaoyueLg.st101510+"["+t.name+"]",function(){Guild.ins().sendChangeOffice(i,GuildOffice.GUILD_BANGZHU)},this);break;case this.downBtn:WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101511,[t.name]),function(){Guild.ins().sendChangeOffice(i,GuildOffice.GUILD_MEMBER)},this);break;case this.kickBtn:WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101512,[t.name]),function(){Guild.ins().sendKick(i)},this);break;case this.appointBtn:WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101513,[t.name]),function(){Guild.ins().canAppointFHZ()?Guild.ins().sendChangeOffice(i,GuildOffice.GUILD_FUBANGZHU):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100970)},this)}},t.prototype.dataChanged=function(){if(this.data instanceof GuildMemberInfo){var e=this.data;this.nameLab.textFlow=(new egret.HtmlTextParser).parser("["+GuildLanguage.guildOffice(e.office)+"]<font color='#535557'>"+e.name+"</font>"),this.conLab.text=GlobalConfig.jifengTiaoyueLg.st100971+e.contribution,this.attack.text=GlobalConfig.jifengTiaoyueLg.st100809+e.attack,UIHelper.SetHead(this.face,e.job,e.sex);var t=0;e.downTime>0?(t=GameServer.serverTime-e.downTime,this.onLine.textFlow=(new egret.HtmlTextParser).parser("<font color='#f87372'>"+DateUtils.getFormatBySecond(t,7)+GlobalConfig.jifengTiaoyueLg.st101513+"</font>")):this.onLine.textFlow=(new egret.HtmlTextParser).parser("<font color='#008f22'>"+GlobalConfig.jifengTiaoyueLg.st100972+"</font>"),this.group1.visible=!1,this.group2.visible=!1,this.group3.visible=!1;var i=Guild.ins().myOffice;switch(this.impeachBtn.visible=t>=432e3,i){case 6:if(6==e.office)break;5==e.office?this.group2.visible=!0:(this.group3.visible=!0,this.appointBtn.visible=!0);break;case 5:if(6==e.office)this.group1.visible=!0;else{if(5==e.office)break;this.group3.visible=!0,this.appointBtn.visible=!1}break;case 4:case 3:case 2:6==e.office&&(this.group1.visible=!0)}}},t}(eui.ItemRenderer);__reflect(GuildMemberItem2Render.prototype,"GuildMemberItem2Render"),window.GuildMemberItem2Render=GuildMemberItem2Render;var GuildMemberPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100896,t.skinName="GuildMemberSkin",t}return __extends(t,e),t.prototype.UpdateContent=function(){},t.prototype.childrenCreated=function(){this.list.itemRenderer=GuildMemberItem2Render,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100960,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100961,this.quitBtn.label=GlobalConfig.jifengTiaoyueLg.st100962},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.quitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.list.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onListTouch,this),MessageCenter.addListener(Guild.ins().postGuildMembers,this.updateMember,this),MessageCenter.addListener(Guild.ins().postMyGuildInfo,this.updateMyInfo,this),this.updateMyInfo(),this.updateMember()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.quitBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.list.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onListTouch,this),MessageCenter.ins().removeAll(this)},t.prototype.onListTouch=function(e){if(e.target instanceof eui.Button){var t=e.target.parent.parent;t.onTap(e.target)}},t.prototype.updateMember=function(){var e=Guild.ins().getGuildMembers(1);this.list.dataProvider=new eui.ArrayCollection(e)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.quitBtn:if(!GuildWar.ins().OtherOperation(GlobalConfig.jifengTiaoyueLg.st100958))return;WarnWin.show(GlobalConfig.jifengTiaoyueLg.st100959,function(){Guild.ins().sendQuitGuild()},this)}},t.prototype.updateMyInfo=function(){this.office.text=GuildLanguage.guildOffice(Guild.ins().myOffice),this.totalCon.text=Guild.ins().myTotalCon+""},t.prototype.sort=function(e,t){return e.attack>t.attack?1:e.attack<t.attack?-1:0},t}(BaseView);__reflect(GuildMemberPanel.prototype,"GuildMemberPanel",["ICommonWindowTitle"]),window.GuildMemberPanel=GuildMemberPanel;var GuildMosterPanel=function(e){function t(){var t=e.call(this)||this;return t.bossmc=new MovieClip,t.bossmc.scaleX=.5,t.bossmc.scaleY=.5,t.bossmc.x=0,t.bossmc.y=0,t.addChild(t.bossmc),t.staticMc=new MovieClip,t.addChild(t.staticMc),t.staticMc.y=-60,t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTap,t),t
}return __extends(t,e),t.prototype.onTap=function(e){return this.start&&this.start.robberStart==GuildRobberState.FIGHT?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101024):GuildRobber.ins().robberChanllge>=GlobalConfig.robberfbconfig.challengeMax?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101025):void GuildRobber.ins().sendRobberChanger(this.index)},t.prototype.update=function(e,t){if(null!=e){this.start=e;var i="";i=GlobalConfig.robberfbconfig.effect[this.start.robberType-1],this.bossmc.loadUrl(ResDataPath.GetMonsterBodyPath("monster"+i+"_"+DirUtil.get5DirBy8Dir(t)+"s"),!0,-1);var o=GlobalConfig.robberfbconfig.effectProportion[this.start.robberType-1];this.bossmc.scaleX=Number(t)>4?o:-o,this.bossmc.scaleY=Math.abs(this.bossmc.scaleX),this.index=e.pos;var s=e.robberStart==GuildRobberState.NORMAL?"ketiaozhan":"eff_fighting";this.staticMc.loadUrl(ResDataPath.GetUIEffePath(s),!0,-1)}},t}(eui.Component);__reflect(GuildMosterPanel.prototype,"GuildMosterPanel"),window.GuildMosterPanel=GuildMosterPanel;var GuildNoticeWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GuildNoticeSkin",this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100937,this.saveBtn.label=GlobalConfig.jifengTiaoyueLg.st100938},t.prototype.open=function(){this.m_bg.init("GuildNoticeWin",GlobalConfig.jifengTiaoyueLg.st100936);for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.saveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.textInput.text=Guild.ins().notice},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.saveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.saveBtn:Guild.ins().notice=this.textInput.text,Guild.ins().sendChangeNotice(this.textInput.text),ViewManager.ins().close(this)}},t}(BaseEuiPanel);__reflect(GuildNoticeWin.prototype,"GuildNoticeWin"),ViewManager.ins().reg(GuildNoticeWin,LayerManager.UI_Popup),window.GuildNoticeWin=GuildNoticeWin;var GuildShopRecordItemRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuildStoreItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){if(this.data instanceof GuildStoreRecordInfo){var e=GlobalConfig.itemConfig[this.data.itemId];e?this.rank.textFlow=(new egret.HtmlTextParser).parser(this.data.roleName+"   "+GlobalConfig.jifengTiaoyueLg.st101797+"   <font color="+ItemBase.QUALITY_COLOR[e.quality]+">"+e.name+"</font>"):this.rank.text=""}},t}(eui.ItemRenderer);__reflect(GuildShopRecordItemRender.prototype,"GuildShopRecordItemRender"),window.GuildShopRecordItemRender=GuildShopRecordItemRender;var GuildShopRecordWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){this.skinName="GuildStoreInfoSkin",this.list.itemRenderer=GuildShopRecordItemRender,this.arrList=new eui.ArrayCollection},t.prototype.open=function(){this.m_bg.init("GuildShopRecordWin",GlobalConfig.jifengTiaoyueLg.st101209),this.arrList.replaceAll(GuildStore.ins().GetRecordInfos()),this.list.dataProvider=this.arrList},t.prototype.close=function(){},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(GuildShopRecordWin.prototype,"GuildShopRecordWin"),window.GuildShopRecordWin=GuildShopRecordWin;var GuildShopWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100919,t.isOpenEff=!1,t.skinName="GuildStoreSkin",t}return __extends(t,e),t.prototype.UpdateContent=function(){},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.list.itemRenderer=GuildShopRecordItemRender,this.consumeLabel.consumeType=GlobalConfig.jifengTiaoyueLg.st101006,this.guildMore.text=GlobalConfig.jifengTiaoyueLg.st101012,UIHelper.SetLinkStyleLabel(this.guildMore),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101013,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101014,this.useBtn.text=GlobalConfig.jifengTiaoyueLg.st101015},t.prototype.lightingEff=function(){var e=this;this.mc_lighting||(this.mc_lighting=new MovieClip),this.mc_lighting.loadUrl(ResDataPath.GetUIEffePath("ui_box_eff"),!0,-1,function(){DisplayUtils.dispose(e.mc_lighting),e.mc_lighting=null}),this.mc_lighting.x=220,this.mc_lighting.y=320,this.mc_lighting.scaleX=this.mc_lighting.scaleY=.8,this.addChild(this.mc_lighting),this.boxopen.visible=!0,this.boxclose.visible=!1,this.isOpenEff=!1},t.prototype.open=function(){this.guildshopkaiqi.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.useBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.guildMore.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GuildStore.ins().getGuildStoreInfo(),GuildStore.ins().sendGuildStoreBoxInfo(),MessageCenter.addListener(GuildStore.ins().postGuildStoreInfo,this.onupdateData,this),MessageCenter.addListener(GuildStore.ins().postGuildStoreBox,this.onItemInfo,this),MessageCenter.addListener(GuildStore.ins().postGuildStoreBoxInfo,this.onReadInfo,this),this.onupdateData(),this.guildshopitem_7.visible=!1;this.commonWindowBg.OnAdded(this)},t.prototype.close=function(){this.guildshopkaiqi.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.useBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.guildMore.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this),this.commonWindowBg.OnRemoved(),DisplayUtils.dispose(this.mc_lighting),this.mc_lighting=null},t.prototype.onupdateData=function(){if(GuildStore.ins().guildStoreLv>0){this.guildshopopen.visible=!0,this.guildshopclose.visible=!1,this.guildshopclose.touchEnabled=!1,this.guildshopopen.touchEnabled=!0,this.consumeLabel.curValue=Guild.ins().myCon,this.consumeLabel.consumeValue=GlobalConfig.ins("GuildStoreConfig").needContrib;var e=GlobalConfig.ins("GuildStoreConfig").time[GuildStore.ins().guildStoreLv-1],t=GlobalConfig.ins("GuildStoreConfig").time[GuildStore.ins().guildStoreLv],i="";i=GuildStore.ins().guildStoreNum<=0?"<font color='#f87372'>"+GuildStore.ins().guildStoreNum+"/"+e+"</font>":GuildStore.ins().guildStoreNum+"/"+e,t?this.guildshopshengyulabel.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101007,[i,GuildStore.ins().guildStoreLv+1,t-e])):this.guildshopshengyulabel.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101008,[i]))}else this.guildshopopen.visible=!1,this.guildshopopen.touchEnabled=!1,this.guildshopclose.touchEnabled=!0,this.guildshopclose.visible=!0;for(var o in GlobalConfig.ins("GuildStoreConfig").item)this["guildshopitem_"+o].data=GlobalConfig.ins("GuildStoreConfig").item[o]},t.prototype.onReadInfo=function(){for(var e=GuildStore.ins().GetRecordInfos(),t=[],i=0;5>i;++i){var o=e[i];if(!o)break;t.push(o)}this.list.dataProvider=new eui.ArrayCollection(t)},t.prototype.onItemInfo=function(){this.guildshopitem_7.visible=!0;var e=GuildStore.ins().getGuildStoreItemData();this.guildshopitem_7.num=e.num,this.guildshopitem_7.data=e.itemId,this.onupdateData()},t.prototype.startEff=function(){this.guildshopitem_7.visible=!1,this.boxclose.visible=!0,this.boxopen.visible=!1,this.isOpenEff=!0,egret.setTimeout(this.lightingEff,this,100),GuildStore.ins().sendGuildStoreBox()},t.prototype.onTap=function(e){switch(e.currentTarget){case this.guildshopkaiqi:ViewManager.ins().open(GuildWin,1);break;case this.useBtn:if(!Checker.OpenDay(GlobalConfig.ins("GuildStoreConfig").day))return;if(GuildStore.ins().guildStoreNum<=0)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101009);if(GlobalConfig.ins("GuildStoreConfig").needContrib>Guild.ins().myCon)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101010);if(UserBag.ins().getSurplusCount()<=0)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101011);0==this.isOpenEff&&this.startEff();break;case this.guildMore:ViewManager.ins().open(GuildShopRecordWin)}},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(GuildShopWin.prototype,"GuildShopWin",["ICommonWindow","ICommonWindowTitle"]),window.GuildShopWin=GuildShopWin;var GuildSkillWin=function(e){function t(){var t=e.call(this)||this;return t.selectBmpX=[0,33,108,183,266.5,353],t.skillIdx=37,t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100918,t.skinName="GuildSkillSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.m_SkillGroup=new SkillGroup(this.skillGroup,this._SelectSkill,this);for(var t=0;5>t;++t){var i=this.m_SkillGroup.GetComp(t);i.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101016,i.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101017,i.icon.source="propIcon_0"+(this.skillIdx+t)+"_png",i.bg.imgBg.source=t>=3?"pf_red_01_png":"pf_black_01_png",i.lock.text=""}this.comLearnBtn.label=GlobalConfig.jifengTiaoyueLg.st101018,this.learnLab.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st101501+'  <a href="event:"><font color=\'#'+Color.Green+"'><u>"+GlobalConfig.jifengTiaoyueLg.st101502+"</u></font></a>")},t.prototype.open=function(){this.commonWindowBg.OnAdded(this),this.m_SkillGroup.open(),this.comLearnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.learnLab.addEventListener(egret.TextEvent.LINK,this.onLink,this),MessageCenter.addListener(Guild.ins().postGuildSkillInfo,this.update,this),MessageCenter.addListener(Guild.ins().postMyGuildInfo,this._SelectSkill,this),MessageCenter.addListener(GameLogic.ins().postSubRoleChange,this.updateRole,this),MessageCenter.addListener(Guild.ins().postGuildInfo,this.update,this),Guild.ins().sendGuildSkillInfo(),Guild.ins().sendGuildInfo(),Guild.ins().sendMyGuildInfo(),this._UpdateSkillList()},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),this.m_SkillGroup.close(),this.comLearnBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.learnLab.removeEventListener(egret.TextEvent.LINK,this.onLink,this),MessageCenter.ins().removeAll(this)},t.prototype.onLink=function(){ViewManager.ins().close(this),ViewManager.ins().open(GuildWin,1)},t.prototype.updateRole=function(){Guild.ins().sendGuildSkillInfo()},t.prototype.update=function(){this._UpdateSkillList(),this._SelectSkill()},t.prototype._UpdateSkillList=function(){for(var e=Guild.ins().getSkllInfoByIndex(this.roleSelect.getCurRole()),t=0;5>t;++t){var i=this.m_SkillGroup.GetComp(t),o=this.GetSkillType(t+1),s=o[0],n=o[1],r=e.GetSkillInfoByIndex(s,n-1),a=r.level;i.skillName.text=this.GetSkillNameConfig(s)[n-1],i.skillName.text=""+this.GetSkillNameConfig(s)[n-1];var l="Lv."+a;0==a&&0==r.exp&&(l=GlobalConfig.jifengTiaoyueLg.st100273);var h=this.GetSkillDP(s,n,a);i.comLv.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101019,[a]);var c=this.GetSkillDP(s,n,a+1);i.comCurBase.text=0==a?GlobalConfig.jifengTiaoyueLg.st100273:AttributeData.getAttStr(h.attrs,0,1,"：",!0),i.comNextLab.text=AttributeData.getAttStr(c.attrs,0,1,"：",!0),s==GuildSkillType.PRACTICE?(i.praBar.visible=!0,i.praBar.maximum=c.upExp,i.praBar.value=r.exp):i.praBar.visible=!1}},t.prototype.onTap=function(e){switch(e.currentTarget){case this.comLearnBtn:this.praBtnOnClick()}},t.prototype.GetSkillType=function(e){return[4>e?GuildSkillType.NORMAL:GuildSkillType.PRACTICE,(e-1)%3+1]},t.prototype.praBtnOnClick=function(){var e=Guild.ins().getSkllInfoByIndex(this.roleSelect.getCurRole()),t=e.GetSkillInfoByIndex(this.selectSkillType,this.selectSkillID-1),i=t.level,o=Guild.ins().getBuildingLevels(GuildBuilding.GUILD_LIANGONGFANG-1),s=this.GetSkillDP(this.selectSkillType,this.selectSkillID,i+1);return 0==o||i>=this.GetSkillLevel(this.selectSkillType,o)?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101020):s.contribute>Guild.ins().myCon?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101021):GameLogic.ins().actorModel.gold<s.money?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100222):void(this.selectSkillType==GuildSkillType.PRACTICE?Guild.ins().sendPracticeGuildSkill(this.roleSelect.getCurRole(),this.selectSkillID):Guild.ins().sendLearnGuildSkill(this.roleSelect.getCurRole(),this.selectSkillID))},t.prototype._SelectSkill=function(){var e=this.m_SkillGroup.SelectedIndex+1;c=this.GetSkillType(e),this.selectSkillType=c[0],this.selectSkillID=c[1];var t=Guild.ins().getSkllInfoByIndex(this.roleSelect.getCurRole()),i=t.GetSkillInfoByIndex(this.selectSkillType,this.selectSkillID-1),o=i.level,s=this.GetSkillDP(this.selectSkillType,this.selectSkillID,o),n=this.GetSkillConfig(this.selectSkillType)[this.selectSkillID],r=n.length,a=Guild.ins().getBuildingLevels(GuildBuilding.GUILD_LIANGONGFANG-1);if(this.learnLab.visible=1>a||o>=this.GetSkillLevel(this.selectSkillType,a),this.comLearnBtn.visible=!this.learnLab.visible,this.comDescGroup.visible=!this.learnLab.visible,this.comLearnBtn.label=0==o?GlobalConfig.jifengTiaoyueLg.st101022:GlobalConfig.jifengTiaoyueLg.st100208,r>o){var l=this.GetSkillDP(this.selectSkillType,this.selectSkillID,o+1),h=Guild.ins().myCon>=l.contribute?Color.Green:Color.Red;this.comCon.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101023,[StringUtils.addColor(Guild.ins().myCon.toString(),h),l.contribute])),this.comCost0.text=l.money+"",this.comCost0.textColor=(GameLogic.ins().actorModel.gold>=l.money,36642)}else this.comCon.text="0",this.comCost0.text="0",this.comCost0.textColor=36642;0==o?this.powerLabel.text="0":this.powerLabel.text=ItemConfig.CalcAttrScoreValue(s.attrs)+"";var c},t.prototype.GetSkillConfig=function(e){var t=e==GuildSkillType.NORMAL?GlobalConfig.ins("GuildCommonSkillConfig"):GlobalConfig.ins("GuildPracticeSkillConfig");return t},t.prototype.GetSkillNameConfig=function(e){return e==GuildSkillType.NORMAL?GlobalConfig.ins("GuildConfig").commonSkillNames:GlobalConfig.ins("GuildConfig").practiceSkillNames},t.prototype.GetSkillLevel=function(e,t){return e==GuildSkillType.NORMAL?GlobalConfig.ins("GuildConfig").commonSkillLevels[t-1]:GlobalConfig.ins("GuildConfig").practiceSkillLevels[t-1]},t.prototype.GetSkillDP=function(e,t,i){var o=this.GetSkillConfig(e),s=o[t];if(0==i)return s[0];for(var n=0;n<s.length;n++){var r=s[n];if(r.level==i)return r}return null},Object.defineProperty(t.prototype,"roleSelect",{get:function(){return this.m_RoleSelectPanel},enumerable:!0,configurable:!0}),t.prototype.UpdateContent=function(){this.update()},t}(BaseEuiPanel);__reflect(GuildSkillWin.prototype,"GuildSkillWin",["ICommonWindow","ICommonWindowRoleSelect","ICommonWindowTitle"]),ViewManager.ins().reg(GuildSkillWin,LayerManager.UI_Main),window.GuildSkillWin=GuildSkillWin;var GuildTaskItemRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuildTaskItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.goBtn.label=GlobalConfig.jifengTiaoyueLg.st100976,this.conBtn.label=GlobalConfig.jifengTiaoyueLg.st100931},t.prototype.onTap=function(e){switch(e){case this.conBtn:case this.goBtn:this.conBtnOnCLick()}},t.prototype.conBtnOnCLick=function(){var e=this.data;switch(e.stdTask.type){case 31:Guild.ins().GetConCount(0)>=Guild.ins().GetMaxConCount(0)&&UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100977),1==GuildConWin.DonateYb()&&ViewManager.ins().open(VipWin);break;case 32:e.param>=e.stdTask.target?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100977):GameLogic.ins().actorModel.gold>e.stdTask.param?Guild.ins().sendCon(e.stdTask.conID):UserWarn.ins().setBuyGoodsWarn(1);break;case 33:e.param>=e.stdTask.target?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100977):UserBag.ins().getBagGoodsCountById(0,e.stdTask.param)>=1?Guild.ins().sendCon(e.stdTask.conID):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100217);break;default:var t=e.stdTask.controlTarget;GameGuider.guidance(t[0],t[1])}},t.prototype.goBtnOnClick=function(){var e=this.data;switch(e.state){case 0:var t=e.stdTask.controlTarget;GameGuider.guidance(t[0],t[1]);break;case 1:Guild.ins().sendGetTaskAward(e.taskID);break;case 2:}},t.prototype.dataChanged=function(){if(this.data instanceof GuildTaskInfo){var e=this.data;if(e){var t="";if(t=1==e.taskID?"propIcon_030_png":2==e.taskID?"propIcon_025_png":"propIcon_035_png",this.taskIcon.source=t,this.nameLab.text=e.stdTask.name,this.descLab.text=e.stdTask.desc,this.getGroup.visible=!1,this.numLab.text=e.param+"/"+e.stdTask.target,this.conBtn.enabled=e.param<e.stdTask.target,this.wcimg.visible=!this.conBtn.enabled,this.conBtn.visible=e.param<e.stdTask.target,this.conGroup.visible=e.param<e.stdTask.target,UIHelper.ShowRedPoint(this.conBtn,2==e.taskID&&this.data.state==RewardState.NotReached),31==e.stdTask.type&&Guild.ins().GetConCount(0)<Guild.ins().GetMaxConCount(0)){this.conBtn.label=GlobalConfig.jifengTiaoyueLg.st100931,this.numLab.text=Guild.ins().GetConCount(0)+"/"+Guild.ins().GetMaxConCount(0),this.conBtn.enabled=Guild.ins().GetConCount(0)<Guild.ins().GetMaxConCount(0),this.wcimg.visible=!this.conBtn.enabled,this.conBtn.visible=Guild.ins().GetConCount(0)<Guild.ins().GetMaxConCount(0),this.conGroup.visible=Guild.ins().GetConCount(0)<Guild.ins().GetMaxConCount(0);var i=GlobalConfig.ins("GuildDonateConfig")[1].dayCount,o=UserVip.ins().lv,s=i[o],n=i[o+1];Guild.ins().GetSurplusConCount(0)<=0&&(this.conBtn.visible=!WxSdk.ins().isHidePay(),this.numLab.visible=!WxSdk.ins().isHidePay(),n&&n-s>0&&(this.numLab.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100978,[UserVip.ins().lv+1,n-s])),this.conBtn.label=0==UserVip.ins().lv?GlobalConfig.jifengTiaoyueLg.st100944:GlobalConfig.jifengTiaoyueLg.st100945))}else if(e.param<e.stdTask.target)switch(e.stdTask.type){case 32:case 33:this.conBtn.label=GlobalConfig.jifengTiaoyueLg.st100931;break;default:this.conBtn.label=GlobalConfig.jifengTiaoyueLg.st100976}else this.conBtn.label=GlobalConfig.jifengTiaoyueLg.st100979}}},t}(eui.ItemRenderer);__reflect(GuildTaskItemRender.prototype,"GuildTaskItemRender"),window.GuildTaskItemRender=GuildTaskItemRender;var GuildTaskPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100975,t.name=GlobalConfig.jifengTiaoyueLg.st100975,t.skinName="GuildTaskSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=GuildTaskItemRender,this.listData=new eui.ArrayCollection,this.list.dataProvider=this.listData},t.prototype.open=function(){MessageCenter.addListener(Guild.ins().postGuildTaskUpdate,this.updateList,this),MessageCenter.addListener(Guild.ins().postConCount,this.updateList,this),GameGlobal.MessageCenter.addListener(MessageDef.VIP_LEVEL_CHANGE,this.updateList,this),this.list.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onListTouch,this),this.updateList(),Guild.ins().sendConCount()},t.prototype.close=function(){this.list.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onListTouch,this),GameGlobal.MessageCenter.removeListener(MessageDef.VIP_LEVEL_CHANGE,this.updateList,this),MessageCenter.ins().removeAll(this)},t.prototype.updateList=function(){for(var e=Guild.ins().guildTaskInfos.slice(),t=e.length-1;t>=0;t--)0==e[t].stdTask.type&&e.splice(t,1);this.listData.replaceAll(e)},t.prototype.onLink=function(){ViewManager.ins().open(VipWin)},t.prototype.onListTouch=function(e){if(e.target instanceof eui.Button){var t=e.target.parent.parent;t.onTap(e.target)}},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(GuildTaskPanel.prototype,"GuildTaskPanel",["ICommonWindowTitle"]),window.GuildTaskPanel=GuildTaskPanel;var GuildWin=function(e){function t(){var t=e.call(this)||this;return t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.guildInfoPanel=new GuildInfoPanel,this.guildInfoPanel.name=GlobalConfig.jifengTiaoyueLg.st100932,this.commonWindowBg.AddChildStack(this.guildInfoPanel),this.guildManagePanel=new GuildManagePanel,this.guildManagePanel.name=GlobalConfig.jifengTiaoyueLg.st100933,this.commonWindowBg.AddChildStack(this.guildManagePanel),this.guildMemberPanel=new GuildMemberPanel,this.guildMemberPanel.name=GlobalConfig.jifengTiaoyueLg.st100934,this.commonWindowBg.AddChildStack(this.guildMemberPanel),this.guildListPanel=new GuildListPanel,this.guildListPanel.name=GlobalConfig.jifengTiaoyueLg.st100935,this.commonWindowBg.AddChildStack(this.guildListPanel)},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return!0},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e[0]||0),MessageCenter.addListener(Guild.ins().postGuildApplysInfos,this.updateApplys,this),Guild.ins().sendMyGuildInfo(),this.updateApplys()},t.prototype.close=function(){MessageCenter.ins().removeAll(this)},t.prototype.updateApplys=function(){this.commonWindowBg.ShowTalRedPoint(0,Guild.ins().hasApplys())},t.prototype.OnBackClick=function(e){return ViewManager.ins().open(GuildMap),0},t.prototype.OnOpenIndex=function(e){return!0},t}(BaseEuiPanel);__reflect(GuildWin.prototype,"GuildWin",["ICommonWindow"]),ViewManager.ins().reg(GuildWin,LayerManager.UI_Main),window.GuildWin=GuildWin;var GuildBoss=function(e){function t(){var t=e.call(this)||this;return t.m_Times=0,t.m_BossIndex=1,t.m_Endtime=0,t.m_CallInfo=null,t.regNetMsg(S2cProtocol.sc_guild_boss_info,t._DoBossInfo),t.regNetMsg(S2cProtocol.sc_guild_boss_call_info,t._DoCallInfo),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype._DoBossInfo=function(e){var t=this.m_Endtime;this.m_Times=e.callNum,this.m_BossIndex=e.index,this.m_Endtime=e.time,Guild.ins().SetBuildingLevel(GuildBuilding.GUILD_BOSS-1,e.level),t>GameServer.serverTime&&this.m_Endtime<=GameServer.serverTime?ViewManager.ins().isShow(GuildBossReadyPanel)&&(ViewManager.ins().close(GuildBossReadyPanel),ViewManager.ins().close(GuildBossCallPanel)):t<=GameServer.serverTime&&this.m_Endtime>GameServer.serverTime&&ViewManager.ins().isShow(GuildBossCallPanel)&&ViewManager.ins().close(GuildBossCallPanel)},t.prototype.times=function(){return this.m_Times},t.prototype.GetBossIndex=function(){return this.m_BossIndex},t.prototype.GetSurplusTime=function(){return Math.max(this.m_Endtime-GameServer.serverTime,0)},t.prototype.IsOpen=function(){return Deblocking.Check(DeblockingType.TYPE_18,!0)?this.GetSurplusTime()>0:!1},t.prototype._DoCallInfo=function(e){this.m_CallInfo=e,this.m_CallInfo&&this.m_CallInfo.rankDatas&&this.m_CallInfo.rankDatas.sort(function(e,t){return t.value-e.value}),GameGlobal.MessageCenter.dispatch(MessageDef.GUILD_BOSS_CALL_INFO)},t.prototype.SendBossCall=function(){this.Rpc(C2sProtocol.cs_guild_boss_call)},t.prototype.SendBossFight=function(){this.Rpc(C2sProtocol.cs_guild_boss_fight)},t.prototype.SendGetBossInfo=function(){this.Rpc(C2sProtocol.cs_guild_boss_rank)},t.prototype.GetCallInfo=function(){return this.m_CallInfo},t.prototype.HpPercent=function(){return this.m_CallInfo?this.m_CallInfo.hpPercent:100},t.prototype.GetMaxCallTimes=function(){var e=Guild.ins().GetBuildingLevel(GuildBuilding.GUILD_BOSS-1),t=0;return t=e?GlobalConfig.ins("PublicGuildBossBaseConfig").maxtimes[e-1]:GlobalConfig.ins("PublicGuildBossBaseConfig").maxtimes[0]},t.prototype.GetMaxCallLv=function(){var e=Guild.ins().GetBuildingLevel(GuildBuilding.GUILD_BOSS-1),t=0;return t=e?GlobalConfig.ins("PublicGuildBossBaseConfig").maxlv[e-1]:GlobalConfig.ins("PublicGuildBossBaseConfig").maxlv[0],t&&t>=1e3?Math.floor(.001*t):t||1},t.prototype.GetMaxGuildBossLv=function(){var e=Guild.ins().GetBuildingLevel(GuildBuilding.GUILD_BOSS-1);return GlobalConfig.ins("PublicGuildBossBaseConfig").maxlv[e-1]},t.prototype.GetMaxCallIndex=function(){var e=GameGlobal.actorModel.level+1e3*UserZs.ins().lv,t=this.GetMaxGuildBossLv(),i=GlobalConfig.ins("GuildBossConfig"),o=0;for(var s in i){var n=i[s],r=1e3*n.zsLevel+n.level;e>=r&&t>=r&&(o=n.id)}return o},t}(BaseSystem);__reflect(GuildBoss.prototype,"GuildBoss"),window.GuildBoss=GuildBoss;var GuildBossCallPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101805,t.mWindowHelpId=24,t.skinName="GuildBossCallPanelSkin",t.dataGroup.itemRenderer=ItemBase,t.bossImage=new MovieClip,t.bossGroup.addChild(t.bossImage),t.learnLab.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st101798+"<a href=\"event:\"><font color='#008f22'><u>"+GlobalConfig.jifengTiaoyueLg.st101502+"</u></font></a>"),t.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st101806,t.callBtn.label=GlobalConfig.jifengTiaoyueLg.st101700,t}return __extends(t,e),t.prototype.open=function(){this.commonWindowBg.OnAdded(this),this.AddClick(this.callBtn,this._OnClick),this.getwayLabel.touchEnabled=!0,this.AddClick(this.getwayLabel,this._OnClick),this._UpateCallNum(GuildBoss.ins().times(),GuildBoss.ins().GetMaxCallTimes());var e=GlobalConfig.ins("PublicGuildBossBaseConfig");this.tip2Label.text=GlobalConfig.jifengTiaoyueLg.st101799+("："+e.opentime[0]+":00~"+e.opentime[1]+":00");var t=this._GetCallIndex(),i=GlobalConfig.ins("GuildBossConfig")[t];this.tip1Label.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101800,[i.escapetime]),GuildBossViewHelper.SetBossLv(this.bossLvComp,i.level,i.zsLevel),this.dataGroup.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(i.zhrewards)),this._UpdatePrice(i.soul),UIHelper.SetMonsterMc(this.bossImage,i.bossId),this.learnLab.addEventListener(egret.TextEvent.LINK,this.onLink,this);var o=Guild.ins().getBuildingLevels(GuildBuilding.GUILD_BOSS-1);return this.learnLab.visible=!1,0==o?(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101801),this.learnLab.visible=!0,this.priceIcon.visible=!1,this.callBtn.visible=!1,void(this.tip1Label.visible=!1)):void UIHelper.SetLinkStyleLabel(this.getwayLabel,GlobalConfig.jifengTiaoyueLg.st101802)},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.callBtn:if(GuildBoss.ins().times()>=GuildBoss.ins().GetMaxCallTimes())return void UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101803);var t=this._GetCallIndex(),i=GlobalConfig.ins("GuildBossConfig")[t];i&&Checker.Money(MoneyConst.yuanbao,i.soul)&&GuildBoss.ins().SendBossCall();break;case this.getwayLabel:ViewManager.ins().open(GuildBossRewardPanel)}},t.prototype._UpateCallNum=function(e,t){this.callNumLabel.text=GlobalConfig.jifengTiaoyueLg.st101804+("："+e+"/"+t)},t.prototype.onLink=function(){ViewManager.ins().close(this),ViewManager.ins().open(GuildWin,1)},t.prototype._UpdatePrice=function(e){this.priceIcon.price=e},t.prototype._GetCallIndex=function(){return GuildBoss.ins().GetMaxCallIndex()||1},t.prototype.UpdateContent=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(GuildBossCallPanel.prototype,"GuildBossCallPanel",["ICommonWindow","ICommonWindowTitle"]),window.GuildBossCallPanel=GuildBossCallPanel;var GuildBossHuntph=function(e){function t(){var t=e.call(this)||this;return t.mWindowHelpId=0,t.skinName="GuildBossHurtph",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st101807+"：",this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st100400,this.languageTxt1.text=GlobalConfig.jifengTiaoyueLg.st101174,this.languageTxt2.text=GlobalConfig.jifengTiaoyueLg.st101808},t.prototype.open=function(){for(var e=GuildBoss.ins().GetCallInfo().rankDatas,t=[],i=0;i<e.length;i++){var o={num:i+1,name:e[i].name,value:CommonUtils.overLength(e[i].value)};t.push(o)}this.commonWindowBg.OnAdded(this);for(var s=GlobalConfig.jifengTiaoyueLg.st100086,n=0,i=0;i<e.length;++i){var r=e[i];r.dbid==GameGlobal.actorModel.actorID&&(s=i+1+"",n=r.value)}this.myph.text=s,this.myhunt.text=CommonUtils.overLength(n)+"",this.list.dataProvider=new eui.ArrayCollection(t)},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(GuildBossHuntph.prototype,"GuildBossHuntph",["ICommonWindow"]),ViewManager.ins().reg(GuildBossHuntph,LayerManager.UI_Main),window.GuildBossHuntph=GuildBossHuntph;var GuildBossReadyPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101805,t.mWindowHelpId=24,t.skinName="GuildBossReadyPanelSkin",t.dataGroup.itemRenderer=ItemBase,t.hpProgress.slideDuration=0,t.hpProgress.labelFunction=function(e,t){return Math.floor(e/t*100)+"%"},t}return __extends(t,e),t.prototype.childrenCreated=function(){this.dataGroup.itemRenderer=ItemBase,this.callBtn.label=GlobalConfig.jifengTiaoyueLg.st101810,this.rankBtn.label=GlobalConfig.jifengTiaoyueLg.st101811,this.tip2Label.text=GlobalConfig.jifengTiaoyueLg.st101812,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st101813,this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st101814,this.languageTxt1.text=GlobalConfig.jifengTiaoyueLg.st101815},t.prototype.initMc=function(){this.bossImage||(this.bossImage=new MovieClip,this.bossGroup.addChild(this.bossImage))},t.prototype.open=function(){this.commonWindowBg.OnAdded(this),this.AddClick(this.rankBtn,this._OnClick),this.AddClick(this.callBtn,this._OnClick),this.AddClick(this.getwayLabel,this._OnClick),this.hpProgress.maximum=100,this.hpProgress.value=100,this._UpdateData(),TimerManager.ins().doTimer(1e3,0,this._UpdateTip1,this),GameGlobal.MessageCenter.addListener(MessageDef.GUILD_BOSS_CALL_INFO,this._UpdateData,this),GameGlobal.MessageCenter.addListener(MessageDef.GUILD_BOSS_OPEN_INFO,this._UpdateData,this),GuildBoss.ins().SendGetBossInfo()},t.prototype.close=function(){GameGlobal.MessageCenter.removeListener(MessageDef.GUILD_BOSS_CALL_INFO,this._UpdateData,this),GameGlobal.MessageCenter.removeListener(MessageDef.GUILD_BOSS_OPEN_INFO,this._UpdateData,this),DisplayUtils.dispose(this.bossImage),this.bossImage=null,this.commonWindowBg.OnRemoved(),TimerManager.ins().remove(this._UpdateTip1,this)},t.prototype._UpdateData=function(){this.hpProgress.value=GuildBoss.ins().HpPercent(),this._UpdateTip1();var e=GuildBoss.ins().GetCallInfo();if(e){var t=GlobalConfig.ins("GuildBossConfig")[GuildBoss.ins().GetBossIndex()];if(t){this.dataGroup.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(t.limitRewards1)),GuildBossViewHelper.SetRoleHead(this.callRole,e.callName,e.callOffice,e.callHead);var i=e.rankDatas[0];null==i?(GuildBossViewHelper.SetRoleHead(this.rankRole,GlobalConfig.jifengTiaoyueLg.st100378,null,0),this.hurtLabel.text=GlobalConfig.jifengTiaoyueLg.st101808+"："+CommonUtils.overLength(0)):(GuildBossViewHelper.SetRoleHead(this.rankRole,i.name,i.office,i.head),this.hurtLabel.text=GlobalConfig.jifengTiaoyueLg.st101808+"："+CommonUtils.overLength(i.value)),this.initMc(),UIHelper.SetMonsterMc(this.bossImage,t.bossId),GuildBossViewHelper.SetBossLv(this.bossLvComp,t.level,t.zsLevel)}}},t.prototype._OnClick=function(e){switch(e.target){case this.callBtn:GuildBoss.ins().SendBossFight(),ViewManager.ins().close(this);break;case this.getwayLabel:ViewManager.ins().open(GuildBossRewardPanel);break;case this.rankBtn:ViewManager.ins().open(GuildBossHuntph)}},t.prototype._UpdateTip1=function(){var e=GuildBoss.ins().GetSurplusTime(),t=Math.ceil(e/60);this.tip1Label.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101809,[t])},t.prototype.UpdateContent=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(GuildBossReadyPanel.prototype,"GuildBossReadyPanel",["ICommonWindow","ICommonWindowTitle"]),window.GuildBossReadyPanel=GuildBossReadyPanel;var GuildBossRewardCall=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuildBossRewardCallSkin",t
}return __extends(t,e),t.prototype.childrenCreated=function(){this.dataGroup.itemRenderer=ItemBase,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st101806,this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st101816},t.prototype.initMc=function(){this.bossImage||(this.bossImage=new MovieClip,this.bossGroup.addChild(this.bossImage))},t.prototype.open=function(){var e=this._GetCallIndex(),t=GlobalConfig.ins("GuildBossConfig")[e];GuildBossViewHelper.SetBossLv(this.bossLvComp,t.level,t.zsLevel),this.dataGroup.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(t.zhrewards)),this.initMc(),UIHelper.SetMonsterMc(this.bossImage,t.bossId)},t.prototype.close=function(){MessageCenter.ins().removeAll(this),DisplayUtils.dispose(this.bossImage),this.bossImage=null},t.prototype._GetCallIndex=function(){return GuildBoss.ins().GetMaxCallIndex()||1},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(GuildBossRewardCall.prototype,"GuildBossRewardCall",["ICommonWindowTitle"]),window.GuildBossRewardCall=GuildBossRewardCall;var GuildBossRewardHurt=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuildBossRewardHurtSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st101817},t.prototype.open=function(){var e=this._GetCallIndex(),t=GlobalConfig.ins("GuildBossConfig")[e],i=GlobalConfig.ins("GuildBossDLConfig"),o=[{num:GuildBossViewHelper.setph(i[1].upperlimit,i[1].lowerlimit),data:new eui.ArrayCollection(t.limitRewards1)},{num:GuildBossViewHelper.setph(i[2].upperlimit,i[2].lowerlimit),data:new eui.ArrayCollection(t.limitRewards2)},{num:GuildBossViewHelper.setph(i[3].upperlimit,i[3].lowerlimit),data:new eui.ArrayCollection(t.limitRewards3)},{num:GuildBossViewHelper.setph(i[4].upperlimit,i[4].lowerlimit),data:new eui.ArrayCollection(t.limitRewards4)},{num:GuildBossViewHelper.setph(i[5].upperlimit,i[5].lowerlimit),data:new eui.ArrayCollection(t.limitRewards5)}];this.list.dataProvider=new eui.ArrayCollection(o)},t.prototype.close=function(){MessageCenter.ins().removeAll(this)},t.prototype._GetCallIndex=function(){return GuildBoss.ins().GetMaxCallIndex()||1},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(GuildBossRewardHurt.prototype,"GuildBossRewardHurt",["ICommonWindowTitle"]),window.GuildBossRewardHurt=GuildBossRewardHurt;var GuildBossRewardJoin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuildBossRewardJoinSkin",t}return __extends(t,e),t.prototype.open=function(){var e=this._GetCallIndex(),t=GlobalConfig.ins("GuildBossConfig")[e];GuildBossViewHelper.SetBossLv(this.bossLvComp,t.level,t.zsLevel),this.dataGroup.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(t.cyrewards)),this.initMc(),UIHelper.SetMonsterMc(this.bossImage,t.bossId)},t.prototype.close=function(){DisplayUtils.dispose(this.bossImage),this.bossImage=null,MessageCenter.ins().removeAll(this)},t.prototype.childrenCreated=function(){this.dataGroup.itemRenderer=ItemBase,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st101819,this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st101818},t.prototype.initMc=function(){this.bossImage||(this.bossImage=new MovieClip,this.bossGroup.addChild(this.bossImage))},t.prototype._GetCallIndex=function(){return GuildBoss.ins().GetMaxCallIndex()||1},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(GuildBossRewardJoin.prototype,"GuildBossRewardJoin",["ICommonWindowTitle"]),window.GuildBossRewardJoin=GuildBossRewardJoin;var GuildBossRewardPanel=function(e){function t(){var t=e.call(this)||this;return t.mWindowHelpId=24,t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.guildBossRewardJoin=new GuildBossRewardJoin,this.guildBossRewardJoin.name=GlobalConfig.jifengTiaoyueLg.st101818,this.commonWindowBg.AddChildStack(this.guildBossRewardJoin),this.guildBossRewardCall=new GuildBossRewardCall,this.guildBossRewardCall.name=GlobalConfig.jifengTiaoyueLg.st101806,this.commonWindowBg.AddChildStack(this.guildBossRewardCall),this.guildBossRewardHurt=new GuildBossRewardHurt,this.guildBossRewardHurt.name=GlobalConfig.jifengTiaoyueLg.st101815,this.commonWindowBg.AddChildStack(this.guildBossRewardHurt)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e&&e[0])},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t}(BaseEuiPanel);__reflect(GuildBossRewardPanel.prototype,"GuildBossRewardPanel",["ICommonWindow"]),ViewManager.ins().reg(GuildBossRewardPanel,LayerManager.UI_Main),window.GuildBossRewardPanel=GuildBossRewardPanel;var GuildBossViewHelper=function(){function e(){}return e.SetBossLv=function(e,t,i){var o=e.lvLabel;80>t&&o&&(o.text=t+GlobalConfig.jifengTiaoyueLg.st100093),80==t&&0==i&&o&&(o.text=t+GlobalConfig.jifengTiaoyueLg.st100093),t>=80&&0!=i&&o&&(o.text=i+GlobalConfig.jifengTiaoyueLg.st100067),e.languageText.text=GlobalConfig.jifengTiaoyueLg.st101805},e.setph=function(e,t){return e!=t?t+"~"+e:e},e.SetRoleHead=function(e,t,i,o){e.roleHead&&UIHelper.SetHeadByHeadId(e.roleHead,o),e.roleTItle&&(e.roleTItle.text=GuildLanguage.guildOffice(i)||""),e.roleName&&(e.roleName.text=t||GlobalConfig.jifengTiaoyueLg.st100378)},e}();__reflect(GuildBossViewHelper.prototype,"GuildBossViewHelper"),window.GuildBossViewHelper=GuildBossViewHelper;var GuildReward=function(e){function t(){var t=e.call(this)||this;return t.m_IsFirstWinner=null,t.m_RedInfo=null,t.m_Winner=null,t.m_DayawardInfo=null,t.kF_m_DayawardInfo=null,t.m_DispInfo=null,t.kFm1_DispInfo=null,t.kFm2_DispInfo=null,t.m_WinnerInfo=null,t.m_GuildRankData=null,t.m_PersonalRankData=null,t.m_MyGuildRankInfo=null,t.sendList=[],t.sendNumList=[],t.myGuildPointRank=[],t.regNetMsg(S2cProtocol.sc_guildwar_redpacket_info,t._DoInfo),t.regNetMsg(S2cProtocol.sc_guildwar_send_redpacket_ret,t._DoRedRet),t.regNetMsg(S2cProtocol.sc_guildwar_get_redpacket_ret,t._DoGetRedRet),t.regNetMsg(S2cProtocol.sc_guildwar_winner,t._DoWinner),t.regNetMsg(S2cProtocol.sc_guildwar_dayaward_info,t._DoDayawardInfo),t.regNetMsg(S2cProtocol.sc_guildwar_disp_info,t._DoDispInfo),t.regNetMsg(S2cProtocol.sc_guildwar_disp_ret,t._DoDispRet),t.regNetMsg(S2cProtocol.sc_guildwar_winner_info,t._DoWinnerInfo),t.regNetMsg(S2cProtocol.sc_guildwar_guild_scores,t._DoUpdateGuildRankData),t.regNetMsg(S2cProtocol.sc_guildwar_actor_scores,t._DoUpdatePersonalRankData),t.regNetMsg(S2cProtocol.sc_gdwar_guild_member,t._DoUpdateMyGuildRankInfo),t.regNetMsg(S2cProtocol.sc_guildwar_firstwinner_awardinfo,t._DoFirstWinner),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype._DoFirstWinner=function(e){this.m_IsFirstWinner=e.canAward,GameGlobal.MessageCenter.dispatch(MessageDef.GUILDWAR_FIRST_WINNER)},t.prototype.GetFirstRewardState=function(){return null==this.m_IsFirstWinner?RewardState.NotReached:0==this.m_IsFirstWinner?RewardState.Gotten:RewardState.CanGet},t.prototype._DoInfo=function(e){this.m_RedInfo=e,GameGlobal.MessageCenter.dispatch(MessageDef.GUILDWAR_REDBAGINFO_CHANGE)},t.prototype._DoRedRet=function(e){e.success&&(ViewManager.ins().close(GuildWarRedBagPanel),UserTips.InfoTip2(GlobalConfig.jifengTiaoyueLg.st101593))},t.prototype._DoGetRedRet=function(e){e.success&&ViewManager.ins().close(GuildWarRedBagPanel)},t.prototype._DoWinner=function(e){this.m_Winner=e},t.prototype._DoDayawardInfo=function(e){e.type&&e.type>0?this.kF_m_DayawardInfo=e:this.m_DayawardInfo=e,GameGlobal.MessageCenter.dispatch(MessageDef.GUILDWAR_GETDAY_REWARD)},t.prototype._DoDispInfo=function(e){switch(e.type){case 1:this.kFm1_DispInfo=e;break;case 2:this.kFm2_DispInfo=e;break;default:this.m_DispInfo=e}GameGlobal.MessageCenter.dispatch(MessageDef.GUILD_REWARD_UPDATE_DISP_INFO)},t.prototype._DoDispRet=function(e){e.success&&(ViewManager.ins().close(SelectMemberRewardWin),1==e.type?this.kFm1_DispInfo&&(this.kFm1_DispInfo.canDisp=!1):2==e.type?this.kFm2_DispInfo&&(this.kFm2_DispInfo.canDisp=!1):this.m_DispInfo&&(this.m_DispInfo.canDisp=!1),UserTips.InfoTip(GlobalConfig.jifengTiaoyueLg.st101594),GameGlobal.MessageCenter.dispatch(MessageDef.GUILDWAR_SENDREWARD_SUCCESS))},t.prototype._DoWinnerInfo=function(e){this.m_WinnerInfo=e,GameGlobal.MessageCenter.dispatch(MessageDef.GUILD_REWARD_WINNER_INFO)},t.prototype._DoUpdateGuildRankData=function(e){e&&e.scores&&e.scores.sort(function(e,t){return t.score-e.score}),this.m_GuildRankData=e,GameGlobal.MessageCenter.dispatch(MessageDef.GUILDWAR_RANK_INFO)},t.prototype._DoUpdatePersonalRankData=function(e){if(e&&e.scores){e.scores.sort(function(e,t){return t.score-e.score});for(var t=0,i=e.scores;t<i.length;t++){var o=i[t],s=o.actorname;o.actorname=o.guildname,o.guildname=s}}this.m_PersonalRankData=e,GameGlobal.MessageCenter.dispatch(MessageDef.GUILDWAR_PERSONAL_RANK_INFO)},t.prototype._DoUpdateMyGuildRankInfo=function(e){this.m_MyGuildRankInfo=e,GameGlobal.MessageCenter.dispatch(MessageDef.GUILDWAR_MYRANK_CHANGE)},t.prototype.SendRedpacket=function(e,t){var i=new Sproto.cs_guildwar_send_redpacket_request;i.yuanbao=e,i.number=t,i.type=this.getRedBagType,this.Rpc(C2sProtocol.cs_guildwar_send_redpacket,i)},t.prototype.SendGetRedpacket=function(){var e=new Sproto.cs_guildwar_get_redpacket_request;e.type=this.getRedBagType,this.Rpc(C2sProtocol.cs_guildwar_get_redpacket,e)},t.prototype.SendGetDayaward=function(e){var t=new Sproto.cs_guildwar_get_dayaward_request;t.type=e,t.day=e&&e>0?this.kFrewardDay:this.rewardDay,this.Rpc(C2sProtocol.cs_guildwar_get_dayaward,t)},t.prototype.SendDispAward=function(){for(var e=this.getCanSendNumByRank(),t=this.sendList,i=this.sendNumList,o=[],s=0;e>s;++s){for(var n=[],r=i[s],a=t[s],l=0;l<r.length;++l)for(var h=r[l],c=0;h>c;++c)n.push(a[l].data.roleID);var u=new Sproto.guildwar_disp_info;u.id=s+1,u.actorids=n,o.push(u)}var d=new Sproto.cs_guildwar_disp_award_request;d.dispInfos=o,d.type=SelectMemberRewardWin.dispIndex,this.Rpc(C2sProtocol.cs_guildwar_disp_award,d)},t.prototype.SendWinnerInfo=function(e){var t=new Sproto.cs_guildwar_get_winnerinfo_request;t.type=e,this.Rpc(C2sProtocol.cs_guildwar_get_winnerinfo,t)},t.prototype.SendKfGuildLastRank=function(){var e=new Sproto.sc_guildwar_get_guild_scores_request;e.type=2,this.Rpc(C2sProtocol.sc_guildwar_get_guild_scores,e)},t.prototype.SendGuildRank=function(){GuildWar.ins().isWatStart?this.Rpc(C2sProtocol.cs_gdwar_guild_rank):this.Rpc(C2sProtocol.sc_guildwar_get_guild_scores)},t.prototype.SendPersonalRank=function(){GuildWar.ins().isWatStart?this.Rpc(C2sProtocol.cs_gdwar_actor_rank):this.Rpc(C2sProtocol.sc_guildwar_get_actor_scores)},t.prototype.SendGetFirstwinnerAward=function(){this.Rpc(C2sProtocol.cs_guildwar_get_firstwinner_award)},t.prototype.SendGetMyGuildRank=function(){this.Rpc(C2sProtocol.cs_gdwar_guild_member)},Object.defineProperty(t.prototype,"guildRankList",{get:function(){return this.m_GuildRankData?this.m_GuildRankData.scores:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"upGuildName",{get:function(){return this.m_GuildRankData?this.m_GuildRankData.upGuildName||"":""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"upReason",{get:function(){return this.m_GuildRankData?this.m_GuildRankData.upReason||0:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"guildPersonalRankList",{get:function(){return this.m_PersonalRankData?this.m_PersonalRankData.scores:[]},enumerable:!0,configurable:!0}),t.prototype.GetWinner=function(){return this.m_Winner?this.m_Winner.guildname:""},Object.defineProperty(t.prototype,"getRedBagType",{get:function(){return this.m_RedInfo&&this.m_RedInfo.type?this.m_RedInfo.type:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canSend",{get:function(){return this.m_RedInfo?this.m_RedInfo.canSend:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canRod",{get:function(){return this.m_RedInfo?this.m_RedInfo.canGet:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getRedBagNum",{get:function(){return this.rebList.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"redBagCount",{get:function(){return this.m_RedInfo?this.m_RedInfo.count:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"redBagSurplusTime",{get:function(){return this.m_RedInfo?Math.max(this.m_RedInfo.endTime-GameServer.serverTime,0):0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"remainYB",{get:function(){return this.m_RedInfo?this.m_RedInfo.sendYuanbao:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sendYbNum",{get:function(){return this.m_RedInfo?this.m_RedInfo.allYuanbao:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxRedNum",{get:function(){return this.m_RedInfo?this.m_RedInfo.count:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"robYbNum",{get:function(){if(this.m_RedInfo)for(var e=0,t=this.m_RedInfo.getInfos;e<t.length;e++){var i=t[e];if(i.actorid==GameGlobal.actorModel.actorID)return i.yuanbao}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"remainRedNum",{get:function(){return this.m_RedInfo?this.m_RedInfo.leftCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rebList",{get:function(){return this.m_RedInfo?this.m_RedInfo.getInfos:[]},enumerable:!0,configurable:!0}),t.prototype.isHaveRedBag=function(){return this.redBagSurplusTime>0&&(this.canSend||this.canRod||this.getRedBagNum>0)},t.prototype.IsRedPointRedBag=function(){return this.redBagSurplusTime>0&&(this.canSend||this.canRod)},t.prototype.IsRedPointByDay=function(){return this.canGetDay&&!this.getDayReward},t.prototype.IsRedPointByKfDay=function(){return this.canKfGetDay&&!this.getKfDayReward},t.prototype.IsShowRedPoint=function(){return this.IsRedPointRedBag()||this.IsRedPointByDay()||this.IsRedPointByKfDay()},Object.defineProperty(t.prototype,"winGuildInfo",{get:function(){return this.m_WinnerInfo?this.m_WinnerInfo:{guildid:0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canGetDay",{get:function(){return this.m_DayawardInfo?this.m_DayawardInfo.canGet:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canKfGetDay",{get:function(){return this.kF_m_DayawardInfo?this.kF_m_DayawardInfo.canGet:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getDayReward",{get:function(){return this.m_DayawardInfo?this.m_DayawardInfo.isGet:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getKfDayReward",{get:function(){return this.kF_m_DayawardInfo?this.kF_m_DayawardInfo.isGet:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rewardDay",{get:function(){return this.m_DayawardInfo?this.m_DayawardInfo.day:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kFrewardDay",{get:function(){return this.kF_m_DayawardInfo?this.kF_m_DayawardInfo.day:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kFrewardType",{get:function(){return this.kF_m_DayawardInfo?this.kF_m_DayawardInfo.type:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"guildWarRank",{get:function(){return this.m_DispInfo?this.m_DispInfo.guildrank:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kF1guildWarRank",{get:function(){return this.kFm1_DispInfo?this.kFm1_DispInfo.guildrank:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kF2guildWarRank",{get:function(){return this.kFm2_DispInfo?this.kFm2_DispInfo.guildrank:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canSendReward",{get:function(){return this.m_DispInfo?this.m_DispInfo.canDisp:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canSendReward1",{get:function(){return this.kFm1_DispInfo?this.kFm1_DispInfo.canDisp:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canSendReward2",{get:function(){return this.kFm2_DispInfo?this.kFm2_DispInfo.canDisp:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"myRankList",{get:function(){if(this.m_MyGuildRankInfo){for(var e=[],t=0,i=this.m_MyGuildRankInfo.datas;t<i.length;t++){var o=i[t],s=new MyGuildRankInfo;s.ToData(o),e.push(s)}return e}return[]},enumerable:!0,configurable:!0}),t.prototype.getCanSendNumByRank=function(e){void 0===e&&(e=-1);var i,o;1==SelectMemberRewardWin.dispIndex?(i=t.ins().kF1guildWarRank,o=GlobalConfig.ins("GuildBattleDistributionAward1")):2==SelectMemberRewardWin.dispIndex?(i=t.ins().kF2guildWarRank,o=GlobalConfig.ins("GuildBattleDistributionAward2")):(i=t.ins().guildWarRank,o=GlobalConfig.ins("GuildBattleDistributionAward"));var s=o[i],n=0;for(var r in s){if(r==e+"")return s[r].count;++n}return n},t.prototype.getSelectDataByIndex=function(e){var t=[];if(this.sendList&&this.sendList[e]&&this.sendList[e].length>0)for(var i=this.sendList[e],o=this.sendNumList[e],s=0;s<i.length;s++){var n=new SelectInfoData;n.data=i[s].data,n.num=o[s],t.push(n)}return t},t.prototype.getMyGuildPointRank=function(){var e=Guild.ins().getGuildMembers(0),t=e.length;this.myGuildPointRank=[];for(var i=0;t>i;i++){var o=e[i],s=new SelectInfoData;s.data=o,s.num=this.getPointByAcId(o.roleID),this.myGuildPointRank.push(s)}return this.myGuildPointRank.sort(this.sort),this.myGuildPointRank},t.prototype.sort=function(e,t){var i=e.num,o=t.num;return i>o?-1:o>i?1:0},t.prototype.getPointByAcId=function(e){var t=null;if(t=1==SelectMemberRewardWin.dispIndex?this.kFm1_DispInfo:2==SelectMemberRewardWin.dispIndex?this.kFm2_DispInfo:this.m_DispInfo,null==t||null==t.scores)return 0;for(var i=0,o=t.scores;i<o.length;i++){var s=o[i];if(s.actorid==e)return s.score}return 0},t.prototype.checkISSendAll=function(){for(var e=this.getCanSendNumByRank(),t=0;e>t;t++){var i=this.getCanSendNumByRank(t);if(!this.sendList[t])return UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101595),!1;for(var o=0,s=0;s<this.sendNumList[t].length;s++)o+=this.sendNumList[t][s];if(i>o)return UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101595),!1;for(var n=0;n<this.sendList[t].length;n++)if(!Guild.ins().checkIsInGuild(this.sendList[t][n].data.roleID))return UserTips.ErrorTip(this.sendList[t][n].data.name+" "+GlobalConfig.jifengTiaoyueLg.st101596),!1}return!0},t}(BaseSystem);__reflect(GuildReward.prototype,"GuildReward"),window.GuildReward=GuildReward;var GuildWar=function(e){function t(){var t=e.call(this)||this;return t.weixieList=[],t.canPlayList=[],t.m_MyGuildNum=0,t.rankList=[],t.m_PreClickTime=0,t.m_KillData=null,t.attHandle=0,t.m_FlagData=null,t.mFlagNotice=null,t.acEndTime=0,t.isWatStart=!1,t.kFisWatStart=!1,t.guildWarStartType=0,t.dataList=null,t.configList=null,t.rewardList=null,t.regNetMsg(S2cProtocol.sc_gdwar_wall_rank,t._DoWallRank),t.regNetMsg(S2cProtocol.sc_gdwar_lottery_start,t._DoLotteryStart),t.regNetMsg(S2cProtocol.sc_gdwar_lottery_over,t._DoLotteryOver),t.regNetMsg(S2cProtocol.sc_gdwar_lottery_point,t._DoLotteryPoint),t.regNetMsg(S2cProtocol.sc_gdwar_wall_reward,t._DoWallReward),t.regNetMsg(S2cProtocol.sc_gdwar_actor_data,t._DoActorData),t.regNetMsg(S2cProtocol.sc_gdwar_attackers,t._DoAttacker),t.regNetMsg(S2cProtocol.sc_gdwar_enemies,t._DoEnemies),t.regNetMsg(S2cProtocol.sc_gdwar_start_info,t._DoStartInfo),t.regNetMsg(S2cProtocol.sc_gdwar_kill_info,t._DoGuildWarKillInfo),t.regNetMsg(S2cProtocol.sc_gdwar_city_owner_change,t._DoOwnerChange),t.regNetMsg(S2cProtocol.sc_gdwar_attack_change,t._DoChangeAttrHandle),t.regNetMsg(S2cProtocol.sc_gdwar_flag_data,t._DoUpdateFlagData),t.regNetMsg(S2cProtocol.sc_gdwar_reward,t._DoFinishReward),t.regNetMsg(S2cProtocol.sc_gdwar_base_info,t._DoGuildBaseInfo),t.regNetMsg(S2cProtocol.sc_gdwar_flag_notice,t._DoFlagNotice),t.regNetMsg(S2cProtocol.sc_gdwar_guild_group,t._kFguildGroupInfoRep),t.regNetMsg(S2cProtocol.sc_guildwar_kffz_info,t._kFLastGroupingInfoRep),GameGlobal.MessageCenter.addListener(MessageDef.FUBEN_CHANGE,t._DoCheckShowUI,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype._DoCheckShowUI=function(){if(this.checkinAppoint()){if(ViewManager.ins().open(GuildWarInfoPanel),this.checkinAppoint(1)&&!this.IsDoorDie()?ViewManager.ins().open(GuildWarGateBloodPanel):ViewManager.ins().close(GuildWarGateBloodPanel),ViewManager.ins().isShow(GuileWarReliveWin)){var e=ViewManager.ins().getView(GuileWarReliveWin);e&&2!=e.type&&ViewManager.ins().close(GuileWarReliveWin)}}else ViewManager.ins().close(GuildWarInfoPanel),ViewManager.ins().close(GuildWarGateBloodPanel),ViewManager.ins().close(GuileWarReliveWin)},t.prototype.SendKFjoinWar=function(){var e=new Sproto.cs_gdwar_enter_cross_request;e.warType=1,this.Rpc(C2sProtocol.cs_gdwar_enter_cross,e)},t.prototype.SendJoinWar=function(){this.SendEnterCityType(1)},t.prototype.SendEnterCity=function(){this.SendEnterCityType(2)},t.prototype.SendEnterPalace=function(){this.SendEnterCityType(3)},t.prototype.SendEnterKing=function(){this.SendEnterCityType(4)},t.prototype.SendEnterCityType=function(e){var t=new Sproto.cs_gdwar_enter_city_request;t.index=e,this.Rpc(C2sProtocol.cs_gdwar_enter_city,t)},t.prototype.SendNextMap=function(){if(GameMap.IsNoramlLevel())return!1;var e,t=null,i=GameMap.fubenID;e=1==this.guildWarStartType?GlobalConfig.ins("GuildBattleLevel1"):2==this.guildWarStartType?GlobalConfig.ins("GuildBattleLevel2"):GlobalConfig.ins("GuildBattleLevel");for(var o in e){var s=e[o];if(s.fbId==i){t=s.nextLevel;break}}if(t)switch(t){case 2:this.SendEnterCity();break;case 3:this.SendEnterPalace();break;case 4:this.SendEnterKing();break;default:console.log("GuildWar.SendNextMap not nextLevel ",t)}else console.log("GuildWar.SendNextMap nextLevel == null")},t.prototype.SendExitFb=function(){this.Rpc(C2sProtocol.cs_gdwar_leave)},t.prototype.SendUpdate=function(){this.Rpc(C2sProtocol.cs_gdwar_update)},t.prototype.SendAttackMonster=function(){this.Rpc(C2sProtocol.cs_gdwar_attack_monster)},t.prototype.SendAttackPlayer=function(e){var t=new Sproto.cs_gdwar_attack_player_request;t.dbid=e,this.Rpc(C2sProtocol.cs_gdwar_attack_player,t),this.m_PreClickTime=GameServer.serverTime},t.prototype._DoActorData=function(e){var t=this.IsDoorDie(),i=this.m_ActorData?this.m_ActorData.point:null;if(this.m_ActorData=e,this.IsDoorDie()&&ViewManager.ins().close(GuildWarGateBloodPanel),this.IsDoorDie()!=t&&GameGlobal.MessageCenter.dispatch(MessageDef.GUILD_WAR_DOORSTATU_CHANGE),i&&this.GetMyPoint()!=i){var o=this.GetMyPoint()-i;o>0&&UserTips.InfoTip(GlobalConfig.jifengTiaoyueLg.st101534+" "+o+GlobalConfig.jifengTiaoyueLg.st101037),GameGlobal.MessageCenter.dispatch(MessageDef.GUILDWAR_POINT_UPDATE)}GameGlobal.MessageCenter.dispatch(MessageDef.GUILDWAR_ACTOR_UPDATE)},t.prototype._DoStartInfo=function(e){void 0==e.warType||0==e.warType?this.isWatStart=e.isWarStart:this.kFisWatStart=e.isWarStart,this.acEndTime=e.endTime,this.guildWarStartType=e.warType,GameGlobal.MessageCenter.dispatch(MessageDef.GUILDWAR_STARTSTATU_CHANGE)},t.prototype._DoAttacker=function(e){for(var t,i=0,o=e.datas;i<o.length;i++){var s=o[i];if(s.actorId==this.attHandle){t=!0;break}}t||(this.attHandle=0),this.canPlayList=e.datas,this.m_MyGuildNum=e.nums,GameGlobal.MessageCenter.dispatch(MessageDef.GUILD_WAR_UPDATE_TARGETS)},t.prototype._DoEnemies=function(e){this.weixieList=e.datas,GameGlobal.MessageCenter.dispatch(MessageDef.GUILD_WAR_UPDATE_ENEMIES)},t.prototype._DoWallRank=function(e){GuildWarGateBloodPanel.Update(e)},t.prototype._DoLotteryStart=function(){1==this.guildWarStartType?this.gateLotteryItemConfig=GlobalConfig.ins("GuildBattleConst1"):2==this.guildWarStartType?this.gateLotteryItemConfig=GlobalConfig.ins("GuildBattleConst2"):this.gateLotteryItemConfig=GlobalConfig.ins("GuildBattleConst"),ZsBoss.ins().lotteryItemId=this.gateLotteryItemConfig.gateLotteryItem.id,ViewManager.ins().open(ZSBossLotteryWin,1)},t.prototype._DoLotteryOver=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.ZS_BOSS_LOTTERY_MAX_POINT,e.name,e.point)},t.prototype._DoLotteryPoint=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.ZS_BOSS_GETMY_LOTTERY_POINT,e.point)},t.prototype._DoWallReward=function(e){},t.prototype._DoGuildWarKillInfo=function(e){this.m_KillData=e,ViewManager.ins().open(GuileWarReliveWin,2,e.cd)},t.prototype._DoOwnerChange=function(e){this.m_CityOwner=e,GameGlobal.MessageCenter.dispatch(MessageDef.GUILD_WAR_CITYOWN_CHANGE)},t.prototype._DoChangeAttrHandle=function(e){this.GetAttHandle()!=e.handle&&(this.attHandle=e.handle,EntityManager.ins().showHideSomeOne(this.attHandle))},t.prototype._DoUpdateFlagData=function(e){this.m_FlagData=e,GameGlobal.MessageCenter.dispatch(MessageDef.GUILDWAR_HUDUN_INFO)},t.prototype._DoFinishReward=function(e){ViewManager.ins().open(GuildWarResultWin,e),this.m_FlagData&&(this.m_FlagData.holderId=0)},t.prototype._DoGuildBaseInfo=function(e){this.m_BaseInfo=e,GameGlobal.MessageCenter.dispatch(MessageDef.GUILDWAR_UPDATE_BASE_INFO)},t.prototype._DoFlagNotice=function(e){this.mFlagNotice=e,GameGlobal.MessageCenter.dispatch(MessageDef.GUILDWAR_FLAG_NOTICE)},t.prototype.SendLotteryStart=function(){this.Rpc(C2sProtocol.cs_gdwar_lottery_start)},t.prototype.SendGetFlag=function(){this.Rpc(C2sProtocol.cs_gdwar_click_flag)},t.prototype.SendPointGuildWar=function(){this.Rpc(C2sProtocol.cs_gdwar_integral_reward)},t.prototype.HasAttack=function(){return this.GetAttHandle()>1},t.prototype.GetAttHandle=function(){return this.attHandle},t.prototype.GetGongxun=function(){return this.m_ActorData?this.m_ActorData.feats:0},t.prototype.GetGuildNum=function(){return this.m_MyGuildNum||0},t.prototype.GetGuildPoint=function(){return this.m_BaseInfo?this.m_BaseInfo.guildIntegral:0},t.prototype.GetMyPoint=function(){return this.m_ActorData?this.m_ActorData.point:0},t.prototype.GetCityOwn=function(){return""},t.prototype.IsDoorDie=function(){return this.m_ActorData?this.m_ActorData.cityStatus:!1},t.prototype.GetFlagStatu=function(){return this.GetFlagStartSurplusTime()>0?GuildWarFlagState.NONE:this.m_FlagData?0==this.m_FlagData.holderId?GuildWarFlagState.CAN_GATHER:GuildWarFlagState.GATHER:GuildWarFlagState.CAN_GATHER},t.prototype.GetFlagName=function(){return this.m_FlagData?this.m_FlagData.holderName:""},t.prototype.GetFlagGuild=function(){return this.m_FlagData?this.m_FlagData.holderGuild:""},t.prototype.GetFlagAcId=function(){return this.m_FlagData?this.m_FlagData.holderId:0},t.prototype.GetFlagSurplusTime=function(){return this.m_FlagData?Math.max(this.m_FlagData.overTime-GameServer.serverTime,0):0},t.prototype.GetHudunRate=function(){return this.m_FlagData?this.m_FlagData.shieldRate:100},t.prototype.GetFlagStartSurplusTime=function(){return this.m_FlagData?Math.max(this.m_FlagData.openTime-GameServer.serverTime,0):0},t.prototype.GetSurplusTime=function(){return this.acEndTime?Math.max(this.acEndTime-GameServer.serverTime,0):0},t.prototype.GetKillName=function(){return this.m_KillData?this.m_KillData.killName:""},t.prototype.GetKillGuild=function(){return this.m_KillData?this.m_KillData.killGuild:""},t.prototype.GetFrontRank=function(){return this.m_BaseInfo?this.m_BaseInfo.datas:[]},t.prototype.CanClick=function(){return this.m_PreClickTime+1<=GameServer.serverTime},t.prototype.getMapLevelInfo=function(){var e,t=GameMap.fubenID;e=1==this.guildWarStartType?GlobalConfig.ins("GuildBattleLevel1"):2==this.guildWarStartType?GlobalConfig.ins("GuildBattleLevel2"):GlobalConfig.ins("GuildBattleLevel");var i=1;for(var o in e)t==e[o].fbId&&(i=e[o].id);return e[i]},t.prototype.getNextMapName=function(e){void 0===e&&(e=1);var t,i=GameMap.fubenID;t=1==this.guildWarStartType?GlobalConfig.ins("GuildBattleLevel1"):2==this.guildWarStartType?GlobalConfig.ins("GuildBattleLevel2"):GlobalConfig.ins("GuildBattleLevel");var o=1;for(var s in t)if(i==t[s].fbId){if(1!=e)return t[s].name;o=t[s].id<4?t[s].id+1:t[s].id-1}return t[o].name},t.GetMapName=function(e){var i;i=1==t.ins().guildWarStartType?GlobalConfig.ins("GuildBattleLevel1"):2==t.ins().guildWarStartType?GlobalConfig.ins("GuildBattleLevel2"):GlobalConfig.ins("GuildBattleLevel");for(var o in i)if(i[o].id==e)return i[o].name;return""},t.prototype.getIntoNextMapGongxun=function(){var e,t=GameMap.fubenID;e=1==this.guildWarStartType?GlobalConfig.ins("GuildBattleLevel1"):2==this.guildWarStartType?GlobalConfig.ins("GuildBattleLevel2"):GlobalConfig.ins("GuildBattleLevel");var i=1;for(var o in e)if(t==e[o].fbId){if(!(e[o].id<4))return 0;i=e[o].id+1}return e[i].feats},t.prototype.checkinAppoint=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=!1),GameMap.IsNoramlLevel())return!1;var i,o=GameMap.fubenID;i=1==this.guildWarStartType?GlobalConfig.ins("GuildBattleLevel1"):2==this.guildWarStartType?GlobalConfig.ins("GuildBattleLevel2"):GlobalConfig.ins("GuildBattleLevel");for(var s in i){var n=i[s];if(n.fbId==o)return 0==e?!0:t&&n.id>e?!0:n.id==e?!0:!1}return!1},t.prototype.GetCurPointRewardId=function(){return this.m_ActorData?this.m_ActorData.step||1:1},t.prototype.CanReward=function(){var e=this.getMyPointReward();return e?this.GetMyPoint()>=e.integral:!1},t.prototype.getMyPointReward=function(){var e,t;t=1==this.guildWarStartType?GlobalConfig.ins("GuildBattlePersonalAward1"):2==this.guildWarStartType?GlobalConfig.ins("GuildBattlePersonalAward2"):GlobalConfig.ins("GuildBattlePersonalAward");for(var i in t)if(e=t[i],e.id==this.GetCurPointRewardId())return e;return null},t.prototype.getCdByType=function(e){if(GameMap.IsNoramlLevel())return 0;var t;t=1==this.guildWarStartType?GlobalConfig.ins("GuildBattleLevel1"):2==this.guildWarStartType?GlobalConfig.ins("GuildBattleLevel2"):GlobalConfig.ins("GuildBattleLevel");for(var i in t)if(t[i].fbId==GameMap.fubenID&&(1==e||3==e))return t[i].switchSceneCd;return 0},t.prototype.getIsShowGuildWarBtn=function(){return this.isWatStart},t.prototype.getIsShowKfGuildWarBtn=function(){return this.kFisWatStart},t.prototype.GetOpenTime=function(e){var t=4,i=20,o=5,s=20;try{e.openServer&&(t=e.openServer.day,i=e.openServer.hours),e.open&&(o=e.open.week,s=e.open.hours)}catch(n){}var r=new Date(1e3*GameServer.serverTime);if(GameServer.serverOpenDay==t&&!this._IsTodayEnd(r,i)||GameServer.serverOpenDay<t){r.setDate(r.getDate()+t-GameServer.serverOpenDay);return r.setHours(i),r.setMinutes(0),r.setSeconds(0),r.getTime()}for(var a=0;20>a;++a){if(GameServer.serverOpenDay+a>=8&&r.getDay()==o&&(0!=a||!this._IsTodayEnd(r,s)))return r.setMinutes(0),r.setSeconds(0),r.getTime();r.setDate(r.getDate()+1)}return 0},t.prototype._IsTodayEnd=function(e,t){var i=e.getHours();return i==t?e.getMinutes()>8:i>t},t.prototype.OtherOperation=function(e){return this.isWatStart?(e&&UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101535+"，"+e),!1):this.kFisWatStart?(e&&UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101536+"，"+e),!1):!0},t.prototype.setOpenDesc=function(){return GlobalConfig.jifengTiaoyueLg.st101537},t.prototype.setAllKFOpenDesc=function(){var e=DateUtils.isOpenDayPreWeek()?GlobalConfig.jifengTiaoyueLg.st101538:GlobalConfig.jifengTiaoyueLg.st101539;return e+GlobalConfig.jifengTiaoyueLg.st101540+"\n"+e+GlobalConfig.jifengTiaoyueLg.st101541},t.prototype.setKF1OpenDesc=function(){var e=DateUtils.isOpenDayPreWeek()?GlobalConfig.jifengTiaoyueLg.st101538:GlobalConfig.jifengTiaoyueLg.st101539;return e+GlobalConfig.jifengTiaoyueLg.st101542},t.prototype.setKF2OpenDesc=function(){var e=DateUtils.isOpenDayPreWeek()?GlobalConfig.jifengTiaoyueLg.st101538:GlobalConfig.jifengTiaoyueLg.st101539;return e+GlobalConfig.jifengTiaoyueLg.st101543},t.prototype.getMyPointRankReward=function(e,t){var i;i=1==t?GlobalConfig.ins("GuildBattlePersonalRankAward1"):2==t?GlobalConfig.ins("GuildBattlePersonalRankAward2"):GlobalConfig.ins("GuildBattlePersonalRankAward");for(var o in i)if(i[o].rank==e)return i[o].award;return[]},t.prototype.creatGuildRankReward=function(e,t){void 0===t&&(t=-1);var i;i=1==this.guildRankRewardType?GlobalConfig.ins("GuildBattleDistributionAward1"):2==this.guildRankRewardType?GlobalConfig.ins("GuildBattleDistributionAward2"):GlobalConfig.ins("GuildBattleDistributionAward"),this.rewardList=[];
var o=i[e];for(var s in o){if(s==t+"")return o[s].awardShow;var n=o[s].awardShow;for(var r in n)this.checkIsHave(n[r])}return this.rewardList},t.prototype.checkIsHave=function(e){for(var t=!1,i=this.rewardList.length,o=0;i>o;o++){var s=this.rewardList[o];s.id==e.id&&s.type==e.type&&(t=!0,this.rewardList[o].count+=e.count)}t||this.rewardList.push(e)},t.prototype.creatGuildRewardList=function(e){if(void 0===e&&(e=0),this.configList)return this.configList;this.configList=[];var t;t=1==e?GlobalConfig.ins("GuildBattleDistributionAward1"):2==e?GlobalConfig.ins("GuildBattleDistributionAward2"):GlobalConfig.ins("GuildBattleDistributionAward");for(var i in t)-1==this.configList.lastIndexOf(t[i][0].rank)&&this.configList.push(t[i][0].rank);return this.configList},t.prototype.sendKFguildGroupInfo=function(){this.Rpc(C2sProtocol.cs_gdwar_guild_get_group)},t.prototype._kFguildGroupInfoRep=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.KF_GUILD_GROUPING_INFO,e)},t.prototype.sendKFLastGroupingInfo=function(){this.Rpc(C2sProtocol.cs_guildwar_get_kffz_info)},t.prototype._kFLastGroupingInfoRep=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.KF_GUILD_LAST_GROUPING_INFO,e)},t}(BaseSystem);__reflect(GuildWar.prototype,"GuildWar"),window.GuildWar=GuildWar;var GuildWarFlagState;!function(e){e[e.NONE=0]="NONE",e[e.CAN_GATHER=1]="CAN_GATHER",e[e.GATHER=2]="GATHER"}(GuildWarFlagState||(GuildWarFlagState={}));var MyGuildRankInfo=function(){function e(){}return e.prototype.ToData=function(e){this.actorId=e.dbid,this.name=e.actorName,this.point=e.integral,this.mapName=GuildWar.GetMapName(e.position),this.attr=e.fightPow,this.office=e.office,this.head=e.headId},e}();__reflect(MyGuildRankInfo.prototype,"MyGuildRankInfo"),window.MyGuildRankInfo=MyGuildRankInfo;var SelectInfoData=function(){function e(){this.num=0,this.chooseNum=0}return e}();__reflect(SelectInfoData.prototype,"SelectInfoData"),window.SelectInfoData=SelectInfoData;var GuildWarMainBgWin=function(e){function t(){var t=e.call(this)||this;return t.mWindowHelpId=null,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.commonWindowBg.AddChildStack(new GuildWarMainPanel),this.commonWindowBg.AddChildStack(new KFguildWarMainPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e[0]?e[0]:0)},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(GuildWarMainBgWin.prototype,"GuildWarMainBgWin",["ICommonWindow"]),ViewManager.ins().reg(GuildWarMainBgWin,LayerManager.UI_Main),window.GuildWarMainBgWin=GuildWarMainBgWin;var KFguildGroupingItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="KFguildGroupingItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data,t=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101051,[StringUtils.numberToEnglishLetter(this.itemIndex+1)]);e.winguild.serverid&&e.winguild.guildname?this.title.textFlow=TextFlowMaker.generateTextFlow(StringUtils.addColor(t+GlobalConfig.jifengTiaoyueLg.st101062,16756817)+StringUtils.addColor(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101050,[e.winguild.serverid,e.winguild.guildname]),3438575)):this.title.textFlow=TextFlowMaker.generateTextFlow(StringUtils.addColor(t+GlobalConfig.jifengTiaoyueLg.st101062,16756817)+StringUtils.addColor(GlobalConfig.jifengTiaoyueLg.st100378,3438575)),this.groupingTitle.text=t+GlobalConfig.jifengTiaoyueLg.st100896;for(var i=0;i<e.guildlist.length;i++){var o=e.guildlist[i];this["grouping"+i]&&o&&(this["grouping"+i].text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101050,[o.serverid,o.guildname]))}},t}(eui.ItemRenderer);__reflect(KFguildGroupingItemRenderer.prototype,"KFguildGroupingItemRenderer"),window.KFguildGroupingItemRenderer=KFguildGroupingItemRenderer;var KFguildGroupingWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="KFguildGroupingSkin",t.list.itemRenderer=KFguildGroupingItemRenderer,t.data=new eui.ArrayCollection([]),t.commonWindowBg.title=GlobalConfig.jifengTiaoyueLg.st101872,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101054,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101055,t.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st101056,t.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st101057,t}return __extends(t,e),t.prototype.open=function(){this.commonWindowBg.OnAdded(this),this.list.dataProvider=this.data,GameGlobal.MessageCenter.addListener(MessageDef.KF_GUILD_GROUPING_INFO,this.refushGroupingInfo,this),GuildWar.ins().sendKFguildGroupInfo(),this.openDesc1.textFlow=TextFlowMaker.generateTextFlow(StringUtils.addColor(GlobalConfig.jifengTiaoyueLg.st101047,5461335)+StringUtils.addColor(GuildWar.ins().setKF1OpenDesc(),Color.Green)),this.openDesc2.textFlow=TextFlowMaker.generateTextFlow(StringUtils.addColor(GlobalConfig.jifengTiaoyueLg.st101048,5461335)+StringUtils.addColor(GuildWar.ins().setKF2OpenDesc(),Color.Green))},t.prototype.refushGroupingInfo=function(e){this.bestguildname.textFlow=TextFlowMaker.generateTextFlow(StringUtils.addColor(GlobalConfig.jifengTiaoyueLg.st101049,16756817)+StringUtils.addColor(e.bestguildname,5461335)),this.guildName.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101050,[e.serverid,e.guildname]),e.infznumber&&e.infznumber>0?this.myGrouping.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101051,[StringUtils.numberToEnglishLetter(e.infznumber)]):this.myGrouping.text=GlobalConfig.jifengTiaoyueLg.st100378,2==e.entitle?(this.entitle.text=GlobalConfig.jifengTiaoyueLg.st101052,this.entitle.textColor=Color.Green):(this.entitle.text=GlobalConfig.jifengTiaoyueLg.st101053,this.entitle.textColor=Color.Red),this.data.replaceAll(e.lists)},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),GameGlobal.MessageCenter.removeListener(MessageDef.KF_GUILD_GROUPING_INFO,this.refushGroupingInfo,this)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(KFguildGroupingWin.prototype,"KFguildGroupingWin",["ICommonWindow"]),window.KFguildGroupingWin=KFguildGroupingWin;var KFguildWarGuildRewardPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="KFguildWarGuildRewardSkin",t.dataArr=new eui.ArrayCollection,t.dataArr1=new eui.ArrayCollection,t.itemList.itemRenderer=ItemBase,t.list.itemRenderer=GuildInteRewardItemRenderer,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101044,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GuildWar.ins().guildRankRewardType=e[0];var i=GuildWar.ins().creatGuildRewardList(e[0]);this.dataArr1.source=i,this.list.dataProvider=this.dataArr1;var o;1==e[0]?(this.title1.text=GlobalConfig.jifengTiaoyueLg.st101066,this.title2.text=GlobalConfig.jifengTiaoyueLg.st101067,o=GlobalConfig.ins("GuildBattleConst1")):(this.title1.text=GlobalConfig.jifengTiaoyueLg.st101068,this.title2.text=GlobalConfig.jifengTiaoyueLg.st101069,o=GlobalConfig.ins("GuildBattleConst2"));var s=o.occupationAward;this.dataArr.source=s,this.itemList.dataProvider=this.dataArr},t.prototype.close=function(){this.dataArr.source=null,this.dataArr1.source=null},t}(BaseView);__reflect(KFguildWarGuildRewardPanel.prototype,"KFguildWarGuildRewardPanel"),window.KFguildWarGuildRewardPanel=KFguildWarGuildRewardPanel;var KFguildWarMainPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101045,t.mWindowHelpId=10,t.name=GlobalConfig.jifengTiaoyueLg.st101045,t.skinName="KFguildWarMainSkin",t.rewardList.itemRenderer=ItemBase,t.touchEnabled=!1,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101029,t.play.label=GlobalConfig.jifengTiaoyueLg.st101045,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.AddClick(this.redBag,this._OnClick),this.AddClick(this.getBtn,this._OnClick),this.AddClick(this.rewardSee,this._OnClick),this.AddClick(this.play,this._OnClick),this.AddClick(this.LastSee,this._OnClick),this.AddClick(this.groupingBtn,this._OnClick),GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_GETDAY_REWARD,this.refushRewardStatu,this),GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_REDBAGINFO_CHANGE,this.refushRewardStatu,this),GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_STARTSTATU_CHANGE,this.refushStartEffect,this),GameGlobal.MessageCenter.addListener(MessageDef.GUILD_REWARD_WINNER_INFO,this.refushPanelInfo,this),null==this.guildBattleConst&&(this.guildBattleConst=GlobalConfig.ins("GuildBattleConst2")),this.rewardList.dataProvider=new eui.ArrayCollection(this.guildBattleConst.occupationAwardShow),this.LastSee.visible=!GuildWar.ins().kFisWatStart,this.refushPanelInfo(),this.refushStartEffect(),GuildReward.ins().SendWinnerInfo(2),this._DoUpdate(),TimerManager.ins().doTimer(1e3,0,this._DoUpdate,this),t.m_IsShowRedBag&&this.ShowRedBagPanel()},t.prototype.close=function(){TimerManager.ins().remove(this._DoUpdate,this),this.removeObserve(),this.removeEvents(),DisplayUtils.dispose(this.mc),this.mc=null},t.prototype._DoUpdate=function(){var e=GuildReward.ins();e.canSend?this.surplusLabel.text="":this.surplusLabel.text=e.getRedBagNum+"/"+e.redBagCount,this.surplusTimeLabel.text=DateUtils.GetFormatSecond(e.redBagSurplusTime,DateUtils.TIME_FORMAT_1)},t.prototype.ShowRedBagPanel=function(){GuildReward.ins().canRod||GuildReward.ins().canSend?ViewManager.ins().open(GuildWarRedBagPanel):ViewManager.ins().open(RedBagDetailsWin)},t.prototype._OnClick=function(e){switch(e.target){case this.redBag:this.ShowRedBagPanel();break;case this.getBtn:ViewManager.ins().open(GetRewardPanel,GlobalConfig.jifengTiaoyueLg.st101026,GlobalConfig.jifengTiaoyueLg.st101027,RewardData.ToRewardDatas(GlobalConfig.ins("GuildBattleDayAward2")[GuildReward.ins().kFrewardDay].award),function(){return GuildReward.ins().canKfGetDay?void GuildReward.ins().SendGetDayaward(GuildReward.ins().kFrewardType):void UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101046)},!0);break;case this.rewardSee:ViewManager.ins().open(KFguildWarRewardBgWin);break;case this.play:GuildWar.ins().SendKFjoinWar();break;case this.LastSee:ViewManager.ins().open(KFlastFightingBgWin);break;case this.groupingBtn:ViewManager.ins().open(KFguildGroupingWin)}},t.prototype.refushPanelInfo=function(){this.openDesc.text=GuildWar.ins().setAllKFOpenDesc(),this.refushRewardStatu(),this.refushWinGuild()},t.prototype.refushStartEffect=function(){UIHelper.SetBtnNormalEffe(this.play,GuildWar.ins().kFisWatStart)},t.prototype.refushRewardStatu=function(){this.getSign.visible=GuildReward.ins().getKfDayReward,UIHelper.ShowRedPoint(this.getBtn,GuildReward.ins().canKfGetDay&&!GuildReward.ins().getKfDayReward),this.redBag.visible=GuildReward.ins().getRedBagType>0&&GuildReward.ins().isHaveRedBag()},t.prototype.refushWinGuild=function(){var e=GuildReward.ins().winGuildInfo.guildid>0;if(this.groupInfo.visible=e,this.roleShowPanel.visible=e,e){var t=GuildReward.ins().winGuildInfo;this.guildName.text=t.guildname,this.guildOwn.text=t.leadername;var i=new SubRole;i.parser(t.leaderinfo),this.roleShowPanel.creatAnim(i),this.mc||(this.mc=new MovieClip),this.mc.scaleX=this.mc.scaleY=.6,this.mc.loadUrl(ResDataPath.GetUIEffePath("eff_title_kfbz"),!0,-1),this.group.addChild(this.mc)}},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(KFguildWarMainPanel.prototype,"KFguildWarMainPanel",["ICommonWindowTitle"]),window.KFguildWarMainPanel=KFguildWarMainPanel;var KFguildWarOwnRewardPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="KFguildWarOwnRewardSkin",t.list.itemRenderer=PersonRewardRenderer,t.list1.itemRenderer=GuildInteRewardItemRenderer,t.dataArr=new eui.ArrayCollection,t.dataArr1=new eui.ArrayCollection,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101065,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101044,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GuildWar.ins().guildRankRewardType=e[0],this.dataList=[];var i,o;1==e[0]?(i=GlobalConfig.ins("GuildBattlePersonalAward1"),o=GlobalConfig.ins("GuildBattlePersonalRankAward1")):(i=GlobalConfig.ins("GuildBattlePersonalAward2"),o=GlobalConfig.ins("GuildBattlePersonalRankAward2"));for(var s in i)this.dataList.push(i[s]);if(this.dataArr.source=this.dataList,this.list.dataProvider=this.dataArr){this.dataList1=[];for(var s in o)this.dataList1.push(o[s])}this.dataArr1.source=this.dataList1,this.list1.dataProvider=this.dataArr1},t.prototype.close=function(){},t}(BaseView);__reflect(KFguildWarOwnRewardPanel.prototype,"KFguildWarOwnRewardPanel"),window.KFguildWarOwnRewardPanel=KFguildWarOwnRewardPanel;var KFguildWarReward1Panel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101064,t.name=GlobalConfig.jifengTiaoyueLg.st101061,t.skinName="KFguildWarReward1Skin",t.guildReward=new KFguildWarGuildRewardPanel,t.ownReward=new KFguildWarOwnRewardPanel,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.viewStack.removeChildren(),this.viewStack.addChild(this.guildReward),this.viewStack.addChild(this.ownReward),this.updateViewSelected()},t.prototype.close=function(){this.viewStack.removeChildren()},t.prototype.updateViewSelected=function(){this.viewStack.selectedIndex=KFguildWarRewardBgWin.rewardIndex;var e=this.viewStack.getElementAt(KFguildWarRewardBgWin.rewardIndex);e.open(1)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(KFguildWarReward1Panel.prototype,"KFguildWarReward1Panel",["ICommonWindowTitle"]),window.KFguildWarReward1Panel=KFguildWarReward1Panel;var KFguildWarReward2Panel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101064,t.name=GlobalConfig.jifengTiaoyueLg.st101059,t.skinName="KFguildWarReward2Skin",t.guildReward=new KFguildWarGuildRewardPanel,t.ownReward=new KFguildWarOwnRewardPanel,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.viewStack.removeChildren(),this.viewStack.addChild(this.guildReward),this.viewStack.addChild(this.ownReward),this.updateViewSelected()},t.prototype.close=function(){this.viewStack.removeChildren()},t.prototype.updateViewSelected=function(){this.viewStack.selectedIndex=KFguildWarRewardBgWin.rewardIndex;var e=this.viewStack.getElementAt(KFguildWarRewardBgWin.rewardIndex);e.open(2)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(KFguildWarReward2Panel.prototype,"KFguildWarReward2Panel",["ICommonWindowTitle"]),window.KFguildWarReward2Panel=KFguildWarReward2Panel;var KFguildWarRewardBgWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="KFguildWarRewardBgSkin",this.kFguildWarReward2Panel=new KFguildWarReward2Panel,this.kFguildWarReward1Panel=new KFguildWarReward1Panel,this.commonWindowBg.AddChildStack(this.kFguildWarReward2Panel),this.commonWindowBg.AddChildStack(this.kFguildWarReward1Panel),this.selectImg.horizontalCenter=this.btn0.horizontalCenter,this.selectImg.verticalCenter=this.btn0.verticalCenter,t.rewardIndex=0},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e[0]?e[0]:0),this.btn0.addEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this),this.btn1.addEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this)},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),this.btn0.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this),this.btn1.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this)},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.onClick=function(e){switch(e.currentTarget){case this.btn0:t.rewardIndex=0,this.selectImg.horizontalCenter=this.btn0.horizontalCenter,this.selectImg.verticalCenter=this.btn0.verticalCenter;break;case this.btn1:t.rewardIndex=1,this.selectImg.horizontalCenter=this.btn1.horizontalCenter,this.selectImg.verticalCenter=this.btn1.verticalCenter}0==this.commonWindowBg.tabBar.selectedIndex?this.kFguildWarReward2Panel.updateViewSelected():this.kFguildWarReward1Panel.updateViewSelected()},t.LAYER_LEVEL=LayerManager.UI_Main,t.rewardIndex=0,t}(BaseEuiPanel);__reflect(KFguildWarRewardBgWin.prototype,"KFguildWarRewardBgWin",["ICommonWindow"]),window.KFguildWarRewardBgWin=KFguildWarRewardBgWin;var KFguildWarServerRewardPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="KFguildWarServerRewardSkin",t}return __extends(t,e),t.prototype.open=function(){},t.prototype.close=function(){},t}(BaseView);__reflect(KFguildWarServerRewardPanel.prototype,"KFguildWarServerRewardPanel"),window.KFguildWarServerRewardPanel=KFguildWarServerRewardPanel;var KFlastFighting1Panel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101058,t.skinName="KFlastFighting1Skin",t.name=GlobalConfig.jifengTiaoyueLg.st101061,t.data=new eui.ArrayCollection([]),t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101054,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101055,t}return __extends(t,e),t.prototype.open=function(){this.list.itemRenderer=KFguildGroupingItemRenderer,this.list.dataProvider=this.data,GameGlobal.MessageCenter.addListener(MessageDef.KF_GUILD_LAST_GROUPING_INFO,this.refushGroupingInfo,this),GuildWar.ins().sendKFLastGroupingInfo()},t.prototype.refushGroupingInfo=function(e){this.bestguildname.textFlow=TextFlowMaker.generateTextFlow(StringUtils.addColor(GlobalConfig.jifengTiaoyueLg.st101049,16756817)+StringUtils.addColor(e.bestguildname,5461335)),this.guildName.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101050,[e.serverid,e.guildname]),e.infznumber&&e.infznumber>0?this.myGrouping.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101051,[StringUtils.numberToEnglishLetter(e.infznumber)]):this.myGrouping.text=GlobalConfig.jifengTiaoyueLg.st100378,this.data.replaceAll(e.lists)},t.prototype.close=function(){GameGlobal.MessageCenter.removeListener(MessageDef.KF_GUILD_LAST_GROUPING_INFO,this.refushGroupingInfo,this)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(KFlastFighting1Panel.prototype,"KFlastFighting1Panel",["ICommonWindowTitle"]),window.KFlastFighting1Panel=KFlastFighting1Panel;var KFlastFighting2Panel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101058,t.skinName="GuildInteRankSkin",t.name=GlobalConfig.jifengTiaoyueLg.st101059,t.list.itemRenderer=GuildInteRankItemRenderer,t.data=new eui.ArrayCollection([]),t.titleDesc.text=GlobalConfig.jifengTiaoyueLg.st101060,t.infoDesc.text="",t.guildName.text="",t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101035,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100821,t.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100896,t.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st101036,t.m_Lan5.text=GlobalConfig.jifengTiaoyueLg.st101037,t}return __extends(t,e),t.prototype.open=function(){this.list.dataProvider=this.data,GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_RANK_INFO,this.refushList,this),GuildReward.ins().SendKfGuildLastRank()},t.prototype.close=function(){GameGlobal.MessageCenter.removeListener(MessageDef.GUILDWAR_RANK_INFO,this.refushList,this)},t.prototype.refushList=function(){if(this.data.replaceAll(GuildReward.ins().guildRankList),GuildReward.ins().upGuildName.length>0){this.guildName.text=GuildReward.ins().upGuildName;var e=GlobalConfig.jifengTiaoyueLg.st100280;switch(GuildReward.ins().upReason){case 0:e=GlobalConfig.jifengTiaoyueLg.st100280;break;case 1:e=GlobalConfig.jifengTiaoyueLg.st101032;break;case 2:e=GlobalConfig.jifengTiaoyueLg.st101033}this.infoDesc.text=e}else this.guildName.text=GlobalConfig.jifengTiaoyueLg.st101034,this.infoDesc.text=GlobalConfig.jifengTiaoyueLg.st100280},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(KFlastFighting2Panel.prototype,"KFlastFighting2Panel",["ICommonWindowTitle"]),window.KFlastFighting2Panel=KFlastFighting2Panel;var KFlastFightingBgWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="KFlastFightingBgSkin",this.commonWindowBg.AddChildStack(new KFlastFighting2Panel),this.commonWindowBg.AddChildStack(new KFlastFighting1Panel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this)},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(KFlastFightingBgWin.prototype,"KFlastFightingBgWin",["ICommonWindow"]),window.KFlastFightingBgWin=KFlastFightingBgWin;var KFseeGuildRankPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101031,t.skinName="GuildInteRankSkin",t.name=GlobalConfig.jifengTiaoyueLg.st101031,t.list.itemRenderer=GuildInteRankItemRenderer,t.data=new eui.ArrayCollection([]),t.currentState="now",t}return __extends(t,e),t.prototype.open=function(){this.list.dataProvider=this.data,GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_RANK_INFO,this.refushList,this),GameSocket.ins().Rpc(C2sProtocol.cs_gdwar_guild_rank)},t.prototype.close=function(){GameGlobal.MessageCenter.removeListener(MessageDef.GUILDWAR_RANK_INFO,this.refushList,this)},t.prototype.refushList=function(){this.data.replaceAll(GuildReward.ins().guildRankList)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(KFseeGuildRankPanel.prototype,"KFseeGuildRankPanel",["ICommonWindowTitle"]),window.KFseeGuildRankPanel=KFseeGuildRankPanel;var KFseePersonalInteRankPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101038,t.skinName="PersonalInteRankSkin",t.name=GlobalConfig.jifengTiaoyueLg.st101038,t.list.itemRenderer=GuildInteRankItemRenderer,t.data=new eui.ArrayCollection([]),t}return __extends(t,e),t.prototype.open=function(){this.list.dataProvider=this.data,GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_PERSONAL_RANK_INFO,this.refushList,this),GameSocket.ins().Rpc(C2sProtocol.cs_gdwar_actor_rank)},t.prototype.close=function(){GameGlobal.MessageCenter.removeListener(MessageDef.GUILDWAR_PERSONAL_RANK_INFO,this.refushList,this)},t.prototype.refushList=function(){this.data.replaceAll(GuildReward.ins().guildPersonalRankList)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(KFseePersonalInteRankPanel.prototype,"KFseePersonalInteRankPanel",["ICommonWindowTitle"]),window.KFseePersonalInteRankPanel=KFseePersonalInteRankPanel;var KFseeRankBgWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuildWarRewardSkin",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addPanelList(),this.commonWindowBg.OnAdded(this,e&&e[0]||0)},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.addPanelList=function(){this.commonWindowBg.AddChildStack(new KFseeGuildRankPanel),this.commonWindowBg.AddChildStack(new KFseePersonalInteRankPanel)},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(KFseeRankBgWin.prototype,"KFseeRankBgWin",["ICommonWindow"]),window.KFseeRankBgWin=KFseeRankBgWin;var GuildInteRankInfo=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101031,t.skinName="GuildInteRankSkin",t.name=GlobalConfig.jifengTiaoyueLg.st101031,t.list.itemRenderer=GuildInteRankItemRenderer,t.data=new eui.ArrayCollection([]),t.currentState=GuildWar.ins().isWatStart?"now":"last",t.infoDesc.text="",t.guildName.text="",t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101035,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100821,t.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100896,t.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st101036,t.m_Lan5.text=GlobalConfig.jifengTiaoyueLg.st101037,t.titleDesc.text=GlobalConfig.jifengTiaoyueLg.st101063,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.list.dataProvider=this.data,GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_RANK_INFO,this.refushList,this),GuildReward.ins().SendGuildRank()},t.prototype.close=function(){GameGlobal.MessageCenter.removeListener(MessageDef.GUILDWAR_RANK_INFO,this.refushList,this)},t.prototype.refushList=function(){if(this.data.replaceAll(GuildReward.ins().guildRankList),GuildReward.ins().upGuildName.length>0){this.guildName.text=GuildReward.ins().upGuildName;var e=GlobalConfig.jifengTiaoyueLg.st100280;switch(GuildReward.ins().upReason){case 0:e=GlobalConfig.jifengTiaoyueLg.st100280;break;case 1:e=GlobalConfig.jifengTiaoyueLg.st101032;break;case 2:e=GlobalConfig.jifengTiaoyueLg.st101033}this.infoDesc.text=e}else this.guildName.text=GlobalConfig.jifengTiaoyueLg.st101034,this.infoDesc.text=GlobalConfig.jifengTiaoyueLg.st100280},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(GuildInteRankInfo.prototype,"GuildInteRankInfo",["ICommonWindowTitle"]),window.GuildInteRankInfo=GuildInteRankInfo;var GuildInteRankItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuildInteRankItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.rank.text=this.itemIndex+1+"",this.guildName.text=e.guildname,this.guildOwn.text=e.actorname,this.point.text=e.score+""},t}(eui.ItemRenderer);__reflect(GuildInteRankItemRenderer.prototype,"GuildInteRankItemRenderer"),window.GuildInteRankItemRenderer=GuildInteRankItemRenderer;var GuildInteRewardInfo=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101039,t.skinName="GuildInteRewardSkin",t.name=GlobalConfig.jifengTiaoyueLg.st101039,t.dataArr=new eui.ArrayCollection,t.dataArr1=new eui.ArrayCollection,t.itemList.itemRenderer=ItemBase,t.list1.itemRenderer=GuildInteRewardItemRenderer,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101040,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101041,t.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100920,t}return __extends(t,e),t.prototype.open=function(){GuildWar.ins().guildRankRewardType=0,null==this.guildBattleConst&&(this.guildBattleConst=GlobalConfig.ins("GuildBattleConst"));var e=GuildWar.ins().creatGuildRewardList();this.dataArr1.source=e,this.list1.dataProvider=this.dataArr1;var t=this.guildBattleConst.occupationAward;this.dataArr.source=t,this.itemList.dataProvider=this.dataArr},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.dataArr.source=null,this.dataArr1.source=null},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(GuildInteRewardInfo.prototype,"GuildInteRewardInfo",["ICommonWindowTitle"]),window.GuildInteRewardInfo=GuildInteRewardInfo;var GuildInteRewardItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuildInteRewardItemSkin",t.list.itemRenderer=ItemBase,t}return __extends(t,e),t.prototype.dataChanged=function(){this.rankLabel.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101635,[this.itemIndex+1]),this.data.rank?this.list.dataProvider=new eui.ArrayCollection(this.data.award):this.list.dataProvider=new eui.ArrayCollection(GuildWar.ins().creatGuildRankReward(this.data))},t}(eui.ItemRenderer);__reflect(GuildInteRewardItemRenderer.prototype,"GuildInteRewardItemRenderer"),window.GuildInteRewardItemRenderer=GuildInteRewardItemRenderer;var GuildWarGateBloodPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuildWarGateBloodPanelSkin",t.dropDown.setEnabled(!1),t.hudun.visible=!1,t.hudunbloodBar.labelFunction=function(e,t){return Math.floor(100*e/t)+"%"},t.bloodBar.labelFunction=function(e,t){return Math.floor(100*e/t)+"%"},t.InitData(),t}return __extends(t,e),t.Update=function(e){var i=ViewManager.ins().getView(t);i&&i.isShow&&i.UpdateContent(e)},t.prototype.InitData=function(){null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig),1==GuildWar.ins().guildWarStartType?this.guildBattleConst=GlobalConfig.ins("GuildBattleConst1"):2==GuildWar.ins().guildWarStartType?this.guildBattleConst=GlobalConfig.ins("GuildBattleConst2"):this.guildBattleConst=GlobalConfig.ins("GuildBattleConst");var e=this.guildBattleConst;this.hudunbloodBar.value=this.hudunbloodBar.maximum=e.shieldtime,this.bloodBar.value=this.bloodBar.maximum=e.gatetime;var t=this.monstersConfig[e.gate.id];this.nameTxt.text=t.name,this.head.source=ResDataPath.getBossHeadImage(t.head),this.lvTxt.text=t.level+"",this.myTxt.text=GlobalConfig.jifengTiaoyueLg.st101791+":0",this.hudun.visible=!1,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st101382},t.prototype.UpdateContent=function(e){var t=e.hurtRanks,i=t?t.length:0;if(i){var o=[];t.sort(function(e,t){return t.hurtValue-e.hurtValue});for(var s=0;s<Math.min(i,10);++s){var n=t[s],r=n.guildName+":"+CommonUtils.overLength(n.hurtValue);StringUtils.strByteLen(r);o.push({name:r})}this.dropDown.setData(new eui.ArrayCollection(o.slice(1,i))),this.dropDown.setLabel(o[0].name)}else this.dropDown.setData(new eui.ArrayCollection([])),this.dropDown.setLabel("");i=t?t.length:0;for(var a=GameLogic.ins().actorModel.guildID,s=0;i>s;s++)if(t[s].guildId==a){this.myTxt.text=GlobalConfig.jifengTiaoyueLg.st101791+":"+CommonUtils.overLength(t[s].hurtValue);break}this.bloodBar.value=e.wallTime,(this.hudun.visible=e.shieldTime>0)&&(this.hudunbloodBar.value=e.shieldTime)},t.LAYER_LEVEL=LayerManager.UI_HUD,t}(BaseEuiView);__reflect(GuildWarGateBloodPanel.prototype,"GuildWarGateBloodPanel"),window.GuildWarGateBloodPanel=GuildWarGateBloodPanel;var GuildWarInfoPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){this.skinName="GuildWarUiSkin",this.pointEff=new MovieClip,this.pointEff.x=136,this.pointEff.y=44,this.pointEff.touchEnabled=!1,this.taskTraceBtn.addChild(this.pointEff),this.list1.itemRenderer=GuildWarMemberHeadRender,this.list2.itemRenderer=GuildWarMemberHeadRender,this.sceneBar.maximum=300,this.sceneBar.labelFunction=function(){return""},this.bloodBar.labelFunction=function(){return GuildWar.ins().GetFlagStatu()==GuildWarFlagState.GATHER?GlobalConfig.jifengTiaoyueLg.st101544+"："+DateUtils.GetFormatSecond(GuildWar.ins().GetFlagSurplusTime(),5):""},UIHelper.SetLinkStyleLabel(this.seeRank,GlobalConfig.jifengTiaoyueLg.st100497),UIHelper.SetLinkStyleLabel(this.seeMyGuild,GlobalConfig.jifengTiaoyueLg.st101568),this.hudun.labelFunction=function(){return Math.ceil(GuildWar.ins().GetHudunRate())+"%"},this.refush.label=GlobalConfig.jifengTiaoyueLg.st100065,this.roleName.text=GlobalConfig.jifengTiaoyueLg.st101569,this.times.text=GlobalConfig.jifengTiaoyueLg.st101570,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st101571,this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st101572,this.languageTxt1.text=GlobalConfig.jifengTiaoyueLg.st101574,this.palaceFlag.label=GlobalConfig.jifengTiaoyueLg.st101573,this.playNext.label=GlobalConfig.jifengTiaoyueLg.st101545},t.prototype.initEff=function(){this.clickEffc||(this.clickEffc=new MovieClip,this.clickEffc.loadUrl(ResDataPath.GetUIEffePath("tapCircle"),!0,1),this.clickEffc.x=this.m_EffGroup.width/2-1,this.clickEffc.y=this.m_EffGroup.height/2-2,this.m_EffGroup.addChild(this.clickEffc),this.clickEffc.addEventListener(egret.Event.COMPLETE,this.efComplete,this))},t.prototype.efComplete=function(){this.clickEffc.visible=!1},t.prototype.open=function(){this.initEff();for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.playNext.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.seeRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.seeMyGuild.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.observe(MessageDef.GUILDWAR_ACTOR_UPDATE,this.refushPoint),this.observe(MessageDef.GUILD_WAR_UPDATE_ENEMIES,this.refushWeixieList),this.observe(MessageDef.GUILD_WAR_UPDATE_TARGETS,this.refushcanPlayList),this.observe(MessageDef.GUILD_WAR_DOORSTATU_CHANGE,this.doorStatuChange),this.observe(MessageDef.GUILDWAR_HUDUN_INFO,this.refushFlagStatu),this.observe(MessageDef.GUILDWAR_UPDATE_BASE_INFO,this.rankListChange),this.observe(MessageDef.GUILDWAR_FLAG_NOTICE,this._DoUpdateFlag),this.list1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.listTap,this),this.list2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.listTap,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.palaceFlag.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.mon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.taskTraceBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.monHead.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.ruleDesc.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.refushShowInfo(),this.refushPoint(),this.cityOwnChange(),this.refushWeixieList(),this.refushcanPlayList(),this.rankListChange(),this.doorStatuChange(),this.refushFlagStatu(),this.refushGuildNum()
},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.playNext.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.seeRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.seeMyGuild.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.list1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.listTap,this),this.list2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.listTap,this),this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.mon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.taskTraceBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.palaceFlag.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.ruleDesc.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),ViewManager.ins().isShow(GuileWarReliveWin)&&ViewManager.ins().close(GuileWarReliveWin),TimerManager.ins().removeAll(this),this.clickEffc&&(this.clickEffc.removeEventListener(egret.Event.COMPLETE,this.efComplete,this),DisplayUtils.dispose(this.clickEffc),this.clickEffc=null),DisplayUtils.removeFromParent(this.pointEff),this.clearRendererItem(),this.mask=null},t.BTN_IMG=function(e){var t=[GlobalConfig.jifengTiaoyueLg.st101545,GlobalConfig.jifengTiaoyueLg.st101545,GlobalConfig.jifengTiaoyueLg.st101546,GlobalConfig.jifengTiaoyueLg.st101547,GlobalConfig.jifengTiaoyueLg.st101548];return t[e]},t.TIPS_TXT=function(e){var t={28001:GlobalConfig.jifengTiaoyueLg.st101549,28002:GlobalConfig.jifengTiaoyueLg.st101550,28003:GlobalConfig.jifengTiaoyueLg.st101551,28004:GlobalConfig.jifengTiaoyueLg.st101552};return t[e]},t.prototype.refushShowInfo=function(){this.gongxun.visible=GuildWar.ins().checkinAppoint(2),this.imgDataBg.height=this.gongxun.visible?88:68,this.mon.visible=GuildWar.ins().checkinAppoint(2),this.attList.visible=GuildWar.ins().checkinAppoint(2,!0),this.weixie.visible=GuildWar.ins().checkinAppoint(2,!0),this.flagGroup.visible=GuildWar.ins().checkinAppoint(4),this.flag.visible=GuildWar.ins().checkinAppoint(4),this.scene.text=GuildWar.ins().getNextMapName(0),this.guid.visible=GuildWar.ins().checkinAppoint(2)&&GuildWar.ins().getIntoNextMapGongxun()>GuildWar.ins().GetGongxun(),this.descImg.text=t.TIPS_TXT(GameMap.fubenID);var e=GuildWar.ins().getMapLevelInfo();this.playNext.label=t.BTN_IMG(e.id)||t.BTN_IMG(1),this.sceneBar.value=100*(e.id-1),this.scene1.source=e.id>=1?"comp_42_44_01_png":"comp_42_44_07_png",this.scene2.source=e.id>=2?"comp_42_44_04_png":"comp_42_44_03_png",this.scene3.source=e.id>=3?"comp_42_44_02_png":"comp_42_44_08_png",this.scene4.source=e.id>=4?"comp_42_44_05_png":"comp_42_44_06_png",this.lastTime.text=DateUtils.getFormatBySecond(GuildWar.ins().GetSurplusTime(),9),this._UpdateGuildWarTime(),TimerManager.ins().remove(this._UpdateGuildWarTime,this),TimerManager.ins().doTimer(1e3,GuildWar.ins().GetSurplusTime(),this._UpdateGuildWarTime,this)},t.prototype._UpdateGuildWarTime=function(){this.lastTime.text=DateUtils.getFormatBySecond(GuildWar.ins().GetSurplusTime(),DateUtils.TIME_FORMAT_5)},t.prototype.refushGuildNum=function(){this.comNum.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101553,[GuildWar.ins().GetGuildNum()])},t.prototype.refushPoint=function(){this.ownPoint.text=GlobalConfig.jifengTiaoyueLg.st100060+GuildWar.ins().GetMyPoint();var e=GuildWar.ins().GetGongxun()+"/"+GuildWar.ins().getIntoNextMapGongxun();this.point.text=e+"",this.refushPointReward(),this.doorStatuChange()},t.prototype.refushPointReward=function(){var e=GuildWar.ins().getMyPointReward();if(e){this.taskTraceName0.y=17;var t=GlobalConfig.jifengTiaoyueLg.st101554+"："+GuildWar.ins().GetMyPoint()+"/"+e.integral;t+=GuildWar.ins().CanReward()?"<font color = '#008f22'>("+GlobalConfig.jifengTiaoyueLg.st101555+")</fomt>":"",this.taskTraceName0.textFlow=(new egret.HtmlTextParser).parser(t);var i=e.award[0];if(0==i.type)var o=i.count+MoneyManger.MoneyConstToName(i.id);else o=GlobalConfig.itemConfig[i.id].name;this.taskTraceAwards0.text=GlobalConfig.jifengTiaoyueLg.st101556+":"+o,this.taskTraceAwards0.visible=!0}else this.taskTraceName0.y=25,this.taskTraceName0.text=GlobalConfig.jifengTiaoyueLg.st101557,this.taskTraceAwards0.visible=!1,DisplayUtils.removeFromParent(this.pointEff)},t.prototype.cityOwnChange=function(){this.guildName.text=""==GuildWar.ins().GetCityOwn()?GlobalConfig.jifengTiaoyueLg.st101034:GuildWar.ins().GetCityOwn()},t.prototype.refushWeixieList=function(e){void 0===e&&(e=!1);var t=GuildWar.ins().weixieList||[];this.list2.dataProvider=new eui.ArrayCollection(t),this.weixieIcon2.visible=t.length>0,e&&(this.list1.dataProvider=new eui.ArrayCollection(GuildWar.ins().canPlayList))},t.prototype.refushcanPlayList=function(){this.refushGuildNum(),this.list1.dataProvider=new eui.ArrayCollection(GuildWar.ins().canPlayList)},t.prototype.doorStatuChange=function(){var e=GuildWar.ins().IsDoorDie()&&GuildWar.ins().checkinAppoint(1)||GuildWar.ins().getIntoNextMapGongxun()<=GuildWar.ins().GetGongxun()&&GuildWar.ins().checkinAppoint(2);UIHelper.SetBtnNormalEffe(this.playNext,e)},t.prototype.rankListChange=function(){this.guildPoint.text=GlobalConfig.jifengTiaoyueLg.st101558+"："+GuildWar.ins().GetGuildPoint();for(var e=GuildWar.ins().GetFrontRank(),t=0;3>t;++t){var i=e[t];i?this["rankInfo"+(t+1)].text=t+1+" "+i.guildName+" "+i.integral:this["rankInfo"+(t+1)].text=t+1+" "+GlobalConfig.jifengTiaoyueLg.st100378+" 0"}},t.prototype.refushFlagStatu=function(){TimerManager.ins().remove(this.runTime,this),this.hudun1.visible=!1,GuildWarFlagState.NONE==GuildWar.ins().GetFlagStatu()?(this.clearTimeBar(),this.runTime(),TimerManager.ins().doTimer(1e3,GuildWar.ins().GetFlagStartSurplusTime(),this.runTime,this)):GuildWarFlagState.CAN_GATHER==GuildWar.ins().GetFlagStatu()?(this.clearTimeBar(),this.timeDesc.text=GlobalConfig.jifengTiaoyueLg.st101559):(this.runTime(),null==this.guildBattleConst&&(1==GuildWar.ins().guildWarStartType?this.guildBattleConst=GlobalConfig.ins("GuildBattleConst1"):2==GuildWar.ins().guildWarStartType?this.guildBattleConst=GlobalConfig.ins("GuildBattleConst2"):this.guildBattleConst=GlobalConfig.ins("GuildBattleConst")),this.bloodBar.maximum=this.guildBattleConst.gatherTime,TimerManager.ins().doTimer(1e3,GuildWar.ins().GetFlagSurplusTime(),this.runTime,this),this.hudun1.visible=!0)},t.prototype._DoUpdateFlag=function(){if(this.flagGroup.visible)return void(this.flagStatu.visible=!1);var e=GuildWar.ins().mFlagNotice;return null==e||""==e.holderName||null==e.holderName?void(this.flagStatu.visible=!1):(this.flagStatu.visible=!0,void this._UpdateFlagTimeLabel(e.holderGuild,e.holderName,Math.max(e.overTime-GameServer.serverTime,0)))},t.prototype.clearTimeBar=function(){this.bloodBar.maximum=1,this.bloodBar.value=1},t.prototype.runTime=function(){GuildWar.ins().GetFlagStatu()==GuildWarFlagState.NONE?this.timeDesc.text=DateUtils.format_5(GuildWar.ins().GetFlagStartSurplusTime())+GlobalConfig.jifengTiaoyueLg.st101560:GuildWar.ins().GetFlagStatu()==GuildWarFlagState.GATHER?(this.timeDesc.text=GuildWar.ins().GetFlagName()+(" "+GlobalConfig.jifengTiaoyueLg.st101561+"....."),this.bloodBar.value=GuildWar.ins().GetFlagSurplusTime()):TimerManager.ins().remove(this.runTime,this),this.hudun.maximum=100,this.hudun.value=GuildWar.ins().GetHudunRate()},t.prototype._UpdateFlagTimeLabel=function(e,t,i){var o="<font color = '#FFB82A'>"+t+"</font>"+GlobalConfig.jifengTiaoyueLg.st101562+"（<font color = '#00FF00'>"+DateUtils.GetFormatSecond(i,5)+"</font>）";this.flagTime.textFlow=(new egret.HtmlTextParser).parser(o),this.guildName1.text=GlobalConfig.jifengTiaoyueLg.st100850+e},t.prototype.onTap=function(e){switch(e.currentTarget){case this.playNext:if(GuildWar.ins().getIntoNextMapGongxun()>GuildWar.ins().GetGongxun())return void UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101563);if(!GuildWar.ins().IsDoorDie())return void UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101564);ViewManager.ins().open(GuileWarReliveWin,1);break;case this.seeRank:GuildWar.ins().kFisWatStart?ViewManager.ins().open(KFseeRankBgWin):ViewManager.ins().open(GuildWarRewardPanel);break;case this.seeMyGuild:ViewManager.ins().open(GuildWarMemWin);break;case this.btn:"down"==this.btn.currentState?this.list1.dataProvider=new eui.ArrayCollection([]):this.refushcanPlayList();break;case this.palaceFlag:GuildWarFlagState.NONE!=GuildWar.ins().GetFlagStatu()?GuildWar.ins().SendGetFlag():UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101565);break;case this.mon:this.clickEffc&&(this.clickEffc.visible=!0,this.clickEffc.loadUrl(ResDataPath.GetUIEffePath("tapCircle"),!0,1)),GuildWar.ins().SendAttackMonster(),this.guid.visible=!1;break;case this.ruleDesc:ViewManager.ins().open(GuildWarRulesWin);break;case this.taskTraceBtn:GuildWar.ins().CanReward()&&GuildWar.ins().SendPointGuildWar()}},t.prototype.listTap=function(e){if(e.target.parent instanceof GuildWarMemberHeadRender){var t=e.target.parent;if(t.showEffect(),!GuildWar.ins().CanClick())return;var i=t.data;if(GuildWar.ins().GetFlagAcId()==GameGlobal.actorModel.actorID)return void WarnWin.show(GlobalConfig.jifengTiaoyueLg.st101566,function(){GuildWar.ins().SendAttackPlayer(i.actorId),EntityManager.ins().showHideSomeOne(i.actorId)},this);GuildWar.ins().SendAttackPlayer(i.actorId),this.guid.visible=!1,GuildWar.ins().GetAttHandle()!=i.actorId&&EntityManager.ins().showHideSomeOne(i.actorId)}},t.prototype.clearRendererItem=function(){for(var e=this.list1.numChildren,t=0;e>t;t++){var i=this.list1.getChildAt(t);i.clearEffect()}e=this.list2.numChildren;for(var t=0;e>t;t++){var i=this.list2.getChildAt(t);i.clearEffect()}},t.LAYER_LEVEL=LayerManager.UI_HUD,t}(BaseEuiView);__reflect(GuildWarInfoPanel.prototype,"GuildWarInfoPanel"),window.GuildWarInfoPanel=GuildWarInfoPanel;var GuildWarMainPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100920,t.mWindowHelpId=10,t.name=GlobalConfig.jifengTiaoyueLg.st100920,t.skinName="GuildWarMainSkin",t.rewardList.itemRenderer=ItemBase,t.touchEnabled=!1,t.play.label=GlobalConfig.jifengTiaoyueLg.st100920,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101029,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.AddClick(this.redBag,this._OnClick),this.AddClick(this.getBtn,this._OnClick),this.AddClick(this.rewardSee,this._OnClick),this.AddClick(this.play,this._OnClick),this.AddClick(this.LastSee,this._OnClick),GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_GETDAY_REWARD,this.refushRewardStatu,this),GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_REDBAGINFO_CHANGE,this.refushRewardStatu,this),GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_STARTSTATU_CHANGE,this.refushStartEffect,this),GameGlobal.MessageCenter.addListener(MessageDef.GUILD_REWARD_WINNER_INFO,this.refushPanelInfo,this),null==this.guildBattleConst&&(this.guildBattleConst=GlobalConfig.ins("GuildBattleConst")),this.rewardList.dataProvider=new eui.ArrayCollection(this.guildBattleConst.occupationAwardShow),this.LastSee.visible=!GuildWar.ins().isWatStart,this.refushPanelInfo(),this.refushStartEffect(),GuildReward.ins().SendWinnerInfo(0),this._DoUpdate(),TimerManager.ins().doTimer(1e3,0,this._DoUpdate,this),t.m_IsShowRedBag&&this.ShowRedBagPanel()},t.prototype.close=function(){TimerManager.ins().remove(this._DoUpdate,this),this.removeObserve(),this.removeEvents(),DisplayUtils.dispose(this.mc),this.mc=null},t.prototype._DoUpdate=function(){var e=GuildReward.ins();e.canSend?this.surplusLabel.text="":this.surplusLabel.text=e.getRedBagNum+"/"+e.redBagCount,this.surplusTimeLabel.text=DateUtils.GetFormatSecond(e.redBagSurplusTime,DateUtils.TIME_FORMAT_1)},t.prototype.ShowRedBagPanel=function(){GuildReward.ins().canRod||GuildReward.ins().canSend?ViewManager.ins().open(GuildWarRedBagPanel):ViewManager.ins().open(RedBagDetailsWin)},t.prototype._OnClick=function(e){switch(e.target){case this.redBag:this.ShowRedBagPanel();break;case this.getBtn:ViewManager.ins().open(GetRewardPanel,GlobalConfig.jifengTiaoyueLg.st101026,GlobalConfig.jifengTiaoyueLg.st101027,RewardData.ToRewardDatas(GlobalConfig.ins("GuildBattleDayAward")[GuildReward.ins().rewardDay].award),function(){return GuildReward.ins().canGetDay?void GuildReward.ins().SendGetDayaward(0):void UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101028)},!0);break;case this.rewardSee:ViewManager.ins().open(GuildWarRewardPanel);break;case this.play:GuildWar.ins().SendJoinWar();break;case this.LastSee:ViewManager.ins().open(GuildWarRewardPanel,0,1)}},t.prototype.refushPanelInfo=function(){this.openDesc.text=GuildWar.ins().setOpenDesc(),this.refushRewardStatu(),this.refushWinGuild()},t.prototype.refushStartEffect=function(){UIHelper.SetBtnNormalEffe(this.play,GuildWar.ins().isWatStart)},t.prototype.refushRewardStatu=function(){this.getSign.visible=GuildReward.ins().getDayReward,UIHelper.ShowRedPoint(this.getBtn,GuildReward.ins().canGetDay&&!GuildReward.ins().getDayReward),this.redBag.visible=0==GuildReward.ins().getRedBagType&&GuildReward.ins().isHaveRedBag()},t.prototype.refushWinGuild=function(){var e=GuildReward.ins().winGuildInfo.guildid>0;if(this.groupInfo.visible=e,this.roleShowPanel.visible=e,e){var t=GuildReward.ins().winGuildInfo;this.guildName.text=t.guildname,this.guildOwn.text=t.leadername;var i=new SubRole;i.parser(t.leaderinfo),this.roleShowPanel.creatAnim(i),this.mc||(this.mc=new MovieClip),this.mc.scaleX=this.mc.scaleY=.6,this.mc.loadUrl(ResDataPath.GetUIEffePath("eff_title_tmbz"),!0,-1),this.group.addChild(this.mc)}},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(GuildWarMainPanel.prototype,"GuildWarMainPanel",["ICommonWindowTitle"]),window.GuildWarMainPanel=GuildWarMainPanel;var GuildWarMemberHeadRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="MemberHeadSkin",t.clickEffc=new MovieClip,t.clickEffc.x=30,t.clickEffc.y=30,t}return __extends(t,e),t.prototype.dataChanged=function(){if(egret.is(this.data,"SelectInfoData")){var e=this.data;this.currentState="panel",this.num.textFlow=(new egret.HtmlTextParser).parser(this.data.num+GlobalConfig.jifengTiaoyueLg.st101567),this.roleName.text=e.data.name,this.roleHead.source=ResDataPath.GetHeadMiniImgName2(e.data.job,e.data.sex)}else{var e=this.data;this.currentState="war",this.guildName.text=e.guildName,this.roleName.text=e.actorName,this.roleHead.source=ResDataPath.GetHeadMiniImgName2ById(e.actorHead),GuildWar.ins().HasAttack()&&GuildWar.ins().GetAttHandle()==e.actorId&&this.addAttEffect()}},t.prototype.addAttEffect=function(){this.attEffect||(this.attEffect=new MovieClip,this.attEffect.x=40,this.attEffect.y=38),this.attEffect.loadUrl(ResDataPath.GetUIEffePath("FightingEff"),!0),this.addChild(this.attEffect)},t.prototype.showEffect=function(){this.clickEffc.loadUrl(ResDataPath.GetUIEffePath("tapCircle"),!0,1),this.clickEffc.x=this.m_EffGroup.width/2,this.clickEffc.y=this.m_EffGroup.height/2+3,this.m_EffGroup.addChild(this.clickEffc)},t.prototype.clearEffect=function(){DisplayUtils.removeFromParent(this.clickEffc),DisplayUtils.removeFromParent(this.attEffect)},t}(eui.ItemRenderer);__reflect(GuildWarMemberHeadRender.prototype,"GuildWarMemberHeadRender"),window.GuildWarMemberHeadRender=GuildWarMemberHeadRender;var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI"),window.LoadingUI=LoadingUI;var GuildWarMemWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){this.skinName="GuildWarMemSkin",this.list.itemRenderer=GuildWarMemListRenderer,this.data=new eui.ArrayCollection},t.prototype.open=function(){this.commonWindowBg.OnAdded(this),this.list.dataProvider=this.data,GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_MYRANK_CHANGE,this.refushList,this),GuildReward.ins().SendGetMyGuildRank(),this.refushList()},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),GameGlobal.MessageCenter.removeListener(MessageDef.GUILDWAR_MYRANK_CHANGE,this.refushList,this)},t.prototype.refushList=function(){this.data.replaceAll(GuildReward.ins().myRankList)},t.prototype.onTap=function(e){ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(GuildWarMemWin.prototype,"GuildWarMemWin",["ICommonWindow"]),window.GuildWarMemWin=GuildWarMemWin;var GuildWarRedBagPanel=function(e){function t(){var t=e.call(this)||this;return t.sendMaxNum=0,t.skinName="RedBagWinSkin",t.num1.restrict="0-9",t.num2.restrict="0-9",t.rob.label=GlobalConfig.jifengTiaoyueLg.st101599,t.send.label=GlobalConfig.jifengTiaoyueLg.st101598,t.btn5.label=GlobalConfig.jifengTiaoyueLg.st101113,t.btn6.label=GlobalConfig.jifengTiaoyueLg.st101113,t.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st101600,t.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st101601,t.languageTxt1.text=GlobalConfig.jifengTiaoyueLg.st101780,t.languageTxt2.text=GlobalConfig.jifengTiaoyueLg.st101781,t.robRemainNum.priceLabel.textColor=Color.White,t.price.priceLabel.textColor=Color.White,t}return __extends(t,e),t.prototype.open=function(){this.rob.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.send.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn6.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.num1.addEventListener(egret.Event.CHANGE,this.onTxtChange,this),this.num2.addEventListener(egret.Event.CHANGE,this.onTxtChange,this),GuildReward.ins().canRod?(this.currentState="rob",this.refushInfo()):(this.currentState="send",this.refushSendInfo())},t.prototype.close=function(){},t.prototype.onClose=function(){ViewManager.ins().close(t)},t.prototype.onTxtChange=function(e){var t=this,i=1;switch(e.currentTarget){case this.num1:i=1;break;case this.num2:i=2}TimerManager.ins().doTimer(500,1,function(){t.checkInputChange(i)},this)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.rob:GuildReward.ins().SendGetRedpacket();break;case this.send:GuildReward.ins().SendRedpacket(this.sendYb,this.sendNum);break;case this.btn1:--this.sendYb,this.sendYb<this.sendNum&&(this.sendYb=this.sendNum),this.num1.text=this.sendYb+"";break;case this.btn2:++this.sendYb,this.sendYb>this.sendYBMaxNum&&(this.sendYb=this.sendYBMaxNum),this.num1.text=this.sendYb+"";break;case this.btn3:--this.sendNum,this.sendNum<1&&(this.sendNum=1),this.num2.text=this.sendNum+"";break;case this.btn4:++this.sendNum,this.sendNum>this.sendMaxNum&&(this.sendNum=this.sendMaxNum),this.num2.text=this.sendNum+"";break;case this.btn5:this.sendYb=this.sendYBMaxNum,this.num1.text=this.sendYb+"";break;case this.btn6:this.sendNum=this.sendMaxNum,this.num2.text=this.sendNum+""}},t.prototype.refushSendInfo=function(){this.sendYb=this.sendYBMaxNum=GuildReward.ins().remainYB,Guild.ins().getMemberNum()>0?this.sendMaxNum=this.sendNum=Guild.ins().getMemberNum():this.sendMaxNum=this.sendNum=1,this.price.price=this.sendYb,this.num1.text=this.sendYb+"",this.num2.text=this.sendNum+""},t.prototype.refushInfo=function(){this.robRemainNum.price=GuildReward.ins().sendYbNum,this.remainBag.text=GlobalConfig.jifengTiaoyueLg.st101597+"："+GuildReward.ins().remainRedNum+"/"+GuildReward.ins().maxRedNum},t.prototype.checkInputChange=function(e){var t;switch(e){case 1:t=Number(this.num1.text),t>this.sendYBMaxNum&&(t=this.sendYBMaxNum),this.sendYb=t,this.num1.text=this.sendYb+"";break;case 2:t=Number(this.num2.text),t>this.sendMaxNum&&(t=this.sendMaxNum),this.sendNum=t,this.num2.text=this.sendNum+""}this.checkPercentage()},t.prototype.checkPercentage=function(){this.sendYb<this.sendNum&&(this.sendYb=this.sendNum,this.num1.text=this.sendYb+"")},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(GuildWarRedBagPanel.prototype,"GuildWarRedBagPanel",["ICommonWindow"]),window.GuildWarRedBagPanel=GuildWarRedBagPanel;var GuildWarResultWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuildWarResultSkin",t.list1.itemRenderer=ItemBase,t.list2.itemRenderer=ItemBase,t.closeBtn.label=GlobalConfig.jifengTiaoyueLg.st100040,t.languageText.text=GlobalConfig.jifengTiaoyueLg.st101589+"：",t.languageText0.text=GlobalConfig.jifengTiaoyueLg.st101558+"：",t.languageText1.text=GlobalConfig.jifengTiaoyueLg.st101590+"：",t.languageText2.text=GlobalConfig.jifengTiaoyueLg.st101591+"：",t.languageText3.text=GlobalConfig.jifengTiaoyueLg.st101592+"：",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.closeBtn,this._OnClick);var i=e[0];this.guildName.text=""==i.winerName||null==i.winerName?GlobalConfig.jifengTiaoyueLg.st101034:i.winerName,this.myPoint.text=i.actorPoint+"",this.guildPoint.text=i.guildPoint+"",this.guildRank.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101635,[i.guildRank]),this.myRank.text=i.actorRank>0?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101635,[i.actorRank]):GlobalConfig.jifengTiaoyueLg.st100086;var o=[],s=GuildWar.ins().getMyPointRankReward(i.actorRank,i.warType);this.list1.dataProvider=new eui.ArrayCollection(s.concat(o)),GuildWar.ins().guildRankRewardType=i.warType,this.list2.dataProvider=new eui.ArrayCollection(GuildWar.ins().creatGuildRankReward(i.guildRank))},t.prototype._OnClick=function(){ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(GuildWarResultWin.prototype,"GuildWarResultWin"),window.GuildWarResultWin=GuildWarResultWin;var GuildWarRewardPanel=function(e){function t(){var t=e.call(this)||this;return t.type=0,t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.type=0,e[1]&&(this.type=e[1]),this.addPanelList(),this.commonWindowBg.OnAdded(this,e&&e[0]||0)},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.addPanelList=function(){this.commonWindowBg.RemoveChildStack(),(GuildWar.ins().isWatStart||1==this.type)&&(this.commonWindowBg.AddChildStack(new GuildInteRankInfo),this.commonWindowBg.AddChildStack(new PersonalInteRankInfo)),1!=this.type&&(this.commonWindowBg.AddChildStack(new GuildInteRewardInfo),this.commonWindowBg.AddChildStack(new PersonInteRewardInfo))},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(GuildWarRewardPanel.prototype,"GuildWarRewardPanel",["ICommonWindow"]),window.GuildWarRewardPanel=GuildWarRewardPanel;var GuildWarRulesWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){this.skinName="RuleTipsSkin"},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.attr.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.cruIndex=GuildWar.ins().getMapLevelInfo().id,this.refushInfo()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.bg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.attr.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.refushInfo=function(){var e;e=1==GuildWar.ins().guildWarStartType?GlobalConfig.ins("GuildBattleLevel1"):2==GuildWar.ins().guildWarStartType?GlobalConfig.ins("GuildBattleLevel2"):GlobalConfig.ins("GuildBattleLevel");var t=e[this.cruIndex];this.mapName.text=t.name,this.attr.textFlow=TextFlowMaker.generateTextFlow(t.help),this.rightBtn.visible=this.cruIndex<4,this.leftBtn.visible=this.cruIndex>1},t.prototype.onTap=function(e){switch(e.currentTarget){case this.leftBtn:--this.cruIndex,this.refushInfo();break;case this.rightBtn:++this.cruIndex,this.refushInfo();break;default:ViewManager.ins().close(this)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(GuildWarRulesWin.prototype,"GuildWarRulesWin"),window.GuildWarRulesWin=GuildWarRulesWin;var GuileWarReliveWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){this.skinName="SwitchCDSkin",this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st101587,this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st101588+"：",this.languageTxt1.text=GlobalConfig.jifengTiaoyueLg.st100367},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];switch(this.type=e[0],this.type){case 1:this.currentState="switch",this.defaultStr=GlobalConfig.jifengTiaoyueLg.st101582,this.s=GuildWar.ins().getCdByType(this.type);break;case 2:this.currentState="revive",this.defaultStr=GlobalConfig.jifengTiaoyueLg.st101583,this.s=e[1];break;case 3:this.currentState="exit",this.defaultStr=GlobalConfig.jifengTiaoyueLg.st101584,this.s=GuildWar.ins().getCdByType(this.type)}this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.timeDown.text=""+this.s+this.defaultStr,TimerManager.ins().remove(this.updateCloseBtnLabel,this),TimerManager.ins().doTimer(1e3,this.s,this.updateCloseBtnLabel,this),this.refushMapInfo()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),TimerManager.ins().remove(this.updateCloseBtnLabel,this),1!=this.type&&GuildWar.ins().GetKillName()},t.prototype.refushMapInfo=function(){1==this.type?this.mapName.text=GuildWar.ins().getNextMapName():2==this.type&&(this.killName.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101585,[GuildWar.ins().GetKillName()]),this.guildName.text=GlobalConfig.jifengTiaoyueLg.st101586+"："+GuildWar.ins().GetKillGuild()+" ")},t.prototype.updateCloseBtnLabel=function(){this.s--,this.s<=0&&(1==this.type&&GuildWar.ins().SendNextMap(),2==this.type&&ViewManager.ins().close(t),3==this.type&&(GuildWar.ins().SendExitFb(),ViewManager.ins().close(t))),this.timeDown.text=""+this.s+this.defaultStr},t.prototype.onTap=function(e){switch(e.currentTarget){case this.closeBtn:ViewManager.ins().close(t)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(GuileWarReliveWin.prototype,"GuileWarReliveWin"),window.GuileWarReliveWin=GuileWarReliveWin;var MemberItem3Renderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="MemberItem3Skin",t.languageText.text=GlobalConfig.jifengTiaoyueLg.st101790+"：",t.languageText0.text=GlobalConfig.jifengTiaoyueLg.st100809,t}return __extends(t,e),t.prototype.dataChanged=function(){try{var e=this.data;this.job.textFlow=(new egret.HtmlTextParser).parser("["+GuildLanguage.guildOffice(e.data.office)+"]<font color = '#DFD1B5'>"+e.data.name+"</font>"),this.nameLable.text="",this.payNum.text=""+e.num,this.attr.text=""+e.data.attack,this.face.source=ResDataPath.GetHeadMiniImgName(e.data.job,e.data.sex),e.chooseNum>0?(this.checkBoxs.selected=!0,this.btn1.visible=this.btn2.visible=this.num1.visible=this.inputBg.visible=!0,this.num1.text=e.chooseNum+""):(this.checkBoxs.selected=!1,this.btn1.visible=this.btn2.visible=this.num1.visible=this.inputBg.visible=!1)}catch(t){}},t}(eui.ItemRenderer);__reflect(MemberItem3Renderer.prototype,"MemberItem3Renderer"),window.MemberItem3Renderer=MemberItem3Renderer;var PersonalInteRankInfo=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101038,t.skinName="PersonalInteRankSkin",t.name=GlobalConfig.jifengTiaoyueLg.st101038,t.list.itemRenderer=GuildInteRankItemRenderer,t.data=new eui.ArrayCollection([]),t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100821,t.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100896,t.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st101036,t.m_Lan5.text=GlobalConfig.jifengTiaoyueLg.st101037,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.list.dataProvider=this.data,GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_PERSONAL_RANK_INFO,this.refushList,this),GuildReward.ins().SendPersonalRank()},t.prototype.close=function(){GameGlobal.MessageCenter.removeListener(MessageDef.GUILDWAR_PERSONAL_RANK_INFO,this.refushList,this)},t.prototype.refushList=function(){this.data.replaceAll(GuildReward.ins().guildPersonalRankList)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(PersonalInteRankInfo.prototype,"PersonalInteRankInfo",["ICommonWindowTitle"]),window.PersonalInteRankInfo=PersonalInteRankInfo;var PersonInteRewardInfo=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101042,t.skinName="PersonInteRewardSkin",t.name=GlobalConfig.jifengTiaoyueLg.st101042,t.list.itemRenderer=PersonRewardRenderer,t.list1.itemRenderer=GuildInteRewardItemRenderer,t.dataArr=new eui.ArrayCollection,t.dataArr1=new eui.ArrayCollection,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101043,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101044,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this.dataList){this.dataList=[];var i=GlobalConfig.ins("GuildBattlePersonalAward");for(var o in i)this.dataList.push(i[o])}if(this.dataArr.source=this.dataList,this.list.dataProvider=this.dataArr,!this.dataList1){this.dataList1=[];var i=GlobalConfig.ins("GuildBattlePersonalRankAward");for(var o in i)this.dataList1.push(i[o])}GuildWar.ins().guildRankRewardType=0,this.dataArr1.source=this.dataList1,this.list1.dataProvider=this.dataArr1},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(PersonInteRewardInfo.prototype,"PersonInteRewardInfo",["ICommonWindowTitle"]),window.PersonInteRewardInfo=PersonInteRewardInfo;var PersonRewardRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="PersonRewardRendererSkin",t.itemList.itemRenderer=ItemBase,t}return __extends(t,e),t.prototype.dataChanged=function(){this.desc.text=+this.data.integral+"",this.itemList.dataProvider=new eui.ArrayCollection(this.data.award)},t}(eui.ItemRenderer);__reflect(PersonRewardRenderer.prototype,"PersonRewardRenderer"),window.PersonRewardRenderer=PersonRewardRenderer;var RedBagDetailsWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="RedBagDetailsSkin",t.list.itemRenderer=RedBagRenderer,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101862,t}return __extends(t,e),t.prototype.initMc=function(){this.effect||(this.effect=new MovieClip,this.effect.x=244,this.effect.y=300)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.initMc(),this.num.text=GuildReward.ins().robYbNum+"",this.list.dataProvider=new eui.ArrayCollection(GuildReward.ins().rebList),e[0]&&(this.effect.loadUrl(ResDataPath.GetUIEffePath("yanhuaeff"),!0,1),this.addChild(this.effect)),this.AddClick(this.closeBtn,this._OnClick),this.AddClick(this.bg,this._OnClick)},t.prototype.close=function(){DisplayUtils.dispose(this.effect),this.effect=null},t.prototype._OnClick=function(){ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t
}(BaseEuiPanel);__reflect(RedBagDetailsWin.prototype,"RedBagDetailsWin"),window.RedBagDetailsWin=RedBagDetailsWin;var RedBagRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="RedBagRendererSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.num.text=e.yuanbao+"",this.nameLabel.text=e.actorname},t}(eui.ItemRenderer);__reflect(RedBagRenderer.prototype,"RedBagRenderer"),window.RedBagRenderer=RedBagRenderer;var SelectMemberPanelWin=function(e){function t(){var t=e.call(this)||this;return t.selectItemList=[],t.skinName="SelectMemberPanelSkin",t.list.itemRenderer=MemberItem3Renderer,t.sureBtn.label=GlobalConfig.jifengTiaoyueLg.st100040,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.index=e[0],this.maxNum=e[1],this.list.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GuildReward.ins().sendList[this.index]=[],GuildReward.ins().sendNumList[this.index]=[],this.selectList=[],this.numList=[],this.selectItemList=[],this.chooseNum.text=GlobalConfig.jifengTiaoyueLg.st101783+" "+this.countNum()+"/"+this.maxNum,this.sureBtn.enabled=this.selectList.length==this.maxNum,this.refushList(),this.m_bg.init("SelectMemberPanelWin",GlobalConfig.jifengTiaoyueLg.st101784)},t.prototype.refushList=function(){this.list.dataProvider=new eui.ArrayCollection(GuildReward.ins().getMyGuildPointRank())},t.prototype.close=function(){this.list.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.dispatch(MessageDef.GUILDWAR_SENDLIST_CHANGE)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.countNum=function(){var e=0;if(this.selectItemList)for(var t in this.selectItemList)e+=this.selectItemList[t].chooseNum;return e},t.prototype.onTap=function(e){switch(e.currentTarget){case this.sureBtn:this.toNumList(),GuildReward.ins().sendList[this.index]=this.selectList,GuildReward.ins().sendNumList[this.index]=this.numList,ViewManager.ins().close(this);break;case this.list:var t=e.target.parent;if(t&&t.data){var i=t.data,o=this.selectItemList.lastIndexOf(i);switch(e.target){case t.btn1:--i.chooseNum,i.chooseNum<1&&(i.chooseNum=1);break;case t.btn2:if(this.countNum()>=this.maxNum)return void UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101789);++i.chooseNum;break;default:if(o>=0)t.checkBoxs.selected=!1,i.chooseNum=0,this.selectItemList.splice(o,1);else{if(this.countNum()>=this.maxNum)return t.checkBoxs.selected=!1,void UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101789);t.checkBoxs.selected=!0,this.selectItemList.push(i),i.chooseNum=1}}t.num1.text=i.chooseNum+"",this.setAddInfoShow(t,t.checkBoxs.selected),this.chooseNum.text=GlobalConfig.jifengTiaoyueLg.st101783+" "+this.countNum()+"/"+this.maxNum,this.sureBtn.enabled=this.countNum()==this.maxNum}}},t.prototype.setAddInfoShow=function(e,t){void 0===t&&(t=!1),e.btn1.visible=e.btn2.visible=e.num1.visible=e.inputBg.visible=t},t.prototype.toNumList=function(){if(this.selectItemList)for(var e in this.selectItemList)this.selectList.push(this.selectItemList[e]),this.numList.push(this.selectItemList[e].chooseNum)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(SelectMemberPanelWin.prototype,"SelectMemberPanelWin"),window.SelectMemberPanelWin=SelectMemberPanelWin;var SelectMemberRewardWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101788,t.dataLen=[],t.skinName="SelectMemberRewardSkin",t.list.itemRenderer=SelectRewardItemRenderer,t.sendReward.label=GlobalConfig.jifengTiaoyueLg.st101788,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.dispIndex=e[0],this.commonWindowBg.OnAdded(this),GuildReward.ins().SendGetMyGuildRank(),this.sendReward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.addListener(MessageDef.GUILDWAR_SENDLIST_CHANGE,this.refushList,this),this.refushPanelInfo()},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.refushPanelInfo=function(){var e,i;1==t.dispIndex?(i=GlobalConfig.jifengTiaoyueLg.st101785,e=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101635,[GuildReward.ins().kF1guildWarRank])):2==t.dispIndex?(i=GlobalConfig.jifengTiaoyueLg.st101786,e=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101635,[GuildReward.ins().kF2guildWarRank])):(i=GlobalConfig.jifengTiaoyueLg.st100920,e=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101635,[GuildReward.ins().guildWarRank])),this.rankLabel.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st101787,style:{textColor:12549376}},{text:i,style:{textColor:16758826}},{text:GlobalConfig.jifengTiaoyueLg.st101590+"：",style:{textColor:12549376}},{text:e,style:{textColor:16758826}}],this.dataLen.length=GuildReward.ins().getCanSendNumByRank(),this.refushList()},t.prototype.refushList=function(){this.list.dataProvider=new eui.ArrayCollection(this.dataLen)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.sendReward:TimerManager.ins().doTimer(100,1,function(){GuildReward.ins().checkISSendAll()&&GuildReward.ins().SendDispAward()},this)}},t.prototype.UpdateContent=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(SelectMemberRewardWin.prototype,"SelectMemberRewardWin",["ICommonWindowTitle"]),window.SelectMemberRewardWin=SelectMemberRewardWin;var SelectRewardItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.sendNum=0,t.skinName="SelectRewardItemSkin",t.choosePeople.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTap,t),t.list.itemRenderer=GuildWarMemberHeadRender,t.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st101783+"：",t.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st101783,t.choosePeople.label=GlobalConfig.jifengTiaoyueLg.st101784,t}return __extends(t,e),t.prototype.dataChanged=function(){var e;e=1==SelectMemberRewardWin.dispIndex?GuildReward.ins().kF1guildWarRank:2==SelectMemberRewardWin.dispIndex?GuildReward.ins().kF2guildWarRank:GuildReward.ins().guildWarRank,GuildWar.ins().guildRankRewardType=SelectMemberRewardWin.dispIndex;var t=GuildWar.ins().creatGuildRankReward(e,this.itemIndex);this.goods.data=t[0],this.sendNum=GuildReward.ins().getCanSendNumByRank(this.itemIndex),this.payNum.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101782,[this.sendNum]);var i=GuildReward.ins().getSelectDataByIndex(this.itemIndex),o=0;if(i.length>0)for(var s in i)o+=i[s].num;this.chooseNum.text=o+"/"+this.sendNum,this.list.dataProvider=new eui.ArrayCollection(i)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.choosePeople:ViewManager.ins().open(SelectMemberPanelWin,this.itemIndex,this.sendNum)}},t}(eui.ItemRenderer);__reflect(SelectRewardItemRenderer.prototype,"SelectRewardItemRenderer"),window.SelectRewardItemRenderer=SelectRewardItemRenderer;var UserJingMai=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendBoost=function(e){var t=new Sproto.cs_jingmai_boost_request;t.roleID=e,this.Rpc(C2sProtocol.cs_jingmai_boost,t,this.doUpData,this)},t.prototype.sendUpgrade=function(e){var t=new Sproto.cs_jingmai_upgrade_request;t.roleID=e,this.Rpc(C2sProtocol.cs_jingmai_upgrade,t,this.doUpData,this)},t.prototype.doUpData=function(e){var t=e.index;SubRoles.ins().getSubRoleByIndex(t).jingMaiData.parser(e.data),this.postUpdate()},t.prototype.postUpdate=function(){},t.prototype.sendBigUpLevel=function(e){var t=new Sproto.cs_jingmai_stage_request;t.roleID=e,this.Rpc(C2sProtocol.cs_jingmai_stage,t,this.doBigUpLevel,this)},t.prototype.doBigUpLevel=function(e){var t,i=e.result;i?t="道具不足够":e.type||(t="使用成功，元神等阶+1",this.doUpData(e)),t&&UserTips.ins().showTips(t)},t.prototype.canGradeupJingMai=function(){var e=[!1,!1,!1];if(null==this.jingMaiCommonConfig&&(this.jingMaiCommonConfig=GlobalConfig.ins("JingMaiCommonConfig")),GameLogic.ins().actorModel.level<this.jingMaiCommonConfig.openLevel)return e;for(var t,i=0,o=0,s=SubRoles.ins().subRolesLen,n=0;s>n;n++){var r=SubRoles.ins().getSubRoleByIndex(n);t=GlobalConfig.jingMaiLevelConfig[r.jingMaiData.level],i=t.count,i?(o=UserBag.ins().getBagGoodsCountById(0,t.itemId),e[n]=o>=i):e[n]=!1}return e},t.prototype.IsRed=function(){if(Deblocking.Check(DeblockingType.TYPE_77,!0)){if(null==this.jingMaiCommonConfig&&(this.jingMaiCommonConfig=GlobalConfig.ins("JingMaiCommonConfig")),GameLogic.ins().actorModel.level<this.jingMaiCommonConfig.openLevel)return!1;if(UserBag.ins().getBagGoodsCountById(UserBag.BAG_TYPE_OTHTER,this.jingMaiCommonConfig.levelItemid)>0)return!0;for(var e=this.canGradeupJingMai(),t=0,i=e;t<i.length;t++){var o=i[t];if(o)return!0}}return!1},t}(BaseSystem);__reflect(UserJingMai.prototype,"UserJingMai"),MessageCenter.compile(UserJingMai),window.UserJingMai=UserJingMai;var JingMaiPanel=function(e){function t(){var t=e.call(this)||this;return t.shape=new egret.Shape,t.shape2=new egret.Shape,t.shape3=new egret.Shape,t.itemList=[],t.isUpgrade=!1,t.oldIndexTemp=-1,t._startX=0,t._startY=0,t._lineX=0,t._lineY=0,t.isOtherPlayer=!1,t.currLv=-1,t.skinName="JinMaiSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.consumeLabel.consumeType=GlobalConfig.jifengTiaoyueLg.st100298,null==this.jingMaiCommonConfig&&(this.jingMaiCommonConfig=GlobalConfig.ins("JingMaiCommonConfig")),this.danItemID=this.jingMaiCommonConfig.levelItemid,this.group.addChildAt(this.shape3,0),this.group.addChild(this.shape),this.group.addChild(this.shape2);for(var t=0;8>t;t++)this.itemList.push(this["point"+t]);this.shape.blendMode=egret.BlendMode.ADD,this.barList=[],this.boostBtn.label=GlobalConfig.jifengTiaoyueLg.st100596,this.upgradeBtn.label=GlobalConfig.jifengTiaoyueLg.st100214},t.prototype.open=function(){var e=this;this.addTouchEvent(this,this.onTap,this.boostBtn),this.addTouchEvent(this,this.onTap,this.getItem2),this.addTouchEvent(this,this.onTap,this.upgradeBtn),this.addTouchEvent(this,this.onTap,this.bigUpLevelBtn),this.observe(UserJingMai.ins().postUpdate,this.setForgeData),this.observe(UserBag.postItemAdd,this.setForgeData),this.observe(UserBag.postItemChange,this.setForgeData),egret.setTimeout(function(){e.setForgeData(null)},this,20),this.isUpgrade=!1,this.isChangeTab=!0},t.prototype.close=function(){this.removeObserve(),this.removeEvents(),egret.Tween.removeTweens(this.shape),egret.Tween.removeTweens(this.shape2),this._destory(),DisplayUtils.dispose(this.successEff),this.successEff=null},t.prototype._destory=function(){for(var e=0,t=this.barList.length;t>e;e++){var i=this.barList[e];DisplayUtils.removeFromParent(i),DisplayUtils.dispose(i)}this.barList=[],DisplayUtils.dispose(this.barUpMc),this.barUpMc=null},t.prototype.onTap=function(e){var t=this;switch(e.currentTarget){case this.boostBtn:var i=GlobalConfig.jingMaiLevelConfig[this._data.level];UserBag.ins().getBagGoodsCountById(0,i.itemId)>=i.count?UserJingMai.ins().sendBoost(this.curRole):UserWarn.ins().setBuyGoodsWarn(i.itemId);break;case this.upgradeBtn:this.isUpgrade=!0,UserJingMai.ins().sendUpgrade(this.curRole);break;case this.bigUpLevelBtn:null==this.jingMaiCommonConfig&&(this.jingMaiCommonConfig=GlobalConfig.ins("JingMaiCommonConfig"));var o=GlobalConfig.itemConfig[this.danItemID].name;WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100595,[o,this.jingMaiCommonConfig.levelItemidStage,this.jingMaiCommonConfig.levelItemChange])+GlobalConfig.itemConfig[this.jingMaiCommonConfig.itemid].name,function(){UserJingMai.ins().sendBigUpLevel(t.curRole)},this);break;case this.getItem2:var i=GlobalConfig.jingMaiLevelConfig[this._data.level];UserWarn.ins().setBuyGoodsWarn(i.itemId)}},t.prototype.setForgeData=function(e){var t=this;this.isOtherPlayer&&(this._data=e),this.stages.text=""+(this._data.stage+1)+" "+GlobalConfig.jifengTiaoyueLg.st100103;var i=GlobalConfig.ins("JingMaiStageConfig")[this._data.stage],o=GlobalConfig.jingMaiLevelConfig[this._data.level];this.attrLabel.SetCurAttr(AttributeData.getAttStr(AttributeData.AttrAddition(i.attr,o.attr),1)),this.powerLabel.text=UserBag.getAttrPower(AttributeData.AttrAddition(i.attr,o.attr));var s=this._data.level/8-i.stage,n=this._data.level%8;1==s&&(n=8),-1==this.currLv&&(this.currLv=n);for(var r=0;8>r;++r)this.itemList[r].alpha=n>r?1:.3,null==this.barList[r]&&(this.barList[r]=new MovieClip,this.barList[r].loadUrl(ResDataPath.GetUIEffePath("eff_soul_success"),!0,-1),this.barList[r].x=this["m_G"+r].width/2,this.barList[r].y=this["m_G"+r].height/2,this["m_G"+r].addChild(this.barList[r])),this.currLv-1!=n-1&&n-1==r&&(null==this.barUpMc?(this.barUpMc=new MovieClip,this.barUpMc.loadUrl(ResDataPath.GetUIEffePath("eff_soul"),!0,1,function(){}),this.group.addChild(this.barUpMc)):this.barUpMc.gotoAndPlay(0,1),this.barUpMc.x=this.itemList[r].x+(this.itemList[r].width>>1),this.barUpMc.y=this.itemList[r].y+(this.itemList[r].height>>1)),n>r?(this.barList[r].gotoAndPlay(0,-1),this.barList[r].visible=!0,this["m_G"+r].visible=!0):(this.barList[r].stop(),this.barList[r].visible=!1,this["m_G"+r].visible=!1);if(this.currLv=n,null==this.jingMaiCommonConfig&&(this.jingMaiCommonConfig=GlobalConfig.ins("JingMaiCommonConfig")),i.stage<this.jingMaiCommonConfig.stageMax){var a=void 0,l=void 0;if(this._data.level>0&&this._data.level%8==0&&s?(a=GlobalConfig.ins("JingMaiStageConfig")[this._data.stage+1],l=o):(a=i,l=GlobalConfig.jingMaiLevelConfig[this._data.level+1]),this.attrLabel.SetNextAttr(AttributeData.getAttStr(AttributeData.AttrAddition(a.attr,l.attr),1)),this.drawLight(this._data.level%8),this._data.level>0,this._data.level>0&&this._data.level%8==0&&s)this.boostBtn.visible=!1,this.upgradeBtn.visible=!0,this.oldIndexTemp=-1,this.consumeLabel.ShowMaxTip(GlobalConfig.jifengTiaoyueLg.st100299);else{this.boostBtn.visible=!0,this.upgradeBtn.visible=!1;var h=UserBag.ins().getBagGoodsCountById(0,o.itemId),c="";c=h>=o.count?"|C:0x00ff00&":"|C:0xf87372&",h<o.count&&this.m_RoleSelectPanel.clearRedPoint(),this.consumeLabel.curValue=h,this.consumeLabel.consumeValue=o.count}this.isUpgrade&&(this.isUpgrade=!1,this.successEff||(this.successEff=new MovieClip,this.successEff.x=240,this.successEff.y=200,this.addChild(this.successEff)),this.successEff.visible=!0,this.successEff.loadUrl(ResDataPath.GetUIEffePath("eff_success"),!0,1,function(){t.successEff&&(t.successEff.visible=!1)}))}else this.boostBtn.visible=!1,this.upgradeBtn.visible=!1,this.consumeLabel.ShowMaxTip(""),s=1;var u=UserBag.ins().getBagGoodsCountById(0,this.danItemID);this.bigUpLevelBtn.redPoint&&(this.bigUpLevelBtn.redPoint.visible=u?!0:!1,this.bigUpLevelBtn.txt&&(this.bigUpLevelBtn.txt.text=u))},t.prototype.drawLight=function(e){},t.prototype.showSelect=function(e){},Object.defineProperty(t.prototype,"lineX",{get:function(){return this._lineX},set:function(e){this._lineX=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineY",{get:function(){return this._lineY},set:function(e){this._lineY=e,DisplayUtils.drawLine(this.shape,this._startX,this._startY,this._lineX,this._lineY,3,195576)},enumerable:!0,configurable:!0}),t.prototype.UpdateContent=function(){var e=SubRoles.ins().getSubRoleByIndex(this.curRole);this._data=e.jingMaiData,this.setForgeData(this._data);for(var t=UserJingMai.ins().canGradeupJingMai(),i=0;i<t.length;++i)this.m_RoleSelectPanel.showRedPoint(i,t[i])},Object.defineProperty(t.prototype,"curRole",{get:function(){return this.m_RoleSelectPanel.getCurRole()},enumerable:!0,configurable:!0}),t}(BaseView);__reflect(JingMaiPanel.prototype,"JingMaiPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.JingMaiPanel=JingMaiPanel;var Ladder=function(e){function t(){var t=e.call(this)||this;return t.isCanReward=!1,t.upLevel=0,t.upId=0,t.upWin=0,t.todayBuyTime=0,t.upRankList=[],t.isTipsFlag=!1,t.nextTime=0,t.sysId=PackageID.Ladder,t.regNetMsg(S2cProtocol.sc_ladder_info,t.doLadderInfo),t.regNetMsg(S2cProtocol.sc_ladder_player_back,t.postPlayerBack),t.regNetMsg(S2cProtocol.sc_ladder_result,t.doPlayResule),t.regNetMsg(S2cProtocol.sc_ladder_rank_list,t.doRankInfoList),t.regNetMsg(S2cProtocol.sc_ladder_buy_count,t.doChallageNum),t.regNetMsg(S2cProtocol.sc_ladder_get_record,t.saveRecordData),t}return __extends(t,e),t.prototype.saveRecordData=function(e){this.recordList=e.recordList,GameGlobal.ViewManager.open(LadderKingList)},t.ins=function(){return e.ins.call(this)},t.prototype.getActorInfo=function(e){return void 0===e&&(e=-1),-1==e?this._actorInfo:this._actorInfo[e]},t.prototype.sendGetSomeOne=function(){this.Rpc(C2sProtocol.cs_ladder_get_some_one)},t.prototype.sendStarPlay=function(e,t){var i=new Sproto.cs_ladder_start_play_request;i.type=t,i.id=e,this.Rpc(C2sProtocol.cs_ladder_start_play,i)},t.prototype.sendGetWeekReward=function(){this.Rpc(C2sProtocol.cs_ladder_get_week_reward),GameGlobal.MessageCenter.dispatch(MessageDef.LADDER_PRE_WEEK_REWARD)},t.prototype.sendGetRankInfo=function(){this.Rpc(C2sProtocol.cs_ladder_get_rank_info)},t.prototype.sendBuyChallgeTime=function(){this.Rpc(C2sProtocol.cs_ladder_buy_count)},t.prototype.sendChangeList=function(){this.Rpc(C2sProtocol.cs_ladder_get_record)},t.prototype.doLadderInfo=function(e){this.docodeInfo(e)},t.prototype.postTadderChange=function(){},t.prototype.postPlayerBack=function(e){this.doCodeplayerInfo(e)},t.prototype.doPlayResule=function(e){this.doPlayResult(e)},t.prototype.doRankInfoList=function(e){this.upRankList=[];for(var t=e.upWeekRankList.length,i=0;t>i;++i)this.setRankData(this.upRankList,i,e.upWeekRankList[i]);for(var i=this.upRankList.length,o=this.checkObjListLength();o>i;++i)this.upRankList.push(null);this.configList||(this.configList=this.cloneConfigDataList(GlobalConfig.ins("TianTiDanConfig")),this.configList.reverse()),GameGlobal.MessageCenter.dispatch(MessageDef.LADDER_UPWEEK_RANK_UPDATE)},t.prototype.setRankData=function(e,t,i){t in e||(e[t]=new RankDataLadder),e[t].parser(i,null),e[t].pos=t+1},t.prototype.doChallageNum=function(e){this.todayBuyTime=e.todayBuyTime},Object.defineProperty(t.prototype,"NextTime",{get:function(){return this.nextTime},enumerable:!0,configurable:!0}),t.prototype.docodeInfo=function(e){this.isOpen=e.isOpen,this.level=e.level,this.nowId=e.nowId,this.nowId=this.SetStep(this.level,this.nowId),this.challgeNum=e.challgeNum,this.challgeCd=e.challgeCd,this.nextTime=e.challgeCd+GameServer.serverTime,this.winNum=e.winNum,this.lianWin=e.lianWin,this.playUpTime=e.playUpTime,this.upWeekRank=e.rank,this.playUpTime&&(this.isCanReward=e.isCanReward,this.upLevel=e.upLevel,this.upId=e.upId,this.upId=this.SetStep(this.upLevel,this.upId),this.upWin=e.upWin),t.ins().postTadderChange()},t.prototype.doCodeplayerInfo=function(e){var t=e.type,i=e.id;this._actorInfo=[],this._actorInfo.push(t,i),i>0&&(this._actorInfo.push(e.name),this._actorInfo.push(e.job),this._actorInfo.push(e.sex),this._actorInfo.push(e.level),this._actorInfo.push(e.step)),this.step=e.step},t.prototype.doPlayResult=function(e){for(var t=e.isWin,i=e.rewardData.length,o=[],s=0;i>s;s++){var n=new RewardData;n.parser(e.rewardData[s]),o.push(n)}var r=(this.level,this.nowId);this.level=e.upLevel,this.nowId=e.upId,this.nowId=this.SetStep(this.level,this.nowId);var a=e.upStar,l=egret.setTimeout(function(){egret.clearTimeout(l),ViewManager.ins().open(LadderResultWin,t,o,this.level,r,a)},this,1e3)},t.prototype.checkObjListLength=function(){for(var e=1;200>e;e++)if(!GlobalConfig.ins("TianTiRankAwardConfig")[e+""])return e;return 0},t.prototype.getMyRankInfo=function(e){for(var t=0;t<e.length;t++)if(e[t].id==GameLogic.ins().actorModel.actorID)return e[t];return null},t.prototype.getLevelDuanWeiLength=function(e){var t=0,i=GlobalConfig.ins("TianTiDanConfig");for(var o in i[e+""])i[e+""][o]&&t++;return t},t.prototype.getDuanWeiDesc=function(){var e="",t=this.getLevelConfig();return t&&(e=t.showLevel+this.getZhongwenNumber(t.showDan)+"段"),e},t.prototype.getLevelConfig=function(e,t){void 0===e&&(e=-1),void 0===t&&(t=-1),-1==e&&(e=this.level),-1==t&&(t=this.nowId),4==e&&(t=0);var i=GlobalConfig.ins("TianTiDanConfig");for(var o in i[e+""])if(i[e+""][o].id==t)return i[e+""][o];return null},t.prototype.creatRewardData=function(e){var t;return t=new RewardData,t.count=e.count,t.type=e.type,t.id=e.id,t},t.prototype.getZhongwenNumber=function(e){var t="";switch(e){case 1:t=GlobalConfig.jifengTiaoyueLg.st100432;break;case 2:t=GlobalConfig.jifengTiaoyueLg.st100433;break;case 3:t=GlobalConfig.jifengTiaoyueLg.st100434;break;case 4:t=GlobalConfig.jifengTiaoyueLg.st100435;break;case 5:t=GlobalConfig.jifengTiaoyueLg.st100436;break;case 6:t=GlobalConfig.jifengTiaoyueLg.st100437;break;case 7:t=GlobalConfig.jifengTiaoyueLg.st100438;break;case 8:t=GlobalConfig.jifengTiaoyueLg.st100439;break;case 9:t=GlobalConfig.jifengTiaoyueLg.st100440}return t},t.prototype.cloneConfigDataList=function(e){var t,i=[];for(var o in e)for(var s in e[o])t=new TianTiDanConfig,t.level=parseInt(o),t.id=e[o][s].id,t.showStar=e[o][s].showStar,t.showDan=e[o][s].showDan,t.showLevel=e[o][s].showLevel,t.winAward=e[o][s].winAward,t.danAward=e[o][s].danAward,this.checkIshaveOne(i,t)&&i.push(t);return i},t.prototype.checkRedShow=function(){return Deblocking.Check(DeblockingType.TYPE_02,!0)&&(this.challgeNum>0&&this.isOpen||this.isCanReward)?1:0},t.prototype.checkIshaveOne=function(e,t){for(var i=e.length,o=0;i>o;o++)if(e[o].level==t.level)return!1;return!0},t.prototype.getStatuByLevel=function(e){var t;switch(e){case 1:t=3;break;case 2:t=4;break;case 3:t=5;break;case 4:t=0}return t},t.prototype.SetStep=function(e,t){return t},t}(BaseSystem);__reflect(Ladder.prototype,"Ladder"),MessageCenter.compile(Ladder),window.Ladder=Ladder;var LadderDetailList=function(e){function t(){var t=e.call(this)||this;return t.skinName="ListDetailItem",t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100809,t}return __extends(t,e),t.prototype.dataChanged=function(){this.data,1==this.data.recordType?this.recordType.source="comp_18_18_02_png":this.recordType.source="comp_18_18_01_png",1==this.data.isWin?this.isWin.source="comp_66_66_01_png":this.isWin.source="comp_66_66_02_png",this.laddername.text=this.data.name,this.power.text=this.data.power,this.zhuansheng_lv.text=this.data.zhuansheng_lv+GlobalConfig.jifengTiaoyueLg.st100067+this.data.lv+GlobalConfig.jifengTiaoyueLg.st100093,this.recordTime.text=DateUtils.format_2(1e3*this.data.recordTime),1==this.data.awardType?this.awardType.text="+1":2==this.data.awardType?this.awardType.text="+2":this.data.awardType>2?(this.awardType.text="-1",this.awardType.textColor=16282482):this.awardType.text="0"},t}(eui.ItemRenderer);__reflect(LadderDetailList.prototype,"LadderDetailList"),window.LadderDetailList=LadderDetailList;var LadderInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100579,t.roleMan=["comp_rw_01_png","comp_rw_02_png","comp_rw_03_png"],t.roleWomen=["comp_rw_11_png","comp_rw_12_png","comp_rw_13_png"],t.isMatch=!1,t.duanweiList=[GlobalConfig.jifengTiaoyueLg.st100590,GlobalConfig.jifengTiaoyueLg.st100591,GlobalConfig.jifengTiaoyueLg.st100592,GlobalConfig.jifengTiaoyueLg.st100593,GlobalConfig.jifengTiaoyueLg.st100594],t.name=GlobalConfig.jifengTiaoyueLg.st100579,t.skinName="LadderInfoPanelSkin",t.lastWeek.label=GlobalConfig.jifengTiaoyueLg.st100801,t.seeRank.label=GlobalConfig.jifengTiaoyueLg.st100497,t.wz_open_time.text=GlobalConfig.jifengTiaoyueLg.st100803,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100804,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100492,t.flowPlayer.label=GlobalConfig.jifengTiaoyueLg.st100805,t.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100806,t.truceIng.text=GlobalConfig.jifengTiaoyueLg.st100807,t.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st102087,t}return __extends(t,e),t.prototype.getSource=function(e,t){return 0==t?this.roleMan[e]:this.roleWomen[e]},t.prototype.fightHead=function(){for(var e=this.scrollGroup.numChildren,t=0;e>t;t++)this.scrollGroup.removeChildAt(0);for(var i=0;10>i;i++){var o=new eui.Image;o.source=this.getSource(MathUtils.randomArray([1,2,3])-1,MathUtils.randomArray([0,1])),o.width=208,o.height=190,this.scrollGroup.addChild(o),o.y=i*o.height+10}},t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBase},t.prototype.open=function(){this.ListBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.flowPlayer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buyTime.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.addListener(Ladder.ins().postTadderChange,this.UpdateContent,this),this.buyTime.textFlow=(new egret.HtmlTextParser).parser("<font color = '#23C42A'><u>"+GlobalConfig.jifengTiaoyueLg.st100580+"</u></fomt>"),TimerManager.ins().doTimer(1e3,0,this._updateNextTime,this),this.lastWeek.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClickGo,this),this.seeRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClickGo,this),this.observe(Ladder.ins().postPlayerBack,this.matchSuccessful),this.scrollGroup.mask=this.rectMask,this.scrollGroup.visible=!1,this.role_two_image.visible=!0;var e=SubRoles.ins().getSubRoleByIndex(0);0==e.sex?this.role_one_image.source=this.roleMan[e.job-1]:this.role_one_image.source=this.roleWomen[e.job-1]},t.prototype.matchSuccessful=function(){this.isMatch=!0;var e=Ladder.ins().getActorInfo();if(!e)return void console.error("showPointPlayerInfo,ladder data is null");if((0!=e[0]||0!=e[1])&&10==this.scrollGroup.numChildren){var t=this.scrollGroup.getChildAt(9);t.source=this.getSource(e[3]-1,e[4])}},t.prototype.playerBack=function(){var e=this;this.role_two_image.visible=!1,this.scrollGroup.visible=!0,this.fightHead(),egret.Tween.get(this.scrollGroup).to({y:-2295},3500).call(function(){return egret.Tween.removeTweens(e.scrollGroup),e.scrollGroup.y=0,0==e.isMatch?(e.role_two_image.visible=!0,e.scrollGroup.visible=!1,e.match_label.visible=!1,e.flowPlayer.visible=!0,void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100581)):void(0==Ladder.ins().getActorInfo(1)&&Ladder.ins().getActorInfo(0)?(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100582),e.role_two_image.visible=!0,e.scrollGroup.visible=!1,e.match_label.visible=!1,e.flowPlayer.visible=!0):(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100583),e.timeOut=egret.setInterval(e.sendStarPlay,e,1500)))},this)},t.prototype.sendStarPlay=function(){egret.clearInterval(this.timeOut),Ladder.ins().sendStarPlay(Ladder.ins().getActorInfo(1),Ladder.ins().getActorInfo(0)),this.match_label.visible=!1,this.flowPlayer.visible=!0,this.isMatch=!1},t.prototype.close=function(){this.flowPlayer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buyTime.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.ListBtn0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.lastWeek.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClickGo,this),this.seeRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClickGo,this)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.flowPlayer:if(Ladder.ins().challgeNum<=0)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100584);Ladder.ins().sendGetSomeOne(),this.playerBack(),this.match_label.visible=!0,this.flowPlayer.visible=!1;break;case this.buyTime:if(null==this.tianTiConstConfig&&(this.tianTiConstConfig=GlobalConfig.ins("TianTiConstConfig")),Ladder.ins().todayBuyTime==this.tianTiConstConfig.maxBuyChallengesCount)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100585);if(GameLogic.ins().actorModel.yb<this.tianTiConstConfig.buyChallengesCountYuanBao)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100014);if(Ladder.ins().isTipsFlag)Ladder.ins().sendBuyChallgeTime();else{var t=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100586,[this.tianTiConstConfig.buyChallengesCountYuanBao])+GlobalConfig.jifengTiaoyueLg.st100587+Ladder.ins().todayBuyTime+"/"+this.tianTiConstConfig.maxBuyChallengesCount;0==Ladder.ins().isTipsFlag&&(t=t+"\n\n<font color='#FFB82A'>"+GlobalConfig.jifengTiaoyueLg.st100550),WarnWin.show(t,function(){Ladder.ins().isTipsFlag=!0,Ladder.ins().sendBuyChallgeTime()},this)}break;case this.ListBtn0:Ladder.ins().sendChangeList()}},t.prototype._updateNextTime=function(){null==this.tianTiConstConfig&&(this.tianTiConstConfig=GlobalConfig.ins("TianTiConstConfig")),Ladder.ins().challgeNum>=this.tianTiConstConfig.maxRestoreChallengesCount?this.updatatimetext.text=GlobalConfig.jifengTiaoyueLg.st100589:Ladder.ins().NextTime-GameServer.serverTime>0?this.updatatimetext.text="("+GameServer.GetPkTime(Ladder.ins().NextTime)+")"+GlobalConfig.jifengTiaoyueLg.st100543:this.updatatimetext.text=GlobalConfig.jifengTiaoyueLg.st100589},t.prototype.UpdateContent=function(){null==this.tianTiConstConfig&&(this.tianTiConstConfig=GlobalConfig.ins("TianTiConstConfig")),this.lastNum.text=""+Ladder.ins().challgeNum+"/"+this.tianTiConstConfig.maxRestoreChallengesCount,Ladder.ins().challgeNum>0?this.lastNum.textColor=3066402:this.lastNum.textColor=16282482,this.winNum.text=GlobalConfig.jifengTiaoyueLg.st100800+Ladder.ins().winNum;var e=Ladder.ins().getLevelConfig();if(e){var t=[Ladder.ins().creatRewardData(e.danAward[0])];this.list.dataProvider=new eui.ArrayCollection(t),this.level1img.text=this.duanweiList[e.level],this.laddericon1.source="comp_95_78_0"+e.level+"_png",4==e.level?(this.starNum.text=GlobalConfig.jifengTiaoyueLg.st100050+" * "+Ladder.ins().nowId,this.diamondNum.visible=!0):this.diamondNum.visible=!1,e.showDan>0?this.duanwei1Img.text=e.showDan+GlobalConfig.jifengTiaoyueLg.st100103:this.duanwei1Img.text="",this.showStar(e)}this.winImg.visible=Ladder.ins().lianWin,this.truceUIChange()},t.prototype.showStar=function(e){this.starGroup.removeChildren();for(var t,i=Ladder.ins().getStatuByLevel(e.level),o=e.showStar,s=0;i>s;s++)t=new eui.Image,o>s?t.source="comp_15_15_01_png":t.source="comp_15_15_03_png",this.starGroup.addChild(t)},t.prototype.truceUIChange=function(){this.stateGroup.visible=Ladder.ins().isOpen,this.ui_wz_wzjl.visible=!Ladder.ins().isOpen,this.wz_open_time.visible=!Ladder.ins().isOpen},t.prototype._OnClickGo=function(e){switch(e.currentTarget){case this.lastWeek:ViewManager.ins().open(LadderRankWin,0);break;case this.seeRank:ViewManager.ins().open(LadderRankWin,1)}},t.prototype.CheckRedPoint=function(){return Ladder.ins().checkRedShow()},t.openCheck=function(){return Deblocking.Check(DeblockingType.TYPE_02)},t}(BaseView);__reflect(LadderInfoPanel.prototype,"LadderInfoPanel",["ICommonWindowTitle"]),window.LadderInfoPanel=LadderInfoPanel;var LadderKingList=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.UpdateContent=function(){},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="LadderListSkin"},t.prototype.open=function(){this.m_bg.init("LadderKingList",GlobalConfig.jifengTiaoyueLg.st100808),this.ListDtail.itemRenderer=LadderDetailList;var e=Ladder.ins().recordList.sort(function(e,t){return e.recordTime>t.recordTime?-1:1});this.ListDtail.dataProvider=new eui.ArrayCollection(e)},t.prototype.close=function(){},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t}(BaseEuiView);__reflect(LadderKingList.prototype,"LadderKingList",["ICommonWindow"]),ViewManager.ins().reg(LadderKingList,LayerManager.UI_Main),window.LadderKingList=LadderKingList;var LadderLevelIcon=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this._Update()},t.prototype.SetLevel=function(e){if(this.m_Rank01=e,4!=e){var t=Ladder.ins().getLevelConfig();this.m_Rank02=t?t.showDan:0}else this.m_Rank02=Ladder.ins().nowId;this._Update()},t.prototype.SetRank=function(e,t){if(this.m_Rank01=e,4!=e){var i=Ladder.ins().getLevelConfig(e,t);
this.m_Rank02=i?i.showDan:0}else this.m_Rank02=t;this._Update()},t.prototype.SetRank2=function(e,t){this.m_Rank01=e,this.m_Rank02=t,this._Update()},t.prototype._Update=function(){null!=this.$stage&&null!=this.m_Rank01&&null!=this.m_Rank02&&(this.myRank.source=LadderRankWin.GetRankIcon(this.m_Rank01),4==this.m_Rank01&&this.m_Rank02>=0?this.level.text=this.GetLevelImgName(this.m_Rank01,this.m_Rank02):this.m_Rank02>0?(this.level.text=this.GetLevelImgName(this.m_Rank01,this.m_Rank02),this.currentState="normal"):(this.currentState="full",this.level.text=null))},t.prototype.GetLevelImgName=function(e,t){switch(e){case 1:return LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101757,[t]);case 2:return LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101758,[t]);case 3:return LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101759,[t]);case 4:return" "+GlobalConfig.jifengTiaoyueLg.st100050+"X"+t}return LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101757,[t])},t}(eui.Component);__reflect(LadderLevelIcon.prototype,"LadderLevelIcon",["eui.UIComponent","egret.DisplayObject"]),window.LadderLevelIcon=LadderLevelIcon;var LadderPreWeekPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100810,t.skinName="LadderPreWeekPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list3.itemRenderer=LastWeekRankItemRenderer,this.list4.itemRenderer=LastWeekRankItemRenderer,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100815,this.getReward.label=GlobalConfig.jifengTiaoyueLg.st100004,this.dataTabList=new eui.ArrayCollection,this.rankTab.dataProvider=this.dataTabList;var e=[{name:GlobalConfig.jifengTiaoyueLg.st100813},{name:GlobalConfig.jifengTiaoyueLg.st100814}];this.dataTabList.replaceAll(e)},t.prototype.open=function(){this.getReward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.rankTab.selectedIndex=0,this.rankTab.addEventListener(eui.ItemTapEvent.ITEM_TAP,this._ItemClick,this),this._ItemClick(),this.observe(MessageDef.LADDER_UPWEEK_RANK_UPDATE,this.UpdateContent),Ladder.ins().sendGetRankInfo()},t.prototype.close=function(){this.getReward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.rankTab.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this._ItemClick,this)},t.prototype._ItemClick=function(){var e=this.rankTab.selectedIndex;this.scroller0.visible=0==e,this.scroller1.visible=1==e},t.prototype.onTap=function(e){switch(e.currentTarget){case this.getReward:this.getReward.visible=!1,Ladder.ins().isCanReward=!1,Ladder.ins().sendGetWeekReward()}},t.prototype.UpdateContent=function(){var e=Ladder.ins().upRankList;e.length>5&&(e=e.slice(0,5)),this.list3.dataProvider=new eui.ArrayCollection(e),this.list4.dataProvider=new eui.ArrayCollection(Ladder.ins().configList),this.winNum.text=GlobalConfig.jifengTiaoyueLg.st100800+Ladder.ins().upWin+GlobalConfig.jifengTiaoyueLg.st100812,this.getReward.visible=Ladder.ins().isCanReward,Ladder.ins().playUpTime?this.levelIcon.SetRank(Ladder.ins().upLevel,Ladder.ins().upId):this.levelIcon.SetRank(1,5)},t}(BaseView);__reflect(LadderPreWeekPanel.prototype,"LadderPreWeekPanel",["ICommonWindowTitle"]),window.LadderPreWeekPanel=LadderPreWeekPanel;var LadderRankItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="TiantiRankItem",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.rank.visible=!0,this.rank.text=e.pos+"",this.nameLabel.text=e.player,this.winNum.text=e.winNum+GlobalConfig.jifengTiaoyueLg.st100812,this.levelIcon.SetRank(e.challgeLevel,e.challgeId)},t}(eui.ItemRenderer);__reflect(LadderRankItemRenderer.prototype,"LadderRankItemRenderer"),window.LadderRankItemRenderer=LadderRankItemRenderer;var LadderRankPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100819,t.skinName="LadderRankPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=LadderRankItemRenderer,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100821,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100401,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100822,this.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st100823,this.m_Lan5.text=GlobalConfig.jifengTiaoyueLg.st100815,MessageCenter.addListener(Rank.postRankingData,this.UpdateContent,this)},t.prototype.open=function(){},t.prototype.close=function(){},t.prototype.UpdateContent=function(){var e=Rank.ins().rankModel[RankDataType.TYPE_LADDER];this.list.dataProvider=new eui.ArrayCollection(e.getDataList()),this.myRank.text=e.selfPos>0?GlobalConfig.jifengTiaoyueLg.st100811+e.selfPos:GlobalConfig.jifengTiaoyueLg.st100820,this.WinNum.text=GlobalConfig.jifengTiaoyueLg.st100800+Ladder.ins().winNum+GlobalConfig.jifengTiaoyueLg.st100812,this.levelIcon.SetLevel(Ladder.ins().level)},t}(BaseView);__reflect(LadderRankPanel.prototype,"LadderRankPanel",["ICommonWindowTitle"]),window.LadderRankPanel=LadderRankPanel;var LadderRankWin=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.GetIcon=function(e){switch(e){case 1:return"comp_95_78_01_png";case 2:return"comp_95_78_02_png";case 3:return"comp_95_78_03_png";case 4:return"comp_95_78_04_png"}return"comp_95_78_01_png"},t.GetRankIcon=function(e){switch(e){case 1:return"comp_95_78_01_png";case 2:return"comp_95_78_02_png";case 3:return"comp_95_78_03_png";case 4:return"comp_95_78_04_png"}return"comp_95_78_01_png"},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.ladderPreWeekPanel=new LadderPreWeekPanel,this.ladderPreWeekPanel.name=GlobalConfig.jifengTiaoyueLg.st100810,this.commonWindowBg.AddChildStack(this.ladderPreWeekPanel),this.ladderRankPanel=new LadderRankPanel,this.ladderRankPanel.name=GlobalConfig.jifengTiaoyueLg.st100400,this.commonWindowBg.AddChildStack(this.ladderRankPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Rank.ins().sendGetRankingData(RankDataType.TYPE_LADDER);var i=e[0]||0;this.commonWindowBg.OnAdded(this,i)},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),MessageCenter.ins().removeAll(this)},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.LADDER_RANK_ICON="comp_68_68_0",t}(BaseEuiPanel);__reflect(LadderRankWin.prototype,"LadderRankWin",["ICommonWindow"]),ViewManager.ins().reg(LadderRankWin,LayerManager.UI_Main),window.LadderRankWin=LadderRankWin;var LadderResultWin=function(e){function t(){var t=e.call(this)||this;return t._rotation=0,t.listData=new eui.ArrayCollection,t.duanweiList=[GlobalConfig.jifengTiaoyueLg.st100590,GlobalConfig.jifengTiaoyueLg.st100591,GlobalConfig.jifengTiaoyueLg.st100592,GlobalConfig.jifengTiaoyueLg.st100593,GlobalConfig.jifengTiaoyueLg.st100594],t}return __extends(t,e),Object.defineProperty(t.prototype,"closeBtn",{get:function(){return this.fightResultBg.closeBtn},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="LadderResiltWinSkin",this.lastlevel=VIEW_LAYER_LEVEL.TOP,this.list.dataProvider=this.listData,this.list.itemRenderer=ItemBase,this.layerLevel=VIEW_LAYER_LEVEL.TOP,this.closeBtn.labelDisplay.size=18},t.prototype.UpdateContent=function(){null==this.tianTiConstConfig&&(this.tianTiConstConfig=GlobalConfig.ins("TianTiConstConfig"));var e=Ladder.ins().getLevelConfig();e&&(this.level1img.text=this.duanweiList[e.level],this.laddericon1.source="comp_95_78_0"+e.level+"_png",4==e.level?(this.starNum.text=GlobalConfig.jifengTiaoyueLg.st100050+" * "+Ladder.ins().nowId,this.diamondNum.visible=!0):this.diamondNum.visible=!1,e.showDan>0?this.duanwei1Img.text=e.showDan+GlobalConfig.jifengTiaoyueLg.st100103:this.duanwei1Img.text="",this.showStar(e)),this.winImg.visible=Ladder.ins().lianWin},t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),this.isWin=t[0];var o=t[1],s=t[2],n=t[3],r=t[4];this.UpdateContent(),this.currentState=this.isWin?"win":"lose",this.fightResultBg.SetState(this.isWin?"win":"lose"),this.fightResultBg.closeBtn&&(this.fightResultBg.closeBtn.labelDisplay.size=18),this.s=5,this.updateCloseBtnLabel(),TimerManager.ins().doTimer(1e3,5,this.updateCloseBtnLabel,this),this.listData.source=o,this.list.validateNow(),this.refushStarInfo(s,n,r),this.addTouchEvent(this,this.onTap,this.closeBtn);var a=Ladder.ins().getLevelConfig();this.showStar(a);for(var l=this.list.numChildren,h=0;l>h;++h){var c=this.list.getChildAt(h);c&&c instanceof ItemBase&&(c.nameTxt.strokeColor=Color.White,c.nameTxt.stroke=1)}},t.prototype.close=function(){TimerManager.ins().remove(this.updateCloseBtnLabel,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameMap.fubenID>0&&UserFb.ins().sendExitFb(),ViewManager.ins().open(LadderWin,4)},t.prototype.refushStarInfo=function(e,t,i){var o=this,s=Ladder.ins().getLevelConfig(e,t);this.upLevel=e,this.upId=t,this.lastlevel=s.showDan,this.lastRank=s.level,this.isWin,4!=e&&(this.delayTime=egret.setTimeout(function(){egret.clearTimeout(o.delayTime),o.setStarInfoChange(s.showStar,i)},this,500))},t.prototype.setStarInfoChange=function(e,t){},t.prototype.showStar=function(e){this.starGroup.removeChildren();for(var t,i=Ladder.ins().getStatuByLevel(e.level),o=e.showStar,s=0;i>s;s++)t=new eui.Image,o>s?t.source="comp_15_15_01_png":t.source="comp_15_15_03_png",this.starGroup.addChild(t)},t.prototype.cheackIsChangeLevel=function(e){this.upLevel==Ladder.ins().level&&this.upId==Ladder.ins().nowId},t.prototype.onTap=function(e){switch(e.currentTarget){case this.closeBtn:ViewManager.ins().close(this)}},t.prototype.updateCloseBtnLabel=function(){this.s--,this.s<=0&&ViewManager.ins().close(this),this.closeBtn.label=this.closeBtn.name+"("+this.s+"s)"},t}(BaseEuiPanel);__reflect(LadderResultWin.prototype,"LadderResultWin"),ViewManager.ins().reg(LadderResultWin,LayerManager.UI_Popup),window.LadderResultWin=LadderResultWin;var LadderWin=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.commonWindowBg.AddChildStack(new EncounterInfoWin),this.commonWindowBg.AddChildStack(new DartCarPanel),this.commonWindowBg.AddChildStack(new MineWinInfo),this.chaosBattlePanel=new ChaosBattlePanel,this.commonWindowBg.AddChildStack(this.chaosBattlePanel),this.commonWindowBg.AddChildStack(new LadderInfoPanel),this.commonWindowBg.AddChildStack(new AcrossLadderPanel),this.commonWindowBg.AddChildStack(new TenKillPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ChaosBattleSproto.ins().sendInfo(),ChaosBattleSproto.ins().sendRank(),this.commonWindowBg.OnAdded(this,e&&e[0]),this.observe(MessageDef.FUBEN_CHANGE,this.mapChange),this.observe(MessageDef.ENCOUNTER_ITEM_INFO_UPDATE,this.refushRed),this.observe(MessageDef.ENCOUNTER_DATA_CHANGE,this.refushRed),this.observe(MessageDef.MINE_STATU_CHANGE,this.refushRed),this.observe(MessageDef.DARTCAR_STATU_CHANGE,this.refushRed),this.observe(MessageDef.ACROSSLADDER_HISTORY_RANK,this.refushRed),this.observe(MessageDef.TENKILL_PANEL_UPDATE,this.refushRed),this.refushRed()},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),MessageCenter.ins().removeAll(this),this.chaosBattlePanel.release()},t.prototype.mapChange=function(){GameMap.IsNoramlLevel()||ViewManager.ins().close(t)},t.prototype.refushRed=function(){this.commonWindowBg.CheckTabRedPoint()},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return 0==e?Deblocking.Check(DeblockingType.TYPE_07):4==e?Deblocking.Check(DeblockingType.TYPE_02):1==e?Deblocking.Check(DeblockingType.TYPE_27):2==e?Deblocking.Check(DeblockingType.TYPE_08):5==e?Deblocking.Check(DeblockingType.TYPE_26):6==e?Deblocking.Check(DeblockingType.TYPE_34):3==e?Deblocking.Check(DeblockingType.TYPE_91):!0},t.openCheck=function(e){var t=void 0==e[0]?0:e[0];return 0==t?Deblocking.Check(DeblockingType.TYPE_07):4==t?Deblocking.Check(DeblockingType.TYPE_02):1==t?Deblocking.Check(DeblockingType.TYPE_27):2==t?Deblocking.Check(DeblockingType.TYPE_08):5==t?Deblocking.Check(DeblockingType.TYPE_26):6==t?Deblocking.Check(DeblockingType.TYPE_34):3==t?Deblocking.Check(DeblockingType.TYPE_91):!0},t}(BaseEuiPanel);__reflect(LadderWin.prototype,"LadderWin",["ICommonWindow"]),ViewManager.ins().reg(LadderWin,LayerManager.UI_Main),window.LadderWin=LadderWin;var LastWeekRankItemRenderer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){if(this.index=this.itemIndex+1,this.rank.text=this.index+"",this.data instanceof RankDataLadder){var e=this.data;this.nameLabel.text=e.player,this.winNum.text=e.winNum+GlobalConfig.jifengTiaoyueLg.st100812,this.item1.data=Ladder.ins().creatRewardData(GlobalConfig.ins("TianTiRankAwardConfig")[this.index+""].award[0]),this.setlevelInfo(e.challgeLevel<4),this.levelIcon.SetRank2(e.challgeLevel,e.challgeId)}else if(this.data instanceof TianTiDanConfig){var t=this.data;this.winNum.text="",this.nameLabel.text=t.showLevel+GlobalConfig.jifengTiaoyueLg.st100816,this.item1.data=Ladder.ins().creatRewardData(t.danAward[0]),this.setlevelInfo(!0),this.setlevelInfo(!1),this.rank.text="",this.levelIcon.SetRank2(t.level,0)}else this.winNum.text="",this.nameLabel.text=GlobalConfig.jifengTiaoyueLg.st100817+this.index+GlobalConfig.jifengTiaoyueLg.st100818,this.item1.data=Ladder.ins().creatRewardData(GlobalConfig.ins("TianTiRankAwardConfig")[this.index+""].award[0]),this.levelIcon.SetRank2(4,0),this.setlevelInfo(!1)},t.prototype.setlevelInfo=function(e){},t}(eui.ItemRenderer);__reflect(LastWeekRankItemRenderer.prototype,"LastWeekRankItemRenderer"),window.LastWeekRankItemRenderer=LastWeekRankItemRenderer;var LegendModel=function(e){function t(){var t=e.call(this)||this;return t.m_LegendDressStage={},t.m_LegendDressTip={},t.m_SaleTime=0,t.m_SaleStage=1,t.regNetMsg(S2cProtocol.sc_legend_dress,t._DoLegendDress),t.regNetMsg(S2cProtocol.sc_shop_godequip_info,t._DoLegendSale),MessageCenter.addListener(GameLogic.ins().postSubRoleChange,t._InitRoleLegendState,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.GetSaleSurplusTime=function(){return this.m_SaleTime?Math.max(this.m_SaleTime-GameServer.serverTime,0):0},t.prototype.IsOpenSale=function(){return this.GetSaleSurplusTime()>1&&null!=this.GetSaleConfig()},t.prototype.GetSaleConfig=function(){return GlobalConfig.ins("LegendSuitSoldConfig")[this.GetSaleId()]},t.prototype.GetSaleId=function(){return this.m_SaleStage||1},t.prototype._DoLegendSale=function(e){this.m_SaleStage=e.id,this.m_SaleTime=e.endtime,GameGlobal.MessageCenter.dispatch(MessageDef.LEGEND_UPDATE_SALE)},t.prototype._InitRoleLegendState=function(){for(var e=0,i=SubRoles.ins().subRolesLen;i>e;++e){var o=t.GetFullStageByRoleIndex(e),s=(o[0],o[1]);this.m_LegendDressStage[e]=s}},t.prototype.UpdateRoleLegendState=function(){for(var e=0,i=SubRoles.ins().subRolesLen;i>e;++e){var o=t.GetFullStageByRoleIndex(e),s=(o[0],o[1]);this.m_LegendDressStage[e]!=s&&0!=s&&(this.m_LegendDressTip[e]=s),this.m_LegendDressStage[e]=s}},t.prototype.IsNewDress=function(e){return this.m_LegendDressTip[e]?!0:!1},t.prototype.GetShowDressIndex=function(e){return this.m_LegendDressTip[e]||1},t.prototype.SetNewDress=function(e){this.m_LegendDressTip[e]=!1},t.prototype.SendBuyLegendSale=function(){var e=new Sproto.cs_shop_godequip_buy_request;e.id=this.GetSaleId(),this.Rpc(C2sProtocol.cs_shop_godequip_buy,e)},t.prototype._DoLegendDress=function(e){var t=e.roleIndex,i=e.legendDress,o=SubRoles.ins().getSubRoleByIndex(t);if(o){var s=o.legendDress;o.legendDress=i,null==s&&null!=i&&UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101760);var n=EntityManager.ins().getEntityByHandle(GameGlobal.rolesModel[t].handle);n&&n.updateModel()}GameGlobal.MessageCenter.dispatch(MessageDef.LEGEND_UPDATE_DRESS)},t.prototype.SendDress=function(e,t){var i=SubRoles.ins().getSubRoleByIndex(e);if(i){if(i.legendDress==t)return;null!=t&&(i.zhuangbei[DressType.ROLE-1]>0&&DressModel.ins().sendUnDressUserReq(e,DressType.ROLE),i.zhuangbei[DressType.ARM-1]>0&&DressModel.ins().sendUnDressUserReq(e,DressType.ARM));var o=new Sproto.cs_legend_dress_request;o.roleIndex=e,o.legendDress=t,this.Rpc(C2sProtocol.cs_legend_dress,o)}},t.prototype.LegendFragmentRedPoint=function(){if(SubRoles.ins().subRolesLen<SubRoles.MAX_COUNT)return!1;for(var e=UserBag.ins().getBagEquipByLevelSort(5),t=0,i=e;t<i.length;t++)for(var o=i[t],s=o.itemConfig.quality,n=!0,r=0,a=SubRoles.ins().subRolesLen;a>r;++r){var l=SubRoles.ins().getSubRoleByIndex(r).getEquipByIndex(o.itemConfig.subType),h=l.goditem;(0==h.configID||h.itemConfig.quality<s)&&(n=!1)}},t.prototype.IsRedPoint=function(){return this.IsRedPointLegend()||this.IsRedItem()},t.prototype.IsRedPointLegend=function(){for(var e=0,t=SubRoles.ins().subRolesLen;t>e;++e)for(var i=SubRoles.ins().getSubRoleByIndex(e),o=0;o<EquipPos.MAX;++o)if(UserEquip.ins().setLegendEquipItemState(o,i))return!0;var s=UserBag.ins().getBagEquipByOrangeSplit(5);return s.length>0?!0:!1},t.prototype.IsRedItem=function(){var e=UserBag.ins().getBagGoodsCountById(UserBag.BAG_TYPE_OTHTER,ItemConst.TREASURE_HUNT);return e>0?!0:!1},t.prototype.IsRedPointByRole=function(e){var t=SubRoles.ins().getSubRoleByIndex(e);if(null==t)return!1;for(var i=0;i<EquipPos.MAX;++i)if(UserEquip.ins().setLegendEquipItemState(i,t))return!0;return!1},t.prototype.CanEquipTip=function(e){var t=GlobalConfig.itemConfig[e];if(null==t)return!1;for(var i=0;i<SubRoles.MAX_COUNT;++i){var o=SubRoles.ins().getSubRoleByIndex(i);if(null==o)return!0;var s=o.getEquipByIndex(t.subType);if(null==s.goditem.itemConfig||0==s.goditem.itemConfig)return!0}return!1},t.GetStage=function(e){return e%10+1},t.GetFullStageByRoleIndex=function(e){return this.GetFullStageByRole(SubRoles.ins().getSubRoleByIndex(e))},t.GetFullStageByRole=function(e){if(null==e)return[0,0];for(var t=999,i=0,o=!0,s=0;s<EquipPos.MAX;++s){var n=e.getEquipByIndex(s);if(n.goditem.configID>0){var r=GodSuitAttrPanel.GetStage(n.goditem.configID);r>i&&(i=r),t>r&&(t=r)}else o=!1}return(999==t||0==o)&&(t=0),[i,t]},t}(BaseSystem);__reflect(LegendModel.prototype,"LegendModel"),window.LegendModel=LegendModel;var LongHun=function(e){function t(){var t=e.call(this)||this;return t.bAutoBuyCailiao=!1,t.canChange=!0,t.sysId=PackageID.LoongSoul,t.regNetMsg(S2cProtocol.sc_longzhuang_boost_ret,t.DoDateUpdate),t.regNetMsg(S2cProtocol.sc_longzhuang_upgrade_ret,t.postStageUpgrade),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendUpGrade=function(e,t,i){void 0===i&&(i=!1);var o=new Sproto.cs_longzhuang_boost_request;o.roleId=e,o.id=t,o.canUseYuanbao=i,GameSocket.ins().Rpc(C2sProtocol.cs_longzhuang_boost,o)},t.prototype.DoDateUpdate=function(e){var t=e.roleId,i=e.id,o=(e.star,e.exp,e.crit,e.addExp,SubRoles.ins().getSubRoleByIndex(t).longzhuangdata[i-1]);o.star=e.star,o.exp=e.exp,GameGlobal.MessageCenter.dispatch(MessageDef.LOONGSOUL_LV_CHANGE,!0)},t.prototype.sendStageUpgrade=function(e,t){var i=new Sproto.cs_longzhuang_upgrade_request;i.roleId=e,i.id=t,GameSocket.ins().Rpc(C2sProtocol.cs_longzhuang_upgrade,i)},t.prototype.postStageUpgrade=function(e){var t=e.roleId,i=e.id,o=SubRoles.ins().getSubRoleByIndex(t).longzhuangdata[i-1];o.lv=e.lv,o.star=e.star,o.exp=e.exp,GameGlobal.MessageCenter.dispatch(MessageDef.LOONGSOUL_LV_CHANGE,!0)},Object.defineProperty(t.prototype,"isAutoBuy",{get:function(){return this.bAutoBuyCailiao},set:function(e){this.bAutoBuyCailiao!=e&&(this.bAutoBuyCailiao=e)},enumerable:!0,configurable:!0}),t.prototype.dealyOver=function(){},t.prototype.overDealy=function(){},t.prototype.assert=function(e,t){return Assert(e,"["+egret.getQualifiedClassName(this)+"] "+t)},t.prototype.CheckRedPoint=function(){for(var e=0;e<SubRoles.ins().subRolesLen;++e)if(this.CheckRedPointByRole(e))return!0;return!1},t.prototype.CheckRedPointByRole=function(e){for(var t=1;4>=t;++t)if(this.CheckRedPointByRoleEquip(e,t))return!0;return!1},t.prototype.CheckRedPointByEquip=function(e){for(var t=0;t<SubRoles.ins().subRolesLen;++t)if(this.CheckRedPointByRoleEquip(t,e))return!0},t.prototype.CheckRedPointByRoleEquip=function(e,t){var i=GameGlobal.rolesModel[e].longzhuangdata[t-1];if(null==this.longzhuangCommonConfig&&(this.longzhuangCommonConfig=GlobalConfig.ins("LongzhuangCommonConfig")),this.longzhuangCommonConfig.starMax<=i.star)return!1;null==this.longzhuangStarConfig&&(this.longzhuangStarConfig=GlobalConfig.ins("LongzhuangStarConfig"));var i=GameGlobal.rolesModel[e].longzhuangdata[t-1],o=(this.longzhuangStarConfig[t][i.star],GlobalConfig.longzhuangLevelConfig[t][i.lv]),s=UserBag.ins().getBagGoodsCountById(0,o.itemId),n=i.star%this.longzhuangCommonConfig.starPerLevel;return i.star>=(i.lv+1)*this.longzhuangCommonConfig.starPerLevel&&0==n?!0:s<o.itemNum?!1:!0},t.prototype.sendLongOneKey=function(e){var t=new Sproto.cs_longzhuang_onekey_request;t.roleId=e,this.Rpc(C2sProtocol.cs_longzhuang_onekey,t)},t.TYPE_LONG_HUN=2,t.TYPE_HU_DUN=3,t.TYPE_XUE_YU=4,t}(BaseSystem);__reflect(LongHun.prototype,"LongHun"),MessageCenter.compile(LongHun),window.LongHun=LongHun;var LongZhuangAttr=function(e){function t(){var t=e.call(this)||this;return t.skinName="LongzhuangAttrSkin",t}return __extends(t,e),t.prototype.setCurrAttr=function(e){this.curAttrLabel.text=e},t.prototype.setNextAttr=function(e){return null==e||""==e?(this.nextAttrLabel.visible=!1,this.m_ArrImg.visible=!1,void(this.curAttrLabel.horizontalCenter=30)):(this.nextAttrLabel.visible=!0,this.m_ArrImg.visible=!0,this.curAttrLabel.horizontalCenter=-117,void(this.nextAttrLabel.text=e))},t}(eui.Component);__reflect(LongZhuangAttr.prototype,"LongZhuangAttr"),window.LongZhuangAttr=LongZhuangAttr;var LoongSoulWin=function(e){function t(){var t=e.call(this)||this;return t.clearSelect=!0,t._lastJi=0,t._isAutoUp=!1,t.itemID=[200011,200012,200013,200014],t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100237,t.skinName="ShenluSkin",t}return __extends(t,e),Object.defineProperty(t.prototype,"index",{get:function(){return this.commonWindowBg.GetSelectedIndex()},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){e.prototype.initUI.call(this);var t=[GlobalConfig.jifengTiaoyueLg.st100238,GlobalConfig.jifengTiaoyueLg.st100239,GlobalConfig.jifengTiaoyueLg.st100240,GlobalConfig.jifengTiaoyueLg.st100241];this.commonWindowBg.SetTabDatas(new eui.ArrayCollection(t)),this.btnAutoUp.label=GlobalConfig.jifengTiaoyueLg.st100245,this.m_FullLab.text=GlobalConfig.jifengTiaoyueLg.st100020},t.prototype.createMc=function(e,t,i){var o=new MovieClip;return o.loadUrl(ResDataPath.GetUIEffePath(e),!0,-1),o.x=t,o.y=i,"eff_dragon_magic"==e?this.addChildAt(o,13):this.addChild(o),o},t.prototype.addMc=function(e,t){var i;e.numChildren>0?i=e.getChildAt(0):(i=new MovieClip,i.x=40,i.y=19,i.scaleX=1.3,i.scaleY=1.3,e.addChild(i)),0==t?i.clearCache():i.loadUrl(ResDataPath.GetUIEffePath(this.colourEffect(t)),!0)},t.prototype.colourEffect=function(e){return"1"==e?"eff_dragon_greenball":"2"==e?"eff_dragon_blueball":"3"==e?"eff_dragon_purpleball":void 0},t.prototype.panelEffect=function(e){switch(this.longW&&(this.longW.stop(),this.longW.visible=!1),this.longW1&&(this.longW1.stop(),this.longW1.visible=!1),this.mcBar&&(this.mcBar.stop(),this.mcBar.visible=!1),this.longMc&&(this.longMc.stop(),this.longMc.visible=!1),e){case 0:this.mcBar?(this.mcBar.play(),this.mcBar.visible=!0):this.mcBar=this.createMc("eff_dragon_ball",172,310);break;case 1:this.longMc?(this.longMc.play(),this.longMc.visible=!0):this.longMc=this.createMc("eff_dragon_body",180,245);break;case 2:this.longW?(this.longW.play(),this.longW.visible=!0):this.longW=this.createMc("eff_dragon_hand",215,260);break;case 3:this.longW1?(this.longW1.play(),this.longW1.visible=!0):this.longW1=this.createMc("eff_dragon_magic",200,360)}},t.prototype.clearMc=function(e){var t;e.numChildren>0&&(t=e.getChildAt(0),DisplayUtils.dispose(t),t=null)},t.prototype.removeMc=function(){this.longW&&(DisplayUtils.dispose(this.longW),this.longW=null),this.mcBar&&(DisplayUtils.dispose(this.mcBar),this.mcBar=null),this.longW1&&(DisplayUtils.dispose(this.longW1),this.longW1=null),this.longMc&&(DisplayUtils.dispose(this.longMc),this.longMc=null),this.clearMc(this.effect_one),this.clearMc(this.effect_two),this.clearMc(this.effect_three),this.clearMc(this.effect_four)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.upgradeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btnAutoUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.getShenzhuangLink.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.addListener(MessageDef.LOONGSOUL_LV_CHANGE,this.updateData,this),GameGlobal.MessageCenter.addListener(MessageDef.ADD_ITEM,this.updateData,this),GameGlobal.MessageCenter.addListener(MessageDef.CHANGE_ITEM,this.updateData,this);for(var i=0,o=1;4>=o;++o)if(LongHun.ins().CheckRedPointByEquip(o)){i=o-1;break}this.commonWindowBg.OnAdded(this,e[0]?e[0]:i),this.longLine0.visible=0==i?!0:!1,this.longLine1.visible=1==i?!0:!1,this.longLine2.visible=2==i?!0:!1,this.longLine3.visible=3==i?!0:!1;for(var o=0;o<this.itemID.length;o++)this.commonWindowBg.initItemImage(o,this.itemID[o])},t.prototype.close=function(){this.upgradeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btnAutoUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.removeListener(MessageDef.LOONGSOUL_LV_CHANGE,this.updateData,this),GameGlobal.MessageCenter.removeListener(MessageDef.ADD_ITEM,this.updateData,this),GameGlobal.MessageCenter.removeListener(MessageDef.CHANGE_ITEM,this.updateData,this),this.removeMc(),this.removeObserve()},t.prototype.onTap=function(e){switch(e.currentTarget){case this.upgradeBtn:GlobalConfig.jifengTiaoyueLg.st100208==this.upgradeBtn.label?this.sendUpgrade():GlobalConfig.jifengTiaoyueLg.st100242==this.upgradeBtn.label&&this.sendStageUpgrade();break;case this.btnAutoUp:if(!Deblocking.Check(DeblockingType.TYPE_88))return;var t=this.m_RoleSelectPanel.getCurRole(),i=GameGlobal.rolesModel[t].longzhuangdata[0],o=GlobalConfig.longzhuangLevelConfig[1][i.lv],s=UserBag.ins().getBagGoodsCountById(0,o.itemId),n=GameGlobal.rolesModel[t].longzhuangdata[1],r=GlobalConfig.longzhuangLevelConfig[2][n.lv],a=UserBag.ins().getBagGoodsCountById(0,r.itemId),l=GameGlobal.rolesModel[t].longzhuangdata[2],h=GlobalConfig.longzhuangLevelConfig[3][l.lv],c=UserBag.ins().getBagGoodsCountById(0,h.itemId),u=GameGlobal.rolesModel[t].longzhuangdata[3],d=GlobalConfig.longzhuangLevelConfig[4][u.lv],p=UserBag.ins().getBagGoodsCountById(0,d.itemId);if(s<o.itemNum&&a<r.itemNum&&c<h.itemNum&&p<d.itemNum)return void this.openBuyGoods();WarnWin.show(GlobalConfig.jifengTiaoyueLg.st100243,function(){LongHun.ins().sendLongOneKey(t)},this);break;case this.getShenzhuangLink:this.openBuyGoods()}},t.prototype.onTaps=function(e){if(null!=this._config){var t=GlobalConfig.ins("VipConfig")[this.index>2?13:14].attrAddition.percent,i=[];this._config.attr.forEach(function(e){i.push(e.value*t/100>>0)}),ViewManager.ins().open(ForgeTipsWin,i,AttributeData.getAttStr(this._config.attr,1,1,""))}},t.prototype.updateEffect=function(){for(var e=0;4>e;e++){var t=GameGlobal.rolesModel[this.m_RoleSelectPanel.getCurRole()].longzhuangdata[e],i=GlobalConfig.longzhuangLevelConfig[e+1][t.lv];0==e&&(i.quality>0?this.addMc(this.effect_one,i.quality):this.effect_one.removeChildren()),1==e&&(i.quality>0?this.addMc(this.effect_two,i.quality):this.effect_two.removeChildren()),2==e&&(i.quality>0?this.addMc(this.effect_three,i.quality):this.effect_three.removeChildren()),3==e&&(i.quality>0?this.addMc(this.effect_four,i.quality):this.effect_four.removeChildren()),this.commonWindowBg.loadIconBG(e,i.quality)}},t.prototype.updateData=function(e){void 0===e&&(e=!1),null==this.longzhuangCommonConfig&&(this.longzhuangCommonConfig=GlobalConfig.ins("LongzhuangCommonConfig")),null==this.longzhuangStarConfig&&(this.longzhuangStarConfig=GlobalConfig.ins("LongzhuangStarConfig"));for(var t=1;4>=t;++t)this.commonWindowBg.ShowTalRedPoint(t-1,LongHun.ins().CheckRedPointByEquip(t));for(var t=0;t<SubRoles.ins().subRolesLen;++t)this.m_RoleSelectPanel.showRedPoint(t,LongHun.ins().CheckRedPointByRoleEquip(t,this.index+1));var i=GameGlobal.rolesModel[this.m_RoleSelectPanel.getCurRole()].longzhuangdata[this.index];this._config=this.longzhuangStarConfig[this.index+1][i.star],this._lvConfig=GlobalConfig.longzhuangLevelConfig[this.index+1][i.lv],this.consumeLabel.consumeType=GlobalConfig.itemConfig[this._lvConfig.itemId].name;var o=AttributeData.AttrAddition(this._config.attr,this._lvConfig.attr);this.longzhuangAttr.setCurrAttr(AttributeData.getAttStr(o,0,1,"：")),this.powerLabel.text=UserBag.getAttrPower(o);var s=UserBag.ins().getBagGoodsCountById(0,this._lvConfig.itemId);this.consumeLabel.curValue=s,this.consumeLabel.consumeValue=this._lvConfig.itemNum;var n=void 0,r=void 0,a=!1,l=i.star%this.longzhuangCommonConfig.starPerLevel;i.star>=(i.lv+1)*this.longzhuangCommonConfig.starPerLevel&&0==l?(n=GlobalConfig.longzhuangLevelConfig[this.index+1][i.lv+1],r=this._config,this.upgradeBtn.label=GlobalConfig.jifengTiaoyueLg.st100242,this.longzhuangAttr.nameTxt.text=this._lvConfig.name+"9"+GlobalConfig.jifengTiaoyueLg.st100093,this.upgradeBtn.x=175,this.expBar.visible=!1,a=!0,this.consumeLabel.visible=!1):(n=this._lvConfig,r=this.longzhuangStarConfig[this.index+1][i.star+1],this.upgradeBtn.label=GlobalConfig.jifengTiaoyueLg.st100208,this.upgradeBtn.x=271,this.longzhuangAttr.nameTxt.text=this._lvConfig.name+this._config.star%9+GlobalConfig.jifengTiaoyueLg.st100093,this.expBar.maximum=this._config.exp,this.expBar.value=i.exp,this.expBar.visible=!0,this.consumeLabel.visible=!0),r?this.longzhuangAttr.setNextAttr(AttributeData.getAttStr(AttributeData.AttrAddition(n.attr,r.attr),0,1,"：")):this.longzhuangAttr.setNextAttr(null),this.longzhuangCommonConfig.starMax==i.star&&i.star<(i.lv+1)*this.longzhuangCommonConfig.starPerLevel?(this.setCountTxt(!1),this.btnAutoUp.visible=!1,this.upgradeBtn.label==GlobalConfig.jifengTiaoyueLg.st100208&&(this.upgradeBtn.visible=!1)):(this.setCountTxt(!0),this.upgradeBtn.visible=!0),this.btnAutoUp.visible=this.canShow()&&this.upgradeBtn.visible&&!a,this.updateLevel()},t.prototype.setCountTxt=function(e){e?(this.m_FullLab.visible=!1,this.consumeLabel.visible=!0):(this.m_FullLab.visible=!0,this.consumeLabel.visible=!1)},t.prototype.canShow=function(){null==this.longzhuangCommonConfig&&(this.longzhuangCommonConfig=GlobalConfig.ins("LongzhuangCommonConfig"));var e=this.longzhuangCommonConfig.autoLv;return GameGlobal.actorModel.level>=e[0]||GameGlobal.actorModel.vipLv>=e[1]},t.prototype.canShowAutoBuy=function(){return!0},t.prototype.updateLevel=function(){this.upgradeBtn.x=this.btnAutoUp.visible?271:175},t.prototype.sendUpgrade=function(){var e=UserBag.ins().getBagGoodsCountById(0,this._lvConfig.itemId);return e<this._lvConfig.itemNum?void this.openBuyGoods():(null==this.longzhuangCommonConfig&&(this.longzhuangCommonConfig=GlobalConfig.ins("LongzhuangCommonConfig")),void(GameGlobal.actorModel.level>=this.longzhuangCommonConfig.openLevel?LongHun.ins().sendUpGrade(this.m_RoleSelectPanel.getCurRole(),this.index+1,!1):UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100244,[this.longzhuangCommonConfig.openLevel]))))},t.prototype.sendStageUpgrade=function(){LongHun.ins().sendStageUpgrade(this.m_RoleSelectPanel.getCurRole(),this.index+1)},t.prototype.openBuyGoods=function(){UserWarn.ins().setBuyGoodsWarn(this._lvConfig.itemId,this._missingNum)},t.prototype.setRedPoint=function(){for(var e=SubRoles.ins().rolesModel,t=0;t<e.length;t++)this.m_RoleSelectPanel.showRedPoint(t,GameGlobal.roleHintCheck(e[t],this.index))},t.prototype.OnBackClick=function(e){return 0
},t.prototype.OnOpenIndex=function(e){return this.longLine0.visible=0==e?!0:!1,this.longLine1.visible=1==e?!0:!1,this.longLine2.visible=2==e?!0:!1,this.longLine3.visible=3==e?!0:!1,!0},t.prototype.UpdateContent=function(){this.updateData()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(LoongSoulWin.prototype,"LoongSoulWin",["ICommonWindow","ICommonWindowTitle","ICommonWindowRoleSelect"]),window.LoongSoulWin=LoongSoulWin;var LuckGiftBagModel=function(){function e(){this.luckGiftData=new Dictionary,this.isModelOpen=!1}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.setLuckGiftData=function(e){this.luckGiftData.clear();for(var t=0;t<e.length;t++)this.luckGiftData.set(e[t].id,e[t])},e.prototype.cleckAllRedPoint=function(){for(var e=this.luckGiftData.values,t=!1,i=0;i<e.length;i++)if(t=this.cleckRedPoint(e[i].id),1==t)return t;return t},e.prototype.cleckRedPoint=function(e){var t=this.luckGiftData.get(e);if(t){var i=GlobalConfig.ins("ActivityGiftConfig")[t.id];if(i&&t){var o=i.limitTimes-t.num;if(0>=o)return!1}return!0}return!1},e}();__reflect(LuckGiftBagModel.prototype,"LuckGiftBagModel"),window.LuckGiftBagModel=LuckGiftBagModel;var LuckGiftBagPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101761,t.skinName="LuckGiftPanelSkin",t.m_List.itemRenderer=ItemBase,t.m_ListData=new eui.ArrayCollection,t.m_List.dataProvider=t.m_ListData,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101762,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100025,t.m_BuyBtn.label=GlobalConfig.jifengTiaoyueLg.st100069,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.addViewEvent=function(){this.m_BuyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuy,this),MessageCenter.ins().addListener(MessageDef.LUCKGIFTBAG_DATA_UPDATE,this.initData,this)},t.prototype.removeEvent=function(){this.m_BuyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuy,this),MessageCenter.ins().removeListener(MessageDef.LUCKGIFTBAG_DATA_UPDATE,this.initData,this)},t.prototype.open=function(){LuckGiftBagModel.getInstance.isModelOpen=!0,this.initData(),this.addTiemr(),this.addViewEvent()},t.prototype.close=function(){LuckGiftBagModel.getInstance.isModelOpen=!1,this.removeEvent(),this.removeTiemr()},t.prototype.release=function(){this.m_Scroller.stopAnimation(),this.removeTiemr(),this.removeEvent()},t.prototype.addTiemr=function(){this.removeTiemr(),TimerManager.ins().doTimer(1e3,0,this.setTiem,this),this.setTiem()},t.prototype.removeTiemr=function(){TimerManager.ins().remove(this.setTiem,this)},t.prototype.initData=function(){this.m_luckData=LuckGiftBagModel.getInstance.luckGiftData.get(this.configDataId);var e=GlobalConfig.ins("ActivityGiftConfig")[this.configDataId];if(e&&this.m_luckData){this.m_ListData.removeAll(),this.m_ListData.replaceAll(e.showReward),this.m_GiftBagNameLab.text=e.itemtName,this.m_PriceLab.text=e.price+"";var t=e.limitTimes-this.m_luckData.num;this.m_LastBuyNumLab.text=t+"/"+e.limitTimes,0>=t&&(this.m_BuyBtn.enabled=!1,this.m_BuyBtn.label=GlobalConfig.jifengTiaoyueLg.st101342)}},t.prototype.setTiem=function(){if(this.m_luckData){var e=GameServer.GetSurplusTime(this.m_luckData.time,DateUtils.TIME_FORMAT_1);this.m_TimeLab.text=e}},t.prototype.onClickBuy=function(){var e=this.m_luckData.time,t=Math.max(0,(e||0)-GameServer.serverTime);if(0>=t)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101763);var i=this.configDataId,o=GlobalConfig.ins("ActivityGiftConfig")[i];o&&WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101764,[o.price,o.itemtName]),function(){var t=GameLogic.ins().actorModel.yb,s=Math.max(0,(e||0)-GameServer.serverTime);return 0>=s?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101763):void(o&&(t>=o.price?ActivityModel.ins().luckypackagebuy(i):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008)))},this)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(LuckGiftBagPanel.prototype,"LuckGiftBagPanel",["ICommonWindowTitle"]),window.LuckGiftBagPanel=LuckGiftBagPanel;var LuckGiftBagWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101761,t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.initPanelData(e),this.addWinEvent(),this.updateRedPoint()},t.prototype.close=function(){this.removeObserve(),this.removeWinEvetn(),this.commonWindowBg.OnRemoved(),this.removePanel()},t.prototype.addWinEvent=function(){GameGlobal.MessageCenter.addListener(MessageDef.LUCKGIFTBAG_DATA_UPDATE,this.updateRedPoint,this)},t.prototype.removeWinEvetn=function(){GameGlobal.MessageCenter.removeListener(MessageDef.LUCKGIFTBAG_DATA_UPDATE,this.updateRedPoint,this)},t.prototype.updateRedPoint=function(){for(var e=this.commonWindowBg.comViewStack.numChildren,t=0;e>t;t++){var i=this.commonWindowBg.comViewStack.getChildAt(t);i&&i instanceof LuckGiftBagPanel&&this.commonWindowBg.ShowTalRedPoint(t,LuckGiftBagModel.getInstance.cleckRedPoint(i.configDataId))}},t.prototype.initPanelData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=LuckGiftBagModel.getInstance.luckGiftData.values,o=GlobalConfig.ins("ActivityGiftConfig"),s=0;s<i.length;s++){var n=Math.max(0,(i[s].time||0)-GameServer.serverTime);if(0>=n)LuckGiftBagModel.getInstance.luckGiftData.remove(i[s].id);else{var r=new LuckGiftBagPanel,a=i[s].id,l=o[a];r.name=l.tabName,r.configDataId=a,this.commonWindowBg.AddChildStack(r)}}this.commonWindowBg.OnAdded(this,e.length?e[0]:0)},t.prototype.removePanel=function(){for(var e=this.commonWindowBg.comViewStack.numChildren,t=0;e>t;t++){var i=this.commonWindowBg.comViewStack.removeChildAt(0);i instanceof LuckGiftBagPanel&&i.release()}},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(LuckGiftBagWin.prototype,"LuckGiftBagWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(LuckGiftBagWin,LayerManager.UI_Main),window.LuckGiftBagWin=LuckGiftBagWin;var LuckGiftTips=function(e){function t(){var t=e.call(this)||this;return t.skinName="LuckGiftTipsSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_ConfigId=e[0],this.addViewEvent(),this.setData(),this.addTick()},t.prototype.close=function(){this.removeTick(),this.removeViewEvent()},t.prototype.setData=function(){var e=GlobalConfig.ins("ActivityGiftConfig");if(e){var t=e[this.m_ConfigId];t&&(this.m_TipsLab.text=t.tips)}},t.prototype.addViewEvent=function(){this.m_Rect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},t.prototype.removeViewEvent=function(){this.m_Rect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},t.prototype.addTick=function(){this.removeTick(),TimerManager.ins().doTimer(5e3,1,this.onClose,this)},t.prototype.removeTick=function(){TimerManager.ins().remove(this.onClose,this)},t.prototype.onClose=function(){ViewManager.ins().close(t)},t}(BaseEuiPanel);__reflect(LuckGiftTips.prototype,"LuckGiftTips"),ViewManager.ins().reg(LuckGiftTips,LayerManager.UI_Popup),window.LuckGiftTips=LuckGiftTips;var MailData=function(){function e(){this.handle=0,this.title="",this.times=0,this.type=0,this.receive=0,this.mailtype=0,this.item=[],this.text=""}return e.prototype.parser=function(e){this.disposeData(e.mailData),this.item=[],this.text=e.text;for(var t=e.rewardData.length,i=0;t>i;i++){var o=new RewardData;o.parser(e.rewardData[i]),this.item.push(o)}},e.prototype.disposeData=function(e){this.handle=e.handle,this.title=e.title,this.times=e.times,this.type=e.type,this.receive=e.receive,this.mailtype=e.mailtype},e}();__reflect(MailData.prototype,"MailData"),window.MailData=MailData;var MailModel=function(e){function t(){var t=e.call(this)||this;return t.mailData=[],t.currentPage=0,t.maxPage=0,t.currentMailHandle=0,t.regNetMsg(S2cProtocol.sc_mail_init_info,t.doMailData),t.regNetMsg(S2cProtocol.sc_mail_detailed_info,t.doMailDetailedData),t.regNetMsg(S2cProtocol.sc_mail_delete,t.doDeleteMail),t.regNetMsg(S2cProtocol.sc_mail_update_info,t.doGetItemMail),t.regNetMsg(S2cProtocol.sc_mail_add_info,t.doAddMail),t.regNetMsg(S2cProtocol.sc_mail_red_point,t.doMailRedPoint),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendMailContentData=function(e){var t=new Sproto.cs_mail_get_content_request;t.handle=e,this.Rpc(C2sProtocol.cs_mail_get_content,t)},t.prototype.sendGetItem=function(e){if(e&&0!=e.length){var t=new Sproto.cs_mail_get_reward_request;t.handle=e,this.Rpc(C2sProtocol.cs_mail_get_reward,t)}},t.prototype.sendMailInitData=function(e){var t=new Sproto.cs_mail_init_request;t.pageIndex=e,this.Rpc(C2sProtocol.cs_mail_init,t)},t.prototype.sendDelMail=function(e){var t=new Sproto.cs_mail_delet_request;t.handle=e,this.Rpc(C2sProtocol.cs_mail_delet,t)},t.prototype.doMailData=function(e){this.mailData=[],this.currentPage=e.curPage,this.maxPage=e.maxPage;for(var t=e.mailData.length,i=0;t>i;i++){var o=new MailData;o.disposeData(e.mailData[i]),this.mailData.push(o)}this.mailSort(1),GameGlobal.MessageCenter.dispatch(MessageDef.MAIL_DATA_CHANGE),GameGlobal.MessageCenter.dispatch(MessageDef.MAIL_SYSTEM_MAIL)},t.prototype.doMailRedPoint=function(e){this.isHaveRedPoint=e.isHaveRedPoint,GameGlobal.MessageCenter.dispatch(MessageDef.MAIL_RED_POINT)},t.prototype.doAddMail=function(e){this.mailData||(this.mailData=[]);var t=new MailData;t.disposeData(e.mailData),this.mailData.unshift(t),GameGlobal.MessageCenter.dispatch(MessageDef.MAIL_DATA_CHANGE)},t.prototype.doMailDetailedData=function(e){var t=new MailData;t.parser(e);for(var i=!1,o=0;o<this.mailData.length;o++)if(this.mailData[o].handle==t.handle){this.mailData[o]=t,i=!0;break}i&&(this.currentMailHandle=t.handle,ViewManager.ins().open(MailDetailedWin),GameGlobal.MessageCenter.dispatch(MessageDef.OPEN_MAIL,t),GameGlobal.MessageCenter.dispatch(MessageDef.MAIL_DATA_CHANGE))},t.prototype.getMailDataByHandle=function(e){for(var t=0;t<this.mailData.length;t++)if(this.mailData[t].handle==e)return this.mailData[t];return null},t.prototype.doDeleteMail=function(e){if(this.mailData){for(var i=this.mailData.length,o=0;o<this.mailData.length;o++)for(var s=0;s<e.handle.length;s++)this.mailData[o].handle==e.handle[s]&&this.mailData.splice(o,1);if(i>1)if(t.ins().maxPage>t.ins().currentPage)t.ins().sendMailInitData(t.ins().currentPage);else{var n=t.ins().currentPage;1>n-1&&(n=1),t.ins().sendMailInitData(n)}GameGlobal.MessageCenter.dispatch(MessageDef.MAIL_DATA_CHANGE)}},t.prototype.getMailByReceive=function(e){void 0===e&&(e=0);var t=[];if(this.mailData.length>0)for(var i=this.mailData.length-1;i>=0;i--)this.mailData[i].receive==e&&t.push(this.mailData[i]);return t},t.prototype.getUnreadMail=function(){var e=0;if(this.mailData.length>0)for(var t=this.mailData.length-1;t>=0;t--)(0==this.mailData[t].type||0==this.mailData[t].receive)&&(e+=1);return e},t.prototype.getCurrentMail=function(){return this.getMailDataByHandle(this.currentMailHandle)},t.prototype.doGetItemMail=function(e){for(var t=e.updateData.length,i=0;t>i;i++)for(var o=e.updateData[i],s=o.handle,n=0;n<this.mailData.length;n++)if(this.mailData[n].handle==s){this.mailData[n].type=o.type,this.mailData[n].receive=o.receive,GameGlobal.MessageCenter.dispatch(MessageDef.OPEN_MAIL,this.mailData[n]);break}e.showWarnBagSpace&&UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101766),GameGlobal.MessageCenter.dispatch(MessageDef.MAIL_GET_ITEM),GameGlobal.MessageCenter.dispatch(MessageDef.MAIL_DATA_CHANGE)},t.prototype.sort1=function(e,t){var i=e.times,o=t.times;return i>o?-1:o>i?1:0},t.prototype.sort2=function(e,t){var i=e.times,o=t.times;return o>i?-1:i>o?1:0},t.prototype.mailSort=function(e){var t=this.mailData;return e?t.sort(this.sort1):t.sort(this.sort2),t},t}(BaseSystem);__reflect(MailModel.prototype,"MailModel"),window.MailModel=MailModel;var MailDetailedWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MailContentSkin",this.itemList.itemRenderer=ItemBase,this.receiveBtn.label=GlobalConfig.jifengTiaoyueLg.st101232,this.m_DelBtn.label=GlobalConfig.jifengTiaoyueLg.st101233,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101234,this.desc.text=GlobalConfig.jifengTiaoyueLg.st101235},t.prototype.open=function(){this.m_bg.init("MailDetailedWin",GlobalConfig.jifengTiaoyueLg.st101236);for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.receiveBtn,this.onTap),this.AddClick(this.m_DelBtn,this.onTap),GameGlobal.MessageCenter.addListener(MessageDef.MAIL_GET_ITEM,this.setMailData,this),this.setMailData()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.MessageCenter.removeListener(MessageDef.MAIL_GET_ITEM,this.setMailData,this),GameGlobal.MessageCenter.dispatch(MessageDef.MAIL_SYSTEM_MAIL)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.receiveBtn:var t=[];t.push(MailModel.ins().currentMailHandle),MailModel.ins().sendGetItem(t),MailModel.ins().sendGetItem(t);break;case this.m_DelBtn:var t=[];t.push(MailModel.ins().currentMailHandle),MailModel.ins().sendDelMail(t),ViewManager.ins().close(this)}},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.otherClose=function(e){var i=this.background;e.localX>=i.x&&e.localX<=i.x+i.width&&e.localY>=i.y&&e.localY<=i.y+i.height||ViewManager.ins().close(t)},t.prototype.setMailData=function(){var e=MailModel.ins().getCurrentMail();this.textLabel.textFlow=TextFlowMaker.generateTextFlow(e.text),this.setReceiveBtn(e.receive,e.item.length>0),this.itemList.dataProvider=new eui.ArrayCollection(e.item)},t.prototype.setReceiveBtn=function(e,t){void 0===t&&(t=!1);var i="";this.receiveBtn.visible=e>=0,i=e?GlobalConfig.jifengTiaoyueLg.st100981:GlobalConfig.jifengTiaoyueLg.st101232,this.receiveBtn.label=i,this.receiveBtn.enabled=!Boolean(e),this.receiveBtn.visible=t,this.desc.visible=!t,this.receiveBtn.visible?this.receiveBtn.label==GlobalConfig.jifengTiaoyueLg.st101232?this.m_DelBtn.visible=!1:this.receiveBtn.label==GlobalConfig.jifengTiaoyueLg.st100981&&(this.receiveBtn.visible=!1,this.m_DelBtn.visible=!0):this.m_DelBtn.visible=!0},t}(BaseEuiPanel);__reflect(MailDetailedWin.prototype,"MailDetailedWin"),ViewManager.ins().reg(MailDetailedWin,LayerManager.UI_Popup),window.MailDetailedWin=MailDetailedWin;var MailItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="MailItemSkin",t.tipLabel=null,t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;null!=this.nameLabel&&(e instanceof MailData&&(this.nameLabel.text=""+e.title,this.dateLabel.text=DateUtils.getFormatBySecond(e.times,2),this.treasure.source=0==e.receive?"propIcon_151_png":""),this.tipLabel||(this.tipLabel=new eui.Label,this.tipLabel.fontFamily="Microsoft YaHei",this.tipLabel.x=this.nameLabel.x+this.nameLabel.width,this.tipLabel.y=this.nameLabel.y,this.tipLabel.size=this.nameLabel.size,this.addChild(this.tipLabel)),this.tipLabel.text=e.type?"(已读)":"(未读)",this.tipLabel.textColor=e.type?5987163:52275)},t}(eui.ItemRenderer);__reflect(MailItem.prototype,"MailItem"),window.MailItem=MailItem;var MailWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MailSkin",this._mails=[],this.mailList.itemRenderer=MailItem,this.mailScroller.viewport=this.mailList,this.noMailTip.text=GlobalConfig.jifengTiaoyueLg.st101228,this.leftPageBtn.label=GlobalConfig.jifengTiaoyueLg.st101229,this.rightPageBtn.label=GlobalConfig.jifengTiaoyueLg.st101230,this.allReceiveBtn.label=GlobalConfig.jifengTiaoyueLg.st100982,this.m_AllDeleBtn.label=GlobalConfig.jifengTiaoyueLg.st101231},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.AddClick(this.allReceiveBtn,this.onTap),this.AddClick(this.leftPageBtn,this.onTap),this.AddClick(this.rightPageBtn,this.onTap),this.AddClick(this.mailList,this.onSendMail),this.AddClick(this.m_AllDeleBtn,this.onTap),GameGlobal.MessageCenter.addListener(MessageDef.MAIL_DATA_CHANGE,this.setMailData,this),GameGlobal.MessageCenter.addListener(MessageDef.OPEN_MAIL,this.setOpenMail,this),GameGlobal.MessageCenter.addListener(MessageDef.MAIL_SYSTEM_MAIL,this.mailSystemHandle,this),MailModel.ins().isHaveRedPoint=!1,MailModel.ins().sendMailInitData(MailModel.ins().currentPage)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnRemoved(),GameGlobal.MessageCenter.removeListener(MessageDef.MAIL_DATA_CHANGE,this.setMailData,this),GameGlobal.MessageCenter.removeListener(MessageDef.OPEN_MAIL,this.setOpenMail,this),GameGlobal.MessageCenter.removeListener(MessageDef.MAIL_SYSTEM_MAIL,this.mailSystemHandle,this),this.removeObserve(),this.mailScroller.stopAnimation()},t.prototype.onTap=function(e){switch(e.currentTarget){case this.allReceiveBtn:for(var t=[],i=MailModel.ins().getMailByReceive(),o=0;o<i.length;o++)t.push(i[o].handle);MailModel.ins().sendGetItem(t);break;case this.leftPageBtn:if(MailModel.ins().currentPage<2)return void UserTips.InfoTip(GlobalConfig.jifengTiaoyueLg.st101226);MailModel.ins().sendMailInitData(MailModel.ins().currentPage-1);break;case this.rightPageBtn:if(MailModel.ins().maxPage<=MailModel.ins().currentPage)return void UserTips.InfoTip(GlobalConfig.jifengTiaoyueLg.st101227);MailModel.ins().sendMailInitData(MailModel.ins().currentPage+1);break;case this.m_AllDeleBtn:WarnWin.show(GlobalConfig.jifengTiaoyueLg.st101765,function(){for(var e=MailModel.ins().mailData,t=[],i=0;i<e.length;i++)e[i].type&&e[i].receive&&t.push(e[i].handle);t.length>0&&MailModel.ins().sendDelMail(t)},this)}},t.prototype.onSendMail=function(e){var t=e.target.parent;if(t){var i=t.data;i&&MailModel.ins().sendMailContentData(i.handle)}},t.prototype.setMailData=function(){if(this.currentPageLable.text=MailModel.ins().currentPage+"/"+MailModel.ins().maxPage,this._mails=MailModel.ins().mailData,this.mailList.dataProvider=new eui.ArrayCollection(this._mails),this.allReceiveBtn.visible=Boolean(MailModel.ins().getMailByReceive().length),this.m_AllDeleBtn.visible=!this.allReceiveBtn.visible,MailModel.ins().mailData.length>0&&(this.noMailTip.visible=!1),this.m_AllDeleBtn.visible){for(var e=!1,t=0;t<this._mails.length;t++)if(this._mails[t].type&&this._mails[t].receive){e=!0;break}this.m_AllDeleBtn.visible=e}},t.prototype.mailSystemHandle=function(){for(var e=0;e<this._mails.length;e++)if(0==this._mails[e].receive&&1==this._mails[e].mailtype&&0==this._mails[e].type)return void MailModel.ins().sendMailContentData(this._mails[e].handle)},t.prototype.setOpenMail=function(e){for(var t=0;t<this.mailList.numChildren;t++){var i=this.mailList.getChildAt(t);if(i.data.handle==e.handle)return void(i.data=e)}},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(MailWin.prototype,"MailWin",["ICommonWindow"]),window.MailWin=MailWin;var MainAnim=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainGetAnimSkin",t.m_ItemBase.visible=!1,t}return __extends(t,e),t.prototype.setData=function(e,t,i,o){switch(this.playNewEff(),this.m_RAndNameLab.visible=!0,o&&(this.m_RAndNameLab.text=o),e){case ResAnimType.TYPE1:this.playEff(i,e);break;case ResAnimType.TYPE2:case ResAnimType.TYPE3:this.playEff(i+"_3"+EntityAction.STAND,e);break;case ResAnimType.TYPE4:this.initRoleData(t)}},t.prototype.initRoleData=function(e){var t=SubRoles.ins().getSubRoleByIndex(e);if(t){var i=new Role;i.bianShen=t.bianShen,i.configID=t.configID;for(var o=[],s=0;s<t.zhuangbei.length;s++)o.push(t.zhuangbei[s]);i.zhuangbei=o;for(var n=[],s=0;s<t.equipsData.length;s++){var r=new EquipsData;r.item.configID=t.equipsData[s].item.configID,n.push(r)}i.equipsData=n;var a=new WingsData;a.lv=t.wingsData.lv,a.showLv=t.wingsData.showLv,a.openStatus=t.wingsData.openStatus,i.wingsData=a,i.sex=t.sex,i.job=t.job,i.mountsLevel=t.mountsLevel,i.mountsShowLv=t.mountsShowLv,i.zhuanzhiLv=t.zhuanzhiLv,this.charRole||(this.charRole=ObjectPool.ins().pop("CharRole"),egret.setTimeout(function(){this.charRole&&!this.charRole._body.visible&&(this.charRole._body.visible=!0)},this,200)),this.charRole.infoModel=i,this.charRole.updateModel(),this.charRole.dir=3,this.charRole.playAction(EntityAction.STAND),this.m_AnimGroup.addChild(this.charRole),this.charRole.x=this.m_AnimGroup.width/2,this.charRole.y=this.m_AnimGroup.height/2,this.charRole.hideHpComp(),this.charRole._body.alpha=1,this.charRole._body.visible=!0,this.charRole._titleMc&&(this.charRole._titleMc.visible=!1)}},t.prototype.clearRole=function(){this.charRole&&(this.charRole._titleMc&&(this.charRole._titleMc.visible=!0),this.charRole.scaleX=1,this.charRole.scaleY=1,this.charRole.hideHpComp(!0),DisplayUtils.dispose(this.charRole),this.charRole._infoModel=null,this.charRole=null)},t.prototype.release=function(){this.clearRole(),DisplayUtils.dispose(this.m_NewEff),this.m_NewEff=null,DisplayUtils.dispose(this.m_Eff),this.m_Eff=null},t.prototype.playEff=function(e,t){this.m_Eff=ViewManager.ins().createEff(this.m_Eff,this.m_AnimGroup,e,-1,t)},t.prototype.playNewEff=function(){this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_EffGroup,"eff_ui_activation",-1)},t}(eui.Component);__reflect(MainAnim.prototype,"MainAnim"),window.MainAnim=MainAnim;var MainGetAnim=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainGetAnimSkin",t}return __extends(t,e),t.prototype.setData=function(){if(this.playNewEff(),UserBag.ins().showList.length>0){var e=UserBag.ins().showList.splice(0,1),t=e[0],i=GlobalConfig.ins("ItemConfig")[t];i&&(this.m_RAndNameLab.text=i.name);var o=GlobalConfig.ins("ExhibitionConfig")[t];if(o){var s=1,n="";switch(this.m_AnimGroup.visible=!0,this.m_ItemBase.visible=!0,o.type){case 1:s=ResAnimType.TYPE2,n=o.display+"_3"+EntityAction.STAND,this.playEff(n,s),this.m_ItemBase.visible=!1;break;case 2:s=ResAnimType.TYPE1,n=o.display,this.playEff(n,s),this.m_ItemBase.visible=!1;break;case 3:this.m_ItemBase.data=t,this.m_ItemBase.dataChanged(),this.m_ItemBase.showItemEffect(),this.m_ItemBase.isShowName(!1),this.m_AnimGroup.visible=!1}}}},t.prototype.release=function(){DisplayUtils.dispose(this.m_Eff),this.m_Eff=null,DisplayUtils.dispose(this.m_NewEff),this.m_NewEff=null},t.prototype.playEff=function(e,t){this.m_Eff=ViewManager.ins().createEff(this.m_Eff,this.m_AnimGroup,e,-1,t)},t.prototype.playNewEff=function(){this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_EffGroup,"eff_ui_activation",-1)},t}(eui.Component);__reflect(MainGetAnim.prototype,"MainGetAnim"),window.MainGetAnim=MainGetAnim;var MainGetNewWin=function(e){function t(){var t=e.call(this)||this;return t.time=5,t.skinName="MainGetNewWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.isOpen=!0,this.time=5,this.addViewEvent(),this.addTimer(),this.setData(),this.checkGuide()},t.prototype.close=function(){t.isOpen=!1,this.m_MainGetAnim.release(),this.release()},t.prototype.release=function(){this.removeTimer()},t.prototype.setData=function(){this.m_SureBtn.label=GlobalConfig.jifengTiaoyueLg.st100040+"（"+this.time+"）";var e=UserBag.ins().showList[0],t=GlobalConfig.ins("ExhibitionConfig")[e];t&&(this.m_Img.source=t.textTips+"_png"),this.m_MainGetAnim.setData()},t.prototype.addTimer=function(){this.removeTimer(),TimerManager.ins().doTimer(1e3,0,this.refTime,this)},t.prototype.removeTimer=function(){TimerManager.ins().remove(this.refTime,this)},t.prototype.refTime=function(){this.time-=1,this.m_SureBtn.label=GlobalConfig.jifengTiaoyueLg.st100040+"（"+this.time+"）",this.time<0&&this.onClickClose()},t.prototype.addViewEvent=function(){this.AddClick(this.m_SureBtn,this.onClickClose)},t.prototype.onMaskTap=function(){this.onClickClose()},t.prototype.onClickClose=function(){GuideUtils.ins().next(this.m_SureBtn);var e=ViewManager.ins().getView(FbWin);e instanceof FbWin&&e.fbChallengePanel.checkGuide2(),UserBag.ins().showList.length>0?(this.time=6,this.setData(),this.refTime()):ViewManager.ins().close(this)},t.prototype.checkGuide=function(){UserFb2.ins().fbChallengeId==GuideArtifact.Artifact&&(this.removeTimer(),GuideUtils.ins().show(this.m_SureBtn,68,2))},t.isOpen=!1,t}(BaseEuiPanel);__reflect(MainGetNewWin.prototype,"MainGetNewWin"),ViewManager.ins().reg(MainGetNewWin,LayerManager.UI_Top),window.MainGetNewWin=MainGetNewWin;var MainNeedItem=function(e){function t(){var t=e.call(this)||this;return t.needItemId=0,t.neeItemNum=0,t.skinName="MainNeedItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_ItemIcon.nameTxt.visible=!1,this.m_ItemIcon.count.visible=!1,this.m_GetLab.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st101091,style:{underline:!0}}]},t.prototype.setData=function(e,t){this.needItemId=e,this.neeItemNum=t;var i=GlobalConfig.ins("ItemConfig")[this.needItemId];this.m_ItemIcon.setDataByConfig(i),this.m_NameLab.text=i.name;var o=UserBag.ins().getBagGoodsCountById(0,this.needItemId);this.m_NeedItemLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101092,[o,this.neeItemNum])},t.prototype.onClickGetLab=function(){this.needItemId&&UserWarn.ins().setBuyGoodsWarn(this.needItemId)},t.prototype.addEvent=function(){MessageCenter.ins().addListener(MessageDef.ITEM_COUNT_CHANGE,this.onChangeData,this),this.m_GetLab.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGetLab,this)},t.prototype.removeEvent=function(){MessageCenter.ins().removeListener(MessageDef.ITEM_COUNT_CHANGE,this.onChangeData,this),this.m_GetLab.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGetLab,this)},t.prototype.onChangeData=function(){this.needItemId&&this.setData(this.needItemId,this.neeItemNum)},t}(eui.Component);__reflect(MainNeedItem.prototype,"MainNeedItem"),window.MainNeedItem=MainNeedItem;var MainNewWin=function(e){function t(){var t=e.call(this)||this;return t.time=5,t.skinName="MainNewWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.animType=e[0],this.roleID=e[1],this.animStr=e[2][0],this.animName=e[2][1],this.imageType=e[2][2],this.time=5,this.addViewEvent(),this.addTimer(),this.setData(),this.checkGuide()},t.prototype.close=function(){this.m_MainAnim.release(),this.release()},t.prototype.release=function(){this.removeTimer()},t.prototype.setData=function(){this.m_SureBtn.label=GlobalConfig.jifengTiaoyueLg.st100040+"（"+this.time+"）",null!=this.imageType&&(this.m_Img.source="comp_262_70_"+this.imageType+"_png"),this.m_MainAnim.setData(this.animType,this.roleID,this.animStr,this.animName)},t.prototype.addTimer=function(){this.removeTimer(),TimerManager.ins().doTimer(1e3,0,this.refTime,this)},t.prototype.removeTimer=function(){TimerManager.ins().remove(this.refTime,this)},t.prototype.refTime=function(){this.time-=1,this.m_SureBtn.label=GlobalConfig.jifengTiaoyueLg.st100040+"（"+this.time+"）",this.time<0&&this.onClickClose()},t.prototype.addViewEvent=function(){this.AddClick(this.m_SureBtn,this.onClickClose)},t.prototype.onClickClose=function(){GuideUtils.ins().next(this.m_SureBtn);var e=ViewManager.ins().getView(UIView2);e instanceof UIView2&&e.checkArGuide(),ViewManager.ins().close(this)},t.prototype.checkGuide=function(){UserFb2.ins().fbChallengeId==GuideArtifact.Artifact&&(this.removeTimer(),GuideUtils.ins().show(this.m_SureBtn,68,5))},t.isOpen=!1,t}(BaseEuiPanel);__reflect(MainNewWin.prototype,"MainNewWin"),ViewManager.ins().reg(MainNewWin,LayerManager.UI_Top),window.MainNewWin=MainNewWin;var MineDoneItemrenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="KDDoneItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=GameGlobal.mineModel.getCfgByType();e?1==this.data.win?this.desc.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101767,[this.data.name,e.name]):this.desc.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101768,[this.data.name,e.name]):this.desc.text=""},t}(eui.ItemRenderer);__reflect(MineDoneItemrenderer.prototype,"MineDoneItemrenderer"),window.MineDoneItemrenderer=MineDoneItemrenderer;var MineItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="KDUpdataItemSkin",t.reward.itemRenderer=ItemBase,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100865,t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.type.source="comp_74_21_0"+e.level+"_png",this.typeImg.source=ResDataPath.GetMineNameByType(e.level),this.reward.dataProvider=new eui.ArrayCollection(MineModel.countRewardList(e.level).concat(e.item)),this.sign.visible=!1,this.lightBg.visible=!1,this.selectBg.visible=!1,this.itemIndex==this.parent.numElements-1?this.specialItem.visible=!1:this.specialItem.visible=!1,this.doubleRewardText.visible=MineModel.ins().isDoubleMining},t}(eui.ItemRenderer);__reflect(MineItemRenderer.prototype,"MineItemRenderer"),window.MineItemRenderer=MineItemRenderer;var MineListInfo=function(){function e(){this.acId=0,this.name="",this.attNum=0,this.guildName="",this.type=1,this.surplusTime=0,this.fightNum=0,this.fightPow=0,this.isAtt=!0,this.showError="",this.post=0,this.stealcount=0,this.stealcountmax=0,this.robStatus=!1}return e.prototype.parse=function(e,t){this.post=t,this.acId=e.dbid,0!=this.acId&&(this.name=e.actorName,this.fightNum=e.berobotcount,this.guildName=e.guildName,this.type=e.mineType,this.stealcount=e.berobotcount,this.surplusTime=e.overTime,this.robStatus=e.robStatus,this.fightPow=e.fightPow,this.job=e.job,this.sex=e.sex,this.mainEle=e.mainEle,this.acId==GameGlobal.actorModel.actorID?(this.isAtt=!1,this.name=GlobalConfig.jifengTiaoyueLg.st101725):this.isAtt=!0,""==this.guildName&&(this.guildName=GlobalConfig.jifengTiaoyueLg.st100897),null==this.caiKuangConfig&&(this.caiKuangConfig=GlobalConfig.ins("CaiKuangConfig")),this.stealcountmax=this.caiKuangConfig.maxbestealcount)},e.prototype.checkIsAtt=function(){return null==this.caiKuangConfig&&(this.caiKuangConfig=GlobalConfig.ins("CaiKuangConfig")),this.stealcountmax=this.caiKuangConfig.maxbestealcount,this.fightNum>=this.caiKuangConfig.maxberobotcount?(this.showError=GlobalConfig.jifengTiaoyueLg.st101726,!1):this.robStatus?(this.showError=GlobalConfig.jifengTiaoyueLg.st101727,!1):!0},e}();__reflect(MineListInfo.prototype,"MineListInfo"),window.MineListInfo=MineListInfo;var MineReportType;!function(e){e[e.UPGRADE=1]="UPGRADE",e[e.SURE_MINE=2]="SURE_MINE",e[e.GET_REWARD=3]="GET_REWARD",e[e.REQ_REVENGE=4]="REQ_REVENGE",e[e.QUICK_FINISH=5]="QUICK_FINISH"}(MineReportType||(MineReportType={}));var MineExploitType;!function(e){e[e.NONE=0]="NONE",e[e.EXPLOIT=1]="EXPLOIT",e[e.FINISH=2]="FINISH"}(MineExploitType||(MineExploitType={}));var MineModel=function(e){function t(){var t=e.call(this)||this;return t.mineInfoList=[],t.exploitCnt=0,t.robNum=0,t.refreshCost=0,t.refreshType=1,t.mineMapNum=0,t.showType=1,t.mapMine=new MinePeopleItem,t.refushNum=0,t.stealCnt=0,t.robNews=!1,t.upCount=0,t.curIndex=1,t.bIsTipsFlag=!1,t.mineRecordList=[],t.m_OutTime=0,t.mapNumLen=0,t.cfgLen=0,t.mRedPoint=new MineModelRedPoint,t.regNetMsg(S2cProtocol.sc_mine_info,t.getMineInfo),t.regNetMsg(S2cProtocol.sc_mine_refresh_result,t.getRefushMineInfo),t.regNetMsg(S2cProtocol.sc_mine_map_info,t.getMineMapInfo),t.regNetMsg(S2cProtocol.sc_mine_berob_record,t.DoMineBerobRecord),t.regNetMsg(S2cProtocol.sc_double_mining_notice,t.DoubleMiningNotice),t.regNetMsg(S2cProtocol.sc_steal_mine_fight_notice,t.stealFightNotice),t
}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.stealFightNotice=function(e){ViewManager.ins().open(MineStealTips,e.countdown)},t.prototype.DoubleMiningNotice=function(e){this.isDoubleMining=e.doubleTime,GameGlobal.MessageCenter.dispatch(MessageDef.DOUBLE_MINING_NOTICE)},t.prototype.DoMineBerobRecord=function(e){this.mineRecordList=e.mineRecordList,this.mineRecordList.sort(function(e,t){return t.robTime-e.robTime}),GameGlobal.MessageCenter.dispatch(MessageDef.MINE_REVENGE_LIST)},t.prototype.requestSteal=function(e){var t=new Sproto.cs_mine_steal_request;t.acId=e,this.Rpc(C2sProtocol.cs_mine_steal,t)},t.prototype.reportMineInfo=function(e){var t=new Sproto.cs_mine_report_mine_info_request;t.type=e,this.Rpc(C2sProtocol.cs_mine_report_mine_info,t)},t.prototype.reportMineMapInfo=function(e,t){void 0===t&&(t=0);var i=new Sproto.cs_mine_mapdata_request;i.mapIndex=e,this.Rpc(C2sProtocol.cs_mine_mapdata,i)},t.prototype.robOtherMine=function(e){var t=new Sproto.cs_mine_rob_request;t.acId=e,this.Rpc(C2sProtocol.cs_mine_rob,t)},t.prototype.breakRobOther=function(e){var t=new Sproto.cs_mine_revenge_request;t.acId=e,this.Rpc(C2sProtocol.cs_mine_revenge,t)},t.prototype.getMineInfo=function(e){if(this.exploitStatus!=e.exploitStatus&&e.exploitStatus==MineExploitType.EXPLOIT&&ViewManager.ins().isShow(MineRefushWin)&&ViewManager.ins().close(MineRefushWin),this.exploitCnt=e.exploitCnt,this.robNum=e.robCnt,this.mineType=e.exploitType||1,this.refreshType=e.refreshType||1,this.refreshNum=e.refreshCnt,this.isDoubleReward=e.isDoublereward,null==this.caiKuangConfig&&(this.caiKuangConfig=GlobalConfig.ins("CaiKuangConfig")),null==this.caiKuangConfig)return void Main.errorBack("getMineInfo exploitCnt="+this.exploitCnt+" exploitType="+e.exploitType+" this.refreshNum="+this.refreshNum+" this.refreshType="+this.refreshType);var t=this.caiKuangConfig.refreshkuangyuanyuanbao,i=t.length-1;this.refreshCost=0;for(var o=0;o<this.refreshNum;++o)this.refreshCost=t[i>o?o:i];this.stealCnt=e.stealCnt,this.endTime=e.exploitOverTime,this.exploitStatus=e.exploitStatus;var s=e.beRobInfos.length;this.mineInfoList=[];for(var n=0;s>n;n++)this.mineInfoList[n]=new MineNowInfo,this.mineInfoList[n].parse(e.beRobInfos[n]);GameGlobal.MessageCenter.dispatch(MessageDef.MINE_STATU_CHANGE),this._InitTimer(),this.reportMineMapInfo(this.curIndex)},t.prototype.HasMine=function(){return this.endTime>0&&MineExploitType.EXPLOIT==this.exploitStatus?!0:this.exploitStatus==MineExploitType.FINISH},t.prototype._InitTimer=function(){if(TimerManager.ins().remove(this._DoTimer,this),this.endTime>0&&MineExploitType.EXPLOIT==this.exploitStatus){var e=this.endTime;this.m_OutTime=Math.ceil(e-GameServer.serverTime),TimerManager.ins().doTimer(1e3,this.m_OutTime,this._DoTimer,this)}},t.prototype._DoTimer=function(){--this.m_OutTime,GameGlobal.MessageCenter.dispatch(MessageDef.MINE_UPDATE_TIME)},t.prototype.getRefushMineInfo=function(e){var t=e.result;this.refreshType=e.mineType||1,this.refreshNum=e.refreshNum,this.refreshCost=e.costNum,GameGlobal.MessageCenter.dispatch(MessageDef.REFUSH_MINE_SUCCESS);var i=GlobalConfig.jifengTiaoyueLg.st101603;t&&(i=GlobalConfig.jifengTiaoyueLg.st101640),UserTips.ins().showTips(i)},t.prototype.getMineMapInfo=function(e){this.mineMapNum=e.mineMapNum,this.curIndex=e.curIndex,0==this.mapNumLen&&(this.mapNumLen=this.countMapNumLen());var t=this.curIndex%this.mapNumLen;this.mapId=0==t?this.mapNumLen:t,this.mapMineList=[];for(var i=e.mapMineList.length,o=0;i>o;o++)this.mapMineList[o]=new MineListInfo,this.mapMineList[o].parse(e.mapMineList[o],o+1);this.mapMineList.sort(function(e,t){return e.isAtt!=t.isAtt?e.isAtt?-1:1:-1}),this.mapMineList.sort(function(e,t){if(1==e.isAtt&&1==t.isAtt){if(e.type<t.type)return 1;if(e.type==t.type&&e.fightPow>t.fightPow)return 1}return-1});for(var s=0;s<this.mapMineList.length;++s)this.mapMineList[s].post=s+1;GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_MINE_LIST)},t.prototype.getBackRobInfo=function(e){},t.prototype.addMineToMap=function(e){1==e?(this.mapMine.setLookInfo(this.showType),this.mapMine.x=1632,this.mapMine.y=992,GameLogic.ins().gamescene.map.addEntity(this.mapMine)):DisplayUtils.removeFromParent(this.mapMine)},t.prototype.countMapNumLen=function(){if(this.cfgLen>0)return this.cfgLen;var e=0,t=GlobalConfig.ins("KuangDiTuConfig");for(var i in t)t[i]&&++e;return this.cfgLen=e,this.cfgLen},t.prototype.getCfgByType=function(e){void 0===e&&(e=-1),-1==e&&(e=this.mineType);var t=GlobalConfig.ins("KuangYuanConfig");for(var i in t)if(t[i].level==e)return t[i];return null},t.prototype.getFreshCfgByType=function(e){void 0===e&&(e=-1),-1==e&&(e=this.refreshType);var t=GlobalConfig.ins("KuangYuanConfig");for(var i in t)if(t[i].level==e)return t[i];return null},t.countRewardList=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=1);var o,s=GlobalConfig.ins("KuangYuanConfig");for(var n in s)if(s[n].level==e){o=s[n];break}if(ErrorLog.Assert(o,"MineModel   countRewardList    "+e))return[];var r=t?o.losegold:o.rewardgold,a=t?o.losefeats:o.rewardfeats,l=new RewardData;l.type=0,l.id=1,l.count=r*i;var h=new RewardData;return h.type=0,h.id=7,h.count=a*i,[l,h]},Object.defineProperty(t.prototype,"isTipsFlag",{get:function(){return this.bIsTipsFlag},set:function(e){this.bIsTipsFlag!=e&&(this.bIsTipsFlag=e)},enumerable:!0,configurable:!0}),t.prototype.countPosition=function(e){var t=GlobalConfig.ins("KuangDiTuConfig")[this.mapId],i=t.pos[e-1];return i?new egret.Point(i[0],i[1]-30):(i=t.pos[0],new egret.Point(t.pos[e-1][0],t.pos[e-1][1]-30))},t}(BaseSystem);__reflect(MineModel.prototype,"MineModel");var MineModelRedPoint=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetMessageDef=function(){return[MessageDef.MINE_STATU_CHANGE]},t.prototype.IsRed=function(){if(!Deblocking.Check(DeblockingType.TYPE_08,!0))return!1;var e=MineModel.ins();return null==this.caiKuangConfig&&(this.caiKuangConfig=GlobalConfig.ins("CaiKuangConfig")),e.exploitStatus!=MineExploitType.EXPLOIT&&this.caiKuangConfig.maxcaikuangcount>e.exploitCnt&&e.endTime<=0?!0:!1},t}(IRedPoint);__reflect(MineModelRedPoint.prototype,"MineModelRedPoint"),window.MineModel=MineModel,window.MineModelRedPoint=MineModelRedPoint;var MineNowInfo=function(){function e(){this.name=""}return e.prototype.parse=function(e){this.name=e.name,this.win=e.win},e}();__reflect(MineNowInfo.prototype,"MineNowInfo"),window.MineNowInfo=MineNowInfo;var MinePeopleItem=function(e){function t(){var t=e.call(this)||this;return t.endSecond=0,t.mineType=new eui.Image,t.mineType.x=8,t.addChild(t.mineType),t.mineBody=new MovieClip,t.mineBody.x=-20,t.mineBody.y=30,t.mineBody.touchEnabled=!0,t.addChild(t.mineBody),t.nameLabel=new eui.Label,t.nameLabel.fontFamily="Microsoft YaHei",t.nameLabel.size=16,t.nameLabel.x=-50,t.nameLabel.y=-55,t.endTime=new eui.Label,t.endTime.size=16,t.endTime.fontFamily="Microsoft YaHei",t.endTime.x=-24,t.endTime.y=-72,t.endTime.textColor=4381465,t.isRob=new MovieClip,t.isRob.touchEnabled=!0,t.isRob.x=40,t.isRob.y=-30,t}return __extends(t,e),t.prototype.setMineInfo=function(e){this.info=e,this.nameLabel.text=e.name+GlobalConfig.jifengTiaoyueLg.st100866,this.nameLabel.x=-50+(120-this.nameLabel.textWidth)/2;var t=e.surplusTime,i=MineModel.ins().getCfgByType(this.info.type);i?this.endSecond=t:ErrorLog.Assert(i,"MinePeopleItem    setMineInfo      cfg"+this.info.type),this.endTime.text=DateUtils.getFormatBySecond(this.endSecond,DateUtils.TIME_FORMAT_5),TimerManager.ins().doTimer(1e3,this.endSecond,this.refushTime,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.attrOther,this),e.acId==GameGlobal.actorModel.actorID?this.nameLabel.textColor=4381465:this.nameLabel.textColor=16767011,e.isAtt?(this.isRob.loadUrl(ResDataPath.MINE_ROB_EFFE,!0),this.addChildAt(this.isRob,2)):(this.isRob.stop(),DisplayUtils.removeFromParent(this.isRob)),this.setLookInfo(e.type,!0)},t.prototype.setLookInfo=function(e,t){void 0===t&&(t=!1),this.mineType.source=ResDataPath.GetMineNameByType(e),this.mineBody.loadUrl(ResDataPath.MINER,!0),t?(this.endTime.parent||this.addChild(this.endTime),this.nameLabel.parent||this.addChild(this.nameLabel)):(DisplayUtils.removeFromParent(this.nameLabel),DisplayUtils.removeFromParent(this.endTime))},t.prototype.destruct=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.attrOther,this),TimerManager.ins().remove(this.refushTime,this),this.mineBody.stop(),this.isRob.stop()},t.prototype.refushTime=function(){--this.endSecond,this.endTime.text=DateUtils.getFormatBySecond(this.endSecond,DateUtils.TIME_FORMAT_5),this.endSecond<=0&&(this.destruct(),DisplayUtils.removeFromParent(this))},t.prototype.attrOther=function(){this.info.acId!=GameGlobal.actorModel.actorID&&(this.info.isAtt?(null==this.caiKuangConfig&&(this.caiKuangConfig=GlobalConfig.ins("CaiKuangConfig")),ViewManager.ins().open(MineRobWin,this.info)):UserTips.ins().showTips("|C:0xf87372&T:"+this.info.showError+"|"))},t}(egret.DisplayObjectContainer);__reflect(MinePeopleItem.prototype,"MinePeopleItem"),window.MinePeopleItem=MinePeopleItem;var MineRefushWin=function(e){function t(){var t=e.call(this)||this;return t.itemCount=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"yuanbaoNum",{get:function(){return MineModel.ins().refreshCost},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="KuangDongUpdataSkin",this.list.itemRenderer=MineItemRenderer,this.list.dataProvider=new eui.ArrayCollection([]),this.bar.labelDisplay.visible=!1,this.refushBtn.label=GlobalConfig.jifengTiaoyueLg.st100842,this.starBtn.label=GlobalConfig.jifengTiaoyueLg.st100864,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100840,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100841},t.prototype.open=function(){this.commonWindowBg.OnAdded(this),this.starBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.refushBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.addListener(MessageDef.REFUSH_MINE_SUCCESS,this.setSelectItem,this),GameGlobal.MessageCenter.addListener(MessageDef.FUBEN_CHANGE,t.mapChange,this),GameGlobal.MessageCenter.addListener(MessageDef.MINE_STATU_CHANGE,this.refreshBar,this),GameGlobal.MessageCenter.addListener(MessageDef.REFUSH_MINE_SUCCESS,this.refreshBar,this),this.refushList(),this.refreshBar()},t.prototype.refushList=function(){if(!this.data){this.data=[];var e=GlobalConfig.ins("KuangYuanConfig");for(var t in e)this.data.push(e[t])}this.list.dataProvider=new eui.ArrayCollection(this.data),null==this.caiKuangConfig&&(this.caiKuangConfig=GlobalConfig.ins("CaiKuangConfig"));var i=this.caiKuangConfig.maxcaikuangcount-GameGlobal.mineModel.exploitCnt;this.openNum.text=GlobalConfig.jifengTiaoyueLg.st100861+i+"/"+this.caiKuangConfig.maxcaikuangcount,TimerManager.ins().doTimer(200,1,this.setSelectItem,this)},t.prototype.setSelectItem=function(){null==this.caiKuangConfig&&(this.caiKuangConfig=GlobalConfig.ins("CaiKuangConfig"));var e=GameGlobal.mineModel.refreshType,t=this.caiKuangConfig.refreshkuangyuanyuanbao;e>=t.length&&(e=t.length-1);var i="",o=UserBag.ins().getBagGoodsById(0,this.caiKuangConfig.refreshkuangitem);this.itemCount=0,o?(this.itemCount=o.count,i=GlobalConfig.jifengTiaoyueLg.st100022+o.itemConfig.name+"("+o.count+"/1)"):i=GameGlobal.actorModel.yb>=this.yuanbaoNum?GlobalConfig.jifengTiaoyueLg.st100845+this.yuanbaoNum:GlobalConfig.jifengTiaoyueLg.st100845+"<font color = '#f87372'>"+this.yuanbaoNum+"</font>",this.costNum.textFlow=(new egret.HtmlTextParser).parser(i);var s=this.list.numChildren,n=GameGlobal.mineModel.refreshType-1;if(n>=0&&s>n){var r=this.list.getChildAt(GameGlobal.mineModel.refreshType-1);this.selectItem&&(this.selectItem.sign.visible=!1,this.selectItem.selectBg.visible=!1,this.selectItem.lightBg.visible=!1),r&&(this.selectItem=r,this.selectItem.sign.visible=!0,this.selectItem.selectBg.visible=!0,this.selectItem.lightBg.visible=!0)}UIHelper.SetBtnNormalEffe(this.starBtn,GameGlobal.mineModel.refreshType==this.data.length)},t.prototype.refreshBar=function(){var e=GameGlobal.mineModel.refreshType,t=GlobalConfig.ins("KuangYuanConfig")[e].maxTimes,i=GameGlobal.mineModel.refreshNum;this.bar.maximum=t,5>e&&0!=i?this.bar.value=i:this.bar.value=0},t.mapChange=function(){ViewManager.ins().close(t)},t.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.starBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.refushBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.removeListener(MessageDef.FUBEN_CHANGE,t.mapChange,this),GameGlobal.MessageCenter.removeListener(MessageDef.REFUSH_MINE_SUCCESS,this.setSelectItem,this),GameGlobal.MessageCenter.removeListener(MessageDef.MINE_STATU_CHANGE,this.refreshBar,this),GameGlobal.MessageCenter.removeListener(MessageDef.REFUSH_MINE_SUCCESS,this.refreshBar,this)},t.prototype.onTap=function(e){switch(e.target){case this.starBtn:var i=GameGlobal.mineModel.getFreshCfgByType(),o=i?i.name:"";GameGlobal.mineModel.refreshType<this.data.length?WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100862,[o]),function(){MineModel.ins().reportMineInfo(MineReportType.SURE_MINE)},this):MineModel.ins().reportMineInfo(MineReportType.SURE_MINE);break;case this.refushBtn:if(GameGlobal.mineModel.refreshType==this.data.length)return UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100863);this.yuanbaoNum>0&&this.itemCount<=0&&0==t.isTips?WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100848,[this.yuanbaoNum]),function(){t.isTips=!0,GameGlobal.actorModel.yb>=this.yuanbaoNum||this.itemCount>0?MineModel.ins().reportMineInfo(MineReportType.UPGRADE):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008)},this):GameGlobal.actorModel.yb>=this.yuanbaoNum||this.itemCount>0?MineModel.ins().reportMineInfo(MineReportType.UPGRADE):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008)}},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t.isTips=!1,t}(BaseEuiPanel);__reflect(MineRefushWin.prototype,"MineRefushWin",["ICommonWindow"]),window.MineRefushWin=MineRefushWin;var MineReportInfoWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="KuangDongReportSkin",this.list.itemRenderer=MineReportItemRenderer},t.prototype.open=function(){this.m_bg.init("MineReportInfoWin",GlobalConfig.jifengTiaoyueLg.st101728);for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.MessageCenter.addListener(MessageDef.MINE_REVENGE_LIST,this.refushList,this),MineModel.ins().reportMineInfo(MineReportType.REQ_REVENGE),GameGlobal.MessageCenter.addListener(MessageDef.FUBEN_CHANGE,this.mapChange,this),GameGlobal.mineModel.robNews=!1,GameGlobal.MessageCenter.dispatch(MessageDef.REFUSHMINE_RED_INFO),this.refushList()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.MessageCenter.removeListener(MessageDef.MINE_REVENGE_LIST,this.refushList,this),GameGlobal.MessageCenter.removeListener(MessageDef.FUBEN_CHANGE,this.mapChange,this)},t.prototype.mapChange=function(){ViewManager.ins().close(t)},t.prototype.refushList=function(){this.list.dataProvider=new eui.ArrayCollection(GameGlobal.mineModel.mineRecordList)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(MineReportInfoWin.prototype,"MineReportInfoWin"),window.MineReportInfoWin=MineReportInfoWin;var MineReportItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="KDReportItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.revenge.textFlow=(new egret.HtmlTextParser).parser("<u>"+GlobalConfig.jifengTiaoyueLg.st101729+"</u>"),this.revenge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.dataChanged=function(){this.revenge.visible=!1,this.infoData=this.data;var e=GameGlobal.mineModel.getCfgByType(this.infoData.mineType);if(e)switch(this.time.text=DateUtils.GetFormatSecond(this.infoData.robTime,8),this.infoData.type){case 1:this.info.text="开始采集"+e.name;break;case 2:this.infoData.robResult?(this.info.text=this.infoData.roberName+GlobalConfig.jifengTiaoyueLg.st100562+e.name,this.revenge.visible=!0):this.info.text=this.infoData.roberName+GlobalConfig.jifengTiaoyueLg.st100562+e.name+GlobalConfig.jifengTiaoyueLg.st101706+"。";break;case 3:this.infoData.robResult?this.info.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101770,[this.infoData.roberName,e.name]):this.info.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101771,[this.infoData.roberName,e.name]);break;case 4:this.infoData.robResult?this.info.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101772,[this.infoData.roberName,e.name]):this.info.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101773,[this.infoData.roberName,e.name]);break;case 5:this.infoData.robResult?this.info.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101774,[this.infoData.roberName,e.name]):this.info.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101775,[this.infoData.roberName,e.name])}else ErrorLog.Assert(e,"MineReportItemRenderer     cfg   "+this.infoData.mineType)},t.prototype.destruct=function(){this.revenge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(){return this.infoData.isRevenge?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100838):void ViewManager.ins().open(MineRevengeWin,this.infoData)},t}(eui.ItemRenderer);__reflect(MineReportItemRenderer.prototype,"MineReportItemRenderer"),window.MineReportItemRenderer=MineReportItemRenderer;var MineRevengeWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="KuangDongFuchouSkin",this.reward.itemRenderer=ItemBase},t.prototype.open=function(){this.m_bg.init("MineRevengeWin",GlobalConfig.jifengTiaoyueLg.st100560);for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.data=e[0],this.attBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.refushInfo()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.attBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.refushInfo=function(){this.nametx.text=GlobalConfig.jifengTiaoyueLg.st101730+this.data.roberName,this.AttrNum.text=GlobalConfig.jifengTiaoyueLg.st100809+this.data.fightPow,this.time.text=GlobalConfig.jifengTiaoyueLg.st101731+DateUtils.GetFormatSecond(this.data.robTime,8),this.reward.dataProvider=new eui.ArrayCollection(MineModel.countRewardList(this.data.mineType,!0,1)),ErrorLog.Assert(this.data,"MineRevengeWin   this.data")||(this.handImg.source="propIcon_048_png")},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.onTap=function(e){switch(e.target){case this.attBtn:MineModel.ins().breakRobOther(this.data.robIndex),GameGlobal.mineModel.showType=this.data.mineType,ViewManager.ins().close(t)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(MineRevengeWin.prototype,"MineRevengeWin"),window.MineRevengeWin=MineRevengeWin;var MineRobWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="KuangDongRobSkin",this.reward.itemRenderer=ItemBase},t.prototype.open=function(){this.m_bg.init("MineRobWin",GlobalConfig.jifengTiaoyueLg.st101776);for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.data=e[0],this.rankBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.stealBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.refushInfo()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.rankBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.stealBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.refushInfo=function(){var e=GlobalConfig.ins("KuangYuanConfig")[this.data.type];if(e){for(var t=[],i=0;i<e.stealaward.length;i++){var o=e.stealaward[i],s={type:o.type,id:o.id,count:o.count};t.push(s)}this.reward.dataProvider=new eui.ArrayCollection(t)}this.ownName.text=GlobalConfig.jifengTiaoyueLg.st101777+this.data.name,this.ownAttr.text=GlobalConfig.jifengTiaoyueLg.st101733+this.data.fightPow,this.head.source=ResDataPath.GetHeadMiniImgName(this.data.job,this.data.sex),this.m_ElementImg.source=ResDataPath.GetElementImgName(this.data.mainEle),null==this.caiKuangConfig&&(this.caiKuangConfig=GlobalConfig.ins("CaiKuangConfig"));var n=this.caiKuangConfig.maxrobotcount-GameGlobal.mineModel.robNum;this.robNum.text=GlobalConfig.jifengTiaoyueLg.st101734+n+"/"+this.caiKuangConfig.maxrobotcount;GameGlobal.mineModel.getCfgByType(this.data.type);this.stealNum.text=GlobalConfig.jifengTiaoyueLg.st101778+(this.caiKuangConfig.maxstealcount-MineModel.ins().stealCnt)+"/"+this.caiKuangConfig.maxstealcount},t.prototype.onTap=function(e){var i=this;switch(e.target){case this.rankBtn:this.data.fightPow>GameGlobal.actorModel.power?WarnWin.show(GlobalConfig.jifengTiaoyueLg.st101735,function(){MineModel.ins().robOtherMine(i.data.acId),GameGlobal.mineModel.showType=i.data.type,ViewManager.ins().close(t)},this):(MineModel.ins().robOtherMine(i.data.acId),GameGlobal.mineModel.showType=this.data.type,ViewManager.ins().close(t));break;case this.stealBtn:if(this.data.stealcountmax-this.data.stealcount==0)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101779);WarnWin.show(GlobalConfig.jifengTiaoyueLg.st101900,function(){MineModel.ins().requestSteal(i.data.acId),ViewManager.ins().close(t)},this)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(MineRobWin.prototype,"MineRobWin"),window.MineRobWin=MineRobWin;var MineSettledWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="KuangDongDoneSkin",this.list.itemRenderer=MineDoneItemrenderer,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101835,this.noDesc.text=GlobalConfig.jifengTiaoyueLg.st101836,this.sureBtn.label=GlobalConfig.jifengTiaoyueLg.st100004},t.prototype.open=function(){this.m_bg.init("MineSettledWin",GlobalConfig.jifengTiaoyueLg.st101901);for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.cfg=GameGlobal.mineModel.getCfgByType(),this.refushInfo(),GameGlobal.mineModel.exploitStatus=MineExploitType.NONE,GameGlobal.mineModel.endTime=0,GameGlobal.mineModel.refushNum=0,GameGlobal.MessageCenter.dispatch(MessageDef.REFUSHMINE_RED_INFO)},t.prototype.refushInfo=function(){if(this.cfg){this.type.source="comp_74_21_0"+this.cfg.level+"_png",this.list.dataProvider=new eui.ArrayCollection(GameGlobal.mineModel.mineInfoList);var e=MineModel.countRewardList(GameGlobal.mineModel.mineType).concat(this.cfg.item);this.rewardDesc.textFlow=(new egret.HtmlTextParser).parser(t.makeDescStr(e)),this.loseNum.textFlow=(new egret.HtmlTextParser).parser(this.countLostStr()),this.typeImg.source=ResDataPath.GetMineNameByType(this.cfg.level),this.noDesc.visible=GameGlobal.mineModel.mineInfoList.length<=0,this.doubleRewardText.visible=MineModel.ins().isDoubleReward}},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.makeDescStr=function(e){var t,i=MineModel.ins().isDoubleReward?2:1,o="";for(var s in e)t=e[s],o+=0==t.type?MoneyManger.MoneyConstToName(t.id)+"x"+t.count*i+"\n":GlobalConfig.itemConfig[t.id].name+"x"+t.count*i+"\n";return o},t.prototype.countLostStr=function(){var e=GameGlobal.mineModel.mineInfoList,t=0;for(var i in e)e[i].win&&++t;if(0>=t)return"";var o="";return o+="-"+this.cfg.losegold*t+"\n",o+="-"+this.cfg.losefeats*t+"\n"},t.prototype.close=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];MineModel.ins().reportMineInfo(MineReportType.GET_REWARD),ViewManager.ins().close(t),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(e){switch(e.target){case this.sureBtn:ViewManager.ins().close(t)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(MineSettledWin.prototype,"MineSettledWin"),window.MineSettledWin=MineSettledWin;var MineStealTips=function(e){function t(){var t=e.call(this)||this;return t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="KuangDongTips"},t.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.m_bg.init("MineStealTips",GlobalConfig.jifengTiaoyueLg.st100367,!1),t.downcount=e[0],TimerManager.ins().doTimer(1e3,t.downcount,this.updateDowncount,this)},t.prototype.close=function(){MessageCenter.ins().removeAll(this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.updateDowncount=function(){return t.downcount--,t.downcount<=0?(this.onClose(),void TimerManager.ins().remove(this.updateDowncount,this)):void(this.m_Downcount.text=t.downcount+GlobalConfig.jifengTiaoyueLg.st101902)},t.prototype.onClose=function(){ViewManager.ins().close(this)},t.downcount=5,t}(BaseEuiPanel);__reflect(MineStealTips.prototype,"MineStealTips"),ViewManager.ins().reg(MineStealTips,LayerManager.UI_Popup),window.MineStealTips=MineStealTips;var MineWinInfo=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100851,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mineList=[],this.name=GlobalConfig.jifengTiaoyueLg.st100851,this.skinName="KuangDongSkin",this.model=GameGlobal.mineModel,null!=this.openBtn&&(this.paymoney.touchEnabled=!0,this.paymoney.textFlow=(new egret.HtmlTextParser).parser("<u>"+GlobalConfig.jifengTiaoyueLg.st100852+"</u>"),this.openBtn.label=GlobalConfig.jifengTiaoyueLg.st100859,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100860)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_MINE_LIST,this.refushMine,this),MineModel.ins().reportMineMapInfo(1,1),GameGlobal.MessageCenter.addListener(MessageDef.MINE_STATU_CHANGE,this.refushPanelInfo,this),GameGlobal.MessageCenter.addListener(MessageDef.REFUSHMINE_RED_INFO,this.refushRed,this),this.vipBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.openBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.paymoney.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.refushPanelInfo()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_MINE_LIST,this.refushMine,this),GameGlobal.MessageCenter.removeListener(MessageDef.MINE_STATU_CHANGE,this.refushPanelInfo,this),GameGlobal.MessageCenter.removeListener(MessageDef.REFUSHMINE_RED_INFO,this.refushRed,this),this.vipBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.openBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.paymoney.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this);for(var i=0;6>i;i++)this.mineList[i]&&this.mineList[i].destruct()},t.prototype.refushRed=function(){this.redPoint0.visible=GameGlobal.mineModel.robNews},t.prototype.CheckRedPoint=function(){return MineModel.ins().mRedPoint.IsRed()},t.prototype.refushTime=function(){--this.outTime,this.timeLabel.text=this.typeDesc+DateUtils.getFormatBySecond(this.outTime,9)},t.prototype.refushPanelInfo=function(){null==this.caiKuangConfig&&(this.caiKuangConfig=GlobalConfig.ins("CaiKuangConfig")),this.stealNum.text=GlobalConfig.jifengTiaoyueLg.st100853+(this.caiKuangConfig.maxstealcount-MineModel.ins().stealCnt)+"/"+this.caiKuangConfig.maxstealcount;var e=this.caiKuangConfig.maxrobotcount-this.model.robNum;if(e>0?this.robNum.text=GlobalConfig.jifengTiaoyueLg.st100827+e+"/"+this.caiKuangConfig.maxrobotcount:this.robNum.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st100827+"<font color = '#f87372'>"+e+"/"+this.caiKuangConfig.maxrobotcount+"</font>"),e=this.caiKuangConfig.maxcaikuangcount-this.model.exploitCnt,e>0?this.openNum.text=GlobalConfig.jifengTiaoyueLg.st100854+e+"/"+this.caiKuangConfig.maxcaikuangcount:this.openNum.textFlow=(new egret.HtmlTextParser).parser(GlobalConfig.jifengTiaoyueLg.st100854+"<font color = '#f87372'>"+e+"/"+this.caiKuangConfig.maxcaikuangcount+"</font>"),UIHelper.SetBtnNormalEffe(this.openBtn,!0),this.model.endTime>0&&MineExploitType.EXPLOIT==this.model.exploitStatus){this.timeBg.visible=!0,this.timeLabel.visible=!0;var t=this.model.endTime,i=this.model.getCfgByType();this.outTime=Math.ceil(t-GameServer.serverTime),this.typeDesc=i.name+GlobalConfig.jifengTiaoyueLg.st100855,this.timeLabel.text=this.typeDesc+DateUtils.getFormatBySecond(this.outTime,9),TimerManager.ins().doTimer(1e3,this.outTime,this.refushTime,this),UIHelper.SetBtnNormalEffe(this.openBtn,!1),this.paymoney.visible=!0}else this.timeBg.visible=!1,this.timeLabel.visible=!1,this.paymoney.visible=!1,TimerManager.ins().remove(this.refushTime,this),e>0?UIHelper.SetBtnNormalEffe(this.openBtn,!0):UIHelper.SetBtnNormalEffe(this.openBtn,!1);MineExploitType.FINISH==this.model.exploitStatus&&ViewManager.ins().open(MineSettledWin),this.refushRed()},t.prototype.refushMine=function(){this.mapIndex=this.model.curIndex,this.leftBtn.visible=this.model.curIndex>1,this.rightBtn.visible=this.model.curIndex<=this.model.mineMapNum-1;for(var e,t,i,o=this.model.mapMineList.length,s=0;6>s;s++)this.mineList[s]||(this.mineList[s]=new MinePeopleItem),this.mineList[s].destruct(),s>o-1?DisplayUtils.removeFromParent(this.mineList[s]):(e=this.model.mapMineList[s],0!=e.acId?(i=this.mineList[s],t=this.model.countPosition(e.post),i.setMineInfo(e),i.x=t.x,i.y=t.y,this.addChild(i)):DisplayUtils.removeFromParent(this.mineList[s]))},t.prototype.payMoneyOver=function(){null==this.caiKuangConfig&&(this.caiKuangConfig=GlobalConfig.ins("CaiKuangConfig"));var e=Math.ceil(this.outTime/60)*this.caiKuangConfig.finishyuanbao;if(MineModel.ins().isTipsFlag)GameGlobal.actorModel.yb>=e?MineModel.ins().reportMineInfo(MineReportType.QUICK_FINISH):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100014);else{var t=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100856,[e]);WarnWin.show(t,function(){MineModel.ins().isTipsFlag=!0,GameGlobal.actorModel.yb>=e?MineModel.ins().reportMineInfo(MineReportType.QUICK_FINISH):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100014)},this)}},t.prototype.onTap=function(e){switch(e.target){case this.vipBtn:ViewManager.ins().open(MineReportInfoWin);break;case this.leftBtn:--this.mapIndex,MineModel.ins().reportMineMapInfo(this.mapIndex);break;case this.rightBtn:++this.mapIndex,MineModel.ins().reportMineMapInfo(this.mapIndex);break;case this.openBtn:if(this.model.endTime>0)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100857);null==this.caiKuangConfig&&(this.caiKuangConfig=GlobalConfig.ins("CaiKuangConfig")),this.model.exploitCnt<this.caiKuangConfig.maxcaikuangcount?ViewManager.ins().open(MineRefushWin):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100858);break;case this.paymoney:this.payMoneyOver()}},t.prototype.UpdateContent=function(){},t.openCheck=function(){return Deblocking.Check(DeblockingType.TYPE_08)
},t}(BaseView);__reflect(MineWinInfo.prototype,"MineWinInfo",["ICommonWindowTitle","eui.UIComponent","egret.DisplayObject"]),window.MineWinInfo=MineWinInfo;var MountAnim=function(e){function t(){var t=e.call(this)||this;return t.skinName="MountAnimSkin",t}return __extends(t,e),t.prototype.setMountData=function(e){var t=MountModel.getInstance,i=GlobalConfig.ins("MountsLevelConfig")[e.level];if(i){this.m_RAndNameLab.text=i.name,this.m_LvLab.text=e.level+"",this.m_Lv=e.level,this.m_NowLv=e.level,this.playEff(i.appearance+"_3"+EntityAction.STAND),this.totalPower.visible=!0,this.initRoleData(t.nowSelectRoldData.roleID);var o=t.getAllPower(e);this.totalPower.text=o+""}},t.prototype.shPower=function(e){void 0===e&&(e=!1),e?this.totalPower.visible=!0:this.totalPower.visible=!1},t.prototype.playEff=function(e){this.m_Eff=ViewManager.ins().createEff(this.m_Eff,this.m_MontAnimGroup,e,-1,ResAnimType.TYPE3)},t.prototype.initRoleData=function(e){var t=SubRoles.ins().getSubRoleByIndex(e);if(t){var i=new Role;i.bianShen=t.bianShen,i.configID=t.configID;var o=[];i.zhuangbei=o;for(var s=[],n=0;n<t.equipsData.length;n++){var r=new EquipsData;r.item.configID=t.equipsData[n].item.configID,s.push(r)}i.equipsData=s;var a=new WingsData;a.lv=t.wingsData.lv,a.showLv=t.wingsData.showLv,a.openStatus=t.wingsData.openStatus,i.wingsData=a,i.sex=t.sex,i.job=t.job,i.zhuanzhiLv=t.zhuanzhiLv,this.charRole||(this.charRole=ObjectPool.ins().pop("CharRole"),egret.setTimeout(function(){this.charRole&&!this.charRole._body.visible&&(this.charRole._body.visible=!0)},this,200)),this.charRole.infoModel=i,this.m_ElementImg.source=ResDataPath.GetElementImgName(i.attrElementMianType),this.charRole.updateModel(),this.charRole.dir=3,this.charRole.playAction(EntityAction.STAND),this.m_AnimGroup.addChild(this.charRole),this.charRole.x=this.m_AnimGroup.width/2,this.charRole.y=this.m_AnimGroup.height/2,this.charRole.hideHpComp(),this.charRole._body.alpha=1,this.charRole._body.visible=!0,this.charRole._titleMc&&(this.charRole._titleMc.visible=!1)}},t.prototype.clearRole=function(){this.charRole&&(this.charRole._titleMc&&(this.charRole._titleMc.visible=!0),this.charRole.scaleX=1,this.charRole.scaleY=1,this.charRole.hideHpComp(!0),DisplayUtils.dispose(this.charRole),this.charRole._infoModel=null,this.charRole=null)},t.prototype.release=function(){this.clearRole(),DisplayUtils.dispose(this.m_Eff),this.m_Eff=null,DisplayUtils.dispose(this.m_NewEff),this.m_NewEff=null},t.prototype.changeAnimLv=function(e){var t=(MountModel.getInstance,GlobalConfig.ins("MountsLevelConfig")[e]);t&&(this.m_RAndNameLab.text=t.name,this.m_LvLab.text=e+"",this.m_Lv=e,this.totalPower.visible=!1,this.playEff(t.appearance+"_3"+EntityAction.STAND),this.m_Eff.gotoAndPlay(1,-1),this.charRole._body.gotoAndPlay(1,-1))},t.prototype.playNewEff=function(){this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_EffGroup,"eff_ui_activation",-1)},t}(eui.Component);__reflect(MountAnim.prototype,"MountAnim"),window.MountAnim=MountAnim;var MountDanYaoItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_ItemList.itemRenderer=ItemBase,this.listData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.listData,this.m_GetBtn.label=GlobalConfig.jifengTiaoyueLg.st100683,this.addEvent()},t.prototype.addEvent=function(){this.m_GetBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data,i=[{type:1,id:t.configID,count:1}];this.m_CountLab.text=t.count+"",this.listData.removeAll(),this.listData.replaceAll(i),this.listData.refresh(),this.m_Name.text=t.itemConfig.name,this.m_GetBtn.redPoint.visible=null!=UserBag.ins().getBagItemById(t.configID),AttributeData.setAttrGroup(t.itemConfig.useArg,this.m_AttrGroup)},t.prototype.onClick=function(){ViewManager.ins().open(MountDanYaoUseWin,this.data,ItemType.TYPE11)},t}(eui.ItemRenderer);__reflect(MountDanYaoItem.prototype,"MountDanYaoItem"),window.MountDanYaoItem=MountDanYaoItem;var MountDanYaoPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="MountDanYaoPanelSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=MountDanYaoItem,this.m_ListData=new eui.ArrayCollection,this.m_List.dataProvider=this.m_ListData,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100682},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_RoleSelectPanel.y=130,this.addViewEvent(),this.setData()},t.prototype.close=function(){this.m_RoleSelectPanel.y=158,this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.observe(MountEvt.MOUNT_DATAUPDATE_MSG,this.setData),this.observe(MountEvt.MOUNT_DANYAO_MSG,this.setData)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=MountModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t);e.nowDanYaoSelectRoleData=i;var o=UserBag.ins().getAllItemListBuyType(0,11),s=[],n=GlobalConfig.ins("mountsShuXingDanjcConfig");for(var r in n){for(var a=n[r],l=new ItemData,h=!1,c=0;c<o.length;c++)if(o[c].configID==a.id){l.count=o[c].count,l.configID=o[c].configID,h=!0;break}1!=h&&(l.configID=a.id,l.count=0),s.push(l)}s&&(this.m_ListData.removeAll(),this.m_ListData.replaceAll(s),this.m_ListData.refresh());var u=e.mountDic.get(i.roleID);u&&AttributeData.setAttrGroup(u.attr,this.m_AttrGroup)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.UpdateContent=function(){this.setData()},t}(BaseView);__reflect(MountDanYaoPanel.prototype,"MountDanYaoPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.MountDanYaoPanel=MountDanYaoPanel;var MountDanYaoUseWin=function(e){function t(){var t=e.call(this)||this;return t.nowNum=1,t.skinName="MountDanYaoUseWinSkin",t.m_ItemIcon.imgJob.visible=!1,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.m_MaxBtn.label=GlobalConfig.jifengTiaoyueLg.st101113,this.m_MinBtn.label=GlobalConfig.jifengTiaoyueLg.st101114,this.m_UseBtn.label=GlobalConfig.jifengTiaoyueLg.st100683,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100684+"：",this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st100685+"："},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1];this.itemType=o,this.itemData=i,o==ItemType.TYPE16?this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st102043:this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100684+"：",this.addViewEvent(),this.setData(),this.add.visible=this.m_UseBtn.visible=!e[2]},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.m_MainNumLab.addEventListener(egret.Event.CHANGING,this.onChangeNum,this),this.AddClick(this.m_CutBtn,this.onClickCunBtn),this.AddClick(this.m_AddBtn,this.onClickAddBtn),this.AddClick(this.m_MaxBtn,this.onClickMaxBtn),this.AddClick(this.m_MinBtn,this.onClickMainBtn),this.AddClick(this.m_UseBtn,this.onClickUseBtn),this.observe(TheGunEvt.THEGUN_DANYAO_MSG,this.setData),this.observe(MountEvt.MOUNT_DANYAO_MSG,this.setData)},t.prototype.removeViewEvent=function(){this.m_MainNumLab.removeEventListener(egret.Event.CHANGING,this.onChangeNum,this)},t.prototype.setData=function(){this.m_NameLab.text=this.itemData.itemConfig.name,this.m_CountLab.text=this.itemData.count+"",this.m_MainNumLab.text=this.nowNum+"";MountModel.getInstance;AttributeData.setAttrGroup(this.itemData.itemConfig.useArg,this.m_AttrGroup),this.m_ItemIcon.setData(this.itemData.itemConfig)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.onClickCunBtn=function(){this.nowNum>1&&(this.nowNum-=1),this.setData()},t.prototype.onClickAddBtn=function(){this.nowNum<this.itemData.count&&(this.nowNum+=1),this.setData()},t.prototype.onClickMaxBtn=function(){this.nowNum!=this.itemData.count&&(this.nowNum=this.itemData.count,this.setData())},t.prototype.onClickMainBtn=function(){1!=this.nowNum&&(this.nowNum=1,this.setData())},t.prototype.onChangeNum=function(){this.nowNum=parseInt(this.m_MainNumLab.text),this.nowNum>this.itemData.count&&(this.nowNum=this.itemData.count),this.nowNum<1&&(this.nowNum=1),this.setData()},t.prototype.onClickUseBtn=function(){if(this.nowNum>0)if(this.itemType==ItemType.TYPE16){var e=TheGunModel.getInstance;TheGunSproto.ins().sendTheGunEatDanYao(e.nowSelectRoldData.roleID,this.itemData.configID,this.nowNum)}else{var t=MountModel.getInstance;MountSproto.ins().sendGetMountEatDanYao(t.nowDanYaoSelectRoleData.roleID,this.itemData.configID,this.nowNum)}},t}(BaseEuiPanel);__reflect(MountDanYaoUseWin.prototype,"MountDanYaoUseWin"),ViewManager.ins().reg(MountDanYaoUseWin,LayerManager.UI_Popup),window.MountDanYaoUseWin=MountDanYaoUseWin;var MountDanYaoWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.mountDanYaoPanel=new MountDanYaoPanel,this.mountDanYaoPanel.name=GlobalConfig.jifengTiaoyueLg.st100681,this.commonWindowBg.AddChildStack(this.mountDanYaoPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e&&e[0]),this.updateRedPoint()},t.prototype.close=function(){var e=ViewManager.ins().getView(UIView2);null!=e&&e.closeNav(UIView2.NAV_PET),this.removeObserve(),this.commonWindowBg.OnRemoved()},t.prototype.updateRedPoint=function(){},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(MountDanYaoWin.prototype,"MountDanYaoWin",["ICommonWindow"]),ViewManager.ins().reg(MountDanYaoWin,LayerManager.UI_Main),window.MountDanYaoWin=MountDanYaoWin;var MountEquipChangeItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent(),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101905,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100923,this.m_AddEquipBtn.label=GlobalConfig.jifengTiaoyueLg.st100665},t.prototype.addEvent=function(){this.m_AddEquipBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtn,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=MountModel.getInstance,i=this.data,o=GlobalConfig.ins("ItemConfig")[i.configID];o&&(this.m_ItemColor.text=t.getEquipColor(o.quality),this.m_NameLab.text=o.name);var s=GlobalConfig.ins("EquipConfig")[i.configID],n=[],r=[],a=[],l=0;for(var h in AttributeData.translate)if(!(s[h]<=0)){if(void 0!=i)for(var c=i.att,u=0;u<c.length;u++)if(c[u].type==AttributeData.translate[h]){r.push(" +"+c[u].value+"%"),l=.01*c[u].value;break}var d=AttributeData.translate[h],p=s[h],f=p*l+s[h],g={type:d,value:p};n.push(g);var _={type:d,value:f};a.push(_),null==r[n.length-1]&&(r[n.length-1]="")}this.m_LvLab.text=o.zsLevel+GlobalConfig.jifengTiaoyueLg.st100103,AttributeData.setAttrGroup(n,this.m_AttrGroup,18,Color.FontColor,!0,Color.Green,r),this.m_MountEquipIcon.setData(i.configID);var m=Math.floor(UserBag.getAttrPower(a));this.m_Score.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100316,style:{textColor:5461335}},{text:m.toString(),style:{textColor:16760614}}];var v=t.mountDic.get(t.nowSelectRoldData.roleID);v&&(v.level>=o.zsLevel?(this.m_NoLvLab.visible=!1,this.m_AddEquipBtn.visible=!0):(this.m_NoLvLab.visible=!0,this.m_NoLvLab.text=o.zsLevel+GlobalConfig.jifengTiaoyueLg.st101903,this.m_AddEquipBtn.visible=!1))},t.prototype.onClickBtn=function(){var e=MountModel.getInstance;MountSproto.ins().sendGetMountEquipChange(e.nowSelectRoldData.roleID,e.nowSelectEquipSlot,this.data.handle)},t}(eui.ItemRenderer);__reflect(MountEquipChangeItem.prototype,"MountEquipChangeItem"),window.MountEquipChangeItem=MountEquipChangeItem;var MountEquipChangeWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MountEquipChangeWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=MountEquipChangeItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,this.m_Lab1.text=GlobalConfig.jifengTiaoyueLg.st101905,this.m_Lab2.text=GlobalConfig.jifengTiaoyueLg.st101906,this.m_Lab3.text=GlobalConfig.jifengTiaoyueLg.st100923,this.getItem.text=GlobalConfig.jifengTiaoyueLg.st101091,UIHelper.SetLinkStyleLabel(this.getItem),this.m_bg.init("MountEquipChangeWin",GlobalConfig.jifengTiaoyueLg.st101904)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];MountModel.getInstance;this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.observe(MountEvt.MOUNT_DATAUPDATE_MSG,this.setData),this.AddClick(this.getItem,this.onClickGetLab1)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){for(var e=MountModel.getInstance,t=e.mountDic.get(e.nowSelectRoldData.roleID),i=UserBag.ins().getBagGoodsByMountEquip(ItemType.MOUNTEQUIP,e.nowSelectEquipSlot,e.nowSelectRoldData.job),o=0;o<i.length;o++){var s=i[o];if(s.weight<=0){var n=[],r=0,a=GlobalConfig.ins("EquipConfig")[s.configID],l=GlobalConfig.ins("ItemConfig")[s.configID];for(var h in AttributeData.translate)if(!(a[h]<=0)){if(void 0!=s)for(var c=s.att,u=0;u<c.length;u++)if(c[u].type==AttributeData.translate[h]){r=.01*c[u].value;break}var d=AttributeData.translate[h],p=a[h],f=p*r+a[h],g={type:d,value:f};n.push(g)}var _=0;t&&t.level>=l.zsLevel&&(_+=1e10),s.weight=Math.floor(UserBag.getAttrPower(n))+_}}if(i.sort(this.sorLvUp),this.listData.removeAll(),this.listData.replaceAll(i),this.listData.refresh(),this.m_noChangeLab.visible=!1,this.m_LabGroup.visible=!0,this.m_MainBg.visible=!0,t){var m=t.equipList[e.nowSelectEquipSlot-1];if(m&&m.itemid>0){var l=GlobalConfig.ins("ItemConfig")[m.itemid];l&&(this.m_ItemColor.text=e.getEquipColor(l.quality),this.m_NameLab.text=l.name,this.m_LvLab.text=l.zsLevel+GlobalConfig.jifengTiaoyueLg.st100103);var a=GlobalConfig.ins("EquipConfig")[m.itemid],v=[],y=[],n=[],r=0;for(var h in AttributeData.translate)if(!(a[h]<=0)){if(void 0!=m)for(var c=m.attr,u=0;u<c.length;u++)if(c[u].type==AttributeData.translate[h]){y.push(" +"+c[u].value+"%"),r=.01*c[u].value;break}var d=AttributeData.translate[h],p=a[h],f=p*r+a[h],b={type:d,value:p};v.push(b);var g={type:d,value:f};n.push(g),null==y[v.length-1]&&(y[v.length-1]="")}AttributeData.setAttrGroup(v,this.m_AttrGroup,18,Color.FontColor,!0,Color.Green,y);var C=Math.floor(UserBag.getAttrPower(n));this.m_Score.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100316,style:{textColor:5461335}},{text:C.toString(),style:{textColor:16760614}}],this.m_MountEquipIcon.setData(m.itemid)}else this.m_NameLab.text="",this.m_ItemColor.text="",this.m_LvLab.text="",AttributeData.setAttrGroup([],this.m_AttrGroup),this.m_Score.text="",this.m_MountEquipIcon.noItem();m.itemid<=0&&i.length<=0&&(this.m_noChangeLab.visible=!0,this.m_LabGroup.visible=!1,this.m_MainBg.visible=!1)}},t.prototype.sorLvUp=function(e,t){return t.weight-e.weight},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.onClickGetLab1=function(){UserWarn.ins().setBuyGoodsWarn(801001)},t}(BaseEuiPanel);__reflect(MountEquipChangeWin.prototype,"MountEquipChangeWin"),ViewManager.ins().reg(MountEquipChangeWin,LayerManager.UI_Popup),window.MountEquipChangeWin=MountEquipChangeWin;var MountEquipIcon=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.setData=function(e){var t=GlobalConfig.ins("ItemConfig")[e];t&&(this.m_Bg.source=ResDataPath.GetItemQualityName(t.quality),this.m_Icon.source=t.icon+"_png",this.m_Cont.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101869,[t.zsLevel]))},t.prototype.noItem=function(){this.m_Bg.source=ResDataPath.GetItemQualityName(0),this.m_Icon.source="pf_orange_02_png",this.m_Cont.text=""},t}(eui.Component);__reflect(MountEquipIcon.prototype,"MountEquipIcon"),window.MountEquipIcon=MountEquipIcon;var MountEquipIconItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent()},t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=MountModel.getInstance,i=this.data;if(this.m_Bg.source="pf_black_01_png",this.m_UnLockLab.text="",this.m_LvLab.text="",this.m_ItemLvLab.text="",i)if(i.itemid>0){var o=GlobalConfig.ins("ItemConfig")[i.itemid];o&&(this.m_Icon.source=o.icon+"_png",this.m_LvLab.text=i.level+GlobalConfig.jifengTiaoyueLg.st100093,this.m_Bg.source=ResDataPath.GetItemQualityName(o.quality),this.m_ItemLvLab.text=o.zsLevel+GlobalConfig.jifengTiaoyueLg.st100103),t.setStar(this.m_StarGroup,i.star)}else this.m_Icon.source="pf_orange_02_png",t.setStar(this.m_StarGroup,0);else{var s=t.equipSoltUnlockDic.get(this.itemIndex+1);this.m_Icon.source="pf_suotou_01_png",this.m_UnLockLab.text=s+GlobalConfig.jifengTiaoyueLg.st100674,t.setStar(this.m_StarGroup,0)}t.checkEquipRedPoint(i,t.nowSelectRoldData)?this.m_RedPoint.visible=!0:this.m_RedPoint.visible=!1},t.prototype.onClick=function(){var e=this.data,t=this.itemIndex+1,i=MountModel.getInstance;i.nowSelectEquipSlot=t,null!=e&&e.itemid>0?ViewManager.ins().open(MountEquipWin):null!=e&&0==e.itemid?ViewManager.ins().open(MountEquipChangeWin):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100675)},t}(eui.ItemRenderer);__reflect(MountEquipIconItem.prototype,"MountEquipIconItem"),window.MountEquipIconItem=MountEquipIconItem;var MountEquipLvUpWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MountEquipLvUpWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_LvFullLab.text=GlobalConfig.jifengTiaoyueLg.st100327,this.m_UpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st100296,this.m_bg.init("MountEquipLvUpWin",GlobalConfig.jifengTiaoyueLg.st101651)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.setData(),this.addViewEvent()},t.prototype.close=function(){this.release()},t.prototype.release=function(){DisplayUtils.dispose(this.m_NewEff),this.m_NewEff=null,DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null,this.removeViewEvent()},t.prototype.addViewEvent=function(){this.m_NeedItem.addEvent(),this.observe(MountEvt.MOUNT_DATAUPDATE_MSG,this.setData),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.setData),this.AddClick(this.m_UpLvBtn,this.onClickUpLv)},t.prototype.removeViewEvent=function(){this.m_NeedItem.removeEvent()},t.prototype.setData=function(){var e=MountModel.getInstance,t=e.mountDic.get(e.nowSelectRoldData.roleID);if(t){var i=t.equipList[e.nowSelectEquipSlot-1],o=GlobalConfig.ins("MountsEquipGrowUpConfig")[e.nowSelectRoldData.job+"0"+e.nowSelectEquipSlot];if(i){var s=GlobalConfig.ins("ItemConfig")[i.itemid];s&&(this.m_LeftMountEquipIcon.setData(i.itemid),this.m_RightMountEquipIcon.setData(i.itemid));var n=o[i.itemid],r=1+Math.floor(i.level/5);this.needNum=r;var a=UserBag.ins().getBagGoodsCountById(0,n.itemId1);this.itemId=n.itemId1,this.itemNum=a,this.m_NeedItem.setData(this.itemId,this.needNum),this.m_LeftLvLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[i.level]),this.m_RightLvLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[i.level+1]);var l=e.getEquipLvAttr(i,e.nowSelectRoldData.job,e.nowSelectEquipSlot),h=Math.floor(UserBag.getAttrPower(l));if(this.m_Power.text=h,AttributeData.setAttrGroup(l,this.m_LeftAttrGroup),i.level<o[i.itemid].maxLevel){var c=e.getEquipLvAttr(i,e.nowSelectRoldData.job,e.nowSelectEquipSlot,i.level+1);AttributeData.setAttrGroup(c,this.m_RightAttrGroup),this.m_ArrImg.visible=!0,this.m_ArrImg1.visible=!0,this.m_TitleLab.text=GlobalConfig.jifengTiaoyueLg.st100263,this.m_RightGroup.visible=!0,this.m_CanUpStarGroup.visible=!0,this.m_LeftGroup.horizontalCenter=-119,this.m_LeftAttrGroup.horizontalCenter=-127,this.m_LvFullLab.visible=!1,this.m_LeftAttrGroup.visible=!0,this.m_RightAttrGroup.visible=!0}else this.m_ArrImg.visible=!1,this.m_ArrImg1.visible=!1,this.m_TitleLab.text=GlobalConfig.jifengTiaoyueLg.st100260,this.m_RightGroup.visible=!1,this.m_CanUpStarGroup.visible=!1,this.m_LeftGroup.horizontalCenter=0,this.m_LeftAttrGroup.horizontalCenter=0,this.m_LvFullLab.visible=!0,this.m_LeftAttrGroup.visible=!0,this.m_RightAttrGroup.visible=!1}}},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.onClickUpLv=function(){var e=MountModel.getInstance;this.itemNum>=this.needNum?(MountSproto.ins().sendGetMountEquipLvUp(e.nowSelectRoldData.roleID,e.nowSelectEquipSlot),this.playUpEff()):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100217)},t.prototype.playUpEff=function(){this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_icon"),this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_EffGroup,"eff_ui_upgrade")},t.prototype.onClickGetItem=function(){UserWarn.ins().setBuyGoodsWarn(this.itemId)},t}(BaseEuiPanel);__reflect(MountEquipLvUpWin.prototype,"MountEquipLvUpWin"),ViewManager.ins().reg(MountEquipLvUpWin,LayerManager.UI_Popup),window.MountEquipLvUpWin=MountEquipLvUpWin;var MountEquipStarIcon=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_ItemLvLab.text=""},t.prototype.setData=function(e,t){var i=GlobalConfig.ins("ItemConfig")[e];i&&(this.m_Bg.source=ResDataPath.GetItemQualityName(i.quality),this.m_Icon.source=i.icon+"_png",this.m_LvLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101869,[i.zsLevel]),this.m_UnLockLab.text="",MountModel.getInstance.setStar(this.m_StarGroup,t))},t.prototype.noItem=function(){this.m_Bg.source=ResDataPath.GetItemQualityName(0),this.m_Icon.source="pf_orange_02_png",this.m_LvLab.text="",this.m_UnLockLab.text=""},t}(eui.Component);__reflect(MountEquipStarIcon.prototype,"MountEquipStarIcon"),window.MountEquipStarIcon=MountEquipStarIcon;var MountEquipStarUpWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MountEquipStarUpWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_NeedListData=new eui.ArrayCollection,this.m_LvFullLab.text=GlobalConfig.jifengTiaoyueLg.st100327,this.m_UpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st100211,this.m_bg.init("MountEquipStarUpWin",GlobalConfig.jifengTiaoyueLg.st101908)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){DisplayUtils.dispose(this.m_NewEff),this.m_NewEff=null,DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null,this.removeViewEvent()},t.prototype.addViewEvent=function(){this.m_NeedItem.addEvent(),this.observe(MountEvt.MOUNT_DATAUPDATE_MSG,this.setData),this.AddClick(this.m_UpLvBtn,this.onClickUpLv)},t.prototype.removeViewEvent=function(){this.m_NeedItem.removeEvent()},t.prototype.setData=function(){var e=MountModel.getInstance,t=e.mountDic.get(e.nowSelectRoldData.roleID);if(t){var i=t.equipList[e.nowSelectEquipSlot-1],o=GlobalConfig.ins("MountsEquipStarConfig")[e.nowSelectRoldData.job+"0"+e.nowSelectEquipSlot];if(i){var s=GlobalConfig.ins("ItemConfig")[i.itemid];s&&(this.m_LeftMountEquipIcon.setData(i.itemid),this.m_RightMountEquipIcon.setData(i.itemid));var n=o[i.itemid],r=[{type:1,id:n.itemId1,count:1}];this.m_NeedListData.replaceAll(r);var a=1+Math.floor(i.star/5);this.needNum=a;var l=UserBag.ins().getBagGoodsCountById(0,n.itemId1);this.itemId=n.itemId1,this.itemNum=l,e.setStar(this.m_LeftStarGroup,i.star),e.setStar(this.m_RightStarGroup,i.star+1),this.m_NeedItem.setData(this.itemId,a);var h=e.getEquipStarAttr(i,e.nowSelectRoldData.job,e.nowSelectEquipSlot);AttributeData.setAttrGroup(h,this.m_LeftAttrGroup);var c=Math.floor(UserBag.getAttrPower(h));if(this.m_Power.text=c,i.star<o[i.itemid].maxLevel){var u=e.getEquipStarAttr(i,e.nowSelectRoldData.job,e.nowSelectEquipSlot,i.star+1);AttributeData.setAttrGroup(u,this.m_RightAttrGroup),this.m_ArrImg.visible=!0,this.m_ArrImg1.visible=!0,this.m_TitleLab.text=GlobalConfig.jifengTiaoyueLg.st101907,this.m_RightGroup.visible=!0,this.m_CanUpStarGroup.visible=!0,this.m_LeftGroup.horizontalCenter=-119,this.m_LeftAttrGroup.horizontalCenter=-127,this.m_LvFullLab.visible=!1,this.m_LeftAttrGroup.visible=!0,this.m_RightAttrGroup.visible=!0}else this.m_ArrImg.visible=!1,this.m_ArrImg1.visible=!1,this.m_TitleLab.text=GlobalConfig.jifengTiaoyueLg.st100260,this.m_RightGroup.visible=!1,this.m_CanUpStarGroup.visible=!1,this.m_LeftGroup.horizontalCenter=0,this.m_LeftAttrGroup.horizontalCenter=0,this.m_LvFullLab.visible=!0,this.m_LeftAttrGroup.visible=!0,this.m_RightAttrGroup.visible=!1}}},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.onClickUpLv=function(){var e=MountModel.getInstance;this.itemNum>=this.needNum?(MountSproto.ins().sendGetMountEquipStarUp(e.nowSelectRoldData.roleID,e.nowSelectEquipSlot),this.playUpEff()):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100217)},t.prototype.playUpEff=function(){this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_icon"),this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_EffGroup,"eff_ui_upgrade")},t.prototype.onClickGetItem=function(){UserWarn.ins().setBuyGoodsWarn(this.itemId)},t}(BaseEuiPanel);__reflect(MountEquipStarUpWin.prototype,"MountEquipStarUpWin"),ViewManager.ins().reg(MountEquipStarUpWin,LayerManager.UI_Popup),window.MountEquipStarUpWin=MountEquipStarUpWin;var MountEquipWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MountEquipWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101905,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100923,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st101910,this.m_DownBtn.label=GlobalConfig.jifengTiaoyueLg.st101911,this.m_ChangeBtn.label=GlobalConfig.jifengTiaoyueLg.st101912,this.m_StarUpBtn.label=GlobalConfig.jifengTiaoyueLg.st100211,this.m_LvUpBtn.label=GlobalConfig.jifengTiaoyueLg.st100296,this.m_bg.init("MountEquipWin",GlobalConfig.jifengTiaoyueLg.st101909)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.observe(MountEvt.MOUNT_DATAUPDATE_MSG,this.setData),this.AddClick(this.m_ChangeBtn,this.onClickChangBtn),this.AddClick(this.m_DownBtn,this.onClickDown),this.AddClick(this.m_LvUpBtn,this.onClickLvUp),this.AddClick(this.m_StarUpBtn,this.onClickStarUp)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=MountModel.getInstance,t=e.mountDic.get(e.nowSelectRoldData.roleID);if(t){var i=t.equipList[e.nowSelectEquipSlot-1];if(i){var o=GlobalConfig.ins("ItemConfig")[i.itemid];o&&(this.m_ItemColor.text=e.getEquipColor(o.quality),this.m_NameLab.text=o.name,this.m_LvLab.text=o.zsLevel+GlobalConfig.jifengTiaoyueLg.st100103),this.m_EquipTypeLab.text=e.getEquipTypeName(e.nowSelectEquipSlot),this.m_MountEquipStarIcon.setData(i.itemid,i.star);var s=GlobalConfig.ins("EquipConfig")[i.itemid],n=[],r=[],a=[],l=0;for(var h in AttributeData.translate)if(!(s[h]<=0)){if(void 0!=i)for(var c=i.attr,u=0;u<c.length;u++)if(c[u].type==AttributeData.translate[h]){r.push(" +"+c[u].value+"%"),l=.01*c[u].value;break}var d=AttributeData.translate[h],p=s[h],f=p*l+s[h],g={type:d,value:p};n.push(g);var _={type:d,value:f};a.push(_),null==r[n.length-1]&&(r[n.length-1]="")}AttributeData.setAttrGroup(n,this.m_MainStateAttrGroup,18,Color.FontColor,!0,Color.Green,r);var m=Math.floor(UserBag.getAttrPower(a));this.m_Score.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100316,style:{textColor:5461335}},{text:m.toString(),style:{textColor:16760614}}];var v=e.getEquipLvAttr(i,e.nowSelectRoldData.job,e.nowSelectEquipSlot);AttributeData.setAttrGroup(v,this.m_LvAttrGroup);var y=e.getEquipStarAttr(i,e.nowSelectRoldData.job,e.nowSelectEquipSlot);AttributeData.setAttrGroup(y,this.m_StarAllAttrGroup)}}},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.onClickChangBtn=function(){ViewManager.ins().open(MountEquipChangeWin)},t.prototype.onClickDown=function(){var e=MountModel.getInstance;MountSproto.ins().sendGetMountEquipOff(e.nowSelectRoldData.roleID,e.nowSelectEquipSlot)},t.prototype.onClickLvUp=function(){ViewManager.ins().open(MountEquipLvUpWin)},t.prototype.onClickStarUp=function(){ViewManager.ins().open(MountEquipStarUpWin)},t}(BaseEuiPanel);__reflect(MountEquipWin.prototype,"MountEquipWin"),ViewManager.ins().reg(MountEquipWin,LayerManager.UI_Popup),window.MountEquipWin=MountEquipWin;var MountLvUpAwardItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent(),this.m_ItemList.itemRenderer=ItemBase,this.listData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.listData,this.m_GetTxt.text=GlobalConfig.jifengTiaoyueLg.st100680},t.prototype.addEvent=function(){this.m_GetBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGetBtn,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=GlobalConfig.ins("achievementConfig")[this.itemIndex+1];t&&(this.listData.removeAll(),this.listData.replaceAll(t.award),this.listData.refresh(),this.m_Cont.text=t.shuoMing);var i=this.data;switch(i){case 0:this.m_GetBtn.visible=!0,this.m_GetTxt.visible=!1,this.m_GetImg.visible=!1,this.m_GetBtn.label=GlobalConfig.jifengTiaoyueLg.st101076;break;case-1:this.m_GetBtn.visible=!1,this.m_GetTxt.visible=!0,this.m_GetImg.visible=!1,this.m_GetBtn.label=GlobalConfig.jifengTiaoyueLg.st101076;break;case 1:this.m_GetBtn.visible=!1,this.m_GetTxt.visible=!1,this.m_GetImg.visible=!0,this.m_GetBtn.label=GlobalConfig.jifengTiaoyueLg.st100981}},t.prototype.onClickGetBtn=function(){var e=GlobalConfig.ins("achievementConfig")[this.itemIndex+1];e&&MountSproto.ins().sendGetMountGetAward(e.rankMin)},t}(eui.ItemRenderer);__reflect(MountLvUpAwardItem.prototype,"MountLvUpAwardItem"),window.MountLvUpAwardItem=MountLvUpAwardItem;var MountLvUpAwardWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MountLvUpAwardWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=MountLvUpAwardItem,this.m_ListData=new eui.ArrayCollection,this.m_List.dataProvider=this.m_ListData,this.m_bg.init("MountLvUpAwardWin",GlobalConfig.jifengTiaoyueLg.st100679)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.observe(MountEvt.MOUNT_AWARD_MSG,this.setData)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){for(var e=MountModel.getInstance,t=[],i=0;i<e.achieve.length;i++)t.push(e.achieve[i]);
this.m_ListData.replaceAll(t)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(MountLvUpAwardWin.prototype,"MountLvUpAwardWin"),ViewManager.ins().reg(MountLvUpAwardWin,LayerManager.UI_Popup),window.MountLvUpAwardWin=MountLvUpAwardWin;var MountMainPanel=function(e){function t(t){var i=e.call(this)||this;return i.windowCommonBg="pic_bj_20_png",i._isAutoUp=!1,i.isGuide=!1,i.skinName="MountPanelSkin",i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_ListSkill.itemRenderer=MountSkillIconItem,this.m_SkillData=new eui.ArrayCollection,this.m_ListSkill.dataProvider=this.m_SkillData,this.m_ListEquip.itemRenderer=MountEquipIconItem,this.m_EquipData=new eui.ArrayCollection,this.m_ListEquip.dataProvider=this.m_EquipData,UIHelper.SetLinkStyleLabel(this.getItem),this.m_UpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101103,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100670,this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st100218,this.languageTxt1.text=GlobalConfig.jifengTiaoyueLg.st100671,this.languageTxt2.text=GlobalConfig.jifengTiaoyueLg.st100672,this.m_AutoBuyBox.label=GlobalConfig.jifengTiaoyueLg.st101105,this.getItem.text=GlobalConfig.jifengTiaoyueLg.st100418,this.m_UpLayerBtn.label=GlobalConfig.jifengTiaoyueLg.st100242,this.m_FullLvLab.text=GlobalConfig.jifengTiaoyueLg.st100327},t.prototype.addViewEvent=function(){this.observe(MessageDef.ITEM_COUNT_CHANGE,this._showPYReddot),this.observe(MountEvt.MOUNT_DATAUPDATE_MSG,this.initData),this.observe(MessageDef.BAG_HAS_ITEM_CAN_USE,this.initData),this.AddClick(this.m_MountSkinBtn,this.onClickMountSkinBtn),this.AddClick(this.m_LvUpAwardBtn,this.onClickLvUpAwardBtn),this.AddClick(this.m_DanYaoBtn,this.onClickDanYaoBtn),this.AddClick(this.m_AutoUpLvBtn,this.btnAutoUpClick),this.AddClick(this.m_UpLvBtn,this.onClickUpLvBtn),this.AddClick(this.m_UpLayerBtn,this.onClickUpLayer),this.AddClick(this.m_MountStateBtn,this.onClickMountStateBtn),this.AddClick(this.m_ListSkill,this.onClickSkill),this.AddClick(this.m_LeftArrImg,this.onClickArrImg),this.AddClick(this.m_RightArrImg,this.onClickArrImg),this.AddClick(this.getItem,this.onClickGetLab1),this.observe(MountEvt.MOUNT_CHANGESHOUW_MSG,this.onChangeMountShow),this.AddClick(this.m_FightBtn,this.onClickFight)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.m_RoleSelectPanel.y=130,this.addViewEvent(),this._showPYReddot()},t.prototype.close=function(){this.stopAutoUp(),this.removeEvent(),this.m_RoleSelectPanel.y=158},t.prototype.release=function(){this.m_MountAnim.release(),this.removeEvent(),this.stopAutoUp()},t.prototype.onClickGetLab1=function(){var e=MountModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.mountDic.get(i.roleID),s=GlobalConfig.ins("MountsLevelConfig")[o.level];s&&UserWarn.ins().setBuyGoodsWarn(s.cost[0].id)},t.prototype.initData=function(){var e=MountModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.mountDic.get(i.roleID);e.nowSelectRoldData=i;var s=GlobalConfig.ins("MountsCommonConfig");if(this.m_LvUpRedPoint.visible=!1,o.level==s.lvMax?this.m_RightArrImg.visible=!1:this.m_RightArrImg.visible=!0,o){this.initAttrImg(o.level),this.m_MountAnim.setMountData(o);for(var n=[0,0,0,0],r=0;r<o.skill.length;r++)n[r]=o.skill[r];this.m_SkillData.replaceAll(n);for(var a=[],r=0;4>r;r++)o.equipList[r]?a.push(o.equipList[r]):a.push(null);this.m_EquipData.replaceAll(a),this.starList.starNum=o.star%10;var l=GlobalConfig.ins("MountsStarConfig")[o.star];0==l.exp||o.level==s.lvMax?(this.m_StarGroup.visible=!1,this.m_UpLayerBtn.visible=!1,this.m_FullLvLab.visible=!0,this.stopAutoUp()):10*o.level==o.star?(this.m_StarGroup.visible=!1,this.m_UpLayerBtn.visible=!0,this.m_FullLvLab.visible=!1,this.stopAutoUp()):(this.m_StarGroup.visible=!0,this.m_UpLayerBtn.visible=!1,this.m_FullLvLab.visible=!1),l&&(this.m_ExpBar.maximum=l.exp,this.m_ExpBar.value=o.exp);var h=GlobalConfig.ins("MountsLevelConfig")[o.level];if(h){var c=GlobalConfig.ins("ItemConfig")[h.cost[0].id];if(c){var u=[];u.push(h.cost[0]),u.push(h.cost[1]),UserBag.ins().setNeedItem(u,this.m_NeedItemGroup)}}o.isCanLvUp&&(this.m_LvUpRedPoint.visible=!0)}this.m_MountSkinBtn.redPoint.visible=e.checkMountSkinAllRedPoint(),this.m_LvUpAwardBtn.redPoint.visible=e.checkMoutnLvUpAwardRedPoint(),this.setArrImg(),this.setRoleRedPoint(),this.checkGuide()},t.prototype.initAttrImg=function(e){this.m_LeftArrImg.visible=!0,this.m_RightArrImg.visible=!0,0==e&&(this.m_LeftArrImg.visible=!1);var t=GlobalConfig.ins("MountsLevelConfig")[e+1];t||(this.m_RightArrImg.visible=!1);var i=MountModel.getInstance,o=this.m_RoleSelectPanel.getCurRole(),s=SubRoles.ins().getSubRoleByIndex(o),n=i.mountDic.get(s.roleID);n.level==e&&(this.m_MountAnim.totalPower.visible=!0),n.showLv==e?(this.m_FightLab.visible=!0,this.m_FightBtn.visible=!1):(this.m_FightLab.visible=!1,this.m_FightBtn.visible=!0)},t.prototype.onClickArrImg=function(e){switch(e.currentTarget){case this.m_LeftArrImg:this.m_RightArrImg.visible=!0,this.m_MountAnim.changeAnimLv(this.m_MountAnim.m_Lv-=1);break;case this.m_RightArrImg:this.m_MountAnim.m_Lv==this.m_MountAnim.m_NowLv&&(this.m_RightArrImg.visible=!1),this.m_MountAnim.changeAnimLv(this.m_MountAnim.m_Lv+=1)}this.setArrImg()},t.prototype.setArrImg=function(){var e=MountModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.mountDic.get(i.roleID),s=GlobalConfig.ins("MountsCommonConfig");1==this.m_MountAnim.m_Lv?this.m_LeftArrImg.visible=!1:this.m_LeftArrImg.visible=!0,this.m_MountAnim.m_Lv==s.lvMax||this.m_MountAnim.m_Lv>this.m_MountAnim.m_NowLv?this.m_RightArrImg.visible=!1:this.m_RightArrImg.visible=!0,o.level==this.m_MountAnim.m_Lv?(this.m_FightLab.visible=!0,this.m_MountAnim.totalPower.visible=!0):this.m_FightLab.visible=!1,o.showLv==this.m_MountAnim.m_Lv?(this.m_FightLab.visible=!0,this.m_FightBtn.visible=!1):(this.m_FightLab.visible=!1,this.m_MountAnim.m_Lv>this.m_MountAnim.m_NowLv?this.m_FightBtn.visible=!1:this.m_FightBtn.visible=!0)},t.prototype.UpdateContent=function(){this.stopAutoUp(),this.initData()},t.prototype.onClickMountSkinBtn=function(){ViewManager.ins().open(DressWin,0,3)},t.prototype.onClickLvUpAwardBtn=function(){ViewManager.ins().open(MountLvUpAwardWin)},t.prototype.onClickDanYaoBtn=function(){ViewManager.ins().open(MountDanYaoWin)},t.prototype.onClickMountStateBtn=function(){var e=MountModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.mountDic.get(i.roleID);ViewManager.ins().open(MountStateWin,o)},t.prototype.btnAutoUpClick=function(){this._isAutoUp?this.stopAutoUp():(this._isAutoUp=!0,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101096,TimerManager.ins().doTimer(600,0,this.autoUpStar,this))},t.prototype.stopAutoUp=function(){this._isAutoUp=!1,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101097,TimerManager.ins().remove(this.autoUpStar,this)},t.prototype.autoUpStar=function(){var e=MountModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.mountDic.get(i.roleID),s=GlobalConfig.ins("MountsStarConfig")[o.star];if(null==s&&0==s.exp)return this._isAutoUp=!1,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101097,TimerManager.ins().remove(this.autoUpStar,this),void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101098);var n=GlobalConfig.ins("MountsLevelConfig")[o.level],r=UserBag.ins().getBagGoodsCountById(0,n.cost[0].id),a=GameLogic.ins().actorModel.gold;if(r>=n.cost[0].count&&a>=n.cost[1].count)MountSproto.ins().sendGetMountStarUp(i.roleID,!1);else{if(a<n.cost[1].count)UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100323);else if(1==this.m_AutoBuyBox.selected){n.cost[0].count-r;if(Checker.Money(MoneyConst.yuanbao,ItemStoreConfig.getStoreByItemID(n.cost[0].id).price*n.cost[0].count,Checker.YUNBAO_FRAME))return void MountSproto.ins().sendGetMountStarUp(i.roleID,!0)}else UserWarn.ins().setBuyGoodsWarn(n.cost[0].id,n.cost[0].count-r);this._isAutoUp=!1,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101097,TimerManager.ins().remove(this.autoUpStar,this)}},t.prototype.onClickUpLvBtn=function(){GuideUtils.ins().next(this.m_UpLvBtn);var e=MountModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.mountDic.get(i.roleID),s=GlobalConfig.ins("MountsStarConfig")[o.star];if(null==s&&0==s.exp)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101098);var n=GlobalConfig.ins("MountsLevelConfig")[o.level],r=UserBag.ins().getBagGoodsCountById(0,n.cost[0].id),a=GameLogic.ins().actorModel.gold;if(r>=n.cost[0].count&&a>=n.cost[1].count)MountSproto.ins().sendGetMountStarUp(i.roleID,!1);else if(a<n.cost[1].count)UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100323);else if(1==this.m_AutoBuyBox.selected){n.cost[0].count-r;if(Checker.Money(MoneyConst.yuanbao,ItemStoreConfig.getStoreByItemID(n.cost[0].id).price*n.cost[0].count,Checker.YUNBAO_FRAME))return void MountSproto.ins().sendGetMountStarUp(i.roleID,!0)}else UserWarn.ins().setBuyGoodsWarn(n.cost[0].id,n.cost[0].count-r)},t.prototype.onClickUpLayer=function(){var e=this.m_RoleSelectPanel.getCurRole(),t=SubRoles.ins().getSubRoleByIndex(e);MountSproto.ins().sendGetMountLvUp(t.roleID)},t.prototype.onClickSkill=function(){var e=this.m_RoleSelectPanel.getCurRole(),t=SubRoles.ins().getSubRoleByIndex(e);ViewManager.ins().open(MountSkillWin,t.roleID)},t.prototype.setRoleRedPoint=function(){for(var e=MountModel.getInstance,t=(this.m_RoleSelectPanel.getCurRole(),SubRoles.ins().rolesModel),i=0;i<t.length;i++){var o=t[i];this.m_RoleSelectPanel.showRedPoint(o.roleID,e.checkRoleRedPoint(o))}},t.prototype.checkGuide=function(){var e=MountModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.mountDic.get(i.roleID);0==t&&1==o.level&&0==o.exp&&o.isCanLvUp&&0==this.isGuide&&(this.isGuide=!0,Setting.currPart=22,Setting.currStep=0,GuideUtils.ins().show(this.m_UpLvBtn,22,0))},t.prototype._showPYReddot=function(){for(var e=Object.keys(GlobalConfig.ins("mountsShuXingDanjcConfig")),t=0,i=e.length;i>t;t++)if(UserBag.ins().getBagItemById(parseInt(e[t])))return void(this.m_DanYaoBtn.redPoint.visible=!0);this.m_DanYaoBtn.redPoint.visible=!1},t.prototype.onChangeMountShow=function(){var e=MountModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.mountDic.get(i.roleID);o.showLv==this.m_MountAnim.m_Lv?(this.m_FightLab.visible=!0,this.m_FightBtn.visible=!1):(this.m_FightLab.visible=!1,this.m_MountAnim.m_Lv>this.m_MountAnim.m_NowLv?this.m_FightBtn.visible=!1:this.m_FightBtn.visible=!0)},t.prototype.onClickFight=function(){var e=(MountModel.getInstance,this.m_RoleSelectPanel.getCurRole()),t=SubRoles.ins().getSubRoleByIndex(e);MountSproto.ins().sendChageMountShow(t.roleID,this.m_MountAnim.m_Lv)},t}(BaseView);__reflect(MountMainPanel.prototype,"MountMainPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.MountMainPanel=MountMainPanel;var MountNewWin=function(e){function t(){var t=e.call(this)||this;return t.time=5,t.skinName="MountNewWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.m_MountAnim.m_RAndNameLab.stroke=1,this.m_MountAnim.m_RAndNameLab.strokeColor=16777215,this.m_MountAnim.m_Bg.visible=!1,this.m_MountAnim.m_NameGroup.y=230},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_MountData=e[0],this.time=5,this.addViewEvent(),this.addTimer(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.m_MountAnim.release(),this.removeTimer(),this.removeViewEvent()},t.prototype.addViewEvent=function(){this.AddClick(this.m_SureBtn,this.onClickClose)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){this.m_SureBtn.label=GlobalConfig.jifengTiaoyueLg.st100040+"（"+this.time+"）";var e=this.m_MountData;this.m_MountAnim.setMountData(e),this.m_MountAnim.m_Bg.visible=!1,this.m_MountAnim.totalPower.visible=!1,this.m_MountAnim.m_RAndNameLab.visible=!1,this.m_MountAnim.m_NameBg.visible=!1,this.m_MountAnim.playNewEff()},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.addTimer=function(){this.removeTimer(),TimerManager.ins().doTimer(1e3,0,this.refTime,this)},t.prototype.removeTimer=function(){TimerManager.ins().remove(this.refTime,this)},t.prototype.refTime=function(){this.time-=1,this.m_SureBtn.label=GlobalConfig.jifengTiaoyueLg.st100040+"（"+this.time+"）",this.time<0&&this.onClickClose()},t}(BaseEuiPanel);__reflect(MountNewWin.prototype,"MountNewWin"),ViewManager.ins().reg(MountNewWin,LayerManager.UI_Top),window.MountNewWin=MountNewWin;var MountSkillIconItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data,i=MountModel.getInstance;if(this.m_RedPoint.visible=!1,this.m_Mask.visible=!1,0>=t){var o=i.skillSoltDic.get(this.itemIndex+1);this.m_Cont.text=o.lv+GlobalConfig.jifengTiaoyueLg.st100674,this.m_Icon.source=o.skillId+"_png",this.m_Mask.visible=!0}else{var o=i.skillSoltDic.get(this.itemIndex+1);this.m_Icon.source=o.skillId+"_png",this.m_Cont.text=t+GlobalConfig.jifengTiaoyueLg.st100093;var s=i.checkSkillUp(o.skillId,t);s&&(this.m_RedPoint.visible=!0)}i.skillSelect==this.itemIndex?this.m_SelectImg.visible=!0:this.m_SelectImg.visible=!1},t}(eui.ItemRenderer);__reflect(MountSkillIconItem.prototype,"MountSkillIconItem"),window.MountSkillIconItem=MountSkillIconItem;var MountSkillWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MountSkillWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=MountSkillIconItem,this.m_SkillData=new eui.ArrayCollection,this.m_List.dataProvider=this.m_SkillData,this.m_LvUpBtn.label=GlobalConfig.jifengTiaoyueLg.st100296,this.m_LvFullLab.text=GlobalConfig.jifengTiaoyueLg.st100327,this.m_bg.init("MountSkillWin",GlobalConfig.jifengTiaoyueLg.st100671),this.m_AutoBuy.label=GlobalConfig.jifengTiaoyueLg.st101147},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];MountModel.getInstance.skillSelect=0,this.addViewEvent(),this.roleId=e[0],this.setData()},t.prototype.close=function(){MountModel.getInstance.skillSelect=-1,this.release()},t.prototype.release=function(){DisplayUtils.dispose(this.m_NewEff),this.m_NewEff=null,DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null,DisplayUtils.dispose(this.m_SkillEff),this.m_SkillEff=null,this.removeViewEvent()},t.prototype.addViewEvent=function(){this.m_NeedItem.addEvent(),this.m_List.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClickItem,this),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.setData),this.AddClick(this.m_LvUpBtn,this.onClickLvUpBtn),this.observe(MountEvt.MOUNT_DATAUPDATE_MSG,this.setData),this.observe(MountEvt.MOUNT_SKILLDATAUPDATE_MSG,this.playUpEff)},t.prototype.removeViewEvent=function(){this.m_NeedItem.removeEvent(),this.m_List.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClickItem,this)},t.prototype.setData=function(){var e=MountModel.getInstance,t=e.mountDic.get(this.roleId);if(this.m_LvUpGroup.visible=!1,this.m_LvFullLab.visible=!1,this.m_NoActivate.visible=!1,this.m_NextGroup.visible=!0,this.m_NextCont.visible=!1,this.m_NextAttrGroup.visible=!1,this.m_FightGroup.visible=!1,t){for(var i=[0,0,0,0],o=0;o<t.skill.length;o++)i[o]=t.skill[o];this.m_SkillData.replaceAll(i);var s=i[e.skillSelect];if(this.skillLv=s,0>=s){this.m_NowTips.text=GlobalConfig.jifengTiaoyueLg.st100676,this.m_NextTips.text=GlobalConfig.jifengTiaoyueLg.st100676;var n=e.skillSoltDic.get(e.skillSelect+1);n&&(this.m_NextCont.visible=!0,this.m_NextTips.text=GlobalConfig.jifengTiaoyueLg.st100677,this.m_NextCont.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100678,[n.lv]),this.m_NoActivate.visible=!0);var r=GlobalConfig.ins("MountsSkillsUpgradeConfig")[n.skillId][0];this.m_SkillNameLab.text=r.skillName+" Lv."+s,AttributeData.setAttrGroup(r.attrs,this.m_NowAttrGroup)}else{this.m_NowTips.text=GlobalConfig.jifengTiaoyueLg.st100260,this.m_NextTips.text=GlobalConfig.jifengTiaoyueLg.st100676;var n=e.skillSoltDic.get(e.skillSelect+1),a=GlobalConfig.ins("MountsSkillsUpgradeConfig")[n.skillId][s-1];if(a){this.m_SkillNameLab.text=a.skillName+" Lv."+s;var l=Math.floor(UserBag.getAttrPower(a.attrs));this.m_FightLab.text=GlobalConfig.jifengTiaoyueLg.st100306+l,this.m_FightGroup.visible=!0,AttributeData.setAttrGroup(a.attrs,this.m_NowAttrGroup);var h=[];h.push(a.cost);var c=a.cost.id,u=UserBag.ins().getBagGoodsCountById(0,c);this.itemId=c,this.m_NeedItem.setData(c,a.cost.count),this.itemNum=u,this.needNum=a.cost.count}var d=GlobalConfig.ins("MountsSkillsUpgradeConfig")[n.skillId][s];d?(this.m_NextAttrGroup.visible=!0,this.m_NextGroup.visible=!0,AttributeData.setAttrGroup(d.attrs,this.m_NextAttrGroup),this.m_LvUpGroup.visible=!0):(this.m_LvFullLab.visible=!0,this.m_NextGroup.visible=!1)}}},t.prototype.onClickLvUpBtn=function(){var e=MountModel.getInstance;if(this.m_AutoBuy.selected&&this.itemNum<this.needNum){var i=Shop.ins().getShopPrice(this.itemId,this.needNum);return void(Checker.Money(MoneyConst.yuanbao,i,Checker.YUNBAO_FRAME)&&(0==t.isTips?(t.isTips=!0,WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102089,[i,GlobalConfig.jifengTiaoyueLg.st100208]),function(){MountSproto.ins().sendGetMountSkillUp(this.roleId,e.skillSelect+1,!0)},this)):MountSproto.ins().sendGetMountSkillUp(this.roleId,e.skillSelect+1,!0)))}this.itemNum>=this.needNum&&this.skillLv>0?MountSproto.ins().sendGetMountSkillUp(this.roleId,e.skillSelect+1,!1):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100217)},t.prototype.onClickItem=function(e){var t=MountModel.getInstance;t.skillSelect=e.itemIndex,this.setData()},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.playUpEff=function(){var e=this.m_MainSkillGroup.getChildAt(MountModel.getInstance.skillSelect);e&&e instanceof eui.Group&&(this.m_SkillEff=ViewManager.ins().createEff(this.m_SkillEff,e,"eff_ui_iconUpgrade")),this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_icon"),this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_EffGroup,"eff_ui_success")},t.prototype.onClickGetBtn=function(){UserWarn.ins().setBuyGoodsWarn(this.itemId)},t.isTips=!1,t}(BaseEuiPanel);__reflect(MountSkillWin.prototype,"MountSkillWin"),ViewManager.ins().reg(MountSkillWin,LayerManager.UI_Popup),window.MountSkillWin=MountSkillWin;var MountStateWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MountStateWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100687,this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st100688,this.languageTxt1.text=GlobalConfig.jifengTiaoyueLg.st100689,this.languageTxt2.text=GlobalConfig.jifengTiaoyueLg.st100690,this.m_bg.init("MountStateWin",GlobalConfig.jifengTiaoyueLg.st100686)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_MountData=e[0],this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.m_MountAnim.release(),this.removeViewEvent()},t.prototype.addViewEvent=function(){},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=MountModel.getInstance,t=this.m_MountData;this.m_MountAnim.setMountData(t),AttributeData.setAttrGroup(t.attr,this.m_DanYaoGroup);var i=e.getMountAllEquipAttr(t);AttributeData.setAttrGroup(i,this.m_EquipGroup);var o=e.getMountStarLvAllAttr(t);AttributeData.setAttrGroup(o,this.m_LvUpGroup);var s=e.getMountSkinAttr();AttributeData.setAttrGroup(s,this.m_SkinGroup)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(MountStateWin.prototype,"MountStateWin"),ViewManager.ins().reg(MountStateWin,LayerManager.UI_Popup),window.MountStateWin=MountStateWin;var MountData=function(){function e(e){this.showLv=1,this.roleid=e.roleid,this.level=e.level,this.exp=e.exp,this.star=e.star,this.power=e.power,this.attr=e.attr,this.skill=e.skill,this.equipList=e.equipList,this.showLv=e.showLevel}return Object.defineProperty(e.prototype,"isCanLvUp",{get:function(){var e=GlobalConfig.ins("MountsStarConfig")[this.star];if(null==e&&0==e.exp)return!1;var t=GlobalConfig.ins("MountsLevelConfig")[this.level],i=UserBag.ins().getBagGoodsCountById(0,t.cost[0].id),o=GameLogic.ins().actorModel.gold;return i>=t.cost[0].count&&o>=t.cost[1].count?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equipAllPower",{get:function(){for(var e=MountModel.getInstance,t=SubRoles.ins().getSubRoleByIndex(this.roleid),i=0,o=0;o<this.equipList.length;o++)if(this.equipList[o].itemid>0){var s=e.getEquipLvAttr(this.equipList[o],t.job,o+1),n=e.getEquipStarAttr(this.equipList[o],t.job,o+1);i+=Math.floor(UserBag.getAttrPower(this.equipList[o].attr)),i+=Math.floor(UserBag.getAttrPower(s)),i+=Math.floor(UserBag.getAttrPower(n))}return i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equipLvAttr",{get:function(){for(var e=MountModel.getInstance,t=[],i=SubRoles.ins().getSubRoleByIndex(this.roleid),o=0;o<this.equipList.length;o++)if(this.equipList[o].itemid>0){var s=e.getEquipLvAttr(this.equipList[o],i.job,o+1);t.push(s)}for(var o=0;o<this.equipList.length;o++)if(this.equipList[o].itemid>0){var s=e.getEquipStarAttr(this.equipList[o],i.job,o+1);t.push(s)}var n=AttributeData.getAttr(t);return n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equipStarAttr",{get:function(){for(var e=MountModel.getInstance,t=[],i=SubRoles.ins().getSubRoleByIndex(this.roleid),o=0;o<this.equipList.length;o++)if(this.equipList[o].itemid>0){var s=e.getEquipStarAttr(this.equipList[o],i.job,o+1);t.push(s)}var n=AttributeData.getAttr(t);return n},enumerable:!0,configurable:!0}),e}();__reflect(MountData.prototype,"MountData"),window.MountData=MountData;var MountEvt=function(){function e(){}return e.MOUNT_DATAUPDATE_MSG="MOUNT_DATAUPDATE_MSG",e.MOUNT_AWARD_MSG="MOUNT_AWARD_MSG",e.MOUNT_DANYAO_MSG="MOUNT_DANYAO_MSG",e.MOUNT_CHANGESHOUW_MSG="MOUNT_CHANGESHOUW_MSG",e.MOUNT_SKILLDATAUPDATE_MSG="MOUNT_SKILLDATAUPDATE_MSG",e}();__reflect(MountEvt.prototype,"MountEvt"),window.MountEvt=MountEvt;var MountModel=function(){function e(){this.achieve=[],this.skillSelect=-1,this.m_LvMaxStarNum=null,this.mountDic=new Dictionary,this.m_SkillSoltUnlockDic=new Dictionary,this.m_EquipSoltUnlockDic=new Dictionary}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.setStar=function(e,t){for(var i=e.numChildren,o=0;i>o;o++)e.removeChildAt(0);if(0!=t){for(var s=Math.floor(t/5),n=t%5,o=0;s>o;o++){var r=new eui.Image;r.source="comp_23_23_1_png",r.scaleX=.8,r.scaleY=.8,e.addChild(r)}for(var o=0;n>o;o++){var r=new eui.Image;r.source="comp_23_23_3_png",r.scaleX=.8,r.scaleY=.8,e.addChild(r)}}},Object.defineProperty(e.prototype,"lvMaxStarNum",{get:function(){return null==this.m_LvMaxStarNum&&(this.m_LvMaxStarNum=GlobalConfig.ins("MountsCommonConfig").starPerLevel),this.m_LvMaxStarNum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skillSoltDic",{get:function(){if(this.m_SkillSoltUnlockDic.length<=0){var e=GlobalConfig.ins("MountsLevelConfig");for(var t in e){var i=e[t].skill_limit;if(i){var o={slot:e[t].skill_limit[0],lv:e[t].level,skillId:e[t].skill_limit[1]};this.m_SkillSoltUnlockDic.set(o.slot,o)}}}return this.m_SkillSoltUnlockDic},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equipSoltUnlockDic",{get:function(){if(this.m_EquipSoltUnlockDic.length<=0){var e=GlobalConfig.ins("MountsLevelConfig");for(var t in e){var i=e[t].equip_limit;i&&this.m_EquipSoltUnlockDic.set(i,e[t].level)}}return this.m_EquipSoltUnlockDic},enumerable:!0,configurable:!0}),e.prototype.getEquipColor=function(e){var t=GlobalConfig.jifengTiaoyueLg,i=[t.st101641,t.st101642,t.st101643,t.st101644,t.st101645,t.st101646];return i[e]},e.prototype.getEquipTypeName=function(e){var t="",i=GlobalConfig.jifengTiaoyueLg;switch(e){case MountEquipType.TYPE1:t=i.st101647;break;case MountEquipType.TYPE2:t=i.st101648;break;case MountEquipType.TYPE3:t=i.st101649;break;case MountEquipType.TYPE4:t=i.st101650}return t},e.prototype.getAllPower=function(e){var t=0;t+=e.equipAllPower;for(var i=this.getMountStarLvAllAttr(e),o=i,s=this.skillSoltDic.values,n=0;n<e.skill.length;n++){var r=GlobalConfig.ins("MountsSkillsUpgradeConfig")[s[n].skillId][e.skill[n]-1];r&&(o=AttributeData.getAttr([o,r.attrs]))}return t+=Math.floor(UserBag.getAttrPower(o))},e.prototype.getMountAllEquipAttr=function(e){for(var t=new Dictionary,i=0;i<e.equipList.length;i++)for(var o=e.equipList[i],s=0;s<o.attr.length;s++){var n=o.attr[s].type,r=t.get(n);r?r.value+=o.attr[s].value:t.set(n,o.attr[s])}return t.values.length>0?t.values:this.minAttr()},e.prototype.getMountStarLvAllAttr=function(e){var t=new Dictionary,i=GlobalConfig.ins("MountsStarConfig")[e.star],o=[],s=[];if(i)for(var n=0;n<i.attr.length;n++){var r={type:i.attr[n].type,value:i.attr[n].value};o.push(r)}var a=GlobalConfig.ins("MountsLevelConfig")[e.level];if(a)for(var n=0;n<a.attr.length;n++){var l={type:a.attr[n].type,value:a.attr[n].value};s.push(l)}for(var n=0;n<o.length;n++){var h=o[n].type,c=t.get(h);c?c.value+=o[n].value:t.set(h,o[n])}for(var n=0;n<s.length;n++){var h=s[n].type,c=t.get(h);c?c.value+=s[n].value:t.set(h,s[n])}return t.values},e.prototype.getMountSkinAttr=function(){new Dictionary;return this.minAttr()},e.prototype.minAttr=function(){var e=[],t={type:2,value:0},i={type:4,value:0},o={type:5,value:0},s={type:6,value:0};return e.push(t,i,o,s),e},e.prototype.getEquipLvAttr=function(e,t,i,o){var s,n=GlobalConfig.ins("MountsEquipGrowUpConfig")[t+"0"+i][e.itemid];s=o?o:e.level;var r=(1+Math.floor(s/5),AttributeData.getNowPower(0,s,0,5,n.price,n.basiccon,n.increasecon,n.slope,n.revisecon)),a=AttributeData.getAttrByPower(n.maxHp,n.maxAtk,n.maxDef,n.maxMagDef,r);return a},e.prototype.getEquipStarAttr=function(e,t,i,o){var s,n=GlobalConfig.ins("MountsEquipStarConfig")[t+"0"+i][e.itemid];s=o?o:e.star;var r=(1+Math.floor(s/5),AttributeData.getNowPower(0,s,0,5,n.price,n.basiccon,n.increasecon,n.slope,n.revisecon)),a=AttributeData.getAttrByPower(n.maxHp,n.maxAtk,n.maxDef,n.maxMagDef,r);return a},e.prototype.checkAllSkillCanUp=function(){for(var e=SubRoles.ins().rolesModel,t=0;t<e.length;t++){var i=this.checkRoleSkillUp(e[t]);if(i)return!0}return!1},e.prototype.checkRoleSkillUp=function(e){var t=this.mountDic.get(e.roleID);if(t)for(var i=[0,0,0,0],o=0;o<t.skill.length;o++){i[o]=t.skill[o];var s=this.skillSoltDic.get(o+1),n=this.checkSkillUp(s.skillId,i[o]);if(n)return!0}return!1},e.prototype.checkSkillUp=function(e,t){var i=GlobalConfig.ins("MountsSkillsUpgradeConfig")[e][t],o=GlobalConfig.ins("MountsSkillsUpgradeConfig")[e][t+1];if(i&&o){var s=i.cost.id,n=i.cost.count,r=UserBag.ins().getBagGoodsCountById(0,s);if(r>=n&&t>0)return!0}return!1},e.prototype.checkEquipIsOpen=function(e){return null!=e&&0==e.itemid?!0:!1},e.prototype.checkEquipIsHaveItem=function(e){return null!=e&&e.itemid>0?!0:!1},e.prototype.checkEquipIsLvUp=function(e,t){if(this.checkEquipIsHaveItem(e)){var i=GlobalConfig.ins("MountsEquipGrowUpConfig")[t.job+"0"+e.slot],o=i[e.itemid],s=UserBag.ins().getBagGoodsCountById(0,o.itemId1),n=1+Math.floor(e.level/5);if(s>=n&&e.level!=o.maxLevel)return!0}return!1},e.prototype.checkEquipIsStarUp=function(e,t){if(this.checkEquipIsHaveItem(e)){var i=GlobalConfig.ins("MountsEquipStarConfig")[t.job+"0"+e.slot],o=i[e.itemid],s=UserBag.ins().getBagGoodsCountById(0,o.itemId1),n=1+Math.floor(e.star/5);if(s>=n&&e.star!=o.maxLevel)return!0}return!1},e.prototype.checkEquipIsCanChange=function(e,t){if(this.checkEquipIsOpen(e)){var i=UserBag.ins().getBagGoodsByMountEquip(ItemType.MOUNTEQUIP,e.slot,t.job);if(i.length>0)return!0}return!1},e.prototype.checkEquipRedPoint=function(e,t){return this.checkEquipIsCanChange(e,t)||this.checkEquipIsLvUp(e,t)||this.checkEquipIsStarUp(e,t)?!0:!1},e.prototype.checkRoleEquipRedPoint=function(e){var t=this.mountDic.get(e.roleID);if(t)for(var i=0;4>i;i++)if(t.equipList[i]){var o=this.checkEquipRedPoint(t.equipList[i],e);if(o)return!0}return!1},e.prototype.checkAllEquipRedPoint=function(){for(var e=SubRoles.ins().rolesModel,t=0;t<e.length;t++){var i=e[t],o=this.checkRoleEquipRedPoint(i);if(o)return!0}return!1},e.prototype.checkAllRedPoint=function(){return Deblocking.Check(DeblockingType.TYPE_63,!0)&&(this.checkAllSkillCanUp()||this.checkAllEquipRedPoint()||this.checkAllMountLvUpRedPoint()||this.checkMountSkinAllRedPoint()||this.checkMoutnLvUpAwardRedPoint())?!0:!1},e.prototype.checkRoleRedPoint=function(e){return this.checkRoleEquipRedPoint(e)||this.checkRoleSkillUp(e)||this.checkRoleMountLvUpRedPoint(e)?!0:!1},e.prototype.checkAllMountLvUpRedPoint=function(){for(var e=0;3>e;e++){var t=this.mountDic.get(e);if(t&&t.isCanLvUp)return!0}return!1},e.prototype.checkRoleMountLvUpRedPoint=function(e){var t=this.mountDic.get(e.roleID);return t&&t.isCanLvUp?!0:void 0},e.prototype.checkMountSkinAllRedPoint=function(){for(var e=SubRoles.ins().rolesModel,t=0;t<e.length;t++){var i=e[t],o=this.checkMountSkinRedPoint(i.roleID);if(o)return!0}return!1},e.prototype.checkMountSkinRedPoint=function(e){var t=GlobalConfig.ins("ZhuangBanId"),i=5;for(var o in t)if(GameGlobal.rolesModel[e].job==t[o].roletype&&i==t[o].pos){var s=t[o].cost.itemId,n=t[o].cost.num,r=GameGlobal.dressmodel.getinfoById(t[o].id);if(r){if(UserBag.ins().getBagGoodsCountById(0,s)>=n&&r.dressLevel<5)return!0}else if(UserBag.ins().getBagGoodsCountById(0,s)>=n)return!0}return!1},e.prototype.checkMoutnLvUpAwardRedPoint=function(){for(var e=0;e<this.achieve.length;e++)if(0==this.achieve[e])return!0;return!1},e}();__reflect(MountModel.prototype,"MountModel");var MountEquipType;!function(e){e[e.TYPE1=1]="TYPE1",e[e.TYPE2=2]="TYPE2",e[e.TYPE3=3]="TYPE3",e[e.TYPE4=4]="TYPE4"}(MountEquipType||(MountEquipType={})),window.MountModel=MountModel;var MountSproto=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_ride_init_res,t.getMountInit),t.regNetMsg(S2cProtocol.sc_ride_uplevel_res,t.getMountLvUp),t.regNetMsg(S2cProtocol.sc_ride_upstar_res,t.getMountStarUp),t.regNetMsg(S2cProtocol.sc_ride_skillup_res,t.getMountSkillUp),t.regNetMsg(S2cProtocol.sc_ride_equip_uplevel_res,t.getMountEquipLvUp),t.regNetMsg(S2cProtocol.sc_ride_equip_upstar_res,t.getMountEquipStarUp),t.regNetMsg(S2cProtocol.sc_ride_equipchange_res,t.getMountEquipChange),t.regNetMsg(S2cProtocol.sc_ride_equipoff_res,t.getMountEquipOff),t.regNetMsg(S2cProtocol.sc_ride_eat_res,t.getMountDanYaoEat),t.regNetMsg(S2cProtocol.sc_ride_getaward_res,t.getMountGetaward),t.regNetMsg(S2cProtocol.sc_ride_change_res,t.getMountChangeShow),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getMountInit=function(e){for(var t=MountModel.getInstance,i=0;i<e.data.length;i++){var o=new MountData(e.data[i]);t.mountDic.set(e.data[i].roleid,o)}t.achieve=e.achieve,GameGlobal.MessageCenter.dispatch(MountEvt.MOUNT_DATAUPDATE_MSG)},t.prototype.getMountLvUp=function(e){var t=MountModel.getInstance,i=t.mountDic.get(e.roleid);i&&(i.level=e.level),this.sendGetMountInitMsg(),ViewManager.ins().open(MountNewWin,i),GameGlobal.MessageCenter.dispatch(MountEvt.MOUNT_DATAUPDATE_MSG);var o=EntityManager.ins().getMainRole(e.roleid);o&&(o.infoModel.mountsLevel=e.level,o.infoModel.mountsShowLv=e.level,o.updateModel())},t.prototype.getMountStarUp=function(e){var t=MountModel.getInstance,i=t.mountDic.get(e.roleid);
i&&(i.star=e.star,i.exp=e.exp),GameGlobal.MessageCenter.dispatch(MountEvt.MOUNT_DATAUPDATE_MSG)},t.prototype.getMountSkillUp=function(e){var t=MountModel.getInstance,i=t.mountDic.get(e.roleid);if(i){var o=i.skill[e.id-1];o?i.skill[e.id-1]=e.level:i.skill.push(e.level)}GameGlobal.MessageCenter.dispatch(MountEvt.MOUNT_DATAUPDATE_MSG),GameGlobal.MessageCenter.dispatch(MountEvt.MOUNT_SKILLDATAUPDATE_MSG)},t.prototype.getMountEquipLvUp=function(e){var t=MountModel.getInstance,i=t.mountDic.get(e.roleid);if(i)for(var o=0;o<i.equipList.length;o++)i.equipList[o].slot==e.slot&&(i.equipList[o].level=e.level);GameGlobal.MessageCenter.dispatch(MountEvt.MOUNT_DATAUPDATE_MSG)},t.prototype.getMountEquipStarUp=function(e){var t=MountModel.getInstance,i=t.mountDic.get(e.roleid);if(i)for(var o=0;o<i.equipList.length;o++)i.equipList[o].slot==e.slot&&(i.equipList[o].star=e.star);GameGlobal.MessageCenter.dispatch(MountEvt.MOUNT_DATAUPDATE_MSG)},t.prototype.getMountEquipChange=function(e){var t=MountModel.getInstance,i=t.mountDic.get(e.roleid);if(i)for(var o=0;o<i.equipList.length;o++)i.equipList[o].slot==e.slot&&(i.equipList[o].itemid=e.itemid,i.equipList[o].attr=e.attr);GameGlobal.MessageCenter.dispatch(MountEvt.MOUNT_DATAUPDATE_MSG)},t.prototype.getMountEquipOff=function(e){var t=MountModel.getInstance,i=t.mountDic.get(e.roleid);if(i)for(var o=0;o<i.equipList.length;o++)i.equipList[o].slot==e.slot&&(i.equipList[o].itemid=0,i.equipList[o].attr=[]);ViewManager.ins().close(MountEquipWin),GameGlobal.MessageCenter.dispatch(MountEvt.MOUNT_DATAUPDATE_MSG)},t.prototype.getMountDanYaoEat=function(e){var t=MountModel.getInstance,i=t.mountDic.get(e.roleid);i&&(i.attr=e.attr),ViewManager.ins().close(MountDanYaoUseWin),GameGlobal.MessageCenter.dispatch(MountEvt.MOUNT_DANYAO_MSG)},t.prototype.getMountGetaward=function(e){var t=MountModel.getInstance;t.achieve[e.id-1]=e.status,GameGlobal.MessageCenter.dispatch(MountEvt.MOUNT_AWARD_MSG)},t.prototype.getMountChangeShow=function(e){var t=MountModel.getInstance,i=t.mountDic.get(e.roleid);i.showLv=e.showLevel;var o=EntityManager.ins().getMainRole(e.roleid);o&&(o.infoModel.mountsShowLv=e.showLevel,o.updateModel()),GameGlobal.MessageCenter.dispatch(MountEvt.MOUNT_CHANGESHOUW_MSG)},t.prototype.sendGetMountInitMsg=function(){var e=new Sproto.cs_ride_init_req_request;this.Rpc(C2sProtocol.cs_ride_init_req,e)},t.prototype.sendGetMountLvUp=function(e){var t=new Sproto.cs_ride_uplevel_req_request;t.roleid=e,this.Rpc(C2sProtocol.cs_ride_uplevel_req,t)},t.prototype.sendGetMountStarUp=function(e,t){var i=new Sproto.cs_ride_upstar_req_request;i.roleid=e,i.isAuto=t,this.Rpc(C2sProtocol.cs_ride_upstar_req,i)},t.prototype.sendGetMountSkillUp=function(e,t,i){var o=new Sproto.cs_ride_skillup_req_request;o.roleid=e,o.id=t,o.isAuto=i,this.Rpc(C2sProtocol.cs_ride_skillup_req,o)},t.prototype.sendGetMountEquipLvUp=function(e,t){var i=new Sproto.cs_ride_equip_uplevel_req_request;i.roleid=e,i.slot=t,this.Rpc(C2sProtocol.cs_ride_equip_uplevel_req,i)},t.prototype.sendGetMountEquipStarUp=function(e,t){var i=new Sproto.cs_ride_equip_upstar_req_request;i.roleid=e,i.slot=t,this.Rpc(C2sProtocol.cs_ride_equip_upstar_req,i)},t.prototype.sendGetMountEquipChange=function(e,t,i){var o=new Sproto.cs_ride_equipchange_req_request;o.roleid=e,o.slot=t,o.handler=i,this.Rpc(C2sProtocol.cs_ride_equipchange_req,o)},t.prototype.sendGetMountEquipOff=function(e,t){var i=new Sproto.cs_ride_equipoff_req_request;i.roleid=e,i.slot=t,this.Rpc(C2sProtocol.cs_ride_equipoff_req,i)},t.prototype.sendGetMountEatDanYao=function(e,t,i){var o=new Sproto.cs_ride_eat_req_request;o.roleid=e,o.itemid=t,o.count=i,this.Rpc(C2sProtocol.cs_ride_eat_req,o)},t.prototype.sendGetMountGetAward=function(e){var t=new Sproto.cs_ride_getaward_req_request;t.id=e,this.Rpc(C2sProtocol.cs_ride_getaward_req,t)},t.prototype.sendChageMountShow=function(e,t){var i=new Sproto.cs_ride_change_req_request;i.roleid=e,i.lv=t,this.Rpc(C2sProtocol.cs_ride_change_req,i)},t}(BaseSystem);__reflect(MountSproto.prototype,"MountSproto"),window.MountSproto=MountSproto;var navigateToWxItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="navigateToItem",t.AddClick(t,t.onClick),t}return __extends(t,e),t.prototype.init=function(e){this._data=e,this.gameName.text=this._data.gameName,this.gameIcon.source=this._data.img+"_png"},t.prototype.updateState=function(e){this.redImage.visible=e},t.prototype.onClick=function(){console.log(">>>>>>>>>>>>>>跳转到"+this._data.gameName+"//路径是："+this._data.gamePath);var e=new Sproto.cs_exten_id_request;e.id=this._data.index,GameSocket.ins().Rpc(C2sProtocol.cs_exten_id,e,null,this),WxSdk.ins().navigateToMiniProgram(this._data.appid,this._data.gamePath)},t.prototype.getData=function(){return this._data},t}(BaseView);__reflect(navigateToWxItem.prototype,"navigateToWxItem"),window.navigateToWxItem=navigateToWxItem;var NewRoleWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100728,t.roleBody=["body103","body203","body303"],t.roleWeapon=["weapon112","weapon212","weapon312"],t.commonWindowBg=null,t.roleShowPanel=null,t.roleGroup=null,t.m_SelectJob=0,t.tips=null,t.openBtn=null,t.m_RoleGroup=[],t.skinName="OpenRoleSkin",t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.ICON_JOB_LIST=function(){var e=[["comp_192_92_01_png",GlobalConfig.jifengTiaoyueLg.st100111],["comp_192_92_02_png",GlobalConfig.jifengTiaoyueLg.st100112],["comp_192_92_03_png",GlobalConfig.jifengTiaoyueLg.st100113]];return e},t.prototype.initUI=function(){e.prototype.initUI.call(this);for(var t=SubRoles.ins().subRolesLen,i=0;t>i;i++){SubRoles.ins().getSubRoleByIndex(i)}this.m_RoleGroup=this.roleGroup.$children,StartGetUserInfo.isOne&&(this.tips.visible=!1),null==this.roleDressCfg&&(this.roleDressCfg=GlobalConfig.ins("roleAppearanceConfig"));var o=GlobalConfig.ins("NewRoleConfig")[1],s=GlobalConfig.ins("NewRoleConfig")[2];this.lockDesc.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100729,[o.zsLevel,s.zsLevel,o.vip,s.vip]),this.openBtn.label=GlobalConfig.jifengTiaoyueLg.st100391},t.prototype.setNeedTxt=function(){var e=SubRoles.ins().subRolesLen;if(e>=2){var t=GlobalConfig.ins("NewRoleConfig")[2];this.lockTips.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100730,[t.zsLevel,t.vip])}else{var i=GlobalConfig.ins("NewRoleConfig")[1];this.lockTips.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100730,[i.zsLevel,i.vip])}},t.prototype.open=function(){this.commonWindowBg.OnAdded(this),this.addTouchEvent(this,this.onTap,this.openBtn);for(var e=0,t=this.m_RoleGroup;e<t.length;e++){var i=t[e];this.AddClick(i,this._ItemClick)}this.setNeedTxt();var o=this._GetJobDict();this.m_SelectJob=0;for(var s=JobConst.ZhanShi;s<=JobConst.DaoShi;++s)if(!o[s]){this.m_SelectJob=2*s-1;break}this._SetSelect(this.m_SelectJob-1),this.curIdx=this.m_SelectJob-1},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.roleShowPanel.release()},t.prototype._ItemClick=function(e){var t=this.m_RoleGroup.indexOf(e.currentTarget);-1!=t&&t!=this.curIdx&&(this.curIdx=t,this._SetSelect(t))},t.prototype._GetJobDict=function(){for(var e={},t=0;t<SubRoles.ins().subRolesLen;++t)e[SubRoles.ins().getSubRoleByIndex(t).job]=!0;return e},t.prototype._SetSelect=function(e){var t=this._GetJobDict(),i=Math.floor(e/2)+1;return t[i]?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100731):(this.m_SelectJob=e+1,this.UpdateContent(),this.roleShowPanel.release(),void this.onupdateView(i,e%2,this.roleDressCfg[i].bodyAppearance,this.roleDressCfg[i].weaponAppearance,this.roleDressCfg[i].mountsAppearance))},t.prototype.onupdateView=function(e,t,i,o,s){var n=SubRoles.ins().getSubRoleByIndex(0);(i>0||o>0)&&(n.legendDress=null),this.roleShowPanel.creatAnim(n),this.roleShowPanel.setCharSexJob(t,e,i,o,s)},t.prototype.UpdateContent=function(){for(var e=this._GetJobDict(),i=t.ICON_JOB_LIST(),o=0;o<this.m_RoleGroup.length;++o){var s=Math.floor(o/2)+1,n=this.m_RoleGroup[o],r=e[s];n.jobName.source=i[s-1][0],n.select.visible=o+1==this.m_SelectJob,n.activation.visible=null!=r,n.txtName.text=i[s-1][1],n.imgBg.source=o%2==1?"comp_192_92_003_png":"comp_192_92_002_png"}},t.prototype.onTap=function(e){switch(e.target){case this.openBtn:var t=!1,i=SubRoles.ins().subRolesLen,e=GlobalConfig.ins("NewRoleConfig")[i];if(null!=e){var o,s="";e.zsLevel?(s=e.zsLevel+GlobalConfig.jifengTiaoyueLg.st100067,t=UserZs.ins().lv>=e.zsLevel,o=t?65280:16711680,s='<font color="#'+o.toString(16)+'">'+s+"</font>"):(s=e.level+GlobalConfig.jifengTiaoyueLg.st100093,t=GameLogic.ins().actorModel.level>=e.level,o=t?65280:16711680,s='<font color="#'+o.toString(16)+'">'+s+"</font>"),e.vip&&(t=t||UserVip.ins().lv>=e.vip,o=t?65280:16711680,s+=" "+GlobalConfig.jifengTiaoyueLg.st100732+' <font color="#'+o.toString(16)+'">VIP'+e.vip+"</font>")}if(!t&&this.m_SelectJob>=1&&this.m_SelectJob<=6)return void UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st100733+"|");GameLogic.ins().sendNewRole(Math.ceil(this.m_SelectJob/2),(this.m_SelectJob-1)%2),ViewManager.ins().close(this)}},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t}(BaseEuiPanel);__reflect(NewRoleWin.prototype,"NewRoleWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(NewRoleWin,LayerManager.UI_Main);var IOpenRoleItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(eui.Group);__reflect(IOpenRoleItem.prototype,"IOpenRoleItem"),window.NewRoleWin=NewRoleWin,window.IOpenRoleItem=IOpenRoleItem;var Notice=function(e){function t(){var t=e.call(this)||this;return t.sysId=PackageID.Notice,t.regNetMsg(S2cProtocol.sc_notice,t.doNotice),t.regNetMsg(S2cProtocol.sc_notice_records,t.doNoticeRecords),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.doNotice=function(e){var t=e.type,i=e.str,o=e.isNew;e.time;t==ChatType.Public?0==o&&ViewManager.ins().open(NoticeView).showNotice(i):t==ChatType.System&&0==o&&ViewManager.ins().open(NoticeView).showStaticNotice(i);var s=this._createChatItem(e);Chat.ins().postSysChatMsg(s)},t.prototype.doNoticeRecords=function(e){for(var t=0,i=e.records;t<i.length;t++){var o=i[t],s=this._createChatItem(o);Chat.ins().postSysChatMsg(s)}},t.prototype._createChatItem=function(e){var t=new ChatInfoData(null);return t.type=e.type,t.str=e.str,t.time=e.time,t},t}(BaseSystem);__reflect(Notice.prototype,"Notice"),window.Notice=Notice;var NoticeView=function(e){function t(){var t=e.call(this)||this;return t.list=[],t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.frame=new eui.Image,this.frame.source="base_4_4_03_png",this.frame.width=480,this.frame.height=35,this.frame.y=150,this.addChild(this.frame),this.frame.touchEnabled=!1,this.frame.visible=!1,this.touchChildren=!1,this.touchEnabled=!1,this.staticFrame=new eui.Image,this.staticFrame.source=this.frame.source,this.staticFrame.x=0,this.staticFrame.y=this.frame.y+this.frame.height+1,this.staticFrame.width=this.frame.width-this.staticFrame.x,this.staticFrame.height=30,this.staticFrame.alpha=.75,this.addChild(this.staticFrame),this.staticFrame.visible=!1,this.staticFrame.touchEnabled=!1,this.staticLab=new eui.Label,this.staticLab.size=20,this.staticLab.textAlign="center",this.staticLab.textColor=16745780,this.staticLab.width=this.staticFrame.width,this.staticLab.fontFamily="Microsoft YaHei",this.staticLab.x=this.staticFrame.x+4,this.staticLab.y=this.staticFrame.y+5,this.addChild(this.staticLab),this.staticLab.touchEnabled=!1,this.staticLab.visible=!1},t.prototype.showNotice=function(e){this.frame.visible=!0;var t=new eui.Label;t.size=20,t.textColor=16745780,t.fontFamily="Microsoft YaHei",t.x=this.frame.width,t.y=this.frame.y+7,t.textFlow=TextFlowMaker.generateTextFlow(e),this.addChild(t),this.list.push(t),1==this.list.length&&this.tweenLab()},t.prototype.tweenLab=function(){var e=this.list[0];if(e){var t=0-e.width,i=egret.Tween.get(e);i.to({x:t},25*e.width).call(function(){egret.Tween.removeTweens(e),DisplayUtils.removeFromParent(e),this.list.shift(),this.list.length<1?this.frame.visible=!1:this.tweenLab()},this)}},t.prototype.showStaticNotice=function(e){this.staticFrame.visible=!0,this.staticLab.visible=!0,this.staticLab.textFlow=TextFlowMaker.generateTextFlow(e),TimerManager.ins().doTimer(3e3,1,this.onTimerStopStaticNotice,this)},t.prototype.onTimerStopStaticNotice=function(){this.staticLab.visible=!1,this.staticFrame.visible=!1},t}(BaseEuiView);__reflect(NoticeView.prototype,"NoticeView"),ViewManager.ins().reg(NoticeView,LayerManager.UI_Tips),window.NoticeView=NoticeView;var OfflineRewardWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="OfflineRewardSkin",t.okBtn.label=GlobalConfig.jifengTiaoyueLg.st101176,GameGlobal.MessageCenter.addListener(MessageDef.OFFLIN_SHAREJONIN_SUCCESS,t.updateBtnState,t),!SdkMgr.isWxGame()&&t.btnGroup&&(t.ShareOkBtn.visible=!1,t.ShareGetBtn.visible=!1,t.btnGroup.horizontalCenter=115),t}return __extends(t,e),t.prototype.onMaskTap=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.closeBtn.visible=!1,this.rect.alpha=.6,this.okBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.ShareOkBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.ShareGetBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.update(e[0]),this.updateBtnState()},t.prototype.close=function(){this.okBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.ShareOkBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.ShareGetBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.update=function(e){var t=0,i=0;if(e.offlineData.length>0)for(var o=0;o<e.offlineData.length;o++){var s=e.offlineData[o];t+=s.exp,i+=s.gold}this.exp.text=""+(e.exp+t),this.money.text=""+(e.money+i),this.equipNum.text=""+(e.equipNum1+e.equipNum2)},t.prototype.onClick=function(e){switch(e.currentTarget){case this.okBtn:case this.closeBtn:var t=new Sproto.cs_offline_apply_req_request;t.type=1,GameSocket.ins().Rpc(C2sProtocol.cs_offline_apply_req,t,null,this),ViewManager.ins().close(this);break;case this.ShareOkBtn:WxSdk.ins().shareOffineReward=!0,WxSdk.ins().shareAppMessage();break;case this.ShareGetBtn:var i=new Sproto.cs_offline_apply_req_request;i.type=2,GameSocket.ins().Rpc(C2sProtocol.cs_offline_apply_req,i,null,this),ViewManager.ins().close(this),WxSdk.ins().shareOffineReward=!1,UserTips.InfoTip(GlobalConfig.jifengTiaoyueLg.st101962)}},t.prototype.updateBtnState=function(){this.m_Lab.visible=!1,SdkMgr.isWxGame()&&(this.m_Lab.visible=!0,WxSdk.ins().shareOffineReward?(this.ShareGetBtn.visible=!0,this.ShareOkBtn.visible=!1):(this.ShareGetBtn.visible=!1,this.ShareOkBtn.visible=!0))},t}(BaseEuiPanel);__reflect(OfflineRewardWin.prototype,"OfflineRewardWin"),ViewManager.ins().reg(OfflineRewardWin,LayerManager.UI_Popup),window.OfflineRewardWin=OfflineRewardWin;var OmGifBagItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_ItemBase.nameTxt.visible=!1},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;if(1==t.type){var i=GlobalConfig.ins("ItemConfig")[t.id];this.m_ItemName.text=i.name}else this.m_ItemName.text=MoneyManger.MoneyConstToName(t.id);t.isShowName=2,this.m_Cont.text=t.itemTips,this.m_ItemBase.data=t,this.m_ItemBase.dataChanged()},t}(eui.ItemRenderer);__reflect(OmGifBagItem.prototype,"OmGifBagItem"),window.OmGifBagItem=OmGifBagItem;var OmGifBagWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="OmGifBagWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_Cont.text=GlobalConfig.jifengTiaoyueLg.st101995,this.m_Cont2.text=GlobalConfig.jifengTiaoyueLg.st102000,this.m_Cont3.text=GlobalConfig.jifengTiaoyueLg.st102001,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101996,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101998,this.m_List.itemRenderer=OmGifBagItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData;for(var t=[],i=GlobalConfig.ins("ActivitySuperiorGiftConfig")[1],o=i.rewards,s=0;s<o.length;s++){var n={type:o[s].type,id:o[s].id,count:o[s].count,itemTips:i["itemTips"+(s+1)]};t.push(n)}this.listData.replaceAll(t)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.AddClick(this.m_MainBtn,this.onClick),this.AddClick(this.m_CloseTopBtn,this.onClickClose),this.observe(OmgGifBagEvt.OMGGIFBAG_UPDATE,this.setData)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=UserFb.ins().guanqiaID-1;0>e&&(e=0),this.m_Num.text=5*e+"";var t=OmGifBagModel.getInstance;t.isBuy(1)?t.isCanGetAward?this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100004:this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100981:this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100069},t.prototype.onClick=function(){var e=OmGifBagModel.getInstance;if(e.isBuy(1))e.isCanGetAward&&OmGifBagSproto.ins().sendGetRewar(1);else{var t=GlobalConfig.ins("ActivitySuperiorGiftConfig")[1];Main.isDebug?OmGifBagSproto.ins().sendText(1):Recharge.ins().TestOmGifBag(t)}},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(OmGifBagWin.prototype,"OmGifBagWin"),ViewManager.ins().reg(OmGifBagWin,LayerManager.UI_Popup),window.OmGifBagWin=OmGifBagWin;var OmgGifBagEvt=function(){function e(){}return e.OMGGIFBAG_UPDATE="OMGGIFBAG_UPDATE",e}();__reflect(OmgGifBagEvt.prototype,"OmgGifBagEvt"),window.OmgGifBagEvt=OmgGifBagEvt;var OmGifBagModel=function(){function e(){this.list=[]}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.getNum=function(e){var t=this.list[e-1];return t?t.num:0},e.prototype.isBuy=function(e){var t=this.list[e-1];return t?t.statu>0:!1},e.prototype.isCanGetAward=function(e){var t=this.list[e-1];return t?1==t.statu:!1},e.prototype.isShow=function(e){var t=GlobalConfig.ins("UniversalConfig").isOneGift;if(t){var i=this.list[e-1];if(i)return i.statu<2}return!1},e}();__reflect(OmGifBagModel.prototype,"OmGifBagModel"),window.OmGifBagModel=OmGifBagModel;var OmGifBagSproto=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_one_gift,t.omGifBagInfo),t.regNetMsg(S2cProtocol.sc_one_gift,t.omGifBagInfo),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.omGifBagInfo=function(e){OmGifBagModel.getInstance.list=e.list;var t=e.list[0];t&&2==t.statu&&ViewManager.ins().close(OmGifBagWin),MessageCenter.ins().dispatch(OmgGifBagEvt.OMGGIFBAG_UPDATE)},t.prototype.sendGetRewar=function(e){var t=new Sproto.cs_one_gift_rewards_request;t.index=e,this.Rpc(C2sProtocol.cs_one_gift_rewards,t)},t.prototype.sendText=function(e){var t=new Sproto.cs_one_gift_buy_test_request;t.index=e,this.Rpc(C2sProtocol.cs_one_gift_buy_test,t)},t}(BaseSystem);__reflect(OmGifBagSproto.prototype,"OmGifBagSproto"),window.OmGifBagSproto=OmGifBagSproto;var OnlineRewardsModel=function(e){function t(){var t=e.call(this)||this;return t._totalTime=0,t.rewardDataList=[],t.expSelectIndex=1,t.expDic=new Dictionary,t.isHave=!1,t.regNetMsg(S2cProtocol.sc_online_res,t.doOnlineRewardsList),t.regNetMsg(S2cProtocol.sc_online_reward_res,t.doGetOnlineRewardsResult),t.regNetMsg(S2cProtocol.sc_fieldexp_buff_res,t.getExpWelExpInit),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendOnlineRewardsList=function(){this.Rpc(C2sProtocol.cs_online_req,new Sproto.cs_online_req_request)},t.prototype.doOnlineRewardsList=function(e){this._totalTime=GameServer.serverTime-e.online,this.rewardDataList=e.data,GameGlobal.MessageCenter.dispatch(MessageDef.ONLINE_REWARDS_STATE)},Object.defineProperty(t.prototype,"totalTime",{get:function(){return GameServer.serverTime-this._totalTime},enumerable:!0,configurable:!0}),t.prototype.sendGetOnlineRewards=function(e){var t=new Sproto.cs_online_reward_req_request;t.id=e,this.Rpc(C2sProtocol.cs_online_reward_req,t)},t.prototype.doGetOnlineRewardsResult=function(e){e.ret>0&&(this.rewardDataList[e.ret-1]=onlineRewardState.ONLINETYPE1,GameGlobal.MessageCenter.dispatch(MessageDef.ONLINE_REWARDS_STATE))},t.prototype.onlineRewardComplete=function(){return this.rewardDataList.indexOf(onlineRewardState.ONLINETYPE0)>-1?!1:this.rewardDataList.indexOf(onlineRewardState.ONLINETYPE2)>-1?!1:!0},t.prototype.canOnlineReward=function(){return this.rewardDataList.indexOf(onlineRewardState.ONLINETYPE0)>-1},t.prototype.getOnlineNearlyTime=function(){var e=this.rewardDataList.indexOf(onlineRewardState.ONLINETYPE2),i="";if(e>-1){var o=GlobalConfig.ins("OnLineRewardConfig")[e+1];i=DateUtils.GetFormatSecond(60*o.time-t.ins().totalTime,DateUtils.TIME_FORMAT_1)}return i},t.prototype.getExpWelExpInit=function(e){this.expDic.clear(),this.isHave=!1;for(var t=0;t<e.data.length;t++){var i={id:t+1,time:e.data[t]};this.expDic.set(i.id,i)}for(var o=this.expDic.values,s=0;s<o.length;s++)if(o[s].time>0){this.expSelectIndex=o[s].id,this.isHave=!0;break}GameGlobal.MessageCenter.dispatch(MessageDef.EXPWEL_INIT_MSG)},t.prototype.sendExpWelExpInitMsg=function(){var e=new Sproto.cs_fieldexp_buff_req_request;this.Rpc(C2sProtocol.cs_fieldexp_buff_req,e)},t.prototype.sendExpWelExpApplyMsg=function(e){var t=new Sproto.cs_fieldexp_buff_apply_req_request;t.id=e,this.Rpc(C2sProtocol.cs_fieldexp_buff_apply_req,t)},t.prototype.sendExpWelExpFinishMsg=function(){var e=new Sproto.cs_fieldexp_buff_finish_req_request;this.Rpc(C2sProtocol.cs_fieldexp_buff_finish_req,e)},t.prototype.checkRedPoint=function(){if(0==this.isHave)for(var e=this.expDic.values,t=0;t<e.length;t++)if(0==e[t].time)return!0;return!1},t.VIPREWARD_ID=1,t}(BaseSystem);__reflect(OnlineRewardsModel.prototype,"OnlineRewardsModel"),MessageCenter.compile(OnlineRewardsModel),window.OnlineRewardsModel=OnlineRewardsModel;var OnlineRewardsWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101070,t.skinName="OnlineRewardsWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){this.configList=[];var e=GlobalConfig.ins("OnLineRewardConfig");for(var t in e)this.configList.push(e[t]);this.listTop.itemRenderer=OnlineRewardsItem},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e[0]||0),this.observe(MessageDef.ONLINE_REWARDS_STATE,this.UpdateContent),OnlineRewardsModel.ins().sendOnlineRewardsList(),TimerManager.ins().doTimer(1e3,0,this.updateTime,this),this.updateTime()},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),this.removeEvents(),this.removeObserve(),TimerManager.ins().remove(this.updateTime,this);for(var e=this.listTop.numChildren,t=0;e>t;t++){var i=this.listTop.getChildAt(t);i instanceof OnlineRewardsItem&&i.destroy()}},t.prototype.UpdateContent=function(){this.configList.sort(this.sortFun),this.listTop.dataProvider=new eui.ArrayCollection(this.configList)},t.prototype.sortFun=function(e,t){var i=OnlineRewardsModel.ins().rewardDataList[e.id-1],o=OnlineRewardsModel.ins().rewardDataList[t.id-1];return i==onlineRewardState.ONLINETYPE1?1:o!=onlineRewardState.ONLINETYPE1?-1:0},t.prototype.updateTime=function(){var e=DateUtils.GetFormatSecond(OnlineRewardsModel.ins().totalTime,DateUtils.TIME_FORMAT_9);this.onlineTime.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101071,[e])},t}(BaseEuiPanel);__reflect(OnlineRewardsWin.prototype,"OnlineRewardsWin",["ICommonWindowTitle"]),ViewManager.ins().reg(OnlineRewardsWin,LayerManager.UI_Main);var onlineRewardState;!function(e){e[e.ONLINETYPE0=0]="ONLINETYPE0",e[e.ONLINETYPE1=1]="ONLINETYPE1",e[e.ONLINETYPE2=2]="ONLINETYPE2"}(onlineRewardState||(onlineRewardState={}));var OnlineRewardsItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="AchieveItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseEffe,this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.btnGet.label=GlobalConfig.jifengTiaoyueLg.st101076,this.labelGo.text=GlobalConfig.jifengTiaoyueLg.st101077},t.prototype.OnClick=function(e){for(var t=0,i=0,o=this.data.reward;i<o.length;i++){var s=o[i];2==s.type&&(t+=s.count)}if(UserBag.ins().getSurplusCount()<t){var n=GlobalConfig.jifengTiaoyueLg.st101072;return void UserTips.ins().showTips(n)}OnlineRewardsModel.ins().sendGetOnlineRewards(this.data.id)},t.prototype.dataChanged=function(){var e=this.data,t=OnlineRewardsModel.ins().rewardDataList[e.id-1];this.currentState=t+1+"",this.list.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(e.reward)),this.labelInfo.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101073,[StringUtils.addColor(e.time+GlobalConfig.jifengTiaoyueLg.st101074,Color.Green)])),t==onlineRewardState.ONLINETYPE2&&(this.updateItemTime(),TimerManager.ins().doTimer(1e3,0,this.updateItemTime,this))},t.prototype.updateItemTime=function(){var e=DateUtils.GetFormatSecond(60*this.data.time-OnlineRewardsModel.ins().totalTime,DateUtils.TIME_FORMAT_1);this.labelUndo.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101075,[e])},t.prototype.destroy=function(){TimerManager.ins().remove(this.updateItemTime,this);for(var e=this.list.numChildren,t=0;e>t;t++){var i=this.list.getChildAt(t);i instanceof ItemBase&&i.destroy()}},t}(eui.ItemRenderer);__reflect(OnlineRewardsItem.prototype,"OnlineRewardsItem"),window.OnlineRewardsWin=OnlineRewardsWin,window.OnlineRewardsItem=OnlineRewardsItem;var OrangeEquipWin=function(e){function t(){var t=e.call(this)||this;return t.layerLevel=VIEW_LAYER_LEVEL.TOP,t.skinName="MainWinSkin",t.commonWindowBg.roleSelectPanel.y=135,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.orangeEquipPanel=new OrangeEquipPanel,this.orangeEquipPanel.name=GlobalConfig.jifengTiaoyueLg.st100630,this.commonWindowBg.AddChildStack(this.orangeEquipPanel),this.legendEquipPanel=new LegendEquipPanel,this.legendEquipPanel.name=GlobalConfig.jifengTiaoyueLg.st101855,this.commonWindowBg.AddChildStack(this.legendEquipPanel)},t.prototype.destoryView=function(){e.prototype.destoryView.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(UserBag.postHuntStore,this.setRedPoint),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.setRedPoint);var i=e[0]||0,o=e[1]||0;this.commonWindowBg.OnAdded(this,i,o),this.setRedPoint()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnRemoved()},t.openCheck=function(){return!0},t.prototype.setRedPoint=function(){UserEquip.ins().updateEquipHandler(),this.commonWindowBg.ShowTalRedPoint(0,UserEquip.ins().checkOrangeRedPointZy()),this.commonWindowBg.ShowTalRedPoint(1,LegendModel.ins().IsRedPointLegend())},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t}(BaseEuiPanel);__reflect(OrangeEquipWin.prototype,"OrangeEquipWin",["ICommonWindow"]),ViewManager.ins().reg(OrangeEquipWin,LayerManager.UI_Main),window.OrangeEquipWin=OrangeEquipWin;var PetAllAddWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetAllAddWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101100,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101101,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st101135,this.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st101136,this.m_bg.init("PetAllAddWin",GlobalConfig.jifengTiaoyueLg.st101134)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_PetData=e[0],this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.m_PetAnim.release()},t.prototype.addViewEvent=function(){},t.prototype.setData=function(){var e=PetModel.getInstance;this.m_FightNumLab.text=""+e.getAllPetPower(),this.m_ActivateNumLab.text=e.getAllPetActivate()+"",this.m_PetAnim.setPetData(this.m_PetData.petid),this.m_PetAnim.shPower(),this.m_Power.text=e.getAllPetPower()+"",AttributeData.setAttrGroup(e.getAllLvAttr(),this.m_LvAllAttrGroup),AttributeData.setAttrGroup(e.getAllStarAttr(),this.m_AllStarAttrGroup)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(PetAllAddWin.prototype,"PetAllAddWin"),ViewManager.ins().reg(PetAllAddWin,LayerManager.UI_Popup),window.PetAllAddWin=PetAllAddWin;var PetAllShowBtn=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent()},t.prototype.addEvent=function(){this.m_MainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data,i=PetModel.getInstance,o=GlobalConfig.ins("PetFettersConfig")[t];for(var s in o){var n=o[s];for(var r in n){var a=n[r];this.m_MainBtn.label=a.name;break}break}i.petAllShowIndex==this.itemIndex?this.m_MainBtn.enabled=!1:this.m_MainBtn.enabled=!0},t.prototype.onClick=function(){var e=PetModel.getInstance;e.petAllShowIndex=this.itemIndex,GameGlobal.MessageCenter.dispatch(PetEvt.PET_ALLSHOW_MSG)},t}(eui.ItemRenderer);__reflect(PetAllShowBtn.prototype,"PetAllShowBtn"),window.PetAllShowBtn=PetAllShowBtn;var PetAllShowItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data,i=PetModel.getInstance,o=i.petDic.get(t),s=GlobalConfig.ins("PetConfig")[t];s&&(this.m_Bg.source=ResDataPath.GetItemQualityName(s.quality),this.m_Icon.source=ResDataPath.getBossHeadImage(s.head)),0==o.level?this.m_Lv.visible=!1:(this.m_Lv.visible=!0,this.m_Lv.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[o.level])),1==o.isActivate?this.m_Mask.visible=!1:this.m_Mask.visible=!0},t}(eui.ItemRenderer);__reflect(PetAllShowItem.prototype,"PetAllShowItem"),window.PetAllShowItem=PetAllShowItem;var PetAllShowMainItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=PetAllShowItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,this.addViewEvent(),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101118,this.m_LookBtn.label=GlobalConfig.jifengTiaoyueLg.st101119},t.prototype.addViewEvent=function(){this.m_LookBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLook,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.m_Activate.visible=!1,this.m_LookBtn.visible=!1,this.m_PetTipsLab.visible=!1;var t=PetModel.getInstance,i=this.data,o=GlobalConfig.ins("PetFettersConfig")[PetModel.getInstance.petAllShowIndex+1][i],s=[];for(var n in o)s.push(parseInt(n));var r=o[s[0]];if(r){for(var a=[],l=0;l<r.pack.length;l++)a.push(r.pack[l]);this.listData.replaceAll(a);for(var h=!0,c=0,l=0;l<r.pack.length;l++){var u=t.petDic.get(r.pack[l]);0==u.isActivate&&(h=!1),c=u.star+c}for(var d=void 0,l=0;l<o.length;l++){var p=o[s[l]];
if(c<p.condition){d=o[s[l-1]],this.m_PetTipsLab.visible=!0,this.m_PetTipsLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101120,[p.condition]),this.m_PetTipsLab.textColor=Color.Green;break}}d||(this.m_PetTipsLab.visible=!0,this.m_PetTipsLab.text=GlobalConfig.jifengTiaoyueLg.st101121,this.m_PetTipsLab.textColor=Color.FontColor,d=o[s[s.length-1]]),this.m_PetAllShowData=d,0==h?(this.m_PetTipsLab.visible=!0,this.m_PetTipsLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101122,[a.length]),this.m_PetTipsLab.textColor=Color.Red,this.m_Activate.visible=!0,AttributeData.setAttrGroup(o[0].attr,this.m_AttrGroup)):(this.m_LookBtn.visible=!0,AttributeData.setAttrGroup(d.attr,this.m_AttrGroup))}},t.prototype.onClickLook=function(){ViewManager.ins().open(PetFetterWin,this.m_PetAllShowData)},t}(eui.ItemRenderer);__reflect(PetAllShowMainItem.prototype,"PetAllShowMainItem"),window.PetAllShowMainItem=PetAllShowMainItem;var PetAllShowPanel=function(e){function t(t){var i=e.call(this)||this;return i.skinName="PetAllShowPanelSkin",i.name=GlobalConfig.jifengTiaoyueLg.st101846,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101116,i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_List.itemRenderer=PetAllShowMainItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,this.m_BtnList.itemRenderer=PetAllShowBtn,this.btnListData=new eui.ArrayCollection,this.m_BtnList.dataProvider=this.btnListData},t.prototype.addViewEvent=function(){this.observe(PetEvt.PET_ALLSHOW_MSG,this.initData)},t.prototype.open=function(){this.addViewEvent(),this.initData()},t.prototype.close=function(){},t.prototype.release=function(){PetModel.getInstance.petAllShowIndex=0},t.prototype.initData=function(){this.m_Scroller.stopAnimation(),this.m_Scroller&&this.m_Scroller.viewport&&(this.m_Scroller.viewport.scrollV=0);var e=GlobalConfig.ins("PetFettersConfig"),t=[];for(var i in e)t.push(parseInt(i));this.btnListData.replaceAll(t);var o=[],s=e[PetModel.getInstance.petAllShowIndex+1];for(var i in s)o.push(parseInt(i));this.listData.replaceAll(o),this.listData.refresh(),egret.setTimeout(function(){this.m_Scroller&&this.m_Scroller.viewport&&0!=this.m_Scroller.viewport.scrollV&&(this.m_Scroller.viewport.scrollV=0)},this,100),this.m_Power.text=PetModel.getInstance.getAllPetPower()},t.prototype.onClickLook=function(){ViewManager.ins().open(PetFetterWin,this.m_PetAllShowData)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(PetAllShowPanel.prototype,"PetAllShowPanel",["ICommonWindowTitle"]),window.PetAllShowPanel=PetAllShowPanel;var PetAllShowStatePanel=function(e){function t(t){var i=e.call(this)||this;return i.mWindowHelpId=33,i.name=GlobalConfig.jifengTiaoyueLg.st101116,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101116,i.skinName="PetAllShowStatePanelSkin",i.touchEnabled=!1,i.m_Lan0.text=GlobalConfig.jifengTiaoyueLg.st101847,i.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101848,i.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101850,i.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100260,i.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st100676,i.m_Lan5.text=GlobalConfig.jifengTiaoyueLg.st101849,i.m_Lab.text=GlobalConfig.jifengTiaoyueLg.st100022,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.addViewEvent=function(){this.AddClick(this.m_MainBtn,this.onClickMainBtn),this.observe(PetEvt.PET_ALLSHOWSTATE_MSG,this.lvUp)},t.prototype.open=function(){this.addViewEvent(),this.initData()},t.prototype.close=function(){DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null,DisplayUtils.dispose(this.m_NewEff),this.m_NewEff=null},t.prototype.release=function(){},t.prototype.lvUp=function(){this.initData(),this.playUpEff()},t.prototype.initData=function(){var e=PetModel.getInstance;this.m_Bar.maximum=e.petMaxNum,this.m_Bar.value=e.nowPetHaveNum;var t=GlobalConfig.ins("illustratedConfig")[e.petAllShowLv],i=GlobalConfig.ins("illustratedConfig")[e.petAllShowLv+1];if(i){var o=AttributeData.getAttr([e.allResonanceAttr(),e.nowAllShowPetAttr(.01*i.additionRatio)]);AttributeData.setAttrGroup(o,this.m_StateGroup2),this.m_LeftAttrGroup.horizontalCenter=-128,this.m_RightGroup.visible=!0,this.m_AttrImg.visible=!0,this.m_MainBtnGroup.visible=!0,this.m_FullImg.visible=!1,this.m_RightLab.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101851,[i.additionRatio]))}else this.m_RightGroup.visible=!1,this.m_AttrImg.visible=!1,this.m_LeftAttrGroup.horizontalCenter=0,this.m_MainBtnGroup.visible=!1,this.m_FullImg.visible=!0;if(t){this.m_Cont.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101852,[t.additionRatio])),this.m_LefLab.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101851,[t.additionRatio])),UserBag.ins().setNeedItem([t.Cost],this.m_NeedItemGroup),this.starList.starNum=e.petAllShowLv;var s=e.petNowAllShowAttr();AttributeData.setAttrGroup(s,this.m_StateGroup1),AttributeData.setAttrGroup(s,this.m_StateGroup0),this.m_Power.text=e.getAllPetPower()}},t.prototype.onClickMainBtn=function(){var e=PetModel.getInstance,t=GlobalConfig.ins("illustratedConfig")[e.petAllShowLv],i=GameLogic.ins().actorModel.yb;i>=t.Cost.count?PetSproto.ins().sendPetAllShowLvUp():UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008)},t.prototype.UpdateContent=function(){},t.prototype.playUpEff=function(){this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_success"),this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_EffGroup,"eff_ui_upgrade")},t}(BaseView);__reflect(PetAllShowStatePanel.prototype,"PetAllShowStatePanel",["ICommonWindowTitle"]),window.PetAllShowStatePanel=PetAllShowStatePanel;var PetAllShowWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101116,t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.petAllShowStatePanel=new PetAllShowStatePanel,this.commonWindowBg.AddChildStack(this.petAllShowStatePanel),this.petAllShowPanel=new PetAllShowPanel,this.petAllShowPanel.name=GlobalConfig.jifengTiaoyueLg.st101846,this.commonWindowBg.AddChildStack(this.petAllShowPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e&&e[0]),this.updateRedPoint()},t.prototype.close=function(){this.petAllShowPanel.release(),this.removeObserve(),this.commonWindowBg.OnRemoved()},t.prototype.updateRedPoint=function(){},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(PetAllShowWin.prototype,"PetAllShowWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(PetAllShowWin,LayerManager.UI_Main),window.PetAllShowWin=PetAllShowWin;var PetAnim=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetAnimSkin",t}return __extends(t,e),t.prototype.setPetData=function(e){var t=PetModel.getInstance,i=t.petDic.get(e),o=GlobalConfig.ins("PetConfig")[i.petid];if(i&&o){var s=void 0;s=0==i.level?1:i.level,this.m_RAndNameLab.textFlow=[{text:t.getRName(o.quality)+" ",style:{textColor:t.getQualityColor(o.quality)}},{text:"Lv."+s+" "},{text:i.name}],t.setStar(this.m_StarGroup,i.star);var n=0;if(0==i.power){var r=t.getPetAttr(i.petid,1,0);n=Math.floor(UserBag.getAttrPower(r)),this.m_Power.text=n}else this.m_Power.text=i.power;this.playEff(o.avatar+"_3"+EntityAction.STAND,ResAnimType.TYPE2),i.isActivate?this.m_Activate.visible=!1:this.m_Activate.visible=!0;var a=GlobalConfig.ins("MonstersConfig")[o.monsterId];a&&(this.m_ElementImg.source=ResDataPath.GetElementImgName(a.elementType))}},t.prototype.release=function(){DisplayUtils.dispose(this.m_Eff),this.m_Eff=null,DisplayUtils.dispose(this.m_NewEff),this.m_NewEff=null},t.prototype.shPower=function(e){void 0===e&&(e=!1),e?this.m_Power.visible=!0:this.m_Power.visible=!1},t.prototype.playEff=function(e,t){this.m_Eff=ViewManager.ins().createEff(this.m_Eff,this.m_AnimGroup,e,-1,t)},t.prototype.playNewEff=function(){this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_EffGroup,"eff_ui_activation",-1)},t}(eui.Component);__reflect(PetAnim.prototype,"PetAnim"),window.PetAnim=PetAnim;var PetAttachIconItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent()},t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=PetModel.getInstance,i=this.data;this.m_AddImg.visible=!1,this.m_AttcahTips.visible=!1;var o=this.itemIndex,s=GlobalConfig.ins("PetAdhereConfig")[t.attachSelectRoleId+1];if(s){var n=s[o];if(n)if(this.m_AttcahNumLab.text=100*n.valuePercent+"%"+GlobalConfig.jifengTiaoyueLg.st101406,7==n.conditionkind)this.m_AttcahTips.text=GlobalConfig.jifengTiaoyueLg.st101407;else if(2==n.conditionkind){var r=n.tips,a=r.split("%s",2),l=void 0;l=n.conditionnum>=1e3?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[n.conditionnum/1e3]):LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[n.conditionnum]),this.m_AttcahTips.text=a[0]+l+a[1]}else{var r=n.tips,a=r.split("%s",2);this.m_AttcahTips.text=a[0]+n.conditionnum+a[1]}}if(0==i)this.m_PetIconBase.setNot(),this.m_AddImg.visible=!0,this.m_AttcahTips.visible=!0,this.m_AttcahTips.text=GlobalConfig.jifengTiaoyueLg.st101156;else if(0>i)this.m_PetIconBase.setShuo(!0),this.m_AttcahTips.visible=!0;else if(i>0){var h=t.petDic.get(i);this.m_PetIconBase.setData(h.petid,h.level)}t.attachSelectIndex==this.itemIndex?this.m_SelectImg.visible=!0:this.m_SelectImg.visible=!1;var c=t.checkAttactRedPoint(t.attachSelectRoleId,this.itemIndex);c?this.m_RedPoint.visible=!0:this.m_RedPoint.visible=!1},t.prototype.onClick=function(){var e=PetModel.getInstance;e.attachSelectIndex=this.itemIndex,GameGlobal.MessageCenter.dispatch(PetEvt.PET_ATTACH_MSG)},t}(eui.ItemRenderer);__reflect(PetAttachIconItem.prototype,"PetAttachIconItem"),window.PetAttachIconItem=PetAttachIconItem;var PetAttachItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent()},t.prototype.addEvent=function(){this.m_AttachBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickAttachBtn,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=PetModel.getInstance,i=this.data;switch(this.m_AttachBtn.visible=!0,this.m_AttachLab.y=65,this.m_Rect.visible=!1,i.inRoleId){case-1:this.m_AttachLab.text="",1==i.isFight?(this.m_AttachBtn.visible=!0,this.m_AttachBtn.label=GlobalConfig.jifengTiaoyueLg.st101160,i.isBeiZhan?this.m_AttachLab.text=GlobalConfig.jifengTiaoyueLg.st101965:this.m_AttachLab.text=GlobalConfig.jifengTiaoyueLg.st101151):(this.m_AttachBtn.visible=!0,this.m_AttachBtn.label=GlobalConfig.jifengTiaoyueLg.st101160);break;default:var o=SubRoles.ins().getSubRoleByIndex(i.inRoleId),s=void 0;switch(o.job){case JobConst.ZhanShi:s=Role.jobNumberToName(JobConst.ZhanShi);break;case JobConst.FaShi:s=Role.jobNumberToName(JobConst.FaShi);break;case JobConst.DaoShi:s=Role.jobNumberToName(JobConst.DaoShi)}this.m_AttachLab.text=GlobalConfig.jifengTiaoyueLg.st101159+s,this.m_AttachBtn.label=GlobalConfig.jifengTiaoyueLg.st101160,t.attachSelectIndex==i.inRoleSlot&&t.attachSelectRoleId==i.inRoleId&&(this.m_AttachBtn.label=GlobalConfig.jifengTiaoyueLg.st100313,this.m_Rect.visible=!0)}this.m_PetIconBase.setData(i.petid,0),this.m_Name.text=i.name,this.m_Lv.text="Lv."+i.level},t.prototype.onClickAttachBtn=function(){var e=this.data,t=PetModel.getInstance;t.attachSelectIndex==e.inRoleSlot&&t.attachSelectRoleId==e.inRoleId?PetSproto.ins().sendPetAttachMsg(t.attachSelectRoleId,0,t.attachSelectIndex+1):PetSproto.ins().sendPetAttachMsg(t.attachSelectRoleId,e.petid,t.attachSelectIndex+1)},t}(eui.ItemRenderer);__reflect(PetAttachItem.prototype,"PetAttachItem"),window.PetAttachItem=PetAttachItem;var PetAttachPanel=function(e){function t(t){var i=e.call(this)||this;return i.name=GlobalConfig.jifengTiaoyueLg.st101090,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101090,i.skinName="PetAttachPanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_List.itemRenderer=PetAttachIconItem,this.m_ListData=new eui.ArrayCollection,this.m_List.dataProvider=this.m_ListData,this.getItem.text=GlobalConfig.jifengTiaoyueLg.st100418,UIHelper.SetLinkStyleLabel(this.getItem),this.m_NoAddLab.text=GlobalConfig.jifengTiaoyueLg.st101156,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101157,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100218,this.m_NeedLab.text=GlobalConfig.jifengTiaoyueLg.st101158,this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101155},t.prototype.addViewEvent=function(){this.observe(PetEvt.PET_ATTACH_MSG,this.initData),this.observe(MessageDef.BAG_HAS_ITEM_CAN_USE,this.initData),this.AddClick(this.m_MainBtn,this.onClickMainBtn),this.AddClick(this.getItem,this.onClickGetLab1)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.m_Scroller.stopAnimation(),this.m_Scroller&&this.m_Scroller.viewport&&(this.m_Scroller.viewport.scrollV=0),this.addViewEvent(),this.m_RoleSelectPanel.y=130,this.initData()},t.prototype.close=function(){this.removeEvent(),this.m_RoleSelectPanel.y=158},t.prototype.release=function(){DisplayUtils.dispose(this.m_NewEff),this.m_NewEff=null,DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null,DisplayUtils.dispose(this.m_SkillEff),this.m_SkillEff=null,this.removeEvent()},t.prototype.onClickGetLab1=function(){this.getItemId&&UserWarn.ins().setBuyGoodsWarn(this.getItemId)},t.prototype.initData=function(){var e=PetModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.petAttachData.get(i.roleID);if(e.attachSelectRoleId=i.roleID,this.m_NeedLab.visible=!1,this.m_NeedItemGroup.visible=!1,this.getItem.visible=!1,this.m_MainBtn.visible=!1,this.m_MainAttrGroup.visible=!1,this.m_NoAddLab.visible=!1,this.m_NoActivate.visible=!1,o){for(var s=[],n=0;n<o.petid.length;n++)s.push(o.petid[n]);this.m_ListData.replaceAll(s);var r=o.petid[e.attachSelectIndex];this.petId=r;var a=GlobalConfig.ins("PetAdhereConfig")[i.roleID+1],l=a[e.attachSelectIndex];if(this.m_tipsTxt.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101152,[100*l.valuePercent]),0>r){if(this.m_NoActivate.visible=!0,this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101153,a&&l)if(this.needType=l.conditionkind,7==l.conditionkind){this.m_NeedItemGroup.visible=!0,this.getItem.visible=!0,this.m_MainBtn.visible=!0;var h=GlobalConfig.ins("ItemConfig")[l.conditionnum.id];this.getItemId=l.conditionnum.id,h&&(this.m_ItemImg.source=h.icon+"_png");var c=UserBag.ins().getBagGoodsCountById(0,l.conditionnum.id);this.m_ItemNum.text=c+"/"+l.conditionnum.count,this.itemNum=c,this.needItemNum=l.conditionnum.count}else if(2==l.conditionkind){this.m_NeedLab.visible=!0;var u=l.tips,d=u.split("%s",2),p=void 0;p=l.conditionnum>=1e3?l.conditionnum/1e3+GlobalConfig.jifengTiaoyueLg.st100067:l.conditionnum+GlobalConfig.jifengTiaoyueLg.st100093,this.m_NeedLab.text=d[0]+p+d[1]}else{this.m_NeedLab.visible=!0;var u=l.tips,d=u.split("%s",2);this.m_NeedLab.text=d[0]+l.conditionnum+d[1]}}else 0==r?(this.m_NoAddLab.visible=!0,this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101154,this.m_MainBtn.visible=!0):(this.m_MainAttrGroup.visible=!0,this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100318,this.m_MainBtn.visible=!0);var f=PetModel.getInstance.petDic.get(r),g=[];if(f){for(var _=0;_<f.attr.length;_++){var m={type:f.attr[_].type,value:Math.floor(f.attr[_].value*l.valuePercent)};g.push(m)}AttributeData.setAttrGroup(g,this.m_AttrGroup)}}this.setRoleRedPoint()},t.prototype.setRoleRedPoint=function(){for(var e=PetModel.getInstance,t=(this.m_RoleSelectPanel.getCurRole(),SubRoles.ins().rolesModel),i=0;i<t.length;i++){var o=t[i];this.m_RoleSelectPanel.showRedPoint(o.roleID,e.checkRoleAttactRedPoint(o.roleID))}},t.prototype.UpdateContent=function(){this.initData()},t.prototype.onClickMainBtn=function(){var e=PetModel.getInstance;if(this.petId<0){if(7==this.needType)if(this.itemNum>=this.needItemNum){var t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t);PetSproto.ins().sendPetAttachUnlock(i.roleID,e.attachSelectIndex+1),this.playUpEff()}else UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100217)}else{var t=this.m_RoleSelectPanel.getCurRole();e.attachSelectRoleId=t,ViewManager.ins().open(PetAttachWin)}},t.prototype.playUpEff=function(){var e=this.m_MianEffGroup.getChildAt(PetModel.getInstance.attachSelectIndex);e&&e instanceof eui.Group&&(this.m_SkillEff=ViewManager.ins().createEff(this.m_SkillEff,e,"eff_ui_iconUpgrade")),this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_icon"),this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_EffGroup,"eff_ui_success")},t}(BaseView);__reflect(PetAttachPanel.prototype,"PetAttachPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.PetAttachPanel=PetAttachPanel;var PetAttachWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetAttachWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=PetAttachItem,this.m_ListData=new eui.ArrayCollection,this.m_List.dataProvider=this.m_ListData,this.m_bg.init("PetAttachWin",GlobalConfig.jifengTiaoyueLg.st101090)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){},t.prototype.addViewEvent=function(){this.observe(PetEvt.PET_ATTACH_MSG,this.setData)},t.prototype.setData=function(){var e=PetModel.getInstance,t=e.getAttachList();this.m_ListData.replaceAll(t)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(PetAttachWin.prototype,"PetAttachWin"),ViewManager.ins().reg(PetAttachWin,LayerManager.UI_Popup),window.PetAttachWin=PetAttachWin;var PetBattlePop=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetBattlePopSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101849,this.item1.numPoint=0,this.item2.numPoint=1,this.item3.numPoint=2},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_bg.init("PetBattlePop",GlobalConfig.jifengTiaoyueLg.st101162),MessageCenter.ins().addListener(PetEvt.PET_DATAUPDATE_MSG,this._updateData,this),this._updateView(),this.checkGuide()},t.prototype._updateView=function(){for(var e=PetModel.getInstance,t=e.getNowSelectPetData(),i=PetModel.getInstance.battlePetList,o=0;o<i.length;o++){var s=this["item"+(o+1)];s.init(o,t.petid,e.battlePetList[o])}},t.prototype._updateData=function(e){this.checkGuideEnd(),null!=e&&this._updateView()},t.prototype.close=function(){this.item1.release(),this.item2.release(),this.item3.release(),MessageCenter.ins().removeListener(PetEvt.PET_DATAUPDATE_MSG,this._updateData,this),this.item1.m_PetBattleBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.checkGuide=function(){var e=PetModel.getInstance;e.checkGuideBattle()&&e.selectIndex==e.guidePeiId&&17==Setting.currPart&&1==Setting.currStep&&(this.item1.m_PetBattleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),GuideUtils.ins().show(this.item1.m_PetBattleBtn,17,1))},t.prototype.checkGuideEnd=function(){var e=PetModel.getInstance;e.selectIndex==e.guidePeiId&&17==Setting.currPart&&2==Setting.currStep&&(this.m_bg.closeButtomBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEnd,this),GuideUtils.ins().show(this.m_bg.closeButtomBtn,17,2))},t.prototype.onClick=function(){GuideUtils.ins().next(this.item1.m_PetBattleBtn),this.item1.m_PetBattleBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClickEnd=function(){GuideUtils.ins().next(this.m_bg.closeButtomBtn),this.m_bg.closeButtomBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickEnd,this),MessageCenter.ins().dispatch(PetEvt.PET_GUIDE_MSG_END)},t}(BaseEuiPanel);__reflect(PetBattlePop.prototype,"PetBattlePop"),ViewManager.ins().reg(PetBattlePop,LayerManager.UI_Popup),window.PetBattlePop=PetBattlePop;var PetBattlePopItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetBattlePopItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_PetBattleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBattle,this),this.touchEnabled=!1,this.m_AnimGroup.touchEnabled=!1,this.m_AnimGroup.touchChildren=!1},t.prototype.init=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._index=e[0],this._selectId=e[1],this._curId=e[2],this._updateView()},t.prototype._updateView=function(){var e=!0;if(this.numPoint>0){var t=GlobalConfig.ins("PetBasicConfig").prepare,i=t[this.numPoint-1];if(1==i.type){var o=GameLogic.ins().actorModel.level;o>=i.limit?e=!0:(e=!1,this.m_TipsTxt.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101963,[i.limit]))}else if(2==i.type){var s=UserZs.ins()?UserZs.ins().lv:0;s>=i.limit?e=!0:(e=!1,this.m_TipsTxt.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101964,[i.limit]))}}this.m_nameBg.visible=!1,this.m_TipsTxt.visible=!e,this.isOpen=e,e?(this.m_PetBattleBtn.visible=!0,this._curId<=0?this.m_PetBattleBtn.label=GlobalConfig.jifengTiaoyueLg.st101164:this._curId==this._selectId?this.m_PetBattleBtn.label=GlobalConfig.jifengTiaoyueLg.st100313:this.m_PetBattleBtn.label=GlobalConfig.jifengTiaoyueLg.st101165):this.m_PetBattleBtn.visible=!1;var n=GlobalConfig.ins("PetConfig")[this._curId];this.m_TopImg.source="comp_96_49_"+(this._index+1)+"_png",e&&n&&0!=this._curId?(this.m_PetName.text=n.name,this.initMc(),this._mc.loadUrl(ResDataPath.GetMonsterBodyPath(n.avatar+"_3"+EntityAction.STAND),!0,-1),this._mc.visible=!0,this.m_nameBg.visible=!0,this.m_MainImg.visible=!1):(this.initMc(),this._mc.visible=!1,this.m_PetName.text="",this.m_MainImg.visible=!0)},t.prototype.release=function(){DisplayUtils.dispose(this._mc),this._mc=null},t.prototype.onBattle=function(){this.isOpen&&this._goBattle()},t.prototype._goBattle=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData();e.isAttachPet(this._selectId)?WarnWin.show(GlobalConfig.jifengTiaoyueLg.st101167,function(){PetSproto.ins().sendFightPet(t.petid,this._index)},this):PetSproto.ins().sendFightPet(t.petid,this._index)},t.prototype.initMc=function(){this._mc||(this._mc=new MovieClip,this.m_AnimGroup.addChild(this._mc),this._mc.x=this.m_AnimGroup.width/2,this._mc.y=this.m_AnimGroup.height/2,this._mc.touchEnabled=!1)},t}(eui.Component);__reflect(PetBattlePopItem.prototype,"PetBattlePopItem"),window.PetBattlePopItem=PetBattlePopItem;var PetDebrisBtnItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent()},t.prototype.addEvent=function(){this.m_MainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data,i=PetModel.getInstance;switch(t){case 1:this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101913;break;case 2:this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101914;break;case 3:this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101915;break;case 4:this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101916;break;case 5:this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101917}i.petDebrisBtnIndex==this.itemIndex+1?this.m_MainBtn.enabled=!1:this.m_MainBtn.enabled=!0;var o=i.checkPetDebrisRedPointByQuality(this.data);o?this.m_RedPoint.visible=!0:this.m_RedPoint.visible=!1},t.prototype.onClick=function(){var e=PetModel.getInstance;e.petDebrisBtnIndex=this.itemIndex+1,GameGlobal.MessageCenter.dispatch(PetEvt.PET_DEBRIS_MSG)},t}(eui.ItemRenderer);__reflect(PetDebrisBtnItem.prototype,"PetDebrisBtnItem"),window.PetDebrisBtnItem=PetDebrisBtnItem;var PetDebrisItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent(),this.m_ItemBase.setRight(),this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101124},t.prototype.addEvent=function(){this.m_MainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),MessageCenter.ins().addListener(PetEvt.PET_DEBRIS_MSG,this.playEff,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data,i=GlobalConfig.ins("PetComposeConfig")[t],o=i.itemId,s=GlobalConfig.ins("ItemConfig")[o],n=UserBag.ins().getBagGoodsCountById(0,o),r={type:1,id:o,count:n};this.m_ItemBase.data=r,this.m_ItemBase.dataChanged(),this.m_ItemBase.isShowName(!1),this.m_Name.text=s.name;var a=UserBag.ins().getBagGoodsCountById(0,t);this.m_Num.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101125,[a,i.count]),a>=i.count?this.m_MainBtn.enabled=!0:this.m_MainBtn.enabled=!1},t.prototype.onClick=function(){PetSproto.ins().sendPetCompose(this.data)},t.prototype.playEff=function(e){this.data==e&&this.playBodyEff()},t.prototype.playBodyEff=function(){this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_iconUpgrade")},t}(eui.ItemRenderer);__reflect(PetDebrisItem.prototype,"PetDebrisItem"),window.PetDebrisItem=PetDebrisItem;var PetDebrisPanel=function(e){function t(t){var i=e.call(this)||this;return i.petDebrisBtnIndex=1,i.name=GlobalConfig.jifengTiaoyueLg.st101123,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101124,i.skinName="PetDebrisPanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_List.itemRenderer=PetDebrisItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,this.m_BtnList.itemRenderer=PetDebrisBtnItem,this.btnListData=new eui.ArrayCollection,this.m_BtnList.dataProvider=this.btnListData},t.prototype.addViewEvent=function(){MessageCenter.ins().addListener(PetEvt.PET_DEBRIS_MSG,this.initData,this)},t.prototype.removeEvent=function(){MessageCenter.ins().removeListener(PetEvt.PET_DEBRIS_MSG,this.initData,this)},t.prototype.open=function(){this.addViewEvent(),this.initData()},t.prototype.close=function(){this.removeEvent()},t.prototype.release=function(){this.removeEvent()},t.prototype.initData=function(){var e=PetModel.getInstance;this.petDebrisBtnIndex!=e.petDebrisBtnIndex&&(this.petDebrisBtnIndex=e.petDebrisBtnIndex,this.m_Scroller.stopAnimation(),this.m_Scroller&&this.m_Scroller.viewport&&(this.m_Scroller.viewport.scrollV=0),egret.setTimeout(function(){this.m_Scroller&&this.m_Scroller.viewport&&(this.m_Scroller.viewport.scrollV=0)},this,50));var t=[],i=GlobalConfig.ins("PetComposeConfig"),o=GlobalConfig.ins("ItemConfig");for(var s in i){var n=o[s];if(n.type==ItemType.TYPE15&&n.quality==e.petDebrisBtnIndex+1){var r=GlobalConfig.ins("PetComposeConfig")[n.id],a=UserBag.ins().getBagGoodsCountById(0,n.id),l=n.id;a>=r.count&&(l=n.id+1e4);var h={id:n.id,weight:l};t.push(h)}}t.sort(this.sorLvUp);for(var c=[],u=0;u<t.length;u++)c.push(t[u].id);this.listData.replaceAll(c);var d=[2,3,4,5];this.btnListData.replaceAll(d)},t.prototype.sorLvUp=function(e,t){return t.weight-e.weight},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(PetDebrisPanel.prototype,"PetDebrisPanel",["ICommonWindowTitle"]),window.PetDebrisPanel=PetDebrisPanel;var PetDebrisWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101124,t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.petDebrisPanel=new PetDebrisPanel,this.petDebrisPanel.name=GlobalConfig.jifengTiaoyueLg.st101123,this.commonWindowBg.AddChildStack(this.petDebrisPanel),this.petSmeltSelectPanel=new PetSmeltSelectPanel,this.petSmeltSelectPanel.name=GlobalConfig.jifengTiaoyueLg.st101111,this.commonWindowBg.AddChildStack(this.petSmeltSelectPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e&&e[0]),this.addWinEvent(),this.updateRedPoint()},t.prototype.close=function(){this.petSmeltSelectPanel.release(),this.petDebrisPanel.release(),this.removeObserve(),this.removeWinEvetn(),this.commonWindowBg.OnRemoved()},t.prototype.addWinEvent=function(){},t.prototype.removeWinEvetn=function(){},t.prototype.updateRedPoint=function(){},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(PetDebrisWin.prototype,"PetDebrisWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(PetDebrisWin,LayerManager.UI_Main),window.PetDebrisWin=PetDebrisWin;var PetFetterWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetFetterWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.m_bg.init("PetFetterWin",GlobalConfig.jifengTiaoyueLg.st101119)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.petFetterData=e[0],this.setData(),this.addViewEvent()},t.prototype.close=function(){this.release()},t.prototype.release=function(){},t.prototype.addViewEvent=function(){},t.prototype.setData=function(){var e,t=PetModel.getInstance,i=GlobalConfig.ins("PetFettersConfig"),o=this.petFetterData,s=i[o.id],n=o.pack;for(var r in s){var a=s[r];if(a[0].type==o.type){for(var l=0;l<a.length;l++)if(a[l].level==o.level+1){e=a[l];break}break}}for(var h=0,l=0;l<n.length;l++){var c=t.petDic.get(n[l]);c&&(h+=c.star)}this.m_AllStarLab.text="X"+h,AttributeData.setAttrGroup(o.attr,this.m_NowArttrGroup),e?(AttributeData.setAttrGroup(e.attr,this.m_NextAttrGroup),this.m_NextGroup.visible=!0,this.m_LVMAXLab.visible=!1,this.m_LVUPTips.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101918,[e.condition])):(this.m_NextGroup.visible=!1,this.m_LVMAXLab.visible=!0)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(PetFetterWin.prototype,"PetFetterWin"),ViewManager.ins().reg(PetFetterWin,LayerManager.UI_Popup),window.PetFetterWin=PetFetterWin;var PetIconBase=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetIconItemSkin",t}return __extends(t,e),t.prototype.setData=function(e,t){void 0===t&&(t=0),this.m_Bg.source=ResDataPath.GetItemQualityName(0);var i=GlobalConfig.ins("PetConfig")[e];i&&(this.m_Bg.source=ResDataPath.GetItemQualityName(i.quality),this.m_Icon.source=ResDataPath.getBossHeadImage(i.head)),0==t?this.m_Lv.visible=!1:(this.m_Lv.visible=!0,this.m_Lv.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[t])),this.setShuo()},t.prototype.setShuo=function(e){void 0===e&&(e=!1),1==e?(this.m_Icon.visible=!1,this.m_Shuo.visible=!0,this.m_Lv.text="",this.m_Bg.source=ResDataPath.GetItemQualityName(0)):(this.m_Icon.visible=!0,this.m_Shuo.visible=!1)},t.prototype.setNot=function(){this.m_Bg.source=ResDataPath.GetItemQualityName(0),this.m_Lv.text="",this.m_Icon.source="",this.setShuo(!1)},t}(eui.Component);__reflect(PetIconBase.prototype,"PetIconBase"),window.PetIconBase=PetIconBase;
var PetIconItem=function(e){function t(){var t=e.call(this)||this;return t.checkRedPointType=1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent()},t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data,i=PetModel.getInstance,o=GlobalConfig.ins("PetConfig"),s=o[t.petid];t.name?this.m_Name.text=t.name:this.m_Name.text=s.name,this.m_IconBase.setData(t.petid,t.level),t.petid==i.selectIndex?this.m_SelectImg.visible=!0:this.m_SelectImg.visible=!1,t.isFight||t.inRoleId>=0?(this.m_FightImg.visible=!0,t.isFight?t.isBeiZhan?this.m_FightImg.source="comp_46_37_02_png":this.m_FightImg.source="comp_46_37_01_png":this.m_FightImg.source="comp_46_37_03_png"):this.m_FightImg.visible=!1,t.isActivate?this.m_IconBase.m_Mask.visible=!1:this.m_IconBase.m_Mask.visible=!0,this.checkRedPoint(),this.checkGuide()},t.prototype.onClick=function(){var e=PetModel.getInstance,t=this.data;e.selectIndex=t.petid,GameGlobal.MessageCenter.dispatch(PetEvt.PET_DATAUPDATE_MSG)},t.prototype.checkRedPoint=function(){var e=this.data;return e&&this.parent&&"state"==this.parent.name&&(e.isCanActivate||e.isCanLvUp||e.isCanStarUp||e.isCanAwakening)?void(this.m_RedPoint.visible=!0):e&&this.parent&&"skill"==this.parent.name&&(e.isCanSkillUp||e.isCanSkillChange)?void(this.m_RedPoint.visible=!0):void(this.m_RedPoint.visible=!1)},t.prototype.checkGuide=function(){var e=this.data,t=PetModel.getInstance;if(e.petid==t.guidePeiId&&UserFb.ins().guanqiaID==GuideQuanQiaType.PET){t.guidePeiIdIndex=this.itemIndex;var i=t.checkGuideFirstPet();if(i&&t.selectIndex!=e.petid&&1==PetWin.isSaveGuide)return PetWin.isSaveGuide=!1,void this.onClick();if(t.checkGuideFirstPet()&&!GuideLocalStorage.checkIdIsCompele(17)&&t.selectIndex!=e.petid&&1==PetWin.isSaveGuide)return PetWin.isSaveGuide=!1,void this.onClick()}return e.petid==t.guidePeiId&&t.checkGuideStar()&&t.selectIndex!=e.petid&&1==PetWin.isSaveGuide?(PetWin.isSaveGuide=!1,void this.onClick()):void 0},t}(eui.ItemRenderer);__reflect(PetIconItem.prototype,"PetIconItem"),window.PetIconItem=PetIconItem;var PetMainPanel=function(e){function t(t){var i=e.call(this)||this;return i.mWindowHelpId=31,i.windowCommonBg="pic_bj_20_png",i._isAutoUp=!1,i.oldselectIndex=0,i.isChangeHV=!1,i.oneIconWidth=68,i.name=GlobalConfig.jifengTiaoyueLg.st101089,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101089,i.skinName="PetMainPanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_List.itemRenderer=PetIconItem,this.m_ListData=new eui.ArrayCollection,this.m_List.dataProvider=this.m_ListData,this.m_ListSkill.itemRenderer=PetSkillIconItem,this.m_ListSkillData=new eui.ArrayCollection,this.m_ListSkill.dataProvider=this.m_ListSkillData,this.m_BodyEffGrouo.touchEnabled=!1,this.m_LvUpEffGroup.touchEnabled=!1,this.getItem.text=GlobalConfig.jifengTiaoyueLg.st100418,UIHelper.SetLinkStyleLabel(this.getItem),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101100,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101101,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st101102,this.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st101109,this.m_Lan5.text=GlobalConfig.jifengTiaoyueLg.st100218,this.m_UpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101103,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101104,this.m_AutoBuyBox.label=GlobalConfig.jifengTiaoyueLg.st101105,this.m_BattleBtn.label=GlobalConfig.jifengTiaoyueLg.st101106,this.m_UpStarBtn.label=GlobalConfig.jifengTiaoyueLg.st101107,this.m_ChangeName.label=GlobalConfig.jifengTiaoyueLg.st101108,this.m_ActivateBtn.label=GlobalConfig.jifengTiaoyueLg.st100212},t.prototype.addViewEvent=function(){this.observe(PetEvt.PET_DATAUPDATE_MSG,this.initData),this.observe(PetEvt.PET_LVUP_MSG,this.playBodyEff),this.observe(PetEvt.PET_GUIDE_MSG,this.guideLvUp),this.observe(PetEvt.PET_DEBRIS_MSG,this.initData),this.observe(MessageDef.BAG_HAS_ITEM_CAN_USE,this.initData),this.AddClick(this.m_ActivateBtn,this.onClickActivateBtn),this.AddClick(this.m_BattleBtn,this.onClickFight),this.AddClick(this.m_UpStarBtn,this.onClickUpStar),this.AddClick(this.m_UpLvBtn,this.onClickLv),this.AddClick(this.m_AutoUpLvBtn,this.btnAutoUpClick),this.AddClick(this.m_ChangeName,this.onClickChangeName),this.AddClick(this.m_PetStateBtn,this.onClickState),this.AddClick(this.m_PetAllAddBtn,this.onClickAllAddBtn),this.AddClick(this.m_PetSmeltBtn,this.onClickSmeltBtn),this.AddClick(this.m_PetAllShowBtn,this.onClickAllShowBtn),this.AddClick(this.m_LeftBtn,this.onClickLeftBtn),this.AddClick(this.m_RightBtn,this.onClickRightBtn),this.AddClick(this.m_PetDebrisBtn,this.onClickPetDebrisBtn),this.AddClick(this.getItem,this.onClickGetLab1),this.AddClick(this.m_PetAwakeingBtn,this.onClickAwakeingBtn),this.m_Scroller.addEventListener(egret.Event.CHANGE,this.onSaveScrData,this),this.AddClick(this.m_MainSkillGroup,this.onClickMainSkill),this.m_NeedItem.addEvent()},t.prototype.removeEvent=function(){this.m_NeedItem.removeEvent(),this.m_Scroller.removeEventListener(egret.Event.CHANGE,this.onSaveScrData,this)},t.prototype.open=function(){this.addViewEvent(),this.initData(),PetModel.getInstance.allResonanceAttr()},t.prototype.close=function(){this.stopAutoUp(),this.removeEvent(),this.m_BodyEff&&(DisplayUtils.dispose(this.m_BodyEff),this.m_BodyEff=null),this.m_UpLvEff&&(DisplayUtils.dispose(this.m_UpLvEff),this.m_UpLvEff=null)},t.prototype.release=function(){this.removeEvent(),this.m_PetAnim.release(),this.m_BodyEff&&(DisplayUtils.dispose(this.m_BodyEff),this.m_BodyEff=null),this.m_UpLvEff&&(DisplayUtils.dispose(this.m_UpLvEff),this.m_UpLvEff=null)},t.prototype.onSaveScrData=function(){this.m_Scroller&&this.m_Scroller.viewport&&(PetModel.getInstance.scrollH=this.m_Scroller.viewport.scrollH),this.setListRedPoint()},t.prototype.initData=function(){this.setPetListData(),this.setPetData(),this.checkDebrisRedPoint()},t.prototype.setPetData=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData();if(t){var i=GlobalConfig.ins("PetConfig")[t.petid];if(this.m_FightNumLab.text=e.getAllPetPower()+"",this.m_ActivateNumLab.text=e.getAllPetActivate()+"",this.oldselectIndex!=e.selectIndex&&(this.stopAutoUp(),this.oldselectIndex=e.selectIndex),t&&i){if(this.m_PetAnim.setPetData(t.petid),t.isActivate)this.m_ActivateGroup.visible=!0,this.m_NoActivateGroup.visible=!1;else{this.m_ActivateGroup.visible=!1,this.m_NoActivateGroup.visible=!0,this.m_NeedItem.setData(i.activationItem,1);var o=[],s={id:t.skill,type:1};o.push(s);for(var n=0;n<t.bskill.length;n++){var r={id:t.bskill[n],type:2};o.push(r)}this.m_ListSkillData.replaceAll(o),this.m_ScrollerSkill&&this.m_ScrollerSkill.viewport&&(this.m_ScrollerSkill.viewport.scrollH=0)}var a=GlobalConfig.ins("PetLevelExpConfig")[t.level];if(a){this.m_ExpBar.maximum>a.exp&&(this.m_ExpBar.slideDuration=0),this.m_ExpBar.maximum=a.exp,this.m_ExpBar.value=t.exp,0==this.m_ExpBar.slideDuration&&(this.m_ExpBar.slideDuration=500);var l=[{type:1,id:a.itemId,count:a.itemNum}];UserBag.ins().setNeedItem(l,this.m_NeedItemGroup)}this.m_PetMainSkill.setData(t.skill,1),t.isCanLvUp?this.m_LvBtnRedPoint.visible=!0:this.m_LvBtnRedPoint.visible=!1,t.isCanActivate?this.m_ActivateBtnRedPoint.visible=!0:this.m_ActivateBtnRedPoint.visible=!1,t.isCanStarUp?this.m_StarUpBtnRedPoint.visible=!0:this.m_StarUpBtnRedPoint.visible=!1,this.m_PetAwakeingBtn.redPoint.visible=t.isCanAwakening}this.setListRedPoint(),this.checkGuide(),this.checkStarGuide()}},t.prototype.setPetListData=function(){var e=PetModel.getInstance,t=e.getSoltPetData();this.m_ListData.replaceAll(t),this.m_Scroller&&this.m_Scroller.viewport&&(this.m_Scroller.viewport.scrollH=e.scrollH)},t.prototype.onClickActivateBtn=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData(),i=GlobalConfig.ins("PetConfig")[t.petid],o=(GlobalConfig.ins("ItemConfig")[i.activationItem],UserBag.ins().getBagGoodsCountById(0,i.activationItem));GuideUtils.ins().next(this.m_ActivateBtn),o>=1?PetSproto.ins().sendPetActivate(t.petid):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101093)},t.prototype.onClickFight=function(){GuideUtils.ins().next(this.m_BattleBtn),ViewManager.ins().open(PetBattlePop)},t.prototype.onClickUpStar=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData();ViewManager.ins().open(PetStarWin,t)},t.prototype.onClickLv=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData(),i=GlobalConfig.ins("PetLevelExpConfig")[t.level];if(GuideUtils.ins().next(this.m_UpLvBtn),t.level>=GameLogic.ins().actorModel.level)return UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101094);if(i){var o=UserBag.ins().getBagGoodsCountById(0,i.itemId);if(o>=i.itemNum)PetSproto.ins().sendPetUpLevelMsg(t.petid,!1);else if(1==this.m_AutoBuyBox.selected){i.itemNum-o;if(Checker.Money(MoneyConst.yuanbao,ItemStoreConfig.getStoreByItemID(i.itemId).price*i.itemNum,Checker.YUNBAO_FRAME))return void PetSproto.ins().sendPetUpLevelMsg(t.petid,!0)}else UserWarn.ins().setBuyGoodsWarn(i.itemId,i.itemNum-o)}},t.prototype.btnAutoUpClick=function(){this._isAutoUp?this.stopAutoUp():(this._isAutoUp=!0,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101096,TimerManager.ins().doTimer(600,0,this.autoUpStar,this))},t.prototype.stopAutoUp=function(){this._isAutoUp=!1,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101097,TimerManager.ins().remove(this.autoUpStar,this)},t.prototype.autoUpStar=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData(),i=GlobalConfig.ins("PetLevelExpConfig")[t.level+1],o=GlobalConfig.ins("PetLevelExpConfig")[t.level];if(null==i&&t.exp==o.exp)return this._isAutoUp=!1,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101097,TimerManager.ins().remove(this.autoUpStar,this),void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101098);if(t.level>=GameLogic.ins().actorModel.level)return this._isAutoUp=!1,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101097,TimerManager.ins().remove(this.autoUpStar,this),UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101099);var s=UserBag.ins().getBagGoodsCountById(0,o.itemId);if(s>=o.itemNum)PetSproto.ins().sendPetUpLevelMsg(t.petid,!0);else{if(1==this.m_AutoBuyBox.selected){o.itemNum-s;if(Checker.Money(MoneyConst.yuanbao,ItemStoreConfig.getStoreByItemID(o.itemId).price*o.itemNum,Checker.YUNBAO_FRAME))return void PetSproto.ins().sendPetUpLevelMsg(t.petid,!0)}else UserWarn.ins().setBuyGoodsWarn(o.itemId,o.itemNum-s);this._isAutoUp=!1,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101097,TimerManager.ins().remove(this.autoUpStar,this)}},t.prototype.onClickChangeName=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData();ViewManager.ins().open(PetNameWin,t)},t.prototype.onClickState=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData();ViewManager.ins().open(PetStateWin,t)},t.prototype.onClickAllAddBtn=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData();ViewManager.ins().open(PetAllAddWin,t)},t.prototype.onClickSmeltBtn=function(){ViewManager.ins().open(PetDebrisWin,1)},t.prototype.onClickAllShowBtn=function(){ViewManager.ins().open(PetAllShowWin)},t.prototype.playBodyEff=function(){this.m_BodyEff=ViewManager.ins().createEff(this.m_BodyEff,this.m_BodyEffGrouo,"eff_ui_bodyUpgrade"),this.m_UpLvEff=ViewManager.ins().createEff(this.m_UpLvEff,this.m_LvUpEffGroup,"eff_ui_success")},t.prototype.onClickGetLab=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData(),i=GlobalConfig.ins("PetConfig")[t.petid];i&&UserWarn.ins().setBuyGoodsWarn(i.activationItem)},t.prototype.onClickGetLab1=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData(),i=(GlobalConfig.ins("PetLevelExpConfig")[t.level+1],GlobalConfig.ins("PetLevelExpConfig")[t.level]);i&&UserWarn.ins().setBuyGoodsWarn(i.itemId)},t.prototype.setListRedPoint=function(){var e=this.oneIconWidth,t=PetModel.getInstance;t.scrollH>e?this.m_LeftBtn.visible=!0:this.m_LeftBtn.visible=!1;var i=t.petDic.values.length;t.scrollH<(i-6)*e?this.m_RightBtn.visible=!0:this.m_RightBtn.visible=!1;var o=t.getSoltPetData(),s=Math.ceil(t.scrollH/e);this.m_LeftBtnRedPoint.visible=!1;for(var n=0;s>n;n++){var r=o[n];if(r&&(r.isCanLvUp||r.isCanStarUp||r.isCanActivate||r.isCanAwakening)){this.m_LeftBtnRedPoint.visible=!0;break}}var a=(i-6)*e;this.m_RightBtnRedPoint.visible=!1;for(var l=i-Math.floor((a-t.scrollH)/e),n=l-1;i>n;n++){var r=o[n];if(r&&(r.isCanLvUp||r.isCanStarUp||r.isCanActivate||r.isCanAwakening)){this.m_RightBtnRedPoint.visible=!0;break}}},t.prototype.guideLvUp=function(){var e=PetModel.getInstance;e.checkGuideLvUp()&&e.selectIndex==e.guidePeiId&&0==PetNewWin.isOpen&&(this.m_Scroller&&this.m_Scroller.viewport&&(this.m_Scroller.viewport.scrollH=PetModel.getInstance.scrollH=0),PetWin.isSaveGuide=!0,GuideUtils.ins().show(this.m_UpLvBtn,16,0))},t.prototype.checkGuide=function(){if(UserFb.ins().guanqiaID==GuideQuanQiaType.PET){var e=PetModel.getInstance;if(e.checkGuideFirstPet()&&0==this.isChangeHV){for(var t=e.getSoltPetData(),i=void 0,o=0;o<t.length;o++){var s=t[o];if(s.petid==e.guidePeiId){i=o;break}}this.isChangeHV=!0;var n=68*i-6,r=68*(t.length-6)-6;n>r&&(n=r),this.m_Scroller&&this.m_Scroller.viewport&&(this.m_Scroller.viewport.scrollH=PetModel.getInstance.scrollH=n)}e.checkGuideFirstPet()&&e.selectIndex==e.guidePeiId&&(Setting.currPart=14,Setting.currStep=5,PetWin.isSaveGuide=!0,GuideUtils.ins().show(this.m_ActivateBtn,14,5)),this.guideLvUp(),e.checkGuideBattle()&&e.selectIndex==e.guidePeiId&&17==Setting.currPart&&0==Setting.currStep&&(PetWin.isSaveGuide=!0,GuideUtils.ins().show(this.m_BattleBtn,17,0))}},t.prototype.checkStarGuide=function(){PetModel.getInstance.checkGuideStar()&&27==Setting.currPart&&1==Setting.currStep&&(PetWin.isSaveGuide=!0,GuideUtils.ins().show(this.m_UpStarBtn,27,1),this.m_UpStarBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickStarGuide,this,!0,10))},t.prototype.onClickStarGuide=function(){GuideUtils.ins().next(this.m_UpStarBtn),this.m_UpStarBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickStarGuide,this,!0)},t.prototype.UpdateContent=function(){},t.prototype.onClickLeftBtn=function(){var e=PetModel.getInstance.scrollH,t=e-408;0>=t&&(t=0),this.m_Scroller&&this.m_Scroller.viewport&&(this.m_Scroller.viewport.scrollH=PetModel.getInstance.scrollH=t)},t.prototype.onClickRightBtn=function(){var e=PetModel.getInstance,t=e.getSoltPetData(),i=68*(t.length-6)-6,o=PetModel.getInstance.scrollH,s=o+408;s>i&&(s=i),this.m_Scroller&&this.m_Scroller.viewport&&(this.m_Scroller.viewport.scrollH=PetModel.getInstance.scrollH=s)},t.prototype.onClickPetDebrisBtn=function(){ViewManager.ins().open(PetDebrisWin)},t.prototype.checkDebrisRedPoint=function(){this.m_PetDebrisBtn.redPoint.visible=PetModel.getInstance.checkAllPetDebrisRedPoint()},t.prototype.onClickAwakeingBtn=function(){ViewManager.ins().open(PetAwakeningWin)},t.prototype.onClickMainSkill=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData();t.isActivate?ViewManager.ins().open(PetSkillMainWin,t):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101138)},t}(BaseView);__reflect(PetMainPanel.prototype,"PetMainPanel",["ICommonWindowTitle"]),window.PetMainPanel=PetMainPanel;var PetNameWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetNameWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101173,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101174,this.m_CloseBtn3.label=GlobalConfig.jifengTiaoyueLg.st101175,this.m_SureBtn.label=GlobalConfig.jifengTiaoyueLg.st101176,this.m_Text.text=GlobalConfig.jifengTiaoyueLg.st101177,this.m_bg.init("PetNameWin",GlobalConfig.jifengTiaoyueLg.st101172)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.petData=e[0],this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.AddClick(this.m_CloseBtn3,this.onClickClose),this.AddClick(this.m_SureBtn,this.onClicSure)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){this.m_Text.text=this.petData.name},t.prototype.onClicSure=function(){this.m_Text.text.length>6&&(this.m_Text.text=this.m_Text.text.slice(0,6)),PetSproto.ins().sendChangeName(this.petData.petid,this.m_Text.text)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(PetNameWin.prototype,"PetNameWin"),ViewManager.ins().reg(PetNameWin,LayerManager.UI_Popup),window.PetNameWin=PetNameWin;var PetNewWin=function(e){function t(){var t=e.call(this)||this;return t.time=5,t.skinName="PetNewWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.m_PetAnim.m_RAndNameLab.stroke=1,this.m_PetAnim.m_RAndNameLab.strokeColor=16777215,this.m_PetAnim.m_Power.visible=!1,this.m_PetAnim.m_Bg.visible=!1,this.m_PetAnim.m_NameGroup.y=230},t.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.petData=e[0],this.petData.star>0?this.m_Img.source="comp_262_70_5_png":this.m_Img.source="comp_262_70_1_png",this.time=5,this.addViewEvent(),this.addTimer(),this.setData(),t.isOpen=!0},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeTimer(),this.m_PetAnim.release(),t.isOpen=!1},t.prototype.setData=function(){this.m_SureBtn.label=GlobalConfig.jifengTiaoyueLg.st100040+"（"+this.time+"）",this.m_PetAnim.setPetData(this.petData.petid),this.m_PetAnim.playNewEff(),this.m_PetAnim.m_Bg.visible=!1;var e=GuideLocalStorage.checkIdIsCompele(15);e||(Setting.currPart=15,Setting.currStep=0,GuideUtils.ins().show(this.m_SureBtn,15,0))},t.prototype.addTimer=function(){this.removeTimer(),TimerManager.ins().doTimer(1e3,0,this.refTime,this)},t.prototype.removeTimer=function(){TimerManager.ins().remove(this.refTime,this)},t.prototype.refTime=function(){this.time-=1,this.m_SureBtn.label=GlobalConfig.jifengTiaoyueLg.st100040+"（"+this.time+"）",this.time<0&&this.onClickClose()},t.prototype.addViewEvent=function(){this.observe(PetEvt.PET_DATAUPDATE_MSG,this.setData),this.AddClick(this.m_SureBtn,this.onClickClose)},t.prototype.onClickClose=function(){t.isOpen=!1,GuideUtils.ins().next(this.m_SureBtn),GameGlobal.MessageCenter.dispatch(PetEvt.PET_GUIDE_MSG),ViewManager.ins().close(this)},t.isOpen=!1,t}(BaseEuiPanel);__reflect(PetNewWin.prototype,"PetNewWin"),ViewManager.ins().reg(PetNewWin,LayerManager.UI_Top),window.PetNewWin=PetNewWin;var PetSkillChangeItem=function(e){function t(){var t=e.call(this)||this;return t.isShou=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent(),this.m_PetSkillItem1.type=2,this.m_PetSkillItem2.type=2},t.prototype.addEvent=function(){this.m_Shuo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);PetModel.getInstance;this.m_Shuo.visible=!0;var t=this.data;if(t.skill){this.m_PetSkillItem1.setData(t.skill,2);var i=GlobalConfig.ins("SkillsConfig")[t.skill];i&&(this.m_Name1.text=i.skinName,this.m_Cont1.text=i.desc)}else this.m_PetSkillItem1.setShuo(),this.m_Name1.text="",this.m_Cont1.text="",this.m_Shuo.visible=!1;if(t.washSkill){this.m_PetSkillItem2.setData(t.washSkill,2);var i=GlobalConfig.ins("SkillsConfig")[t.washSkill];i&&(this.m_Name2.text=i.skinName,this.m_Cont2.text=i.desc)}else this.m_PetSkillItem2.setNot(),this.m_Name2.text="",this.m_Cont2.text="";1==t.isShuo?this.m_Shuo.source="comp_28_30_1_png":this.m_Shuo.source="comp_32_37_1_png"},t.prototype.onClick=function(){var e=this.data,t=PetModel.getInstance,i=t.getNowSelectPetData();PetSproto.ins().sendPetWashLockMsg(i.petid,e.skill,!e.isShuo)},t}(eui.ItemRenderer);__reflect(PetSkillChangeItem.prototype,"PetSkillChangeItem"),window.PetSkillChangeItem=PetSkillChangeItem;var PetSkillChangePanel=function(e){function t(t){var i=e.call(this)||this;return i.mWindowHelpId=30,i.m_ShuoYbNum=0,i.isShowRedPoint=!0,i.name=GlobalConfig.jifengTiaoyueLg.st101140,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101140,i.skinName="PetSkillChangePanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_List.itemRenderer=PetSkillChangeItem,this.m_ListData=new eui.ArrayCollection,this.m_List.dataProvider=this.m_ListData,UIHelper.SetLinkStyleLabel(this.getItem),this.m_AutoBuy.label=GlobalConfig.jifengTiaoyueLg.st101147,this.getItem.text=GlobalConfig.jifengTiaoyueLg.st100418,this.m_SkillChangeBtn.label=GlobalConfig.jifengTiaoyueLg.st101139,this.m_SureChangeBtn.label=GlobalConfig.jifengTiaoyueLg.st101148,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100022,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101149,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st101150},t.prototype.addViewEvent=function(){this.observe(PetEvt.PET_CHANGEWASHSKILL_MSG,this.initData),this.observe(PetEvt.PET_CHANGEWASHSKILLEFF_MSG,this.playUpEff),this.observe(MessageDef.BAG_HAS_ITEM_CAN_USE,this.initData),this.AddClick(this.m_SureChangeBtn,this.onClickSureChangeBtn),this.AddClick(this.m_SkillChangeBtn,this.onClickSkillChange),this.AddClick(this.getItem,this.onClickGetLab)},t.prototype.open=function(){this.isShowRedPoint=!0,this.addViewEvent(),this.initData()},t.prototype.close=function(){GameGlobal.MessageCenter.dispatch(PetEvt.PET_SKILLCHANG_CLOSE)},t.prototype.release=function(){this.m_ItemEff&&(DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null),this.m_NewEff&&(DisplayUtils.dispose(this.m_NewEff),this.m_ItemEff=null)},t.prototype.initData=function(){this.setListData(),this.setData()},t.prototype.setData=function(){for(var e=PetModel.getInstance,t=e.getNowSelectPetData(),i=0,o=0;o<t.lock.length;o++)for(var s=0;s<t.bskill.length;s++)t.lock[o]==t.bskill[s]&&(i+=1);var n=GlobalConfig.ins("PetBasicConfig"),r=n.bSkillFusionCost.count*i;this.m_ShuoYbNum=r,this.m_ShuoSkillNumLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101141,[i,r]);var a=GlobalConfig.ins("ItemConfig")[n.cost.id];a&&(this.m_ItemImg.source=a.icon+"_png");var l=UserBag.ins().getBagGoodsCountById(0,n.cost.id);this.m_ItemNum.text=l+"/"+n.cost.count,t.isCanSkillChange&&this.isShowRedPoint?this.m_SkillChangeRedPoint.visible=!0:this.m_SkillChangeRedPoint.visible=!1},t.prototype.onClickGetLab=function(){var e=GlobalConfig.ins("PetBasicConfig");UserWarn.ins().setBuyGoodsWarn(e.cost.id)},t.prototype.setListData=function(){for(var e=PetModel.getInstance,t=e.getNowSelectPetData(),i=[],o=0;o<e.petSkillMaxNum;o++){for(var s=t.wash[o],n=t.bskill[o],r=!1,a=0;a<t.lock.length;a++)if(t.lock[a]==n){r=!0;break}var l={skill:n,washSkill:s,isShuo:r};i.push(l)}this.m_ListData.replaceAll(i)},t.prototype.onClickSureChangeBtn=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData();t.wash&&t.wash.length>0?WarnWin.show(GlobalConfig.jifengTiaoyueLg.st101991,function(){PetSproto.ins().sendPetWashrepMsg(t.petid)},this):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101142)},t.prototype.onClickSkillChange=function(){this.isShowRedPoint=!1;var e=PetModel.getInstance,i=e.getNowSelectPetData(),o=i.lock.length;if(o==e.petSkillMaxNum)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101143);var s=GameLogic.ins().actorModel.yb;if(s<this.m_ShuoYbNum)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101144);var n=GlobalConfig.ins("PetBasicConfig"),r=UserBag.ins().getBagGoodsCountById(0,n.cost.id);if(0==this.m_AutoBuy.selected){if(r<n.cost.count)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101145);PetSproto.ins().sendPetWash(i.petid,!1)}else if(1==this.m_AutoBuy.selected){var a=ItemStoreConfig.getStoreByItemID(n.cost.id).price*n.cost.count;if(r>=n.cost.count)return void PetSproto.ins().sendPetWash(i.petid,!1);if(Checker.Money(MoneyConst.yuanbao,a,Checker.YUNBAO_FRAME))return void(0==t.isTips?(t.isTips=!0,WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101146,[a]),function(){PetSproto.ins().sendPetWash(i.petid,!0)},this)):PetSproto.ins().sendPetWash(i.petid,!0))}},t.prototype.playUpEff=function(){this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_success"),this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_EffGroup,"eff_ui_upgrade")},t.prototype.UpdateContent=function(){},t.isTips=!1,t}(BaseView);__reflect(PetSkillChangePanel.prototype,"PetSkillChangePanel",["ICommonWindowTitle"]),window.PetSkillChangePanel=PetSkillChangePanel;var PetSkillChangeWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101140,t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.petSkillChange=new PetSkillChangePanel,this.petSkillChange.name=GlobalConfig.jifengTiaoyueLg.st101140,this.commonWindowBg.AddChildStack(this.petSkillChange)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e&&e[0]),this.updateRedPoint()},t.prototype.close=function(){this.removeObserve(),this.commonWindowBg.OnRemoved()},t.prototype.updateRedPoint=function(){},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(PetSkillChangeWin.prototype,"PetSkillChangeWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(PetSkillChangeWin,LayerManager.UI_Main),window.PetSkillChangeWin=PetSkillChangeWin;var PetSkillIconItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent()},t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data.id,i=GlobalConfig.ins("SkillsConfig")[t];if(this.m_Bg.source=ResDataPath.GetItemQualityName(0),i){this.m_Icon.source=i.icon+"_png";var o=0;if(1!=this.data.type)switch(i.displayLevel){case 0:o=0;break;case 1:case 2:o=1;break;case 3:case 4:o=2;break;case 5:case 6:o=3;break;case 7:case 8:o=4;break;default:o=5}this.m_Bg.source=ResDataPath.GetItemQualityName(o)}if(1==this.data.type){this.m_LvLab.visible=!0,this.m_MainSkill.visible=!0;var s=t.toString(),n=s.slice(s.length-3,s.length),r=parseInt(n);this.m_LvLab.text="Lv."+r}else this.m_LvLab.visible=!1,this.m_MainSkill.visible=!1},t.prototype.onClick=function(e){var t=this.data.id,i=new egret.Point(e.stageX,e.stageY),o={skillId:t,point:i,type:this.data.type};ViewManager.ins().open(PetSkillTips,o)},t}(eui.ItemRenderer);__reflect(PetSkillIconItem.prototype,"PetSkillIconItem"),window.PetSkillIconItem=PetSkillIconItem;var PetSkillItem=function(e){function t(){var t=e.call(this)||this;return t.isShou=!1,t.type=1,t.skinName="PetSkillItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent(),this.m_MainSkill.text=GlobalConfig.jifengTiaoyueLg.st100408},t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.setData=function(e,t){this.isShou=!1,this.m_Shuo.visible=!1;var i=e;this.skillId=e;var o=GlobalConfig.ins("SkillsConfig")[i];if(this.m_Bg.source=ResDataPath.GetItemQualityName(0),o){this.m_Icon.source=o.icon+"_png";var s=0;if(1!=t)switch(o.displayLevel){case 0:s=0;break;case 1:case 2:s=1;break;case 3:case 4:s=2;break;case 5:case 6:s=3;break;case 7:case 8:s=4;break;default:s=5}this.m_Bg.source=ResDataPath.GetItemQualityName(s)}if(1==t){this.m_LvLab.visible=!0,this.m_MainSkill.visible=!0;var n=i.toString(),r=n.slice(n.length-3,n.length),a=parseInt(r);this.m_LvLab.text="Lv."+a}else this.m_LvLab.visible=!1,this.m_MainSkill.visible=!1},t.prototype.setShuo=function(){this.isShou=!0,this.m_Icon.source="",this.m_Shuo.visible=!0,this.m_LvLab.visible=!1,this.m_MainSkill.visible=!1,this.m_Bg.source=ResDataPath.GetItemQualityName(0)},t.prototype.setNot=function(){this.isShou=!0,this.m_Icon.source="",this.m_Shuo.visible=!1,this.m_LvLab.visible=!1,this.m_MainSkill.visible=!1,this.m_Bg.source=ResDataPath.GetItemQualityName(0)},t.prototype.onClick=function(e){if(!this.isShou){var t=new egret.Point(e.stageX,e.stageY),i={skillId:this.skillId,point:t,type:this.type};ViewManager.ins().open(PetSkillTips,i)}},t}(eui.Component);__reflect(PetSkillItem.prototype,"PetSkillItem"),window.PetSkillItem=PetSkillItem;var PetSkillMainWin=function(e){function t(){var t=e.call(this)||this;return t.itemNum=0,t.needNum=0,t.skinName="PetSkillMainWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_bg.init("PetSkillMainWin",GlobalConfig.jifengTiaoyueLg.st101953),this.m_AutoBuy.label=GlobalConfig.jifengTiaoyueLg.st101147},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.setData(),this.addViewEvent()},t.prototype.close=function(){this.release()},t.prototype.release=function(){DisplayUtils.dispose(this.m_NewEff),this.m_NewEff=null,DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null,DisplayUtils.dispose(this.m_SkillEff),this.m_SkillEff=null,this.removeViewEvent()},t.prototype.addViewEvent=function(){this.m_NeedItem.addEvent(),this.AddClick(this.m_LvUpBtn,this.onClickLvUp),this.observe(PetEvt.PET_DATAUPDATE_MSG,this.setData),this.observe(MessageDef.BAG_HAS_ITEM_CAN_USE,this.setData)},t.prototype.removeViewEvent=function(){this.m_NeedItem.removeEvent()},t.prototype.setData=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData(),i=t.skill.toString(),o=i.slice(i.length-3,i.length),s=parseInt(o);this.m_SkillLvLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[s]),this.m_PetSkillItem.setData(t.skill,1);var n=t.skill+1,r=GlobalConfig.ins("SkillsConfig")[t.skill],a=GlobalConfig.ins("SkillsConfig")[n];this.m_Cont1.text=r.desc;var l=GlobalConfig.ins("PetSkillsUpgradeConfig")[s+1];l?(this.m_Cont2.text=a.desc,this.m_NextContGroup.visible=!0,this.m_LvUpGroup.visible=!0,this.m_LvFullLab.visible=!1):(this.m_NextContGroup.visible=!1,this.m_LvUpGroup.visible=!1,this.m_LvFullLab.visible=!0);var h=GlobalConfig.ins("PetSkillsUpgradeConfig")[s];if(h){this.needItemId=h.cost.id;var c=UserBag.ins().getBagGoodsCountById(0,this.needItemId);this.itemNum=c,this.needNum=h.cost.count,this.m_NeedItem.setData(this.needItemId,this.needNum)}},t.prototype.onClickLvUp=function(){var e=PetModel.getInstance,i=e.getNowSelectPetData();if(this.m_AutoBuy.selected&&this.itemNum<this.needNum){var o=Shop.ins().getShopPrice(this.needItemId,this.needNum);return void(Checker.Money(MoneyConst.yuanbao,o,Checker.YUNBAO_FRAME)&&(0==t.isTips?(t.isTips=!0,WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102089,[o,GlobalConfig.jifengTiaoyueLg.st100208]),function(){PetSproto.ins().sendPetSkillUp(i.petid,this.m_AutoBuy.selected)},this)):PetSproto.ins().sendPetSkillUp(i.petid,this.m_AutoBuy.selected)))}this.itemNum>=this.needNum?(PetSproto.ins().sendPetSkillUp(i.petid,this.m_AutoBuy.selected),this.playUpEff()):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100217)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.playUpEff=function(){this.m_SkillEff=ViewManager.ins().createEff(this.m_SkillEff,this.m_SkillGroup1,"eff_ui_iconUpgrade"),this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_icon"),this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_EffGroup,"eff_ui_success")},t.prototype.onClickGetLab=function(){this.needItemId&&UserWarn.ins().setBuyGoodsWarn(this.needItemId)
},t.isTips=!1,t}(BaseEuiPanel);__reflect(PetSkillMainWin.prototype,"PetSkillMainWin"),ViewManager.ins().reg(PetSkillMainWin,LayerManager.UI_Popup),window.PetSkillMainWin=PetSkillMainWin;var PetSkillPanel=function(e){function t(t){var i=e.call(this)||this;return i.windowCommonBg="pic_bj_20_png",i.isShowRedPoint=!0,i.oneIconWidth=68,i.name=GlobalConfig.jifengTiaoyueLg.st101137,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101137,i.skinName="PetSkillPanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_List.itemRenderer=PetIconItem,this.m_ListData=new eui.ArrayCollection,this.m_List.dataProvider=this.m_ListData,this.m_ListSkill.itemRenderer=PetSkillIconItem,this.m_ListSkillData=new eui.ArrayCollection,this.m_ListSkill.dataProvider=this.m_ListSkillData,this.m_PetMainSkill.removeEvent(),MessageCenter.ins().addListener(PetEvt.PET_SKILLCHANG_CLOSE,this.initData,this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101131,this.m_SkillChangBtn.label=GlobalConfig.jifengTiaoyueLg.st101139},t.prototype.addViewEvent=function(){this.m_Scroller.addEventListener(egret.Event.CHANGE,this.onSaveScrData,this),this.AddClick(this.m_PetStateBtn,this.onClickState),this.AddClick(this.m_SkillChangBtn,this.onClickSkillChange),this.AddClick(this.m_MainSkillGroup,this.onClickMainSkill),this.AddClick(this.m_PetSmeltBtn,this.onClickSmeltBtn),this.AddClick(this.m_PetAllShowBtn,this.onClickAllShowBtn),this.AddClick(this.m_LeftBtn,this.onClickLeftBtn),this.AddClick(this.m_RightBtn,this.onClickRightBtn),this.observe(PetEvt.PET_DATAUPDATE_MSG,this.initData),this.observe(MessageDef.BAG_HAS_ITEM_CAN_USE,this.upRedpoint)},t.prototype.removeEvent=function(){this.m_Scroller.removeEventListener(egret.Event.CHANGE,this.onSaveScrData,this)},t.prototype.open=function(){this.isShowRedPoint=!0,this.addViewEvent(),this.initData()},t.prototype.close=function(){this.removeEvent()},t.prototype.release=function(){this.removeEvent(),this.m_PetAnim.release()},t.prototype.onSaveScrData=function(){this.m_Scroller&&this.m_Scroller.viewport&&(PetModel.getInstance.scrollH=this.m_Scroller.viewport.scrollH),this.setListRedPoint()},t.prototype.onClickState=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData();ViewManager.ins().open(PetStateWin,t)},t.prototype.initData=function(){this.setPetListData(),this.setPetData()},t.prototype.setPetData=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData(),i=GlobalConfig.ins("PetConfig")[t.petid];if(t&&i){this.m_PetAnim.setPetData(t.petid);for(var o=[],s=0;s<t.bskill.length;s++){var n={id:t.bskill[s],type:2};o.push(n)}this.m_ListSkillData.replaceAll(o),this.m_ScrollerSkill&&this.m_ScrollerSkill.viewport&&(this.m_ScrollerSkill.viewport.scrollH=0),this.m_PetMainSkill.setData(t.skill,1);var r=GlobalConfig.ins("SkillsConfig")[t.skill];r&&(this.m_PetMainSkillCont.text=r.desc),this.upRedpoint()}this.setListRedPoint()},t.prototype.upRedpoint=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData();t.isCanSkillUp?this.m_SkillBtnRedPoint.visible=!0:this.m_SkillBtnRedPoint.visible=!1,t.isCanSkillChange&&this.isShowRedPoint?this.m_SkillChangeRedPoint.visible=!0:this.m_SkillChangeRedPoint.visible=!1},t.prototype.setPetListData=function(){var e=PetModel.getInstance,t=e.getSoltPetData();this.m_ListData.replaceAll(t),this.m_Scroller&&this.m_Scroller.viewport&&(this.m_Scroller.viewport.scrollH=e.scrollH)},t.prototype.onClickSkillChange=function(){this.isShowRedPoint=!1;var e=PetModel.getInstance,t=e.getNowSelectPetData();t.isActivate?ViewManager.ins().open(PetSkillChangeWin,t):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101138)},t.prototype.onClickMainSkill=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData();t.isActivate?ViewManager.ins().open(PetSkillMainWin,t):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101138)},t.prototype.onClickSmeltBtn=function(){ViewManager.ins().open(PetDebrisWin,1)},t.prototype.onClickAllShowBtn=function(){ViewManager.ins().open(PetAllShowWin)},t.prototype.setListRedPoint=function(){var e=this.oneIconWidth,t=PetModel.getInstance;t.scrollH>e?this.m_LeftBtn.visible=!0:this.m_LeftBtn.visible=!1;var i=t.petDic.values.length;t.scrollH<(i-6)*e?this.m_RightBtn.visible=!0:this.m_RightBtn.visible=!1;var o=t.getSoltPetData(),s=Math.ceil(t.scrollH/e);this.m_LeftBtnRedPoint.visible=!1;for(var n=0;s>n;n++){var r=o[n];if(r&&r.isCanSkillUp){this.m_LeftBtnRedPoint.visible=!0;break}}var a=(i-6)*e;this.m_RightBtnRedPoint.visible=!1;for(var l=i-Math.floor((a-t.scrollH)/e),n=l-1;i>n;n++){var r=o[n];if(r&&r.isCanSkillUp){this.m_RightBtnRedPoint.visible=!0;break}}},t.prototype.UpdateContent=function(){},t.prototype.onClickLeftBtn=function(){var e=PetModel.getInstance.scrollH,t=e-408;0>=t&&(t=0),this.m_Scroller&&this.m_Scroller.viewport&&(this.m_Scroller.viewport.scrollH=PetModel.getInstance.scrollH=t)},t.prototype.onClickRightBtn=function(){var e=PetModel.getInstance,t=e.getSoltPetData(),i=68*(t.length-6)-6,o=PetModel.getInstance.scrollH,s=o+408;s>i&&(s=i),this.m_Scroller&&this.m_Scroller.viewport&&(this.m_Scroller.viewport.scrollH=PetModel.getInstance.scrollH=s)},t}(BaseView);__reflect(PetSkillPanel.prototype,"PetSkillPanel",["ICommonWindowTitle"]),window.PetSkillPanel=PetSkillPanel;var PetSkillTips=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetSkillTipsSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_PetSkillItem.removeEvent(),this.addViewEvent(),this.data=e[0],this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){},t.prototype.addViewEvent=function(){this.AddClick(this.m_TouchBg,this.onClickClose)},t.prototype.setData=function(){var e=GlobalConfig.ins("SkillsConfig")[this.data.skillId];e&&(this.m_PetSkillItem.setData(this.data.skillId,this.data.type),this.m_Name.text=e.skinName,this.m_Cont.text=e.desc),1==this.data.type?this.m_Type.text=GlobalConfig.jifengTiaoyueLg.st101349:this.m_Type.text=GlobalConfig.jifengTiaoyueLg.st101350},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(PetSkillTips.prototype,"PetSkillTips"),ViewManager.ins().reg(PetSkillTips,LayerManager.UI_Popup),window.PetSkillTips=PetSkillTips;var PetSmeltSelectItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_ItemList.itemRenderer=ItemBase,this.listData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.listData,this.addEvent(),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101112+"：",this.m_MaxBtn.label=GlobalConfig.jifengTiaoyueLg.st101113,this.m_MinBtn.label=GlobalConfig.jifengTiaoyueLg.st101114,this.m_SmeltBtn.label=GlobalConfig.jifengTiaoyueLg.st101115},t.prototype.addEvent=function(){this.m_SmeltBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSmeltBtn,this),this.m_CutBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_AddBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_MaxBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_MinBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_NumLabel.addEventListener(egret.Event.CHANGE,this.onLabChange,this)},t.prototype.release=function(){DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null},t.prototype.dataChanged=function(){var e=this.data;this.m_Name.text=e.itemConfig.name;var t={type:1,id:e.configID,count:e.count},i=[];i.push(t),this.listData.replaceAll(i),e.smeltSelectNum>e.cont&&(e.smeltSelectNum=e.cont),this.m_NumLabel.text=e.smeltSelectNum;var o=GlobalConfig.ins("PetResolveConfig")[e.configID];if(o){this.m_GetLab.text="";for(var s=0;s<o.materials.length;s++)this.m_GetLab.text=this.m_GetLab.text+MoneyManger.MoneyConstToName(o.materials[s].id)+"x"+o.materials[s].count*e.smeltSelectNum+" "}else this.m_GetLab.text=""},t.prototype.onClick=function(e){var t=this.data;switch(e.currentTarget){case this.m_CutBtn:t.smeltSelectNum>1&&(t.smeltSelectNum-=1);break;case this.m_AddBtn:t.smeltSelectNum<t.count&&(t.smeltSelectNum+=1);break;case this.m_MaxBtn:t.smeltSelectNum<t.count&&(t.smeltSelectNum=t.count);break;case this.m_MinBtn:t.smeltSelectNum>1&&(t.smeltSelectNum=1)}this.m_NumLabel.text=t.smeltSelectNum;var i=GlobalConfig.ins("PetResolveConfig")[t.configID];if(i){this.m_GetLab.text="";for(var o=0;o<i.materials.length;o++)this.m_GetLab.text=this.m_GetLab.text+MoneyManger.MoneyConstToName(i.materials[o].id)+"x"+i.materials[o].count*t.smeltSelectNum+" "}else this.m_GetLab.text=""},t.prototype.onLabChange=function(){var e=this.data,t=this.m_NumLabel.text,i=parseInt(t);0>=i?(e.smeltSelectNum=0,i=0):i>e.count?(e.smeltSelectNum=e.count,i=e.count):e.smeltSelectNum=i,this.m_NumLabel.text=i+""},t.prototype.onClickSmeltBtn=function(){var e=this.data,t=e.smeltSelectNum;t>0&&(PetSproto.ins().sendPetSmelt(e.handle,t),this.playUpEff())},t.prototype.playUpEff=function(){this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_icon")},t}(eui.ItemRenderer);__reflect(PetSmeltSelectItem.prototype,"PetSmeltSelectItem"),window.PetSmeltSelectItem=PetSmeltSelectItem;var PetSmeltSelectPanel=function(e){function t(t){var i=e.call(this)||this;return i.name=GlobalConfig.jifengTiaoyueLg.st101111,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101111,i.skinName="PetSmeltSelectPanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_List.itemRenderer=PetSmeltSelectItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData},t.prototype.addViewEvent=function(){this.AddClick(this.m_RBox,this.initData),this.AddClick(this.m_SRBox,this.initData),this.AddClick(this.m_SSRBox,this.initData),this.AddClick(this.m_SSSRBox,this.initData),this.AddClick(this.m_SSSSRBox,this.initData),this.observe(PetEvt.PET_SMELTSELECT_MSG,this.initData)},t.prototype.open=function(){this.addViewEvent(),this.initData()},t.prototype.close=function(){},t.prototype.release=function(){var e=PetModel.getInstance;e.selectSmeltData.clear();for(var t=this.m_List.numChildren,i=0;t>i;i++){var o=this.m_List.getChildAt(i);o&&o instanceof PetSmeltSelectItem&&o.release()}},t.prototype.initData=function(){this.onChangeData();var e=PetModel.getInstance,t=e.selectSmeltData.values;this.listData.removeAll(),this.listData.replaceAll(t),this.listData.refresh()},t.prototype.onChangeData=function(){for(var e=PetModel.getInstance,t=(e.getAllPetItme(),0),i=0;i<this.m_BoxGroup.numChildren;i++){var o=this.m_BoxGroup.getChildAt(i);o instanceof eui.CheckBox&&1==o.selected&&(t+=1)}this.setSRBox(this.m_RBox,1),this.setSRBox(this.m_SRBox,2),this.setSRBox(this.m_SSRBox,3),this.setSRBox(this.m_SSSRBox,4),this.setSRBox(this.m_SSSSRBox,5),(0==t||5==t)&&this.setAllData()},t.prototype.setSRBox=function(e,t){var i=PetModel.getInstance,o=i.getAllPetItme();if(e.selected)for(var s=0;s<o.length;s++)o[s].itemConfig.quality==t&&i.selectSmeltData.set(o[s].handle,o[s]);else for(var s=0;s<o.length;s++)o[s].itemConfig.quality==t&&i.selectSmeltData.remove(o[s].handle)},t.prototype.setAllData=function(){var e=PetModel.getInstance,t=e.getAllPetItme();e.selectSmeltData.clear();for(var i=0;i<t.length;i++)t[i].smeltSelectNum||(t[i].smeltSelectNum=1),e.selectSmeltData.set(t[i].handle,t[i])},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(PetSmeltSelectPanel.prototype,"PetSmeltSelectPanel",["ICommonWindowTitle"]),window.PetSmeltSelectPanel=PetSmeltSelectPanel;var MapGrid=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t._nodes=[],t}return __extends(t,e),Object.defineProperty(t.prototype,"numCols",{get:function(){return this._numCols},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numRows",{get:function(){return this._numRows},enumerable:!0,configurable:!0}),t.prototype.getNode=function(e,t){var i=null;return this._nodes[e]&&this._nodes[e][t]&&(i=this._nodes[e][t]),i},t.prototype.isWalkableTile=function(e,t){return 0>e||e>=this._numCols||0>t||t>=this._numRows?!1:this._nodes[e][t].walkable},t.prototype.destruct=function(){this.clearNodes()},t.prototype.initGrid=function(e,t,i,o){this._nodes&&this.clearNodes(),this._numRows=e,this._numCols=t,this._nodes=[];for(var s,n=o?MapGridNode2:MapGridNode,r=0;t>r;r++){this._nodes[r]=[];for(var a=0;e>a;a++)s=new n,s.flags=i.readUnsignedByte(),this._nodes[r][a]=s}},t.prototype.clearNodes=function(){for(var e in this._nodes){for(var t in this._nodes[e])this._nodes[e]=null;this._nodes[e]=[]}this._nodes=[]},t.prototype._trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];null!=this.debugTrace&&this.debugTrace.apply(null,e)},t}(egret.Sprite);__reflect(MapGrid.prototype,"MapGrid"),window.MapGrid=MapGrid;var PetStateWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetStateWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_ListSkill.itemRenderer=PetSkillIconItem,this.m_ListSkillData=new eui.ArrayCollection,this.m_ListSkill.dataProvider=this.m_ListSkillData,this.m_PetAnim.shPower(),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101131,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101132,this.m_Title.text=GlobalConfig.jifengTiaoyueLg.st101133},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_PetData=e[0],this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.m_PetAnim.release()},t.prototype.addViewEvent=function(){this.AddClick(this.m_CloseBtn,this.onClickClose),this.AddClick(this.m_CloseBtn0,this.onClickClose)},t.prototype.setData=function(){var e=this.m_PetData,t=PetModel.getInstance,i=0;if(0==e.power){var o=t.getPetAttr(e.petid,1,0);i=Math.floor(UserBag.getAttrPower(o)),this.m_Power.text=i,AttributeData.setAttrGroup(o,this.m_StateGroup)}else this.m_Power.text=e.power;var s=GlobalConfig.ins("SkillsConfig")[e.skill];s&&(this.m_SkillCont.text=s.desc),this.m_PetAnim.setPetData(e.petid),this.m_PetSkillItem.setData(e.skill,1);for(var n=[],r=0;r<e.bskill.length;r++){var a={id:e.bskill[r],type:2};n.push(a)}this.m_ListSkillData.replaceAll(n),e.attr.length>0&&AttributeData.setAttrGroup(e.fightAttr,this.m_StateGroup)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(PetStateWin.prototype,"PetStateWin"),ViewManager.ins().reg(PetStateWin,LayerManager.UI_Popup),window.PetStateWin=PetStateWin;var PetWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100462,t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.petMainPanel=new PetMainPanel,this.petMainPanel.name=GlobalConfig.jifengTiaoyueLg.st101089,this.commonWindowBg.AddChildStack(this.petMainPanel),this.petSkillPanel=new PetSkillPanel,this.petSkillPanel.name=GlobalConfig.jifengTiaoyueLg.st101088,this.commonWindowBg.AddChildStack(this.petSkillPanel),this.petAttachPanel=new PetAttachPanel,this.petAttachPanel.name=GlobalConfig.jifengTiaoyueLg.st101090,this.commonWindowBg.AddChildStack(this.petAttachPanel)},t.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.isSaveGuide=!0,PetSproto.ins().sendGetPetInitMsg(),PetSproto.ins().sendPetAttachInit(),this.commonWindowBg.OnAdded(this,e&&e[0]),this.addWinEvent(),this.updateRedPoint()},t.prototype.close=function(){t.isSaveGuide=!1,this.petMainPanel.release(),this.petSkillPanel.release(),this.petAttachPanel.release();var e=ViewManager.ins().getView(UIView2);null!=e&&e.closeNav(UIView2.NAV_PET),this.removeObserve(),this.removeWinEvetn(),this.commonWindowBg.OnRemoved()},t.prototype.addWinEvent=function(){this.observe(PetEvt.PET_DATAUPDATE_MSG,this.updateRedPoint),this.observe(PetEvt.PET_GUIDE_MSG_END,this.checkGuideEnd),this.observe(PetEvt.PET_ATTACH_MSG,this.updateRedPoint)},t.prototype.removeWinEvetn=function(){this.commonWindowBg&&this.commonWindowBg.returnBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.updateRedPoint=function(){var e=PetModel.getInstance;this.commonWindowBg.ShowTalRedPoint(0,e.checkPetStateRedPoint()),this.commonWindowBg.ShowTalRedPoint(1,e.checkSkilledPoint()),this.commonWindowBg.ShowTalRedPoint(2,e.checkAllRoleAttactRedPoint())},t.prototype.checkGuideEnd=function(){17==Setting.currPart&&3==Setting.currStep&&UserFb.ins().guanqiaID==GuideQuanQiaType.PET?(this.commonWindowBg.returnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),GuideUtils.ins().show(this.commonWindowBg.returnBtn,17,3)):27==Setting.currPart&&4==Setting.currStep&&(this.commonWindowBg.returnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),GuideUtils.ins().show(this.commonWindowBg.returnBtn,27,4))},t.prototype.onClick=function(){GuideUtils.ins().next(this.commonWindowBg.returnBtn)},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return 2==e?Deblocking.Check(DeblockingType.TYPE_94):!0},t.prototype.UpdateContent=function(){},t.isSaveGuide=!0,t}(BaseEuiPanel);__reflect(PetWin.prototype,"PetWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(PetWin,LayerManager.UI_Main),window.PetWin=PetWin;var PetData=function(){function e(){this.attr=[],this.bskill=[],this.isActivate=!1,this.isFight=!1,this.wash=[],this.lock=[],this.inRoleId=-1,this.inRoleSlot=-1,this.isAwakening=!1,this.attachWeight=0}return Object.defineProperty(e.prototype,"isCanActivate",{get:function(){if(0==this.isActivate){var e=GlobalConfig.ins("PetConfig")[this.petid];if(e){var t=UserBag.ins().getBagGoodsCountById(0,e.activationItem);if(t>=1)return!0}}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCanLvUp",{get:function(){if(1==this.isActivate&&this.level<GameLogic.ins().actorModel.level){var e=GlobalConfig.ins("PetLevelExpConfig")[this.level],t=GlobalConfig.ins("PetLevelExpConfig")[this.level+1];if(e&&t){var i=UserBag.ins().getBagGoodsCountById(0,e.itemId);if(i>=e.itemNum)return!0}}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCanStarUp",{get:function(){if(1==this.isActivate){var e=GlobalConfig.ins("PetConfig")[this.petid];if(e){var t=UserBag.ins().getBagGoodsCountById(0,e.starItem),i=UserBag.ins().getBagGoodsCountById(0,e.activationItem),o=GlobalConfig.ins("PetStarLevelExpConfig")[this.star+1];if(o&&this.star<e.maxstarLevel&&(t>=o.itemNum||i>=o.itemNum2))return!0}}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCanCarStarUp",{get:function(){if(1==this.isActivate){var e=GlobalConfig.ins("PetConfig")[this.petid];if(e){var t=UserBag.ins().getBagGoodsCountById(0,e.activationItem),i=GlobalConfig.ins("PetStarLevelExpConfig")[this.star+1];if(i&&this.star<e.maxstarLevel&&t>=i.itemNum2)return!0}}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCanSkillUp",{get:function(){if(1==this.isActivate){var e=this.skill.toString(),t=e.slice(e.length-3,e.length),i=parseInt(t),o=GlobalConfig.ins("PetSkillsUpgradeConfig")[i],s=GlobalConfig.ins("PetSkillsUpgradeConfig")[i+1];if(o&&s){var n=(GlobalConfig.ins("ItemConfig")[o.cost.id],o.cost.id,UserBag.ins().getBagGoodsCountById(0,o.cost.id));if(n>=o.cost.count)return!0}}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"petMonsterId",{get:function(){var e=GlobalConfig.ins("PetConfig")[this.petid];return e?e.monsterId:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCanSkillChange",{get:function(){if(this.isActivate){var e=GlobalConfig.ins("PetBasicConfig");if(e){var t=UserBag.ins().getBagGoodsCountById(0,e.cost.id);if(t>=e.cost.count)return!0}}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fightAttr",{get:function(){var e=[];return e=this.isFight?AttributeData.getAttr([this.attr,PetModel.getInstance.petNowAllShowAttr()]):this.attr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){var e=0;this.isFight&&(e=Math.floor(UserBag.getAttrPower(PetModel.getInstance.petNowAllShowAttr())));var t=this._power+e;return t},set:function(e){this._power=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBeiZhan",{get:function(){var e=PetModel.getInstance;if(this.isFight)for(var t=1;t<e.battlePetList.length;t++)if(e.battlePetList[t]==this.petid)return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCanAwakening",{get:function(){if(1==this.isActivate&&!this.isAwakening){var e=GlobalConfig.ins("PetConfig")[this.petid];if(e.elementValue){var t=GameLogic.ins().actorModel.yb;if(t>=e.awakenCost.count)return!0}}return!1},enumerable:!0,configurable:!0}),e}();__reflect(PetData.prototype,"PetData"),window.PetData=PetData;var PetEvt=function(){function e(){}return e.PET_DATAUPDATE_MSG="PET_DATAUPDATE_MSG",e.PET_CHANGEWASHSKILL_MSG="PET_CHANGEWASHSKILL_MSG",e.PET_CHANGEWASHSKILLEFF_MSG="PET_CHANGEWASHSKILLEFF_MSG",e.PET_ATTACH_MSG="PET_ATTACH_MSG",e.PET_ALLSHOW_MSG="PET_ALLSHOW_MSG",e.PET_ALLSHOWSTATE_MSG="PET_ALLSHOWSTATE_MSG",e.PET_SMELTSELECT_MSG="PET_SMELTSELECT_MSG",e.PET_LVUP_MSG="PET_LVUP_MSG",e.PET_GUIDE_MSG="PET_GUIDE_MSG",e.PET_GUIDE_MSG_END="PET_GUIDE_MSG_END",e.PET_DEBRIS_MSG="PET_DEBRIS_MSG",e.PET_TREASURE_MSG="PET_TREASURE_MSG",e.PET_TREASURE_ROLE_MSG="PET_TREASURE_ROLE_MSG",e.PET_AWAKEING_MSG="PET_AWAKEING_MSG",e.PET_AWAKEING_MSG_EFF="PET_AWAKEING_MSG_EFF",e.PET_TREASUREGUIDE_END="PET_TREASUREGUIDE_END",e.PET_SKILLCHANG_CLOSE="PET_SKILLCHANG_CLOSE",e.PET_STARUPEFF_MSG="PET_STARUP_MSG",e}();__reflect(PetEvt.prototype,"PetEvt"),window.PetEvt=PetEvt;var PetModel=function(){function e(){this.scrollH=0,this.selectIndex=0,this.attachSelectIndex=0,this.petSkillMaxNum=8,this.petAllShowIndex=0,this.guidePeiId=70,this.guidePeiIdIndex=0,this.petDebrisBtnIndex=1,this._battlePetList=[0,0,0],this.petTreasureSelectIndex=0,this.petTreasureResult=[],this.petTreasureRoleList=[],this._petMaxNum=0,this.petAllShowLv=1,this.petDic=new Dictionary;var e=GlobalConfig.ins("PetConfig");for(var t in e){var i=new PetData;i.isActivate=!1,i.petid=e[t].id,i.name=e[t].name,i.level=0,i.star=0,i.exp=0,i.power=0,i.isFight=!1,i.skill=e[t].skill[0],i.bskill=e[t].bskill,i.wash=[],i.lock=[],i.inRoleId=-1,this.petDic.set(e[t].id,i)}this.petAttachData=new Dictionary,this.selectSmeltData=new Dictionary;var o=GlobalConfig.ins("PetBasicConfig");o&&o.guidePetId&&(this.guidePeiId=o.guidePetId)}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.setPetDic=function(e){for(var t=0;t<e.length;t++){var i=this.petDic.get(e[t].petid);i.attr=e[t].attr,i.exp=e[t].exp,i.isActivate=!0,i.level=e[t].level,i.name=e[t].name,i.petid=e[t].petid,i.power=e[t].power,i.star=e[t].star,i.skill=e[t].skill,i.bskill=e[t].bskill,i.wash=e[t].wash,i.lock=e[t].lock,i.isAwakening=e[t].awake}this.selectIndex||(this.selectIndex=this.getSoltPetData()[0].petid)},e.prototype.setPetAttachData=function(e){for(var t=0;t<e.length;t++){this.petAttachData.set(e[t].roleid,e[t]);for(var i=e[t].petid,o=0;o<i.length;o++)if(i[o]>0){var s=this.petDic.get(i[o]);s&&(s.inRoleId=e[t].roleid,s.inRoleSlot=o)}}},e.prototype.getQualityColor=function(e){var t;switch(e){case 1:t=Color.Green;break;case 2:t=Color.Blue;break;case 3:t=Color.Purple;break;case 4:t=Color.Yellow;break;case 5:t=Color.Red}return t},e.prototype.getRName=function(e){var t;switch(e){case 1:t="R";break;case 2:t="SR";break;case 3:t="SSR";break;case 4:t="SSSR";break;case 5:t="SSSSR";break;case 6:t="SSSSSR";break;default:t="R"}return t},e.prototype.getRName2=function(e){var t;switch(e){case 1:t="r";break;case 2:t="sr";break;case 3:t="ssr";break;case 4:t="sssr";break;case 5:t="ssssr";break;case 6:t="sssssr";break;default:t="r"}return t},e.prototype.getAllPetPower=function(){for(var e=this.petDic.values,t=0,i=0;i<e.length;i++)t+=e[i].power;return t},e.prototype.getPetPowerByIdList=function(e){for(var t=this.petDic.values,i=0,o=0;o<t.length;o++)for(var s=0;s<e.length;s++)e[s]==t[o].petid&&(i+=t[o].power);return i},e.prototype.getAllPetActivate=function(){for(var e=this.petDic.values,t=0,i=0;i<e.length;i++)1==e[i].isActivate&&(t+=1);return t},e.prototype.getNowSelectPetData=function(){var e=this.petDic.get(this.selectIndex);return e},e.prototype.getPetAttr=function(e,t,i){for(var o=Math.floor(this.getLvAttr(e,t)[0].value+this.getStarAttr(e,i)[0].value),s=Math.floor(this.getLvAttr(e,t)[1].value+this.getStarAttr(e,i)[1].value),n=Math.floor(this.getLvAttr(e,t)[2].value+this.getStarAttr(e,i)[2].value),r=Math.floor(this.getLvAttr(e,t)[3].value+this.getStarAttr(e,i)[3].value),a=[o,s,n,r],l=[],h=0;4>h;h++)if(0==h){var c={value:a[h],type:2};l.push(c)}else{var c={value:a[h],type:h+3};l.push(c)}return l},e.prototype.getLvAttr=function(e,t){for(var i=GlobalConfig.ins("PetLevelExpConfig")[t],o=i.value,s=[],n=0;n<o.length;n++){var r={type:o[n].type,value:o[n].value};s.push(r)}return s},e.prototype.getStarAttr=function(e,t){for(var i=GlobalConfig.ins("PetConfig")[e],o=Math.floor(i.hp*(i.hpStarValue/1e4*t+1)),s=Math.floor(i.attck*(i.attckStarValue/1e4*t+1)),n=Math.floor(i.def*(i.defStarValue/1e4*t+1)),r=Math.floor(i.res*(i.resStarValue/1e4*t+1)),a=[o,s,n,r],l=[],h=0;4>h;h++)if(0==h){var c={value:a[h],type:2};l.push(c)}else{var c={value:a[h],type:h+3};l.push(c)}return l},e.prototype.getAllLvAttr=function(){for(var e=this.petDic.values,t=[],i=0;4>i;i++)if(0==i){var o={value:0,type:2};t.push(o)}else{var o={value:0,type:i+3};t.push(o)}for(var i=0;i<e.length;i++)if(e[i].isActivate)for(var s=this.getLvAttr(e[i].petid,e[i].level),n=0;n<t.length;n++)t[n].value+=s[n].value;return t},e.prototype.getAllStarAttr=function(){for(var e=this.petDic.values,t=[],i=0;4>i;i++)if(0==i){var o={value:0,type:2};t.push(o)}else{var o={value:0,type:i+3};t.push(o)}for(var i=0;i<e.length;i++)if(e[i].isActivate)for(var s=this.getStarAttr(e[i].petid,e[i].star),n=0;n<t.length;n++)t[n].value+=s[n].value;return t},e.prototype.setStar=function(e,t){for(var i=e.numChildren,o=0;i>o;o++)e.removeChildAt(0);if(0!=t){for(var s=Math.floor(t/5),n=t%5,o=0;s>o;o++){var r=new eui.Image;r.source="comp_23_23_1_png",e.addChild(r)}for(var o=0;n>o;o++){var r=new eui.Image;r.source="comp_23_23_3_png",e.addChild(r)}}},e.prototype.getAttachList=function(){for(var e=this.petDic.values,t=[],i=0;i<e.length;i++)if(1==e[i].isActivate){var o=0,s=GlobalConfig.ins("PetConfig")[e[i].petid];s&&(o=100*s.quality),0==e[i].isFight&&e[i].inRoleId<0?e[i].attachWeight=3e3+o+e[i].petid:0==e[i].isFight&&e[i].inRoleId>=0?e[i].attachWeight=4e3+o+e[i].petid:e[i].attachWeight=1e3+o+e[i].petid,this.attachSelectIndex==e[i].inRoleSlot&&this.attachSelectRoleId==e[i].inRoleId&&(e[i].attachWeight+=1e5),t.push(e[i])}return t.sort(this.sorLvUp),t},e.prototype.sorLvUp=function(e,t){return t.attachWeight-e.attachWeight},e.prototype.checkPetListIsAllActivate=function(e){for(var t=0;t<e.length;t++){var i=this.petDic.get(e[t]);if(!i)return!1;if(!i.isActivate)return!1}return!0},e.prototype.getAllPetItme=function(){return UserBag.ins().getAllItemListBuyType(0,9)},e.prototype.checkAllPetRedPoint=function(){return Deblocking.Check(DeblockingType.TYPE_60,!0)&&(this.checkPetStateRedPoint()||this.checkSkilledPoint()||this.checkAllPetDebrisRedPoint()||this.checkAllRoleAttactRedPoint())?!0:!1},e.prototype.checkPetStateRedPoint=function(){for(var e=this.petDic.values,t=0;t<e.length;t++)if(e[t].isCanActivate||e[t].isCanLvUp||e[t].isCanStarUp||e[t].isCanAwakening)return!0;return!1},e.prototype.checkSkilledPoint=function(){return this.checkSkillUpRedPoint()||this.checkSkillChangeRedPoint()?!0:!1},e.prototype.checkSkillChangeRedPoint=function(){for(var e=this.petDic.values,t=0;t<e.length;t++)if(e[t].isCanSkillChange)return!0;return!1},e.prototype.checkSkillUpRedPoint=function(){for(var e=this.petDic.values,t=0;t<e.length;t++)if(e[t].isCanSkillUp)return!0;return!1},e.prototype.updataPetCharNameLv=function(){for(var e=this.petDic.values,t=EntityManager.ins().getPet(),i=0;i<e.length;i++)if(e[i].isFight)for(var o=0;o<t.length;o++)t[o].infoModel.configID==e[i].petMonsterId&&t[o].infoModel.team==Team.My&&t[o].setCharName(e[i].name+" lv"+e[i].level)},e.prototype.getSoltPetData=function(){for(var e=this.petDic.values,t=0;t<e.length;t++){var i=e[t],o=i.petid,s=GlobalConfig.ins("PetConfig")[i.petid].quality;o+=100*s,i.isCanActivate&&(o+=1e3),i.isActivate&&(o+=1e4),i.inRoleId>=0&&(o+=1e5),i.isBeiZhan?o+=1e6:i.isFight&&(o+=1e7),i.point=o}return e.sort(this.sorPoint),e},e.prototype.sorPoint=function(e,t){return t.point-e.point},e.prototype.checkGuideFirstPet=function(){var e=this.petDic.get(this.guidePeiId);return e&&e.isCanActivate?!0:!1},e.prototype.checkGuideLvUp=function(){var e=this.petDic.get(this.guidePeiId);return e&&1==e.isActivate&&1==e.level&&0==e.exp?!0:!1},e.prototype.checkGuideBattle=function(){var e=this.petDic.get(this.guidePeiId);return e&&1==e.isActivate&&0==e.isFight?!0:!1},e.prototype.checkGuideStar=function(){var e=this.petDic.get(this.guidePeiId),t=GuideLocalStorage.checkIdIsCompele(27);return e&&1==e.isActivate&&0==e.star&&!t&&e.isCanStarUp?!0:!1},e.prototype.checkAllPetDebrisRedPoint=function(){for(var e=1;6>e;e++){var t=this.checkPetDebrisRedPointByQuality(e);if(t)return!0}return!1},e.prototype.checkPetDebrisRedPointByQuality=function(e){var t=UserBag.ins().getAllItemListBuyTypeAndQuality(0,ItemType.TYPE15,e);if(t.length>0)for(var i=0;i<t.length;i++){var o=GlobalConfig.ins("PetComposeConfig")[t[i].configID];if(o&&t[i].count>=o.count)return!0}return!1},e.prototype.setBattlePetList=function(e,t){null!=t&&(this._battlePetList[e]=t,this.changeFight())},Object.defineProperty(e.prototype,"battlePetList",{get:function(){return this._battlePetList},set:function(e){this._battlePetList=e,this.changeFight()},enumerable:!0,configurable:!0}),e.prototype.changeFight=function(){for(var e=this.petDic.values,t=0;t<e.length;t++)e[t].isFight=!1;for(var t=0;t<this._battlePetList.length;t++){var i=this._battlePetList[t];if(i>0){var o=this.petDic.get(i);o&&(o.isFight=!0)}}},e.prototype.isAttachPet=function(e){var t=this.petDic.get(e);return-1!=t.inRoleId},e.prototype.test=function(e){void 0===e&&(e=10),this.petTreasureResult=[];for(var t=0;e>t;t++){var i={type:0,id:2,count:1e3};this.petTreasureResult.push(i)}},e.prototype.setTreasureResultData=function(e){for(var t=[],i=0;i<e.length;i++){var o=1;o=e[i].id<100?0:1;var s={type:o,id:e[i].id,count:e[i].count};t.push(s)}this.petTreasureResult=t},e.prototype.setTreasureRoleList=function(e){for(var t=[],i=0;i<e.length;i++){var o=[];o.push(e[i].name),o.push(e[i].itemid),t.push(o)}var s=this.petTreasureRoleList;this.petTreasureRoleList=t.concat(s)},e.prototype.checkAllRoleAttactRedPoint=function(){for(var e=SubRoles.ins().rolesModel,t=0;t<e.length;t++){var i=e[t],o=this.checkRoleAttactRedPoint(i.roleID);if(o)return!0}return!1},e.prototype.checkRoleAttactRedPoint=function(e){var t=this.petAttachData.get(e);if(t)for(var i=0;i<t.petid.length;i++){var o=this.checkAttactRedPoint(e,i);if(o)return!0}return!1},e.prototype.checkAttactRedPoint=function(e,t){var i=this.petAttachData.get(e);return i&&0==i.petid[t]&&this.checkNoJobPet()?!0:!1},e.prototype.checkNoJobPet=function(){for(var e=this.petDic.values,t=0;t<e.length;t++)if(1==e[t].isActivate&&0==e[t].isFight&&e[t].inRoleId<0)return!0;return!1},Object.defineProperty(e.prototype,"petMaxNum",{get:function(){if(this._petMaxNum<=0){var e=GlobalConfig.ins("PetConfig"),t=0;for(var i in e)t+=1;this._petMaxNum=t}return this._petMaxNum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nowPetHaveNum",{get:function(){for(var e=this.petDic.values,t=0,i=0;i<e.length;i++){var o=e[i];
o.isActivate&&(t+=1)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nowPetHaveAttr",{get:function(){for(var e=this.petDic.values,t=[],i=0;i<e.length;i++){var o=e[i];o.isActivate&&(t=AttributeData.getAttr([o.attr,t]))}return t},enumerable:!0,configurable:!0}),e.prototype.nowAllShowPetAttr=function(e){for(var t=this.nowPetHaveAttr,i=0;i<t.length;i++)t[i].value=Math.ceil(t[i].value*e);return t},e.prototype.allResonanceAttr=function(){var e=GlobalConfig.ins("PetFettersConfig"),t=[],i=[],o=[];for(var s in e){var n=e[s];t.push(n);for(var r in n){var a=n[r];i.push(a);for(var l in a){var h=a[l],c=h.pack;o.push(c);break}}}for(var u=[],d=0;d<o.length;d++){for(var c=o[d],p=!0,f=0,g=0;g<c.length;g++){var _=this.petDic.get(c[g]);_.isActivate||(p=!1),f+=_.star}if(1==p){for(var m=i[d],v=void 0,y=0;y<m.length;y++){var b=m[y];f>=b.condition&&(v=b)}for(var C=[],T=0;T<v.attr.length;T++){var S={type:v.attr[T].type,value:v.attr[T].value};C.push(S)}u=AttributeData.getAttr([u,C])}}return u},e.prototype.petNowAllShowAttr=function(){var e=GlobalConfig.ins("illustratedConfig")[this.petAllShowLv],t=AttributeData.getAttr([this.allResonanceAttr(),this.nowAllShowPetAttr(.01*e.additionRatio)]);return t},e}();__reflect(PetModel.prototype,"PetModel"),window.PetModel=PetModel;var PetSproto=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_pet_init_res,t.getPetInit),t.regNetMsg(S2cProtocol.sc_pet_uplevel_res,t.getPetUpLevel),t.regNetMsg(S2cProtocol.sc_pet_upstar_res,t.getPetUpStar),t.regNetMsg(S2cProtocol.sc_pet_activate_res,t.getPetActivate),t.regNetMsg(S2cProtocol.sc_pet_rename_res,t.getChangeName),t.regNetMsg(S2cProtocol.sc_pet_setfight_res,t.getFightPet),t.regNetMsg(S2cProtocol.sc_pet_skillup_res,t.getSkillUp),t.regNetMsg(S2cProtocol.sc_pet_wash_res,t.getPetWash),t.regNetMsg(S2cProtocol.sc_pet_attach_init_res,t.getAttachInit),t.regNetMsg(S2cProtocol.sc_pet_attach_unlock_res,t.getPetAttachUnlock),t.regNetMsg(S2cProtocol.sc_pet_attach_res,t.getPetAttach),t.regNetMsg(S2cProtocol.sc_pet_sync_attr,t.getPetAttr),t.regNetMsg(S2cProtocol.sc_pet_washlock_res,t.getWashlock),t.regNetMsg(S2cProtocol.sc_pet_washrep_res,t.getWashrep),t.regNetMsg(S2cProtocol.sc_pet_smelt_res,t.getSmelt),t.regNetMsg(S2cProtocol.sc_pet_compose_res,t.getPetCompose),t.regNetMsg(S2cProtocol.sc_petsSearch_record,t.getPetSearch),t.regNetMsg(S2cProtocol.sc_petsSearch_hunt_result,t.getPetSearchResult),t.regNetMsg(S2cProtocol.sc_pet_wake_res,t.getAwakening),t.regNetMsg(S2cProtocol.sc_pet_pack_res,t.getPetAllShowLVUP),t.regNetMsg(S2cProtocol.sc_pet_attr_res,t.chageAtt),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getPetInit=function(e){var t=PetModel.getInstance,i=[0,0,0];if(e.petlist)for(var o=0;o<e.petlist.length;o++)i[o]=e.petlist[o];t.battlePetList=i,t.setPetDic(e.data),t.petAllShowLv=e.star,GameGlobal.MessageCenter.dispatch(PetEvt.PET_DATAUPDATE_MSG),t.updataPetCharNameLv()},t.prototype.getPetUpLevel=function(e){var t=PetModel.getInstance,i=t.petDic.get(e.petid);i&&(i.level!=e.level&&(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100638),GameGlobal.MessageCenter.dispatch(PetEvt.PET_LVUP_MSG)),i.level=e.level,i.exp=e.exp,t.updataPetCharNameLv()),GameGlobal.MessageCenter.dispatch(PetEvt.PET_DATAUPDATE_MSG)},t.prototype.getPetUpStar=function(e){var t=PetModel.getInstance,i=t.petDic.get(e.petid);i&&!GuideUtils.ins().isShow()&&(i.star=e.star,ViewManager.ins().open(PetNewWin,i)),UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101652),GameGlobal.MessageCenter.dispatch(PetEvt.PET_DATAUPDATE_MSG),GameGlobal.MessageCenter.dispatch(PetEvt.PET_STARUPEFF_MSG)},t.prototype.getPetActivate=function(e){var t=PetModel.getInstance,i=t.petDic.get(e.petid);i&&(i.isActivate=!0,i.level=1),UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101653),GuideUtils.ins().isShow()||ViewManager.ins().open(PetNewWin,i),GameGlobal.MessageCenter.dispatch(PetEvt.PET_DATAUPDATE_MSG)},t.prototype.getChangeName=function(e){switch(e.result){case-1:return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101654);case-2:return void UserTips.ins().showTips("id错误")}var t=PetModel.getInstance,i=t.petDic.get(e.petid);i&&(i.name=e.name,t.updataPetCharNameLv()),UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101655),ViewManager.ins().close(PetNameWin),GameGlobal.MessageCenter.dispatch(PetEvt.PET_DATAUPDATE_MSG)},t.prototype.getFightPet=function(e){var t=PetModel.getInstance;t.petDic.values;t.setBattlePetList(e.roleid,1==e.result?e.petid:0);var i=t.petDic.get(e.petid);if(1==e.result){i.inRoleId=-1,i.inRoleSlot=-1;for(var o=0,s=t.battlePetList.length;s>o;o++){var n=t.battlePetList[o];0!=e.petid&&e.petid==n&&e.roleid!=o&&t.setBattlePetList(o,0)}}GameGlobal.MessageCenter.dispatch(PetEvt.PET_DATAUPDATE_MSG,e.roleid)},t.prototype.getSkillUp=function(e){var t=PetModel.getInstance,i=t.petDic.get(e.petid);i&&(i.skill=e.result),GameGlobal.MessageCenter.dispatch(PetEvt.PET_DATAUPDATE_MSG)},t.prototype.getPetWash=function(e){var t=PetModel.getInstance,i=t.petDic.get(e.petid);i&&(i.wash=e.wash),GameGlobal.MessageCenter.dispatch(PetEvt.PET_CHANGEWASHSKILL_MSG),GameGlobal.MessageCenter.dispatch(PetEvt.PET_CHANGEWASHSKILLEFF_MSG)},t.prototype.getAttachInit=function(e){var t=PetModel.getInstance;t.setPetAttachData(e.data),GameGlobal.MessageCenter.dispatch(PetEvt.PET_ATTACH_MSG)},t.prototype.getPetAttachUnlock=function(e){var t=PetModel.getInstance,i=t.petAttachData.get(e.roleid);i.petid[e.slot-1]=0,GameGlobal.MessageCenter.dispatch(PetEvt.PET_ATTACH_MSG)},t.prototype.getPetAttach=function(e){for(var t=PetModel.getInstance,i=t.petAttachData.values,o=0;o<i.length;o++)for(var s=0;s<i[o].petid.length;s++)if(i[o].petid[s]==e.petid){var n=t.petDic.get(i[o].petid[s]);n&&(n.inRoleId=-1,n.inRoleSlot=-1),i[o].petid[s]=0}var r=t.petAttachData.get(e.roleid),a=r.petid[e.slot-1];if(a>0){var n=t.petDic.get(a);n.inRoleId=-1,n.inRoleSlot=-1}r.petid[e.slot-1]=e.petid;var l=t.petDic.get(e.petid);l&&(l.inRoleId=e.roleid,l.inRoleSlot=e.slot-1),GameGlobal.MessageCenter.dispatch(PetEvt.PET_ATTACH_MSG)},t.prototype.getPetAttr=function(e){var t=PetModel.getInstance,i=t.petDic.get(e.petid);i&&(i.power=e.power,i.attr=e.attr),GameGlobal.MessageCenter.dispatch(PetEvt.PET_DATAUPDATE_MSG)},t.prototype.getWashlock=function(e){var t=PetModel.getInstance,i=t.petDic.get(e.petid);if(i)if(0==e.status)for(var o=0;o<i.lock.length;o++)i.lock[o]==e.skillid&&i.lock.splice(o,1);else i.lock.push(e.skillid);GameGlobal.MessageCenter.dispatch(PetEvt.PET_CHANGEWASHSKILL_MSG)},t.prototype.getWashrep=function(e){var t=PetModel.getInstance,i=t.petDic.get(e.petid);i&&(i.bskill=e.bskill),i.wash=[],i.lock=[],GameGlobal.MessageCenter.dispatch(PetEvt.PET_DATAUPDATE_MSG),GameGlobal.MessageCenter.dispatch(PetEvt.PET_CHANGEWASHSKILL_MSG)},t.prototype.getSmelt=function(e){GameGlobal.MessageCenter.dispatch(PetEvt.PET_SMELTSELECT_MSG)},t.prototype.getPetCompose=function(e){GameGlobal.MessageCenter.dispatch(PetEvt.PET_DEBRIS_MSG,e.itemid)},t.prototype.getPetSearch=function(e){var t=e.petsSearchRecord;PetModel.getInstance.setTreasureRoleList(t),GameGlobal.MessageCenter.dispatch(PetEvt.PET_TREASURE_ROLE_MSG)},t.prototype.getPetSearchResult=function(e){var t=e.items;PetModel.getInstance.setTreasureResultData(t),ViewManager.ins().open(PetTreasureResultWin),GameGlobal.MessageCenter.dispatch(PetEvt.PET_TREASURE_MSG)},t.prototype.getAwakening=function(e){var t=PetModel.getInstance,i=t.petDic.get(e.petid);i.isAwakening=!0,GameGlobal.MessageCenter.dispatch(PetEvt.PET_AWAKEING_MSG),GameGlobal.MessageCenter.dispatch(PetEvt.PET_AWAKEING_MSG_EFF)},t.prototype.getPetAllShowLVUP=function(e){var t=PetModel.getInstance;t.petAllShowLv=e.star,GameGlobal.MessageCenter.dispatch(PetEvt.PET_ALLSHOWSTATE_MSG)},t.prototype.chageAtt=function(e){for(var t=e.handler,i=EntityManager.ins().getEntityByHandle(t),o=0;o<e.attr.length;o++)e.attr[o]>0&&i.infoModel.setAtt(o,e.attr[o])},t.prototype.sendGetPetInitMsg=function(){var e=new Sproto.cs_pet_init_req_request;this.Rpc(C2sProtocol.cs_pet_init_req,e)},t.prototype.sendPetUpLevelMsg=function(e,t){var i=new Sproto.cs_pet_uplevel_req_request;i.petid=e,i.isAuto=t,this.Rpc(C2sProtocol.cs_pet_uplevel_req,i)},t.prototype.sendPetUpStarMsg=function(e){var t=new Sproto.cs_pet_upstar_req_request;t.petid=e,this.Rpc(C2sProtocol.cs_pet_upstar_req,t)},t.prototype.sendPetActivate=function(e){var t=new Sproto.cs_pet_activate_req_request;t.petid=e,this.Rpc(C2sProtocol.cs_pet_activate_req,t)},t.prototype.sendChangeName=function(e,t){var i=new Sproto.cs_pet_rename_req_request;i.petid=e,i.name=t,this.Rpc(C2sProtocol.cs_pet_rename_req,i)},t.prototype.sendFightPet=function(e,t){var i=new Sproto.cs_pet_setfight_req_request;i.petid=e,i.roleid=t,this.Rpc(C2sProtocol.cs_pet_setfight_req,i)},t.prototype.sendPetSkillUp=function(e,t){var i=new Sproto.cs_pet_skillup_req_request;i.petid=e,i.isAuto=t,this.Rpc(C2sProtocol.cs_pet_skillup_req,i)},t.prototype.sendPetWash=function(e,t){var i=new Sproto.cs_pet_wash_req_request;i.petid=e,i.isAuto=t,this.Rpc(C2sProtocol.cs_pet_wash_req,i)},t.prototype.sendSurePetWash=function(e){var t=new Sproto.cs_pet_washrep_req_request;t.petid=e,this.Rpc(C2sProtocol.cs_pet_washrep_req,t)},t.prototype.sendPetAttachInit=function(){var e=new Sproto.cs_pet_attach_init_req_request;this.Rpc(C2sProtocol.cs_pet_attach_init_req,e)},t.prototype.sendPetAttachUnlock=function(e,t){var i=new Sproto.cs_pet_attach_unlock_req_request;i.roleid=e,i.slot=t,this.Rpc(C2sProtocol.cs_pet_attach_unlock_req,i)},t.prototype.sendPetAttachMsg=function(e,t,i){var o=new Sproto.cs_pet_attach_req_request;o.roleid=e,o.petid=t,o.slot=i,this.Rpc(C2sProtocol.cs_pet_attach_req,o)},t.prototype.sendPetWashLockMsg=function(e,t,i){var o=new Sproto.cs_pet_washlock_req_request;o.petid=e,o.skillid=t,o.status=i,this.Rpc(C2sProtocol.cs_pet_washlock_req,o)},t.prototype.sendPetWashrepMsg=function(e){var t=new Sproto.cs_pet_washrep_req_request;t.petid=e,this.Rpc(C2sProtocol.cs_pet_washrep_req,t)},t.prototype.sendPetSmelt=function(e,t){var i=new Sproto.cs_pet_smelt_req_request;i.handler=e,i.num=t,this.Rpc(C2sProtocol.cs_pet_smelt_req,i)},t.prototype.sendPetCompose=function(e){var t=new Sproto.cs_pet_compose_req_request;t.itemid=e,this.Rpc(C2sProtocol.cs_pet_compose_req,t)},t.prototype.sendTreasure=function(e){var t=new Sproto.cs_petsSearch_hunt_request;t.type=e,this.Rpc(C2sProtocol.cs_petsSearch_hunt,t)},t.prototype.sendAwakening=function(e){var t=new Sproto.cs_pet_wake_req_request;t.petid=e,this.Rpc(C2sProtocol.cs_pet_wake_req,t)},t.prototype.sendPetAllShowLvUp=function(){var e=new Sproto.cs_pet_pack_req_request;this.Rpc(C2sProtocol.cs_pet_pack_req,e)},t}(BaseSystem);__reflect(PetSproto.prototype,"PetSproto"),window.PetSproto=PetSproto;var PetAwakeningPanel=function(e){function t(t){var i=e.call(this)||this;return i.name=GlobalConfig.jifengTiaoyueLg.st101127,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101127,i.skinName="PetAwakeningPanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_PetAnim.m_RAndNameLab.visible=!1,this.m_PetAnim.m_StarGroup.visible=!1,this.m_PetAnim.m_Power.visible=!1,this.m_PetAnim.m_ElementImg.visible=!1,this.m_StateLab.text=GlobalConfig.jifengTiaoyueLg.st101129,this.m_AwakeningLab.text=GlobalConfig.jifengTiaoyueLg.st101130,this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100212,this.m_Lab1.text=GlobalConfig.jifengTiaoyueLg.st100022,this.m_PetAnim.m_NameBg.visible=!1},t.prototype.addViewEvent=function(){this.AddClick(this.m_MainBtn,this.onClickMain),this.AddClick(this.m_PetStateBtn,this.onClickState),this.observe(PetEvt.PET_AWAKEING_MSG,this.setData),this.observe(PetEvt.PET_AWAKEING_MSG_EFF,this.playUpEff)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release(),this.removeEvent()},t.prototype.release=function(){this.removeEvent(),DisplayUtils.dispose(this.m_NewEff),this.m_NewEff=null,DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null},t.prototype.setData=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData(),i=GlobalConfig.ins("PetConfig")[t.petid];t&&i&&(this.m_PetAnim.setPetData(t.petid),this.m_PetAnim.m_Activate.visible=!1,AttributeData.setAttrGroup(i.awakenValue,this.m_AttrGroup),UserBag.ins().setNeedItem([i.awakenCost],this.m_NeedItemGroup),t.isAwakening?(this.m_StateLab.visible=!1,this.m_AwakeningLab.visible=!0,this.m_MainBtnGroup.visible=!1):(this.m_StateLab.visible=!0,this.m_AwakeningLab.visible=!1,this.m_MainBtnGroup.visible=!0),this.setPetData(t.petid))},t.prototype.onClickMain=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData(),i=GlobalConfig.ins("PetConfig")[t.petid];if(0==t.isActivate)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101128);if(i.elementValue){var o=GameLogic.ins().actorModel.yb;o>=i.awakenCost.count?PetSproto.ins().sendAwakening(t.petid):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008)}},t.prototype.onClickState=function(){var e=PetModel.getInstance,t=e.getNowSelectPetData();ViewManager.ins().open(PetStateWin,t)},t.prototype.UpdateContent=function(){},t.prototype.setPetData=function(e){var t=PetModel.getInstance,i=t.petDic.get(e),o=GlobalConfig.ins("PetConfig")[i.petid];if(i&&o){var s=void 0;s=0==i.level?1:i.level,this.m_NameLab.textFlow=[{text:"Lv."+s+" "},{text:i.name}];var n=0;if(0==i.power){var r=t.getPetAttr(i.petid,1,0);n=Math.floor(UserBag.getAttrPower(r)),this.m_Power.text=n}else this.m_Power.text=i.power;var a=GlobalConfig.ins("MonstersConfig")[o.monsterId];a&&(this.m_ElementImg.source=ResDataPath.GetElementImgName(a.elementType)),this.m_RImg.source="comp_"+t.getRName2(o.quality)+"_png"}},t.prototype.playUpEff=function(){this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_success"),this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_EffGroup,"eff_ui_upgrade")},t}(BaseView);__reflect(PetAwakeningPanel.prototype,"PetAwakeningPanel",["ICommonWindowTitle"]),window.PetAwakeningPanel=PetAwakeningPanel;var PetAwakeningWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101126,t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.petAwakeningPanel=new PetAwakeningPanel,this.commonWindowBg.AddChildStack(this.petAwakeningPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e&&e[0]),this.updateRedPoint()},t.prototype.close=function(){this.petAwakeningPanel.release(),this.removeObserve(),this.commonWindowBg.OnRemoved()},t.prototype.updateRedPoint=function(){},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(PetAwakeningWin.prototype,"PetAwakeningWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(PetAwakeningWin,LayerManager.UI_Main),window.PetAwakeningWin=PetAwakeningWin;var PetTreasureIcon=function(e){function t(){var t=e.call(this)||this;return t.checkRedPointType=1,t.petId=-1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent()},t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_FightImg.visible=!1,this.m_RedPoint.visible=!1},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=PetModel.getInstance,i=this.data,o=GlobalConfig.ins("petTreasureHuntPoolConfig")[i];if(o){this.m_IconBase.setData(o.petID);var s=GlobalConfig.ins("PetConfig")[o.petID];this.petId=o.petID,s&&(this.m_Name.text=s.name)}this.itemIndex==t.petTreasureSelectIndex?this.m_SelectImg.visible=!0:this.m_SelectImg.visible=!1},t.prototype.onClick=function(){var e=PetModel.getInstance;if(e.petTreasureSelectIndex!=this.itemIndex)e.petTreasureSelectIndex=this.itemIndex,GameGlobal.MessageCenter.dispatch(PetEvt.PET_TREASURE_MSG);else if(-1!=this.petId){var t=e.petDic.get(this.petId);t&&ViewManager.ins().open(PetStateWin,t)}},t}(eui.ItemRenderer);__reflect(PetTreasureIcon.prototype,"PetTreasureIcon"),window.PetTreasureIcon=PetTreasureIcon;var PetTreasureItemIcon=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_ItemBase.nameTxt.textColor=16777215},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.m_ItemBase.data=t,this.m_ItemBase.dataChanged(),this.playTween()},t.prototype.playTween=function(){egret.Tween.removeTweens(this.m_ItemBase),this.m_ItemBase.scaleX=0,this.m_ItemBase.scaleY=0,egret.Tween.get(this.m_ItemBase).to({scaleX:1,scaleY:1},300)},t}(eui.ItemRenderer);__reflect(PetTreasureItemIcon.prototype,"PetTreasureItemIcon"),window.PetTreasureItemIcon=PetTreasureItemIcon;var PetTreasurePanel=function(e){function t(t){var i=e.call(this)||this;return i.mWindowHelpId=37,i.petShowNum=0,i.name=GlobalConfig.jifengTiaoyueLg.st100404,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100404,i.skinName="PetTreasurePanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_List.itemRenderer=PetTreasureIcon,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,this.m_MsList.itemRenderer=PetTreasureRenderer,this.msListData=new eui.ArrayCollection,this.m_MsList.dataProvider=this.msListData,this.setNeedItem(),this.m_BuyBtn1.label=GlobalConfig.jifengTiaoyueLg.st100406,this.m_BuyBtn10.label=GlobalConfig.jifengTiaoyueLg.st100407},t.prototype.addViewEvent=function(){this.AddClick(this.m_BuyBtn1,this.onClickBuy),this.AddClick(this.m_BuyBtn10,this.onClickBuy),this.AddClick(this.m_RightArrImg,this.onClickArrImg),this.AddClick(this.m_LeftArrImg,this.onClickArrImg),this.AddClick(this.m_LeftBtn,this.onClickLeftBtn),this.AddClick(this.m_RightBtn,this.onClickRightBtn),this.observe(PetEvt.PET_TREASURE_MSG,this.setData),this.observe(PetEvt.PET_TREASURE_ROLE_MSG,this.setRoleList)},t.prototype.removeEvent=function(){this.m_Eff&&this.m_Eff.removeEventListener(egret.Event.COMPLETE,this.onPlayLoop,this)},t.prototype.open=function(){this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeEvent(),DisplayUtils.dispose(this.m_Eff),this.m_Eff=null},t.prototype.setData=function(){var e,t=PetModel.getInstance,i=GlobalConfig.ins("petTreasureHuntPoolConfig"),o=[],s=0;for(var n in i)s==t.petTreasureSelectIndex&&(e=i[n]),o.push(i[n].index),s++;if(this.petShowNum=s,this.listData.replaceAll(o),e){var r=GlobalConfig.ins("PetConfig")[e.petID];this.petConfig=r,this.playEff(r.avatar+"_3"+EntityAction.ATTACK),this.m_PetMainSkill.setData(r.skill[0],1)}var a=GlobalConfig.ins("petTreasureHuntConfig");if(a){var l=UserBag.ins().getBagGoodsCountById(0,a.itemid);this.m_PriceItemLab1.text=l+"/1",this.m_PriceItemLab10.text=l+"/10"}this.m_RightArrImg.visible=!0,this.m_LeftArrImg.visible=!0,0==t.petTreasureSelectIndex&&(this.m_LeftArrImg.visible=!1),t.petTreasureSelectIndex==s-1&&(this.m_RightArrImg.visible=!1),this.setRoleList(),this.checkGadGuide()},t.prototype.setRoleList=function(){var e=PetModel.getInstance;this.msListData.replaceAll(e.petTreasureRoleList)},t.prototype.setNeedItem=function(){var e=GlobalConfig.ins("petTreasureHuntConfig");if(e){this.m_PriceLab1.text=e.huntOnce,this.m_PriceLab10.text=e.huntTenth,this.m_PriceLab0.text=10*parseInt(e.huntOnce)+"",this.m_ZheKou.text=e.discount;var t=GlobalConfig.ins("ItemConfig")[e.itemid];UserBag.ins().getBagGoodsCountById(0,e.itemid);if(t){var i=t.icon+"_png";this.m_PriceItemImg1.source=i,this.m_PriceItemImg10.source=i}}},t.prototype.initEffData=function(){this.m_Eff||(this.m_Eff=new MovieClip,this.m_Eff.touchEnabled=!1,this.m_PetAnimGroup.addChild(this.m_Eff),this.m_Eff.x=this.m_PetAnimGroup.width/2,this.m_Eff.y=this.m_PetAnimGroup.height/2,this.m_Eff.addEventListener(egret.Event.COMPLETE,this.onPlayLoop,this))},t.prototype.playEff=function(e){this.initEffData(),this.m_Eff.loadUrl(ResDataPath.GetMonsterBodyPath(e),!0,1)},t.prototype.onPlayLoop=function(){this.m_Eff.loadUrl(ResDataPath.GetMonsterBodyPath(this.petConfig.avatar+"_3"+EntityAction.STAND),!0,-1)},t.prototype.onClickBuy=function(e){var t=GameLogic.ins().actorModel.yb,i=0,o=GlobalConfig.ins("petTreasureHuntConfig");if(o)switch(i=UserBag.ins().getBagGoodsCountById(0,o.itemid),e.currentTarget){case this.m_BuyBtn1:if(i>=1)return void PetSproto.ins().sendTreasure(0);if(t>=o.huntOnce)return void PetSproto.ins().sendTreasure(0);UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100405);break;case this.m_BuyBtn10:if(i>=10)return void PetSproto.ins().sendTreasure(1);if(t>=o.huntTenth)return void PetSproto.ins().sendTreasure(1);UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100405)}},t.prototype.onClickArrImg=function(e){var t=PetModel.getInstance;switch(e.currentTarget){case this.m_RightArrImg:t.petTreasureSelectIndex+=1;break;case this.m_LeftArrImg:t.petTreasureSelectIndex-=1}this.setData()},t.prototype.onClickLeftBtn=function(){if(this.m_Scroller&&this.m_Scroller.viewport){var e=this.m_Scroller.viewport.scrollH,t=e-408;0>=t&&(t=0),this.m_Scroller.viewport.scrollH=t}},t.prototype.onClickRightBtn=function(){if(this.m_Scroller&&this.m_Scroller.viewport){var e=68*(this.petShowNum-6)-6,t=this.m_Scroller.viewport.scrollH,i=t+408;i>e&&(i=e),this.m_Scroller.viewport.scrollH=i}},t.prototype.checkGadGuide=function(){14==Setting.currPart&&2==Setting.currStep&&(GuideUtils.ins().show(this.m_BuyBtn1,14,2),this.m_BuyBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGadGuide,this,!0,10))},t.prototype.onClickGadGuide=function(){GuideUtils.ins().next(this.m_BuyBtn1),this.m_BuyBtn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGadGuide,this,!0)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(PetTreasurePanel.prototype,"PetTreasurePanel",["ICommonWindowTitle"]),window.PetTreasurePanel=PetTreasurePanel;var PetTreasureRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="HuntListRendererSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e,t=this.data,i=GlobalConfig.itemConfig[t[1]],o="";t[2]&&(o="x"+t[2]),e=i?"<font color = '#12b2ff'>"+t[0]+"</font> "+GlobalConfig.jifengTiaoyueLg.st101471+"<font color='"+ItemBase.QUALITY_COLOR[i.quality]+"'>"+i.name+o+"</font>":"<font color = '#12b2ff'>"+t[0]+"</font>"+GlobalConfig.jifengTiaoyueLg.st101471+" <font color='"+ItemBase.QUALITY_COLOR[0]+"'>"+MoneyManger.MoneyConstToName(t[1])+o+"</font>",this.showText.textFlow=TextFlowMaker.generateTextFlow(e)},t}(eui.ItemRenderer);__reflect(PetTreasureRenderer.prototype,"PetTreasureRenderer"),window.PetTreasureRenderer=PetTreasureRenderer;var PetTreasureResultWin=function(e){function t(){var t=e.call(this)||this;return t.timeNum=0,t.type=0,t.skinName="PetTreasureResultWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List10.itemRenderer=PetTreasureItemIcon,this.listData10=new eui.ArrayCollection,this.m_List10.dataProvider=this.listData10,this.m_List1.itemRenderer=PetTreasureItemIcon,this.listData1=new eui.ArrayCollection,this.m_List1.dataProvider=this.listData1,this.m_BuyBtn1.label=GlobalConfig.jifengTiaoyueLg.st100406,this.m_BuyBtn10.label=GlobalConfig.jifengTiaoyueLg.st100407,this.m_CloseBtn.label=GlobalConfig.jifengTiaoyueLg.st100040},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.type=e[0],this.m_MainGroup.touchEnabled=!1,this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.AddClick(this.m_BuyBtn1,this.onClickBuy),this.AddClick(this.m_BuyBtn10,this.onClickBuy),this.AddClick(this.m_CloseBtn,this.onClickClose)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e;if(this.type){this.m_AddItem.visible=!1,this.m_NowItem.horizontalCenter=0,this.m_PriceImg1.source=MoneyManger.MoneyConstToSource(MoneyConst.COUPON),this.m_PriceImg10.source=MoneyManger.MoneyConstToSource(MoneyConst.COUPON);var t=CouponModel.getInstance;e=t.treasureResult,this.m_TitleImg.source="comp_116_28_07_png",this.m_BuyBtn1.label=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102111,[1]),this.m_BuyBtn10.label=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102111,[10])}else{this.m_AddItem.visible=!0,this.m_NowItem.horizontalCenter=-36,this.m_PriceImg1.source=MoneyManger.MoneyConstToSource(MoneyConst.yuanbao),this.m_PriceImg10.source=MoneyManger.MoneyConstToSource(MoneyConst.yuanbao);var i=GlobalConfig.ins("petTreasureHuntConfig");if(i){var o=UserBag.ins().getBagGoodsCountById(0,i.itemid);this.m_PriceItemLab1.text=o+"/1"}var s=PetModel.getInstance;e=s.petTreasureResult,this.checkGadGuide(),this.m_TitleImg.source="comp_116_28_02_png",this.m_BuyBtn1.label=GlobalConfig.jifengTiaoyueLg.st100406,this.m_BuyBtn10.label=GlobalConfig.jifengTiaoyueLg.st100407}this.removeTime(),this.listData1.removeAll(),this.listData10.removeAll(),this.timeNum=0,1==e.length?(this.listData1.replaceAll(e),this.m_Main10Group.visible=!1,this.m_Main1Group.visible=!0):(this.m_Main10Group.visible=!0,this.m_Main1Group.visible=!1,this.addTime()),this.setNeedItem()},t.prototype.addTime=function(){this.removeTime(),TimerManager.ins().doTimer(200,9,this.setTimeData,this),this.setTimeData()},t.prototype.removeTime=function(){TimerManager.ins().remove(this.setTimeData,this)},t.prototype.setTimeData=function(){var e,t;if(this.type){var i=CouponModel.getInstance;t=i.treasureResult}else{var o=PetModel.getInstance;t=o.petTreasureResult}e=t[this.timeNum],this.listData10.addItem(e),this.timeNum+=1},t.prototype.setNeedItem=function(){if(this.type){var e=GlobalConfig.ins("ticketTreasureHuntConfig");e&&(this.m_PriceLab1.text=e.huntOnce,this.m_PriceLab10.text=e.huntTenth,this.m_PriceLab0.text=10*parseInt(e.huntOnce)+"",this.m_ZheKou.text=e.discount,this.m_PriceImg1.source=MoneyManger.MoneyConstToSource(MoneyConst.COUPON),this.m_PriceImg10.source=MoneyManger.MoneyConstToSource(MoneyConst.COUPON))}else{var t=GlobalConfig.ins("petTreasureHuntConfig");if(t){this.m_PriceLab1.text=t.huntOnce,this.m_PriceLab10.text=t.huntTenth,this.m_PriceLab0.text=10*parseInt(t.huntOnce)+"",this.m_ZheKou.text=t.discount;var i=GlobalConfig.ins("ItemConfig")[t.itemid];UserBag.ins().getBagGoodsCountById(0,t.itemid);if(i){var o=i.icon+"_png";this.m_PriceItemImg1.source=o}this.m_PriceImg1.source=MoneyManger.MoneyConstToSource(MoneyConst.yuanbao),this.m_PriceImg10.source=MoneyManger.MoneyConstToSource(MoneyConst.yuanbao)}}},t.prototype.onClickBuy=function(e){if(this.type){var t=GameLogic.ins().actorModel.coupon,i=GlobalConfig.ins("ticketTreasureHuntConfig");if(i)switch(e.currentTarget){case this.m_BuyBtn1:if(t>=i.huntOnce)return void CouponSproto.ins().sendTreasure(1);UserWarn.ins().setBuyGoodsWarn(MoneyConst.COUPON),UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st102103);break;case this.m_BuyBtn10:if(t>=i.huntTenth)return void CouponSproto.ins().sendTreasure(2);UserWarn.ins().setBuyGoodsWarn(MoneyConst.COUPON),UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st102103)}}else{var o=GameLogic.ins().actorModel.yb,s=0,n=GlobalConfig.ins("petTreasureHuntConfig");if(n)switch(s=UserBag.ins().getBagGoodsCountById(0,n.itemid),e.currentTarget){case this.m_BuyBtn1:if(s>=1)return void PetSproto.ins().sendTreasure(0);if(o>=n.huntOnce)return void PetSproto.ins().sendTreasure(0);UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100405);break;case this.m_BuyBtn10:if(s>=10)return void PetSproto.ins().sendTreasure(1);if(o>=n.huntTenth)return void PetSproto.ins().sendTreasure(1);UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100405)}}},t.prototype.checkGadGuide=function(){14==Setting.currPart&&3==Setting.currStep&&(GuideUtils.ins().show(this.m_CloseBtn,14,3),this.m_CloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGadGuide,this))},t.prototype.onClickGadGuide=function(){GuideUtils.ins().next(this.m_CloseBtn),this.m_CloseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGadGuide,this),GameGlobal.MessageCenter.dispatch(PetEvt.PET_TREASUREGUIDE_END),ViewManager.ins().close(this)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(PetTreasureResultWin.prototype,"PetTreasureResultWin"),ViewManager.ins().reg(PetTreasureResultWin,LayerManager.UI_Popup),window.PetTreasureResultWin=PetTreasureResultWin;var PetTreasureWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100462,t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.petTreasurePanel=new PetTreasurePanel,this.petTreasurePanel.name=GlobalConfig.jifengTiaoyueLg.st100404,this.commonWindowBg.AddChildStack(this.petTreasurePanel),PetSproto.ins().sendGetPetInitMsg(),PetSproto.ins().sendPetAttachInit()},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e&&e[0]),this.updateRedPoint()},t.prototype.close=function(){this.petTreasurePanel.release(),this.commonWindowBg.OnRemoved()},t.prototype.updateRedPoint=function(){},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(PetTreasureWin.prototype,"PetTreasureWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(PetTreasureWin,LayerManager.UI_Main),window.PetTreasureWin=PetTreasureWin;var EquipChang=function(e){function t(){var t=e.call(this)||this;return t.time=8,t.index=0,t.roleIndex=0,t.handle=0,t.skinName="EquipChangeSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.visible=!1,MessageCenter.ins().addListener(MessageDef.BAG_HAS_ITEM_CAN_USE,this.setData,this),this.m_MainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMain,this)},t.prototype.setData=function(){if(!(UserFb.ins().guanqiaID<3)&&0==this.visible)for(var e=[],t=0;t<SubRoles.ins().subRolesLen;t++){var i=SubRoles.ins().getSubRoleByIndex(t);e=UserRole.ins().checkHaveCan(!1,t);for(var o=0;o<e.length;o++){var s=i.getEquipByIndex(o),n=e[o];if(n&&n.handle!=s.item.handle)return this.roleIndex=t,this.index=o,this.visible=!0,this.handle=n.handle,this.m_ItemBase.data=n,this.m_ItemBase.dataChanged(),this.m_Title.text=n.itemConfig.name,this.m_LvLab.text=this.m_ItemBase.nameTxt.text,this.m_ItemBase.isShowName(!1),void this.addTime()}}},t.prototype.addTime=function(){this.removeTime(),TimerManager.ins().doTimer(1e3,0,this.changeBtnText,this),this.changeBtnText()},t.prototype.removeTime=function(){TimerManager.ins().remove(this.changeBtnText,this)},t.prototype.changeBtnText=function(){this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100665+"("+this.time+")",this.time<=0&&this.onClickMain(),this.time--},t.prototype.onClickMain=function(){this.removeTime(),this.visible=!1,UserEquip.ins().sendWearEquipment(this.handle,this.index,this.roleIndex),egret.setTimeout(this.setData,this,1e3),this.time=8},t}(eui.Component);__reflect(EquipChang.prototype,"EquipChang"),window.EquipChang=EquipChang;var MainCityView=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ruleList=[],t.ruleEff={},t.btnInitPoint=[],t.mainBgW=1497,t.mainBgH=1e3,t.topNum=80,t.GadBtnGuideNum=429,t.liHaiAddNum=35,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this);var t=this;t.skinName="MainCityViewSkin",this.scroller.throwSpeed=.15,Main.isLiuhai&&(this.groupTop.top=140),this.fuBenBtn.redPoint.x=70,this.fuBenBtn.redPoint.y=47,this.GadBtn.redPoint.x=63,this.GadBtn.redPoint.y=5,this.bossBtn.redPoint.x=117,this.bossBtn.redPoint.y=25,this.guildBtn.redPoint.x=103,this.guildBtn.redPoint.y=57,this.ladderBtn.redPoint.x=67,this.ladderBtn.redPoint.y=53,this.artifactBtn.redPoint.x=73,this.artifactBtn.redPoint.y=64,RuleIconBase.thisUpdateCity=t.updateRuleAndSort,RuleIconBase.thisObjCity=t,t.ruleList[t.CDkey.hashCode]=new CDkeyIconRule(t.CDkey),t.ruleList[t.partner.hashCode]=new PartnerIconRule(t.partner),t.ruleList[t.expGold.hashCode]=new ExpGoldIconRule(t.expGold),t.ruleList[t.hlqdIcon.hashCode]=new ActivityHlqdIconRule(t.hlqdIcon),t.ruleList[t.funcOpenGroup.hashCode]=new FuncOpenIconRule(t.funcOpenGroup),t.ruleList[t.petTreasureBtn.hashCode]=new PetTreasureIconRule(t.petTreasureBtn),t.ruleList[t.vip5Btn.hashCode]=new VIP5IconRule(t.vip5Btn),t.ruleList[t.shenmiBtn.hashCode]=new ShenmiIconRule(t.shenmiBtn),t.ruleList[t.zaEgg.hashCode]=new ZaEggIconRule(t.zaEgg),t.ruleList[t.dayOneActivity.hashCode]=new DayOneActivityIconRule(t.dayOneActivity),t.ruleList[t.feedback.hashCode]=new FeedbackIconRule(t.feedback),t.ruleList[t.setingBtn.hashCode]=new SetingIconRule(t.setingBtn),t.ruleList[t.shopBtn.hashCode]=new ShopIconRule(t.shopBtn),t.ruleList[this.rechargeBtn.hashCode]=new FirstRecharge1IconRule(this.rechargeBtn),t.ruleList[t.GadBtn.hashCode]=new GadIconRule(t.GadBtn),t.ruleList[t.ladderBtn.hashCode]=new LadderBtnIconRule(t.ladderBtn),t.ruleList[t.palyFunBtn.hashCode]=new GamePlayIconRule(t.palyFunBtn),t.ruleList[t.guildBtn.hashCode]=new GuildIconRule(t.guildBtn),t.ruleList[t.bossBtn.hashCode]=new BossIconRule(t.bossBtn),t.ruleList[t.artifactBtn.hashCode]=new ArtifactIconRule(t.artifactBtn),t.ruleList[t.fuBenBtn.hashCode]=new FbBtnIconRule(t.fuBenBtn),this.ruleList[this.rankBtn.hashCode]=new RankingBtnIcon(this.rankBtn),this.ruleList[this.qrcodeBtn.hashCode]=new QrcodeIconRule(this.qrcodeBtn),this.ruleList[this.mailBtn.hashCode]=new MailIconRule(this.mailBtn),this.ruleList[this.treasureHuntBtn.hashCode]=new TreasureIconRule(this.treasureHuntBtn),this.initMapPoint()
},t.prototype.initData=function(){},t.prototype.open=function(){var e=this;e.scroller&&e.scroller.viewport&&(e.scroller.viewport.scrollH=480),this.onChangShow(),this.GadBtnGuide.visible=!1,this.m_GuidePetTreasureBtn.visible=!1,this.AddClick(e.groupTop,e._onTouchIcon),this.AddClick(e.m_CityGroup1,e._onTouchIcon),this.AddClick(e.m_CityGroup2,e._onTouchIcon),this.AddClick(e.m_CityGroup3,e._onTouchIcon),this.AddClick(e.m_CityGroup4,e._onTouchIcon),this.AddClick(this.m_GuidePetTreasureBtn,this.onClickGadGuide2),this.AddClick(this.funcOpenGroup,this._onTouchIcon),this.scroller.addEventListener(egret.Event.CHANGE,this.onChangShow,this),this.onChage(),e.startUpdateRule(),e.sortBtnList(),e._bgWidth=960,e._stageWidth=StageUtils.ins().getWidth(),this.checkGadGuide();var t=SoundSetPanel.getSoundLocalData("soundBg");t&&SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[3].id,-1)},t.prototype.close=function(){e.prototype.close.call(this);var t=this;this.scroller.removeEventListener(egret.Event.CHANGE,this.onChangShow,this),t.removeObserve(),t.removeEvents(),t.removeRuleEvent();var i=ViewManager.ins().getView(UIView2);null!=i&&i.closeNav(UIView2.NAV_CITY);var o=SoundSetPanel.getSoundLocalData("soundBg");o&&(GameMap.IsNoramlLevel()&&SoundUtils.getInstance().isSoundPlaying(GlobalConfig.soundConfig[3].id)?SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[1].id,-1):GameMap.IsNoramlLevel()?SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[1].id,-1):SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[2].id,-1))},t.prototype.initMapPoint=function(){this.m_InitPointGroup0.x=-300,this.m_InitPointGroup1.x=-250,this.m_InitPointGroup2.x=-320,this.m_InitPointGroup3.x=260,this.m_InitPointGroup4.x=-112},t.prototype.onChangShow=function(){if(this.scroller&&this.scroller.viewport){var e=this.scroller.viewport.scrollH;this.m_CityGroup0.x=0-e*-.8,this.m_CityGroup1.x=0-e*-.5,this.m_CityGroup2.x=0-0*e,this.m_CityGroup3.x=0-.5*e,this.m_CityGroup4.x=0-1*e}},t.prototype._onTouchIcon=function(e){this.ruleList[e.target.hashCode]&&this.ruleList[e.target.hashCode].tapExecute()},t.prototype.addRuleEvent=function(){var e;for(var t in this.ruleList)e=this.ruleList[t],e.updateMessage&&e.addEvent()},t.prototype.removeRuleEvent=function(){for(var e=this,t=0,i=e.ruleList;t<i.length;t++){var o=i[t];if(o&&o.updateMessage)for(var s=0;s<o.updateMessage.length;s++)o.removeEvent()}},t.prototype._onTouchDown=function(e){var t=this;t._startMoveX=e.stageX,t._moveFlag=!0,t._curXCenter=t.horizontalCenter,this._posList=[]},t.prototype._onTouchMove=function(e){var t=this;if(this._moveFlag){var i=e.stageX-this._startMoveX,o=t._curXCenter+i;o>(this._bgWidth-this._stageWidth)/2||o<-(this._bgWidth-this._stageWidth)/2||(this._posList.push(o),this._moveMapBg())}},t.prototype._onTouchEnd=function(e){var t=this;t._moveFlag=!1},t.prototype._moveMapBg=function(){var e=this;if(this._posList!=[]&&0!=this._posList.length){egret.Tween.removeTweens(this);var t=this._posList.shift();egret.Tween.get(this,{onChange:this._tweenSyncFun,onChangeObj:this}).to({horizontalCenter:t},Math.abs(t-this.horizontalCenter)).call(function(){e._moveMapBg()})}},t.prototype._tweenSyncFun=function(){var e=this;e.groupTop.x=(this._bgWidth-this._stageWidth)/2-e.horizontalCenter},t.prototype.updateRuleAndSort=function(e){this.updateRule(e),this.sortBtnList()},t.prototype.startUpdateRule=function(){for(var e in this.ruleList)this.updateRule(this.ruleList[e])},t.prototype.sortBtnList=function(){for(var e=this,t=0,i=6,o=68,s=0,n=e.groupTop.numChildren;n>s;s++){var r=e.groupTop.getChildAt(s);"rank"!=r.name&&"online"!=r.name&&"dailyRechar"!=r.name&&r.visible&&(r.x=t%i*o,r.y=Math.floor(t/i)*o,t++)}},t.prototype.updateRule=function(e){if(null!=e&&null!=e.tar){var t,i,o,s=e.tar,n=e.checkShowIcon(),r=s.icon,a=this;if(n){if(s.parent||this.groupTop.addChild(s),s instanceof eui.Group&&"luckIcon"==s.name)for(var l=s.numChildren,h=0;l>h;h++){var c=s.getChildAt(h);"redPoint"==c.name&&(c.visible=e.checkShowRedPoint())}if(s.redPoint&&(o="ui_zjm_icon_fl"==r?a.fuliRedPoint():e.checkShowRedPoint(),UIHelper.ShowRedPoint(s,o),s.count&&(s.count.text=o?o:"")),GameGlobal.actorModel.level>=3)if(t=e.getEffName(o))if(a.ruleEff[s.hashCode]&&a.ruleEff[s.hashCode].parent)a.ruleEff[s.hashCode].play(-1);else{i=a.getEff(s.hashCode,t),i.x=e.effX,i.y=e.effY,i.scaleX=i.scaleY=.7;var u=2;s.addChildAt(i,u)}else DisplayUtils.removeFromParent(a.ruleEff[s.hashCode])}else DisplayUtils.removeFromParent(s),DisplayUtils.removeFromParent(a.ruleEff[s.hashCode])}},t.prototype.fuliRedPoint=function(){return MoneyTreeModel.ins().isHaveReward()||FindAssetsModel.ins().HasFindAssets()||DayLoginIconRule.ShowRedPoint()||ActivityModel.ins().checkMonthSingRedPoint()},t.prototype.getEff=function(e,t){var i=this;return i.ruleEff[e]?i.ruleEff[e]:(i.ruleEff[e]=i.ruleEff[e]||new MovieClip,i.ruleEff[e].touchEnabled=!1,t&&GameGlobal.actorModel.level>=3&&i.ruleEff[e].loadUrl(ResDataPath.GetUIEffePath(t),!0,-1),i.ruleEff[e])},t.prototype.checkGadGuide=function(){20==Setting.currPart&&1==Setting.currStep&&(this._updateScrollerH(this.GadBtn.x),this.GadBtnGuide.visible=!0,this.GadBtn.visible=!1,egret.setTimeout(function(){GuideUtils.ins().show(this.GadBtnGuide,20,1),this.GadBtnGuide.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGadGuide,this)},this,100)),14==Setting.currPart&&1==Setting.currStep&&(this.m_GuidePetTreasureBtn.visible=!0,this.m_GuidePetTreasureBtn.x=728,GuideUtils.ins().show(this.m_GuidePetTreasureBtn,14,1))},t.prototype._updateScrollerH=function(e){this.scroller&&this.scroller.viewport&&(this.scroller.viewport.scrollH=340),this.onChangShow()},t.prototype.onClickGadGuide=function(){GuideUtils.ins().next(this.GadBtnGuide),this.GadBtnGuide.visible=!1,this.GadBtn.visible=!0,this.GadBtnGuide.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGadGuide,this),this.ruleList[this.GadBtn.hashCode]&&this.ruleList[this.GadBtn.hashCode].tapExecute()},t.prototype.onClickGadGuide2=function(){GuideUtils.ins().next(this.m_GuidePetTreasureBtn),this.m_GuidePetTreasureBtn.visible=!1,ViewManager.ins().open(PetTreasureWin)},t.prototype.onChage=function(){var e=StageUtils.ins().getHeight()/800;if(e>1){this.scroller.height=800*e;var t=-((StageUtils.ins().getHeight()-800)/2);Main.isLiuhai?(this.scroller.y=t+this.liHaiAddNum,this.groupTop.top=this.topNum+t+this.liHaiAddNum,this.GadBtnGuide.y=this.GadBtnGuideNum+t+this.liHaiAddNum,this.m_GuidePetTreasureBtn.y=this.topNum+t+this.liHaiAddNum):(this.scroller.y=t,this.groupTop.top=this.topNum+t,this.GadBtnGuide.y=this.GadBtnGuideNum+t,this.m_GuidePetTreasureBtn.y=this.topNum+t)}else this.scroller.height=800,this.scroller.y=0,this.groupTop.top=this.topNum,this.GadBtnGuide.y=this.GadBtnGuideNum,this.m_GuidePetTreasureBtn.y=this.topNum},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(MainCityView.prototype,"MainCityView"),window.MainCityView=MainCityView;var __ref_field__=Guild,PlayFun=function(e){function t(){var t=e.call(this)||this;return t.moduleProArr=[],t.redPointList=[],t.redNavigateList=[],t.autoOpenShouChong=0,t.isCheckTimering=!1,t.isCheckAnimTimering=!1,t.index=0,t.noTips=!1,MessageCenter.addListener(UserFb.ins().postWaveChange,t.updateAutoPk,t),t.regNetMsg(S2cProtocol.sc_public_boss_reborn_notice,t.sc_public_boss_reborn_notice),t.regNetMsg(S2cProtocol.sc_funopen_res,t.modulePromptfun),GameGlobal.MessageCenter.addListener(MessageDef.MODULE_PROMPT_CLOSE,t.openModulePrompt,t),t.regNetMsg(S2cProtocol.sc_func_tips,t.redPoint),t.regNetMsg(S2cProtocol.sc_exten_info,t.redNavigate),t}return __extends(t,e),t.prototype.modulePromptfun=function(e){e&&(this.moduleProArr=this.moduleProArr.concat(e.id),this.openModulePrompt())},t.prototype.openModulePrompt=function(e){void 0===e&&(e=null);var t=this.moduleProArr.length;t>0&&!GuideUtils.ins().isShow()&&ViewManager.ins().open(ModulePrompt,this.moduleProArr.shift())},t.ins=function(){return e.ins.call(this)},t.prototype.autoTimeer=function(){!Recharge.ins().getFirstRechargeState()||GameServer.serverMergeTime||0!=t.ins().autoOpenShouChong||this.isCheckTimering||(this.removeAutoTimer(),TimerManager.ins().doTimer(3e5,1,this._timerOutComplete,this),this.isCheckTimering=!0)},t.prototype._timerOutComplete=function(){GameGlobal.MessageCenter.dispatch(MessageDef.AUTO_OPENSHOUCHONG_COMPLET),t.ins().autoOpenShouChong=1,this.removeAutoTimer()},t.prototype.removeAutoTimer=function(){TimerManager.ins().remove(this._timerOutComplete,this)},t.prototype.autoAnimTimeer=function(){var e,t=0,i=GlobalConfig.ins("ChongZhiAdvertisementConfig");GameServer.serverMergeTime>0?(t=i[2].effective,e=i[2]):(t=i[1].effective,e=i[1]),Recharge.ins().getFirstRechargeState()&&t&&e&&!this.isCheckAnimTimering&&(this.removeAnimTime(),TimerManager.ins().doTimer(1e3*e.time,1,this.sendFirstPlayAnim,this),this.isCheckAnimTimering=!0)},t.prototype.sendFirstPlayAnim=function(){if(!Recharge.ins().getFirstRechargeState())return void this.removeAnimTime();var e,t=0,i=GlobalConfig.ins("ChongZhiAdvertisementConfig");GameServer.serverMergeTime>0?(t=i[2].effective,e=i[2]):(t=i[1].effective,e=i[1]),Recharge.ins().getFirstRechargeState()&&t&&e&&(this.removeSecAnimTime(),TimerManager.ins().doTimer(1e3*e.rate,0,this.sendSedPlayAnim,this)),GameGlobal.MessageCenter.dispatch(MessageDef.AUTO_OPENSHOUCHONGANIM_COMPLET)},t.prototype.removeAnimTime=function(){TimerManager.ins().remove(this.sendFirstPlayAnim,this)},t.prototype.sendSedPlayAnim=function(){return Recharge.ins().getFirstRechargeState()?void GameGlobal.MessageCenter.dispatch(MessageDef.AUTO_OPENSHOUCHONGANIM_COMPLET):void this.removeSecAnimTime()},t.prototype.removeSecAnimTime=function(){TimerManager.ins().remove(this.sendSedPlayAnim,this)},t.prototype.sc_public_boss_reborn_notice=function(e){this.index=e.index,GameGlobal.MessageCenter.dispatch(MessageDef.PUBLIC_BOSS_REBIRTHT_TIPS)},t.prototype.sendAutoOpen=function(){t.ins().autoOpenShouChong=2;var e=new Sproto.cs_set_is_open_payfrist_request;e.value=1,this.Rpc(C2sProtocol.cs_set_is_open_payfrist,e)},t.prototype.closeAuto=function(){var e=ViewManager.ins().getView(PlayFunView);e&&(e.autoPkBoss.selected=!1)},t.prototype.upDataWillBoss=function(){var e=ViewManager.ins().getView(PlayFunView);e&&e.upDataWillBoss()},t.prototype.updateAutoPk=function(){if(!GameMap.IsNoramlLevel())return void console.log("正在挑战其它关卡，取消自动挂机挂机关卡挑战");if(!GuanQiaModel.getInstance.checkIsCanGoNextLayer()){null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig"));var e=UserFb.ins().guanqiaID;!this.chaptersConfig[e];var t=this.chaptersConfig[e].bossNeedWave,i=Math.min(UserFb.ins().killMonsterCount,t),o=ViewManager.ins().getView(PlayFunView);o&&o.autoPkBoss.selected&&i>=t&&(UserBag.ins().getSurplusCount()<UserBag.BAG_ENOUGH?(o.autoPkBoss.selected=!1,UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101919)):GameLogic.ins().startPkBoss())}},t.prototype.AWYShowQrCode=function(e){},t.prototype.redPoint=function(e){var t=e.data;if(void 0!=t){for(var i=0,o=t;i<o.length;i++){var s=o[i];null==this.redPointList[s.id]&&(this.redPointList[s.id]=new RedPointInfo),this.redPointList[s.id].parse(s)}GameGlobal.MessageCenter.dispatch(MessageDef.REDPOINT_STATE)}},t.prototype.redNavigate=function(e){t.ins().redNavigateList=e.list,MessageCenter.ins().dispatch(MessageDef.REDPOINT_NAVIGATE_UPDATE)},t.prototype.getRedNavigetList=function(){return t.ins().redNavigateList},t.prototype.getFuncRedById=function(e,t){void 0===t&&(t=null);var i=this.redPointList[e];return void 0==i||void 0==i.state?!1:null!=t?-1!=i.state.indexOf(t):i.state.length>0},t}(BaseSystem);__reflect(PlayFun.prototype,"PlayFun"),MessageCenter.compile(PlayFun),window.PlayFun=PlayFun;var PlayFunView=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t.ruleList=[],t.ruleEff={},t.isIconOpen=!0,t.t_num=[0,0,0,0],t.isopen=!1,t.time=10,t.m_TaskXPos=null,t._tweenObj={},t.m_TipList=[],t.m_UpTip=null,t.navigateItemList=[],t}return __extends(t,e),t.prototype.destoryView=function(){},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.playSound()},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainPlayFunViewSkin",this.m_SCAnim.release(),Main.isLiuhai&&(this.groupIcon.top=40,this.navigateToBtn.y+=40,this.navigateToPanel.y+=40),this.m_IconControlRedPoint.visible=!1,this.guanqiaBtn.guangqiabar.value=0,RuleIconBase.thisUpdate=this.updateRuleAndSort,RuleIconBase.thisObj=this,this.m_GoNextLayerGroup.visible=!1,this.isExitUsedItem=!1,this.isItemCountChange=!1,this.ruleList[this.m_PKBtn.hashCode]=new LadderBtnIconRule(this.m_PKBtn),this.ruleList[this.m_BossBtn.hashCode]=new BossIconRule(this.m_BossBtn),this.ruleList[this.m_FbBtn.hashCode]=new FbBtnIconRule(this.m_FbBtn),this.ruleList[this.m_StrongBtn.hashCode]=new StrongIconRule(this.m_StrongBtn),this.ruleList[this.guanqiaBtn.hashCode]=new GuangqiaIconRule(this.guanqiaBtn),this.ruleList[this.taskTraceBtn.hashCode]=new TaskTraceIconRule(this.taskTraceBtn),this.ruleList[this.activityBtn.hashCode]=new ActivityIconRule(this.activityBtn),this.ruleList[this.actWIcon.hashCode]=new ActivityWIconRule(this.actWIcon),this.ruleList[this.hfhdIcon.hashCode]=new ActivityHfhdIconRule(this.hfhdIcon),this.ruleList[this.tjhlIcon.hashCode]=new ActivityTjhlIconRule(this.tjhlIcon),this.ruleList[this.firstRechargeBtn.hashCode]=new FirstRechargeIconRule(this.firstRechargeBtn),this.ruleList[this.btnYbTurntable.hashCode]=new YbTurntableIconRule(this.btnYbTurntable),this.ruleList[this.guildWar.hashCode]=new GuildWarIconRule(this.guildWar),this.ruleList[this.ringIcon.hashCode]=new RingIconRule(this.ringIcon),this.ruleList[this.monthCard.hashCode]=new MonthCardIconRule(this.monthCard),this.ruleList[this.dayTarget.hashCode]=new DayTargetIconRult(this.dayTarget),this.ruleList[this.zsboss.hashCode]=new ZsBossIconRule(this.zsboss),this.ruleList[this.sbwakuang.hashCode]=new DoubleMiningIconRule(this.sbwakuang),this.ruleList[this.sbDartCar.hashCode]=new DoubleDartCarIconRule(this.sbDartCar),this.ruleList[this.worldBoss.hashCode]=new WorldBossIconRule(this.worldBoss),this.ruleList[this.zhuanZhiTask.hashCode]=new ZhuanZhiTaskIconRule(this.zhuanZhiTask),this.ruleList[this.m_LuckIcon.hashCode]=new LuckIconRule(this.m_LuckIcon),this.ruleList[this.shareBtn.hashCode]=new ShareIconRule(this.shareBtn),this.ruleList[this.taskBtn.hashCode]=new DaliyTaskIconRule(this.taskBtn),this.ruleList[this.growUpBtn.hashCode]=new GrowUpRoadconRule(this.growUpBtn),this.ruleList[this.oneMoneyBtn.hashCode]=new ActivityOneMoneyRule(this.oneMoneyBtn),this.ruleList[this.dayBuy302.hashCode]=new DayBuy302IconRule(this.dayBuy302),this.ruleList[this.heroBattle.hashCode]=new ActivityHearoBattleRule(this.heroBattle),this.ruleList[this.omGifBagBtn.hashCode]=new OmGifBagRule(this.omGifBagBtn),this.ruleList[this.m_ChaosBattleBtn.hashCode]=new ChaosBattleRule(this.m_ChaosBattleBtn),this.ruleList[this.warOrderBtn.hashCode]=new WarOrderRule(this.warOrderBtn),this.ruleList[this.CouponTreBtn.hashCode]=new CouponTreIconRule(this.CouponTreBtn);for(var t in this.ruleList){var i=this.ruleList[t];i&&i.parentGpuop&&(i.layerCount=i.parentGpuop.getChildIndex(i.tar))}this.tipGroup.itemRenderer=PlayFunTipBtn,this.tipGroupList=new eui.ArrayCollection,this.tipGroup.dataProvider=this.tipGroupList,StartGetUserInfo.isOne&&(this.shouchongTIP.stage&&DisplayUtils.removeFromParent(this.shouchongTIP),this.huobanTip.stage&&DisplayUtils.removeFromParent(this.huobanTip)),this.navigateToInit()},t.prototype.openShouchong=function(){UserFb.ins().CheckFb()&&!GuideUtils.ins().isShow()&&(WxSdk.ins().isHidePay()||ViewManager.ins().open(Recharge1GetWin),PlayFun.ins().sendAutoOpen())},Object.defineProperty(t.prototype,"_ruleList",{get:function(){return this.ruleList},enumerable:!0,configurable:!0}),t.prototype.open=function(){if(this.addChangeEvent(this,this.onChange,this.autoPkBoss),this.addTouchEvent(this,this.onTap,this.guanqiaBtn),this.addTouchEvent(this,this.onTap,this.activityBtn),this.addTouchEvent(this,this.onTap,this.dayTarget),this.addTouchEvent(this,this.onTap,this.heroBattle),this.addTouchEvent(this,this.onTap,this.m_ChaosBattleBtn),this.addTouchEvent(this,this.onTap,this.ringIcon),this.addTouchEvent(this,this.onTap,this.zhuanZhiTask),this.addTouchEvent(this,this.onTap,this.oneMoneyBtn),this.AddClick(this.navigateToBtn,this.onTap),this.AddClick(this.willBossPrompt,this.onTap),this.AddClick(this.m_GoNextLayerGroup,this.onClickGoNextLayer),this.AddClick(this.groupIcon,this._onTouchIcon),this.AddClick(this.m_IconControl,this.onClcikIconControl),this.observe(MessageDef.BAG_ITEM_COUNT_CHANGE,this.showforgeBtnRedPoint),this.observe(MessageDef.BAG_WILL_FULL,this.setBagTips),this.observe(MessageDef.BAG_HAS_ITEM_CAN_USE,this.setIsExitUsedItem),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.updateTaskPoint),this.observe(MessageDef.ACTOR_PRESTIGE_UPDATE,this.updateTaskPoint),this.observe(MessageDef.RAID_KILL_MONSTER_COUNT,this.upDataGuanqia),this.observe(GameLogic.ins().postLevelChange,this.levelChange),this.observe(UserTask.postUpdteTaskTrace,this.changeTaskTrace),this.observe(MessageDef.ENCOUNTER_PLAYER_ROB,this.UpdateEncounterRobState),this.observe(MessageDef.ZS_BOSS_OPEN,this._UpdateZsBossTip),this.observe(MessageDef.MINE_STATU_CHANGE,this._UpdateTipGroup),this.observe(MessageDef.DARTCAR_STATU_CHANGE,this._UpdateTipGroup),this.observe(ZsBoss.ins().postBossList,this._UpdateTipGroup),this.observe(MessageDef.GUILD_BOSS_OPEN_INFO,this._UpdateTipGroup),this.observe(MessageDef.GUILDWAR_REDBAGINFO_CHANGE,this._UpdateTipGroup),this.observe(MessageDef.AUTO_OPENSHOUCHONG_COMPLET,this.openShouchong),this.observe(MessageDef.GUANQIA_CHANGE,this.checkQuanQiaCanGoNext),this.observe(MessageDef.GUIDE_ADDEQUIP_END,this.checkLastAddEquipGuide),this.observe(UserFb.ins().postGuanKaIdChange,this.evtChangeGuanQia),this.observe(MessageDef.LUCKGIFTBAG_DATA_UPDATE,this.startUpdateRule),this.observe(MessageDef.PUBLIC_BOSS_REBIRTHT_TIPS,this.publicBossRebirthtTips),this.observe(MessageDef.ACTIVITY_IS_AWARDS,this.startUpdateRule),this.observe(MessageDef.REDPOINT_NAVIGATE_UPDATE,this.navigateToUpdate),this.observe(TeamFbEvt.TEAMFB_UPDATE_DATA,this._UpdateTipGroup),this.observe(MessageDef.AUTO_OPENSHOUCHONGANIM_COMPLET,this.openAnim),this.observe(OmgGifBagEvt.OMGGIFBAG_UPDATE,this.startUpdateRule),this.observe(ChaosBattleEvt.CHAOSBATTLE_DATAUPDATE_MSG,this.startUpdateRule),this.observe(WarOrderEvt.WARORDEREVT_DATAUPDATE_MSG,this.startUpdateRule),this.upDataGuanqia(),this.changeTaskTrace(),this.updateTaskPoint(),this.addRuleEvent(),this.startUpdateRule(),this.upDataWillBoss(),this.UpdateEncounterRobState(),this.changeGuanQia(),FuncOpenModel.SAVE_DATA_FALG)var e=egret.setTimeout(function(){egret.clearTimeout(e),FuncOpenModel.SAVE_DATA_FALG&&ViewManager.ins().isShow(t)&&(FuncOpenModel.SAVE_DATA_FALG=!1,ViewManager.ins().open(ChargeFirstWin))},this,500);this.isopenTime(0),1==PlayFun.ins().autoOpenShouChong&&(WxSdk.ins().isHidePay()||ViewManager.ins().open(Recharge1GetWin),PlayFun.ins().sendAutoOpen());var i=ViewManager.ins().getView(BossBloodPanel);i&&ViewManager.ins().close(BossBloodPanel),this.publicBossRebirthtTips(),this.addTime()},t.prototype.addTime=function(){this.removeRuleTime(),TimerManager.ins().doTimer(1e3,0,this.upDateRuleTime,this)},t.prototype.removeRuleTime=function(){TimerManager.ins().remove(this.upDateRuleTime,this)},t.prototype.isopenTime=function(e){if(GameGlobal.rolesModel.length<2?this.isopen=!0:Recharge.ins().getFirstRechargeState()?this.isopen=!0:this.isopen=!1,this.isopen)if(0==e)for(var t=0;4>t;t++)this.creatqipao(t+1);else this.creatqipao(e)},t.prototype.creatqipao=function(e){null==this.NoticeBubbleConfig&&(this.NoticeBubbleConfig=GlobalConfig.ins("NoticeBubbleConfig"));var t=this.NoticeBubbleConfig;switch(e){case 1:break;case 4:break;case 3:break;case 2:Recharge.ins().getFirstRechargeState()&&(0==this.t_num[e-1]?(this.t_num[e-1]++,this.creatTime(t[e].time,1,this.shouchongTIPfun,this)):this.creatTime(t[e].rate,1,this.shouchongTIPfun,this))}},t.prototype.creatTime=function(e,t,i,o){TimerManager.ins().doTimer(500*e,t,i,o)},t.prototype.xunbaoTipfun=function(){this.xunbaoTip.visible=!0,null==this.NoticeBubbleConfig&&(this.NoticeBubbleConfig=GlobalConfig.ins("NoticeBubbleConfig")),this.xunbaoTipLabel.text=this.NoticeBubbleConfig[1].content,this.creatTime(this.NoticeBubbleConfig[1].lasttime,1,this.closexunbaoTipfun,this),this.isopenTime(1)},t.prototype.shenqiTipfun=function(){null==this.NoticeBubbleConfig&&(this.NoticeBubbleConfig=GlobalConfig.ins("NoticeBubbleConfig")),this.shenqiTip.visible=!0,this.shenqiLabel.text=this.NoticeBubbleConfig[4].content,this.creatTime(this.NoticeBubbleConfig[4].lasttime,1,this.closeshenqiTipfun,this),this.isopenTime(4)},t.prototype.huobanTipfun=function(){null==this.NoticeBubbleConfig&&(this.NoticeBubbleConfig=GlobalConfig.ins("NoticeBubbleConfig")),this.huobanTip.visible=!0,this.creatTime(this.NoticeBubbleConfig[3].lasttime,1,this.closehuobanTipfun,this),this.isopenTime(3)},t.prototype.shouchongTIPfun=function(){null==this.NoticeBubbleConfig&&(this.NoticeBubbleConfig=GlobalConfig.ins("NoticeBubbleConfig")),this.shouchongTIP.visible=!WxSdk.ins().isHidePay(),this.shouchongTIPLabel.text=this.NoticeBubbleConfig[2].content;var e=this.firstRechargeBtn.localToGlobal();this.shouchongTIP.y=e.y+10,this.creatTime(this.NoticeBubbleConfig[2].lasttime,1,this.closeshouchongTIPfun,this),this.isopenTime(2)},t.prototype.closexunbaoTipfun=function(){this.xunbaoTip.visible=!1},t.prototype.closeshenqiTipfun=function(){this.shenqiTip.visible=!1},t.prototype.closehuobanTipfun=function(){this.huobanTip.visible=!1},t.prototype.closeshouchongTIPfun=function(){this.shouchongTIP.visible=!1},t.prototype.closeTipIndex=function(){this.xunbaoTip.visible=!1,this.shenqiTip.visible=!1,this.huobanTip.visible=!1,this.shouchongTIP.visible=!1},t.prototype.close=function(){this.closeTipIndex(),this.removeObserve(),this.removeEvents(),this.removeRuleEvent(),this._ClearEncounterRobStateTimer(),TimerManager.ins().removeAll(this),this.removeRuleTime();for(var e in this.ruleEff)DisplayUtils.dispose(this.ruleEff[e]),this.ruleEff[e]=null;this.ruleEff={},this.guanqiaBtn.guangqiabar.mask=null,this.guanqiaBtn.guangqiabar.visible=!1,this._checkFinger(this.taskTraceBtn,!1),this._curGuanqiaID=null,this.isShowRebirthtTips(!1)},t.prototype._onTouchIcon=function(e){this.ruleList[e.target.hashCode]&&this.ruleList[e.target.hashCode].tapExecute()},t.prototype._ClearEncounterRobStateTimer=function(){this.pkRobTipGroup.visible=!1,Encounter.ins().mPlayerRobInfo=null,TimerManager.ins().remove(this._ClearEncounterRobStateTimer,this)},t.prototype.UpdateEncounterRobState=function(){this.pkRobTipGroup.visible=!1;var e=Encounter.ins().mPlayerRobInfo;if(e){this.pkRobTipGroup.visible=!0,TimerManager.ins().remove(this._ClearEncounterRobStateTimer,this),TimerManager.ins().doTimer(5e3,1,this._ClearEncounterRobStateTimer,this);var t=GlobalConfig.itemConfig[e.itemId||600001];this.pkRobTipLabel.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101415,[e.name,ItemBase.QUALITY_COLOR_STR[t.quality],t.name]))}},t.prototype.addRuleEvent=function(){var e;for(var t in this.ruleList)e=this.ruleList[t],e.updateMessage&&e.addEvent()},t.prototype.removeRuleEvent=function(){for(var e=0,t=this.ruleList;e<t.length;e++){var i=t[e];if(i&&i.updateMessage)for(var o=0;o<i.updateMessage.length;o++)i.removeEvent()}},t.prototype.sortBtnList=function(){for(var e=0,t=0,i=this.groupRight.numChildren;i>t;t++){var o=this.groupRight.getChildAt(t);1==o.visible&&(o.bottom=e,e+=63)}this._sortGroupBtn()},t.prototype._sortGroupBtn=function(){for(var e=0,t=0,i=this.groupTopKF.numChildren;i>t;t++){var o=this.groupTopKF.getChildAt(t);1==o.visible&&(o.left=e,e+=58)}},t.prototype.startUpdateRule=function(){for(var e in this.ruleList)this.updateRule(this.ruleList[e]);this.sortBtnList(),this.upDataWillBoss()},t.prototype.upDateRuleTime=function(){this.time++,this.time>=10&&(this.time=0,this.startUpdateRule());for(var e in this.ruleList)this.ruleList[e].onTimer()},t.prototype.updateRuleAndSort=function(e){this.updateRule(e),this.sortBtnList()},t.prototype.updateRule=function(e){if(null!=e&&null!=e.tar){var t,i,o,s=e.tar,n=e.checkShowIcon(),r=s.icon;if(e instanceof GrowUpRoadconRule&&(1==n?(this.groupTopKF.left=94,this.groupTopKF.layout.requestedColumnCount=4):(this.groupTopKF.left=5,this.groupTopKF.layout.requestedColumnCount=5)),n){if(s!=this.guanqiaBtn&&0==GuideUtils.ins().isShow()&&(e.parentGpuop.addChildAt(s,e.layerCount),s.visible=!0),s instanceof eui.Group&&"luckIcon"==s.name)for(var a=s.numChildren,l=0;a>l;l++){var h=s.getChildAt(l);"redPoint"==h.name&&(h.visible=e.checkShowRedPoint())}if(s.redPoint&&(o="ui_zjm_icon_fl"==r?this.fuliRedPoint():e.checkShowRedPoint(),UIHelper.ShowRedPoint(s,o),s.count&&(s.count.text=o?o:"")),GameGlobal.actorModel.level>=3)if(t=e.getEffName(o))if(this.ruleEff[s.hashCode]&&this.ruleEff[s.hashCode].parent)this.ruleEff[s.hashCode].play(-1);else{i=this.getEff(s.hashCode,t),i.x=e.effX,i.y=e.effY;var c=s==this.guanqiaBtn||s==this.taskTraceBtn?1.1:.69;i.scaleX=i.scaleY=c;var u=s!=this.guanqiaBtn&&s!=this.m_LuckIcon?1:2;s.addChildAt(i,u)}else DisplayUtils.removeFromParent(this.ruleEff[s.hashCode])}else e.DestoryMc(),DisplayUtils.removeFromParent(s),DisplayUtils.removeFromParent(this.ruleEff[s.hashCode])}},t.prototype.getEff=function(e,t){return this.ruleEff[e]?this.ruleEff[e]:(this.ruleEff[e]=this.ruleEff[e]||new MovieClip,this.ruleEff[e].touchEnabled=!1,t&&GameGlobal.actorModel.level>=3&&this.ruleEff[e].loadUrl(ResDataPath.GetUIEffePath(t),!0,-1),this.ruleEff[e])},t.prototype.showGuanQiaGuide=function(){if(ViewManager.ins().isShow(t)&&!(LayerManager.UI_Main_2.numChildren>0)&&UserFb.ins().guanqiaID<=1&&UserFb.ins().isShowBossPK()&&!UserFb.ins().bossIsChallenged&&!GuideUtils.ins().isShow()){var e=ViewManager.ins().getView(GuanQiaWin);(!e||e&&0==e.isShow())&&(Setting.currPart=1,Setting.currStep=0,WelcomeWin.isOpen||GuideUtils.ins().show(this.guanqiaBtn,1,0))}},t.prototype.ShowGuanqiaAuto=function(){return ViewManager.ins().isShow(t)?LayerManager.UI_Main_2.numChildren>0?!1:void(GameMap.IsNoramlLevel()&&UserFb.ins().guanqiaID==GuideQuanQiaType.OnHook&&0==this.autoPkBoss.selected&&(Setting.currPart=9,Setting.currStep=0,GuideUtils.ins().show(this.autoPkBoss,9,0))):void 0},t.prototype.onChange=function(e){UserFb.ins().guanqiaID<GuideQuanQiaType.OnHook?(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101920),this.autoPkBoss.selected=!1):this.autoPkBoss.selected&&UserBag.ins().getSurplusCount()<UserBag.BAG_ENOUGH&&(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101919),this.autoPkBoss.selected=!1),GuideUtils.ins().next(this.autoPkBoss)},t.prototype.levelChange=function(){this._UpdateTipGroup()},t.prototype._GetContentIndex=function(e,t){for(var i=t.length-1;i>=0;--i)if(e==t[i])return i;return-1},t.prototype.onTap=function(e){if(this.closeTipIndex(),this.ruleList[e.currentTarget.hashCode])return void this.ruleList[e.currentTarget.hashCode].tapExecute();switch(e.currentTarget){case this.willBossPrompt:Encounter.ins().refreshCd>0?UserTips.InfoTip(GlobalConfig.jifengTiaoyueLg.st101416):Encounter.ins().zyKeyId>0&&ViewManager.ins().open(WildBossWin);break;case this.navigateToBtn:var t,i,o;1==this.navigateToPanel.scaleX?(t=0,i=egret.Ease.backIn,o=function(){this.navigateToPanel.visible=!1}):(t=1,i=egret.Ease.backOut,this.navigateToPanel.visible=!0,o=function(){}),egret.Tween.get(this.navigateToPanel,{loop:!1}).to({scaleX:t},300,i).call(o,this)}},t.prototype.updateTaskPoint=function(){UIHelper.ShowRedPoint(this.taskBtn,UserTask.ins().CheckAllVitalityReward()||PrestigeModel.CheckRedPoint()),this._UpdateTipGroup()},t.prototype.fuliRedPoint=function(){return MoneyTreeModel.ins().isHaveReward()||FindAssetsModel.ins().HasFindAssets()||DayLoginIconRule.ShowRedPoint()||ActivityModel.ins().checkMonthSingRedPoint()},t.prototype.changeTaskTrace=function(){var e=this,t=UserTask.ins().taskTrace;if(t){this.taskTraceBtn.visible=!0;var i=UserTask.ins().getAchieveConfById(t.id);if(i)switch(this.taskTraceAwards.text=""+i.desc,t.state){case 0:this.taskTraceName.textFlow=TextFlowMaker.generateTextFlow(i.name+"|C:0x00ff00&T:("+t.value+"/"+i.target+")|");break;case 1:this.taskTraceName.textFlow=TextFlowMaker.generateTextFlow(i.name+GlobalConfig.jifengTiaoyueLg.st101417)}this.m_TaskXPos||(this.m_TaskXPos=this.taskTraceName.x);var o=egret.Tween.get(this.taskTraceAwards);o.to({x:this.m_TaskXPos+100,alpha:0},200).to({x:0},200).to({x:this.m_TaskXPos,alpha:1},200).call(function(){egret.Tween.removeTweens(e.taskTraceAwards)});var s=egret.Tween.get(this.taskTraceName);s.to({x:this.m_TaskXPos+100,alpha:0},200).to({x:0},200).to({x:this.m_TaskXPos,alpha:1},200).call(function(){egret.Tween.removeTweens(e.taskTraceName)})}else this.taskTraceBtn.visible=!1;if(t){var n=GlobalConfig.ins("UniversalConfig").taskId;n||(n=0),this._checkFinger(this.taskTraceBtn,this._isNotGuide()&&t.id<n&&100001!=t.id)}else this._checkFinger(this.taskTraceBtn,!1)},t.prototype._checkFinger=function(e,t){if(t){if(!this._tweenObj[e.hashCode]){var i=e.getChildByName("finger");i||(i=new eui.Image("comp_67_71_1_png"),i.name="finger",e.addChild(i),i.x=75,i.y=18),egret.Tween.removeTweens(i),this._tweenObj[e.hashCode]=egret.Tween.get(i,{loop:!0}).to({x:88,y:30},200).to({x:75,y:18},200)}}else{var i=e.getChildByName("finger");i&&(egret.Tween.removeTweens(i),DisplayUtils.removeFromParent(i)),delete this._tweenObj[e.hashCode]}},t.prototype._getCurStarIdx=function(e,t,i){var o;if(0==e)o=0;else{if(3>t)return e;o=e%i==0?e/i:Math.ceil(e/i)}return o},t.prototype.upDataGuanqia=function(){var e=UserFb.ins().guanqiaID;if(e>0)if(null==this.chaptersConfig&&(this.chaptersConfig=GlobalConfig.ins("ChaptersConfig")),this.chaptersConfig[e]){var t=this.chaptersConfig[e].bossNeedWave,i=UserFb.ins().killMonsterCount;i>=t&&(TimerManager.ins().doNext(this.showGuanQiaGuide(),this),this._curGuanqiaID!=e&&(this._curGuanqiaID=e))}else Main.errorBack("关卡："+e+"  数据为null")},t.prototype._isNotGuide=function(){var e=this.getChildByName("GuideViewWeek");return null==e&&0==GuideUtils.ins().isShow()},t.prototype.upDataWillBoss=function(){Encounter.ins().refreshCd<=0&&Encounter.ins().zyKeyId>0&&Deblocking.Check(DeblockingType.TYPE_79,!0)?this.willBossPrompt.visible=!0:this.willBossPrompt.visible=!1},t.prototype.publicBossRebirthtTips=function(){var e=this;PlayFun.ins().index<=0||PlayFun.ins().noTips||(null==this.rebirthPanel&&(this.rebirthPanel=new PublicBossRebirthPanel(function(){UserBoss.ins().sendChallenge(PlayFun.ins().index),e.removeRebirthtTips()},function(){e.removeRebirthtTips()}),this.rebirthPanel.x=320,this.rebirthPanel.y=280,this.addChild(this.rebirthPanel)),this.isShowRebirthtTips(!0),this.rebirthPanel.updata())},t.prototype.isShowRebirthtTips=function(e){this.rebirthPanel&&(this.rebirthPanel.visible=e)},t.prototype.removeRebirthtTips=function(){PlayFun.ins().index=0,this.rebirthPanel&&(this.rebirthPanel.release(),DisplayUtils.removeFromParent(this.rebirthPanel),this.rebirthPanel=null)},t.prototype._UpdateZsBossTip=function(){ZsBoss.ins().acIsOpen!=this.m_UpTip&&(this.m_UpTip=ZsBoss.ins().acIsOpen,ZsBoss.ins().sendGetBossList(),this._UpdateTipGroup())},t.prototype._UpdateTipGroup=function(){null==this.jingyanyuCommonConfig&&(this.jingyanyuCommonConfig=GlobalConfig.ins("JingyanyuCommonConfig")),this.m_TipList.length=0;var e=this.jingyanyuCommonConfig.fullItemID;if(TeamFbModel.getInstance.isInRoom)return this.m_TipList.push({id:-6,icon:t.ICON_TEAM,time:0}),this.tipGroupList.removeAll(),this.tipGroupList.replaceAll(this.m_TipList),void this.tipGroupList.refresh();if(UserBag.ins().getBagItemById(e)&&GameGlobal.actorModel.level<200&&GameGlobal.actorModel.level>=this.jingyanyuCommonConfig.openLevel&&ExpjadeModel.HasUseCount()>0)return this.m_TipList.push({id:e,icon:t.ICON_EXPJADE,time:0}),this.tipGroupList.removeAll(),this.tipGroupList.replaceAll(this.m_TipList),void this.tipGroupList.refresh();if(GuildReward.ins().IsRedPointRedBag())return this.m_TipList.push({id:-4,icon:t.ICON_GUILD_RED_GUILD,time:0}),this.tipGroupList.removeAll(),this.tipGroupList.replaceAll(this.m_TipList),void this.tipGroupList.refresh();
if(ZsBoss.ins().IsRedPoint())return this.m_TipList.push({id:-1,icon:t.ICON_ZS_BOSS,time:0}),this.tipGroupList.removeAll(),this.tipGroupList.replaceAll(this.m_TipList),void this.tipGroupList.refresh();if(MineModel.ins().HasMine()){var i=MineModel.ins().endTime-GameServer.serverTime;this.m_TipList.push({id:-2,icon:t.ICON_MINE,time:i})}if(DartCarModel.ins().HasDartCar()){var o=DartCarModel.ins().endTime-GameServer.serverTime;this.m_TipList.push({id:-2,icon:t.ICON_DARTCAR,time:o})}if(GuildBoss.ins().IsOpen()){var s=GuildBoss.ins().GetSurplusTime();this.m_TipList.push({id:-3,icon:t.ICON_GUILD_BOSS,time:s})}this.m_TipList.sort(this.sortFun),this.tipGroupList.removeAll(),this.tipGroupList.replaceAll(this.m_TipList.length>0?[this.m_TipList[0]]:[]),this.tipGroupList.refresh()},t.prototype.sortFun=function(e,t){return e.time<t.time?-1:e.time>t.time?1:0},t.prototype._UpdateChatPanelState=function(){t.UpdateChatPanelState(this.taskTraceBtn),t.UpdateChatPanelState(this.tipGroup)},t.UpdateChatPanelState=function(e){var t=MiniChatPanel.IsShowChat();e.y=t?531:530},t.prototype.setBagTips=function(e){this.groupBagTips.visible=e},t.prototype.setIsExitUsedItem=function(e){this.isExitUsedItem=e,this.bagTips.text=UserBag.ins().getSurplusCount()>0?GlobalConfig.jifengTiaoyueLg.st101421:GlobalConfig.jifengTiaoyueLg.st101422,this.setRedPiont()},t.prototype.setRedPiont=function(){var e=ViewManager.ins().getView(UIView2);e instanceof UIView2&&(this.isExitUsedItem||this.isItemCountChange?e.bagBtn.redPoint.visible=!0:e.bagBtn.redPoint.visible=!1)},t.prototype.showforgeBtnRedPoint=function(e){this.isItemCountChange=e,this.setRedPiont()},t.prototype.checkQuanQiaCanGoNext=function(){var e=GuanQiaModel.getInstance;if(e.checkIsCanGoNextLayer()){this.m_GoNextLayerGroup.visible=!0,this.autoPkBoss.visible=!1;var t=UserFb.ins().guanqiaID+1,i=GlobalConfig.ins("ChaptersConfig")[t];if(i){var o=GlobalConfig.ins("ChaptersRewardConfig")[i.mapid];o&&(this.m_GoNextLayerLab.text=o.name)}}else this.m_GoNextLayerGroup.visible=!1,this.autoPkBoss.visible=!0},t.prototype.onClickGoNextLayer=function(){ViewManager.ins().open(GuanQiaMapWin)},t.prototype.guideUpgrade=function(){Setting.currPart=1,Setting.currStep=2,GuideUtils.ins().show(this.taskTraceBtn,1,2),this.taskTraceBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGuide,this)},t.prototype.onClickGuide=function(){GuideUtils.ins().next(this.taskTraceBtn);var e=this.ruleList[this.taskTraceBtn.hashCode];e.tapExecute(),this.taskTraceBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGuide,this)},t.prototype.checkLastAddEquipGuide=function(){1==Setting.currPart&&5==Setting.currStep&&(GuideUtils.ins().show(this.taskTraceBtn,1,5),this.taskTraceBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGuide,this))},t.prototype.evtChangeGuanQia=function(){if(this.changeGuanQia(),0==GameMap.fbType){var e=GuanQiaModel.getInstance;e.guideConfig&&10==e.guideConfig.groupId||e.guideConfig&&GuideUtils.ins().show(this.m_JQGuideGroup,e.guideConfig.groupId,2)}},t.prototype.changeGuanQia=function(){var e=GuanQiaModel.getInstance,t=e.getLastJQGuideConfig();t&&t.param==UserFb.ins().guanqiaID&&(Setting.currPart=t.groupId,Setting.currStep=0,GuideUtils.ins().show(this.m_JQGuideGroup,t.groupId,0))},t.prototype.openAnim=function(){var e=5-this.groupLeftGroup.numChildren;this.m_SCAnim.bottom=334-68*e,this.m_SCAnim.setData()},t.prototype.playSound=function(){SoundUtils.getInstance().setBGMValume(1),egret.lifecycle.onResume=function(){var e=SoundSetPanel.getSoundLocalData("soundBg");SoundUtils.getInstance().setMusicEnable(e),e&&(SoundUtils.getInstance().setMusicEnable(!0),GameMap.IsNoramlLevel()?ViewManager.ins().isShow(MainCityView)?SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[3].id,-1):SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[1].id,-1):SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[2].id,-1));var t=SoundSetPanel.getSoundLocalData("skillSoundEff");t&&SoundUtils.getInstance().setEffectEnable(!0)},egret.lifecycle.onPause=function(){SoundUtils.getInstance().stopAllSound(),SoundUtils.getInstance().setMusicEnable(!1),SoundUtils.getInstance().setEffectEnable(!1)}},t.prototype.navigateToInit=function(){if(SdkMgr.isWxGame()){this.navigateToBtn.visible=WxSdk.ins().showNavigateTo,this.navigateToPanel.visible=!1,this.navigateConfig=GlobalConfig.ins("RecommendConfig");for(var e in this.navigateConfig){var t=new navigateToWxItem;t.init(this.navigateConfig[e]),this.navigateToGroup.addChild(t),this.navigateItemList.push(t)}this.navigateToUpdate()}},t.prototype.navigateToUpdate=function(){for(var e=this.navigateItemList.length,t=PlayFun.ins().getRedNavigetList(),i=0;e>i;i++){var o=this.navigateItemList[i];t&&0!=t.length?-1<t.indexOf(o.getData().index)&&o.updateState(!1):o.updateState(!0)}},t.prototype.onClcikIconControl=function(){this.isIconOpen?(this.changeIcon(this.growUpBtn,0),this.changeIcon(this.groupRight,0),this.changeIcon(this.groupLeftGroup,0),this.changeIcon(this.groupTopKF,0),this.changeIcon(this.m_BelowGroup,0),this.changeImg(this.m_IconControl,-45),this.m_IconControlRedPoint.visible=!0):(this.changeIcon(this.growUpBtn,1),this.changeIcon(this.groupRight,1),this.changeIcon(this.groupLeftGroup,1),this.changeIcon(this.groupTopKF,1),this.changeIcon(this.m_BelowGroup,1),this.changeImg(this.m_IconControl,0),this.m_IconControlRedPoint.visible=!1),this.isIconOpen=!this.isIconOpen},t.prototype.changeImg=function(e,t){e&&(egret.Tween.removeTweens(e),egret.Tween.get(e).to({rotation:t},150))},t.prototype.changeIcon=function(e,t){e&&(1==t?(e.touchEnabled=!0,e.touchChildren=!0):(e.touchEnabled=!1,e.touchChildren=!1),egret.Tween.removeTweens(e),egret.Tween.get(e).to({scaleX:t,scaleY:t},150,egret.Ease.circIn))},t.LAYER_LEVEL=LayerManager.UI_HUD,t.ICON_EXPJADE="cy_yu_png",t.ICON_ZS_BOSS="cy_zhuan_png",t.ICON_MINE="cy_kuang_png",t.ICON_DARTCAR="cy_biao_png",t.ICON_GUILD_BOSS="cy_bang_png",t.ICON_GUILD_RED_GUILD="cy_hongbao_png",t.ICON_ONHOOK="cy_gua_png",t.ICON_TEAM="cy_team_png",t.isPlayGuide21=!1,t}(BaseEuiView);__reflect(PlayFunView.prototype,"PlayFunView");var PlayFunTipBtn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),GameGlobal.MessageCenter.addListener(MessageDef.MINE_UPDATE_TIME,this._UpdatTimer,this)},t.prototype._OnClick=function(){var e=this.data;if(null==this.jingyanyuCommonConfig&&(this.jingyanyuCommonConfig=GlobalConfig.ins("JingyanyuCommonConfig")),e.id==this.jingyanyuCommonConfig.fullItemID)ViewManager.ins().open(ExpjadePanel);else if(e.icon==PlayFunView.ICON_ZS_BOSS)ViewManager.ins().open(BossWin,3);else if(e.icon==PlayFunView.ICON_MINE)Deblocking.Check(DeblockingType.TYPE_08)&&ViewManager.ins().open(LadderWin,2);else if(e.icon==PlayFunView.ICON_GUILD_BOSS)GuildBoss.ins().IsOpen()?ViewManager.ins().open(GuildBossReadyPanel):ViewManager.ins().open(GuildBossCallPanel);else if(e.icon==PlayFunView.ICON_GUILD_RED_GUILD){var t=0;GuildReward.ins().getRedBagType>0?(KFguildWarMainPanel.m_IsShowRedBag=!0,GuildWarMainPanel.m_IsShowRedBag=!1,t=1):(KFguildWarMainPanel.m_IsShowRedBag=!1,GuildWarMainPanel.m_IsShowRedBag=!0,t=0),ViewManager.ins().open(GuildWarMainBgWin,t)}else e.icon==PlayFunView.ICON_DARTCAR?ViewManager.ins().open(LadderWin,1):e.icon==PlayFunView.ICON_TEAM&&ViewManager.ins().open(FbWin,2)},t.prototype._UpdatTimer=function(){var e=this.data;e.icon==PlayFunView.ICON_MINE?MineModel.ins().exploitStatus==MineExploitType.FINISH?this.time.visible=!1:(this.time.visible=MineModel.ins().HasMine()&&MineModel.ins().endTime>GameServer.serverTime,this.time.text=DateUtils.GetFormatSecond(Math.max(MineModel.ins().endTime-GameServer.serverTime,0),5)):e.icon==PlayFunView.ICON_GUILD_BOSS?(this.time.visible=GuildBoss.ins().GetSurplusTime()>0,this.time.text=DateUtils.GetFormatSecond(GuildBoss.ins().GetSurplusTime(),5)):e.icon==PlayFunView.ICON_DARTCAR?DartCarModel.ins().exploitStatus==DartExsploitType.FINISH?this.time.visible=!1:(this.time.visible=DartCarModel.ins().HasDartCar()&&DartCarModel.ins().endTime>GameServer.serverTime,this.time.text=DateUtils.GetFormatSecond(Math.max(DartCarModel.ins().endTime-GameServer.serverTime,0),5)):e.icon==PlayFunView.ICON_ONHOOK&&(this.time.visible=!0)},t.prototype.dataChanged=function(){var e=this.data;this.icon.source=e.icon,e.icon==PlayFunView.ICON_MINE&&MineModel.ins().HasMine()||e.icon==PlayFunView.ICON_GUILD_BOSS&&GuildBoss.ins().IsOpen()?this.time.visible=!0:e.icon==PlayFunView.ICON_DARTCAR&&DartCarModel.ins().HasDartCar()?this.time.visible=!0:this.time.visible=!1,this.time.text=""},t}(eui.ItemRenderer);__reflect(PlayFunTipBtn.prototype,"PlayFunTipBtn"),window.PlayFunView=PlayFunView,window.PlayFunTipBtn=PlayFunTipBtn;var ActivityHearoBattleRule=function(e){function t(t){var i=e.call(this,t)||this;i.updateMessage=[MessageDef.ACTIVITY_IS_AWARDS],i.lab=t.getChildByName("lab");var o=t.getChildByName("btn");return i._groupEff=o.getChildByName("eff"),i}return __extends(t,e),t.prototype.checkShowIcon=function(){if(WxSdk.ins().isHidePay())return!1;var e=GameGlobal.activityData[303];return e&&e.isOpenTime()?(null==this._mc&&(this._mc=new MovieClip,this._mc.x=this._groupEff.width/2,this._mc.y=this._groupEff.height/2,this._mc.scaleX=this._mc.scaleY=.6,this._groupEff.addChild(this._mc),this._mc.loadUrl(ResDataPath.GetUIEffePath("eff_fun_yzzl"),!0,-1)),!0):!1},t.prototype.onTimer=function(){var e=GameGlobal.activityData[303];e&&(this.lab.text=DateUtils.GetFormatSecond(e.endTime-GameServer.serverTime,DateUtils.TIME_FORMAT_1))},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.activityData[303];return e.canReward()},t.prototype.getEffName=function(e){return this.firstTap||e?this.DefEffe(e):void 0},t.prototype.tapExecute=function(){ViewManager.ins().open(ActivityWin,303)},t}(RuleIconBase);__reflect(ActivityHearoBattleRule.prototype,"ActivityHearoBattleRule"),window.ActivityHearoBattleRule=ActivityHearoBattleRule;var ActivityHfhdIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.UPDATE_ACTIVITY_PANEL],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return WxSdk.ins().isHidePay()?!1:GameGlobal.activityModel.getbtnListByType(ActivityModel.BTN_TYPE_04).length>0},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.activityData,t=GameGlobal.activityModel.getbtnListByType(ActivityModel.BTN_TYPE_04);for(var i in t){var o=t[i].id;if(e[o]&&e[o].canReward())return 1}return 0},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){ActivityWinSummer.onPlace=ActivityModel.BTN_TYPE_04,ViewManager.ins().open(ActivityWinSummer),this.firstTap=!1,this.update()},t}(RuleIconBase);__reflect(ActivityHfhdIconRule.prototype,"ActivityHfhdIconRule"),window.ActivityHfhdIconRule=ActivityHfhdIconRule;var ActivityHlqdIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.UPDATE_ACTIVITY_PANEL],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return WxSdk.ins().isHidePay()?!1:GameGlobal.actorModel.level<10?!1:GameGlobal.activityModel.getbtnListByType(ActivityModel.BTN_TYPE_03).length>0},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.activityData,t=GameGlobal.activityModel.getbtnListByType(ActivityModel.BTN_TYPE_03);for(var i in t){var o=t[i].id;if(e[o].canReward())return 1}return 0},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){ActivityWinSummer.onPlace=ActivityModel.BTN_TYPE_03,ViewManager.ins().open(ActivityWinSummer),this.firstTap=!1,this.update()},t}(RuleIconBase);__reflect(ActivityHlqdIconRule.prototype,"ActivityHlqdIconRule"),window.ActivityHlqdIconRule=ActivityHlqdIconRule;var ActivityIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.ACTIVITY_IS_AWARDS,MessageDef.YB_CHANGE,MessageDef.LEVEL_CHANGE,MessageDef.MONEY_RECHARGE_GIFT_CHANGE,MessageDef.UPDATE_RECHARGE,MessageDef.GUILDWAR_FIRST_WINNER],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return WxSdk.ins().isHidePay()?!1:StartGetUserInfo.isOne||StartGetUserInfo.isUsa?!1:(this.tar.icon=GameServer.serverOpenDay>7?"fun_hd_png":"fun_kf_png",GameGlobal.actorModel.level<10?!1:GameGlobal.activityModel.getbtnListByType().length>0)},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.activityData,t=GameGlobal.activityModel.getbtnListByType(0);for(var i in t){var o=t[i].id,s=ActivityModel.GetCusActData(o);if(null!=s){if(s.canReward())return 1}else if(e[o].canReward())return 1}return 0},t.prototype.getEffName=function(e){return this.firstTap?this.DefEffe(e):void 0},t.prototype.tapExecute=function(){ActivityWinSummer.onPlace=ActivityModel.BTN_TYPE_00,ViewManager.ins().open(ActivityWin),this.firstTap=!1,this.update()},t}(RuleIconBase);__reflect(ActivityIconRule.prototype,"ActivityIconRule"),window.ActivityIconRule=ActivityIconRule;var ActivityOneMoneyRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.ACTIVITY_IS_AWARDS],i.lab=t.getChildByName("lab"),i}return __extends(t,e),t.prototype.checkShowIcon=function(){if(WxSdk.ins().isHidePay())return!1;var e=GameGlobal.activityData[301];return e&&e.isOpenTime()?!0:!1},t.prototype.onTimer=function(){var e=GameGlobal.activityData[301];e&&(this.lab.text=DateUtils.GetFormatSecond(e.endTime-GameServer.serverTime,DateUtils.TIME_FORMAT_1))},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.activityData[301];return e.canReward()},t.prototype.getEffName=function(e){return this.firstTap||e?this.DefEffe(e):void 0},t.prototype.tapExecute=function(){ViewManager.ins().open(Activity301Win)},t}(RuleIconBase);__reflect(ActivityOneMoneyRule.prototype,"ActivityOneMoneyRule"),window.ActivityOneMoneyRule=ActivityOneMoneyRule;var ActivityTjhlIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.UPDATE_ACTIVITY_PANEL],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return WxSdk.ins().isHidePay()?!1:GameGlobal.actorModel.level<10?!1:GameGlobal.activityModel.getbtnListByType(ActivityModel.BTN_TYPE_05).length>0},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.activityData,t=GameGlobal.activityModel.getbtnListByType(ActivityModel.BTN_TYPE_05);for(var i in t){var o=t[i].id;if(e[o].canReward())return 1}return 0},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){ActivityWinSummer.onPlace=ActivityModel.BTN_TYPE_05,ViewManager.ins().open(ActivityWinSummer),this.firstTap=!1,this.update()},t}(RuleIconBase);__reflect(ActivityTjhlIconRule.prototype,"ActivityTjhlIconRule"),window.ActivityTjhlIconRule=ActivityTjhlIconRule;var ActivityWIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.UPDATE_ACTIVITY_PANEL],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return WxSdk.ins().isHidePay()?!1:GameGlobal.actorModel.level<10?!1:GameGlobal.activityModel.getbtnListByType(ActivityModel.BTN_TYPE_02).length>0},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.activityData,t=GameGlobal.activityModel.getbtnListByType(ActivityModel.BTN_TYPE_02);for(var i in t){var o=t[i].id;if(e[o].canReward())return 1}return 0},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){ActivityWinSummer.onPlace=ActivityModel.BTN_TYPE_02,ViewManager.ins().open(ActivityWinSummer),this.firstTap=!1,this.update()},t}(RuleIconBase);__reflect(ActivityWIconRule.prototype,"ActivityWIconRule"),window.ActivityWIconRule=ActivityWIconRule;var ArtifactIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.ITEM_COUNT_CHANGE,MessageDef.LEVEL_CHANGE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!0},t.prototype.checkShowRedPoint=function(){return Deblocking.IsRedDotArtifactBtn()},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){Deblocking.Check(DeblockingType.TYPE_15)&&(ViewManager.ins().open(ArtifactMainWin),this.firstTap=!1,this.update())},t}(RuleIconBase);__reflect(ArtifactIconRule.prototype,"ArtifactIconRule"),window.ArtifactIconRule=ArtifactIconRule;var BossIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.PUBLIC_BOSS_LIST_DATA,MessageDef.KF_BOSS_LIST_DATA,MessageDef.FB_COUNT_UPDATE],i}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return UserBoss.ins().isCanChalleng()||DailyFubenConfig.isCanChallenge()||ZsBoss.ins().IsRedPoint()||UserBoss.ins().isCanChallengKf()||HomeBossModel.getInstance.checkAllRedPoint()||SyBossModel.getInstance.checkAllRedPoint()},t.prototype.tapExecute=function(){Deblocking.Check(DeblockingType.TYPE_06)&&(ViewManager.ins().open(BossWin),UserBoss.ins().postBossData(!1))},t}(RuleIconBase);__reflect(BossIconRule.prototype,"BossIconRule"),window.BossIconRule=BossIconRule;var CDkeyIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.MONEY_INFO_CHANGE,MessageDef.GAME_NOTICE_OPEN,MessageDef.UPDATA_TASK,MessageDef.MONEY_RECHARGE_GIFT_CHANGE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return StartGetUserInfo.isOne||StartGetUserInfo.isUsa?!1:!0},t.prototype.checkShowRedPoint=function(){return MoneyTreeModel.ins().isHaveReward()||FindAssetsModel.ins().HasFindAssets()||DayLoginIconRule.ShowRedPoint()},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){ViewManager.ins().open(FuliWin,1),this.update()},t}(RuleIconBase);__reflect(CDkeyIconRule.prototype,"CDkeyIconRule"),window.CDkeyIconRule=CDkeyIconRule;var ChaosBattleRule=function(e){function t(t){var i=e.call(this,t)||this;return i.lab=t.getChildByName("lab"),i}return __extends(t,e),t.prototype.checkShowIcon=function(){var e=ChaosBattleModel.getInstance.checkRedPoint();return e},t.prototype.onTimer=function(){this.lab.text=DateUtils.GetFormatSecond(ChaosBattleModel.getInstance.endTime-GameServer.serverTime,DateUtils.TIME_FORMAT_1)},t.prototype.checkShowRedPoint=function(){return!1},t.prototype.getEffName=function(e){return this.firstTap||e?this.DefEffe(e):void 0},t.prototype.tapExecute=function(){ViewManager.ins().open(LadderWin,3)},t}(RuleIconBase);__reflect(ChaosBattleRule.prototype,"ChaosBattleRule"),window.ChaosBattleRule=ChaosBattleRule;var CouponTreIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[UserBag.postHuntStore,MessageDef.CHECK_HAVE_CAN],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return WxSdk.ins().isHidePay()?!1:!0},t.prototype.checkShowRedPoint=function(){return CouponModel.getInstance.checkAllRedPoint()},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){this.firstTap=!1,ViewManager.ins().open(CouponWin,1)},t}(RuleIconBase);__reflect(CouponTreIconRule.prototype,"CouponTreIconRule"),window.CouponTreIconRule=CouponTreIconRule;var DaliyTaskIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return 0==StartGetUserInfo.isOne},t.prototype.checkShowRedPoint=function(){return UserTask.ins().CheckAllVitalityReward()},t.prototype.tapExecute=function(){ViewManager.ins().open(LiLianWin)},t}(RuleIconBase);__reflect(DaliyTaskIconRule.prototype,"DaliyTaskIconRule"),window.DaliyTaskIconRule=DaliyTaskIconRule;var DayBuy302IconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.UPDATE_ACTIVITY_PANEL],i._groupEff=t.getChildByName("eff"),i}return __extends(t,e),t.prototype.checkShowIcon=function(){if(WxSdk.ins().isHidePay())return!1;var e=ActivityModel.ins().IsOpen(ActivityModel.ins().activityData[ActivityModel.TYPE_302]);return e&&null==this._mc&&(this._mc=new MovieClip,this._mc.x=this._groupEff.width/2,this._mc.y=this._groupEff.height/2,this._mc.scaleX=this._mc.scaleY=.6,this._groupEff.addChild(this._mc),this._mc.loadUrl(ResDataPath.GetUIEffePath("eff_fun_yiyuanzhi"),!0,-1)),e},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){this.firstTap=!1,ViewManager.ins().open(ActivityType302Panel)},t}(RuleIconBase);__reflect(DayBuy302IconRule.prototype,"DayBuy302IconRule"),window.DayBuy302IconRule=DayBuy302IconRule;var DayLoginIconRule=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return t.CheckShow()},t.prototype.checkShowRedPoint=function(){return t.ShowRedPoint()?1:0},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){ViewManager.ins().open(DayLoginPanel),this.firstTap=!1,this.update()},t.ShowRedPoint=function(){var e=ActivityModel.ins().GetActivityDataByType(5);return e?e.canReward():!1},t.CheckShow=function(){var e=ActivityModel.ins().GetActivityDataByType(5);return e&&e.isOpenTime()?e.IsShow():!1},t}(RuleIconBase);__reflect(DayLoginIconRule.prototype,"DayLoginIconRule"),window.DayLoginIconRule=DayLoginIconRule;var DayOneActivityIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.DAYONE_ACTIVITY],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!1},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){this.firstTap=!1,ViewManager.ins().open(DayOneActivityPanel)},t}(RuleIconBase);__reflect(DayOneActivityIconRule.prototype,"DayOneActivityIconRule"),window.DayOneActivityIconRule=DayOneActivityIconRule;var DayTargetIconRult=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.OPEN_SERVER,MessageDef.ACTIVITY_IS_AWARDS,MessageDef.UPDATE_ACTIVITY_PANEL],i.btn=t.getChildByName("btn"),i.lab=t.getChildByName("lab"),t.redPoint=t.getChildByName("redPoint"),i}return __extends(t,e),t.prototype.checkShowIcon=function(){if(GameGlobal.actorModel.level<10)return!1;for(var e=ActivityModel.ins().getbtnListByType(ActivityModel.BTN_TYPE_01),t=e.length>0,i=0,o=e.length;o>i;i++){var s=e[i];if(s.actType==ActivityModel.TYPE_04){this.btn.icon=ActivityModel.GetActivityConfig(s.id).source1,this._curActivityId=s.id;break}}return t},t.prototype.onTimer=function(){var e=GameGlobal.activityData[this._curActivityId];null!=e&&(this.lab.text=DateUtils.GetFormatSecond(e.endTime-GameServer.serverTime,DateUtils.TIME_FORMAT_1))},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.activityData,t=ActivityModel.ins().getbtnListByType(ActivityModel.BTN_TYPE_01);for(var i in t){var o=t[i].id,s=ActivityModel.GetCusActData(o);if(null!=s){if(s.canReward())return!0}else if(e[o].canReward())return!0}return!1},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){ActivityWinSummer.onPlace=ActivityModel.BTN_TYPE_01,ViewManager.ins().open(ActivityWinSummer,ActivityWinSummer.onPlace),this.firstTap=!1,this.update()},t}(RuleIconBase);__reflect(DayTargetIconRult.prototype,"DayTargetIconRult"),window.DayTargetIconRult=DayTargetIconRult;var DoubleDartCarIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.DOUBLE_DARTCAR_NOTICE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return DartCarModel.ins().isDoubleDartCar},t.prototype.getEffName=function(e){return this.effX=145,this.effY=41,"eff_main_icon03"},t.prototype.tapExecute=function(){Deblocking.Check(DeblockingType.TYPE_27)&&ViewManager.ins().open(LadderWin,1)},t}(RuleIconBase);__reflect(DoubleDartCarIconRule.prototype,"DoubleDartCarIconRule"),window.DoubleDartCarIconRule=DoubleDartCarIconRule;var DoubleMiningIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.DOUBLE_MINING_NOTICE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return MineModel.ins().isDoubleMining},t.prototype.getEffName=function(e){return this.effX=145,this.effY=41,"eff_main_icon03"},t.prototype.tapExecute=function(){Deblocking.Check(DeblockingType.TYPE_08)&&ViewManager.ins().open(LadderWin,2)},t}(RuleIconBase);__reflect(DoubleMiningIconRule.prototype,"DoubleMiningIconRule"),window.DoubleMiningIconRule=DoubleMiningIconRule;var ExpGoldIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.LEVEL_CHANGE,MessageDef.UPDATA_VIP_AWARDS,MessageDef.VIP_LEVEL_CHANGE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!1},t.prototype.checkShowRedPoint=function(){return UserVip.ins().lv>=3&&!UserVip.ins().GetRewardState(3)},t.prototype.getEffName=function(e){return this.firstTap?this.DefEffe(e):void 0},t.prototype.tapExecute=function(){ViewManager.ins().open(VIP3WIn),this.firstTap=!1,this.update()},t}(RuleIconBase);__reflect(ExpGoldIconRule.prototype,"ExpGoldIconRule"),window.ExpGoldIconRule=ExpGoldIconRule;var FbBtnIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.FB_COUNT_UPDATE,MessageDef.CHALLENGE_UPDATE_INFO,MessageDef.TRYROAD_DATAS],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!0},t.prototype.checkShowRedPoint=function(){return Deblocking.IsRedDotFubenBtn()},t.prototype.tapExecute=function(){ViewManager.ins().open(FbWin)},t}(RuleIconBase);__reflect(FbBtnIconRule.prototype,"FbBtnIconRule"),window.FbBtnIconRule=FbBtnIconRule;var FeedbackIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.OPEN_SERVER],i}return __extends(t,e),t.prototype.checkShowIcon=function(){if(GameGlobal.actorModel.level<10)return!1;var e=GameGlobal.activityData[200];return ActivityModel.ins().IsOpen(e)},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){this.firstTap=!1,ViewManager.ins().open(FeedbackWin)},t}(RuleIconBase);__reflect(FeedbackIconRule.prototype,"FeedbackIconRule"),window.FeedbackIconRule=FeedbackIconRule;var FirstRecharge1IconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.UPDATE_RECHARGE,MessageDef.UPDATE_FIRSTRECHARGE],i.groupEff=t.getChildByName("eff"),i}return __extends(t,e),t.prototype.checkShowIcon=function(){if(DisplayUtils.removeFromParent(this.mc),this.mc=null,WxSdk.ins().isHidePay())return!1;if(StartGetUserInfo.isUsa||StartGetUserInfo.isOne)return!1;var e=GameGlobal.rechargeData[0];if(!e)return!1;var t=Recharge.ins().GetConfig();for(var i in t)if(!BitUtil.Has(e.isAwards,t[i].index))return null==this.mc&&(this.mc=new MovieClip,this.mc.x=this.groupEff.width/2,this.mc.y=this.groupEff.height/2,this.mc.scaleX=this.mc.scaleY=.65,this.groupEff.addChild(this.mc),this.mc.loadUrl(ResDataPath.GetUIEffePath("eff_fun_sc"),!0,-1)),!0;return!1},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.rechargeData[0];if(!e)return 0;var t=Recharge.ins().GetConfig();for(var i in t){var o=t[i];if(e.num>=o.pay&&!BitUtil.Has(e.isAwards,o.index))return 1}return 0},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){t.EnterFirstRecharge()&&(this.firstTap=!1,this.update())},t.EnterFirstRecharge=function(){return ViewManager.ins().open(Recharge1Win),!0},t}(RuleIconBase);__reflect(FirstRecharge1IconRule.prototype,"FirstRecharge1IconRule"),window.FirstRecharge1IconRule=FirstRecharge1IconRule;var FirstRechargeIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.img=new eui.Image,i.firstTap=!0,i.updateMessage=[MessageDef.UPDATE_FIRSTRECHARGE],i._groupEff=t.getChildByName("eff"),i}return __extends(t,e),t.prototype.checkShowIcon=function(){if(WxSdk.ins().isHidePay())return!1;if(StartGetUserInfo.isUsa||StartGetUserInfo.isOne)return!1;var e=GameGlobal.firstRechargeData;return e&&e.statau?(this.tar.icon=GameServer.serverMergeTime>0?"fun_hfsc_png":"fun_sc_png",this._initMc("eff_fun_sc"),this.img.visible=!0,!0):Recharge.IsShowDayRecharge()?(this._initMc("eff_fun_sc"),this.tar.icon="fun_mrcz_png",this.img.visible=!1,!0):!1},t.prototype._initMc=function(e){null==this._mc&&(this._mc=new MovieClip,this._mc.x=this._groupEff.width/2,this._mc.y=this._groupEff.height/2,this._mc.scaleX=this._mc.scaleY=.65,this._groupEff.addChild(this._mc),this._mc.loadUrl(ResDataPath.GetUIEffePath(e),!0,-1),this.img.source="comp_20_33_01_png",this.img.right=0,this.img.top=0,this._groupEff.parent.addChild(this.img))},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.firstRechargeData;if(e&&e.statau)return e.awards==AwardStatus.awaitrReceive;var t=GameGlobal.rechargeData[0];if(!t)return 0;var i=Recharge.ins().GetConfig();for(var o in i){var s=i[o];if(t.num>=s.pay&&!BitUtil.Has(t.isAwards,s.index))return 1}return 0},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){t.EnterFirstRecharge()&&(this.firstTap=!1,this.update())},t.EnterFirstRecharge=function(){if(GameGlobal.firstRechargeData){if(GameGlobal.firstRechargeData.statau)return WxSdk.ins().isHidePay()||ViewManager.ins().open(Recharge1GetWin),!0;if(Recharge.IsShowDayRecharge())return ViewManager.ins().open(Recharge1Win),!0}return!1},t}(RuleIconBase);__reflect(FirstRechargeIconRule.prototype,"FirstRechargeIconRule"),window.FirstRechargeIconRule=FirstRechargeIconRule;var FuncOpenIconRule=function(e){function t(t){var i=e.call(this,t)||this;t.redPoint=t.getChildByName("redPoint"),i.updateMessage=[MessageDef.LEVEL_CHANGE,MessageDef.ONLINE_REWARDS_STATE],t.addEventListener(egret.Event.ADDED_TO_STAGE,i.addTick,i),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,i.removeTick,i);var o=t.getChildByName("lebGroup");return i.funcLabel=o.getChildByName("funcLabel"),i.funcIcon=t.getChildByName("icon"),i.funcIcon.source="fun_lqvip_01_png",i.addTick(),i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!OnlineRewardsModel.ins().onlineRewardComplete()},t.prototype.checkShowRedPoint=function(){return OnlineRewardsModel.ins().canOnlineReward()},t.prototype.update=function(){e.prototype.update.call(this)},t.prototype.getEffName=function(e){return OnlineRewardsModel.ins().canOnlineReward()?(this.effX=34,this.effY=34,"eff_main_icon02"):!1},t.prototype.tapExecute=function(){ViewManager.ins().open(OnlineRewardsWin)},t.prototype.addTick=function(){this.removeTick(),TimerManager.ins().doTimer(1e3,0,this.setTime,this)},t.prototype.removeTick=function(){TimerManager.ins().remove(this.setTime,this)},t.prototype.setTime=function(){OnlineRewardsModel.ins().canOnlineReward()?(this.funcLabel.text=GlobalConfig.jifengTiaoyueLg.st100001,this.removeTick()):this.funcLabel.text=OnlineRewardsModel.ins().getOnlineNearlyTime()},t}(RuleIconBase);__reflect(FuncOpenIconRule.prototype,"FuncOpenIconRule"),window.FuncOpenIconRule=FuncOpenIconRule;var GadIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.OPEN_SERVER],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!0},t.prototype.checkShowRedPoint=function(){return Deblocking.IsRedDotGadrBtn()},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){GuideUtils.ins().next(this),Deblocking.Check(DeblockingType.TYPE_62)&&(ViewManager.ins().open(GadWin),this.firstTap=!1,this.update())},t}(RuleIconBase);__reflect(GadIconRule.prototype,"GadIconRule"),window.GadIconRule=GadIconRule;var GamePlayIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return!1},t.prototype.tapExecute=function(){ViewManager.ins().open(GamePlay)},t}(RuleIconBase);__reflect(GamePlayIconRule.prototype,"GamePlayIconRule"),window.GamePlayIconRule=GamePlayIconRule;var GrowUpRoadconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.LEVEL_CHANGE,MessageDef.GUANQIA_CHANGE,MessageDef.FUNC_OPEN_UPDATE],i.bar=t.getChildByName("bar"),i.lab=t.getChildByName("lab"),i.roleShowPanel=t.getChildByName("role"),i.m_groupMc=t.getChildByName("mcGroup"),i.reddot=t.getChildByName("red"),i.bar.labelDisplay.size=12,i
}return __extends(t,e),t.prototype.checkShowIcon=function(){var e=!FuncOpenModel.ins().AllRewardIsGet();return 0==e&&(this.roleShowPanel.release(),DisplayUtils.dispose(this.mc),ObjectPool.ins().push(this.mc)),e},t.prototype.checkShowRedPoint=function(){return-1!=FuncOpenModel.ins().GetCurCanRewardIndex()},t.prototype.getEffName=function(e){},t.prototype.update=function(){e.prototype.update.call(this);var t=FuncOpenModel.ins().GetNextIndex();if(-1==t&&(t=FuncOpenModel.ins().GetCurCanRewardIndex()),this.reddot.visible=-1!=FuncOpenModel.ins().GetCurCanRewardIndex(),-1!=t){var i=GlobalConfig.funcNoticeConfig[t];this.lab.textFlow=TextFlowMaker.getTextFlowByHtml(FuncOpenModel.GetTipStr3(i.openLv[0],i.openLv[1],i.name)),this._initRoleShow(i),this.bar.maximum=i.openLv[1],this.bar.value=1==i.openLv[0]?UserFb.ins().guanqiaID:GameGlobal.actorModel.level}},t.prototype._initRoleShow=function(e){if(e.movieBody||e.movieMounts||e.movieWeapon||e.movieWing){var t=SubRoles.ins().getSubRoleByIndex(0);this.roleShowPanel.creatAnim(t),this.roleShowPanel.setCharSexJob(t.sex,t.job,e.movieBody,e.movieWeapon,e.movieMounts,e.movieWing),this.roleShowPanel.visible=!0,this.m_groupMc.visible=!1}else e.moviePet&&(this.roleShowPanel.visible=!1,this.m_groupMc.visible=!0,null==this.mc&&(this.mc=ObjectPool.ins().pop("MovieClip"),this.mc.x=this.m_groupMc.width/2,this.mc.y=this.m_groupMc.height/2,this.mc.scaleX=this.mc.scaleY=.7,this.m_groupMc.addChild(this.mc)),this.mc.loadUrl(ResDataPath.GetMonsterBodyPath(e.moviePet+"_3"+EntityAction.STAND),!0,-1))},t.prototype.tapExecute=function(){var e=FuncOpenModel.ins().GetCurCanRewardIndex();-1==e&&(e=FuncOpenModel.ins().GetNextIndex()),ViewManager.ins().open(GrowUpRoadWin,e),this.firstTap=!1,this.update()},t}(RuleIconBase);__reflect(GrowUpRoadconRule.prototype,"GrowUpRoadconRule"),window.GrowUpRoadconRule=GrowUpRoadconRule;var GuangqiaIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.m_Group1=new eui.Group,i.m_Group2=new eui.Group,i.m_Group3=new eui.Group,i.starType=-1,i.starNum=-1,i.updateMessage=[UserFb.ins().postWaveChange,UserFb.ins().postGuanKaIdChange,MessageDef.RAID_KILL_MONSTER_COUNT],i.layerCount=t.parent.getChildIndex(t),i.mcGroup=t.getChildByName("group"),i.star2=t.getChildByName("starGroup2"),i.star3=t.getChildByName("starGroup3"),i.starImg1=i.star2.getChildByName("star1"),i.starImg2=i.star2.getChildByName("star2"),i.starImg3=i.star3.getChildByName("star3"),i.starImg4=i.star3.getChildByName("star4"),i.starImg5=i.star3.getChildByName("star5"),i.mc1=new MovieClip,i.mc2=new MovieClip,i.mc3=new MovieClip,i.mc1.scaleX=i.mc1.scaleY=.8,i.mc2.scaleX=i.mc2.scaleY=.8,i.mc3.scaleX=i.mc3.scaleY=.8,i.mcGroup.addChild(i.m_Group1),i.mcGroup.addChild(i.m_Group2),i.mcGroup.addChild(i.m_Group3),i.mc1.loadUrl(ResDataPath.GetUIEffePath("eff_can_challenge"),!0,-1),i.mc2.loadUrl(ResDataPath.GetUIEffePath("eff_can_challenge"),!0,-1),i.mc3.loadUrl(ResDataPath.GetUIEffePath("eff_can_challenge"),!0,-1),i.m_Group1.addChild(i.mc1),i.m_Group2.addChild(i.mc2),i.m_Group3.addChild(i.mc3),i}return __extends(t,e),t.prototype.updateMcPos=function(e){e?this.star2&&(this.m_Group1.x=50,this.m_Group2.x=101,this.m_Group1.y=25,this.m_Group2.y=25,this.star2.visible=!0,this.star3.visible=!1):this.star2&&(this.m_Group1.x=36,this.m_Group2.x=75,this.m_Group3.x=113,this.m_Group1.y=48,this.m_Group2.y=25,this.m_Group3.y=49,this.star2.visible=!1,this.star3.visible=!0)},t.prototype.setStar=function(e){var t="comp_450_01_001_png",i="comp_450_01_02_png";switch(e){case 1:this.starImg1.source=i,this.starImg3.source=i,this.starImg2.source=t,this.starImg4.source=t,this.starImg5.source=t;break;case 2:this.starImg1.source=i,this.starImg3.source=i,this.starImg2.source=i,this.starImg4.source=i,this.starImg5.source=t;break;case 3:this.starImg1.source=i,this.starImg3.source=i,this.starImg2.source=i,this.starImg4.source=i,this.starImg5.source=i;break;default:this.starImg1.source=t,this.starImg3.source=t,this.starImg2.source=t,this.starImg4.source=t,this.starImg5.source=t}},t.prototype.update=function(){e.prototype.update.call(this),this._UpdataGuanqiaKill()},t.prototype._UpdataGuanqiaKill=function(){var e=UserFb.ins().killMonstType,t=0;if(this.starType!=e)switch(this.starType=e,e){case 2:this.updateMcPos(!0);break;default:this.updateMcPos(!1)}if(t=UserFb.ins().startNum(e),this.starNum!=t)switch(this.starNum=t,t){case 1:this.m_Group1.visible=!0,this.m_Group2.visible=!1,this.m_Group3.visible=!1;break;case 2:this.m_Group1.visible=!0,this.m_Group2.visible=!0,this.m_Group3.visible=!1;break;case 3:this.m_Group1.visible=!0,this.m_Group2.visible=!0,this.m_Group3.visible=!0;break;default:this.m_Group1.visible=this.m_Group2.visible=this.m_Group3.visible=!1}},t.prototype.checkShowIcon=function(){return!0},t.prototype.checkShowRedPoint=function(){return!1},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){GuideUtils.ins().next(this.tar),GuanQiaModel.getInstance.checkIsCanGoNextLayer()?ViewManager.ins().open(GuanQiaMapWin):ViewManager.ins().open(GuanQiaWin)},t}(RuleIconBase);__reflect(GuangqiaIconRule.prototype,"GuangqiaIconRule"),window.GuangqiaIconRule=GuangqiaIconRule;var GuildIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[GameLogic.ins().postLevelChange,GuildFB.ins().postGuildFubenInfo,Guild.ins().postGuildInfo,GuildRobber.ins().postGuildRobberInfo],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!0},t.prototype.checkShowRedPoint=function(){return Deblocking.IsRedDotGuildBtn()},t.prototype.tapExecute=function(){GameLogic.ins().actorModel.level>=GlobalConfig.ins("GuildConfig").openLevel?void 0==GameLogic.ins().actorModel.guildID||0==GameLogic.ins().actorModel.guildID?ViewManager.ins().open(GuildApplyWin):ViewManager.ins().open(GuildMap):UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101438,[GlobalConfig.ins("GuildConfig").openLevel]))},t}(RuleIconBase);__reflect(GuildIconRule.prototype,"GuildIconRule"),window.GuildIconRule=GuildIconRule;var GuildWarIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.GUILDWAR_STARTSTATU_CHANGE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return void 0==GuildWar.ins().guildWarStartType||0==GuildWar.ins().guildWarStartType?(this.tar.icon="fun_tmzb_png",GuildWar.ins().getIsShowGuildWarBtn()):(this.tar.icon="fun_kfzb_png",GuildWar.ins().getIsShowKfGuildWarBtn())},t.prototype.getEffName=function(e){return this.effX=145,this.effY=41,"eff_main_icon03"},t.prototype.tapExecute=function(){GameGlobal.actorModel.HasGuild()?(ViewManager.ins().open(GuildMap),TimerManager.ins().doTimer(100,1,function(){var e=GuildWar.ins().guildWarStartType>0?1:0;ViewManager.ins().open(GuildWarMainBgWin,e)},this)):GuildWar.ins().guildWarStartType&&GuildWar.ins().guildWarStartType>0?UserTips.ErrorTip("加入公会后才能参与跨服争霸活动"):UserTips.ErrorTip("加入公会后才能参与遗迹争霸活动")},t}(RuleIconBase);__reflect(GuildWarIconRule.prototype,"GuildWarIconRule"),window.GuildWarIconRule=GuildWarIconRule;var LadderBtnIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[Ladder.ins().postTadderChange,MessageDef.ENCOUNTER_DATA_CHANGE,MessageDef.MINE_STATU_CHANGE,MessageDef.DARTCAR_STATU_CHANGE,MessageDef.ACROSSLADDER_HISTORY_RANK],TenKillSproto.ins().sendGetTenKillMsg(),i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!0},t.prototype.checkShowRedPoint=function(){return Deblocking.IsRedDotLadderBtn()},t.prototype.getEffName=function(e){return""},t.prototype.tapExecute=function(){Deblocking.Check(DeblockingType.TYPE_07)&&ViewManager.ins().open(LadderWin)},t}(RuleIconBase);__reflect(LadderBtnIconRule.prototype,"LadderBtnIconRule"),window.LadderBtnIconRule=LadderBtnIconRule;var LegendSaleIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.LEGEND_UPDATE_SALE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!1},t.prototype.checkShowRedPoint=function(){return 0},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){this.firstTap=!1,ViewManager.ins().open(LegendSalePanel)},t}(RuleIconBase);__reflect(LegendSaleIconRule.prototype,"LegendSaleIconRule"),window.LegendSaleIconRule=LegendSaleIconRule;var LuckIconRule=function(e){function t(t){var i=e.call(this,t)||this;i.dataLen=0,i.isOpenTick=!1,i.firstTap=!0,i.updateMessage=[MessageDef.UPDATE_ACTIVITY_PANEL];for(var o=t.numChildren,s=0;o>s;s++){var n=t.getChildAt(s);if(n instanceof eui.Label){i.timeLab=n;break}}return i}return __extends(t,e),t.prototype.onTimer=function(){var e=LuckGiftBagModel.getInstance.luckGiftData.values,t=0;e.length>0&&(t=e[0].time);for(var i=0;i<e.length;i++){var o=Math.max(0,(e[i].time||0)-GameServer.serverTime);0>=o&&0==LuckGiftBagModel.getInstance.isModelOpen?(LuckGiftBagModel.getInstance.luckGiftData.remove(e[i].id),GameGlobal.MessageCenter.dispatch(MessageDef.LUCKGIFTBAG_DATA_UPDATE)):t>=e[i].time&&(t=e[i].time)}var s=GameServer.GetSurplusTime(t,DateUtils.TIME_FORMAT_1);this.timeLab.text=s},t.prototype.checkShowIcon=function(){return LuckGiftBagModel.getInstance.luckGiftData.length>0?!0:!1},t.prototype.checkShowRedPoint=function(){return LuckGiftBagModel.getInstance.cleckAllRedPoint()},t.prototype.getEffName=function(e){return!1},t.prototype.tapExecute=function(){ViewManager.ins().open(LuckGiftBagWin),this.firstTap=!1,this.update()},t}(RuleIconBase);__reflect(LuckIconRule.prototype,"LuckIconRule"),window.LuckIconRule=LuckIconRule;var MailIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.MAIL_RED_POINT,MessageDef.MAIL_DATA_CHANGE,MessageDef.MAIL_GET_ITEM],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return 0==StartGetUserInfo.isOne},t.prototype.checkShowRedPoint=function(){return MailModel.ins().isHaveRedPoint?!0:MailModel.ins().mailData?MailModel.ins().getUnreadMail():0},t.prototype.tapExecute=function(){ViewManager.ins().open(MailWin)},t}(RuleIconBase);__reflect(MailIconRule.prototype,"MailIconRule"),window.MailIconRule=MailIconRule;var MonthCardIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.LEVEL_CHANGE,MessageDef.RECHARGE_UPDATE_MONTH_REWARD],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return WxSdk.ins().isHidePay()?!1:StartGetUserInfo.isUsa?!1:(!Recharge.ins().zunCard||Recharge.ins().monthDay<=0)&&GameGlobal.actorModel.level>=10},t.prototype.checkShowRedPoint=function(){return Recharge.ins().HasMonthCardReward()?1:0},t.prototype.getEffName=function(e){return this.firstTap?this.DefEffe(e):void 0},t.prototype.tapExecute=function(){ViewManager.ins().open(FuliWin,1,4),this.firstTap=!1,this.update()},t}(RuleIconBase);__reflect(MonthCardIconRule.prototype,"MonthCardIconRule"),window.MonthCardIconRule=MonthCardIconRule;var OmGifBagRule=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return WxSdk.ins().isHidePay()?!1:OmGifBagModel.getInstance.isShow(1)},t.prototype.checkShowRedPoint=function(){return!0},t.prototype.getEffName=function(e){return this.firstTap||e?this.DefEffe(e):void 0},t.prototype.tapExecute=function(){ViewManager.ins().open(OmGifBagWin)},t}(RuleIconBase);__reflect(OmGifBagRule.prototype,"OmGifBagRule"),window.OmGifBagRule=OmGifBagRule;var PartnerIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.LEVEL_CHANGE,MessageDef.VIP_LEVEL_CHANGE,MessageDef.SUB_ROLE_CHANGE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return WxSdk.ins().isHidePay()?!1:t.CheckShow()},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.rolesModel.length,t=GlobalConfig.ins("NewRoleConfig")[e];if(!t)return 0;var i=t.zsLevel?GameGlobal.zsModel.lv:GameGlobal.actorModel.level,o=t.zsLevel?t.zsLevel:t.level;return i>=o||GameGlobal.actorModel.vipLv>=t.vip?1:0},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){return this.firstTap=!1,SubRoles.ins().subRolesLen>=3?void UserTips.ins().showTips("全部职业已解锁"):void GameGlobal.ViewManager.open(NewRoleWin)},t.CheckShow=function(){return GameGlobal.rolesModel.length<SubRoles.MAX_COUNT},t}(RuleIconBase);__reflect(PartnerIconRule.prototype,"PartnerIconRule"),window.PartnerIconRule=PartnerIconRule;var PetTreasureIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_82,!0)},t.prototype.checkShowRedPoint=function(){return!1},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){this.firstTap=!1,ViewManager.ins().open(PetTreasureWin)},t}(RuleIconBase);__reflect(PetTreasureIconRule.prototype,"PetTreasureIconRule"),window.PetTreasureIconRule=PetTreasureIconRule;var QrcodeIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Const.isQrcode},t.prototype.checkShowRedPoint=function(){},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){SdkMgr.Qrcode()},t}(RuleIconBase);__reflect(QrcodeIconRule.prototype,"QrcodeIconRule"),window.QrcodeIconRule=QrcodeIconRule;var RankIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[Rank.postPraiseData,Rank.postAllPraiseData],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return 0==StartGetUserInfo.isOne},t.prototype.checkShowRedPoint=function(){return Rank.ins().canPraiseInAll()},t.prototype.tapExecute=function(){Rank.ins().OpenRankPanel(RankDataType.TYPE_POWER)},t}(RuleIconBase);__reflect(RankIconRule.prototype,"RankIconRule"),window.RankIconRule=RankIconRule;var RankingBtnIcon=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[Rank.postPraiseResult,GameLogic.ins().postLevelChange],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!0},t.prototype.tapExecute=function(){ViewManager.ins().open(RankingWin)},t}(RuleIconBase);__reflect(RankingBtnIcon.prototype,"RankingBtnIcon"),window.RankingBtnIcon=RankingBtnIcon;var RingIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.RING_UPDATE_OPEN_DATA,MessageDef.RING_UPDATE_TASK_DATA,MessageDef.RING_UPDATE_DATA,MessageDef.LEVEL_CHANGE],i.funcBar=t.getChildByName("bar"),i.funcIcon=t.getChildByName("icon"),i}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!SpecialRing.IsDeblocking())return!1;var e=SpecialRing.ins().GetCurActId();if(SpecialRing.ins().HasRing(e))return!1;this._Update();var t=SpecialRing.ins().GetCurActSurplusTime()>0&&e>0;return this.tar.visible=t,t},t.prototype.update=function(){e.prototype.update.call(this),this._Update()},t.prototype._Update=function(){var e=SpecialRing.ins().GetCurActId();if(e&&!SpecialRing.ins().HasRing(e)){this.funcIcon.icon="fun_sj0"+SpecialRingWin.GetIdIndex(e)+"_png";for(var t=GlobalConfig.ins("PublicSpecialringConfig")[e],i=0,o=0,s=0,n=t.condition;s<n.length;s++){var r=n[s];++i;var a=SpecialRing.ins().GetTaskInfo(r);a&&a.state!=RewardState.NotReached&&++o}this.funcBar.maximum=i,this.funcBar.value=o}},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){ViewManager.ins().open(SpecialRingActivityPanel)},t}(RuleIconBase);__reflect(RingIconRule.prototype,"RingIconRule"),window.RingIconRule=RingIconRule;var RingPanelIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.ITEM_COUNT_CHANGE,MessageDef.LEVEL_CHANGE,MessageDef.RING_BOSS_UPDATE,MessageDef.RING_BUFF_UPDATE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return SpecialRing.IsDeblocking()},t.prototype.checkShowRedPoint=function(){return SpecialRing.ins().IsRedPoint()||RingSoulModel.ins().hasRedPoint()||RingSoulModel.ins().hasRedRing()?1:0},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){ViewManager.ins().open(RingMainWin),this.update()},t}(RuleIconBase);__reflect(RingPanelIconRule.prototype,"RingPanelIconRule"),window.RingPanelIconRule=RingPanelIconRule;var SceneManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.clear=function(){var e=this._currScene;e&&(e.onExit(),this._currScene=void 0)},t.prototype.runScene=function(e){if(null==e)return void Logger.Log("runScene:scene is null");var t=this._currScene;t&&(t.onExit(),t=void 0);var i=new e;i.onEnter(),this._currScene=i},t.prototype.getCurrScene=function(){return this._currScene},t}(BaseClass);__reflect(SceneManager.prototype,"SceneManager"),window.SceneManager=SceneManager;var SetingIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!1},t.prototype.checkShowRedPoint=function(){return!1},t.prototype.tapExecute=function(){ViewManager.ins().open(SoundSetPanel)},t}(RuleIconBase);__reflect(SetingIconRule.prototype,"SetingIconRule"),window.SetingIconRule=SetingIconRule;var ShareIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return SdkMgr.currSdk==SDKTYPE.Wanba||SdkMgr.isWxGame()||Const.isShare?!0:!1},t.prototype.checkShowRedPoint=function(){},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){if(Main.isDebug||SdkMgr.isWxGame()){var e=ShareModel.ins().infos.firstshare;2==e?ViewManager.ins().open(ShareWinMain):ViewManager.ins().open(ShareFirstWin)}else SdkMgr.share()},t}(RuleIconBase);__reflect(ShareIconRule.prototype,"ShareIconRule"),window.ShareIconRule=ShareIconRule;var ShenmiIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.LEVEL_CHANGE,MessageDef.SHOP_MEADAL_OPEN_STATE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return null==this.funcOpenConfig&&(this.funcOpenConfig=GlobalConfig.ins("FuncOpenConfig")),GameLogic.ins().actorModel.level<this.funcOpenConfig[14].conditionnum||!Shop.ins().openState?!1:!1},t.prototype.checkShowRedPoint=function(){},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){this.firstTap=!1,ViewManager.ins().open(ShopWin)},t}(RuleIconBase);__reflect(ShenmiIconRule.prototype,"ShenmiIconRule"),window.ShenmiIconRule=ShenmiIconRule;var ShopIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return!1},t.prototype.tapExecute=function(){Deblocking.Check(DeblockingType.TYPE_14)&&ViewManager.ins().open(ShopWin)},t}(RuleIconBase);__reflect(ShopIconRule.prototype,"ShopIconRule"),window.ShopIconRule=ShopIconRule;var StrongIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.ACTIVITY_IS_AWARDS],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!1},t.prototype.checkShowRedPoint=function(){return!0},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){ViewManager.ins().open(StrongWin)},t}(RuleIconBase);__reflect(StrongIconRule.prototype,"StrongIconRule"),window.StrongIconRule=StrongIconRule;var TaskTraceIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[UserTask.postUpdteTaskTrace,GameLogic.ins().postLevelChange],i}return __extends(t,e),t.prototype.checkShowIcon=function(){if(StartGetUserInfo.isOne)return!1;var e=UserTask.ins().taskTrace;if(e){var t=(UserTask.ins().getAchieveConfById(e.id),UserTask.ins().getAchieveConfById(e.id+1));return t||2!=e.state?!0:!1}return!1},t.prototype.getEffName=function(e){var t,i=UserTask.ins().taskTrace;if(i)switch(i.state){case 0:GameLogic.ins().actorModel.level<=20&&(t="eff_mission"),this.effX=111,this.effY=35;break;case 1:t="eff_mission",this.effX=111,this.effY=35}return t},t.prototype.tapExecute=function(){var e=UserTask.ins().taskTrace;0==e.state?GameGuider.taskGuidance(e.id,1):(UserTask.ins().sendGetAchieve(e.id),t.postParabolicItem(e),!UserTask.ins().getAchieveConfById(e.id+1)),this.update()},t.postParabolicItem=function(e){return e},t}(RuleIconBase);__reflect(TaskTraceIconRule.prototype,"TaskTraceIconRule"),MessageCenter.compile(TaskTraceIconRule),window.TaskTraceIconRule=TaskTraceIconRule;var TreasureIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[UserBag.postHuntStore,MessageDef.CHECK_HAVE_CAN],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return this.tar.icon="fun_xb_png",GameGlobal.actorModel.level<10?!1:!0},t.prototype.checkShowRedPoint=function(){return UserBag.ins().getHuntGoodsBySort().length>0||LegendModel.ins().IsRedItem()?1:0},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){this.firstTap=!1,ViewManager.ins().open(TreasureHuntWin)},t}(RuleIconBase);__reflect(TreasureIconRule.prototype,"TreasureIconRule"),window.TreasureIconRule=TreasureIconRule;var VIP5IconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.VIP_LEVEL_CHANGE,MessageDef.SUB_ROLE_CHANGE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return WxSdk.ins().isHidePay()?!1:!1},t.prototype.checkShowRedPoint=function(){return 0},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){this.firstTap=!1,GameGlobal.ViewManager.open(VipWin,5)},t}(RuleIconBase);__reflect(VIP5IconRule.prototype,"VIP5IconRule"),window.VIP5IconRule=VIP5IconRule;var WarOrderRule=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return WarOrderModel.getInstance.isShow},t.prototype.checkShowRedPoint=function(){return WarOrderModel.getInstance.checkAllRedPoint()},t.prototype.getEffName=function(e){return this.firstTap||e?this.DefEffe(e):void 0},t.prototype.tapExecute=function(){ViewManager.ins().open(WarOrderWin)},t}(RuleIconBase);__reflect(WarOrderRule.prototype,"WarOrderRule"),window.WarOrderRule=WarOrderRule;var WorldBossIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.WORLD_BOSS_OPEN],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return ZsBoss.ins().wAcIsOpen},t.prototype.getEffName=function(e){return this.effX=145,this.effY=41,"eff_main_icon03"},t.prototype.tapExecute=function(){Deblocking.Check(DeblockingType.TYPE_23)&&ViewManager.ins().open(WorldBossWin)},t}(RuleIconBase);__reflect(WorldBossIconRule.prototype,"WorldBossIconRule"),window.WorldBossIconRule=WorldBossIconRule;var YbTurntableIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.ACTIVITY_IS_AWARDS,MessageDef.YB_CHANGE,MessageDef.LEVEL_CHANGE,MessageDef.UPDATE_RECHARGE,MessageDef.UPDATA_VIP_EXP,MessageDef.UPDATE_ACTIVITY_PANEL],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return WxSdk.ins().isHidePay()?!1:GameGlobal.ybTurntableModel.isOpenActivity()?GameGlobal.actorModel.level<10?!1:GameGlobal.ybTurntableModel.level>GameGlobal.ybTurntableModel.maxLevel?!1:!0:!1},t.prototype.checkShowRedPoint=function(){if(!GameGlobal.ybTurntableModel.data)return 0;var e=0,t=GameGlobal.ybTurntableModel.config;return GameGlobal.ybTurntableModel.level<=GameGlobal.ybTurntableModel.maxLevel&&GameGlobal.ybTurntableModel.chargeRecord>=t.recharge&&t.yuanBao<=parseInt(GameGlobal.actorModel.yb+"")&&e++,e},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){ViewManager.ins().open(YbTurntableWin),this.firstTap=!1,this.update()},t}(RuleIconBase);__reflect(YbTurntableIconRule.prototype,"YbTurntableIconRule"),window.YbTurntableIconRule=YbTurntableIconRule;var ZaEggIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.OPEN_SERVER],i}return __extends(t,e),t.prototype.checkShowIcon=function(){var e=GlobalConfig.ins("SmashEggsConfig").opentime;return GameServer.serverOpenDay>=e[0]&&GameServer.serverOpenDay<=e[1]},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){ViewManager.ins().open(ActivityWin)},t}(RuleIconBase);__reflect(ZaEggIconRule.prototype,"ZaEggIconRule"),window.ZaEggIconRule=ZaEggIconRule;var ZhuanZhiTaskIconRule=function(e){function t(t){var i=e.call(this,t)||this;i.firstTap=!0,i.updateMessage=[MessageDef.LEVEL_CHANGE];var o=t.getChildByName("btn");return i._groupEff=o.getChildByName("eff"),i}return __extends(t,e),t.prototype.checkShowIcon=function(){return null==this._mc&&(this._mc=new MovieClip,this._mc.x=this._groupEff.width/2-3,this._mc.y=this._groupEff.height/2-10,this._mc.scaleX=this._mc.scaleY=.6,this._groupEff.addChild(this._mc),this._mc.loadUrl(ResDataPath.GetUIEffePath("eff_fun_zzrw"),!0,-1)),Deblocking.Check(DeblockingType.TYPE_29,!0)&&ZhuanZhiModel.ins().showZhuanZhiTaskIcon()},t.prototype.checkShowRedPoint=function(){return ZhuanZhiModel.ins().canZhuanZhi()},t.prototype.getEffName=function(e){return null},t.prototype.tapExecute=function(){ViewManager.ins().open(ZhuanZhiTaskWin),this.firstTap=!1,this.update()},t}(RuleIconBase);__reflect(ZhuanZhiTaskIconRule.prototype,"ZhuanZhiTaskIconRule"),window.ZhuanZhiTaskIconRule=ZhuanZhiTaskIconRule;var ZsBossIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.ZS_BOSS_OPEN],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return ZsBoss.ins().acIsOpen},t.prototype.getEffName=function(e){return this.effX=145,this.effY=41,"eff_main_icon03"},t.prototype.tapExecute=function(){Deblocking.Check(DeblockingType.TYPE_21)&&ViewManager.ins().open(BossWin,3)},t}(RuleIconBase);__reflect(ZsBossIconRule.prototype,"ZsBossIconRule"),window.ZsBossIconRule=ZsBossIconRule;var PrestigeModel=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_prestige_uplevel_result,t.DoUpLevelResult),t.regNetMsg(S2cProtocol.sc_prestige_rank_topthree,t.doPrestigeRankTopThree),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.DoUpLevelResult=function(e){var t=e.result;0==t&&(GameGlobal.actorModel.prestige_level=GameGlobal.actorModel.prestige_level+1),GameGlobal.MessageCenter.dispatch(MessageDef.PRESTIGE_RESULT)},t.prototype.SendUpgrade=function(){new Sproto.cs_prestige_uplevel_request;this.Rpc(C2sProtocol.cs_prestige_uplevel)},t.prototype.doPrestigeRankTopThree=function(e){var t=this;this.praises=[],e.actorList.forEach(function(e){var i=new PraiseData;i.parser(e),t.praises.push(i)}),GameGlobal.MessageCenter.dispatch(MessageDef.PRESTIGE_RANK_TOPTHREE)},t.prototype.SendPrestigeReqTopthree=function(){GameSocket.ins().Rpc(C2sProtocol.cs_prestige_req_topthree)},t.CheckRedPoint=function(){if(!t.Deblocking(!0))return!1;var e=GameGlobal.actorModel.prestige_level,i=GameGlobal.actorModel.prestige;null==t.prestigeLevelConfig&&(t.prestigeLevelConfig=GlobalConfig.ins("PrestigeLevelConfig"));var o=t.prestigeLevelConfig[e-1],s=o?o.growUpNeed:0,n=t.prestigeLevelConfig[e],r=t.prestigeLevelConfig[e+1];return null==r?!1:i-s>=n.growUpNeed-s?!0:!1},t.Deblocking=function(e){void 0===e&&(e=!1),null==t.prestigeCommonConfig&&(t.prestigeCommonConfig=GlobalConfig.ins("PrestigeCommonConfig"));var i=t.prestigeCommonConfig.openLevel;return GameGlobal.actorModel.level<i?(e||UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101424,[i])),!1):!0},t}(BaseSystem);__reflect(PrestigeModel.prototype,"PrestigeModel"),window.PrestigeModel=PrestigeModel;var PrestigeListView=function(e){function t(){var t=e.call(this)||this;return t.skinName="PrestigeListViewSkin",t.list.itemRenderer=PrestigeListViewItem,t}return __extends(t,e),t.prototype.open=function(){this.m_bg.init("PrestigeListView",GlobalConfig.jifengTiaoyueLg.st101258),null==this.prestigeLevelConfig&&(this.prestigeLevelConfig=GlobalConfig.ins("PrestigeLevelConfig"));var e=this.prestigeLevelConfig,t=[];for(var i in e){var o=e[i],s=o.level;t[s]||t.push({id:s,num:o.growUpNeed})}this.list.dataProvider=new eui.ArrayCollection(t)},t.prototype.close=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(PrestigeListView.prototype,"PrestigeListView"),window.PrestigeListView=PrestigeListView;var PrestigeListViewItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="PrestigeListItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.num.text=this.data.num+"",this.icon.source="comp_135_37_"+this.data.id+"_png"},t}(eui.ItemRenderer);__reflect(PrestigeListViewItem.prototype,"PrestigeListViewItem"),window.PrestigeListViewItem=PrestigeListViewItem;var PrestigeWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101246,t.curProValue=0,t.maxProValue=0,t.skinName="PrestigeWinSkin",t.name=GlobalConfig.jifengTiaoyueLg.st101246,t.review.touchEnabled=!0,t.progressBar.labelFunction=function(e,i){return t.curProValue+"/"+t.maxProValue},t.roleList=[t.roleShow1,t.roleShow2,t.roleShow3],t.rankBtn.text=GlobalConfig.jifengTiaoyueLg.st101256,UIHelper.SetLinkStyleLabel(t.rankBtn),t.progressBar.slideDuration=0,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100378,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100378,t.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100378,t.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st101254,t.m_Lan5.text=GlobalConfig.jifengTiaoyueLg.st101255,t.m_Lan6.text=GlobalConfig.jifengTiaoyueLg.st101257,t.review.label=GlobalConfig.jifengTiaoyueLg.st101258,t.upBtn.label=GlobalConfig.jifengTiaoyueLg.st100214,t}return __extends(t,e),t.prototype.open=function(){this.AddClick(this.review,this.OnClick),this.AddClick(this.upBtn,this.OnClick),this.AddClick(this.rankBtn,this.OnClick),this.AddClick(this.getway,this.OnClick),this.AddClick(this.btnShowEffect,this.OnClick),this.AddClick(this.btnHelp1,this.OnClick),this.AddClick(this.btnHelp2,this.OnClick),this.AddClick(this.btnHelp3,this.OnClick),this.observe(MessageDef.PRESTIGE_RESULT,this._DoEventResult),this.observe(MessageDef.PRESTIGE_RANK_TOPTHREE,this._DoEventRankTopThree),PrestigeModel.ins().SendPrestigeReqTopthree()},t.prototype.release=function(){for(var e=0;e<this.roleList.length;e++)this.roleList[e].release()},t.prototype._DoEventResult=function(e){this.UpdateContent()},t.prototype.OnClick=function(e){switch(e.currentTarget){case this.review:ViewManager.ins().open(PrestigeListView);break;case this.upBtn:null==this.prestigeLevelConfig&&(this.prestigeLevelConfig=GlobalConfig.ins("PrestigeLevelConfig"));var t=GameGlobal.actorModel.prestige,i=GameGlobal.actorModel.prestige_level,o=this.prestigeLevelConfig[i];o.growUpNeed<=t?this.prestigeLevelConfig[i+1]?PrestigeModel.ins().SendUpgrade():UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101247):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101248);break;case this.rankBtn:Rank.ins().OpenRankPanel(RankDataType.TYPE_PRESTIGE);break;case this.getway:UserWarn.ins().setBuyGoodsWarn(10);break;case this.btnShowEffect:ViewManager.ins().open(ZsBossRuleSpeak,19,GlobalConfig.jifengTiaoyueLg.st101249);break;case this.btnHelp1:ViewManager.ins().open(ZsBossRuleSpeak,20,GlobalConfig.jifengTiaoyueLg.st101250);break;case this.btnHelp2:ViewManager.ins().open(ZsBossRuleSpeak,21,GlobalConfig.jifengTiaoyueLg.st101251);break;case this.btnHelp3:ViewManager.ins().open(ZsBossRuleSpeak,22,GlobalConfig.jifengTiaoyueLg.st101252)}},t.prototype._DoEventRankTopThree=function(){for(var e=PrestigeModel.ins().praises,t=0;t<e.length;++t)if(e[t].id>0){this.nameGroup.getChildAt(t).text=e[t].name;var i=e[t].subRole[0];this.roleList[t].creatAnim(i)}},t.prototype.UpdateContent=function(){null==this.prestigeCommonConfig&&(this.prestigeCommonConfig=GlobalConfig.ins("PrestigeCommonConfig")),null==this.prestigeLevelConfig&&(this.prestigeLevelConfig=GlobalConfig.ins("PrestigeLevelConfig"));
var e=this.prestigeCommonConfig.PrestigeReduction/1e4*100;e=Math.floor(e),this.tips.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101253,[e]);var t=GameGlobal.actorModel.prestige,i=GameGlobal.actorModel.prestige_level,o=this.prestigeLevelConfig[i-1],s=(o?o.growUpNeed:0,this.prestigeLevelConfig[i]),n=this.prestigeLevelConfig[i+1];this.curLevelImg.source="comp_135_37_"+s.level+"_png",this.starList.starNum=s.star,this.maxProValue=s.growUpNeed,this.curProValue=t,this.progressBar.maximum=this.maxProValue,this.progressBar.value=this.curProValue,this.progressBar.labelDisplay.text=this.progressBar.labelFunction(0,0),this.attrLabel.SetCurAttrNew(AttributeData.getAttStr(s.attrs,0)),n&&this.attrLabel.SetNextAttrNew(AttributeData.getAttStr(n.attrs,0)),2==s.growUpState&&s.growUpNeed<=t?(this.progressBar.value=this.progressBar.maximum=1,this.progressBar.labelDisplay.visible=!1,this.upBtn.label=i&&GlobalConfig.jifengTiaoyueLg.st100214||GlobalConfig.jifengTiaoyueLg.st100212):(this.progressBar.labelDisplay.visible=!0,this.upBtn.label=GlobalConfig.jifengTiaoyueLg.st100211),this.powerLabel.text=UserBag.getAttrPower(s.attrs)},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_89)},t.prototype.CheckRedPoint=function(){return PrestigeModel.CheckRedPoint()},t}(BaseView);__reflect(PrestigeWin.prototype,"PrestigeWin",["ICommonWindowTitle"]),window.PrestigeWin=PrestigeWin;var FbAndLevelsRankItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="FbRankItemSkin",t}return __extends(t,e),t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openDetail,this)},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openDetail,this)},t.prototype.dataChanged=function(){this.rank.text=this.data[RankDataType.DATA_POS]+"";var e=this.data[RankDataType.DATA_VIP];this.nameLabel.Set(this.data[RankDataType.DATA_PLAYER],e,1==this.data[RankDataType.DATA_MONTH],!1),this.zhanli.text=CommonUtils.overLength(this.data[RankDataType.DATA_POWER]),this.ce.text=this.data[RankDataType.DATA_COUNT]+GlobalConfig.jifengTiaoyueLg.st100369},t.prototype.openDetail=function(){},t}(eui.ItemRenderer);__reflect(FbAndLevelsRankItem.prototype,"FbAndLevelsRankItem"),window.FbAndLevelsRankItem=FbAndLevelsRankItem;var FbAndLevelsRankWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="FbRankSkin",t}return __extends(t,e),t.prototype.UpdateContent=function(){},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.list.itemRenderer=FbAndLevelsRankItem,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100400,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100401,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100306,this.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st100402,this.m_Lan5.text=GlobalConfig.jifengTiaoyueLg.st100403},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.windowTitleIconName=3==e[0]?GlobalConfig.jifengTiaoyueLg.st100380:GlobalConfig.jifengTiaoyueLg.st100388,this.commonWindowBg.OnAdded(this);var i=Rank.ins().rankModel[e[0]];this.rank.text=0<i.selfPos&&i.selfPos<=1e3?i.selfPos+"":GlobalConfig.jifengTiaoyueLg.st100086,this.list.dataProvider=new eui.ArrayCollection(i.getDataList())},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t}(BaseEuiPanel);__reflect(FbAndLevelsRankWin.prototype,"FbAndLevelsRankWin",["ICommonWindowTitle"]),ViewManager.ins().reg(FbAndLevelsRankWin,LayerManager.UI_Main),window.FbAndLevelsRankWin=FbAndLevelsRankWin;var PraiseData=function(){function e(){this.subRole=[],this.praiseTime=0,this.praiseCount=0}return e.prototype.getLastMobaiNum=function(){var e=UserZs.ins().lv>0?1e3*UserZs.ins().lv:GameLogic.ins().actorModel.level;e>12e3&&(e=12e3);var t=GlobalConfig.ins("MorshipConfig")[this.type][e].count;return t-this.praiseTime},e.prototype.parser=function(e){if(this.type=e.type,this.praiseCount=e.count,this.id=e.actorData.actorid,this.id>0){this.name=e.actorData.name,this.ce=e.actorData.power,this.level=e.actorData.level,this.zhuan=e.actorData.zhuan,this.vipLevel=e.actorData.vip;for(var t=e.subRole.length,i=0;t>i;i++)this.subRole[i]=new SubRole,this.subRole[i].parser(e.subRole[i]);this.guildName=e.actorData.guildName}},e.prototype.getRoleByJob=function(e){if(e>0)for(var t in this.subRole)if(this.subRole[t].job==e)return this.subRole[t];return this.subRole[0]},e}();__reflect(PraiseData.prototype,"PraiseData");var SubRole=function(){function e(){this.legendDress=null}return e.prototype.parser=function(e){this.job=e.job,this.sex=e.sex,this.clothID=e.clothID,this.swordID=e.swordID,this.wingLevel=e.wingLevel,this.wingShowLevel=e.wingshow,!e.wingOpenStatus&&(this.wingLevel=null),this.wingOpenStatus=e.wingOpenStatus,this.zhuangbei=e.zhuangbei,this.legendDress=e.legendDress,this.mountLv=e.ride,this.moubtShowLv=e.rideshow,this.mainEle=e.mainEle,this.zhuanzhiLv=e.zhuanzhiLv},e.prototype.parserByRoleData=function(e){this.job=e.job||0,this.sex=e.sex||0;try{this.clothID=e.equipsData[EquipPos.CLOTHES].item.configID}catch(t){this.clothID=0}try{this.swordID=e.equipsData[EquipPos.WEAPON].item.configID}catch(t){this.swordID=0}this.wingLevel=e.wingsData.lv,this.wingShowLevel=e.wingsData.showlv,!e.wingsData.openStatus&&(this.wingLevel=null),this.wingOpenStatus=e.wingsData.openStatus,this.zhuangbei=e.zhuangbei,this.legendDress=e.legendDress,this.mountLv=e.ride,this.moubtShowLv=e.rideshow,this.mainEle=e.mainEle,this.zhuanzhiLv=e.zhuanzhiLv},e}();__reflect(SubRole.prototype,"SubRole"),window.PraiseData=PraiseData,window.SubRole=SubRole;var Rank=function(e){function t(){var i=e.call(this)||this;return i.rankModel=[],i.activityRankType=[114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134],i.mRankIndex=0,i.sysId=PackageID.Ranking,i.regNetMsg(S2cProtocol.sc_rank_data,i.getRankingData),i.regNetMsg(S2cProtocol.sc_rank_worship_data,i.PraiseData),i.regNetMsg(S2cProtocol.sc_rank_worship_success,i.PraiseResult),i.regNetMsg(S2cProtocol.sc_rank_worship_all_count_ret,t.postAllPraiseData),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendGetRankingData=function(e){var t=new Sproto.cs_rank_req_request;t.type=e,GameSocket.ins().Rpc(C2sProtocol.cs_rank_req,t)},t.prototype.getRankingData=function(e){var i=this.getRankModel(e.type);i.parser(e),t.postRankingData(i),OtherAIModel.getInstance.setName(),-1!=this.activityRankType.indexOf(e.type)&&GameGlobal.MessageCenter.dispatch(MessageDef.PAY_SPEND_RANK_UPDATE,e.type)},t.postRankingData=function(e){return e},t.prototype.sendGetPraiseData=function(e){void 0===e&&(e=0);var t=new Sproto.cs_rank_worship_data_req_request;t.type=Number(e),GameSocket.ins().Rpc(C2sProtocol.cs_rank_worship_data_req,t)},t.prototype.PraiseData=function(e){t.postPraiseData(e)},t.postPraiseData=function(e){var i=t.ins().getRankModel(e.type);return i.praise.parser(e),i.type},t.prototype.sendGetAllPraiseData=function(){GameSocket.ins().Rpc(C2sProtocol.cs_rank_worship_all_count,new Sproto.cs_rank_worship_all_count_request)},t.postAllPraiseData=function(e){for(var i=e.worshipCount.length,o=0;i>o;o++){var s=t.ins().getRankModel(e.worshipCount[o].type);s.praise.praiseTime=e.worshipCount[o].count}},t.prototype.sendPraise=function(e){var t=new Sproto.cs_rank_worship_once_request;t.type=e,GameSocket.ins().Rpc(C2sProtocol.cs_rank_worship_once,t)},t.prototype.PraiseResult=function(e){t.postPraiseResult(e)},t.postPraiseResult=function(e){var i=t.ins().getRankModel(e.type);return i.praise.praiseTime=e.count,i.praise.type=e.type,[i.type,i.praise.getLastMobaiNum()]},t.prototype.getRankModel=function(e){if(!(e in this.rankModel)){var t=void 0;t=e==RankDataType.TYPE_SKIRMISH?RankDataSkirmish:e==RankDataType.TYPE_LADDER?RankDataLadder:-1!=this.activityRankType.indexOf(e)?RankDataInfo:RankDataBase,this.rankModel[e]=new RankModel(e,t)}return this.rankModel[e]},t.prototype.canPraiseByType=function(e){return this.rankModel[e]?this.rankModel[e].praise.praiseTime<1:!1},t.prototype.canPraiseInAll=function(){if(GameGlobal.actorModel.level<=60)return!1;for(var e=0,i=t.RANK_PANEL_TEYPS;e<i.length;e++){var o=i[e];if(this.canPraiseByType(o))return!0}return!1},t.prototype.OpenRankPanel=function(e){if(GameGlobal.actorModel.level<60)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100379);for(var i=0;i<t.RANK_PANEL_TEYPS.length;++i)t.RANK_PANEL_TEYPS[i]==e&&(this.mRankIndex=i,ViewManager.ins().open(RankingWin))},t.RANK_PANEL_TEYPS=[RankDataType.TYPE_POWER,RankDataType.TYPE_LEVEL,RankDataType.TYPE_WING,RankDataType.TYPE_LADDER,RankDataType.TYPE_JOB_ZS,RankDataType.TYPE_JOB_FS,RankDataType.TYPE_JOB_DS,RankDataType.TYPE_SKIRMISH,RankDataType.TYPE_PRESTIGE],t}(BaseSystem);__reflect(Rank.prototype,"Rank");var RankModel=function(){function e(e,t){this.type=e,this._dataClass=t,this._dataList=[],this.praise=new PraiseData}return e.prototype.getDataList=function(e){return void 0===e&&(e=-1),-1==e?this._dataList:this._dataList[e]},e.prototype.parser=function(e){var t=RankDataType.ITEMS[this.type];t||(t=RankDataType.ITEMS[this.type]=[RankDataType.DATA_POS,RankDataType.DATA_ID,RankDataType.DATA_PLAYER,RankDataType.DATA_LEVEL,RankDataType.DATA_ZHUAN,RankDataType.DATA_VIP,RankDataType.DATA_MONTH,RankDataType.DATA_POWER]);var i=e.datas.length;this._dataList.length=i;for(var o=0;i>o;++o)o in this._dataList||(this._dataList[o]=new this._dataClass),this._dataList[o].parser(e.datas[o],t);this.selfPos=e.selfRank,this.value=e.value},e}();__reflect(RankModel.prototype,"RankModel"),MessageCenter.compile(Rank),window.Rank=Rank,window.RankModel=RankModel;var QuickH5SDK=function(e){function t(){var t=e.call(this)||this;return t.productCode="",t.productKey="",t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getParam=function(e,t){var i=this;SdkMgr.requestType=2,this.productCode=e,this.productKey=t,window.QuickSDK.init(e,t,!0,function(){console.log("init success"),window.QuickSDK.setSwitchAccountNotification(function(e){window.location.reload(),egret.log("切换账号注册")}),window.QuickSDK.setLogoutNotification(function(e){console.log("Game:玩家点击注销帐号"),window.location.reload()}),i.sdkLogin()})},t.prototype.sdkLogin=function(){egret.log("调用登录"),window.QuickSDK.login(function(e){egret.log("quick登录状态"+e.status);var i;if(e.status){i="GameDemo:QuickSDK登录成功: uid=>"+e.data.uid;var o="";for(var s in e.data)o+=s+"="+e.data[s]+"&","username"==s&&(t.username=e.data[s]);StartGetUserInfo.urlData=o+"tag="+SdkMgr.tag,SdkMgr.sendServerUrl()}else t.ins().sdkLogin()})},t.prototype.sdkLogout=function(){window.QuickSDK.logout(function(e){console.log("Game:成功退出游戏"),window.location.reload()})},t.prototype.pay=function(e){var i={};i.serverid=GameServer.serverID+"",i.goodsid=e.goodsId+"",i.amount=e.amount+"",i.tag=SdkMgr.tag;var o="",s=e.subject.indexOf("=");o=-1!=s?e.subject.substr(0,s-1)+"等于"+e.subject.substr(s+1,e.subject.length):e.subject;var n=new egret.ByteArray,r=JSON.stringify(i);n.writeUTFBytes(r);var a=new Object;a.productCode=this.productCode,a.serverId=GameServer.serverID,a.uid=StartGetUserInfo.uid2,a.username=t.username,a.userRoleId=GameLogic.ins().actorModel.actorID+"",a.userRoleName=GameLogic.ins().actorModel.name+"",a.userServer=GameServer.serverID+"区",a.userLevel=GameLogic.ins().actorModel.level,a.cpOrderNo=SdkMgr.uuid(18,16)+"",a.amount=e.amount+"",a.subject=o,a.desc=o,a.callbackUrl="",a.extrasParams=egret.Base64Util.encode(n.buffer)+"",a.goodsId=e.goodsId+"",a.count=1,a.quantifier="个";var l=JSON.stringify(a);window.QuickSDK.pay(l,function(e){egret.log("GameDemo:下单通知"+JSON.stringify(e))})},t.prototype.setExtData=function(e){if(e!=SdkMgr.extDataType_5){var i=new Object;i.isCreateRole=e==SdkMgr.extDataType_2?!0:!1,i.roleCreateTime=SdkMgr.createTime,i.uid=StartGetUserInfo.uid2+"",i.username=t.username,i.serverId=GameServer.serverID,i.serverName=GameServer.serverName+"",i.userRoleId=GameLogic.ins().actorModel.actorID+"",i.userRoleName=GameLogic.ins().actorModel.name,i.userRoleBalance=GameLogic.ins().actorModel.yb,i.vipLevel=GameLogic.ins().actorModel.vipLv,i.userRoleLevel=GameLogic.ins().actorModel.level,i.partyId=GameLogic.ins().actorModel.guildID,i.partyName=GameLogic.ins().actorModel.guildName,i.gameRoleGender="",i.gameRolePower=GameLogic.ins().actorModel.power,i.partyRoleId=1,i.partyRoleName="",i.professionId="",i.profession="",i.friendlist="",i.roleCreateTime=SdkMgr.createTime;var o=JSON.stringify(i);window.QuickSDK.uploadGameRoleInfo(o,function(e){e.status?egret.log("提交信息成功"):egret.log(e.message)})}},t.username="",t}(BaseClass);__reflect(QuickH5SDK.prototype,"QuickH5SDK"),window.QuickH5SDK=QuickH5SDK;var RankDataLadder=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.parser=function(e,t){this.pos=e.pos,this.id=e.id,this.player=e.player,this.challgeLevel=e.challgeLevel,this.challgeId=e.challgeId,this.winNum=e.winNum,this.job=e.job,this.sex=e.sex},t}(RankDataBase);__reflect(RankDataLadder.prototype,"RankDataLadder"),window.RankDataLadder=RankDataLadder;var RankDataSkirmish=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.parser=function(t,i){e.prototype.parser.call(this,t,i);for(var o in GlobalConfig.ins("PublicPkrednamerankConfig")){var s=GlobalConfig.ins("PublicPkrednamerankConfig")[o];if(s.minRank<=this.pos&&this.pos<=s.maxRank)return this.reward=s.rewards[0].count,void(this.money=s.rewards[1].count)}this.money=this.reward=0},t}(RankDataBase);__reflect(RankDataSkirmish.prototype,"RankDataSkirmish"),window.RankDataSkirmish=RankDataSkirmish;var MapGridNode=function(){function e(){}return Object.defineProperty(e.prototype,"hidden",{get:function(){return(2&this.flags)>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"walkable",{get:function(){return(1&this.flags)>0},enumerable:!0,configurable:!0}),e.FLAG_WALKABLE=32768,e.FLAG_HIDDEN=16384,e}();__reflect(MapGridNode.prototype,"MapGridNode");var MapGridNode2=function(){function e(){}return Object.defineProperty(e.prototype,"hidden",{get:function(){return(2&this.flags)>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"walkable",{get:function(){return!((1&this.flags)>0)},enumerable:!0,configurable:!0}),e.FLAG_WALKABLE=32768,e.FLAG_HIDDEN=16384,e}();__reflect(MapGridNode2.prototype,"MapGridNode2"),window.MapGridNode=MapGridNode,window.MapGridNode2=MapGridNode2;var UserReadPlayer=function(e){function t(){var t=e.call(this)||this;return GameGlobal.MessageCenter.addListener(MessageDef.SHOW_OTHER_ACTOR,t._DoResult,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype._DoResult=function(e){if(e==this.m_ActorId){this.m_ActorId=null;var t=GameLogic.ins().GetShowOtherActor(e);t.roleList&&GameGlobal.MessageCenter.dispatch(MessageDef.SHOW_RANK_OTHER_ACTOR,e)}},t.prototype.LookPlayer=function(e,t){e&&(this.m_ActorId=e,this.m_RoleId=t,GameLogic.ins().SendGetOtherActorInfo(e,null),GameLogic.ins().SendGetOtherPlayerInfo(e,t))},Object.defineProperty(t.prototype,"actorId",{get:function(){return this._actorId},set:function(e){this._actorId=e},enumerable:!0,configurable:!0}),t}(BaseClass);__reflect(UserReadPlayer.prototype,"UserReadPlayer"),window.UserReadPlayer=UserReadPlayer;var RankingPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100091,t.skinName="RankingSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=RankItemRenderer,this.tab.itemRenderer=RankTabItemRenderer;var e={name:GlobalConfig.jifengTiaoyueLg.st101351,type:"0",title:"",t10:"comp_83_48_01_png",power:GlobalConfig.jifengTiaoyueLg.st101360+"：{value}"},t={name:GlobalConfig.jifengTiaoyueLg.st101352,type:"5",title:"",t10:"",skin:"RankItemLevelSkin"},i={name:GlobalConfig.jifengTiaoyueLg.st101353,type:"6",title:"",t10:"",power:GlobalConfig.jifengTiaoyueLg.st101361+"：{value}"},o={name:GlobalConfig.jifengTiaoyueLg.st101354,type:"11",title:"",t10:"",skin:"RankItemLadderSkin",challgeLevel:"ladder_rank_{value}",winNum:"{value}"+GlobalConfig.jifengTiaoyueLg.st100812},s={name:GlobalConfig.jifengTiaoyueLg.st101355,type:"7",title:"",t10:"",power:GlobalConfig.jifengTiaoyueLg.st101362+"：{value}"},n={name:GlobalConfig.jifengTiaoyueLg.st101356,type:"8",title:"",t10:"",power:GlobalConfig.jifengTiaoyueLg.st101363+"：{value}"},r={name:GlobalConfig.jifengTiaoyueLg.st101357,type:"9",title:"",t10:"",power:GlobalConfig.jifengTiaoyueLg.st101364+"：{value}"},a={name:GlobalConfig.jifengTiaoyueLg.st101358,type:"2",title:"",t10:"comp_83_48_01_png",skin:"RankItemSkirmishSkin",count:GlobalConfig.jifengTiaoyueLg.st101365+"：{value}"},l={name:GlobalConfig.jifengTiaoyueLg.st101359,type:"20",title:"",t10:"",power:GlobalConfig.jifengTiaoyueLg.st101246+"：{value}"},h=[e,t,i,o,s,n,r,a,l];this.tab.dataProvider=new eui.ArrayCollection(h)},t.prototype.open=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];Rank.ins().sendGetPraiseData(0),this.addTouchEvent(this,this.onClick,this.detail),this.addTouchEvent(this,this.onClick,this.firstItem),this.addItemTapEvent(this,this._ListTap,this.list),this.addTouchEvent(this,this.onClick,this.praiseBtn),this.addItemTapEvent(this,this.onTouchTab,this.tab);var o=Rank.ins().mRankIndex;if((o==this.tab.dataProvider.length-1||o==this.tab.dataProvider.length-2)&&(this.tab.validateNow(),this.tab.scrollV=125),o>=this.tab.dataProvider.length&&(o=this.tab.dataProvider.length-1),this.setOpenIndex(o),this.observe(Rank.postPraiseResult,this.updatePraiseBtn),this.observe(Rank.postRankingData,this.updateList),this.observe(Rank.postPraiseData,this.updateShapes),this.observe(MessageDef.SHOW_RANK_OTHER_ACTOR,this.openOtherPlayerView),t&&7==t[0]){if(this.scroller&&this.scroller.viewport&&58==this.scroller.viewport.scrollV)return;egret.Tween.get(this.scroller.viewport).wait(300).to({scrollV:58},400).call(function(){egret.Tween.removeTweens(e.scroller.viewport)})}},t.prototype.close=function(){DisplayUtils.dispose(this.eff),this.eff=null},t.prototype.release=function(){this.close(),this.roleShowPanel.release(),this.m_RankScroller.stopAnimation(),this.scroller.stopAnimation()},t.prototype.updateList=function(e){if(e.type==this.rankType){this.selfPos.text=0<e.selfPos&&e.selfPos<=1e3?e.selfPos+"":GlobalConfig.jifengTiaoyueLg.st100086;var t=e.getDataList();this.firstItem.data=t[0],this.list.dataProvider=new eui.ArrayCollection(t.slice(1)),this.posImg.visible=null!=this.firstItem.data;var i=ViewManager.ins().getView(RankingWin);i&&i.updateRedPoint()}},t.prototype.onTouchTab=function(e){this.setOpenIndex(this.tab.selectedIndex)},t.prototype.updateShapes=function(e){if(e==this.rankType){this.setMoBaiCishu();var t=null,i=Rank.ins().getRankModel(e);if(i.praise.id>0&&this.firstItem.data){var o=0;e==RankDataType.TYPE_JOB_ZS?o=JobConst.ZhanShi:e==RankDataType.TYPE_JOB_FS?o=JobConst.FaShi:e==RankDataType.TYPE_JOB_DS&&(o=JobConst.DaoShi),t=i.praise.getRoleByJob(o),this.roleShowPanel.creatAnim(t)}this.praiseGroup.visible=null!=t}},t.prototype.updatePraiseBtn=function(){var e=this.tab.selectedIndex;Rank.ins().sendGetPraiseData(this.rankType),Rank.ins().canPraiseByType(Rank.RANK_PANEL_TEYPS[e])?(this.praiseBtn.enabled=!0,this.praiseBtn.label=GlobalConfig.jifengTiaoyueLg.st100087):(this.praiseBtn.enabled=!1,this.praiseBtn.label=GlobalConfig.jifengTiaoyueLg.st100088)},t.prototype.setMoBaiCishu=function(){var e=Rank.ins().getRankModel(this.rankType),t=e.praise;this.worship_count.text=GlobalConfig.jifengTiaoyueLg.st100089+(t.praiseCount||0)},t.prototype.setOpenIndex=function(e){this.list.parent&&this.list.parent.stopAnimation&&this.list.parent.stopAnimation(),this.list.scrollH=0,this.tab.selectedIndex=e,this.updatePraiseBtn();var t=this.tab.selectedItem;this.rankType=t.type,RankItemRenderer.dataFormat=t,this.praiseGroup.visible=this.posImg.visible=!1,this.selfPos.text=null,this.list.dataProvider=null,this.firstItem.data=null,this.list.itemRendererSkinName=this.firstItem.skinName=t.skin||"RankItemPowerSkin";var i=null;this.rankType==RankDataType.TYPE_POWER?i=Title.ins().getTitleByActivityId(3):this.rankType==RankDataType.TYPE_SKIRMISH&&(i=Title.ins().getTitleByActivityId(1)),Rank.ins().sendGetRankingData(this.rankType),this.titleImg.source=null,this.eff&&(this.eff.visible=!1),i&&(Title.IsEffName(i.img)?(this.eff=this.eff||new MovieClip,null==this.eff.parent&&(this.addChild(this.eff),this.eff.x=235,this.eff.y=50,this.eff.scaleX=.8,this.eff.scaleY=.8,this.eff.touchEnabled=!1),this.eff.loadUrl(ResDataPath.GetUIEffePath(i.img),!0,-1),this.addChild(this.eff)):this.titleImg.source=i.img),Rank.ins().sendGetPraiseData(this.rankType);var o=null,s=null,n=GlobalConfig.ins("MorshipConfig")[this.rankType];if(n){var r=GameGlobal.actorModel.level,a=GameGlobal.zsModel.lv,l=null;l=a>0?n[1e3*a]:n[r],l&&(o=l.awards[0].count,s=l.awards[1].count)}o?(CommonUtils.labelIsOverLenght(this.pariseGold,o),CommonUtils.labelIsOverLenght(this.pariseExp,s),this.praise.visible=!0):this.praise.visible=!1},t.prototype._ListTap=function(e){var t=this.list.getElementAt(e.itemIndex);if(t){var i=t.data[RankDataType.DATA_ID],o=0;UserReadPlayer.ins().LookPlayer(i,o),UserReadPlayer.ins().actorId=i}},t.prototype.onClick=function(e){switch(e.currentTarget){case this.detail:case this.firstItem:this.firstItem.data&&UserReadPlayer.ins().LookPlayer(this.firstItem.data[RankDataType.DATA_ID],0),UserReadPlayer.ins().actorId=this.firstItem.data[RankDataType.DATA_ID];break;case this.praiseBtn:Rank.ins().sendPraise(Rank.RANK_PANEL_TEYPS[this.tab.selectedIndex])}},t.prototype.openOtherPlayerView=function(e){ViewManager.ins().open(TrRoleWin,e)},t.openCheck=function(){var e=GameLogic.ins().actorModel.level;return 60>e?(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100090),!1):!0},t.GetBodyResName=function(e,t){return""+RES_DIR_BODY+e+"_"+t+"_c_png"},t.GetBodyResNameByJob=function(e,t){return RES_DIR_BODY+"body"+e+"00_"+t+"_c_png"},t.GetWeaponResName=function(e){return""+RES_DIR_WEAPON+e+"_c_png"},t.GetWeaponResNameByJob=function(e){return RES_DIR_WEAPON+"weapon"+e+"00_c_png"},t.GetWingResName=function(e){return RES_DIR_WING+e+"_png"},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(RankingPanel.prototype,"RankingPanel",["ICommonWindowTitle"]),window.RankingPanel=RankingPanel;var RankingWin=function(e){function t(){var t=e.call(this)||this;return t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.rankingpanel=new RankingPanel,this.rankingpanel.name=GlobalConfig.jifengTiaoyueLg.st100091,this.commonWindowBg.AddChildStack(this.rankingpanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=null!=e[0]?e[0]:0;null!=e[1]?e[1]:0;this.commonWindowBg.OnAdded(this,i,0),this.observe(Rank.postPraiseResult,this.updateRedPoint),this.observe(Rank.postPraiseData,this.updateRedPoint)},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),this.removeObserve(),this.rankingpanel.release()},t.prototype.updateRedPoint=function(){this.commonWindowBg.ShowTalRedPoint(0,Rank.ins().canPraiseInAll())},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t}(BaseEuiPanel);__reflect(RankingWin.prototype,"RankingWin",["ICommonWindow"]),ViewManager.ins().reg(RankingWin,LayerManager.UI_Main),window.RankingWin=RankingWin;var RankItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!0,t.touchChildren=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=new eui.Group;e.percentWidth=100,e.percentHeight=100,this.addChild(e)},t.prototype.dataChanged=function(){if(this.SetDefualtPos(),null!=this.data){for(var e in this.data)this.updateValue(this[e],e,this.data[e]);if(null!=this.data.challgeLevel&&null!=this.data.challgeId){var i=this.levelIcon;i&&i.SetRank&&i.SetRank(this.data.challgeLevel,this.data.challgeId)}this.t10.source=this.data[RankDataType.DATA_POS]>=1&&this.data[RankDataType.DATA_POS]<=10?t.dataFormat.t10:"",this.data[RankDataType.DATA_POS]<=3?this.lv.bg.source="comp_68_67_0"+this.data[RankDataType.DATA_POS]+"_png":this.lv.bg.source=""}this.visible=null!=this.data},t.prototype.SetDefualtPos=function(){this.lv.vipLab&&(this.lv.vipLab.visible=!1,this.lv.vipLab.text=""),this.lv.vipbg&&(this.lv.vipbg.visible=!1)},t.prototype.updateValue=function(e,i,o){var s=this;switch(i){case RankDataType.DATA_VIP:o>0?(s.lv.vipLab.text=GlobalConfig.jifengTiaoyueLg.st100092+o,s.lv.vipLab.visible=!0,s.lv.vipbg.visible=!0):this.SetDefualtPos();break;case RankDataType.DATA_MONTH:break;case RankDataType.DATA_LEVEL:o=(s.data[RankDataType.DATA_ZHUAN]?s.data[RankDataType.DATA_ZHUAN]+GlobalConfig.jifengTiaoyueLg.st100067:"")+o+GlobalConfig.jifengTiaoyueLg.st100093;break;case RankDataType.DATA_POS:s.lv.pos.text=o;break;case RankDataType.DATA_VIP:s.lv.vipLab.text=o}e instanceof eui.Label?("number"==typeof o&&(o=CommonUtils.overLength(o)),e.text=i in t.dataFormat?t.dataFormat[i].replace("{value}",o):o):e instanceof eui.Image&&(e.source=i in t.dataFormat?t.dataFormat[i].replace("{value}",o):o)},t}(eui.ItemRenderer);__reflect(RankItemRenderer.prototype,"RankItemRenderer"),window.RankItemRenderer=RankItemRenderer;var RankTabItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="BtnTab3Skin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this)},t}(eui.ItemRenderer);__reflect(RankTabItemRenderer.prototype,"RankTabItemRenderer"),window.RankTabItemRenderer=RankTabItemRenderer;var ChargeFirstWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100227,t}return __extends(t,e),t.prototype.UpdateContent=function(){},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ChargeSkin",this.list.itemRenderer=ChargeItemRenderer,this.scrollBar.viewport=this.list;var t=StartGetUserInfo.isUsa?GlobalConfig.ins("PayItemsUsaConfig"):GlobalConfig.ins("PayItemsConfig"),i=[],o=UserVip.ins().lv||0,s=!1,n=!0;for(var r in t){var a=t[r];n&&a.cash>=1e4||1!=a.cash&&o>=a.vipLv&&(i.push(a),a.vipLv>0&&(s=!0))}i.sort(function(e,t){return e.amount-t.amount}),this.list.dataProvider=new eui.ArrayCollection(i)},t.prototype.open=function(t,i){e.prototype.open.call(this),this.lastWin=t,this.lastTab=i,this.commonWindowBg.OnAdded(this)},t.prototype.close=function(){e.prototype.close.call(this),this.commonWindowBg.OnRemoved(),this.lastWin&&ViewManager.ins().open(this.lastWin,this.lastTab)},t}(BaseEuiPanel);__reflect(ChargeFirstWin.prototype,"ChargeFirstWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(ChargeFirstWin,LayerManager.UI_Main),window.ChargeFirstWin=ChargeFirstWin;var ChargeItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="ChargeItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.payBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.payBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this),MessageCenter.addListener(Recharge.ins().postUpDataItem,this.refushInfo,this),this.refushInfo()},t.prototype.refushInfo=function(){var e=Recharge.ins().getOrderByIndex(this.data.id),t=(Recharge.ins().ToDayRechargeState(),this.data.award);if(0==e?(this.firstPay.visible=!0,this.m_Lab.visible=!0,this.m_Lab.text=GlobalConfig.jifengTiaoyueLg.st101955,this.firstPriceImg.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101921,[this.data.award]),t+=this.data.amount):(this.m_Lab.visible=!1,this.firstPay.visible=!1,this.firstPriceImg.text=""),this.num.text=t+GlobalConfig.jifengTiaoyueLg.st100050,this.desc.text=this.data.desc,this.num2.text=this.data.cash+GlobalConfig.jifengTiaoyueLg.st101922,this.yuanbaoImg.source=this.data.icon,1==this.data.isFanli){var i=this.data.exYuanBao/this.data.award+1;this.firstPay.visible=!0,this.m_Lab.visible=!0,this.m_Lab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101954,[i]),this.firstPriceImg.text=this.data.exDesc,this.num.text=this.data.award+this.data.exYuanBao+GlobalConfig.jifengTiaoyueLg.st100050}},t.prototype.onTap=function(e){var e=this.data;Recharge.ins().TestReCharge(e.id)},t}(eui.ItemRenderer);__reflect(ChargeItemRenderer.prototype,"ChargeItemRenderer"),window.ChargeItemRenderer=ChargeItemRenderer;var Recharge=function(e){function t(){var t=e.call(this)||this;return t.rechargeData=[],t.costList=0,t.flag=0,t.zunCard=!1,t._monthDay=0,t.m_MonthReward=RewardState.NotReached,t.rechargeData=[new RechargeData,new RechargeData],t.firstRechargeData=new FirstRechargeData,t.sysId=PackageID.Recharge,t.regNetMsg(S2cProtocol.sc_recharge_get_data,t.doRechargeData),t.regNetMsg(S2cProtocol.sc_recharge_change_data,t.doChangeRechargeData),t.regNetMsg(S2cProtocol.sc_recharge_item_data,t.postUpDataItem),t.regNetMsg(S2cProtocol.sc_recharge_get_month_day,t.doGetMonthDay),t.regNetMsg(S2cProtocol.sc_recharge_month_reward,t.getgifDagData),t.regNetMsg(S2cProtocol.sc_recharge_first_status,t.getFirstRechangeData),t}return __extends(t,e),t.prototype.IsZunCard=function(){return this.zunCard},t.prototype.IsMonthCard=function(){return this._monthDay>0},t.prototype.GetMonthReward=function(){return this.m_MonthReward},t.ins=function(){return e.ins.call(this)},t.IsShowDayRecharge=function(){var e=t.ins().GetConfig(),i=GameGlobal.rechargeData[0];for(var o in e)if(!BitUtil.Has(i.isAwards,e[o].index))return!0;return!1},t.prototype.getgifDagData=function(e){this.m_MonthReward=e.status,GameGlobal.MessageCenter.dispatch(MessageDef.RECHARGE_UPDATE_MONTH_REWARD)},t.prototype.HasMonthCardReward=function(){return this.m_MonthReward==RewardState.CanGet},t.prototype.sendgetgifData=function(){this.Rpc(C2sProtocol.cs_recharge_month_reward)},t.prototype.getFirstRechangeData=function(e){this.firstRechargeData.change(e),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_FIRSTRECHARGE);var t=PlayFun.ins();e.firstOpenStatus?(t.isCheckTimering||t.autoTimeer(),t.isCheckAnimTimering||t.autoAnimTimeer()):t.removeAutoTimer()},t.prototype.getRechargeData=function(e){return void 0===e&&(e=-1),-1==e?this.rechargeData:this.rechargeData[e]},t.prototype.sendGetAwards=function(e,t){var i=new Sproto.cs_recharge_get_awards_request;i.type=e,i.id=t,this.Rpc(C2sProtocol.cs_recharge_get_awards,i)},t.prototype.doRechargeData=function(e){this.recharge(e.data,e.data.type)},t.prototype.doChangeRechargeData=function(e){var i=this.getRechargeData(e.data.type);i&&(i.change(e.data),t.doUpdateRecharge(e.data.type))},t.doUpdateRecharge=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_RECHARGE,e)},t.prototype.recharge=function(e,i){this.rechargeData[i]||(this.rechargeData[i]=new RechargeData),this.rechargeData[i].parser(e,i),t.doUpdateRecharge(i)},t.prototype.postUpDataItem=function(e){this.costList=e.costList},t.prototype.doGetMonthDay=function(e){1==e.type?(this.monthDay=e.monthDay,this.flag=e.flag):this.zunCard=e.monthDay>0,GameGlobal.MessageCenter.dispatch(MessageDef.RECHARGE_UPDATE_MONTH_DAY)},t.prototype.getFirstRechangCfg=function(){null==this.chongZhi1Config&&(this.chongZhi1Config=GlobalConfig.ins("ChongZhi1Config"));this.firstRechargeData;return GameServer.serverMergeTime>0?this.chongZhi1Config[99]:this.chongZhi1Config[0]},t.prototype.GetConfig=function(){null==this.chongZhi1Config&&(this.chongZhi1Config=GlobalConfig.ins("ChongZhi1Config"));var e=this.rechargeData[0];return e.day/14>1?this.chongZhi1Config[2][(e.day-1)%7]:this.chongZhi1Config[1][(e.day-1)%14]},t.prototype.GetConfig2=function(){null==this.chongZhi2Config&&(this.chongZhi2Config=GlobalConfig.ins("ChongZhi2Config"));var e=this.rechargeData[1],t=this.getChongZhi2ConfigDay();return e.day>7?this.chongZhi2Config[2][(e.day-1)%t]:this.chongZhi2Config[1][(e.day-1)%t]},t.prototype.getChongZhi2ConfigDay=function(){null==this.chongZhi2Config&&(this.chongZhi2Config=GlobalConfig.ins("ChongZhi2Config"));
var e=0;for(var t in this.chongZhi2Config[1])e++;return e},t.prototype.ToDayRechargeState=function(){var e=this.rechargeData[0];return e?e.isFirst?0:2:0},t.prototype.getFirstRechargeState=function(){var e=this.firstRechargeData;return e?1==e.statau:!0},t.prototype.getOrderByIndex=function(e){void 0===e&&(e=0);var t=this.costList>>e&1;return t},Object.defineProperty(t.prototype,"monthDay",{get:function(){return this._monthDay},set:function(e){null!=e&&this._monthDay!=e&&(this._monthDay=e,TimerManager.ins().remove(this.downTime,this),TimerManager.ins().doTimer(1e3,this._monthDay,this.downTime,this),GameGlobal.MessageCenter.dispatch(MessageDef.RECHARGE_UPDATE_MONTH_DAY))},enumerable:!0,configurable:!0}),t.prototype.downTime=function(){this._monthDay-=1},t.prototype.getAddBagGrid=function(){return(this.zunCard?100:0)+(1==this.flag?100:0)},t.GetBaseInfo=function(){var e=new SdkParam;return e.uid=StartGetUserInfo.uid,e.userRoleId=GameGlobal.actorModel.actorID+"",e.userRoleName=GameGlobal.actorModel.name+"",e.serverid=StartGetUserInfo.mServerData.id+"",e.userLevel=1e3*GameGlobal.zsModel.lv+GameGlobal.actorModel.level+"",e.count=1,e.quantifier="个",e.callbackUrl="http://119.23.231.59:8521",e.extraInfo=StartGetUserInfo.mServerData.id,e},t.GetYbOrderInfo=function(e,i){void 0===i&&(i=!1);var o=i?GlobalConfig.ins("FirstPayConfig"):GlobalConfig.ins("PayItemsConfig");LocationProperty.urlParam.iosiddd&&(o=GlobalConfig.ins("PayItemsConfig"),console.log("购买读取配置PayItemsConfig"));var s=null;for(var n in o)if(o[n].id==e){s=o[n];break}if(!s)return void console.log("not found pay id",e);var r=t.GetBaseInfo();return r.cpOrderNo="ybOrderNo00000"+e,r.amount=s.cash+"",r.subject=s.itemName+"",r.desc=s.itemName+"",r.goodsId=this.GetGoodsId(RechargeGoodsType.YUAN_BAO,e),r.extraInfo+=","+this.GetGoodsId(RechargeGoodsType.YUAN_BAO,e),r},t.GetGoodsId=function(e,t){switch(e){case RechargeGoodsType.YUAN_BAO:return t;case RechargeGoodsType.MONTY_CARD:return 1e4+t;case RechargeGoodsType.INVEST:return 2e4+t;case RechargeGoodsType.ZZ_RMB:return 3e4+t}return t},t.prototype.TestMonth=function(e){if(ActorModel.IsGM()){var i=new Sproto.cs_recharge_test_month_request;return i.index=e,void this.Rpc(C2sProtocol.cs_recharge_test_month,i)}var o=t.GetBaseInfo();o.cpOrderNo="mOrderNo00000"+e;var s,n,r=GlobalConfig.ins("ChongZhiBaseConfig").yuanBaoScale;switch(e){case 1:s=Math.floor(Number(GlobalConfig.ins("MonthCardConfig").money)/r),n=GlobalConfig.jifengTiaoyueLg.st101925;break;case 2:s=Math.floor(Number(GlobalConfig.ins("MonthCardConfig").moneyEx)/r),n=GlobalConfig.jifengTiaoyueLg.st101926}o.amount=s+"",o.subject=n+"",o.desc=n,o.goodsId=t.GetGoodsId(RechargeGoodsType.MONTY_CARD,e),o.extraInfo+=","+t.GetGoodsId(RechargeGoodsType.MONTY_CARD,e),SdkMgr.pay(o)},t.commonCharge=function(e,i,o){var s=t.GetBaseInfo();s.amount=e+"",s.subject=i+"",s.goodsId=o,SdkMgr.pay(s)},t.prototype.TestReCharge=function(e,i){if(void 0===i&&(i=!1),ActorModel.IsGM()){var o=new Sproto.cs_recharge_test_request;return o.rechargeId=e,void this.Rpc(C2sProtocol.cs_recharge_test,o)}var s=t.GetYbOrderInfo(e,i);SdkMgr.pay(s)},t.prototype.TestDayOne=function(e){if(null!=e&&!ActorModel.IsGM()){var i=t.GetBaseInfo();i.cpOrderNo="mDayOne00000"+e.index;var o=Math.floor(Number(e.price)),s=e.orderName||GlobalConfig.jifengTiaoyueLg.st101927;i.amount=o+"",i.subject=s+"",i.desc=s+e.price+"";var n=e.goodsID;i.goodsId=n,i.extraInfo+=","+n,SdkMgr.pay(i)}},t.prototype.TestOmGifBag=function(e){if(null!=e&&!ActorModel.IsGM()){var i=t.GetBaseInfo();i.cpOrderNo="mDayOne00000"+e.Id;var o=Math.floor(Number(e.price)),s=e.orderName||GlobalConfig.jifengTiaoyueLg.st101999;i.amount=o+"",i.subject=s+"",i.desc=s+e.price+"";var n=e.goodsID;i.goodsId=n,i.extraInfo+=","+n,SdkMgr.pay(i)}},t.prototype.commonTopUp=function(e,i,o,s){if(void 0===s&&(s=null),!ActorModel.IsGM()){var n=t.GetBaseInfo();n.cpOrderNo="mDayOne00000"+e;var r=Math.floor(Number(i)),a=s||GlobalConfig.jifengTiaoyueLg.st101999;n.amount=r+"",n.subject=a+"",n.desc=a+i+"",n.goodsId=o,n.extraInfo+=","+o,SdkMgr.pay(n)}},t.prototype.TestInvest=function(e,i){null==this.ActivityType8Config&&(this.ActivityType8Config=GlobalConfig.ins("ActivityType8Config"));var o=this.ActivityType8Config[e],s=null;for(var n in o)if(o[n].index==i){s=o[n];break}if(!s)return void alert("套餐序号错误 actId = "+e+"; id ="+i);if(ActorModel.IsGM())return void GameLogic.SendGM("recharge "+t.GetGoodsId(RechargeGoodsType.INVEST,100*e+i));var r=t.GetBaseInfo();r.cpOrderNo="mInvestNo00000"+i;var a=GlobalConfig.ins("ChongZhiBaseConfig").yuanBaoScale,l=Math.floor(Number(s.price)/a),h=s.orderName||GlobalConfig.jifengTiaoyueLg.st101078;r.amount=l+"",r.subject=h+"",r.desc=h+"";var c=t.GetGoodsId(RechargeGoodsType.INVEST,100*e+i);r.goodsId=c,r.extraInfo+=","+c,SdkMgr.pay(r)},t}(BaseSystem);__reflect(Recharge.prototype,"Recharge");var RechargeData=function(){function e(){this.day=1,this.isFirst=1,this.num=0,this.isAwards=0}return e.prototype.parser=function(e,t){this.day=e.day,0==t&&(this.isFirst=e.isFirst),this.num=e.num,this.isAwards=e.isAwards},e.prototype.change=function(e){this.day=e.day,this.num=e.num,this.isAwards=e.isAwards,this.isFirst=e.isFirst},e}();__reflect(RechargeData.prototype,"RechargeData");var RechargeGoodsType;!function(e){e[e.YUAN_BAO=0]="YUAN_BAO",e[e.MONTY_CARD=1]="MONTY_CARD",e[e.INVEST=2]="INVEST",e[e.ZZ_RMB=3]="ZZ_RMB",e[e.ACTIVITY_52_TYPE=4]="ACTIVITY_52_TYPE",e[e.ACTIVITY_53_TYPE=4]="ACTIVITY_53_TYPE"}(RechargeGoodsType||(RechargeGoodsType={}));var FirstRechargeData=function(){function e(){this.statau=!0,this.awards=0,this.day=0}return e.prototype.change=function(e){this.statau=e.firstOpenStatus,this.awards=e.firstRewardStatus,this.day=e.day},e}();__reflect(FirstRechargeData.prototype,"FirstRechargeData");var AwardStatus;!function(e){e[e.None=-1]="None",e[e.unfinish=0]="unfinish",e[e.awaitrReceive=1]="awaitrReceive",e[e.finish=2]="finish"}(AwardStatus||(AwardStatus={})),MessageCenter.compile(Recharge),window.Recharge=Recharge,window.RechargeData=RechargeData,window.FirstRechargeData=FirstRechargeData;var Recharge1GetWin=function(e){function t(){var t=e.call(this)||this;return t.tabBar=null,t._index=0,t._day=0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this);for(var t,i,o,s=GlobalConfig.ins("FirstPayConfig"),n=GameServer.serverMergeTime>0?[40001,40002,40003,40004]:[30001,30002,30003,30004],r=this.group0.numChildren,a=0;r>a;a++)i=s[n[a]],o=this.group.getChildAt(a),o.label=GlobalConfig.jifengTiaoyueLg.st101923+i.cash,t=this.group0.getChildAt(a),t.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101924,[10*i.cash,40*i.cash])},t.prototype.getConfig=function(e){return null==this.chongZhi1Config&&(this.chongZhi1Config=GlobalConfig.ins("ChongZhi1Config")),GameServer.serverMergeTime>0?this.chongZhi1Config[99][0][0]:this.chongZhi1Config[0][0][0]},t.prototype.setSkinName=function(){this.skinName="DailyRechargeSkin"},t.prototype.loaderEffect=function(){var e=new MovieClip;e.loadUrl(ResDataPath.GetUIEffePath("eff_firstCharge_weapon_02"),!0,-1),e.scaleX=e.scaleY=.8,this.effGroup.addChild(e)},t.prototype.open=function(){e.prototype.open.call(this);for(var t=0;t<this.group.numChildren;++t)this.group.getChildAt(t).addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this);this.setWinData(),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_FIRSTRECHARGE,this.setWinData,this),this.AddClick(this.m_Lan1,this.onClickVip),this.AddClick(this.m_Lan0,this.onClickVip),this.playEff()},t.prototype.onClickVip=function(e){switch(e.currentTarget){case this.m_Lan0:ViewManager.ins().open(VipWin,7);break;case this.m_Lan1:ViewManager.ins().open(VipWin,10)}},t.prototype.setWinData=function(){var e=(this.GetRewardData(),this.getRemindByIndex(this.GetRewardIndex()),this.GetRewardIndex()+1,this.getConfig(this.GetRewardIndex()));if(e){var t=[];if(e.awardList.length>=6)for(var i=0;6>i;i++)t.push(e.awardList[i]);else t=e.awardList;this.list.dataProvider=new eui.ArrayCollection(t);var o=GameGlobal.firstRechargeData;o&&(this.awardsBtn.label=o.statau?GlobalConfig.jifengTiaoyueLg.st100004:GlobalConfig.jifengTiaoyueLg.st100981,this.awardsBtn.enabled=o.statau,this._SetGoBtnState(o.awards==AwardStatus.unfinish),this.awardsBtn.visible=o.awards!=AwardStatus.unfinish,this.setEff(this.GetRewardIndex()))}},t.prototype.close=function(){e.prototype.close.call(this);for(var t=0;t<this.group.numChildren;++t)this.group.getChildAt(t).removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this);GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_FIRSTRECHARGE,this.setWinData,this),DisplayUtils.dispose(this.m_Eff),this.m_Eff=null},t.prototype._OnClick=function(e){var t=this.group.getChildIndex(e.target);if(-1!=t){var i=GameServer.serverMergeTime>0?40001:30001;Recharge.ins().TestReCharge(t+i,!0)}},t.prototype._getReaward=function(){},t.prototype.onTouch=function(e){switch(e.currentTarget){case this.awardsBtn:for(var t=0,i=this.getConfig(t),o=0,s=0;s<i.awardList.length;s++)1==i.awardList[s].type&&i.awardList[s].id<2e5&&o++;if(o>UserBag.ins().getSurplusCount())return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100051);Recharge.ins().sendGetAwards(2,t);break;case this.returnBtn:ViewManager.ins().close(this)}},t.prototype._SetGoBtnState=function(e){this.group.visible=e,this.group0.visible=e,this.tj_img.visible=e,this.m_Lan1.visible=e,this.m_Lan0.visible=e},t.prototype.playEff=function(){if(GameServer.serverMergeTime>0){this.m_TitleImg.source="comp_hfsc_png";var e=GlobalConfig.ins("UniversalConfig").showRes;this.m_Eff=ViewManager.ins().createEff(this.m_Eff,this.m_PetAnimGroup,e,-1,ResAnimType.TYPE1)}else{this.m_TitleImg.source="comp_schl_png";var t=GlobalConfig.ins("UniversalConfig").showResHf;this.m_Eff=ViewManager.ins().createEff(this.m_Eff,this.m_PetAnimGroup,t,-1,ResAnimType.TYPE1)}},t}(RechargeBaseWin);__reflect(Recharge1GetWin.prototype,"Recharge1GetWin"),ViewManager.ins().reg(Recharge1GetWin,LayerManager.UI_Popup),window.Recharge1GetWin=Recharge1GetWin;var Recharge1Win=function(e){function t(){var t=e.call(this)||this;return t.commonWindowBg=null,t.tabBar=null,t.chargeBtn=null,t.awardsBtn=null,t.chargeNum=null,t.rewardList=null,t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100049,t.reimg=["100","500","1000"],t}return __extends(t,e),t.prototype.UpdateContent=function(){},t.prototype.initUI=function(){this.skinName="FirstChargeSkin",this.rewardList.itemRenderer=ItemBase,this.awardsBtn.label=GlobalConfig.jifengTiaoyueLg.st100004,this.chargeBtn.label=GlobalConfig.jifengTiaoyueLg.st100052},t.prototype.open=function(){for(var e=0;3>e;e++){var t=this.getConfig(e);t&&(this.reimg[e]=t.pay)}this.tabBar.validateNow();for(var i=this.tabBar.numChildren,e=0;i>e;e++){var o=this.tabBar.getChildAt(e);o&&(o.data.label=this.reimg[e]+GlobalConfig.jifengTiaoyueLg.st100050)}this.commonWindowBg.OnAdded(this),this.chargeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.awardsBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.tabBar.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabTouch,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_RECHARGE,this.setWinData,this);var s;this._data=GameGlobal.rechargeData[0];for(var n=0;2>n;n++)if(s=this._data.num>=this.getConfig(0).pay&&!this.getRemindByIndex(0))return this.tabBar.selectedIndex=this._index=n,void this.setWinData();this.tabBar.selectedIndex=this._index=1,this.setWinData()},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),this.chargeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.awardsBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.tabBar.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabTouch,this),GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_RECHARGE,this.setWinData,this)},t.prototype.closeCB=function(e){ViewManager.ins().close(this)},t.prototype.onTouch=function(e){switch(e.currentTarget){case this.chargeBtn:ViewManager.ins().open(ChargeFirstWin);break;case this.awardsBtn:for(var t=this.getConfig(this._index),i=0,o=0;o<t.awardList.length;o++)1==t.awardList[o].type&&t.awardList[o].id<2e5&&i++;if(i>UserBag.ins().getSurplusCount())return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100051);Recharge.ins().sendGetAwards(0,this._index)}},t.prototype.onTabTouch=function(e){e.currentTarget.selectedIndex!=this._index&&(this._index=e.currentTarget.selectedIndex,this.setWinData())},t.prototype.setEff=function(e){this.rewardList.validateNow();for(var t=0;t<this.rewardList.numChildren;++t){var i=this.rewardList.getChildAt(t);i&&i.showItemEffect()}},t.prototype.setWinData=function(){this.chargeNum.text=this.reimg[this._index],this._data=GameGlobal.rechargeData[0];var e=this.getRemindByIndex(this._index),t=(this._index+1,this.getConfig(this._index));if(t){GameGlobal.rolesModel[0].job;this.rewardList.dataProvider=new eui.ArrayCollection(t.awardList),this.chargeBtn.visible=this._data.num<t.pay,this.awardsBtn.visible=this._data.num>=t.pay&&!e,UIHelper.SetBtnNormalEffe(this.awardsBtn,this.awardsBtn.visible),this.setEff(this._index),this.redPoint()}},t.prototype.getConfig=function(e){return Recharge.ins().GetConfig()[e]},t.prototype.getRemindByIndex=function(e){return BitUtil.Has(GameGlobal.rechargeData[0].isAwards,e)},t.prototype.redPoint=function(){for(var e=0;e<this.tabBar.numChildren;++e){var t=this.tabBar.getChildAt(e),i=this.getConfig(e),o=i?i.pay:9999999;UIHelper.ShowRedPoint(t,this._data.num>=o&&!this.getRemindByIndex(e))}},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(Recharge1Win.prototype,"Recharge1Win",["ICommonWindow","ICommonWindowTitle"]),window.Recharge1Win=Recharge1Win;var Recharge3Win=function(e){function t(){var t=e.call(this)||this;return t.activityID=20,t.initUI(),t}return __extends(t,e),t.prototype.initUI=function(){this.skinName="TotalChargeActSkin",this.name=GlobalConfig.jifengTiaoyueLg.st101298,this.listTop.itemRenderer=TotalChargeActItem,this.recharge.label=GlobalConfig.jifengTiaoyueLg.st100227},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.setWinData(),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_RECHARGE,this.setWinData,this),this.recharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabTouch,this)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.MessageCenter.removeListener(MessageDef.UPDATE_RECHARGE,this.setWinData,this),this.recharge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabTouch,this)},t.prototype.onTabTouch=function(e){switch(e.currentTarget){case this.recharge:ViewManager.ins().open(ChargeFirstWin)}},t.prototype.setWinData=function(){this._data=GameGlobal.rechargeData[1],this.desc.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101299,[this._data.num]);var e=Recharge.ins().GetConfig2(),t=[];for(var i in e)t.push(e[i]),e[i].statu=BitUtil.Has(this._data.isAwards,e[i].index)?1:0;t=t.sort(this.sort),this.listTop.dataProvider=new eui.ArrayCollection(t)},t.prototype.sort=function(e,t){var i=e.pay,o=t.pay;return 0==e.statu&&1==t.statu?-1:1==e.statu&&0==t.statu?1:i>o?1:o>i?-1:0},t.prototype.updateData=function(){},t}(eui.Component);__reflect(Recharge3Win.prototype,"Recharge3Win"),window.Recharge3Win=Recharge3Win;var SdkParam=function(){function e(){}return e}();__reflect(SdkParam.prototype,"SdkParam"),window.SdkParam=SdkParam;var SCAnim=function(e){function t(){var t=e.call(this)||this;return t.skinName="SCAnimSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.release=function(){DisplayUtils.removeFromParent(this),DisplayUtils.dispose(this.m_Eff),this.m_Eff=null},t.prototype.setData=function(){this.visible=!0;var e=ViewManager.ins().getView(PlayFunView);e.addChild(this),this.initAnim(),this.addTime()},t.prototype.addTime=function(){this.removTime();var e=0,t=GlobalConfig.ins("ChongZhiAdvertisementConfig");e=GameServer.serverMergeTime>0?t[2].lasttime:t[1].lasttime,TimerManager.ins().doTimer(1e3*e,1,this.release,this)},t.prototype.removTime=function(){TimerManager.ins().remove(this.release,this)},t.prototype.initAnim=function(){if(GameServer.serverMergeTime>0){var e=GlobalConfig.ins("UniversalConfig").hfpetID,t=GlobalConfig.ins("PetConfig")[e],i=t.avatar+"_3"+EntityAction.STAND;this.m_Eff=ViewManager.ins().createEff(this.m_Eff,this.m_AnimGroup,i,-1,ResAnimType.TYPE2)}else{var e=GlobalConfig.ins("UniversalConfig").petID,t=GlobalConfig.ins("PetConfig")[e],o=t.avatar+"_3"+EntityAction.STAND;this.m_Eff=ViewManager.ins().createEff(this.m_Eff,this.m_AnimGroup,o,-1,ResAnimType.TYPE2)}},t.prototype.onClick=function(){if(this.release(),GameGlobal.firstRechargeData){if(GameGlobal.firstRechargeData.statau)return WxSdk.ins().isHidePay()||ViewManager.ins().open(Recharge1GetWin),!0;if(Recharge.IsShowDayRecharge())return ViewManager.ins().open(Recharge1Win),!0}},t}(eui.Component);__reflect(SCAnim.prototype,"SCAnim"),window.SCAnim=SCAnim;var TotalChargeActItem=function(e){function t(){var t=e.call(this)||this;return t.list.itemRenderer=ItemBase,t.price.type=MoneyConst.yuanbao,t.price.visible=!0,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.labelGo.text=GlobalConfig.jifengTiaoyueLg.st101077,this.labelUndo.text=GlobalConfig.jifengTiaoyueLg.st100680,this.btnGet.label=GlobalConfig.jifengTiaoyueLg.st101076},t.prototype.getRemindByIndex=function(e){return 1==(GameGlobal.rechargeData[1].isAwards>>e&1)},t.prototype.OnGetAward=function(e){Recharge.ins().sendGetAwards(1,this._index)},t.prototype.dataChanged=function(){var e=this.data,t=GameGlobal.rechargeData[1].num;this.m_Award=e.awardList,this._index=e.index,this.price.price=e.pay,this.list.dataProvider=new eui.ArrayCollection(e.awardList),this.list.validateNow();for(var i=0;i<this.list.numChildren;++i)this.list.getChildAt(i).showItemEffect();var o=this.getRemindByIndex(this._index);t>=e.pay?o?this.currentState="2":this.currentState="1":this.currentState="0"},t}(RechargeGiftPanelItem);__reflect(TotalChargeActItem.prototype,"TotalChargeActItem"),window.TotalChargeActItem=TotalChargeActItem;var RenameWin=function(e){function t(){var t=e.call(this)||this;return t.onTap=function(e){switch(e.currentTarget){case this.sureBtn:var t=this.input.text.trim();if(null==t||""==t)return void alert(GlobalConfig.jifengTiaoyueLg.st101929);if(StringUtils.isSpecialCharacter(t))return void alert(GlobalConfig.jifengTiaoyueLg.st101930);if(StringUtils.isEmojiCharacter(t))return void alert(GlobalConfig.jifengTiaoyueLg.st101931);0==this.input.text.length?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101932):null!=UserBag.ins().getBagItemById(ItemConst.RENAME)&&GameLogic.ins().sendRename(this.input.text)}},t.skinName="NameChangeSkin",t}return __extends(t,e),t.prototype.open=function(){this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.m_bg.init("RenameWin",GlobalConfig.jifengTiaoyueLg.st101108)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.input.text=""},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(RenameWin.prototype,"RenameWin"),ViewManager.ins().reg(RenameWin,LayerManager.UI_Popup),window.RenameWin=RenameWin;var ReportData=function(){function e(){this.httpRequest=new egret.HttpRequest}return e.getIns=function(){return this._ins=this._ins||new e,this._ins},e.prototype.report=function(e){var t=parseInt(LocationProperty.roleCount)},e.prototype.advice=function(e,t,i){},e.prototype.reportUrl=function(e,t){},e.prototype.reportSDK=function(e){},e}();__reflect(ReportData.prototype,"ReportData"),window.ReportData=ReportData;var ActorModel=function(){function e(){this._power=0,this.handle=0,this.actorID=0,this.soul=0,this._guildID=0,this._guildName="",this._name="",this._level=0,this._exp=0,this._gold=0,this._yb=0,this._redName=0,this._feats=0,this._prestige=0,this._prestige_level=0,this._coupon=0,this.honor=0,this._zhenqi=0,this._sharecoin=0,this._petCredit=0,this._rideCredit=0,this._crossCredit=0,this._artifactCredit=0,this.mFuncOpen=0,this.mSaveData=0,this.maxCoupon=0}return e.IsGM=function(){return Main.isDebug?!0:100==StartGetUserInfo.gmLevel},Object.defineProperty(e.prototype,"vipLv",{get:function(){return UserVip.ins().lv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zsLv",{get:function(){return UserZs.ins().lv},enumerable:!0,configurable:!0}),e.prototype.parser=function(e){this.handle=e.handle,this.actorID=e.actorid,this._name=e.actorname,this._level=e.level,this._exp=e.exp,this._power=e.power,this._gold=e.gold,this._yb=e.yuanbao,this._redName=e.redName,this.coupon=e.ticket,this.maxCoupon=e.ticketTotal,UserVip.ins().lv=e.vip,this.soul=e.soul,null==this.bagBaseConfig&&(this.bagBaseConfig=GlobalConfig.ins("BagBaseConfig"));var t=this.bagBaseConfig;UserBag.ins().bagNum=e.bagnum*t.rowSize+t.baseSize,this._feats=e.feats,this._prestige=e.prestige,this._prestige_level=e.prestige_level,this.mFuncOpen=e.gongnengYugao,this.mSaveData=e.clientvalue,this.honor=e.crossTiantiGlory,this._zhenqi=e.zhenqi,e.sharecoin&&(this._sharecoin=e.sharecoin)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name!=e&&(this._name=e,GameLogic.ins().postNameChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gold",{get:function(){return this._gold},set:function(e){if(this._gold!=e){var t=e-this._gold;if(t>0){var i="";i="|C:"+Color.OrangeTips+"&T:"+GlobalConfig.jifengTiaoyueLg.st100018+"  +"+t+"|",UserTips.ins().showTips(i)}this._gold=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yb",{get:function(){return this._yb},set:function(e){if(this._yb!=e){var t=e-this._yb;if(t>0){var i="";i="|C:0xffb02d&T:"+GlobalConfig.jifengTiaoyueLg.st100050+"  +"+t+"|",UserTips.ins().showTips(i)}this._yb=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coupon",{get:function(){return this._coupon},set:function(e){if(this._coupon!=e){var t=e-this._coupon;if(t>0){var i="";i="|C:0xffb02d&T:"+GlobalConfig.jifengTiaoyueLg.st102102+"  +"+t+"|",UserTips.ins().showTips(i)}this._coupon=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sharecoin",{get:function(){return this._sharecoin},set:function(e){if(this._sharecoin!=e){var t=e-this._sharecoin;if(t>0){var i="";i="|C:0xffb02d&T:"+GlobalConfig.jifengTiaoyueLg.st101933+"  +"+t+"|",UserTips.ins().showTips(i)}this._sharecoin=e,GameGlobal.MessageCenter.dispatch(ShareEvt.WX_SHARECOIN)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zhenqi",{get:function(){return this._zhenqi},set:function(e){if(this._zhenqi!=e){var t=e-this._zhenqi;if(t>0){var i="";i="|C:0xffb02d&T:"+GlobalConfig.jifengTiaoyueLg.st101934+"  +"+t+"|",UserTips.ins().showTips(i)}this._zhenqi=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redName",{get:function(){return this._redName},set:function(e){if(this._redName!=e){var t=e-this._redName;if(-1!=t){var i="";i=t>0?"|C:0xffb02d&T:"+GlobalConfig.jifengTiaoyueLg.st101935+"  "+t+"|":"|C:0xffb02d&T:"+GlobalConfig.jifengTiaoyueLg.st101935+"  "+t+"|",UserTips.ins().showTips(i)}this._redName=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){if(this._level!=e){this._level=e,ActivityModel.SendLevelInfo(),MessageCenter.ins().dispatch(MessageDef.LEVEL_CHANGE),GameLogic.ins().postLevelChange();var t=SoundSetPanel.getSoundLocalData("btnSoundEff");t&&SoundUtils.getInstance().playSound(GlobalConfig.soundConfig[5].id)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this._exp},set:function(e){this._exp!=e&&(this._exp=e),e&&MessageCenter.ins().dispatch(MessageDef.EXP_CHANGE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){return this._power},set:function(e){this._power!=e&&(this._power<e&&this._power>0&&MessageCenter.ins().dispatch(MessageDef.POWER_BOOST,e,this._power),this._power=e),null!=e&&MessageCenter.ins().dispatch(MessageDef.POWER_CHANGE)},enumerable:!0,configurable:!0}),e.prototype.setGuild=function(e,t){this._guildID!=e&&(this._guildID=e,this._guildName=t,0!=this._guildID&&ViewManager.ins().isShow(GuildApplyWin)&&(ViewManager.ins().isShow(GuildCreateWin)&&ViewManager.ins().close(GuildCreateWin),ViewManager.ins().close(GuildApplyWin),ViewManager.ins().open(GuildMap)))},Object.defineProperty(e.prototype,"guildID",{get:function(){return this._guildID},enumerable:!0,configurable:!0}),e.prototype.HasGuild=function(){return 0!=this._guildID},Object.defineProperty(e.prototype,"guildName",{get:function(){return this._guildName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"feats",{get:function(){return this._feats},set:function(e){if(this._feats!=e){var t=e-this._feats;t>0&&UserTips.ins().showTips("|C:0xffb02d&T:"+GlobalConfig.jifengTiaoyueLg.st100077+"  +"+t+"|"),this._feats=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prestige",{get:function(){return this._prestige},set:function(e){if(this._prestige!=e){var t=e-this._prestige;t>0&&UserTips.ins().showTips("|C:0xffb02d&T:"+GlobalConfig.jifengTiaoyueLg.st101246+"  +"+t+"|"),this._prestige=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prestige_level",{get:function(){return this._prestige_level},set:function(e){this._prestige_level=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"petCredit",{get:function(){return this._petCredit},set:function(e){if(this._petCredit!=e){var t=e-this._petCredit;t>0&&UserTips.ins().showTips("|C:0xffb02d&T:"+GlobalConfig.jifengTiaoyueLg.st101936+"  +"+t+"|"),this._petCredit=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rideCredit",{get:function(){return this._rideCredit},set:function(e){if(this._rideCredit!=e){var t=e-this._rideCredit;t>0&&UserTips.ins().showTips("|C:0xffb02d&T:"+GlobalConfig.jifengTiaoyueLg.st101937+"  +"+t+"|"),this._rideCredit=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"crossCredit",{get:function(){return this._crossCredit},set:function(e){if(this._crossCredit!=e){var t=e-this._crossCredit;t>0&&UserTips.ins().showTips("|C:0xffb02d&T:"+GlobalConfig.jifengTiaoyueLg.st101938+"  +"+t+"|"),this._crossCredit=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"artifactCredit",{get:function(){return this._artifactCredit},set:function(e){if(this._artifactCredit!=e){var t=e-this._artifactCredit;t>0&&UserTips.ins().showTips("|C:0xffb02d&T:"+GlobalConfig.jifengTiaoyueLg.st101939+"  +"+t+"|"),this._artifactCredit=e}},enumerable:!0,configurable:!0}),e}();__reflect(ActorModel.prototype,"ActorModel"),window.ActorModel=ActorModel;var UserEquip=function(e){function t(){var t=e.call(this)||this;return t.timeID=0,t.canEquipHandler=[],t.sysId=PackageID.Equip,t.regNetMsg(S2cProtocol.sc_equip_update_data,t.doUpDataEquip),t.regNetMsg(S2cProtocol.sc_equip_deal_smelt_result,t.doSmeltREquip),t.regNetMsg(S2cProtocol.sc_equip_deal_upgrade_result,t.doGrewupEquipResult),GameGlobal.MessageCenter.addListener(MessageDef.CHANGE_ITEM,t.doCheckHaveCan,t),GameGlobal.MessageCenter.addListener(MessageDef.ADD_ITEM,t.doCheckHaveCan,t),GameGlobal.MessageCenter.addListener(MessageDef.DELETE_ITEM,t.doCheckHaveCan,t),MessageCenter.addListener(UserBag.postHuntStore,t.doCheckHaveCan,t),MessageCenter.addListener(GameLogic.ins().postLevelChange,t.doCheckHaveCan,t),t.regNetMsg(S2cProtocol.sc_equip_resolve_res,t.getEquipItemResolve),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendWearEquipment=function(e,t,i){var o=new Sproto.cs_equip_wear_request;o.itemHandle=e,o.roleID=i,o.pos=t,GameSocket.ins().Rpc(C2sProtocol.cs_equip_wear,o)},t.prototype.sendSmeltEquip=function(e,t,i){void 0===i&&(i=!1);var o=new Sproto.cs_equip_smelt_request;o.type=e,o.itemHandle=new Array,o.auto=i;for(var s=0;s<t.length;s++)null!=t[s]&&o.itemHandle.push(t[s].handle);return 0==o.itemHandle.length?!1:(GameSocket.ins().Rpc(C2sProtocol.cs_equip_smelt,o),!0)},t.prototype.doUpDataEquip=function(e){var t=e.roleID,i=e.equipPos,o=new ItemData;o.parser(e.data);var s=SubRoles.ins().getSubRoleByIndex(t),n=s.getEquipByIndex(i);if(5==o.itemConfig.quality&&o.itemConfig.type!=ItemType.ZHUANZHI?(n.goditem=o,LegendModel.ins().UpdateRoleLegendState()):n.item=o,GameGlobal.MessageCenter.dispatch(MessageDef.CHANGE_EQUIP),0==i||2==i){var r=EntityManager.ins().getEntityByHandle(s.handle);r&&r.updateModel()}},t.prototype.doSmeltREquip=function(e){var t=e.state;if(0==t)return UserTips.ins().showTips("|C:0xf87372&T:熔炼失败！|"),void UserTips.ins().showTips("|C:0xf87372&T:熔炼失败！|");e.goldCount,e.len;this.postSmeltEquipComplete()},t.prototype.postSmeltEquipComplete=function(){},t.contrastEquip=function(e,t){if(!e||0==e.handle)return t;if(!t||0==t.handle)return e;var i=ItemConfig.calculateBagItemScore(e),o=ItemConfig.calculateBagItemScore(t);return o>i?t:e},t.prototype.postEquipCheckList=function(e){return e},t.prototype.postSmeltEquip=function(e){return e},t.prototype.getEquipsByJobNPos=function(e,t){for(var i=SubRoles.ins().subRolesLen,o=0;i>o;o++){var s=SubRoles.ins().getSubRoleByIndex(o);if(s.job==e)return s.getEquipByIndex(t)}return null},t.prototype.getEquipConfigIDByPosAndQuality=function(e,t,i,o,s){void 0===i&&(i=1),void 0===o&&(o=-1),void 0===s&&(s=-1);for(var n=UserZs.ins().lv||0,r=GameLogic.ins().actorModel.level,a=1e5+1+1e4*e+100*t+1e3*i,l=1;99>l;l++){var h=1e5+l+1e4*e+100*t+1e3*i,c=GlobalConfig.itemConfig[h];if(void 0==c)break;if(-1!=o){var u=ItemConfig.pointCalNumber(c),d=SubRoles.ins().getSubRoleByIndex(o).getEquipByIndex(s),p=0;if(d&&d.item.configID&&(p=ItemConfig.calculateBagItemScore(d.item)),u>p){a=h;break}}if(!(c.zsLevel<=n&&c.level<=r))break;a=h}return a},t.prototype.checkEquipsIsWear=function(e){for(var t=SubRoles.ins().subRolesLen,i=0;t>i;i++)for(var o=SubRoles.ins().getSubRoleByIndex(i),s=o.getEquipLen(),n=0;s>n;n++)if(e.handle==o.getEquipByIndex(n).item.handle)return!0;return!1},t.prototype.doGrewupEquipResult=function(e){var t=e.roleId,i=e.result,o=e.configID;4==GlobalConfig.itemConfig[o].quality?this.postMixEquip(t,i,o):this.postMixGodEquip(t,i,o)},t.prototype.postMixEquip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.prototype.postMixGodEquip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.prototype.sendGrewupEquip=function(e,t,i){void 0===i&&(i=!1);var o=new Sproto.cs_equip_upgrade_request;o.roleID=e,o.pos=t,o.isgodequip=i,GameSocket.ins().Rpc(C2sProtocol.cs_equip_upgrade,o)},t.prototype.sendMixEquip=function(e,t,i){var o=new Sproto.cs_equip_mix_request;o.roleID=e,o.configID=t,o.pos=i,GameSocket.ins().Rpc(C2sProtocol.cs_equip_mix,o)},t.prototype.sendEquipItemResolve=function(e,t,i){var o=new Sproto.cs_equip_resolve_request;o.itemId=e,o.num=t,o.pos=i,GameSocket.ins().Rpc(C2sProtocol.cs_equip_resolve,o)},t.prototype.getEquipItemResolve=function(e){MessageCenter.ins().dispatch(MessageDef.EQUIP_ITEM_RESOLVE_MSG)},t.prototype.doCheckHaveCan=function(){if(!GlobalConfig.testItemCheck){var e=this._InnerCheckHaveCan();GameGlobal.MessageCenter.dispatch(MessageDef.CHECK_HAVE_CAN,e)}},t.prototype._InnerCheckHaveCan=function(){egret.clearTimeout(this.timeID),this.timeID=0;var e=this.CheckOrangeFenjie(),t=SubRoles.ins().subRolesLen;if(!e)for(var i=0;t>i;i++)for(var o=0;8>o;o++)if(e=this.setOrangeEquipItemState(o,SubRoles.ins().getSubRoleByIndex(i)))return!0;if(!e&&(e=this.checkRedPoint(5),!e)){this.updateEquipHandler();for(var i=0;t>i;i++)for(var o=0;8>o;o++)if(e=this.setLegendEquipItemState(o,SubRoles.ins().getSubRoleByIndex(i)))return!0}return e||(e=Boolean(UserBag.ins().getHuntGoodsBySort().length)),e
},t.prototype.checkRedPoint=function(e){for(var t=UserBag.ins().getBagEquipByLevelSort(e),i=0,o=t.length;o>i;i++){var s=t[i].itemConfig,n=this.getEquipConfigIDByPosAndQuality(s.subType,s.quality),r=GlobalConfig.itemConfig[n];if(r){var a=1e4*s.zsLevel+s.level,l=1e4*r.zsLevel+r.level;if(l>a)return!0}}return!1},t.prototype.checkOrangeRedPointZy=function(){for(var e=!1,i=SubRoles.ins().subRolesLen,o=0;i>o;o++){for(var s=SubRoles.ins().getSubRoleByIndex(o),n=0;8>n;n++){this["equip"+n];if(e=t.ins().setOrangeEquipItemState(n,s))break}if(e)break}if(!e){var r=UserBag.ins().getBagEquipByOrangeSplit(4);e=r.length>0}return e},t.prototype.CheckOrangeRedPoint=function(){for(var e=0;e<SubRoles.ins().subRolesLen;++e)if(this.CheckOrangeRedPointByRoleIndex(e))return!0;return this.CheckOrangeFenjie()},t.prototype.CheckOrangeFenjie=function(){for(var e=UserBag.ins().getBagEquipByLevelSort(4),t=UserZs.ins().lv||0,i=GameLogic.ins().actorModel.level,o=0,s=e.length;s>o;o++){var n=e[o].itemConfig;if(n.zsLevel>t||n.level>i)return!0;var r=SubRoles.ins().GetSubRoleByJob(n.job);if(null==r)return!0;var a=r.getEquipByIndex(n.subType);if(0!=a.item.configID){var l=ItemConfig.calculateBagItemScore(a.item),h=ItemConfig.pointCalNumber(n);if(l>h)return!0}}return!1},t.prototype.CheckOrangeRedPointByRoleIndex=function(e){for(var t=SubRoles.ins().getSubRoleByIndex(e),i=0;i<EquipPos.MAX;++i)if(this.setOrangeEquipItemState(i,t))return!0;return!1},t.prototype.setOrangeEquipItemState=function(e,i){var o,s=i.getEquipByIndex(e);o=s.item.itemConfig&&s.item.itemConfig.quality<4?null:GlobalConfig.itemConfig[s.item.configID+1];var n=0,r=0,a=e;if((4==e||5==e)&&(e=4),(6==e||7==e)&&(e=5),s.item.itemConfig&&4==s.item.itemConfig.quality&&s.item.itemConfig.zsLevel>=18)return!1;if(s.item.itemConfig&&5==s.item.itemConfig.quality)return!1;if(null!=o&&(o.level>GameLogic.ins().actorModel.level||o.zsLevel>UserZs.ins().lv))return!1;if(void 0!=o&&0!=s.item.handle&&4==s.item.itemConfig.quality){var l=GlobalConfig.legendLevelupConfig[s.item.configID];l?(n=l.count,r=l.itemId):egret.error("configID Error:"+s.item.configID)}else{var h=t.ins().getEquipConfigIDByPosAndQuality(e,4,i.job,i.roleID,a);null==this.legendComposeConfig&&(this.legendComposeConfig=GlobalConfig.ins("LegendComposeConfig"));var c=this.legendComposeConfig[h];c?(n=c.count,r=c.itemId):egret.error("configId Error:"+h)}var u=UserBag.ins().getBagGoodsCountById(0,r);return u>=n},t.prototype.updateEquipHandler=function(){for(var e=this,t=0;t<EquipPos.MAX;++t)this.canEquipHandler[t]=0;var i=UserBag.ins().getBagEquipByLevelSort(5);i.forEach(function(t){t.itemConfig.subType==EquipType.BRACELET?(e.canEquipHandler[EquipPos.BRACELET1]=Math.max(e.canEquipHandler[EquipPos.BRACELET1],t.handle),e.canEquipHandler[EquipPos.BRACELET2]=e.canEquipHandler[EquipPos.BRACELET1]):t.itemConfig.subType==EquipType.RING?(e.canEquipHandler[EquipPos.RING1]=Math.max(e.canEquipHandler[EquipPos.RING1],t.handle),e.canEquipHandler[EquipPos.RING2]=e.canEquipHandler[EquipPos.RING1]):e.canEquipHandler[t.itemConfig.subType]=Math.max(e.canEquipHandler[t.itemConfig.subType],t.handle)})},t.prototype.checkContrast=function(e){var t=UserBag.ins().getBagEquipByLevelSort(5),i=[];return t.forEach(function(t){t.itemConfig.subType==EquipType.BRACELET?null!=i[e]?(i[e].itemConfig.level<t.itemConfig.level||i[e].itemConfig.level<t.itemConfig.zsLevel)&&(i[e]=t):GameLogic.ins().actorModel.level>=t.itemConfig.level&&GameLogic.ins().actorModel.zsLv>=t.itemConfig.zsLevel&&(i[e]=t):t.itemConfig.subType==EquipType.RING?null!=i[e]?(i[e].itemConfig.level<t.itemConfig.level||i[e].itemConfig.level<t.itemConfig.zsLevel)&&(i[e]=t):GameLogic.ins().actorModel.level>=t.itemConfig.level&&GameLogic.ins().actorModel.zsLv>=t.itemConfig.zsLevel&&(i[e]=t):null!=i[t.itemConfig.subType]?(i[t.itemConfig.subType].itemConfig.level<t.itemConfig.level||i[t.itemConfig.subType].itemConfig.level<t.itemConfig.zsLevel)&&(i[t.itemConfig.subType]=t):GameLogic.ins().actorModel.level>=t.itemConfig.level&&GameLogic.ins().actorModel.zsLv>=t.itemConfig.zsLevel&&(i[t.itemConfig.subType]=t)}),i[e]?i[e].handle:null},t.prototype.setLegendEquipItemState=function(e,t){var i,o=t.getEquipByIndex(e);i=o.goditem.itemConfig&&5==o.goditem.itemConfig.quality?GlobalConfig.itemConfig[o.goditem.configID+1]:null;var s=0,n=0;if(void 0!=i&&i.zsLevel>UserZs.ins().lv)return!1;if(void 0==i||0==o.goditem.handle||5!=o.goditem.itemConfig.quality){if(0==o.goditem.handle){var r=this.canEquipHandler[e];if(r>0){var a=UserBag.ins().getBagGoodsByHandle(UserBag.BAG_TYPE_EQUIP,r);if(a&&UserZs.ins().lv>=a.itemConfig.zsLevel)return!0}}return!1}var l=GlobalConfig.legendLevelupConfig[o.goditem.configID];s=l.count,n=l.itemId;var h=UserBag.ins().getBagGoodsCountById(0,n);return UserZs.ins().lv>=3?h>=s:!1},t}(BaseSystem);__reflect(UserEquip.prototype,"UserEquip"),MessageCenter.compile(UserEquip),window.UserEquip=UserEquip;var UserRole=function(){function e(){this.canChangeEquips=[[],[],[]],GameGlobal.MessageCenter.addListener(MessageDef.CHANGE_ITEM,this.checkHaveCan,this),GameGlobal.MessageCenter.addListener(MessageDef.ADD_ITEM,this.checkHaveCan,this),GameGlobal.MessageCenter.addListener(MessageDef.DELETE_ITEM,this.checkHaveCan,this),MessageCenter.addListener(GameLogic.ins().postLevelChange,this.checkHaveCan,this),MessageCenter.addListener(GameLogic.ins().postSubRoleChange,this.checkHaveCan,this),MessageCenter.addListener(GameLogic.ins().postGoldChange,this.showNavBtnRedPoint,this),GameGlobal.MessageCenter.addListener(MessageDef.WING_ACTIVATE,this.showNavBtnRedPoint,this),GameGlobal.MessageCenter.addListener(MessageDef.CHANGE_EQUIP,this.showNavBtnRedPoint,this),MessageCenter.addListener(Bless.ins().postBelssUpdate,this.showNavBtnRedPoint,this)}return e.ins=function(){var t=this;return null==t._ins&&(t._ins=new e),t._ins},e.prototype._Invalid=function(){},e.prototype.checkHaveCan=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=-1),!GlobalConfig.testItemCheck){var i,o,s,n,r,a,l=[],h=UserBag.ins().getBagEquipByType(0);if(h){for(var c=t>=0?t+1:SubRoles.ins().subRolesLen,u=t>=0?t:0;c>u;u++){l.length=0;var d=SubRoles.ins().getSubRoleByIndex(u),p=d.getEquipLen2();for(i=0;p>i;i++)if(s=d.getEquipByIndex(i),0==s.item.handle)for(o=0;o<h.length;o++)n=h[o],n.itemConfig&&5!=n.itemConfig.quality&&(l.indexOf(n)>=0||0!=n.itemConfig.job&&n.itemConfig.job!=SubRoles.ins().getSubRoleByIndex(u).job||UserZs.ins().lv<n.itemConfig.zsLevel||GameLogic.ins().actorModel.level<n.itemConfig.level||(r=n.itemConfig.subType,r==ForgeConst.EQUIP_POS_TO_SUB[i]&&(l[i]=UserEquip.contrastEquip(n,l[i]))));for(i=0;p>i;i++)if(s=d.getEquipByIndex(i),0!=s.item.handle)for(a=s.item.itemConfig.subType,o=0;o<h.length;o++)n=h[o],n.itemConfig&&5!=n.itemConfig.quality&&(l.indexOf(n)>=0||0!=n.itemConfig.job&&n.itemConfig.job!=SubRoles.ins().getSubRoleByIndex(u).job||UserZs.ins().lv<n.itemConfig.zsLevel||GameLogic.ins().actorModel.level<n.itemConfig.level||(r=n.itemConfig.subType,a==r&&(l[i]=UserEquip.contrastEquip(l[i]?l[i]:s.item,n))));for(i=0;p>i;i++)s=d.getEquipByIndex(i),this.canChangeEquips[u][i]=!1,l[i]&&s.item.handle!=l[i].handle&&(e&&t==u?(UserEquip.ins().sendWearEquipment(l[i].handle,i,t),this.canChangeEquips[u][i]=!1):this.canChangeEquips[u][i]=!0);this.canChangeEquips[u].indexOf(!0)<0&&(this.canChangeEquips[u].length=0)}return MessageCenter.ins().dispatch(MessageDef.ROLE_HINT),l}}},e.prototype.showNavBtnRedPoint=function(){for(var e,t=0;t<this.canChangeEquips.length;t++){for(var i=0;i<this.canChangeEquips[t].length;i++)if(this.canChangeEquips[t][i]){e=!0;break}if(e)break}return e?!0:e||!UserZs.ins().canOpenZSWin()||UserZs.ins().isMaxLv()||!UserZs.ins().canGetRedPoint()&&!UserZs.ins().canUpgrade()?!e&&this.and(Wing.ins().mRedPoint.IsRed())?!0:e||!ZhuzaiEquip.ins().canAllLevelup()&&!ZhuzaiEquip.ins().canAllAdvance()?!e&&DressModel.ins().mDressModelRedPoint.IsRed()?!0:!e&&LongHun.ins().CheckRedPoint()?!0:!e&&UserEquip.ins().checkOrangeRedPointZy()?!0:!e&&Deblocking.IsRedDotSkillBtn()?!0:!e&&Wing.ins().mRedPoint.IsRed()?!0:!e&&MountModel.getInstance.checkAllRedPoint()?!0:!e&&Deblocking.IsRedDotArtifactBtn()?!0:!e&&Deblocking.IsRedDotZhuanZhiBtn()?!0:!e&&TheGunModel.getInstance.checkAllRedPoint()?!0:e:!0:!0},e.prototype.and=function(e){for(var t in e)if(1==e[t])return!0;return!1},e.prototype.seekRoleItem=function(){var e=!1;return e},e.prototype.roleHintCheck=function(e,t){var i=1,o=0,s=0,n=0;switch(t){case 0:break;case 1:break;case 2:break;case 3:break;case 4:i=e.jingMaiData.level;var r=GlobalConfig.jingMaiLevelConfig[i];r&&(o=r.count,n=r.itemId)}return o&&(s=UserBag.ins().getBagGoodsCountById(0,n),s>=o)?!0:!1},e.prototype.setCanChange=function(){this.roleWin.roleInfoPanel.setCanChange(this.canChangeEquips),this.roleWin.canChangeEquips=this.canChangeEquips},Object.defineProperty(e.prototype,"roleWin",{get:function(){return ViewManager.ins().getView(RoleWin)},enumerable:!0,configurable:!0}),e}();__reflect(UserRole.prototype,"UserRole");var RoleEquipRedPoint=function(e){function t(){var t=e.call(this)||this;t.m_Data=[];for(var i=0;i<SubRoles.MAX_COUNT;++i){for(var o=[],s=0;s<EquipPos.MAX;++s)o.push(!1);t.m_Data.push(o)}return t}return __extends(t,e),t.prototype.GetMessageDef=function(){return[MessageDef.CHANGE_ITEM,MessageDef.ADD_ITEM,MessageDef.DELETE_ITEM,MessageDef.LEVEL_CHANGE,MessageDef.SUB_ROLE_CHANGE]},t.prototype.DoUpdate=function(e){},t.prototype.IsRed=function(){for(var e=0;e<this.m_Data.length;++e)if(this.IsRedByRole(e))return!0;return!1},t.prototype.IsRedByRole=function(e){this.mInValid&&(this.DoUpdateEquip(),this.mInValid=!1);var t=this.m_Data[e];if(!t)return!1;for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s)return s}return!1},t.prototype.DoUpdateEquip=function(){var e,t,i,o,s,n,r=[],a=UserBag.ins().getBagEquipByType(0);if(a)for(var l=0,h=SubRoles.ins().subRolesLen;h>l;++l){r.length=0;var c=SubRoles.ins().getSubRoleByIndex(l),u=c.getEquipLen2();for(e=0;u>e;e++)if(i=c.getEquipByIndex(e),0==i.item.handle)for(t=0;t<a.length;t++)o=a[t],o.itemConfig&&(r.indexOf(o)>=0||0!=o.itemConfig.job&&o.itemConfig.job!=SubRoles.ins().getSubRoleByIndex(l).job||UserZs.ins().lv<o.itemConfig.zsLevel||GameLogic.ins().actorModel.level<o.itemConfig.level||(s=o.itemConfig.subType,s==ForgeConst.EQUIP_POS_TO_SUB[e]&&(r[e]=UserEquip.contrastEquip(o,r[e]))));for(e=0;u>e;e++)if(i=c.getEquipByIndex(e),0!=i.item.handle)for(n=i.item.itemConfig.subType,t=0;t<a.length;t++)o=a[t],o.itemConfig&&(r.indexOf(o)>=0||0!=o.itemConfig.job&&o.itemConfig.job!=SubRoles.ins().getSubRoleByIndex(l).job||UserZs.ins().lv<o.itemConfig.zsLevel||GameLogic.ins().actorModel.level<o.itemConfig.level||(s=o.itemConfig.subType,n==s&&(r[e]=UserEquip.contrastEquip(r[e]?r[e]:i.item,o))));for(e=0;u>e;e++)this.m_Data[l][e]=!1,r[e]&&i.item.handle!=r[e].handle&&(this.m_Data[l][e]=!0)}},t}(IRedPoint);__reflect(RoleEquipRedPoint.prototype,"RoleEquipRedPoint"),window.UserRole=UserRole,window.RoleEquipRedPoint=RoleEquipRedPoint;var PowerSkillState;!function(e){e[e.LOADING=0]="LOADING",e[e.USE=1]="USE",e[e.INIT=2]="INIT"}(PowerSkillState||(PowerSkillState={}));var UserSkill=function(e){function t(){var t=e.call(this)||this;return t.sysId=PackageID.Skill,t.regNetMsg(S2cProtocol.sc_skill_use_result,t.doSkillResult),t.regNetMsg(S2cProtocol.sc_skill_deal_add_buff,t.doBuff),t.regNetMsg(S2cProtocol.sc_skill_deal_remove_buff,t.doRemoveBuff),t.regNetMsg(S2cProtocol.sc_skill_add_effect,t.doAddEffect),t.regNetMsg(S2cProtocol.sc_skill_remove_effect,t.doRemoveEffect),t.regNetMsg(S2cProtocol.sc_skill_upgrade_result,t.grewUpSkillResult),t.regNetMsg(S2cProtocol.sc_skill_all_upgrade_result,t.grewUpAllSkillResult),t.regNetMsg(S2cProtocol.sc_heji_skill_data,t._DoHejiSkill),t.regNetMsg(S2cProtocol.sc_skill_setfight_res,t.getSkillSetFight),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype._DoHejiSkill=function(e){_Log("UserSkill:HejiSkill",e.skillID,e.show)},t.prototype.CheckHejiSkill=function(){return SubRoles.ins().subRolesLen<2?(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101660),!1):!0},t.prototype.sendUseSkill=function(e,t,i){var o=this.getBytes(1);o.writeDouble(e),o.writeDouble(t),o.writeInt(i),this.sendToServer(o)},t.prototype.doSkillResult=function(e){var i=this,o=e.sourceHandle,s=e.skillID,n=!1,r=GlobalConfig.skillsConfig[s],a=r.hitCount,l=EntityManager.ins().getEntityByHandle(o);if(l instanceof CharRole&&(l.infoModel.setAtt(AttributeType.atMp,e.mp/100),l.updateBlood()),s==t.POWER_SKILL){n=!0,l&&l.team==Team.My&&GameGlobal.MessageCenter.dispatch(MessageDef.GAME_SCENE_WORD,"comp_164_47_01_png");var h=ViewManager.ins().getView(UIView1);h&&h instanceof UIView1&&(h.nowHJCD=0)}var c=e.targetHandle,u=EntityManager.ins().getEntityByHandle(o);if(u){var d=EntityManager.ins().getEntityByHandle(c);if(d){u instanceof CharRole&&!u.parent||this.userSkill(u,d,GlobalConfig.skillsConfig[s]),u.atking=!0,TimerManager.ins().doTimer(u.curPlayTime,1,u.resetStand,u);for(var p,f,g,_,m=e.datas.length,v=GlobalConfig.ins("SkillsConfig")[s],y=function(){p=e.datas[b].handle,_=EntityManager.ins().getEntityByHandle(p),f=e.datas[b].type,g=e.datas[b].value;var o=e.datas[b].damageType,s=e.datas[b].damageEle;return f==DamageTypes.BLANK?"continue":void(_&&TimerManager.ins().doTimer(u.curPlayTime/2,1,function(){GameLogic.ins().postEntityHpChange(_,u,n?DamageTypes.HEJI:f,g,a,[null,v.skillType]),egret.setTimeout(function(){GameLogic.ins().postEntityHpChange(_,u,n?DamageTypes.HEJI:f,s,a,[o,v.skillType])},i,t.EN_TIME)},_))},b=0;m>b;b++)y();if(0==m&&n){var C=ViewManager.ins().getView(GameSceneView);DisplayUtils.shakeIt(C.map,6,150,7)}}}},t.prototype.userSkill=function(e,t,i){return e!=t&&(e.dir=DirUtil.get8DirBy2Point(e,t)),e.playAction(i.actionType),i?(GameLogic.ins().playSkillEff(i,e,t),!0):!1},t.prototype.doBuff=function(e){var t=e.handle,i=EntityManager.ins().getEntityByHandle(t);if(i){var o=ObjectPool.ins().pop("EntityBuff");null==this.effectsConfig&&(this.effectsConfig=GlobalConfig.ins("EffectsConfig")),o.effConfig=this.effectsConfig[e.buffID],o.value=0,o.addTime=egret.getTimer(),i.addBuff(o)}},t.prototype.doRemoveBuff=function(e){var t=e.handle,i=EntityManager.ins().getEntityByHandle(t);if(i){if(null==this.effectsConfig&&(this.effectsConfig=GlobalConfig.ins("EffectsConfig")),null==this.effectsConfig[e.buffID])return void Main.errorBack("不存在buffid--doRemoveBuff函数"+e.buffID);var o=this.effectsConfig[e.buffID].group;i.hasBuff(o)&&i.removeBuff(i.buffList[o])}},t.prototype.doAddEffect=function(e){var t=e.handle,i=EntityManager.ins().getEntityByHandle(t);i&&i.addEffect(e.effectID)},t.prototype.doRemoveEffect=function(e){var t=e.handle,i=EntityManager.ins().getEntityByHandle(t);i&&i.removeEffect(e.effectID)},t.prototype.sendGrewUpSkill=function(e,t){var i=new Sproto.cs_skill_upgrade_request;i.roleID=e,i.skillID=t,GameSocket.ins().Rpc(C2sProtocol.cs_skill_upgrade,i)},t.prototype.grewUpSkillResult=function(e){var t=e.roleID,i=e.skillID,o=e.level,s=SubRoles.ins().getSubRoleByIndex(t),n=s.skillsData,r=o-n[i-1];n[i-1]=o,MessageCenter.ins().dispatch(MessageDef.SKILL_UPGRADE,t,i,o,r)},t.prototype.sendGrewUpAllSkill=function(e,t){var i=new Sproto.cs_skill_upgrade_all_request;i.roleID=e,GameSocket.ins().Rpc(C2sProtocol.cs_skill_upgrade_all,i)},t.prototype.grewUpAllSkillResult=function(e){for(var t=e.roleID,i=SubRoles.ins().getSubRoleByIndex(t),o=i.skillsData,s=[],n=[],r=0;r<e.level.length;r++){var a=e.level[r];n[r]=a-o[r],i.setSkillsDataByIndex(r,a),s.push(e.level[r])}MessageCenter.ins().dispatch(MessageDef.SKILL_GREWUPALL,t,s,n)},t.prototype.getSkillLimitLevel=function(){return UserZs.ins().lv>0?80+10*UserZs.ins().lv:GameLogic.ins().actorModel.level>80?80:GameLogic.ins().actorModel.level},t.prototype.getSkillSetFight=function(e){var t=SubRoles.ins().getSubRoleByIndex(e.roleID);t.skillsDataIndex=e.skillID,GameGlobal.MessageCenter.dispatch(MessageDef.SKILL_UPDATE)},t.prototype.sendSkillSetFight=function(e,t){var i=this.checkListHaveMainSkill(t,e);if(!i)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101661);var o=new Sproto.cs_skill_setfight_req_request;o.roleID=e,o.skillID=t,GameSocket.ins().Rpc(C2sProtocol.cs_skill_setfight_req,o)},Object.defineProperty(t.prototype,"maxLv",{get:function(){if(this._maxLv>0)return this._maxLv;var e=GlobalConfig.ins("SkillsUpgradeConfig"),t=0;for(var i in e)t+=1;return this._maxLv=t,this._maxLv},enumerable:!0,configurable:!0}),t.prototype.getskillLv=function(e,t){var i=SubRoles.ins().getSubRoleByIndex(e),o=i.skillsData[t-1];return(0>=o||!o)&&(o=0),o},t.prototype.getSkillId=function(e,t,i){var o=GlobalConfig.ins("SkillsOpenConfig"),s=o[e],n=0;for(var r in s)if(s[r].index==t){n=s[r].skillId-s[r].initialLevel;break}var a=n+i;return a},t.prototype.getSkillDataById=function(e){var t={job:0,index:0,lv:0};t.lv=parseInt(e.toString().slice(3,6));var i=GlobalConfig.ins("SkillsOpenConfig");for(var o in i)for(var s=i[o],n=0;n<s.length;n++){var r=s[n].skillId-s[n].initialLevel,a=e-t.lv;if(r==a){t.job=s[n].roletype,t.index=s[n].index;break}}return t},t.prototype.getSkillTypeStr=function(e){var t="";switch(e){case SkillType.TYPE1:t=GlobalConfig.jifengTiaoyueLg.st101662;break;case SkillType.TYPE2:t=GlobalConfig.jifengTiaoyueLg.st101663;break;case SkillType.TYPE7:case SkillType.TYPE3:t=GlobalConfig.jifengTiaoyueLg.st101664;break;case SkillType.TYPE4:t=GlobalConfig.jifengTiaoyueLg.st101665;break;case SkillType.TYPE5:t=GlobalConfig.jifengTiaoyueLg.st101666}return t},t.prototype.checkListHaveMainSkill=function(e,t){for(var i=SubRoles.ins().getSubRoleByIndex(t),o=i.skillsData,s=0;s<e.length;s++){var n=e[s];if(!(0>=n)){var r=o[n-1],a=this.getSkillId(i.job,n,r),l=GlobalConfig.ins("SkillsConfig")[a];if(l&&l.skillType==SkillType.TYPE1)return!0}}return!1},t.prototype.cutListHaveModMainSkill=function(e,t,i){if(!this.checkListHaveMainSkill([i],t))return e;for(var o=SubRoles.ins().getSubRoleByIndex(t),s=o.skillsData,n=0;n<e.length;n++){var r=e[n];if(!(0>=r||r==i)){var a=s[r-1],l=this.getSkillId(o.job,r,a),h=GlobalConfig.ins("SkillsConfig")[l];h&&h.skillType==SkillType.TYPE1&&(e[n]=-1,UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101667))}}return e},t.prototype.checkAllSkillRedPoint=function(){return 1==this.checkAllRoleSkillCanLvUp()||1==this.checkAllAddSkillRedPoint()?!0:!1},t.prototype.checkAllRoleSkillCanLvUp=function(){for(var e=SubRoles.ins().rolesModel,t=0;t<e.length;t++){var i=this.checkRoleSkillCanLvUp(e[t].roleID);if(i)return!0}return!1},t.prototype.checkRoleSkillCanLvUp=function(e){var t=SubRoles.ins().getSubRoleByIndex(e);if(t)for(var i=0;i<t.skillsData.length;i++){var o=this.checkSkillCanLvUp(e,i+1);if(o)return!0}return!1},t.prototype.checkSkillCanLvUp=function(e,i){var o,s=SubRoles.ins().getSubRoleByIndex(e),n=GlobalConfig.ins("SkillsOpenConfig")[s.job],r=null,a=ZhuanZhiModel.ins().getZhuanZhiLevel(e),l=t.ins().getskillLv(e,i),h=t.ins().getSkillId(s.job,i,l),c=!1;if(o=GlobalConfig.ins("SkillsConfig")[h+1]){var u=o.upgradeLimit,d=GameLogic.ins().actorModel.level,p=UserZs.ins()?UserZs.ins().lv:0;u>=1e3?(u/=1e3,p>=u&&(c=!0)):d>=u&&(c=!0);for(var f=0;f<n.length;f++)if(n[f].index==i){r=n[f];break}if(c&&l<t.ins().maxLv&&a>=r.level){var g=GlobalConfig.ins("SkillsUpgradeConfig")[l+1];if(g){var _=r.levelUpCost,m=UserBag.ins().getBagGoodsCountById(0,_);if(m>=g.cost)return!0}}}return!1},t.prototype.checkAllAddSkillRedPoint=function(){for(var e=SubRoles.ins().rolesModel,t=0;t<e.length;t++){var i=this.checkAddSkillRedPoint(e[t].roleID);if(i)return!0}return!1},t.prototype.checkAddSkillRedPoint=function(e){for(var t=SubRoles.ins().getSubRoleByIndex(e),i=0,o=t.skillsData,s=0;s<o.length;s++)if(o[s]>0){var n=this.getSkillId(t.job,s+1,o[s]),r=GlobalConfig.ins("SkillsConfig")[n];r.skillType!=SkillType.TYPE4&&(i+=1)}for(var a=0,l=t.skillsDataIndex,s=0;7>s;s++)(!l[s]||l[s]<=0)&&(a+=1);return i-(7-a)>0&&a>0?!0:!1},t.prototype.checkSkillGuide=function(e){var i=t.ins().getskillLv(0,e);return 0==i?!0:!1},t.prototype.checkSkillAddGuide=function(e,i){var o=t.ins().getskillLv(0,i);return 1==o&&0==GuideLocalStorage.checkIdIsCompele(e)?!0:!1},t.POWER_SKILL=68001,t.EN_TIME=200,t}(BaseSystem);__reflect(UserSkill.prototype,"UserSkill"),MessageCenter.compile(UserSkill);var SkillType;!function(e){e[e.TYPE1=1]="TYPE1",e[e.TYPE2=2]="TYPE2",e[e.TYPE3=3]="TYPE3",e[e.TYPE4=4]="TYPE4",e[e.TYPE5=5]="TYPE5",e[e.TYPE6=6]="TYPE6",e[e.TYPE7=7]="TYPE7"}(SkillType||(SkillType={})),window.UserSkill=UserSkill;var Wing=function(e){function t(){var t=e.call(this)||this;return t.bAutoBuyShenyu=!1,t.canChange=!0,t.mRedPoint=new WingModelRedPoint,t.canChangeWingEquips=[[],[],[]],t.sysId=PackageID.Wing,t.regNetMsg(1,t.doUpDataWing),t.regNetMsg(S2cProtocol.sc_wing_boost,t.doBoost),t.regNetMsg(S2cProtocol.sc_wing_upgrade,t.doGrade),t.regNetMsg(11,t.doWingEquip),t.regNetMsg(S2cProtocol.sc_wing_extend,t.getWingChangeShow),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendBoost=function(e,t,i){void 0===i&&(i=!1);var o=new Sproto.cs_wing_boost_request;o.roleId=e,o.type=t,o.canUseYuanbao=i,GameSocket.ins().Rpc(C2sProtocol.cs_wing_boost,o)},t.prototype.sendUpgrade=function(e){var t=new Sproto.cs_wing_upgrade_request;t.roleId=e,GameSocket.ins().Rpc(C2sProtocol.cs_wing_upgrade,t)},t.prototype.sendActivate=function(e){var t=new Sproto.cs_wing_activate_request;t.roleId=e,GameSocket.ins().Rpc(C2sProtocol.cs_wing_activate,t,this.doActivate,this)},t.prototype.dressWingEquip=function(e,t,i){var o=new Sproto.cs_wing_equip_request;o.itemHandle=t,o.roleId=e,o.dressIndex=i,GameSocket.ins().Rpc(C2sProtocol.cs_wing_equip,o,this.doWingEquip,this)},t.prototype.sendBigUpLevel=function(e){var t=new Sproto.cs_wing_evolution_request;t.roleId=e,GameSocket.ins().Rpc(C2sProtocol.cs_wing_evolution,t,this.doBigUpLevel,this)},t.prototype.doBigUpLevel=function(e){var t,i=e.result;if(i)t=GlobalConfig.jifengTiaoyueLg.st100217;else{var o=e.type;o?(null==this.wingCommonConfig&&(this.wingCommonConfig=GlobalConfig.ins("WingCommonConfig")),t=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101669,[this.wingCommonConfig.levelExpChange])):t=GlobalConfig.jifengTiaoyueLg.st101668}UserTips.ins().showTips(t)},t.prototype.doUpDataWing=function(e){var t=e.readShort();SubRoles.ins().getSubRoleByIndex(t).wingsData.parser(e)},t.prototype.doBoost=function(e){var t=e.roleId;SubRoles.ins().getSubRoleByIndex(t).wingsData.parserBoost(e);var i=e.crit,o=e.addExp;this.postBoost(i,o),GameGlobal.MessageCenter.dispatch(MessageDef.WING_BOOST,i,o)},t.prototype.postBoost=function(e,t){return[e,t]},t.prototype.doGrade=function(e){var t=e.roleId,i=SubRoles.ins().getSubRoleByIndex(t).wingsData.lv;SubRoles.ins().getSubRoleByIndex(t).wingsData.parserUpgrade(e);var o=EntityManager.ins().getMainRole(t);o&&o.updateModel(),this.postWingUpgrade(),GameGlobal.MessageCenter.dispatch(MessageDef.WING_UPGRADE),i<e.lv&&ViewManager.ins().open(MainNewWin,ResAnimType.TYPE4,t,[null,e.lv+1+GlobalConfig.jifengTiaoyueLg.st100103+GlobalConfig.jifengTiaoyueLg.st100339],2)},t.prototype.postWingUpgrade=function(){},t.prototype.doActivate=function(e){var t=e.roleId;SubRoles.ins().getSubRoleByIndex(t).wingsData.parserOpenStatus(e);var i=EntityManager.ins().getMainRole(t);i&&i.updateModel(),this.postActivate(),GameGlobal.MessageCenter.dispatch(MessageDef.WING_ACTIVATE),ViewManager.ins().open(MainNewWin,ResAnimType.TYPE4,t,[null,1+GlobalConfig.jifengTiaoyueLg.st100103+GlobalConfig.jifengTiaoyueLg.st100339],3)},t.prototype.postActivate=function(){},t.prototype.doWingEquip=function(e){if(e.itemData){var t=e.roleId,i=e.index,o=new ItemData;o.parser(e.itemData),SubRoles.ins().getSubRoleByIndex(t).wingsData.setEquipByIndex(i,o);var s=EntityManager.ins().getMainRole(t);s&&s.updateModel(),this.postWingEquipUpdate()}},t.prototype.postWingEquipUpdate=function(){},t.prototype.checkWingEquip=function(e,t){void 0===e&&(e=-1),void 0===t&&(t=!1);var i,o,s,n,r,a,l=[],h=UserBag.ins().getBagEquipByType(4);if(h)for(var c=e>=0?e+1:SubRoles.ins().subRolesLen,u=e>=0?e:0;c>u;u++){l.length=0;var d=SubRoles.ins().getSubRoleByIndex(u).wingsData,p=d.equipsLen;for(i=0;p>i;i++)if(s=d.getEquipByIndex(i),0==s.handle)for(o=0;o<h.length;o++)n=h[o],n.itemConfig&&(l.indexOf(n)>=0||SubRoles.ins().getSubRoleByIndex(u).wingsData.lv<n.itemConfig.level||(r=n.itemConfig.subType,r==i&&(l[i]=UserEquip.contrastEquip(n,l[i]))));for(i=0;p>i;i++)if(s=d.getEquipByIndex(i),0!=s.handle)for(s.itemConfig&&(a=s.itemConfig.subType),o=0;o<h.length;o++)n=h[o],n.itemConfig&&(l.indexOf(n)>=0||SubRoles.ins().getSubRoleByIndex(u).wingsData.lv<n.itemConfig.level||(r=n.itemConfig.subType,a==r&&(l[i]=UserEquip.contrastEquip(l[i]?l[i]:s,n))));for(i=0;4>i;i++)s=d.getEquipByIndex(i),this.canChangeWingEquips[u][i]=!1,l[i]&&s.handle!=l[i].handle&&(t&&e==u?(this.dressWingEquip(e,l[i].handle,i),this.canChangeWingEquips[u][i]=!1):this.canChangeWingEquips[u][i]=!0);this.canChangeWingEquips[u].indexOf(!0)<0&&(this.canChangeWingEquips[u].length=0)}},t.prototype.setCanWingEquipChange=function(){this.roleWin.canChangeWingEquips=this.canChangeWingEquips},Object.defineProperty(t.prototype,"roleWin",{get:function(){return ViewManager.ins().getView(RoleWin)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAutoBuy",{get:function(){return this.bAutoBuyShenyu},set:function(e){this.bAutoBuyShenyu!=e&&(this.bAutoBuyShenyu=e)},enumerable:!0,configurable:!0}),t.prototype.dealyOver=function(){},t.prototype.sendWingOneKey=function(e){var t=new Sproto.cs_wing_onekey_request;t.roleId=e,this.Rpc(C2sProtocol.cs_wing_onekey,t)},t.prototype.sendWingChangeShow=function(e,t){var i=new Sproto.cs_wing_exten_request;i.roleId=e,i.lv=t,this.Rpc(C2sProtocol.cs_wing_exten,i)},t.prototype.getWingChangeShow=function(e){var t=e.roleId,i=SubRoles.ins().getSubRoleByIndex(t).wingsData;i.showLv=e.lv;var o=EntityManager.ins().getMainRole(t);o&&o.updateModel(),GameGlobal.MessageCenter.dispatch(MessageDef.WING_CHANGESHOW_MSG)},t.prototype.overDealy=function(){},t.WING_EQUIP_COUNT=4,t}(BaseSystem);__reflect(Wing.prototype,"Wing");var WingModelRedPoint=function(e){function t(){var t=e.call(this)||this;t.m_Data=[];for(var i=0;i<SubRoles.MAX_COUNT;++i)t.m_Data.push({mEquip:[],mUpgrade:!1});return t}return __extends(t,e),t.prototype.GetEquipState=function(e){var t=this.m_Data[e];return t?t.mEquip:[]},t.prototype.IsEquipState=function(e){return-1!=this.GetEquipState(e).indexOf(!0)},t.prototype.GetMessageDef=function(){return[MessageDef.CHANGE_ITEM,MessageDef.ADD_ITEM,MessageDef.DELETE_ITEM,MessageDef.WING_BOOST,MessageDef.WING_UPGRADE,MessageDef.WING_ACTIVATE]},t.prototype.DoUpdate=function(e){switch(e){case MessageDef.CHANGE_ITEM:case MessageDef.ADD_ITEM:case MessageDef.DELETE_ITEM:this.DoGradeupWing(),this.DoQuickUp(),this.DoUpdateEquip()}},t.prototype.IsRed=function(){if(Deblocking.Check(DeblockingType.TYPE_35,!0))for(var e=0;e<this.m_Data.length;++e)if(this.IsRedByRole(e))return!0;return!1},t.prototype.IsRedByRole=function(e){null==this.wingCommonConfig&&(this.wingCommonConfig=GlobalConfig.ins("WingCommonConfig"));var t=GameLogic.ins().actorModel.level;if(t<this.wingCommonConfig.openLevel)return!1;var i=SubRoles.ins().getSubRoleByIndex(e);if(i){if(i.wingsData.lv>=this.wingCommonConfig.lvMax)return!1;var o=i.wingsData.openStatus;if(t>this.wingCommonConfig.openLevel&&!o)return!0}this.DoGradeupWing(),this.DoQuickUp(),this.DoUpdateEquip();var s=this.m_Data[e];if(!s)return!1;for(var n=0,r=Wing.WING_EQUIP_COUNT;r>n;++n){var a=s.mEquip[n];if(a)return!0}return s.mUpgrade?!0:this.mQuickUp},t.prototype.DoGradeupWing=function(){null==this.wingCommonConfig&&(this.wingCommonConfig=GlobalConfig.ins("WingCommonConfig"));for(var e=this.wingCommonConfig.lvMax,t=SubRoles.ins().subRolesLen,i=GlobalConfig.wingLevelConfig,o=UserBag.ins().getBagItemById(i[0].itemId),s=GameLogic.ins().actorModel.gold,n=0;t>n;n++){var r=SubRoles.ins().getSubRoleByIndex(n).wingsData.lv;if(null!=r&&e>r){var a=GlobalConfig.wingLevelConfig[r];o&&o.count>=a.itemNum||s>=a.normalCost?this.m_Data[n].mUpgrade=!0:this.m_Data[n].mUpgrade=!1}else this.m_Data[n].mUpgrade=!1}},t.prototype.DoQuickUp=function(){var e=UserBag.ins().getBagItemById(200102);this.mQuickUp=e?e.count>0:!1},t.prototype.DoUpdateEquip=function(){var e=UserBag.ins().getBagEquipByType(4);if(e)for(var t=0,i=SubRoles.ins().subRolesLen;i>t;++t){for(var o=[],s=SubRoles.ins().getSubRoleByIndex(t).wingsData,n=s.equipsLen,r=0;n>r;r++){var a=s.getEquipByIndex(r);if(0==a.handle)for(var l=0;l<e.length;l++){var h=e[l];if(h.itemConfig&&!(o.indexOf(h)>=0||SubRoles.ins().getSubRoleByIndex(t).wingsData.lv<h.itemConfig.level)){var c=h.itemConfig.subType;c==r&&(o[r]=UserEquip.contrastEquip(h,o[r]))}}}for(var r=0;n>r;r++){var a=s.getEquipByIndex(r);if(0!=a.handle)for(var u=a.itemConfig?a.itemConfig.subType:null,l=0;l<e.length;l++){var h=e[l];if(h.itemConfig&&!(o.indexOf(h)>=0||SubRoles.ins().getSubRoleByIndex(t).wingsData.lv<h.itemConfig.level)){var c=h.itemConfig.subType;u==c&&(o[r]=UserEquip.contrastEquip(o[r]?o[r]:a,h))}}}for(var d=this.m_Data[t].mEquip,r=0,p=Wing.WING_EQUIP_COUNT;p>r;r++){var a=s.getEquipByIndex(r);d[r]=o[r]&&a.handle!=o[r].handle}}},t}(IRedPoint);__reflect(WingModelRedPoint.prototype,"WingModelRedPoint"),MessageCenter.compile(Wing),window.Wing=Wing,window.WingModelRedPoint=WingModelRedPoint;var DressModel=function(e){function t(){var t=e.call(this)||this;return t.isActivat=!1,t.timeInfo=[],t.posInfo=[],t.mDressModelRedPoint=new DressModelRedPoint,t.regNetMsg(S2cProtocol.sc_dress_time_end,t.doDressTimeEnd),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendDressInfoReq=function(){this.Rpc(C2sProtocol.cs_dress_get_info,null,this.doDressInfo,this)},t.prototype.doDressInfo=function(e){this.parser(e),GameGlobal.MessageCenter.dispatch(MessageDef.DRESS_INFO)},t.prototype.sendDressActivationReq=function(e){var t=new Sproto.cs_dress_activate_request;t.id=e,this.Rpc(C2sProtocol.cs_dress_activate,t,this.doDressActivationRes,this)},t.prototype.doDressActivationRes=function(e){this.isActivat=!0,this.parserAct(e),GameGlobal.MessageCenter.dispatch(MessageDef.DRESS_JIHUORES),UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101656)},t.prototype.sendDressUserReq=function(e,t){null==this.zhuangBanId&&(this.zhuangBanId=GlobalConfig.ins("ZhuangBanId"));var i=this.zhuangBanId[t];!i||i.pos!=DressType.ARM&&i.pos!=DressType.ROLE||LegendModel.ins().SendDress(e,null);var o=new Sproto.cs_dress_dress_request;o.roleIndex=e,o.id=t,this.Rpc(C2sProtocol.cs_dress_dress,o,this.doDressUserRes,this)},t.prototype.doDressUserRes=function(e){if(this.parserDress(e),GameGlobal.MessageCenter.dispatch(MessageDef.DRESS_INFO),UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101657),this.isActivat){this.isActivat=!1;var t=GlobalConfig.ins("ZhuangBanId")[e.dressId];ViewManager.ins().open(MainNewWin,ResAnimType.TYPE4,e.roleIndex,[null,t.name,4])}},t.prototype.sendUnDressUserReq=function(e,t){var i=new Sproto.cs_dress_undress_request;i.roleIndex=e,i.id=t,this.Rpc(C2sProtocol.cs_dress_undress,i,this.doUnDressUserRes,this)},t.prototype.doUnDressUserRes=function(e){this.parserDress(e),GameGlobal.MessageCenter.dispatch(MessageDef.DRESS_UN_INFO,e.roleIndex,e.posIndex),UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101658)},t.prototype.doDressTimeEnd=function(e){this.parserDel(e.dressId),GameGlobal.MessageCenter.dispatch(MessageDef.DRESS_INFO)},t.prototype.sendTiShengReq=function(e){var t=new Sproto.cs_dress_upgrade_request;t.id=e,this.Rpc(C2sProtocol.cs_dress_upgrade,t,this.doTiShengRes,this)},t.prototype.doTiShengRes=function(e){this.parserUpdateAct(e.timeInfo),GameGlobal.MessageCenter.dispatch(MessageDef.DRESS_INFO)},t.prototype.sendXuFeiReq=function(e){var t=new Sproto.cs_dress_continue_request;t.id=e,this.Rpc(C2sProtocol.cs_dress_continue,t,this.doXuFeiRes,this)},t.prototype.doXuFeiRes=function(e){this.parserUpdateAct(e.timeInfo),UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101659),GameGlobal.MessageCenter.dispatch(MessageDef.DRESS_INFO)},t.prototype.parser=function(e){var t=e.timeInfo.length;this.timeInfo=[];for(var i=0;t>i;i++){var o=new DressTimeInfo,s=e.timeInfo[i];
o.dressId=s.dressId,o.invalidtime=s.invalidtime,o.dressLevel=s.dressLevel,o.dressExp=s.dressExp,this.timeInfo.push(o)}this.posInfo=[];for(var n=e.posInfo.length,i=0;n>i;i++){for(var r=new DressPosInfo,a=0;5>a;a++)r.posAry[a]=e.posInfo[i].posArray[a];this.posInfo.push(r)}},t.prototype.parserAct=function(e){var t=e.timeInfo,i=new DressTimeInfo;i.dressId=t.dressId,i.invalidtime=t.invalidtime,i.dressLevel=t.dressLevel,i.dressExp=t.dressExp,this.timeInfo.push(i)},t.prototype.parserUpdateAct=function(e){var t=new DressTimeInfo;t.dressId=e.dressId,t.invalidtime=e.invalidtime,t.dressLevel=e.dressLevel,t.dressExp=e.dressExp;for(var i=this.timeInfo.length,o=0;i>o;o++)if(this.timeInfo[o].dressId==t.dressId){this.timeInfo[o]=t;break}},t.prototype.parserDress=function(e){var t=e.roleIndex,i=this.posInfo[t],o=e.posIndex,s=e.dressId;i&&(i.posAry[o-1]=s),GameGlobal.rolesModel[t].zhuangbei[o-1]=s,1==o||2==o?GameGlobal.MessageCenter.dispatch(MessageDef.CHANGE_EQUIP):GameGlobal.MessageCenter.dispatch(MessageDef.CHANGE_WING);var n=EntityManager.ins().getEntityByHandle(GameGlobal.rolesModel[t].handle);n&&n.updateModel(),5==o&&s>0?(i.posAry[0]>0&&this.sendUnDressUserReq(t,1),i.posAry[1]>0&&this.sendUnDressUserReq(t,2)):(1==o||2==o)&&s>0&&i.posAry[4]>0&&this.sendUnDressUserReq(t,5)},t.prototype.parserDel=function(e){var t=0,i=this.timeInfo.length,o=this.posInfo.length;for(t=0;i>t;t++){var s=this.timeInfo[t];if(s.dressId==e){this.timeInfo.splice(t,1);break}}for(t=0;o>t;t++)for(var n=this.posInfo[t],r=0;3>r;r++)if(n.posAry[r]==e){n.posAry[r]=0,GameGlobal.rolesModel[t].zhuangbei[r]=0,0==r||1==r?GameGlobal.MessageCenter.dispatch(MessageDef.CHANGE_EQUIP):GameGlobal.MessageCenter.dispatch(MessageDef.CHANGE_WING);var a=EntityManager.ins().getEntityByHandle(GameGlobal.rolesModel[t].handle);a&&a.updateModel();break}},t.prototype.getModelPosId=function(e){return this.posInfo[e]||new DressPosInfo},t.prototype.redPoint=function(){return this.careerRedPoint()},t.prototype.careerRedPoint=function(){for(var e=!1,t=GameGlobal.rolesModel.length,i=0;t>i;i++){var o=GameGlobal.rolesModel[i].job,s=this.getinfoByCareer(o);s.forEach(function(t){var i=t.cost.itemId,o=t.cost.num;UserBag.ins().getBagGoodsCountById(0,i)>=o&&(e=3==t.pos&&GameGlobal.actorModel.level<=16?!1:!0)})}return e},t.prototype.canDress=function(e,t,i){if(void 0===i&&(i=0),t==DressType.WING&&GameGlobal.actorModel.level<=16)return!1;var o=this.getinfoByCareer(e);for(var s in o)if(o[s].pos==t){var n=o[s].cost.itemId,r=o[s].cost.num,a=this.timeInfo[i];if(a){if(a.dressId==o[s].id&&5==a.dressLevel)return!1;if(UserBag.ins().getBagGoodsCountById(0,n)>=r)return!0}else if(UserBag.ins().getBagGoodsCountById(0,n)>=r)return!0}return!1},t.prototype.posRedPoint=function(e){var t=[!1,!1,!1],i=this.getinfoByCareer(e);return i.forEach(function(e){var i=e.cost.itemId,o=e.cost.num;UserBag.ins().getBagGoodsCountById(0,i)>=o&&(3==e.pos&&GameGlobal.actorModel.level<=16?t[e.pos-1]=!1:t[e.pos-1]=!0)}),t},t.prototype.getinfoByCareer=function(e){var t=[],i=SubRoles.ins().subRolesLen;null==this.zhuangBanId&&(this.zhuangBanId=GlobalConfig.ins("ZhuangBanId"));for(var o in this.zhuangBanId){var s=0;if(this.zhuangBanId[o].roletype==e){for(var n=this.timeInfo.length,r=0;n>r;r++)this.timeInfo[r].dressId==this.zhuangBanId[o].id&&5==this.timeInfo[r].dressLevel&&s++;i>s&&t.push(this.zhuangBanId[o])}}return t},t.prototype.getinfoById=function(e){for(var t in this.timeInfo)if(this.timeInfo[t].dressId==e)return this.timeInfo[t];return null},t.prototype.GetDressIDByRole=function(e,t){var i=this.posInfo[e];return i?i.posAry[t]:0},t}(BaseSystem);__reflect(DressModel.prototype,"DressModel");var DressTimeInfo=function(){function e(){}return e}();__reflect(DressTimeInfo.prototype,"DressTimeInfo");var DressPosInfo=function(){function e(){this.posAry=[]}return e}();__reflect(DressPosInfo.prototype,"DressPosInfo");var DressType;!function(e){e[e.ROLE=1]="ROLE",e[e.ARM=2]="ARM",e[e.WING=3]="WING",e[e.MOUNT=4]="MOUNT",e[e.TaoZhuang=5]="TaoZhuang"}(DressType||(DressType={}));var DressItemInfo=function(){function e(){this.isDress=!1,this.isUser=!1,this.isTitle=!1,this.weight=0}return e}();__reflect(DressItemInfo.prototype,"DressItemInfo");var DressModelRedPoint=function(e){function t(){var t=e.call(this)||this;return t.m_Data=!1,t}return __extends(t,e),t.prototype.GetMessageDef=function(){return[MessageDef.CHANGE_ITEM,MessageDef.ADD_ITEM,MessageDef.DELETE_ITEM]},t.prototype.DoUpdate=function(e){this._DoCheck()},t.prototype._DoCheck=function(){this.m_Data=!1,null==this.zhuangBanId&&(this.zhuangBanId=GlobalConfig.ins("ZhuangBanId"));for(var e in this.zhuangBanId){var t=this.zhuangBanId[e];if(this.m_Data=UserBag.ins().getBagGoodsCountById(0,t.cost.itemId)>=t.cost.num,this.m_Data)break}},t.prototype.IsRed=function(){for(var e=GameGlobal.rolesModel.length,t=0;e>t;t++)for(var i=1;3>=i;i++){var o=GameGlobal.dressmodel.canDress(GameGlobal.rolesModel[t].job,i,i-1);if(o)return!0}return!1},t}(IRedPoint);__reflect(DressModelRedPoint.prototype,"DressModelRedPoint"),window.DressModel=DressModel,window.DressTimeInfo=DressTimeInfo,window.DressPosInfo=DressPosInfo,window.DressItemInfo=DressItemInfo,window.DressModelRedPoint=DressModelRedPoint;var EquipsData=function(){function e(){this.item=new ItemData,this.goditem=new ItemData}return e.prototype.parser=function(e){this.strengthen=e.strengthen,this.star=e.star,this.gem=e.gem,this.item.parser(e.item),this.zhuling=e.zhuling,this.tupo=e.tupo,this.bless=e.bless,this.num2=e.num2,this.goditem.parser(e.goditem),this.blessexp=e.blessexp,this.blessstar=e.blessstar,this.blesslv=e.blesslv},e.Create=function(t){var i=new e;return i.strengthen=0,i.star=0,i.gem=0,i.zhuling=0,i.tupo=0,i.bless=0,i.num2=0,i.item.configID=t,i.item.count=1,i.goditem.configID=0,i.goditem.count=1,i.blessexp=0,i.blessstar=0,i.blesslv=0,i},e}();__reflect(EquipsData.prototype,"EquipsData"),window.EquipsData=EquipsData;var JingMaiData=function(){function e(){this.level=0,this.stage=0}return e.prototype.parser=function(e){null!=e&&(this.level=e.level,this.stage=e.stage)},e}();__reflect(JingMaiData.prototype,"JingMaiData"),window.JingMaiData=JingMaiData;var RoleAddAttrPointData=function(){function e(){this.roldid=0,this.point=0,this.points=[],this.power=0}return e.prototype.parse=function(e){e&&(this.roldid=e.roldid,this.point=e.point,this.points=e.points,this.power=e.power)},e}();__reflect(RoleAddAttrPointData.prototype,"RoleAddAttrPointData"),window.RoleAddAttrPointData=RoleAddAttrPointData;var RoleAddAttrPointModel=function(e){function t(){var t=e.call(this)||this;return t.addPointList=[],t.regNetMsg(S2cProtocol.sc_zs_point_info,t.sc_zs_point_info),t}return __extends(t,e),Object.defineProperty(t.prototype,"allLastPoint",{get:function(){var e=0,t=0,i=ViewManager.ins().getView(RoleAddAttrPointWin);if(i&&i instanceof RoleAddAttrPointWin){var o=i.roleAddAttrPointPanel;o&&(e=o.addItem0.data.point,t+=o.addItem0.num,t+=o.addItem1.num,t+=o.addItem2.num,t+=o.addItem3.num)}return e-t},enumerable:!0,configurable:!0}),t.ins=function(){return e.ins.call(this)},t.prototype.cs_zs_point_req=function(){this.Rpc(C2sProtocol.cs_zs_point_req,new Sproto.cs_zs_point_req_request)},t.prototype.sc_zs_point_info=function(e){null==this.addPointList[e.roldid]&&(this.addPointList[e.roldid]=new RoleAddAttrPointData),this.addPointList[e.roldid].parse(e),GameGlobal.MessageCenter.dispatch(MessageDef.ROLE_ADD_ATTR_POINT_INFO)},t.prototype.cs_add_zs_point=function(e,t){var i=new Sproto.cs_add_zs_point_request;i.roleid=e,i.value=t,this.Rpc(C2sProtocol.cs_add_zs_point,i)},t.prototype.cs_zs_point_clear=function(e){var t=new Sproto.cs_zs_point_clear_request;t.roldid=e,this.Rpc(C2sProtocol.cs_zs_point_clear,t)},t.prototype.getAddPointCount=function(e){var t=0,i=this.addPointList[e];if(i){var o=i.points;o.forEach(function(e){t+=e})}else this.cs_zs_point_req();return t},t.prototype.getAddAttrPointConfig=function(e,t){var i=GlobalConfig.zhuanShengValuePointConfig;return i[e][t]},t}(BaseSystem);__reflect(RoleAddAttrPointModel.prototype,"RoleAddAttrPointModel"),window.RoleAddAttrPointModel=RoleAddAttrPointModel;var WingsData=function(){function e(){this.equipdata=[],this.showLv=1}return e.prototype.getEquipByIndex=function(e){return this.equipdata[e]},e.prototype.setEquipByIndex=function(e,t){this.equipdata[e]=t},Object.defineProperty(e.prototype,"equipsLen",{get:function(){return this.equipdata.length},enumerable:!0,configurable:!0}),e.prototype.parser=function(e){null!=e&&(this.parserUpgrade(e),this.parserOpenStatus(e),e.equipDatas&&this.parserWingEqupip(e.equipDatas))},e.prototype.parserUpgrade=function(e){this.lv=e.lv,this.showLv=e.lv,this.parserBoost(e)},e.prototype.parserBoost=function(e){this.star=e.star,this.exp=e.exp},e.prototype.parserOpenStatus=function(e){this.openStatus=e.openStatus},e.prototype.parserWingEqupip=function(e){this.equipdata=[];for(var t,i=0;4>i;i++)t=new ItemData,t.parser(e[i]),this.equipdata.push(t)},e}();__reflect(WingsData.prototype,"WingsData"),window.WingsData=WingsData;var DressItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="DressItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;if(t.isTitle)return void this._updataTitle();GameGlobal.dressmodel.timeInfo;if(null==this.zhuangBanId&&(this.zhuangBanId=GlobalConfig.ins("ZhuangBanId")),null!=t){var i=this.zhuangBanId[t.zhuanban.id],o=i?i.cost.itemId:"";if(o=GlobalConfig.itemConfig[o]?GlobalConfig.itemConfig[o].icon:o,this.redPoint0.visible=!1,t.isUser?(this.timelabel.visible=!0,this.imgIcon.source=ResDataPath.GetItemFullName(o)):(this.timelabel.visible=!1,this.imgIcon.source=ResDataPath.GetItemFullName(o)),this.setRedVisible(t),this.imageName.text=t.zhuanban.name,t.isDress?this.huanhuaImage.visible=!0:this.huanhuaImage.visible=!1,0==t.timer){this.timelabel.textFlow=(new egret.HtmlTextParser).parser("<font color='#00ff00'>"+GlobalConfig.jifengTiaoyueLg.st100627+"</font>"),this.levellabel.visible=!0;var s=GameGlobal.dressmodel.getinfoById(t.zhuanban.id);this.levellabel.text=s.dressLevel+GlobalConfig.jifengTiaoyueLg.st100093}else t.timer>0?(this.timelabel.text=this.updateTimer(t.timer),this.levellabel.visible=!1):(this.timelabel.visible=!1,this.levellabel.visible=!1);this.UpdateSelect()}},t.prototype._updataTitle=function(){var e=this,t=this.data;e.timelabel.visible=t.timer>=0,e.timelabel.text=0==t.timer?GlobalConfig.jifengTiaoyueLg.st100627:this.updateTimer(t.timer),e.imageName.text=t.zhuanban.name,e.huanhuaImage.visible=t.isDress,e.imgIcon.source=ResDataPath.GetItemFullName(t.zhuanban.iconID),this.UpdateSelect()},t.prototype.setRedVisible=function(e){var t=e.zhuanban.cost.itemId,i=e.zhuanban.cost.num,o=GameGlobal.dressmodel.getinfoById(e.zhuanban.id);o?UserBag.ins().getBagGoodsCountById(0,t)>=i&&o.dressLevel<5?this.redPoint0.visible=!0:this.redPoint0.visible=!1:UserBag.ins().getBagGoodsCountById(0,t)>=i?this.redPoint0.visible=!0:this.redPoint0.visible=!1},t.prototype.UpdateSelect=function(){var e=this.data;if(null!=e&&null!=e.context){var t=null;switch(e.zhuanban.pos){case DressType.ROLE:t=e.context.mDressBody;break;case DressType.ARM:t=e.context.mDressWeapon;break;case DressType.WING:t=e.context.mDressWing;break;case DressType.MOUNT:t=e.context.mDressMount;break;case DressType.TaoZhuang:t=e.context.mDressTao}e.isTitle&&(t=e.context.mDressTitle),this.selectImage.visible=t==(e.zhuanban.id||e.zhuanban.Id)}},t.prototype.updateTimer=function(e){var t="",i=e-GameServer.serverTime;return t=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100628,[i/24/3600>>0,i/3600%24>>0,i/60%60>>0])},t}(eui.ItemRenderer);__reflect(DressItemRenderer.prototype,"DressItemRenderer"),window.DressItemRenderer=DressItemRenderer;var DressWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100611,t.totalPowerNum=0,t.id=0,t.isItemEnough=!1,t.lastLv=0,t.mDressBody=0,t.mDressWeapon=0,t.mDressWing=0,t.mDressMount=0,t.mDressTao=0,t.mDressTitle=0,t.selectType=!1,t.m_PreRole=null,t.m_PreIndex=-1,t.mWindowHelpId=9,t.skinName="DressSkin",t.dressOffBtn.label=GlobalConfig.jifengTiaoyueLg.st100802,t.roleShowPanel.m_ElementImg.visible=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.list.itemRenderer=DressItemRenderer,this.arry=new eui.ArrayCollection,this.list.dataProvider=this.arry},t.prototype.initUI=function(){this.expBar.slideDuration=0,this.commonWindowBg.SetTabDatas(new eui.ArrayCollection(GlobalConfig.ins("ZhuangBanConfig").zhuangbanpos)),this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100629},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.list.selectedIndex=-1,DressModel.ins().sendDressInfoReq(),GameGlobal.MessageCenter.addListener(MessageDef.DRESS_INFO,this.UpdateContent,this),GameGlobal.MessageCenter.addListener(MessageDef.DRESS_UN_INFO,this.UpdateUnDress,this),GameGlobal.MessageCenter.addListener(MessageDef.TITLE_SHOW,this.updateSetTitle,this),GameGlobal.MessageCenter.addListener(MessageDef.DRESS_JIHUORES,this.onJihuo,this),this.itemName.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.dressBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.dressOnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.dressOffBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.commonWindowBg.OnAdded(this,e[1],e[0]),null==Title.ins().list&&Title.ins().sendGetList()},t.prototype.close=function(){GameGlobal.MessageCenter.removeListener(MessageDef.DRESS_INFO,this.UpdateContent,this),GameGlobal.MessageCenter.removeListener(MessageDef.DRESS_JIHUORES,this.onJihuo,this),GameGlobal.MessageCenter.removeListener(MessageDef.DRESS_UN_INFO,this.UpdateUnDress,this),GameGlobal.MessageCenter.removeListener(MessageDef.TITLE_SHOW,this.updateSetTitle,this),this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.itemName.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.dressBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.dressOnBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.dressOffBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.roleShowPanel.release(),this.lastLv=0,this.mc&&(DisplayUtils.dispose(this.mc),this.mc=null)},t.prototype.initMc=function(){this.mc||(this.mc=new MovieClip,this.mc.x=244,this.mc.y=345)},t.prototype.onChange=function(e){this.dress=e.item;var t,i=this.dress.zhuanban.id||this.dress.zhuanban.Id;switch(this.dress.zhuanban.pos){case 1:t="mDressBody",this.mDressTao=0;break;case 2:t="mDressWeapon",this.mDressTao=0;break;case 3:t="mDressWing",this.mDressTao=0;break;case 4:t="mDressMount",this.mDressTao=0;break;case 5:this.mDressBody=0,this.mDressWeapon=0,t="mDressTao"}this.dress.isTitle&&(t="mDressTitle"),i==this[t]?(this.dress=null,this[t]=0):this[t]=i;for(var o=0;o<this.list.numChildren;++o)this.list.getChildAt(o).UpdateSelect();this.selectType=!0,this.dress&&this.dress.isTitle?this._updataTitleInfo():this.onInfoUpdate()},t.prototype._updataTitleInfo=function(){this.dress?(this.selectGroup.visible=!0,this.unSelectGroup.visible=!1,this.m_RightGroup.visible=!1,this.dressBtn.visible=!1,this.dressOffBtn.visible=this.dress.isUser,this.dressOnBtn.visible=!1,this.dressOffBtn.horizontalCenter=0,this.dressOffBtn.label=this.dress.zhuanban.Id==Title.ins().showID?GlobalConfig.jifengTiaoyueLg.st100612:GlobalConfig.jifengTiaoyueLg.st100613,this.m_LeftGroup.horizontalCenter=40,this.attrLabel.text=AttributeData.getAttStr(AttributeData.transformAttr(this.dress.zhuanban.attrs),0,1,":"),this.attrPower.text=GlobalConfig.jifengTiaoyueLg.st100306+":"+GameGlobal.getAttrPower(AttributeData.transformAttr(this.dress.zhuanban.attrs)),this.dressName.text=this.dress.isUser?GlobalConfig.jifengTiaoyueLg.st100614:GlobalConfig.jifengTiaoyueLg.st100615+"："+this.dress.zhuanban.condition,this.onupdateEquip(!0)):(this.selectGroup.visible=!1,this.unSelectGroup.visible=!0,this.dressOffBtn.visible=!1,this.dressOnBtn.visible=!1,this.dressBtn.visible=!1)},t.prototype.careerRedPoint=function(){for(var e=GameGlobal.rolesModel[this.m_RoleSelectPanel.getCurRole()].job,t=GameGlobal.dressmodel.posRedPoint(e),i=0;5>i;i++)this.commonWindowBg.ShowTalRedPoint(i,t[i])},t.prototype.UpdateUnDress=function(e,t){if(this.m_RoleSelectPanel.getCurRole()==e){switch(t){case DressType.ROLE:this.mDressBody=0;break;case DressType.ARM:this.mDressWeapon=0;break;case DressType.WING:this.mDressWing=0;break;case DressType.MOUNT:this.mDressMount=0;break;case DressType.TaoZhuang:this.mDressBody=0,this.mDressWeapon=0,this.mDressTao=0}this.UpdateContent()}},t.prototype.UpdateContent=function(){var e=this.m_RoleSelectPanel.getCurRole();null!=this.m_PreRole&&e!=this.m_PreRole&&(this.list.selectedIndex=-1,this.lastLv=0,this.mDressBody=0,this.mDressWeapon=0,this.mDressWing=0,this.mDressMount=0,this.mDressTao=0,this.mDressTitle=0),null!=this.m_PreIndex&&this.selectedIndex!=this.m_PreIndex&&(this.lastLv=0),this.dress=null;var t=GameGlobal.rolesModel[e].zhuangbei;this.mDressBody=this.mDressBody||t[DressType.ROLE-1]||0,this.mDressWeapon=this.mDressWeapon||t[DressType.ARM-1]||0,this.mDressWing=this.mDressWing||t[DressType.WING-1]||0,this.mDressMount=this.mDressMount||t[DressType.MOUNT-1]||0,this.mDressTao=this.mDressTao||t[DressType.TaoZhuang-1]||0,this.mDressTitle=this.mDressTitle||SubRoles.ins().getSubRoleByIndex(0).title||0,this.m_PreRole=e,this.m_PreIndex=this.selectedIndex;var i=GameGlobal.dressmodel;this.zhuangBanId=GlobalConfig.zhuangBanId;var o=this.selectedIndex;if(6==o)return this._updateTitle(),void(0==this.commonWindowBg.roleSelectPanel.visible);1==this.commonWindowBg.roleSelectPanel.visible;var s=[];for(var n in this.zhuangBanId)if(GameGlobal.rolesModel[e].job==this.zhuangBanId[n].roletype&&o==this.zhuangBanId[n].pos){var r=new DressItemInfo;r.weight=0,r.context=this,r.zhuanban=this.zhuangBanId[n],r.isTitle=!1;for(var a=i.timeInfo.length,l=0;a>l;l++)r.zhuanban.id==i.timeInfo[l].dressId&&(r.isUser=!0,r.timer=i.timeInfo[l].invalidtime,r.weight+=100);r.zhuanban.id==i.GetDressIDByRole(e,o-1)&&(r.isDress=!0,r.weight+=1e3),r.weight+=this.setRedVisible(r),s.push(r)}for(var h=this._GetCurDressId(),c=0,u=s;c<u.length;c++){var d=u[c];if(h==d.zhuanban.id){this.dress=d;break}}s.sort(this.sorWeight),this.list.dataProvider=this.arry,this.arry.removeAll(),this.arry.replaceAll(s),this.arry.refresh(),this.onInfoUpdate(),this.redPoint(),this.careerRedPoint()},t.prototype.setRedVisible=function(e){var t=e.zhuanban.cost.itemId,i=e.zhuanban.cost.num,o=GameGlobal.dressmodel.getinfoById(e.zhuanban.id);if(o){if(UserBag.ins().getBagGoodsCountById(0,t)>=i&&o.dressLevel<5)return 10}else if(UserBag.ins().getBagGoodsCountById(0,t)>=i)return 10;return 0},t.prototype.sorWeight=function(e,t){return t.weight-e.weight},t.prototype._updateTitle=function(){this.list.dataProvider=Title.ins().dressTitleList;for(var e=0,t=this.arry.source.length;t>e;e++){var i=this.arry.source[e];if(this.mDressTitle==i.zhuanban.Id){this.dress=i;break}}this.onupdateEquip(!0)},t.prototype.updateSetTitle=function(e,t,i){this.mDressTitle=t;var o=t?GlobalConfig.jifengTiaoyueLg.st100616:GlobalConfig.jifengTiaoyueLg.st100617;UserTips.ins().showTips("|C:0xf87372&T:"+o),this.onupdateEquip(!0),this._updataTitleInfo()},t.prototype._GetCurDressId=function(){switch(this.selectedIndex){case DressType.ROLE:return this.mDressBody;case DressType.ARM:return this.mDressWeapon;case DressType.WING:return this.mDressWing;case DressType.MOUNT:return this.mDressMount;case DressType.TaoZhuang:return this.mDressTao}return 0},t.prototype.redPoint=function(){for(var e=GameGlobal.rolesModel.length,t=0;e>t;t++){var i=GameGlobal.dressmodel.canDress(GameGlobal.rolesModel[t].job,this.selectedIndex,t);this.m_RoleSelectPanel.showRedPoint(t,i)}},Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this.commonWindowBg.GetSelectedIndex()+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dress",{get:function(){return this._dress},set:function(e){this._dress=e},enumerable:!0,configurable:!0}),t.prototype.onInfoUpdate=function(){if(this.updatePower(),this.dress){var e=GlobalConfig.ins("ZhuangBanShengJi")[this.dress.zhuanban.id];this.currentInfo=GameGlobal.dressmodel.getinfoById(this.dress.zhuanban.id);var t=void 0;this.currentInfo&&e&&(t=e[this.currentInfo.dressLevel]),t?(this.m_RightGroup.visible=!0,this.m_LeftGroup.horizontalCenter=-80):(this.m_RightGroup.visible=!1,this.m_LeftGroup.horizontalCenter=40),this.expMaxImg.visible=!1,this.expMaxTip.visible=!1,this.selectGroup.visible=!0,this.unSelectGroup.visible=!1,this.itemName.visible=!1,this.namelabel.visible=!0,this.dressBtn.visible=!0,this.attrLabel.text=AttributeData.getAttStr(AttributeData.transformAttr(this.dress.zhuanban.attr),0,1,":"),this.attrPower.text=GlobalConfig.jifengTiaoyueLg.st100306+":"+GameGlobal.getAttrPower(AttributeData.transformAttr(this.dress.zhuanban.attr)),t&&(this.attrLabel0.text=AttributeData.getAttStr(AttributeData.transformAttr(t.attr),0,1,":"),this.attrPower0.text=GlobalConfig.jifengTiaoyueLg.st100306+":"+GameGlobal.getAttrPower(AttributeData.transformAttr(t.attr))),this.dressName.text=GlobalConfig.jifengTiaoyueLg.st100618+"："+this.dress.zhuanban.name+"×1",this.id=this.dress.zhuanban.cost.itemId;var i=0,o=0;this.currentInfo&&e&&(this.expLabel.text=this.currentInfo.dressLevel+GlobalConfig.jifengTiaoyueLg.st100093,this.currShengjiConfig=e[this.currentInfo.dressLevel],this.shengjiConfig=e[this.currentInfo.dressLevel-1],this.lastLv==this.currentInfo.dressLevel||0==this.lastLv||this.selectType||this.playEff(),this.lastLv=this.currentInfo.dressLevel),this.selectType=!1,this.dress.isUser?(this.dressOnBtn.visible=!this.dress.isDress,this.dressOffBtn.visible=this.dress.isDress,0==this.dress.timer?(this.dressBtn.label=GlobalConfig.jifengTiaoyueLg.st100596,this.setExpBarVis(!0),this.expBarChange(),this.shengjiConfig&&this.currentInfo.dressLevel>1?(this.attrLabel.textFlow=(new egret.HtmlTextParser).parser(AttributeData.getAttStr(AttributeData.AttrStringAddition2(this.dress.zhuanban.attr,e,this.currentInfo.dressLevel),0,1,":",!1,"#23C42A")),this.attrPower.text=GlobalConfig.jifengTiaoyueLg.st100306+":"+GameGlobal.getAttrPower(AttributeData.AttrStringAddition2(this.dress.zhuanban.attr,e,this.currentInfo.dressLevel)),t&&(this.attrLabel0.textFlow=(new egret.HtmlTextParser).parser(AttributeData.getAttStr(AttributeData.AttrStringAddition2(this.dress.zhuanban.attr,e,this.currentInfo.dressLevel+1),0,1,":",!1,"#23C42A")),this.attrPower0.text=GlobalConfig.jifengTiaoyueLg.st100306+":"+GameGlobal.getAttrPower(AttributeData.AttrStringAddition2(this.dress.zhuanban.attr,e,this.currentInfo.dressLevel+1))),i=this.shengjiConfig.cost.num,o=this.shengjiConfig.cost.itemId):this.shengjiConfig?(this.attrLabel.text=AttributeData.getAttStr(AttributeData.transformAttr(this.dress.zhuanban.attr),0,1,":"),this.attrPower.text=GlobalConfig.jifengTiaoyueLg.st100306+":"+GameGlobal.getAttrPower(AttributeData.transformAttr(this.dress.zhuanban.attr)),t&&(this.attrLabel0.text=AttributeData.getAttStr(AttributeData.AttrStringAddition2(this.dress.zhuanban.attr,e,this.currentInfo.dressLevel+1),0,1,":"),this.attrPower0.text=GlobalConfig.jifengTiaoyueLg.st100306+":"+GameGlobal.getAttrPower(AttributeData.AttrStringAddition2(this.dress.zhuanban.attr,e,this.currentInfo.dressLevel+1))),i=this.shengjiConfig.cost.num,o=this.shengjiConfig.cost.itemId):(this.attrLabel.text=AttributeData.getAttStr(AttributeData.transformAttr(this.dress.zhuanban.attr),0,1,":"),this.attrPower.text=GlobalConfig.jifengTiaoyueLg.st100306+":"+GameGlobal.getAttrPower(AttributeData.transformAttr(this.dress.zhuanban.attr)),t&&(this.attrLabel0.text=AttributeData.getAttStr(AttributeData.AttrStringAddition2(this.dress.zhuanban.attr,e,this.currentInfo.dressLevel+1),0,1,":"),this.attrPower0.text=GlobalConfig.jifengTiaoyueLg.st100306+":"+GameGlobal.getAttrPower(AttributeData.AttrStringAddition2(this.dress.zhuanban.attr,e,this.currentInfo.dressLevel+1))))):(this.dressBtn.label=GlobalConfig.jifengTiaoyueLg.st100619,this.setExpBarVis(!1),this.attrLabel.text=AttributeData.getAttStr(AttributeData.transformAttr(this.dress.zhuanban.attr),0,1,":"),this.attrPower.text=GlobalConfig.jifengTiaoyueLg.st100306+":"+GameGlobal.getAttrPower(AttributeData.transformAttr(this.dress.zhuanban.attr)),t&&(this.attrLabel0.text=AttributeData.getAttStr(AttributeData.transformAttr(this.dress.zhuanban.attr),0,1,":"),this.attrPower0.text=GlobalConfig.jifengTiaoyueLg.st100306+":"+GameGlobal.getAttrPower(AttributeData.transformAttr(this.dress.zhuanban.attr))),i=this.dress.zhuanban.cost.num,o=this.id)):(this.dressBtn.label=GlobalConfig.jifengTiaoyueLg.st100212,this.dressOnBtn.visible=!1,this.dressOffBtn.visible=!1,this.setExpBarVis(!1),this.attrLabel.text=AttributeData.getAttStr(AttributeData.transformAttr(this.dress.zhuanban.attr),0,1,":"),this.attrPower.text=GlobalConfig.jifengTiaoyueLg.st100306+":"+GameGlobal.getAttrPower(AttributeData.transformAttr(this.dress.zhuanban.attr)),t&&(this.attrLabel0.text=AttributeData.getAttStr(AttributeData.transformAttr(this.dress.zhuanban.attr),0,1,":"),this.attrPower0.text=GlobalConfig.jifengTiaoyueLg.st100306+":"+GameGlobal.getAttrPower(AttributeData.transformAttr(this.dress.zhuanban.attr))),i=this.dress.zhuanban.cost.num,o=this.id),this.dressBtn.visible?(this.dressOffBtn.horizontalCenter=-81.5,this.dressOnBtn.horizontalCenter=-81.5):(this.dressOffBtn.horizontalCenter=0,this.dressOnBtn.horizontalCenter=0),this.isItemEnough=UserBag.ins().getBagGoodsCountById(0,this.id)<i,this.setItemText(this.dress.zhuanban.imageLink)}else this.selectGroup.visible=!1,this.unSelectGroup.visible=!0,this.dressOffBtn.visible=!1,this.dressOnBtn.visible=!1,this.dressBtn.visible=!1;this.onupdateEquip(!0),this.dressOffBtn.visible||this.dressOnBtn.visible?this.dressBtn.x=246:this.dressBtn.x=175},t.prototype.setItemText=function(e){},t.prototype.setExpBarVis=function(e){this.expBar.visible=e,this.expBarBg.visible=e,this.expLabel.visible=e},t.prototype.updatePower=function(){var e=GameGlobal.dressmodel.timeInfo,t=e.length;this.totalPowerNum=0;for(var i=0;t>i;i++)if(GameGlobal.rolesModel[this.m_RoleSelectPanel.getCurRole()].job==this.getZhuangbanById(e[i].dressId).roletype){var o=GlobalConfig.ins("ZhuangBanShengJi")[e[i].dressId],s=this.getZhuangbanById(e[i].dressId).attr;this.totalPowerNum+=GameGlobal.getAttrPower(AttributeData.AttrStringAddition2(s,o,e[i].dressLevel))}this.powerLabel.text=this.totalPowerNum},t.prototype.onupdateEquip=function(e){void 0===e&&(e=!1);var t=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole());(this.mDressBody>0||this.mDressWeapon>0||this.mDressTao>0)&&(t.legendDress=null),this.roleShowPanel.creatAnim(t),this.setWing(this.mDressWing),this.setEquip(this.mDressBody,this.mDressWeapon,this.mDressMount,this.mDressTitle,this.mDressTao)},t.prototype.setWing=function(e){if(e>0)this.roleShowPanel.setCharRoleWing(e,1);else{var t=GameGlobal.rolesModel[this.m_RoleSelectPanel.getCurRole()].wingsData;t.openStatus?this.roleShowPanel.setCharRoleWing(0,t.lv):this.roleShowPanel.setCharRoleWing(0,null)}},t.prototype.setEquip=function(e,t,i,o,s){this.roleShowPanel.setCharRoleBody(e),this.roleShowPanel.setCharRoleWeapon(t),this.roleShowPanel.setCharRoleMount(i),this.roleShowPanel.setCharRoleTitle(o),this.roleShowPanel.setCharRoleTao(s)},t.prototype.getZhuangbanById=function(e){null==this.zhuangBanId&&this.zhuangBanId==GlobalConfig.ins("ZhuangBanId");for(var t in this.zhuangBanId)if(this.zhuangBanId[t].id==e)return this.zhuangBanId[t];return null},t.prototype.onJihuo=function(){this.dress&&this.dress.zhuanban&&DressModel.ins().sendDressUserReq(this.m_RoleSelectPanel.getCurRole(),this.dress.zhuanban.id)},t.prototype.onClick=function(e){switch(null==this.wingCommonConfig&&(this.wingCommonConfig=GlobalConfig.ins("WingCommonConfig")),e.target){case this.itemName:if(ErrorLog.Assert(this.id,"DressWin   this.id :"+this.id))break;var t=GlobalConfig.itemConfig[this.id];void 0!=t&&t&&void 0!=t.type&&(0==t.type||4==t.type?ViewManager.ins().open(EquipDetailedWin,1,void 0,t.id):ViewManager.ins().open(ItemDetailedWin,0,t.id));break;case this.dressBtn:if(ErrorLog.Assert(this.dress&&this.dress.zhuanban,"DressWin　　"+this.dress+" ++++++ "+this.dress.zhuanban))return;if(GlobalConfig.jifengTiaoyueLg.st100212==this.dressBtn.label){if(3==this.dress.zhuanban.pos&&GameGlobal.actorModel.level<this.wingCommonConfig.openLevel)return void UserTips.ins().showTips("|C:0xf87372&T:"+this.wingCommonConfig.openLevel+GlobalConfig.jifengTiaoyueLg.st100620+"|");this.checkItemAlert(this.dressBtn.label)}else GlobalConfig.jifengTiaoyueLg.st100596==this.dressBtn.label?this.checkItemAlert(this.dressBtn.label):GlobalConfig.jifengTiaoyueLg.st100619==this.dressBtn.label&&this.checkItemAlert(this.dressBtn.label);break;case this.dressOnBtn:DressModel.ins().sendDressUserReq(this.m_RoleSelectPanel.getCurRole(),this.dress.zhuanban.id);break;case this.dressOffBtn:if(this.dress&&this.dress.isTitle){var i=this.dress.zhuanban.Id==Title.ins().showID?0:this.dress.zhuanban.Id;return void Title.ins().setTitle(i)}DressModel.ins().sendUnDressUserReq(this.m_RoleSelectPanel.getCurRole(),this.selectedIndex)}},t.prototype.checkItemAlert=function(e){var t=GlobalConfig.ins("ZhuangBanConfig").zhuangbanpos,i=this.dress.zhuanban,o=Role.getJobNameByJob(i.roletype),s=1;switch(e){case GlobalConfig.jifengTiaoyueLg.st100212:if(this.isItemEnough)return void UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st100621+"|");WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100622,[o+t[i.pos-s],i.name]),function(){DressModel.ins().sendDressActivationReq(i.id)},this);break;case GlobalConfig.jifengTiaoyueLg.st100596:if(this.isItemEnough)return void UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st100625+"|");WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100623,[o+t[i.pos-s],i.name]),function(){DressModel.ins().sendTiShengReq(i.id)},this);break;case GlobalConfig.jifengTiaoyueLg.st100619:if(this.isItemEnough)return void UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st100626+"|");WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100624,[o+t[i.pos-s],i.name]),function(){DressModel.ins().sendXuFeiReq(i.id)},this)}},t.prototype.expBarChange=function(){var e=this,t=this;if(!this.currShengjiConfig)return this.itemName.visible=!1,this.namelabel.visible=!1,this.dressBtn.visible=!1,this.expBar.maximum=1,this.expBar.value=1,this.expMaxImg.visible=!0,void(this.expMaxTip.visible=!0);var i=this.currentInfo.dressExp,o=Number(this.currShengjiConfig.needexp);i>o&&(i=o),this.expBar.maximum=o,this.expBar.value=i,egret.Tween.removeTweens(this.expBar);var s=egret.Tween.get(this.expBar);return this.expBar.maximum!=o?void s.to({value:this.expBar.maximum},1e3).wait(200).call(function(){egret.Tween.removeTweens(e.expBar),t.expBar.maximum=o,t.expBar.value=i,t.expBarChange()},this):void s.to({value:i},1e3)},t.prototype.playEff=function(){var e=this;this.initMc(),this.mc&&(null==this.mc.parent&&this.addChild(this.mc),this.mc.loadUrl(ResDataPath.GetUIEffePath("promoteeff"),!0,1,function(){DisplayUtils.dispose(e.mc),e.mc=null}))},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(DressWin.prototype,"DressWin",["ICommonWindow","ICommonWindowTitle","ICommonWindowRoleSelect"]),window.DressWin=DressWin;var RoleAddAttrPointItem=function(e){function t(){var t=e.call(this)||this;return t.isBEGIN=!1,t.skinName="RoleAddAttrPointItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this),this.subBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this),this.addBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this),this.subBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this),this.addBtn.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this),this.subBtn.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this),this.numLabel.addEventListener(egret.Event.CHANGE,this.onTxtChange,this),this.numLabel.restrict="0-9"
},t.prototype.release=function(){this.numLabel.text="0",this.num=0,this.isBEGIN=!1},t.prototype.setData=function(e,t){e&&(this.config=e),t&&(this.data=t),this.inputOver();for(var i=this.config.value,o=this.data.points[this.config.type-1],s=0,n=0,r="",a="",l="",h="",c=this.m_LabGroup.numChildren,u=0;c>u;u++){var d=this.m_LabGroup.getChildAt(u);d&&d instanceof eui.Label&&(i[u]?(h=AttributeData.getAttrStrByType(i[u][0]),i[u][0]==AttributeType.atMpRecoveEx?(s=i[u][1]*o/100,n=i[u][1]*this.num/100,r=n?StringUtils.addColor(" +"+n.toFixed(4)+"%",Color.Green):"",d.textFlow=TextFlowMaker.generateTextFlow(h+"："+s.toFixed(4)+"%"+r)):(n=i[u][1]*this.num,s=i[u][1]*o,a=StringUtils.isDot(n)?n.toString():n.toFixed(1),l=StringUtils.isDot(s)?s.toString():s.toFixed(1),r=n?StringUtils.addColor(" +"+a,Color.Green):"",d.textFlow=TextFlowMaker.generateTextFlow(h+"："+l+r))):d.text="")}},t.prototype.onEnd=function(){this.isBEGIN=!1},t.prototype.onBegin=function(e){switch(this.isBEGIN=!0,e.currentTarget){case this.addBtn:this.onAddBegin();break;case this.subBtn:this.onSubBegin()}},t.prototype.onAddBegin=function(){if(this.isBEGIN&&(this.data.point<=0&&UserTips.ErrorTip("剩余点数不足"),!(RoleAddAttrPointModel.ins().allLastPoint<=0))){this.num+=1,this.numLabel.text=this.num+"",this.inputOver(),this.setData();var e=ViewManager.ins().getView(RoleAddAttrPointWin);e&&e.roleAddAttrPointPanel&&"推荐加点"==e.roleAddAttrPointPanel.recommendBtn.label&&(e.roleAddAttrPointPanel.recommendBtn.label="取消"),egret.setTimeout(this.onAddBegin,this,200)}},t.prototype.onSubBegin=function(){if(this.isBEGIN){this.num-=1,this.numLabel.text=this.num+"",this.inputOver(),this.setData();var e=ViewManager.ins().getView(RoleAddAttrPointWin);e&&e.roleAddAttrPointPanel&&"推荐加点"==e.roleAddAttrPointPanel.recommendBtn.label&&(e.roleAddAttrPointPanel.recommendBtn.label="取消"),egret.setTimeout(this.onSubBegin,this,500)}},t.prototype.inputOver=function(){this.num=parseInt(this.numLabel.text),(isNaN(this.num)||this.num<0)&&(this.num=0),this.num>this.data.point&&(this.num=this.data.point),this.numLabel.text=this.num+""},t.prototype.onTxtChange=function(){var e=parseInt(this.numLabel.text),t=RoleAddAttrPointModel.ins().allLastPoint+this.num;e>t&&(this.numLabel.text=t+""),this.inputOver(),this.setData();var i=ViewManager.ins().getView(RoleAddAttrPointWin);i&&i.roleAddAttrPointPanel&&"推荐加点"==i.roleAddAttrPointPanel.recommendBtn.label&&(i.roleAddAttrPointPanel.recommendBtn.label="取消")},t}(eui.Component);__reflect(RoleAddAttrPointItem.prototype,"RoleAddAttrPointItem"),window.RoleAddAttrPointItem=RoleAddAttrPointItem;var RoleAddAttrPointPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="RoleAddAttrPointPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100608+"：",this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st100609+"：",this.confirmBtn.label=GlobalConfig.jifengTiaoyueLg.st100040,this.resetBtn.label=GlobalConfig.jifengTiaoyueLg.st100610},t.prototype.open=function(){this.observe(MessageDef.ROLE_ADD_ATTR_POINT_INFO,this.UpdateContent),this.AddClick(this.confirmBtn,this.onClick),this.AddClick(this.resetBtn,this.onClick),this.AddClick(this.recommendBtn,this.onClick),RoleAddAttrPointModel.ins().cs_zs_point_req()},t.prototype.close=function(){this.removeEvents(),this.removeObserve()},t.prototype.onClick=function(e){switch(e.currentTarget){case this.confirmBtn:var t=this.getAddPointNumList().count;if(t>0){var i=this.getAddPointNumList().list;RoleAddAttrPointModel.ins().cs_add_zs_point(this.m_RoleSelectPanel.getCurRole(),i)}else UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st100598);break;case this.resetBtn:var o=RoleAddAttrPointModel.ins().getAddPointCount(this.m_RoleSelectPanel.getCurRole());if(o>0){var s=GlobalConfig.ins("ZhuanShengConfig").resetCost.count;WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100600,[s]),function(){RoleAddAttrPointModel.ins().cs_zs_point_clear(this.m_RoleSelectPanel.getCurRole())},this)}else UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st100599);break;case this.recommendBtn:if(this.recommendBtn.label==GlobalConfig.jifengTiaoyueLg.st100601){var i=this.recommendAddPoint();if(i){this.recommendBtn.label=GlobalConfig.jifengTiaoyueLg.st100602;for(var n=0;4>n;n++)this["addItem"+n].numLabel.text=i[n],this["addItem"+n].setData()}else UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st100603)}else{this.recommendBtn.label=GlobalConfig.jifengTiaoyueLg.st100601;for(var n=0;4>n;n++)this["addItem"+n].release(),this["addItem"+n].setData()}}},t.prototype.UpdateContent=function(){var e=RoleAddAttrPointModel.ins().addPointList;if(!(e.length<=0)){var t=GameLogic.ins().actorModel.level,i=UserZs.ins()?UserZs.ins().lv:0;this.lvlTxt.textFlow=TextFlowMaker.generateTextFlow(GlobalConfig.jifengTiaoyueLg.st100604+"："+StringUtils.addColor((i?i+GlobalConfig.jifengTiaoyueLg.st100067:"")+t+GlobalConfig.jifengTiaoyueLg.st100093,Color.Green)),this.addPointTxt.text=RoleAddAttrPointModel.ins().getAddPointCount(this.m_RoleSelectPanel.getCurRole())+"";var o=GlobalConfig.ins("ZhuanShengConfig").vipValuePoint;this.vipPointTxt.visible=UserVip.ins().lv>=o[0],this.vipPointTxt.text="VIP"+o[0]+","+GlobalConfig.jifengTiaoyueLg.st100607+" +"+o[1]*t,this.vipDec.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100605,[o[0],o[1]]);var s=e[this.m_RoleSelectPanel.getCurRole()];if(s){this.surplusPointTxt.text=s.point+"";for(var n=GlobalConfig.ins("ZhuanShengConfig"),r=n.valuePoint,a=this.m_RoleSelectPanel.getCurRole(),l=SubRoles.ins().getSubRoleByIndex(a),h=ZhuanZhiModel.ins().getZhuanZhiLevel(a),c=0;h>c;c++)r+=n.zzAddPoint[c];this.dec.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100606,[r]),this.totalPower.text=s.power+"",this.recommendBtn.label=GlobalConfig.jifengTiaoyueLg.st100601;for(var l=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()),c=0;4>c;c++){var u=RoleAddAttrPointModel.ins().getAddAttrPointConfig(l.job,c),d=e[this.m_RoleSelectPanel.getCurRole()];this["addItem"+c].release(),this["addItem"+c].setData(u,d)}this.updataRoleRed()}}},t.prototype.getAddPointNumList=function(){for(var e=[],t=0,i=0;4>i;i++){var o=this["addItem"+i].num;e.push(o),t+=o}return{list:e,count:t}},t.prototype.recommendAddPoint=function(){var e=RoleAddAttrPointModel.ins().addPointList[this.m_RoleSelectPanel.getCurRole()],t=e.point;if(0>=t)return null;for(var i=[0,0,0,0];t>0;)for(var o=0;4>o;o++)t>0&&(i[o]=i[o]+1,t--);return i},t.prototype.updataRoleRed=function(){for(var e=0;e<SubRoles.ins().subRolesLen;++e){var t=PlayFun.ins().getFuncRedById(DeblockingType.TYPE_81,e);this.m_RoleSelectPanel.showRedPoint(e,t)}},t}(BaseView);__reflect(RoleAddAttrPointPanel.prototype,"RoleAddAttrPointPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.RoleAddAttrPointPanel=RoleAddAttrPointPanel;var RoleAddAttrPointWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.roleAddAttrPointPanel=new RoleAddAttrPointPanel,this.roleAddAttrPointPanel.name=GlobalConfig.jifengTiaoyueLg.st100597,this.commonWindowBg.AddChildStack(this.roleAddAttrPointPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e&&e[0])},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(RoleAddAttrPointWin.prototype,"RoleAddAttrPointWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(RoleAddAttrPointWin,LayerManager.UI_Main),window.RoleAddAttrPointWin=RoleAddAttrPointWin;var RoleAttrWin=function(e){function t(){var t=e.call(this)||this;return t._lastX=0,t.proShowList1=[2,4,5,48,49],t.proShowList2=[3,10,6,51,50],t.proShowList3=[7,19,13,16,101,102,103,104,105],t.proShowList4=[8,38,14,21,106,107,108,109,110],t.skinName="RoleAttrSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.baseAttrTxt.text=GlobalConfig.jifengTiaoyueLg.st100301,this.seniorAttrTxt.text=GlobalConfig.jifengTiaoyueLg.st100109,this.m_bg.init("RoleAttrWin",GlobalConfig.jifengTiaoyueLg.st100107)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.curRole=e[0],this.setRoleAttr(this.curRole);var i=SubRoles.ins().subRolesLen;i>1&&(this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)),this.addEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var i=SubRoles.ins().subRolesLen;i>1&&(this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this)},t.prototype.onClose=function(e){ViewManager.ins().close(this)},t.prototype.otherClose=function(e){e.target instanceof eui.Button||ViewManager.ins().close(this)},t.prototype.onMove=function(e){switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:this._lastX=e.localX;break;case egret.TouchEvent.TOUCH_END:this._lastX>e.localX?this.curRole<3&&(this.setRoleAttr(++this.curRole),this.moveAttr(-200)):this._lastX<e.localX&&this.curRole>0&&(this.setRoleAttr(--this.curRole),this.moveAttr(200))}},t.prototype.moveAttr=function(e){},t.prototype.onTouch=function(e){switch(e.currentTarget){case this.leftBtn:this.setRoleAttr(--this.curRole),this.moveAttr(200);break;case this.rightBtn:this.setRoleAttr(++this.curRole),this.moveAttr(-200)}},t.prototype.setRoleAttr=function(e){this.setData(e,this.proShowList1,this.attr1),this.setData(e,this.proShowList2,this.attr2),this.setData(e,this.proShowList3,this.attr3),this.setData(e,this.proShowList4,this.attr4),this.setBtn()},t.prototype.setData=function(e,t,i){var o=SubRoles.ins().getSubRoleByIndex(e);this.job.text=Role.jobNumberToName(o.job);for(var s="",n="",r=0,a=0,l=0;l<t.length;l++){if(a=t[l],n=AttributeData.getAttrStrByType(a),r=this.getPercentageAdd(o,a),0>r&&(console.error(n+" :"+r),r=0),n.length<3&&(n=AttributeData.inserteBlank(n,4)),n="<font color='#535557'>"+n+"</font>",a>1&&11>=a)s+=7==a||8==a?n+"："+r/100+"%":n+"："+r;else if(a>12&&15>a||a>15&&48>a)s+=a==AttributeType.atCritEnhance?n+"："+(r/100+150)+"%":n+"："+r/100+"%";else{if(!(a>=48))continue;s+=n+"："+r}l<t.length-1&&(s+="\n")}i.textFlow=TextFlowMaker.getTextFlowByHtml(s)},t.prototype.getPercentageAdd=function(e,t){var i=e.getAtt(t);switch(t){case AttributeType.atAttack:i+=Math.floor(i*e.getAtt(AttributeType.atAtkEx)/1e4);break;case AttributeType.atDef:i+=Math.floor(i*e.getAtt(AttributeType.atDefEx)/1e4);break;case AttributeType.atRes:i+=Math.floor(i*e.getAtt(AttributeType.atResEx)/1e4)}return i},t.prototype.setBtn=function(){var e=SubRoles.ins().subRolesLen;1==e?(this.leftBtn.visible=!1,this.rightBtn.visible=!1):e>1&&(0==this.curRole?(this.leftBtn.visible=!1,this.rightBtn.visible=!0):1==this.curRole?(this.leftBtn.visible=!0,3>e?this.rightBtn.visible=!1:this.rightBtn.visible=!0):2==this.curRole&&(this.leftBtn.visible=!0,this.rightBtn.visible=!1))},t}(BaseEuiPanel);__reflect(RoleAttrWin.prototype,"RoleAttrWin"),ViewManager.ins().reg(RoleAttrWin,LayerManager.UI_Popup),window.RoleAttrWin=RoleAttrWin;var RoleWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainWinSkin",t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.roleInfoPanel=new RoleInfoPanel(this),this.roleInfoPanel.name=GlobalConfig.jifengTiaoyueLg.st100100,this.commonWindowBg.AddChildStack(this.roleInfoPanel),this.mountMainPanel=new MountMainPanel,this.mountMainPanel.name=GlobalConfig.jifengTiaoyueLg.st100669,this.commonWindowBg.AddChildStack(this.mountMainPanel),this.wingPanel=new WingPanel,this.wingPanel.name=GlobalConfig.jifengTiaoyueLg.st100339,this.commonWindowBg.AddChildStack(this.wingPanel),this.zsPanel=new ZsPanel,this.zsPanel.name=GlobalConfig.jifengTiaoyueLg.st100465,this.commonWindowBg.AddChildStack(this.zsPanel),this.closeBtn0=this.commonWindowBg.returnBtn},t.prototype.destoryView=function(){e.prototype.destoryView.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];UserBag.ins().sendGetDanyaoMsg(),MountSproto.ins().sendGetMountInitMsg();var i=e[0],o=e[1],s=this.OnOpenIndex(i);this.commonWindowBg.OnAdded(this,s?i:0,o?o:0),this.observe(MessageDef.ROLE_HINT,this.updateRedPoint),this.observe(UserZs.ins().postZsData,this.updateRedPoint),this.observe(GameLogic.ins().postLevelChange,this.updateRedPoint),this.observe(Wing.ins().postActivate,this.updateRedPoint),this.observe(MountEvt.MOUNT_DATAUPDATE_MSG,this.updateRedPoint),MessageCenter.addListener(Wing.ins().postWingUpgrade,this.updateRedPoint,this),MessageCenter.addListener(Wing.ins().postBoost,this.updateRedPoint,this),this.updateRedPoint()},t.prototype.close=function(){var e=ViewManager.ins().getView(UIView2);null!=e&&e.closeNav(UIView2.NAV_ROLE),GameGlobal.MessageCenter.dispatch(MessageDef.GUIDE_ADDEQUIP_END),this.commonWindowBg.OnRemoved()},t.prototype.checkIsOpen=function(e){},t.prototype.OnOpenIndex=function(e){return 1==e?Deblocking.Check(DeblockingType.TYPE_63):2==e?Deblocking.Check(DeblockingType.TYPE_35):3==e?Deblocking.Check(DeblockingType.TYPE_90):!0},t.prototype.updateRedPoint=function(){var e=UserZs.ins().canOpenZSWin()&&!UserZs.ins().isMaxLv()&&(UserZs.ins().canGetRedPoint()||UserZs.ins().canUpgrade()),t=Wing.ins().mRedPoint.IsRed(),i=this.canEquip();this.commonWindowBg.ShowTalRedPoint(0,this.and(i)),this.commonWindowBg.ShowTalRedPoint(1,MountModel.getInstance.checkAllRedPoint()),this.commonWindowBg.ShowTalRedPoint(2,t),this.commonWindowBg.ShowTalRedPoint(3,e);var o=this.commonWindowBg.GetSelectedIndex();if(0==o)for(var s=SubRoles.ins().subRolesLen,n=0;s>n;n++){var r=!1;i[n]&&(r=!0),this.commonWindowBg.showRedPoint(n,r||LegendModel.ins().IsRedPointByRole(n))}},t.prototype.and=function(e){for(var t in e)if(1==e[t])return!0;return!1},t.prototype.canEquip=function(){var e=[!1,!1,!1];if(this.canChangeEquips)for(var t=SubRoles.ins().subRolesLen,i=0;t>i;i++){var o=this.canChangeEquips[i];for(var s in o)if(o[s]){e[i]=!0;break}0==e[i]&&(e[i]=UserEquip.ins().CheckOrangeRedPointByRoleIndex(i))}return e},t.prototype.OnBackClick=function(e){return GuideUtils.ins().next(this.closeBtn0),0},t}(BaseEuiPanel);__reflect(RoleWin.prototype,"RoleWin",["ICommonWindow"]),ViewManager.ins().reg(RoleWin,LayerManager.UI_Main),window.RoleWin=RoleWin;var ZhuZaiEquipGrowPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName="",t.skinName="ZhuzaiEquipPromoteSkin",t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100207,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.attrLabel.showBg(),this.star.listLength=5,this.star.starNum=0,this.txt0.text=GlobalConfig.jifengTiaoyueLg.st100232+"：",this.txt1.text=GlobalConfig.jifengTiaoyueLg.st100234,this.countTxt.text=GlobalConfig.jifengTiaoyueLg.st100233+"：",this.link.text=GlobalConfig.jifengTiaoyueLg.st100108,this.link1.text=GlobalConfig.jifengTiaoyueLg.st100108,UIHelper.SetLinkStyleLabel(this.link),UIHelper.SetLinkStyleLabel(this.link1)},t.prototype.open=function(){this.m_ItemTab.AddListener(this.setData,this),this.setEquipPoint(),this.link.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.link1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.upgradeBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.cbAutoBuy.addEventListener(egret.Event.CHANGE,this.cbAutoChange,this),GameGlobal.MessageCenter.addListener(MessageDef.ZHUZAI_UP_RESULT,this.UpdateContent,this),GameGlobal.MessageCenter.addListener(MessageDef.ZHUZAI_DATA_UPDATE,this.UpdateContent,this),MessageCenter.addListener(UserBag.postItemChange,this.UpdateContent,this),MessageCenter.addListener(UserBag.postItemAdd,this.UpdateContent,this)},t.prototype.close=function(){this.link.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.link1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.upgradeBtn0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.cbAutoBuy.removeEventListener(egret.Event.CHANGE,this.cbAutoChange,this),this.m_ItemTab.RemoveListener(this.setData,this),this.removeObserve()},t.prototype.setData=function(){null==this.EquipPointGrowUpConfig&&(this.EquipPointGrowUpConfig=GlobalConfig.ins("EquipPointGrowUpConfig"));var e=this.m_ItemTab.GetSelectIndex()+1,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().GetZhuZaiData(t)[this.m_ItemTab.GetSelectIndex()],o=i.lv,s=this.EquipPointGrowUpConfig[e][o],n=this.EquipPointGrowUpConfig[e][o+1],r=s.needLevel;this.useTxt.text=(r/1e3>>0)+GlobalConfig.jifengTiaoyueLg.st100067;var a=1e3*GameGlobal.zsModel.lv+GameGlobal.actorModel.level;this.useTxt.textColor=r>a?16711680:3066402,this.currentState=i.isMaxLevel()?"max":"normal",this.attrLabel.SetCurAttr(AttributeData.getAttStr(s.attrs,1)+"\n<font color = '0xBF7D00'>"+AttributeData.getAttStrForZhuzai(s.slotAttrs,1))+"</font>",n&&this.attrLabel.SetNextAttr(AttributeData.getAttStr(n.attrs,1)+"\n<font color = '0xBF7D00'>"+AttributeData.getAttStrForZhuzai(n.slotAttrs,1))+"</font>",this.attrLabel.ShowSolaAttr(s.string,s.attrs.length);var l=s.growUpItem.id,h=UserBag.ins().getBagGoodsCountById(0,l);if(this.useTxt0.text=h+" / "+s.growUpItem.count,this.useTxt0.textColor=h<s.growUpItem.count?16711680:3066402,GlobalConfig.itemConfig[l]&&(this.countTxt0.text=GlobalConfig.jifengTiaoyueLg.st100218+GlobalConfig.itemConfig[l].name+"："),this.useTxt1.text=s.growUpProbability/100+"%",this.star.starNum=s.star,this.upgradeBtn0.label=s.growUpItem.count?o?GlobalConfig.jifengTiaoyueLg.st100211:GlobalConfig.jifengTiaoyueLg.st100212:GlobalConfig.jifengTiaoyueLg.st100213,this.powerLabel.text=UserBag.getAttrPower(s.attrs),5==s.star&&(this.upgradeBtn0.label=GlobalConfig.jifengTiaoyueLg.st100214),1e4==s.growUpProbability)this.upFailLable.visible=!1;else{this.upFailLable.visible=!0;var c=this.EquipPointGrowUpConfig[e][s.brokenDownlv];c&&(this.upFailLable.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100215,[s.growlevel-c.growlevel]))}var u=s.sbprotect[0].id,d=UserBag.ins().getBagGoodsCountById(0,u);this.guardName.text=GlobalConfig.itemConfig[u].name+"：",this.guardUse.text=d+" / "+s.sbprotect[0].count,d<s.sbprotect[0].count?(this.guardUse.textColor=16711680,this.cbAutoBuy.selected=!1):this.guardUse.textColor=3066402,this.cbAutoBuy.labelDisplay.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100216,[this.guardName.text])},t.prototype.cbAutoChange=function(e){if(this.cbAutoBuy.selected){var t=this.m_ItemTab.GetSelectIndex()+1,i=this.m_RoleSelectPanel.getCurRole(),o=SubRoles.ins().GetZhuZaiData(i)[this.m_ItemTab.GetSelectIndex()],s=this.EquipPointGrowUpConfig[t][o.lv],n=s.sbprotect[0].id,r=s.sbprotect[0].count,a=UserBag.ins().getBagGoodsCountById(0,n);r>a&&(this.cbAutoBuy.selected=!1,UserWarn.ins().setBuyGoodsWarn(n,r))}},t.prototype.setEquipPoint=function(){this.m_ItemTab.setEquipPoint(SubRoles.ins().GetZhuZaiData(this.m_RoleSelectPanel.getCurRole()),"canLevelup");for(var e=0;e<GameGlobal.rolesModel.length;e++)this.m_RoleSelectPanel.showRedPoint(e,GameGlobal.zhuZaiModel.canLevelup(e))},t.prototype.onClick=function(e){null==this.EquipPointGrowUpConfig&&(this.EquipPointGrowUpConfig=GlobalConfig.ins("EquipPointGrowUpConfig"));var t=SubRoles.ins().GetZhuZaiData(this.m_RoleSelectPanel.getCurRole())[this.m_ItemTab.GetSelectIndex()].lv,i=this.EquipPointGrowUpConfig[this.m_ItemTab.GetSelectIndex()+1][t];if(!ErrorLog.Assert(i,"ZhuZaiEquipGrowPanel   config  null")&&!ErrorLog.Assert(i.growUpItem,"ZhuZaiEquipGrowPanel   config.growUpItem  null")){var o=i.growUpItem.id;switch(e.currentTarget){case this.link:UserWarn.ins().setBuyGoodsWarn(o,i.growUpItem.count);break;case this.link1:UserWarn.ins().setBuyGoodsWarn(i.sbprotect[0].id,i.sbprotect[0].count);break;case this.upgradeBtn0:var s=i.needLevel/1e3>>0,n=i.needLevel%1e3;if(s&&GameGlobal.zsModel.lv<s||GameGlobal.actorModel.level<n)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100219);if(UserBag.ins().getBagGoodsCountById(0,o)<i.growUpItem.count)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100217);ZhuzaiEquip.ins().sendGrow(this.m_RoleSelectPanel.getCurRole(),this.m_ItemTab.GetSelectIndex()+1,this.cbAutoBuy.selected)}}},t.prototype.UpdateContent=function(){this.setEquipPoint(),this.setData()},t}(BaseView);__reflect(ZhuZaiEquipGrowPanel.prototype,"ZhuZaiEquipGrowPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.ZhuZaiEquipGrowPanel=ZhuZaiEquipGrowPanel;var ZhuzaiEquipItemTab=function(){function e(e){this.m_Listener=[],this.m_ItemTab=e,this.m_Tab=[];for(var t=0;4>t;t++)this.m_Tab.push(e["tab"+t]);this.m_Tab[0].selected=!0,this.m_SelectIndex=0}return e.prototype.AddListener=function(e,t){this.m_Listener.push(e,t)},e.prototype.RemoveListener=function(e,t){for(var i=0;i<this.m_Listener.length;i+=2)if(this.m_Listener[i]==e&&this.m_Listener[i+1]==t){delete this.m_Listener[i+1],delete this.m_Listener[i];break}},e.prototype.Open=function(){for(var e=0;e<this.m_Tab.length;e++)this.m_Tab[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)},e.prototype.Close=function(){for(var e=0;e<this.m_Tab.length;e++)this.m_Tab[e].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)},e.prototype.OnClick=function(e){this.m_SelectIndex=this.m_Tab.indexOf(e.currentTarget),this._Set()},e.prototype._Set=function(){for(var e=0;e<this.m_Tab.length;e++)this.m_Tab[e].selected=this.m_SelectIndex==e;for(var t=0;t<this.m_Listener.length;t+=2)this.m_Listener[t]&&this.m_Listener[t].call(this.m_Listener[t+1])},e.prototype.setEquipPoint=function(e,t){null==this.EquipPointConstConfig&&(this.EquipPointConstConfig=GlobalConfig.ins("EquipPointGrowUpConfig"));for(var i=GlobalConfig.equipPointBasicConfig,o=e,s=0;s<this.m_Tab.length;s++){var n=this.m_Tab[s],r=o[s];if(r.lv){var a=this.EquipPointConstConfig[r.id][r.lv];a&&(n.label=i[s+1].name,n.lvTxt.text=a.rank+GlobalConfig.jifengTiaoyueLg.st100103)}else n.label=(i[s+1].activationLevel/1e3>>0)+GlobalConfig.jifengTiaoyueLg.st100104,n.lvTxt.text="";var l=ZhuzaiEquip.GetBgIconByData(r),h=l[0],c=l[1];n.icon=h,n.redPoint.visible=r[t](),n.bg.source=c}},e.prototype.GetSelectIndex=function(){return this.m_SelectIndex},e.prototype.SetSelectIndex=function(e){this.m_SelectIndex=e,this._Set()},e}();__reflect(ZhuzaiEquipItemTab.prototype,"ZhuzaiEquipItemTab"),window.ZhuzaiEquipItemTab=ZhuzaiEquipItemTab;var ZhuZaiEquipWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="ZhuzaiEquipPanelSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.mItemTab=new ZhuzaiEquipItemTab(this.itemTab),this.growPanel=new ZhuZaiEquipGrowPanel,this.growPanel.m_ItemTab=this.mItemTab,this.growPanel.name=GlobalConfig.jifengTiaoyueLg.st100208,this.commonWindowBg.AddChildStack(this.growPanel),this.fenjiePanel=new ZhuZaiFenjiePanel,this.fenjiePanel.name=GlobalConfig.jifengTiaoyueLg.st100209,this.commonWindowBg.AddChildStack(this.fenjiePanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mItemTab.Open(),this.commonWindowBg.OnAdded(this,e?e[0]:0,e[1]?e[1]:0),this.mItemTab.SetSelectIndex(e[2]?e[2]:0),this.observe(MessageDef.ZHUZAI_DATA_UPDATE,this.updateRedPoint),this.observe(MessageDef.ZHUZAI_UP_RESULT,this.playEff),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.updateRedPoint),this.updateRedPoint()},t.prototype.close=function(){this.mItemTab.Close(),this.commonWindowBg.OnRemoved()},t.prototype.updateRedPoint=function(){this.commonWindowBg.ShowTalRedPoint(0,GameGlobal.zhuZaiModel.canAllLevelup()||GameGlobal.zhuZaiModel.canAllAdvance()),this.commonWindowBg.ShowTalRedPoint(1,GameGlobal.zhuZaiModel.canFengjie())},t.prototype.playEff=function(e){var t=new MovieClip,i=e?"eff_success":"eff_fail";t.scaleX=t.scaleY=1,t.rotation=0,t.x=235,t.y=160,t.loadUrl(ResDataPath.GetUIEffePath(i),!0,1,function(){DisplayUtils.dispose(t),t=null}),this.addChild(t)},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return this.itemTab.visible=1!=e,!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(ZhuZaiEquipWin.prototype,"ZhuZaiEquipWin",["ICommonWindow"]),window.ZhuZaiEquipWin=ZhuZaiEquipWin;var ZhuZaiFenjiePanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName="",t.skinName="ZhuzaiEquipDecomSkin",t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100207,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.dataProvider=new eui.ArrayCollection([]),this.useTxt0.text="",this.countTxt.text="",this.btn.label=GlobalConfig.jifengTiaoyueLg.st100209,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100236},t.prototype.open=function(){this.startSetBagData(),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.addListener(MessageDef.ITEM_COUNT_CHANGE,this.startSetBagData,this)},t.prototype.close=function(){this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.removeListener(MessageDef.ITEM_COUNT_CHANGE,this.startSetBagData,this)},t.prototype.startSetBagData=function(){TimerManager.ins().doTimer(100,1,this.setBagData,this)},t.prototype.setBagData=function(){var e=GlobalConfig.ins("EquipPointResolveConfig"),t=0,i=[],o=ZhuzaiEquip.ins().GetFengjieList();for(var s in o){var n=parseInt(s),r=o[n];if(r>0){var a=e[n];t+=r*a.materials[0].count,i.push(RewardData.ToRewardData({type:1,id:n,count:r}))}}var l;for(var s in e)l=e[s].materials[0].id;this.countTxt.text=GlobalConfig.jifengTiaoyueLg.st100235+GlobalConfig.itemConfig[l].name+"：",this.useTxt0.text=t+"",this.list.dataProvider=new eui.ArrayCollection(i)},t.prototype.onTap=function(){ZhuzaiEquip.ins().sendFenjie()},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(ZhuZaiFenjiePanel.prototype,"ZhuZaiFenjiePanel",["ICommonWindowTitle"]),window.ZhuZaiFenjiePanel=ZhuZaiFenjiePanel;var GameServer=function(e){function t(){var t=e.call(this)||this;return t.mOtherLogin=!1,t.sysId=PackageID.Default,t.regNetMsg(S2cProtocol.sc_base_open_day,t.doGetOpenServer),t.regNetMsg(S2cProtocol.sc_base_game_time,t.doServerTime),t.regNetMsg(S2cProtocol.sc_base_replace_account,t._DoBaseReplaceAccount),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},Object.defineProperty(t,"serverTime",{get:function(){return t._serverTime+Math.floor(.001*egret.getTimer())},enumerable:!0,configurable:!0}),t.setServerTime=function(e){t._serverTime=e-Math.floor(.001*egret.getTimer())},t.prototype.doGetOpenServer=function(e){t.serverOpenDay=e.day,t.loginDay=e.loginDay,GameGlobal.MessageCenter.dispatch(MessageDef.OPEN_SERVER)},t.prototype.doServerTime=function(e){t.setServerTime(e.time),t.serverMergeTime=e.serverMergeTime},t.GetSurplusTime=function(e,t,i){void 0===t&&(t=DateUtils.TIME_FORMAT_5),void 0===i&&(i=2);var o=Math.max(0,(e||0)-this.serverTime);return DateUtils.getFormatBySecond(o,t,i)},t.GetPkTime=function(e,t,i){void 0===t&&(t=DateUtils.TIME_FORMAT_11),void 0===i&&(i=2);var o=Math.max(0,(e||0)-this.serverTime);return DateUtils.getFormatBySecond(o,t,i)},t.prototype._DoBaseReplaceAccount=function(){this.mOtherLogin=!0,alert("你的账号在其它地方登陆"),4210==SdkMgr.channelid&&SdkMgr.currSdk==SdkMgr.P_TYPE_7?(console.log("退出"),window.H5API.logout()):location.reload()},t._serverTime=0,t.loginDay=1,t.serverName="",t}(BaseSystem);__reflect(GameServer.prototype,"GameServer"),MessageCenter.compile(GameServer),window.GameServer=GameServer;var Setting=function(e){function t(){var t=e.call(this)||this;return t.sysId=PackageID.Default,t.regNetMsg(19,t.parser),t}return __extends(t,e),Object.defineProperty(t,"currStep",{get:function(){return this._currStep},set:function(e){this._currStep=e},enumerable:!0,configurable:!0}),t.prototype.parser=function(e){t.currPart=e.readByte(),t.currStep=e.readByte(),t.setting=e.readInt()},t.prototype.sendSaveGameSetting=function(){var e=this.getBytes(19);e.writeByte(t.currPart),e.writeByte(t.currStep),e.writeInt(t.setting),this.sendToServer(e)},t}(BaseSystem);__reflect(Setting.prototype,"Setting"),MessageCenter.compile(Setting),window.Setting=Setting;var AddMiniGame=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="AddMiniGameSkin",this.iconList.itemRenderer=ItemBase},t.listener=function(){Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_add_small_routine_state,t.changeState,t)},t.isShow=function(){return 2==t.state||!Main.isDebug&&!SdkMgr.isWxGame()?!1:!0},t.changeState=function(e){t.state=e.state;var i=ViewManager.ins().getView(t);i&&i.update()},t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),this.commonWindowBg.title=GlobalConfig.jifengTiaoyueLg.st101940,this.commonWindowBg.OnAdded(this),this.awardBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.awardClick,this),this.update()},t.prototype.update=function(){var e=GlobalConfig.ins("ChongZhi1Config")[100][0][0];this.iconList.dataProvider=new eui.ArrayCollection(e.awardList),2==t.state?(this.awardBtn.visible=!1,this.t1.visible=!0):(this.awardBtn.visible=!0,this.t1.visible=!1)},t.prototype.close=function(){e.prototype.close.call(this),this.commonWindowBg.OnRemoved()},t.prototype.awardClick=function(e){if(2!=t.state)if("1104"!=WxSdk.ins().loginscene&&"1103"!=WxSdk.ins().loginscene&&"1104"!=WxSdk.ins().scene&&"1103"!=WxSdk.ins().scene&&SdkMgr.isWxGame())UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101941);else{var i=new Sproto.cs_small_routine_gain_request;GameSocket.ins().Rpc(C2sProtocol.cs_small_routine_gain,i,null,this)}},t.state=2,t}(BaseEuiPanel);__reflect(AddMiniGame.prototype,"AddMiniGame"),ViewManager.ins().reg(AddMiniGame,LayerManager.UI_Main),window.AddMiniGame=AddMiniGame;var ShareBuffWin=function(e){function t(){var t=e.call(this)||this;return t.s=0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ShareBuffSkin"},t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this),this.update()},t.prototype.update=function(){var e=GlobalConfig.share7Config[1];this.m_bg.init("ShareBuffWin",e.name),this.text.text=GlobalConfig.jifengTiaoyueLg.st101942+e.name;var t,i=AttributeData.getAttStr(e.attrs,0,1,":"),o=i.split("\n"),s="";for(var n in o)t=o[n].split(":"),s+=t[0]+": <font color=#ffe117>"+t[1]+"</font>\n";s+="<font color=#ffe117>("+e.name+GlobalConfig.jifengTiaoyueLg.st101943+")</font>",this.text2.textFlow=TextFlowMaker.generateTextFlow(s);var r=ShareModel.ins().bufftime+ShareModel.ins().bufftime2-Math.floor(egret.getTimer()/1e3);this.s=r>=0?r:0;var a=DateUtils.getFormatBySecond(Math.floor(this.s),1);this.text3.text="("+GlobalConfig.jifengTiaoyueLg.st101944+" "+a+")",this.timer()},t.prototype.click=function(){ViewManager.ins().close(this)},t.prototype.updateCD=function(){this.s<0&&(this.s=0);var e=DateUtils.getFormatBySecond(Math.floor(this.s),1);this.text3.text="("+GlobalConfig.jifengTiaoyueLg.st101944+" "+e+")"},t.prototype.timer=function(){TimerManager.ins().remove(this.timer,this),this.timer2()&&TimerManager.ins().doTimer(1e3,0,this.timer,this),this.updateCD()},t.prototype.timer2=function(){return this.s--,this.s<0?!1:!0},t.prototype.close=function(){e.prototype.close.call(this),TimerManager.ins().remove(this.timer,this)},t}(BaseEuiPanel);__reflect(ShareBuffWin.prototype,"ShareBuffWin"),ViewManager.ins().reg(ShareBuffWin,LayerManager.UI_Popup),window.ShareBuffWin=ShareBuffWin;
var ShareFirstWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ShareFirstSkin",this.iconList.itemRenderer=ItemBase},t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),GameGlobal.MessageCenter.addListener(ShareEvt.WX_SHARE,this.update,this),this.dialogClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.awardBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.awardClick,this),this.update()},t.prototype.update=function(){var e=GlobalConfig.share1Config[1];this.iconList.dataProvider=new eui.ArrayCollection(e.tbReward);var t=ShareModel.ins().infos.firstshare;0==t?(this.awardBtn.skinName="btnJumpSkin",this.awardBtn.label=GlobalConfig.jifengTiaoyueLg.st101200,this.awardBtn.redPoint.visible=!1):1==t?(this.awardBtn.skinName="Btn1Skin",this.awardBtn.label=GlobalConfig.jifengTiaoyueLg.st100004,this.awardBtn.redPoint.visible=!0):2==t&&(this.awardBtn.skinName="Btn1Skin",this.awardBtn.label=GlobalConfig.jifengTiaoyueLg.st100981,this.awardBtn.redPoint.visible=!1,this.awardBtn.enabled=!1),this.mc||(this.mc=new MovieClip,this.mc.loadUrl(ResDataPath.GetRoleWingPath("wing13_0s"),!0,-1),this.wing.addChild(this.mc),this.mc.y=100)},t.prototype.close=function(){e.prototype.close.call(this),this.dialogClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(e){ViewManager.ins().close(this)},t.prototype.awardClick=function(e){var t=ShareModel.ins().infos.firstshare;if(0==t)SdkMgr.isWxGame()&&WxSdk.ins().shareAppMessage();else if(1==t){var i=new Sproto.cs_operate_share_request;i.actId=1,i.subProto="reward",GameSocket.ins().Rpc(C2sProtocol.cs_operate_share,i,null,this)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(ShareFirstWin.prototype,"ShareFirstWin"),window.ShareFirstWin=ShareFirstWin;var ShareModel=function(e){function t(){var t=e.call(this)||this;return t.bufftime=0,t.bufftime2=0,t.infos={firstshare:2,dailyshare:{count:0,reward:1,s:0,cdtime:0},accumulateshare:{count:0,rewards:[]},friendhelp:[],helpcount:0,newplayer:0,redpackets:[]},t.regNetMsg(S2cProtocol.sc_share_init_info,t.update),t.regNetMsg(S2cProtocol.sc_share_notify,t.updateItem),t.regNetMsg(S2cProtocol.sc_share_buffer,t.updateBuff),GameGlobal.MessageCenter.addListener(MessageDef.SOCKE_RENEECTED_SUCCESS,t.shareLinJoin,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.shareLinJoin=function(){WxSdk.ins().shareLinJoin&&(WxSdk.ins().shareSend(),WxSdk.ins().shareLinJoin=!1)},t.prototype.updateBuff=function(e){this.bufftime=e.lefttime,this.bufftime2=Math.floor(egret.getTimer()/1e3),this.bufftime>0&&(Main.isDebug||SdkMgr.isWxGame())&&ViewManager.ins().open(ShareBuffWin)},t.prototype.update=function(e){this.infos.firstshare=e.actinfos.act1.joinState,this.infos.dailyshare.count=e.actinfos.act2.shareCount,this.infos.dailyshare.reward=e.actinfos.act2.rewardState,this.infos.dailyshare.cdtime=e.actinfos.act2.cdtime,this.infos.dailyshare.s=Math.floor(egret.getTimer()/1e3),0==this.infos.dailyshare.count&&(this.infos.dailyshare.reward=1),this.infos.accumulateshare.count=e.actinfos.act3.shareCount,this.infos.accumulateshare.rewards=e.actinfos.act3.reward,e.actinfos.act4.frienddata&&(this.infos.friendhelp=e.actinfos.act4.frienddata),this.infos.helpcount=e.actinfos.act4.helpcount,this.infos.newplayer=e.actinfos.act4.newplayer,e.actinfos.act4.redpacket&&(this.infos.redpackets=e.actinfos.act4.redpacket),GameGlobal.MessageCenter.dispatch(ShareEvt.WX_SHARE)},t.prototype.updateItem=function(e){switch(e.actId){case 1:this.infos.firstshare=e.param1;break;case 2:this.infos.dailyshare.count!=e.param1&&(this.infos.dailyshare.count=e.param1,this.infos.dailyshare.s=Math.floor(egret.getTimer()/1e3),this.infos.dailyshare.cdtime=-1),this.infos.dailyshare.reward=e.param2,0==this.infos.dailyshare.count&&(this.infos.dailyshare.reward=1);break;case 3:if(-1==e.param1)this.infos.accumulateshare.count=e.param2;else{var t=this.infos.accumulateshare.rewards;for(var i in t)t[i].index==e.param1&&(t[i].state=e.param2)}break;case 4:if(3==e.param1){var o=this.infos.friendhelp,s=!0;for(var i in o)o[i].dbid==e.friend.dbid&&(s=!1,e.friend.level&&(o[i].level=e.friend.level),e.friend.taghelp&&(o[i].taghelp=e.friend.taghelp),e.friend.taglevelup&&(o[i].taglevelup=e.friend.taglevelup));s&&o.push(e.friend)}if(1==e.param1&&(this.infos.helpcount=e.param2),2==e.param1&&(this.infos.newplayer=e.param2),4==e.param1){var o=this.infos.redpackets,s=!0;for(var i in o)o[i].strid==e.redpacket.strid&&(s=!1,o[i]=e.redpacket);s&&o.push(e.redpacket)}}GameGlobal.MessageCenter.dispatch(ShareEvt.WX_SHARE)},t.onShop=function(){ViewManager.ins().open(ShopWin,7)},t.prototype.getCd=function(){var e=0,i=t.ins().infos.dailyshare,o=i.count+i.reward,s=GlobalConfig.share2Config,n=Object.keys(s).length;o=o>n?n:o;var r=0;return i.cdtime>0&&(r=i.cdtime),-1==i.cdtime&&(r=s[o].cdTime),0==i.cdtime&&(r=0),e=i.s+r-Math.floor(egret.getTimer()/1e3),e=0>e?0:e},t}(BaseSystem);__reflect(ShareModel.prototype,"ShareModel"),window.ShareModel=ShareModel;var ShareShopPanel=function(e){function t(){var t=e.call(this)||this;return t.name=GlobalConfig.jifengTiaoyueLg.st100085,t.skinName="ShareShopSkin",t.listView.itemRenderer=ShareShopPanelItem,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101946,t}return __extends(t,e),t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),MessageCenter.ins().addListener(ShareEvt.WX_SHARECOIN,this.UpdateContent,this),this.update()},t.prototype.update=function(){var e=GlobalConfig.share5Config,t=[];for(var i in e)t.push(e[i]);this.listView.dataProvider=new eui.ArrayCollection(t)},t.prototype.close=function(){e.prototype.close.call(this)},t.prototype.UpdateContent=function(){this.priceLabel.text=""+GameLogic.ins().actorModel.sharecoin},t}(BaseView);__reflect(ShareShopPanel.prototype,"ShareShopPanel",["ICommonWindowTitle"]),window.ShareShopPanel=ShareShopPanel;var ShareShopPanelItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShareShopItemSkin",t.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.click,t),t}return __extends(t,e),t.prototype.dataChanged=function(){this.shopItem.data=this.data.tbItem[0],this.shopItem.dataChanged(),this.priceLabel.text=this.data.nPrice+"",this.itemName.text=this.shopItem.nameTxt.text,this.shopItem.isShowName(!1)},t.prototype.click=function(){var e=GameLogic.ins().actorModel.sharecoin;if(e<this.data.nPrice)UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101945);else{var t=new Sproto.cs_operate_share_request;t.actId=5,t.subProto="buy",t.subData=new Sproto.sub_proto_data,t.subData.integer_data=[this.data.Index],GameSocket.ins().Rpc(C2sProtocol.cs_operate_share,t,null,this)}},t}(eui.ItemRenderer);__reflect(ShareShopPanelItem.prototype,"ShareShopPanelItem"),window.ShareShopPanelItem=ShareShopPanelItem;var ShareWin1=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101206,t.skinName="ShareWin1Skin",t.name=GlobalConfig.jifengTiaoyueLg.st101206,t.iconList.itemRenderer=ShareWin1Item,t}return __extends(t,e),t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),this.shop.addEventListener(egret.TouchEvent.TOUCH_TAP,ShareModel.onShop,ShareModel),MessageCenter.ins().addListener(ShareEvt.WX_SHARE,this.UpdateContent,this),this.UpdateContent},t.prototype.close=function(){e.prototype.close.call(this),MessageCenter.ins().removeAll(this)},t.prototype.UpdateContent=function(){var e=GlobalConfig.share3Config,t=[];for(var i in e)t.push(e[i]);this.iconList.dataProvider=new eui.ArrayCollection(t);var o=ShareModel.ins().infos.dailyshare.count;o=o>5?5:o,this.bar.value=o,this.t1.textFlow=TextFlowMaker.generateTextFlow(GlobalConfig.jifengTiaoyueLg.st101207)},t.prototype.CheckRedPoint=function(){return!1},t}(BaseView);__reflect(ShareWin1.prototype,"ShareWin1",["ICommonWindowTitle"]),window.ShareWin1=ShareWin1;var ShareWin1Item=function(e){function t(){var t=e.call(this)||this;return t.hasAward=0,t.skinName="ShareItem1Skin",t.list.itemRenderer=ItemBase,t.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.click,t),t.btn.label=GlobalConfig.jifengTiaoyueLg.st101210,t.t2.text=GlobalConfig.jifengTiaoyueLg.st100680,t}return __extends(t,e),t.prototype.dataChanged=function(){this.list.dataProvider=new eui.ArrayCollection(this.data.tbReward);var e=ShareModel.ins().infos.accumulateshare.count,t=this.data.ConditionNum;this.t1.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101208,[t])),this.t0.textFlow=TextFlowMaker.generateTextFlow(GlobalConfig.jifengTiaoyueLg.st101209+e+"/"+t);var i=ShareModel.ins().infos.accumulateshare.rewards;for(var o in i)i[o].index==this.data.Index&&(this.hasAward=i[o].state?i[o].state:0);this.t2.visible=0==this.hasAward?!0:!1,this.btn.visible=1==this.hasAward?!0:!1,this.pic.visible=2==this.hasAward?!0:!1},t.prototype.click=function(){if(2==this.hasAward)UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st100981);else if(1==this.hasAward){var e=new Sproto.cs_operate_share_request;e.actId=3,e.subProto="reward",e.subData=new Sproto.sub_proto_data,e.subData.integer_data=[this.data.Index],GameSocket.ins().Rpc(C2sProtocol.cs_operate_share,e,null,this)}},t}(eui.ItemRenderer);__reflect(ShareWin1Item.prototype,"ShareWin1Item"),window.ShareWin1Item=ShareWin1Item;var ShareWin2=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101212,t.skinName="ShareWin2Skin",t.name=GlobalConfig.jifengTiaoyueLg.st101212,t.iconList.itemRenderer=ShareWin2Item,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101215,t.award.label=GlobalConfig.jifengTiaoyueLg.st100004,t.t3.text=GlobalConfig.jifengTiaoyueLg.st101218,t}return __extends(t,e),t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),this.shop.addEventListener(egret.TouchEvent.TOUCH_TAP,ShareModel.onShop,ShareModel),this.award.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this),MessageCenter.ins().addListener(ShareEvt.WX_SHARE,this.UpdateContent,this),this.UpdateContent()},t.prototype.close=function(){e.prototype.close.call(this),MessageCenter.ins().removeAll(this)},t.prototype.click=function(){switch(this.award.label){case GlobalConfig.jifengTiaoyueLg.st100680:UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st100680);break;case GlobalConfig.jifengTiaoyueLg.st100004:var e=new Sproto.cs_operate_share_request;e.actId=4,e.subProto="reward",e.subData=new Sproto.sub_proto_data,e.subData.integer_data=[1],GameSocket.ins().Rpc(C2sProtocol.cs_operate_share,e,null,this);break;case GlobalConfig.jifengTiaoyueLg.st100981:UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101211)}},t.prototype.UpdateContent=function(){var e=ShareModel.ins().infos.helpcount,t=GlobalConfig.share4Config,i=!1;e==t[1].length&&(e-=1,i=!0);var o=t[1][e],s=o.tbReward[0].count,n=o.Param2,r=t[2][0].Param1,a=t[2][0].tbReward[0].count;this.t1.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101213,[o.Param2])),this.t2.text=s+"",this.bar.maximum=o.Param1;var l=0,h=[],c=[],u=ShareModel.ins().infos.friendhelp;this.t3.visible=0==u.length;for(var d=0;d<u.length;d++)h.push({index:2,level2:r,award:a,level1:u[d].level,friendId:u[d].dbid,friendName:u[d].friendName,hasReward:u[d].taghelp,imgurl:u[d].imgurl}),u[d].level>=n&&l++;h.sort(function(e,t){return t.level1-e.level1});for(var d=0;d<h.length;d++)h[d].level1>h[d].level2&&c.push(h[d]);for(var d=0;d<h.length;d++)h[d].level1==h[d].level2&&c.push(h[d]);for(var d=0;d<h.length;d++)h[d].level1<h[d].level2&&c.push(h[d]);this.iconList.dataProvider=new eui.ArrayCollection(c),l>=o.Param1?(l=o.Param1,this.award.label=i?GlobalConfig.jifengTiaoyueLg.st100981:GlobalConfig.jifengTiaoyueLg.st100004):this.award.label=GlobalConfig.jifengTiaoyueLg.st100680,this.bar.value=l},t.prototype.CheckRedPoint=function(){return!1},t}(BaseView);__reflect(ShareWin2.prototype,"ShareWin2",["ICommonWindowTitle"]),window.ShareWin2=ShareWin2;var ShareWin2Item=function(e){function t(){var t=e.call(this)||this;return t.hasReward=!1,t.skinName="ShareItem2Skin",t.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.click,t),t.btn.label=GlobalConfig.jifengTiaoyueLg.st101210,t.t2.text=GlobalConfig.jifengTiaoyueLg.st100680,t}return __extends(t,e),t.prototype.dataChanged=function(){this.t1.text="Lv："+this.data.level1+"/"+this.data.level2,this.t3.text=GlobalConfig.jifengTiaoyueLg.st101214+this.data.award,this.index=this.data.index,this.friendId=this.data.friendId,this.hasReward=2==this.data.hasReward?!0:!1,SdkMgr.isWxGame()&&this.data.imgurl&&""!=this.data.imgurl&&this.data.imgurl&&(this.face.source=this.data.imgurl),this.btn.visible=this.data.level1>=this.data.level2&&!this.hasReward?!0:!1,this.pic.visible=this.data.level1>=this.data.level2&&this.hasReward?!0:!1,this.t2.visible=this.data.level1>=this.data.level2?!1:!0,this.friendName.text=this.data.friendName},t.prototype.click=function(){var e=new Sproto.cs_operate_share_request;e.actId=4,e.subProto="reward",e.subData=new Sproto.sub_proto_data,e.subData.integer_data=[this.index,this.friendId],GameSocket.ins().Rpc(C2sProtocol.cs_operate_share,e,null,this)},t}(eui.ItemRenderer);__reflect(ShareWin2Item.prototype,"ShareWin2Item"),window.ShareWin2Item=ShareWin2Item;var ShareWin3=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101216,t.skinName="ShareWin3Skin",t.name=GlobalConfig.jifengTiaoyueLg.st101216,t.iconList.itemRenderer=ShareWin2Item,t.t3.text=GlobalConfig.jifengTiaoyueLg.st101218,t}return __extends(t,e),t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),this.shop.addEventListener(egret.TouchEvent.TOUCH_TAP,ShareModel.onShop,ShareModel),MessageCenter.ins().addListener(ShareEvt.WX_SHARE,this.UpdateContent,this),this.UpdateContent()},t.prototype.close=function(){e.prototype.close.call(this),MessageCenter.ins().removeAll(this)},t.prototype.UpdateContent=function(){var e=GlobalConfig.share4Config[3][0],t=e.Param1,i=e.tbReward[0].count;this.t1.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101217,[t]));var o=[],s=[],n=ShareModel.ins().infos.friendhelp;this.t3.visible=0==n.length;for(var r=0;r<n.length;r++)o.push({index:3,level2:t,award:i,level1:n[r].level,friendId:n[r].dbid,friendName:n[r].friendName,hasReward:n[r].taglevelup,imgurl:n[r].imgurl});o.sort(function(e,t){return t.level1-e.level1});for(var r=0;r<o.length;r++)o[r].level1>o[r].level2&&s.push(o[r]);for(var r=0;r<o.length;r++)o[r].level1==o[r].level2&&s.push(o[r]);for(var r=0;r<o.length;r++)o[r].level1<o[r].level2&&s.push(o[r]);this.iconList.dataProvider=new eui.ArrayCollection(s)},t.prototype.CheckRedPoint=function(){return!1},t}(BaseView);__reflect(ShareWin3.prototype,"ShareWin3",["ICommonWindowTitle"]),window.ShareWin3=ShareWin3;var ShareWin4=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101219,t.skinName="ShareWin4Skin",t.name=GlobalConfig.jifengTiaoyueLg.st101219,t.btn.label=GlobalConfig.jifengTiaoyueLg.st100004,t}return __extends(t,e),t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),MessageCenter.ins().addListener(ShareEvt.WX_SHARE,this.UpdateContent,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.UpdateContent()},t.prototype.close=function(){e.prototype.close.call(this),MessageCenter.ins().removeAll(this),DisplayUtils.dispose(this.mc),this.mc=null},t.prototype.onTap=function(){var e=ShareModel.ins().infos.newplayer;if(2==e)UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101220);else{var t=new Sproto.cs_operate_share_request;t.actId=4,t.subProto="reward",t.subData=new Sproto.sub_proto_data,t.subData.integer_data=[4],GameSocket.ins().Rpc(C2sProtocol.cs_operate_share,t,null,this)}},t.prototype.UpdateContent=function(){var e=ShareModel.ins().infos.newplayer,t=GlobalConfig.share4Config[4][0],i=t.Param1,o=0,s=ShareModel.ins().infos.friendhelp;for(var n in s)s[n].level>=t.Param1&&o++;this.t2.textFlow=TextFlowMaker.generateTextFlow(GlobalConfig.jifengTiaoyueLg.st101221+"<font color=#008f22>"+o+"</font>"),this.t1.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101222,[i])),this.btn.visible=o>0?!0:!1,this.btn.label=2==e?GlobalConfig.jifengTiaoyueLg.st101220:GlobalConfig.jifengTiaoyueLg.st100004,this.btn.enabled=2==e?!1:!0,this.mc||(this.mc=new MovieClip,this.mc.loadUrl(ResDataPath.GetMonsterBodyPath("monster10013_3"+EntityAction.STAND),!0,-1),this.mc.scaleX=this.mc.scaleY=.8,this.eff.addChild(this.mc))},t.prototype.CheckRedPoint=function(){return!1},t}(BaseView);__reflect(ShareWin4.prototype,"ShareWin4",["ICommonWindowTitle"]),window.ShareWin4=ShareWin4;var ShareWin5=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101223,t.skinName="ShareWin5Skin",t.name=GlobalConfig.jifengTiaoyueLg.st101223,t.iconList.itemRenderer=ShareWin5Item,t.t3.text=GlobalConfig.jifengTiaoyueLg.st101218,t}return __extends(t,e),t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),this.shop.addEventListener(egret.TouchEvent.TOUCH_TAP,ShareModel.onShop,ShareModel),MessageCenter.ins().addListener(ShareEvt.WX_SHARE,this.UpdateContent,this),this.UpdateContent()},t.prototype.close=function(){e.prototype.close.call(this),MessageCenter.ins().removeAll(this)},t.prototype.UpdateContent=function(){var e=GlobalConfig.share4Config[5][0],t=e.Param1;this.t1.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101224,[t]));var i=[],o=ShareModel.ins().infos.redpackets;this.t3.visible=0==o.length;for(var s in o)1==o[s].state&&i.push(o[s]);for(var s in o)2==o[s].state&&i.push(o[s]);this.iconList.dataProvider=new eui.ArrayCollection(i)},t.prototype.CheckRedPoint=function(){return!1},t}(BaseView);__reflect(ShareWin5.prototype,"ShareWin5",["ICommonWindowTitle"]),window.ShareWin5=ShareWin5;var ShareWin5Item=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShareItem5Skin",t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.click,t),t}return __extends(t,e),t.prototype.dataChanged=function(){this.state=this.data.state,this.t1.text=this.data.sharecoin+"",1==this.state?this.t2.visible=!1:this.t2.visible=!0},t.prototype.click=function(){if(1==this.state){var e=new Sproto.cs_operate_share_request;e.actId=4,e.subProto="reward",e.subData=new Sproto.sub_proto_data,e.subData.integer_data=[5],e.subData.string_data=this.data.strid,GameSocket.ins().Rpc(C2sProtocol.cs_operate_share,e,null,this)}else 2==this.state&&UserTips.ErrorTip(GlobalConfig.jifengTiaoyueLg.st101225)},t}(eui.ItemRenderer);__reflect(ShareWin5Item.prototype,"ShareWin5Item"),window.ShareWin5Item=ShareWin5Item;var ShareWinMain=function(e){function t(){var t=e.call(this)||this;return t.c=0,t.skinName="ShareWinMainSkin",t.iconList.itemRenderer=ItemBase,t.commonWindowBg.AddChildStack(new ShareWin1),t.commonWindowBg.AddChildStack(new ShareWin2),t.commonWindowBg.AddChildStack(new ShareWin3),2!=ShareModel.ins().infos.newplayer&&t.commonWindowBg.AddChildStack(new ShareWin4),t.commonWindowBg.AddChildStack(new ShareWin5),t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101205,t.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.click,t),t}return __extends(t,e),t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),this.commonWindowBg.OnAdded(this,t?t[0]:0),this.setRedPoint(),MessageCenter.ins().addListener(ShareEvt.WX_SHARE,this.update,this),MessageCenter.ins().addListener(ShareEvt.WX_SHARECOIN,this.update,this),this.update()},t.prototype.click=function(){var e=ShareModel.ins().infos.dailyshare;if(1==e.reward)SdkMgr.isWxGame()&&WxSdk.ins().shareAppMessage();else if(0==e.reward){var t=new Sproto.cs_operate_share_request;t.actId=2,t.subProto="reward",GameSocket.ins().Rpc(C2sProtocol.cs_operate_share,t,null,this)}},t.prototype.upBtn=function(){var e=ShareModel.ins().infos.dailyshare;1==e.reward?(this.btn.label=GlobalConfig.jifengTiaoyueLg.st101201,this.btn.redPoint.visible=!1):0==e.reward&&(this.btn.label=GlobalConfig.jifengTiaoyueLg.st100004,this.btn.redPoint.visible=!0)},t.prototype.updateT3=function(){var e=GlobalConfig.share7Config[1];this.t3.text=e.describe},t.prototype.update=function(){this.upBtn(),this.updateCD(),this.updateT3();var e=ShareModel.ins().infos.dailyshare,t=e.count+e.reward,i=GlobalConfig.share2Config,o=0;for(var s in i)o+=1;t>o&&(this.btn.label=GlobalConfig.jifengTiaoyueLg.st101201,this.btn.redPoint.visible=!1),t=t>o?o:t,this.iconList.dataProvider=new eui.ArrayCollection(i[t].tbReward),this.t1.textFlow=TextFlowMaker.generateTextFlow(GlobalConfig.jifengTiaoyueLg.st101202),this.t0.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101203,[e.count,o])),this.t2.text=""+GameLogic.ins().actorModel.sharecoin,e.count>0&&e.count<=o&&(this.c=ShareModel.ins().getCd(),this.timer())},t.prototype.updateCD=function(){this.c<0&&(this.c=0);var e=DateUtils.getFormatBySecond(Math.floor(this.c),1);this.cd.textFlow=TextFlowMaker.generateTextFlow(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101204,[e]))},t.prototype.timer=function(){TimerManager.ins().remove(this.timer,this),this.timer2()&&TimerManager.ins().doTimer(1e3,0,this.timer,this),this.updateCD()},t.prototype.timer2=function(){return this.c--,this.c<0?!1:!0},t.prototype.close=function(){e.prototype.close.call(this),TimerManager.ins().remove(this.timer,this),this.commonWindowBg.OnRemoved(),MessageCenter.ins().removeAll(this)},t.prototype.setRedPoint=function(){this.commonWindowBg.CheckTabRedPoint()},t.prototype.OnOpenIndex=function(e){switch(e){case 1:case 2:case 4:this.G1.visible=!0;break;case 0:case 3:this.G1.visible=!1}return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(ShareWinMain.prototype,"ShareWinMain",["ICommonWindow"]),window.ShareWinMain=ShareWinMain;var ShareMissionWin=function(e){function t(){var t=e.call(this)||this;return t.missionCompel=!1,t.oldId=0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ShareMissionWinSkin",this.listData=new eui.ArrayCollection,this.m_List.itemRenderer=ItemBase,this.m_List.dataProvider=this.listData,this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101442},t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t);var o=ShareMissionModel.getInstance;this.oldId=o.missionShareId,this.missionCompel=!1,this.AddClick(this.m_CloseBtn,this.onTap),this.AddClick(this.m_MainBtn,this.onClickMainBtn),this.observe(ShareEvt.SHARE_MISSION_MSG,this.setData),this.setData()},t.prototype.close=function(){e.prototype.close.call(this)},t.prototype.setData=function(){var e=ShareMissionModel.getInstance,t=this.oldId,i=GlobalConfig.ins("Share8Config")[t];if(i){switch(this.listData.removeAll(),this.listData.replaceAll(i.tbReward),this.listData.refresh(),i.movieShowType){case 1:var o=SubRoles.ins().getSubRoleByIndex(0);this.roleShowPanel.creatAnim(o),this.roleShowPanel.setCharSexJob(o.sex,o.job,i.movieBody,i.movieWeapon,i.movieMounts,i.movieWing),this.roleShowPanel.visible=!0,this.m_AnimGroup.visible=!1,this.m_BoxImg.visible=!1;break;case 2:this.roleShowPanel.visible=!1,this.m_AnimGroup.visible=!0,this.playEff(i.moviePet+"_3"+EntityAction.STAND),this.m_BoxImg.visible=!1;break;case 3:this.roleShowPanel.visible=!1,this.m_AnimGroup.visible=!1,this.m_BoxImg.visible=!1;break;case 4:this.roleShowPanel.visible=!1,this.m_AnimGroup.visible=!1,this.m_BoxImg.visible=!0,this.m_BoxImg.source=i.phShow+"_png"}this.m_Img.text=i.describe;var s=e.missionShareState;switch(1==this.missionCompel&&(s=1),s){case 0:this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101442,this.m_MainBtn.enabled=!0;break;case 1:this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100981,this.m_MainBtn.enabled=!1}}},t.prototype.playEff=function(e){this.initEffData(),this.m_Eff.loadUrl(ResDataPath.GetMonsterBodyPath(e),!0,-1)},t.prototype.initEffData=function(){this.m_Eff||(this.m_Eff=new MovieClip,this.m_Eff.touchEnabled=!1,this.m_AnimGroup.addChild(this.m_Eff),this.m_Eff.x=this.m_AnimGroup.width/2,this.m_Eff.y=this.m_AnimGroup.height/2)},t.prototype.onTap=function(e){ViewManager.ins().close(this)},t.prototype.onClickMainBtn=function(e){SdkMgr.isWxGame()&&WxSdk.ins().shareAppMessage(),this.missionCompel=!0,this.setData(),ShareMissionSproto.ins().sendShareMission(ShareMissionModel.getInstance.missionShareId)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(ShareMissionWin.prototype,"ShareMissionWin"),window.ShareMissionWin=ShareMissionWin;var ShareMissionModel=function(){function e(){this.missionShareId=2,this.missionShareState=0}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e}();__reflect(ShareMissionModel.prototype,"ShareMissionModel"),window.ShareMissionModel=ShareMissionModel;var ShareMissionSproto=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_share_Help_result,t.getPetInit),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getPetInit=function(e){var t=ShareMissionModel.getInstance;t.missionShareId=e.id,t.missionShareState=e.state,GameGlobal.MessageCenter.dispatch(ShareEvt.SHARE_MISSION_MSG)},t.prototype.sendShareMission=function(e){var t=new Sproto.cs_share_Help_request;t.id=e,this.Rpc(C2sProtocol.cs_share_Help,t)},t}(BaseSystem);__reflect(ShareMissionSproto.prototype,"ShareMissionSproto"),window.ShareMissionSproto=ShareMissionSproto;var ShareEvt=function(){function e(){}return e.WX_SHARE="WX_SHARE",e.WX_SHARECOIN="WX_SHARECOIN",e.SHARE_MISSION_MSG="SHARE_MISSION_MSG",e}();__reflect(ShareEvt.prototype,"ShareEvt"),window.ShareEvt=ShareEvt;var FeatsStoreData=function(){function e(e){this.exchangeCount=[];for(var t=0;t<e.length;t++)this.exchangeCount[e[t].id]=e[t].count}return e}();__reflect(FeatsStoreData.prototype,"FeatsStoreData"),window.FeatsStoreData=FeatsStoreData;var HonorStoreData=function(){function e(e){this.exchangeCount=[];for(var t=0;t<e.length;t++)this.exchangeCount[e[t].id]=e[t].count}return e}();__reflect(HonorStoreData.prototype,"HonorStoreData"),window.HonorStoreData=HonorStoreData;var Shop=function(e){function t(){var i=e.call(this)||this;return i.openState=!0,i.shopPriceDic=new Dictionary,i.sysId=PackageID.Shop,i.shopData=new ShopData,i.regNetMsg(S2cProtocol.sc_shop_data,t.postUpdateShopData),i.regNetMsg(S2cProtocol.sc_shop_buy_ret,t.BuyResult),i.regNetMsg(S2cProtocol.sc_shop_refresh_ret,i.refreshGoodsSuccess),i.regNetMsg(S2cProtocol.sc_shop_jifen_buy_ret,t.RefreshIntegrationSucc),i.regNetMsg(S2cProtocol.sc_shop_update_medal_message,i.updateMedalMessage),i.regNetMsg(S2cProtocol.sc_shop_update_buy_medal,i.updateBuyMedal),i.regNetMsg(S2cProtocol.sc_mystery_shop_open_state,i.updateShopOpenState),i.regNetMsg(S2cProtocol.sc_shop_cross_tianti_glory_buy,i.onBuyHonorBack),i.regNetMsg(S2cProtocol.sc_shop_cross_tianti_glory_times,i.onHonorBuyTimesBack),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendBuy=function(e,t){var i=new Sproto.cs_shop_buy_request;i.shopType=e,i.items=new Array;for(var o=0;o<t.length;o++)i.items[o]=new Sproto.shopitem,i.items[o].id=t[o][0],i.items[o].count=t[o][1];GameSocket.ins().Rpc(C2sProtocol.cs_shop_buy,i)},t.prototype.sendRefreshShop=function(){GameSocket.ins().Rpc(C2sProtocol.cs_shop_refresh,new Sproto.cs_shop_refresh_request)},t.prototype.sendStartRefreshShop=function(){GameSocket.ins().Rpc(C2sProtocol.cs_shop_start_refresh)},t.postUpdateShopData=function(e){t.ins().shopData.parser(e)},t.postBuyResult=function(e){var t=e.result;return t},t.BuyResult=function(e){t.postBuyResult(e)},t.prototype.refreshGoodsSuccess=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.SHOP_REFRESH,!0)},t.postRefreshIntegrationSucc=function(e){var i=e.result,o=e.num;return t.ins().shopData.point=o,[i,t.ins().shopData.point]},t.RefreshIntegrationSucc=function(e){t.postRefreshIntegrationSucc(e)},t.prototype.sendIntegrationShop=function(e){var t=new Sproto.cs_shop_buy_jifen_request;t.index=e,GameSocket.ins().Rpc(C2sProtocol.cs_shop_buy_jifen,t)},t.prototype.updateMedalMessage=function(e){var t=new FeatsStoreData(e.featsStoreData);switch(e.typ){case ShopType.PET:GameLogic.ins().actorModel.petCredit=e.credit;break;case ShopType.RIDE:GameLogic.ins().actorModel.rideCredit=e.credit;break;case ShopType.CROSS:GameLogic.ins().actorModel.crossCredit=e.credit;break;case ShopType.ARTI:GameLogic.ins().actorModel.artifactCredit=e.credit}GameGlobal.MessageCenter.dispatch(MessageDef.SHOP_MEADAL_RESULT,t,e.typ)},t.prototype.updateBuyMedal=function(e){var t=e.index,i=e.count;GameGlobal.MessageCenter.dispatch(MessageDef.SHOP_MEADAL_BUY_RESULT,t,i,e.typ)},t.prototype.sendMedalMessage=function(e){var t=new Sproto.cs_shop_medal_message_request;t.typ=e,this.Rpc(C2sProtocol.cs_shop_medal_message,t)},t.prototype.sendBuyHonor=function(e){var t=new Sproto.cs_shop_cross_tianti_glory_buy_request;t.cfgIndex=e,this.Rpc(C2sProtocol.cs_shop_cross_tianti_glory_buy,t)},t.prototype.onBuyHonorBack=function(e){var t=e.code;switch(t){case 0:UserTips.ins().showTips("购买成功");break;case 1:UserTips.ins().showTips("配置错误");break;case 2:UserTips.ins().showTips("每日购买次数不足");break;case 3:UserTips.ins().showTips("荣耀值不够")}},t.prototype.onHonorBuyTimesBack=function(e){var t=new HonorStoreData(e.cfgIdNums);GameGlobal.MessageCenter.dispatch(MessageDef.SHOP_HONOR_RESULT,t)},t.prototype.sendReqHonorTimes=function(){var e=new Sproto.cs_shop_cross_tianti_glory_times_request;this.Rpc(C2sProtocol.cs_shop_cross_tianti_glory_times,e)},t.prototype.sendBuyMedal=function(e,t){var i=new Sproto.cs_shop_buy_medal_request;i.index=e,i.typ=t,this.Rpc(C2sProtocol.cs_shop_buy_medal,i)},t.prototype.updateShopOpenState=function(e){this.openState=e.openstate,GameGlobal.MessageCenter.dispatch(MessageDef.SHOP_MEADAL_OPEN_STATE)},t.prototype.getShopPrice=function(e,t){if(void 0===t&&(t=1),this.shopPriceDic.values.length<=0){var i=GlobalConfig.ins("ItemStoreConfig");for(var o in i){var s=i[o];this.shopPriceDic.set(s.itemId,s.price)}}return this.shopPriceDic.get(e)*t},t}(BaseSystem);__reflect(Shop.prototype,"Shop");var ShopData=function(){function e(){}return Object.defineProperty(e.prototype,"refushTime",{get:function(){return this._refushTime-GameServer.serverTime},set:function(e){this._refushTime=e+GameServer.serverTime},enumerable:!0,configurable:!0}),e.prototype.parser=function(e){this.shopEquipData=[],this.refushTime=e.refreshTime,this.point=e.storescore,this.times=e.refreshCount;for(var t=e.datas.length,i=0;t>i;i++){var o=new ShopEquipData;o.parser(e.datas[i]),this.shopEquipData[o.id]=o}},e.prototype.getShopEquipDataLength=function(){var e=0;return null!=this.shopEquipData&&(e=this.shopEquipData.length),e},e.prototype.getShopEquipDataByIndex=function(e){var t=null;return null!=this.shopEquipData&&e>=0&&e<this.shopEquipData.length&&(t=this.shopEquipData[e]),t},e}();__reflect(ShopData.prototype,"ShopData");var ShopEquipData=function(){function e(){this.item=new ItemData}return e.prototype.parser=function(e){this.id=e.id,this.costType=e.costType,this.costNum=e.costNum;var t=e.discountType/100;t>0&&1>t?this.discountType=e.discountType/10:this.discountType=0,this.item=new ItemData,this.item.parser(e.item)},e}();__reflect(ShopEquipData.prototype,"ShopEquipData");var ShopType;!function(e){e[e.NONE=0]="NONE",e[e.FEAT=1]="FEAT",e[e.PET=2]="PET",e[e.RIDE=3]="RIDE",e[e.CROSS=4]="CROSS",e[e.GUILD=5]="GUILD",e[e.ARTI=6]="ARTI"
}(ShopType||(ShopType={})),MessageCenter.compile(Shop),window.Shop=Shop,window.ShopData=ShopData,window.ShopEquipData=ShopEquipData;var BlackMarketItemRenderer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){var e=this;this.m_ShopItemBase=new ShopBaseItemData(this.shopBaseItem),this.m_ShopItemBase.item.mCallback=function(){e.showTip()},this.buyBtn.label=GlobalConfig.jifengTiaoyueLg.st100069,this.CEKey.label=GlobalConfig.jifengTiaoyueLg.st100070},t.prototype.dataChanged=function(){var e=this.data,t=e.item,i=GlobalConfig.itemConfig[t.configID];this.goodsID=e.id;var o="";o=e.costNum>1e5?Math.floor(e.costNum/1e4)+GlobalConfig.jifengTiaoyueLg.st100066:e.costNum+"",this.priceIcon.text=o;var s;s=i.zsLevel>0?"("+i.zsLevel+GlobalConfig.jifengTiaoyueLg.st100067+")":"(Lv."+i.level+")";var n=i.name;if(this.m_ShopItemBase._SetName(""+n+s),this.m_ShopItemBase.item.data=e.item,this.m_ShopItemBase.item.isShowJob(!0),this.m_ShopItemBase.item.showLegendEffe(),this.m_ShopItemBase.item.IsShowRedPoint(!1),this.m_ShopItemBase.item.isShowName(!1),this.m_ShopItemBase._SetDiscount(e.discountType),this.m_ShopItemBase._SetImgHot(e.discountType>0),this.priceIcon.type=1==e.costType?MoneyConst.gold:MoneyConst.yuanbao,0!=i.job){var r=UserBag.ins().calculationScore(e.item);r>0?(this.arrowIcon.visible=!0,this.CEKey.visible=!0,this.CEValue.visible=!0,this.CEValue.text=r+""):(this.arrowIcon.visible=!1,this.CEKey.visible=!1,this.CEValue.visible=!1)}else this.arrowIcon.visible=!1,this.CEKey.visible=!1,this.CEValue.visible=!1},t.prototype.showTip=function(){for(var e,t=Shop.ins().shopData,i=t.getShopEquipDataLength(),o=null,s=0;i>s;s++)o=t.getShopEquipDataByIndex(s),null!=o&&o.id==this.goodsID&&(e=o.item.configID);void 0==e&&new Error(GlobalConfig.jifengTiaoyueLg.st100068);var n=GlobalConfig.itemConfig[e];void 0!=n.type&&(0==n.type?ViewManager.ins().open(EquipDetailedWin,1,null,n.id):ViewManager.ins().open(ItemDetailedWin,0,n.id,this.data.item.count))},t}(eui.ItemRenderer);__reflect(BlackMarketItemRenderer.prototype,"BlackMarketItemRenderer"),window.BlackMarketItemRenderer=BlackMarketItemRenderer;var BlackMarketPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100053,t.skinName="BlackMarketSkin",t.name=GlobalConfig.jifengTiaoyueLg.st100053,t.m_Lan.text=GlobalConfig.jifengTiaoyueLg.st100062,t.noGoods.text=GlobalConfig.jifengTiaoyueLg.st100063,t.buyAllItemBtn.label=GlobalConfig.jifengTiaoyueLg.st100064,t.refreshShopBtn.label=GlobalConfig.jifengTiaoyueLg.st100065,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.listView.itemRenderer=BlackMarketItemRenderer},t.prototype.open=function(){Shop.ins().shopNorefrush&&(Shop.ins().shopNorefrush=!1,Shop.ins().sendStartRefreshShop(),ViewManager.ins().open(FirstShopPanel)),this.AddClick(this,this.onTap),this.AddClick(this.buyAllItemBtn,this.buyAllItem),this.AddClick(this.refreshShopBtn,this.refreshShop),MessageCenter.addListener(Shop.postUpdateShopData,this.updateData,this),MessageCenter.addListener(Shop.postBuyResult,this.buyResultCB,this),this.price.text=GlobalConfig.ins("StoreCommonConfig").refreshYuanBao+"",this.szClose.visible=!Shop.ins().openState,this.szCloseGroup.visible=Shop.ins().openState,this.listView.visible=Shop.ins().openState,this.updateData(),GameGlobal.MessageCenter.dispatch(MessageDef.SHOP_REFRESH,!1)},t.prototype.close=function(){MessageCenter.ins().removeAll(this),TimerManager.ins().removeAll(this)},t.prototype.buyAllItem=function(e){for(var t=[],i=0,o=0,s=0,n=Shop.ins().shopData,r=n.getShopEquipDataLength(),a=null,l=0,h=0;r>h;h++)if(a=n.getShopEquipDataByIndex(h),null!=a){if(0==a.item.itemConfig.type){if(l=UserBag.ins().calculationScore(a.item),!(l>0))continue;s+=1}t.push([a.id,1]),1==a.costType?i+=a.costNum:o+=a.costNum}if(UserBag.ins().getSurplusCount()<s){var c=GlobalConfig.jifengTiaoyueLg.st100054;return void UserTips.ins().showTips(c)}return GameLogic.ins().actorModel.gold<i?void UserWarn.ins().setBuyGoodsWarn(1):GameLogic.ins().actorModel.yb<o?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100014):0==i&&0==o?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100055):void Shop.ins().sendBuy(2,t)},t.prototype.refreshShop=function(e){if(Shop.ins().shopData.times<GlobalConfig.ins("StoreCommonConfig").refreshLimit){var t=this.GetRefreshData(),i=t[0],o=t[1];Checker.Money(i,o)&&Shop.ins().sendRefreshShop()}else UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100056)},t.prototype.onTap=function(e){if("buy"==e.target.name){if(UserBag.ins().getSurplusCount()<=0){var t=GlobalConfig.jifengTiaoyueLg.st100054;return void UserTips.ins().showTips(t)}var i=e.target.parent.goodsID,o=Shop.ins().shopData.getShopEquipDataByIndex(i);if(1==o.costType){if(GameLogic.ins().actorModel.gold<o.costNum)return void UserWarn.ins().setBuyGoodsWarn(1)}else if(GameLogic.ins().actorModel.yb<o.costNum)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100014);var s=o.item;if(0==s.itemConfig.type&&0!=s.itemConfig.job){var n=UserBag.ins().calculationScore(s);if(n>0){var r=[i,1];Shop.ins().sendBuy(2,[r])}else WarnWin.show(GlobalConfig.jifengTiaoyueLg.st100057,function(){},this,null,null,"sure")}else{var r=[i,1];Shop.ins().sendBuy(2,[r])}}},t.prototype.buyResultCB=function(e){1==e?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100058):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100059)},t.prototype.updateData=function(){for(var e=[],t=Shop.ins().shopData,i=t.getShopEquipDataLength(),o=null,s=0;i>s;s++)o=t.getShopEquipDataByIndex(s),null!=o&&e.push(o);this.listView.dataProvider=new eui.ArrayCollection(e),TimerManager.ins().isExists(this.refushEndTime,this)||(TimerManager.ins().doTimer(1e3,Shop.ins().shopData.refushTime,this.refushEndTime,this),this.refushEndTime()),Shop.ins().openState?this.noGoods.visible=e.length<=0:this.noGoods.visible=!1,this.point.text=GlobalConfig.jifengTiaoyueLg.st100060+Shop.ins().shopData.point;var n=this.GetRefreshData(),r=n[0],a=n[1];this.priceIcon.source=MoneyManger.MoneyConstToSource(r),this.price.text=a+"",r==MoneyConst.gold&&(this.price.textFlow=TextFlowMaker.generateTextFlow(this.price.text+("|C:0x00FF00&T:("+t.times+"/"+GlobalConfig.ins("StoreCommonConfig").goldRefreshCount+")|")))},t.prototype.GetRefreshData=function(){var e=Shop.ins().shopData,t=GlobalConfig.ins("StoreCommonConfig");return e.times>=t.goldRefreshCount?[MoneyConst.yuanbao,t.refreshYuanBao]:[MoneyConst.gold,t.refreshGold]},t.prototype.refushEndTime=function(){this.tip.text=GlobalConfig.jifengTiaoyueLg.st100061+DateUtils.getFormatBySecond(Shop.ins().shopData.refushTime)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(BlackMarketPanel.prototype,"BlackMarketPanel",["ICommonWindowTitle"]),ViewManager.ins().reg(BlackMarketPanel,LayerManager.UI_Main),window.BlackMarketPanel=BlackMarketPanel;var BuyWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="BuySkin",this.num=1,this.itemIcon.imgJob.visible=!1},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_bg.init("BuyWin",GlobalConfig.jifengTiaoyueLg.st100069),this.add1Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.add10Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sub1Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sub10Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this),this.numLabel.addEventListener(egret.Event.CHANGE,this.inputOver,this),this.num=1,this.shopID=e[0],this.updateView(),this.inputOver()},t.prototype.close=function(){this.add1Btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.add10Btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sub1Btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sub10Btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this),this.numLabel.removeEventListener(egret.Event.CHANGE,this.inputOver,this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.updateView=function(){var e=GlobalConfig.ins("ItemStoreConfig")[this.shopID],t=GlobalConfig.itemConfig[e.itemId];0==e.type?(this.itemIcon.setItemImg(MoneyManger.MoneyConstToSource(e.itemId)),this.itemName.text=MoneyManger.MoneyConstToName(e.itemId),this.itemName.textColor=ItemBase.QUALITY_COLOR[0]):(this.itemIcon.setData(t),this.itemName.text=t.name,this.itemName.textColor=ItemBase.QUALITY_COLOR[t.quality]),this.price.price=e.price,this.price.price=this.num*e.price,this.numLabel.text=this.num+"",this.used.text="（"+e.use+"）",this.used.x=this.itemName.x+this.itemName.width,null!=e.costType&&(this.price.setType(e.costType),this.totalPrice.setType(e.costType))},t.prototype.onTap=function(e){switch(e.currentTarget){case this.sub10Btn:this.num-=10;break;case this.sub1Btn:this.num-=1;break;case this.add10Btn:this.num+=10;break;case this.add1Btn:this.num+=1}this.num<1&&(this.num=1),this.numLabel.text=this.num+"",this.inputOver()},t.prototype.closeCB=function(e){ViewManager.ins().close(t)},t.prototype.buy=function(e){if(Checker.Money(this.price.getType(),this.totalPrice.price)){var t=[this.shopID,this.num];Shop.ins().sendBuy(1,[t]),this.closeCB(e)}},t.prototype.inputOver=function(){this.num=parseInt(this.numLabel.text),(isNaN(this.num)||this.num<1)&&(this.num=1),this.num>9999&&(this.num=9999),this.numLabel.text=this.num+"",this.totalPrice.price=this.num*this.price.price},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(BuyWin.prototype,"BuyWin"),window.BuyWin=BuyWin;var FirstShopPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FirstShopSkin",t}return __extends(t,e),t.prototype.open=function(){this.AddClick(this.bg,this._OnClick),this.AddClick(this.sure,this._OnClick)},t.prototype._OnClick=function(){ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(FirstShopPanel.prototype,"FirstShopPanel"),window.FirstShopPanel=FirstShopPanel;var IntegrationItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopPointItem",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.m_ShopItemBase=new ShopBaseItemData(this.shopBaseItem)},t.prototype.dataChanged=function(){var e=this.data,t=GlobalConfig.itemConfig[e.id];if(void 0!=t){this.goodsID=e.index,this.money.price=CommonUtils.overLength(e.YuanBao),this.integration.price=CommonUtils.overLength(e.integral),this.integration.iconImg.source="mall_res_002",this.m_ShopItemBase._SetName(t.name);var i=new RewardData;i.id=t.id,i.count=e.count,i.type=e.type,this.m_ShopItemBase.item.data=i}},t}(eui.ItemRenderer);__reflect(IntegrationItemRenderer.prototype,"IntegrationItemRenderer"),window.IntegrationItemRenderer=IntegrationItemRenderer;var IntegrationPanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.windowTitleIconName="L积分商店R",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.name="积分商店",this.skinName="ShopPointSkin",this.list.itemRenderer=IntegrationItemRenderer},t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.addListener(Shop.postRefreshIntegrationSucc,this.buyResultCB,this),this.updateData()},t.prototype.close=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this)},t.prototype.buyResultCB=function(e){e[0]?UserTips.ins().showTips("购买成功"):UserTips.ins().showTips("|C:0xf87372&T:购买失败|");var t=e[1];this.label1.text="我的积分："+CommonUtils.overLength(t)+"（在神秘商店购买商品或刷新获得）"},t.prototype.updateData=function(){var e=[],t=GlobalConfig.ins("IntegralStore");for(var i in t)e.push(t[i]);this.list.dataProvider=new eui.ArrayCollection(e),this.label1.text="我的积分："+CommonUtils.overLength(Shop.ins().shopData.point)+"（在神秘商店购买商品或刷新获得）"},t.prototype.onTap=function(e){if("buy"==e.target.name){var t=e.target.parent.goodsID,i=GlobalConfig.ins("IntegralStore"),o=void 0;for(var s in i){var n=i[s];n.index==t&&(o=n)}if(1!=o.type&&UserBag.ins().getSurplusCount()<=0){var r="背包已满，无法购买";return void UserTips.ins().showTips(r)}if(GameLogic.ins().actorModel.yb<o.YuanBao)return void UserTips.ins().showTips("|C:0xf87372&T:钻石不足！|");if(Shop.ins().shopData.point<o.integral)return void UserTips.ins().showTips("|C:0xf87372&T:积分不足！|");Shop.ins().sendIntegrationShop(t)}},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(IntegrationPanel.prototype,"IntegrationPanel",["ICommonWindowTitle"]),window.IntegrationPanel=IntegrationPanel;var ItemShopItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.goodsID=0,t.skinName="ItemShopItem",t.buyBtn.label=GlobalConfig.jifengTiaoyueLg.st100069,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.m_ShopItemBase=new ShopBaseItemData(this.shopBaseItem)},t.prototype.dataChanged=function(){var e=this.data;null!=e.costType&&this.priceIcon.setType(e.costType),this.goodsID=e.index;var t=GlobalConfig.itemConfig[e.itemId];this.m_ShopItemBase.item.data=e.itemId,this.m_ShopItemBase.item.isShowName(!1),this.priceIcon.setPrice(e.price>1e5?Math.floor(e.price/1e4)+GlobalConfig.jifengTiaoyueLg.st100066:e.price+"");var i=1==e.type?t.name:MoneyManger.MoneyConstToName(e.itemId);this.m_ShopItemBase._SetName(i+"（"+e.use+"）")},t}(eui.ItemRenderer);__reflect(ItemShopItemRenderer.prototype,"ItemShopItemRenderer"),window.ItemShopItemRenderer=ItemShopItemRenderer;var ItemShopPanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100072,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.name=GlobalConfig.jifengTiaoyueLg.st100072,this.skinName="ItemShopSkin",this.listView.itemRenderer=ItemShopItemRenderer,this.integralLabel.text=GlobalConfig.jifengTiaoyueLg.st100071},t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.addListener(Shop.postBuyResult,this.buyResultCB,this),this.updateData()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this)},t.prototype.updateData=function(){var e=[],t=GlobalConfig.ins("ItemStoreConfig");for(var i in t)450003!=t[i].itemId&&450004!=t[i].itemId&&e.push(t[i]);this.listView.dataProvider=new eui.ArrayCollection(e),this.priceLabel.text=GameGlobal.actorModel.yb.toString()},t.prototype.onTap=function(e){if("buy"==e.target.name){var t=e.target.parent.goodsID;ViewManager.ins().open(BuyWin,t)}},t.prototype.buyResultCB=function(e){1==e?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100058):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100059),this.priceLabel.text=GameGlobal.actorModel.yb.toString()},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(ItemShopPanel.prototype,"ItemShopPanel",["ICommonWindowTitle"]),window.ItemShopPanel=ItemShopPanel;var MedalShopItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="FeatsShopItem",t.btnGet&&(t.btnGethis.name="buy"),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.m_ShopItemBase=new ShopBaseItemData(this.shopBaseItem)},t.prototype.dataChanged=function(){var e=this.data,t=new RewardData;t.count=e.count,t.type=e.type,t.id=e.id,this.m_ShopItemBase.item.data=t,this.m_ShopItemBase.item.isShowName(!1),this.m_ShopItemBase._SetName(this.m_ShopItemBase.item.getText()),this.priceIcon.iconImg.source="little_icon_10_png",this.priceIcon.setPrice(e.feats),0==e.daycount?this.labelTimes.visible=!1:(this.labelTimes.visible=!0,this.labelTimes.text="今日已兑换"+e.exchangeCount+"/"+e.daycount)},t}(eui.ItemRenderer);__reflect(MedalShopItemRenderer.prototype,"MedalShopItemRenderer"),window.MedalShopItemRenderer=MedalShopItemRenderer;var MedalShopPanel=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o=e.call(this)||this;o.coin=0,o.listDatas=new eui.ArrayCollection,o.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100073,o.skinName="FeatsShopSkin",o._type=t[0];var s=o.getShopType(o._type);return o.windowTitleIconName=s,o.name=s,o}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=MedalShopItemRenderer,this.list.dataProvider=this.listDatas},t.prototype.open=function(){this._setCfgByName(this._type),this.observe(MessageDef.SHOP_MEADAL_RESULT,this.updataData),this.observe(MessageDef.SHOP_MEADAL_BUY_RESULT,this.buyResult),Shop.ins().sendMedalMessage(this._type);for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.addTouchEvent(this,this.onBuy,this.list),this.addTouchEvent(this,this.onGetCoin,this.label0)},t.prototype.close=function(){this.removeObserve()},t.prototype.updataData=function(e,t){if(this._type==t){var i=this._cfg;for(var o in i){var s=e.exchangeCount[i[o].index];i[o].exchangeCount=isNaN(s)?0:s}this.setListData(i)}},t.prototype.onBuy=function(e){if("buy"==e.target.name){var t=this._getValueByName(this._type),i=e.target.parent,o=i.data;if(o.exchangeCount>=o.daycount&&0!=o.daycount){var s=GlobalConfig.jifengTiaoyueLg.st100074;UserTips.ins().showTips(s)}else if(o.feats>t){var s=this._itemName+GlobalConfig.jifengTiaoyueLg.st100075;UserTips.ins().showTips(s)}else Shop.ins().sendBuyMedal(o.index,this._type)}},t.prototype.buyResult=function(e,t,i){if(this._type==i){var o=GlobalConfig.jifengTiaoyueLg.st100076,s=0,n=this._cfg;for(var r in n)if(n[r].index==e){n[r].exchangeCount=t,s=n[r].feats;break}o+=s+this._itemName,UserTips.ins().showTips(o),this.setListData(n)}},t.prototype.setListData=function(e){var t=this.scroller.viewport.scrollH;this.listDatas.removeAll();for(var i in e)this.listDatas.addItem(e[i]);this.labelCoin.text=this._getValueByName(this._type),this.scroller.viewport.scrollH=t},t.prototype.onGetCoin=function(e){ViewManager.ins().open(ShopGoodsWarn).setData(this._getItemId(this._type),1)},t.prototype.UpdateContent=function(){},t.prototype._setCfgByName=function(e){switch(e){case ShopType.FEAT:this._cfg=GlobalConfig.ins("FeatsStore"),this._itemName=GlobalConfig.jifengTiaoyueLg.st100077;break;case ShopType.PET:this._cfg=GlobalConfig.ins("PetStore"),this._itemName=MoneyManger.MoneyConstToName(MoneyConst.PETCREDIT);break;case ShopType.RIDE:this._cfg=GlobalConfig.ins("MountStore"),this._itemName=MoneyManger.MoneyConstToName(MoneyConst.RIDECREDIT);break;case ShopType.CROSS:this._cfg=GlobalConfig.ins("KufuStore"),this._itemName=MoneyManger.MoneyConstToName(MoneyConst.CROSSCREDIT);break;case ShopType.GUILD:this._cfg=GlobalConfig.ins("GuildaStore"),this._itemName=MoneyManger.MoneyConstToName(MoneyConst.GuildContrib);break;case ShopType.ARTI:this._cfg=GlobalConfig.ins("ArtifactStore"),this._itemName=MoneyManger.MoneyConstToName(MoneyConst.ARTIFACTCREDIT)}this.label0.text=GlobalConfig.jifengTiaoyueLg.st100083+this._itemName,this.label1.text=GlobalConfig.jifengTiaoyueLg.st100084+this._itemName,UIHelper.SetLinkStyleLabel(this.label0)},t.prototype._getValueByName=function(e){switch(e){case ShopType.FEAT:return GameLogic.ins().actorModel.feats;case ShopType.PET:return GameLogic.ins().actorModel.petCredit;case ShopType.RIDE:return GameLogic.ins().actorModel.rideCredit;case ShopType.CROSS:return GameLogic.ins().actorModel.crossCredit;case ShopType.GUILD:return Guild.ins().myCon;case ShopType.ARTI:return GameLogic.ins().actorModel.artifactCredit}},t.prototype._getItemId=function(e){switch(e){case ShopType.FEAT:return MoneyConst.FEATS;case ShopType.PET:return MoneyConst.PETCREDIT;case ShopType.RIDE:return MoneyConst.RIDECREDIT;case ShopType.CROSS:return MoneyConst.CROSSCREDIT;case ShopType.GUILD:return MoneyConst.GuildContrib;case ShopType.ARTI:return MoneyConst.ARTIFACTCREDIT;default:return null}},t.prototype.getShopType=function(e){var t="";switch(e){case ShopType.FEAT:t=GlobalConfig.jifengTiaoyueLg.st100073;break;case ShopType.PET:t=GlobalConfig.jifengTiaoyueLg.st100078;break;case ShopType.RIDE:t=GlobalConfig.jifengTiaoyueLg.st100079;break;case ShopType.CROSS:t=GlobalConfig.jifengTiaoyueLg.st100080;break;case ShopType.GUILD:t=GlobalConfig.jifengTiaoyueLg.st100081;break;case ShopType.ARTI:t=GlobalConfig.jifengTiaoyueLg.st100082}return t},t}(BaseView);__reflect(MedalShopPanel.prototype,"MedalShopPanel",["ICommonWindowTitle"]),window.MedalShopPanel=MedalShopPanel;var ShopBaseItemData=function(){function e(e){this.m_Comp=e,this.m_Comp&&this.m_Comp.discountIcon&&(this.m_Comp.discountIcon.visible=!1),this.m_Comp&&this.m_Comp.imgHot&&(this.m_Comp.imgHot.visible=!1),this.item.isShowName(!1),this.item.isShowJob(!0)}return Object.defineProperty(e.prototype,"itemName",{get:function(){return this.m_Comp.itemName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"discountIcon",{get:function(){return this.m_Comp.discountIcon},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"discount",{get:function(){return this.m_Comp.discount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this.m_Comp.itemIcon},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imgHot",{get:function(){return this.m_Comp.imgHot},enumerable:!0,configurable:!0}),e.prototype.dataChanged=function(){},e.prototype._SetName=function(e){"string"==typeof e?this.itemName.text=e:this.itemName.textFlow=e},e.prototype._SetDiscount=function(e){this.discount.text=e+GlobalConfig.jifengTiaoyueLg.st102090,this.discountIcon.visible=e>0},e.prototype._SetItem=function(e,t,i){var o=new RewardData;o.id=e,o.count=t,o.type=i,this.item.data=o},e.prototype._SetImgHot=function(e){this.imgHot.visible=e},e}();__reflect(ShopBaseItemData.prototype,"ShopBaseItemData"),window.ShopBaseItemData=ShopBaseItemData;var ShopWin=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shopList=[ShopType.FEAT,ShopType.PET,ShopType.RIDE,ShopType.CROSS,ShopType.GUILD],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.blackMarketPanel=new BlackMarketPanel,this.commonWindowBg.AddChildStack(this.blackMarketPanel),this.itemShopPanel=new ItemShopPanel,this.commonWindowBg.AddChildStack(this.itemShopPanel);for(var t=this.shopList,i=0,o=t.length;o>i;i++){var s=new MedalShopPanel(t[i]);this.commonWindowBg.AddChildStack(s)}if(Main.isDebug||SdkMgr.isWxGame()){var n=new ShareShopPanel;n.name=GlobalConfig.jifengTiaoyueLg.st100085,this.commonWindowBg.AddChildStack(n)}},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=void 0==e[0]?0:e[0];this.commonWindowBg.OnAdded(this,i)},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(ShopWin.prototype,"ShopWin",["ICommonWindow"]),window.ShopWin=ShopWin;var SkillConst=function(){function e(){}return e.STATE_MAX="max",e.STATE_NORMAL="normal",e.MAX_BREAK_LEVEL=50,e.MAX_NUM=5,e.AWAKE_SKILL_FINAL=7,e.AWAKE_SKILL_FIRST=5,e.MET_ID=260016,e.NORMAL_SKILL=5e4,e.MOON_SOUL_SKILL=50002,e.MOON_SOUL_RESOURCE="monster10999",e.MOON_SOUL_WORD_EFF="38001_png",e.BUFF_FREEZE=65001,e.EFF_STUN=51001,e.EFF_STUN2=62001,e.EFF_STUN_RESIST=51002,e.MOON_SOUL_GROUP_ID=64001,e.EFF_ID_STUN=1,e.EFF_ID_POISON=2,e.arrJobReduce=[0,AttributeType.atJob1DamageReduction,AttributeType.atJob2DamageReduction,AttributeType.atJob3DamageReduction],e.arrJobEnhance=[0,AttributeType.atJob1DamageEnhance,AttributeType.atJob2DamageEnhance,AttributeType.atJob3DamageEnhance],e}();__reflect(SkillConst.prototype,"SkillConst"),window.SkillConst=SkillConst;var SkillGroup=function(){function e(e,t,i,o){void 0===o&&(o="skill"),this.m_SelectIndex=0,this.m_Items=e.$children;for(var s=0,n=this.m_Items;s<n.length;s++){var r=n[s];r.currentState=o}this.m_Callback=t,this.m_ThisObject=i}return Object.defineProperty(e.prototype,"SelectedIndex",{get:function(){return this.m_SelectIndex},enumerable:!0,configurable:!0}),e.prototype.updateDesc=function(e){},e.prototype.open=function(){this.SelectItem(0),null==this.skillsOpenConfig&&(this.skillsOpenConfig=GlobalConfig.ins("SkillsOpenConfig"));for(var e=(UserSkill.ins().getSkillLimitLevel(),this.m_Items.length),t=0;e>t;t++){var i=this.m_Items[t];if(null!=i){this.skillsOpenConfig[t+1]}}for(var o=0,s=this.m_Items;o<s.length;o++){var i=s[o];i.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)}},e.prototype.close=function(){for(var e=0,t=this.m_Items;e<t.length;e++){var i=t[e];i.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)}},e.prototype._OnClick=function(e){var t=this.m_Items.indexOf(e.currentTarget);-1!=t&&(this.m_SelectIndex=t,this.SelectItem(t),this.m_Callback&&this.m_Callback.call(this.m_ThisObject,t))},e.prototype.SelectItem=function(e){for(var t=0,i=0,o=this.m_Items;i<o.length;i++){var s=o[i];s.select.visible=e==t,++t}},e.prototype.PlayUpTip=function(e,t){var i=BitmapNumber.ins().createNumPic("+"+t,"3");i.touchEnabled=!1;var o=this.m_Items[e];if(null!=o){i.x=o.width/2,i.y=o.height/4,o.addChild(i);var s=egret.Tween.get(i);s.to({y:i.y-45},1e3).to({alpha:0},500).call(function(){egret.Tween.removeTweens(i),DisplayUtils.removeFromParent(i)},this)}},e.prototype.SetRedPoint=function(e){for(var t=0;t<this.m_Items.length;++t){var i=this.m_Items[t];i.redPoint.visible=e[t]}},e.prototype.Update=function(e){for(var t=0;t<this.m_Items.length;++t){var i=this.m_Items[t],o=SubRoles.ins().getSubRoleByIndex(e),s=o.getCurSkillIDs(),n=s[t],r=o.getSkillsDataByIndex(t),a=o.skillBreakData[t],l=GlobalConfig.skillsConfig[n];null==this.skillsOpenConfig&&(this.skillsOpenConfig=GlobalConfig.ins("SkillsOpenConfig")),0>=r?(UserSkill.ins().getSkillLimitLevel()>=this.skillsOpenConfig[t+1].level?i.lock.text=GlobalConfig.jifengTiaoyueLg.st100391:i.lock.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101424,[this.skillsOpenConfig[t+1].level]),i.lock.visible=!0,i.lv&&(i.lv.text="")):(i.lock.visible=!1,i.lv&&(i.lv.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[r]))),i.lv&&(i.lv.visible=!0),i.tpLv&&(i.tpLv.visible=!0,i.tpLv.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101439,[a])),i.icon.source=l.icon+"_png",i.skillName.text=l.skinName+"",i.skillDesc&&(i.skillDesc.text=l.desc+"");var h=GameGlobal.rolesModel[e].skillBreakData;h[t]?h[t]:0}},e.prototype.Upgdate=function(e,t){for(var i=0;i<this.m_Items.length;++i){var o=this.m_Items[i],s=t[e],n=s.getCurSkillIDs(),r=n[i],a=s.getSkillsDataByIndex(i),l=GlobalConfig.skillsConfig[r];null==this.skillsOpenConfig&&(this.skillsOpenConfig=GlobalConfig.ins("SkillsOpenConfig")),0>=a?(UserSkill.ins().getSkillLimitLevel()>=this.skillsOpenConfig[i+1].level?o.lock.text=GlobalConfig.jifengTiaoyueLg.st100391:o.lock.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101424,[this.skillsOpenConfig[i+1].level]),o.lock.visible=!0,o.lv.text=""):(o.lock.visible=!1,o.lv.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101439,[a])),o.icon.source=l.icon+"_png",o.skillName.text=l.skinName+"";var h=GameGlobal.rolesModel[e].skillBreakData;h[i]?h[i]:0}},e.prototype.GetIcon=function(e){return this.m_Items[e].icon},e.prototype.GetLock=function(e){return this.m_Items[e].lock},e.prototype.GetSkillName=function(e){return this.m_Items[e].skillName},e.prototype.GetComp=function(e){return this.m_Items[e]},e}();__reflect(SkillGroup.prototype,"SkillGroup"),window.SkillGroup=SkillGroup;var SkillIcon=function(e){function t(){var t=e.call(this)||this;return t.skinName="SkillIconSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_Mask.visible=!1,this.m_LvLab.visible=!1,this.m_Shuo.visible=!1},t.prototype.setData=function(e){var t=UserSkill.ins().getskillLv(e.curRole,e.index),i=UserSkill.ins().getSkillId(e.job,e.index,t),o=GlobalConfig.ins("SkillsConfig")[i];o&&(this.m_Icon.source=o.icon+"_png",o.skillType==SkillType.TYPE1?(this.m_MainSkill.visible=!0,this.m_TipsImg.source="comp_26_26_4_png"):o.skillType==SkillType.TYPE4?(this.m_MainSkill.visible=!0,this.m_TipsImg.source="comp_26_26_3_png"):this.m_MainSkill.visible=!1)},t}(eui.Component);__reflect(SkillIcon.prototype,"SkillIcon"),window.SkillIcon=SkillIcon;var SkillIconItem=function(e){function t(){var t=e.call(this)||this;return t.isCanUse=!1,t.isGuideUser=!1,t.skinName="SkillIconSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_Mask.visible=!1,this.m_Shuo.visible=!1,this.addEvent()},t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickBegin,this,!0,10),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onClickOut,this,!0,15),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onClickEnd,this,!0,20),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.m_LvLab.visible=!1,this.m_MainSkill.visible=!1,this.isCanUse=!1;var t=this.data;if(t.skillId>=0){var i=GlobalConfig.ins("SkillsConfig")[t.skillId];i&&(this.m_Icon.source=i.icon+"_png",i.skillType==SkillType.TYPE1?(this.m_MainSkill.visible=!0,this.m_TipsImg.source="comp_26_26_4_png"):i.skillType==SkillType.TYPE4&&(this.m_MainSkill.visible=!0,this.m_TipsImg.source="comp_26_26_3_png")),this.m_LvLab.visible=!0;var o=UserSkill.ins().getskillLv(t.curRole,t.index);o==UserSkill.ins().maxLv?this.m_LvLab.text="MAX":this.m_LvLab.text="Lv."+o+"/"+UserSkill.ins().maxLv,this.isCanUse=!0}else this.m_Icon.source="";(!t.skillId||t.skillId<0)&&UserSkill.ins().checkAddSkillRedPoint(t.curRole)?this.m_RedPoint.visible=!0:this.m_RedPoint.visible=!1},t.prototype.onClickBegin=function(e){if(this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onClickMove,this),1==this.isCanUse){this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onClickMove,this),t.img||(t.img=new SkillMoveImg,t.img.width=60,t.img.height=60,t.img.anchorOffsetX=t.img.width/2,t.img.anchorOffsetY=t.img.height/2,t.img.touchEnabled=!1);var i=this.data,o={job:i.job,level:null,curRole:i.curRole,index:i.index};t.img.setData(o),this.stage.addChild(t.img);var s=e.stageX,n=e.stageY;t.img.x=s,t.img.y=n}},t.prototype.onClickEnd=function(){var e;if(SkillJobIconItem.img&&SkillJobIconItem.img.data&&(e=SkillJobIconItem.img.data),t.img&&t.img.data&&(e=t.img.data,t.img.release()),null!=e){if(e.index==this.data.index)return;for(var i=SubRoles.ins().getSubRoleByIndex(e.curRole),o=i.skillsDataIndex,s=[],n=0;7>n;n++){var r=-1;o[n]&&(r=o[n]),r==e.index&&(r=-1),s.push(r)}var a=this.itemIndex;s[a]=e.index;var l=UserSkill.ins().cutListHaveModMainSkill(s,e.curRole,e.index);UserSkill.ins().sendSkillSetFight(e.curRole,l),1==this.isGuideUser&&this.parent&&GameGlobal.MessageCenter.dispatch(MessageDef.GUIDE_SKILL_END)}this.stage&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onClickMove,this)},t.prototype.onClickMove=function(e){var i=e.stageX,o=e.stageY;t.img&&(t.img.x=i,t.img.y=o)},t.prototype.onClickOut=function(e){var i;if(t.img&&(i=t.img.data,t.img.release()),null!=i){for(var o=SubRoles.ins().getSubRoleByIndex(i.curRole),s=o.skillsDataIndex,n=[],r=0;7>r;r++){var a=-1;s[r]&&(a=s[r]),a==i.index&&(a=-1),n.push(a)}UserSkill.ins().sendSkillSetFight(i.curRole,n)}this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onClickMove,this)},t.prototype.onClick=function(){var e=this.data;if(!(e.index<=0)){var t=SubRoles.ins().getSubRoleByIndex(e.curRole),i=t.skillsDataIndex,o=i[this.itemIndex],s={job:e.job,curRole:e.curRole,index:o};ViewManager.ins().open(SkillShowWin,s)}},t
}(eui.ItemRenderer);__reflect(SkillIconItem.prototype,"SkillIconItem"),window.SkillIconItem=SkillIconItem;var SkillJobIconItem=function(e){function t(){var t=e.call(this)||this;return t.isCanUse=!1,t.isCanMove=!1,t.skinName="SkillIconSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent()},t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickBegin,this,!0,10),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onClickEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onClickEnd,this,!0,10),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.guideRemoveEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.m_MainSkill.visible=!1,this.m_Mask.visible=!1,this.m_Shuo.visible=!1,this.m_LvLab.visible=!1,this.isCanUse=!1;var t,i=this.data,o=(SubRoles.ins().getSubRoleByIndex(i.curRole),UserSkill.ins().getskillLv(i.curRole,i.index)),s=UserSkill.ins().getSkillId(i.job,i.index,o),n=GlobalConfig.ins("SkillsConfig")[s];n&&(this.m_Icon.source=n.icon+"_png",n.skillType==SkillType.TYPE1?(this.m_MainSkill.visible=!0,this.m_TipsImg.source="comp_26_26_4_png"):n.skillType==SkillType.TYPE4&&(this.m_MainSkill.visible=!0,this.m_TipsImg.source="comp_26_26_3_png"));for(var r=GlobalConfig.ins("SkillsOpenConfig")[i.job],a=null,l=0;l<r.length;l++)if(r[l].index==i.index){a=r[l],t=r[l].level;break}if(a){var h=ZhuanZhiModel.ins().getZhuanZhiLevel(i.curRole);if(h>=t)if(0>=o)this.m_Mask.visible=!0,this.m_Shuo.visible=!0,this.m_Shuo.text=GlobalConfig.jifengTiaoyueLg.st100340;else{o==UserSkill.ins().maxLv?this.m_LvLab.text="MAX":this.m_LvLab.text="Lv."+o+"/"+UserSkill.ins().maxLv;var c=GlobalConfig.ins("SkillsConfig")[a.skillId];c&&c.skillType!=SkillType.TYPE4&&(this.isCanUse=!0),this.m_LvLab.visible=!0}else this.m_Mask.visible=!0,this.m_Shuo.visible=!0,this.m_Shuo.text=GlobalConfig.jifengTiaoyueLg.st100253}var u=UserSkill.ins().checkSkillCanLvUp(i.curRole,i.index);u?this.m_RedPoint.visible=!0:this.m_RedPoint.visible=!1},t.prototype.onClickBegin=function(e){if(this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onClickMove,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClickEnd,this),1==this.isCanUse){this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onClickMove,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onClickEnd,this),t.img||(t.img=new SkillMoveImg,t.img.width=60,t.img.height=60,t.img.anchorOffsetX=t.img.width/2,t.img.anchorOffsetY=t.img.height/2,t.img.touchEnabled=!1),SkillMainPanel.Scroller.scrollPolicyV=eui.ScrollPolicy.OFF;var i=this.data;t.img.setData(i),this.stage.addChild(t.img);var o=e.stageX,s=e.stageY;t.img.x=o,t.img.y=s}},t.prototype.onClickMove=function(e){var i=e.stageX,o=e.stageY;t.img&&(t.img.x=i,t.img.y=o)},t.prototype.onClickEnd=function(e){t.img&&t.img.release(),SkillMainPanel.Scroller&&(SkillMainPanel.Scroller.scrollPolicyV=eui.ScrollPolicy.ON),this.stage&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onClickMove,this)},t.prototype.onClick=function(){var e=this.data;GuideUtils.ins().next(this),ViewManager.ins().open(SkillShowWin,e)},t}(eui.ItemRenderer);__reflect(SkillJobIconItem.prototype,"SkillJobIconItem"),window.SkillJobIconItem=SkillJobIconItem;var SkillMainItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=SkillJobIconItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);for(var t=this.data,i=(SubRoles.ins().getSubRoleByIndex(t.curRole),GlobalConfig.ins("SkillsOpenConfig")[t.job]),o=[],s=0;s<i.length;s++)if(i[s].level==t.level){var n={job:t.job,curRole:t.curRole,index:i[s].index};o.push(n)}o.length>=5?(this.m_List.layout.requestedRowCount=2,this.m_Img.source="comp_33_75_1_png"):(this.m_List.layout.requestedRowCount=1,this.m_Img.source="comp_33_75_2_png"),this.listData.replaceAll(o),this.m_SkillRoleAnim.setData(t.curRole,t.level,t.job),this.m_SkillRoleAnim.hideJob();var r=GlobalConfig.ins("TransferAppearanceConfig")[t.job][t.level];this.m_JobLab.text=r.targetJob,this.m_JobImg.source="zsjob_"+t.job+"_"+t.level+"_png"},t.prototype.release=function(){this.m_SkillRoleAnim.release()},t}(eui.ItemRenderer);__reflect(SkillMainItem.prototype,"SkillMainItem"),window.SkillMainItem=SkillMainItem;var SkillMainPanel=function(e){function t(t){var i=e.call(this)||this;return i.mWindowHelpId=32,i.isInguide=!1,i.isInguide2=!1,i.skinName="SkillMainPanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_List.itemRenderer=SkillMainItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,this.m_MainList.itemRenderer=SkillIconItem,this.mainlistData=new eui.ArrayCollection,this.m_MainList.dataProvider=this.mainlistData,t.Scroller=this.m_Scroller,this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st100250,this.languageTxt1.text=GlobalConfig.jifengTiaoyueLg.st100252,this.m_SkillRecomBtn.label=GlobalConfig.jifengTiaoyueLg.st100251,this.m_SkillRecomBtn.visible=!1},t.prototype.addViewEvent=function(){this.observe(MessageDef.SKILL_UPDATE,this.initData),this.observe(MessageDef.SKILL_UPGRADE,this.initData),this.observe(MessageDef.SKILL_GREWUPALL,this.initData),this.observe(MessageDef.CLOSE_SKILLSHOWWIN_MSG,this.checkGuide),this.observe(MessageDef.GUIDE_SKILL_END,this.hideSkillGuide),this.AddClick(this.m_SkillRecomBtn,this.onClickSkillRecomBtn),this.AddClick(this.m_GuideMianSkillChangeJobIcon,this.compeleGuide),this.AddClick(this.m_GuideMianSkillChangeJobIcon0,this.compeleGuide),this.AddClick(this.m_GuideMianSkillChangeJobIcon1,this.compeleGuide)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.m_GuideGroup.visible=!1,this.m_GuideMianSkillChangeJobIcon.visible=!1,this.m_GuideGroup0.visible=!1,this.m_GuideMianSkillChangeJobIcon0.visible=!1,this.m_GuideGroup1.visible=!1,this.m_GuideMianSkillChangeJobIcon1.visible=!1,this.addViewEvent(),this.initData()},t.prototype.close=function(){this.isInguide=!1,this.isInguide2=!1,this.removeEvent()},t.prototype.release=function(){egret.Tween.removeTweens(this.m_Finger),egret.Tween.removeTweens(this.m_Finger0),egret.Tween.removeTweens(this.m_Finger1);for(var e=this.m_List.numChildren,t=0;e>t;t++){var i=this.m_List.getChildAt(t);i instanceof SkillMainItem&&i.release()}},t.prototype.initData=function(){for(var e=this.m_RoleSelectPanel.getCurRole(),t=SubRoles.ins().getSubRoleByIndex(e),i=GlobalConfig.ins("SkillsOpenConfig"),o=(i[t.job],[]),s=0;4>s;s++){var n={job:t.job,level:s,curRole:e};o.push(n)}this.listData.replaceAll(o);for(var r=t.skillsDataIndex,a=t.skillsData,l=[],s=0;7>s;s++){var h=-1,c=-1;if(null!=r[s]){c=r[s];var u=a[c-1];h=UserSkill.ins().getSkillId(t.job,c,u)}var d={skillId:h,job:t.job,curRole:e,index:c};l.push(d)}this.mainlistData.replaceAll(l),this.setRetPoint(),this.totalPower.text=t.power.toString(),this.checkGuide()},t.prototype.onClickSkillRecomBtn=function(){var e=this.m_RoleSelectPanel.getCurRole();ViewManager.ins().open(SkillRecomWin,e)},t.prototype.setRetPoint=function(){for(var e=0;e<SubRoles.ins().rolesModel.length;e++){var t=UserSkill.ins().checkRoleSkillCanLvUp(e),i=UserSkill.ins().checkAddSkillRedPoint(e),o=!1;(1==t||1==i)&&(o=!0),this.m_RoleSelectPanel.showRedPoint(e,o)}},t.prototype.UpdateContent=function(){this.initData()},t.prototype.checkGuide=function(){},t.prototype.compeleGuide=function(){this.m_GuideMianSkillChangeJobIcon.visible=!1,this.m_GuideMianSkillChangeJobIcon0.visible=!1,this.m_GuideMianSkillChangeJobIcon1.visible=!1},t.prototype.checkSkill=function(e,t,i,o,s){var n=this.m_RoleSelectPanel.getCurRole(),r=SubRoles.ins().getSubRoleByIndex(n);if(0==n&&UserFb.ins().guanqiaID==e&&UserSkill.ins().checkSkillGuide(s)){var a={job:r.job,curRole:0,index:s};t.data=a,t.dataChanged(),0==this.isInguide&&(Setting.currPart=i,Setting.currStep=o,t.visible=!0,GuideUtils.ins().show(t,i,o),this.isInguide=!0)}},t.prototype.checkAddSkillGuide=function(e,t,i,o,s,n,r){var a=this.m_RoleSelectPanel.getCurRole(),l=SubRoles.ins().getSubRoleByIndex(a);if(UserSkill.ins().checkSkillAddGuide(t,i)&&0==SkillShowWin.isOpen&&UserFb.ins().guanqiaID==e){o.guideRemoveEvent();var h={job:l.job,curRole:0,index:i};o.data=h,o.dataChanged();var c={skillId:-1,job:l.job,curRole:a,index:-1};s.data=c,s.dataChanged(),s.isGuideUser=!0,s.itemIndex=i-1,0==this.isInguide2&&(Setting.currPart=t,Setting.currStep=0,egret.Tween.get(r,{loop:!0}).to({x:s.width/2+s.x,y:s.height/2+s.y},1e3).wait(300).call(function(){r.x=o.width/2,r.y=o.height/2}),n.visible=!0,GuideUtils.ins().show(n,t,0),this.isInguide2=!0,GuideUtils.ins().hideFinge())}},t.prototype.hideSkillGuide=function(){GuideUtils.ins().next(this.m_GuideGroup),GuideUtils.ins().next(this.m_GuideGroup0),GuideUtils.ins().next(this.m_GuideGroup1),egret.Tween.removeTweens(this.m_Finger),egret.Tween.removeTweens(this.m_Finger0),egret.Tween.removeTweens(this.m_Finger1),this.m_GuideGroup.visible=!1,this.m_GuideGroup0.visible=!1,this.m_GuideGroup1.visible=!1},t}(BaseView);__reflect(SkillMainPanel.prototype,"SkillMainPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.SkillMainPanel=SkillMainPanel;var SkillMoveImg=function(e){function t(){var t=e.call(this)||this;return t.type=1,t}return __extends(t,e),t.prototype.setData=function(e){this.data=e;var t=(SubRoles.ins().getSubRoleByIndex(e.curRole),UserSkill.ins().getskillLv(e.curRole,e.index)),i=UserSkill.ins().getSkillId(e.job,e.index,t),o=GlobalConfig.ins("SkillsConfig")[i];o&&(this.source=o.icon+"_png")},t.prototype.release=function(){this.data=null,DisplayUtils.dispose(this)},t}(eui.Image);__reflect(SkillMoveImg.prototype,"SkillMoveImg"),window.SkillMoveImg=SkillMoveImg;var SkillRecomIconItem=function(e){function t(){var t=e.call(this)||this;return t.isCanUse=!1,t.index=-1,t.skinName="SkillIconSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent()},t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.index=t.index,this.m_MainSkill.visible=!1,this.m_Mask.visible=!1,this.m_Shuo.visible=!1,this.m_LvLab.visible=!1,this.isCanUse=!1;var i=(SubRoles.ins().getSubRoleByIndex(t.curRole),UserSkill.ins().getskillLv(t.curRole,t.index)),o=UserSkill.ins().getSkillId(t.job,t.index,i),s=GlobalConfig.ins("SkillsConfig")[o];s&&(this.m_Icon.source=s.icon+"_png",s.skillType==SkillType.TYPE1?(this.m_MainSkill.visible=!0,this.m_TipsImg.source="comp_26_26_4_png"):s.skillType==SkillType.TYPE4&&(this.m_MainSkill.visible=!0,this.m_TipsImg.source="comp_26_26_3_png"));for(var n,r=GlobalConfig.ins("SkillsOpenConfig")[t.job],a=null,l=0;l<r.length;l++)if(r[l].index==t.index){a=r[l],n=r[l].level;break}if(a){var h=ZhuanZhiModel.ins().getZhuanZhiLevel(t.curRole);h>=n?0>=i?(this.m_Mask.visible=!0,this.m_Shuo.visible=!0,this.m_Shuo.text=GlobalConfig.jifengTiaoyueLg.st100273):(i==UserSkill.ins().maxLv?this.m_LvLab.text="MAX":this.m_LvLab.text="Lv."+i+"/"+UserSkill.ins().maxLv,this.m_LvLab.visible=!0,this.isCanUse=!0):(this.m_Mask.visible=!0,this.m_Shuo.visible=!0,this.m_Shuo.text=GlobalConfig.jifengTiaoyueLg.st100253)}},t.prototype.onClick=function(){var e=this.data,t={job:e.job,curRole:e.curRole,index:e.index};ViewManager.ins().open(SkillShowWin,t)},t}(eui.ItemRenderer);__reflect(SkillRecomIconItem.prototype,"SkillRecomIconItem"),window.SkillRecomIconItem=SkillRecomIconItem;var SkillRecomItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_MainList.itemRenderer=SkillRecomIconItem,this.listData=new eui.ArrayCollection,this.m_MainList.dataProvider=this.listData,this.m_List.itemRenderer=SkillRecomIconItem,this.listData2=new eui.ArrayCollection,this.m_List.dataProvider=this.listData2,this.addEvent(),this.m_UserBtn.label=GlobalConfig.jifengTiaoyueLg.st100272},t.prototype.addEvent=function(){this.m_UserBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data,i=GlobalConfig.ins("SkillsBuildingConfig")[t.job][t.index-1];if(i){for(var o=[],s=0;s<i.skillId.length;s++){var n={job:t.job,curRole:t.curRole,index:i.skillId[s],jobLv:t.index-1};o.push(n)}var r=o.pop();this.listData.replaceAll(o),this.listData2.replaceAll([r]),this.m_TitleLab.text=i.roleName}},t.prototype.onClick=function(){for(var e=this.data,t=this.m_MainList.numChildren,i=[],o=!1,s=0;t>s;s++){var n=this.m_MainList.getChildAt(s);n instanceof SkillRecomIconItem&&(1==n.isCanUse?i.push(n.index):(i.push(-1),o=!0))}var r=this.m_List.getChildAt(0);r instanceof SkillRecomIconItem&&(1==r.isCanUse?i.push(r.index):(i.push(-1),o=!0)),o?WarnWin.show(GlobalConfig.jifengTiaoyueLg.st100271,function(){UserSkill.ins().sendSkillSetFight(e.curRole,i),ViewManager.ins().close(SkillRecomWin)},this):(UserSkill.ins().sendSkillSetFight(e.curRole,i),ViewManager.ins().close(SkillRecomWin))},t}(eui.ItemRenderer);__reflect(SkillRecomItem.prototype,"SkillRecomItem"),window.SkillRecomItem=SkillRecomItem;var SkillRecomWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="SkillRecomWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=SkillRecomItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,this.m_bg.init("SkillRecomWin",GlobalConfig.jifengTiaoyueLg.st100270)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.curRole=e[0],this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){for(var e=SubRoles.ins().getSubRoleByIndex(this.curRole),t=GlobalConfig.ins("SkillsBuildingConfig")[e.job],i=[],o=0;o<t.length;o++){var s={job:e.job,index:t[o].index,curRole:this.curRole};i.push(s)}this.listData.replaceAll(i)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(SkillRecomWin.prototype,"SkillRecomWin"),ViewManager.ins().reg(SkillRecomWin,LayerManager.UI_Popup),window.SkillRecomWin=SkillRecomWin;var SkillRoleAnim=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.setData=function(e,t,i,o){void 0===o&&(o=!1),this.initRoleData(e,t);var s=GlobalConfig.ins("TransferAppearanceConfig")[i][t];if(this.m_JobLab.text=s.targetJob,this.m_JobImg.source="zsjob_"+i+"_"+t+"_png",this.addTime(),s.skillEff&&o){var n=GlobalConfig.ins("SkillsConfig")[s.skillEff];GameLogic.ins().playSkillEff(n,this.charRole,this.m_PlaySkillEffGroup,this.m_PlaySkillEffGroup)}},t.prototype.initRoleData=function(e,t){var i=SubRoles.ins().getSubRoleByIndex(e);if(i){var o=new Role;o.configID=i.configID;var s=[];o.zhuangbei=s;for(var n=[],r=0;r<i.equipsData.length;r++){var a=new EquipsData;a.item.configID=i.equipsData[r].item.configID,n.push(a)}o.equipsData=n;var l=new WingsData;l.lv=i.wingsData.lv,l.showLv=i.wingsData.showLv,l.openStatus=!1,o.wingsData=l,o.sex=i.sex,o.job=i.job,o.mountsLevel=i.mountsLevel,o.mountsShowLv=i.mountsShowLv,this.charRole||(this.charRole=ObjectPool.ins().pop("CharRole")),this.charRole.infoModel=o,this.charRole.infoModel.zhuanzhiLv=t,this.charRole.updateModel(),this.charRole.dir=3,this.charRole.playAction(EntityAction.ATTACK),this.charRole._state==EntityAction.ATTACK&&(this.charRole._body.removeEventListener(egret.Event.COMPLETE,this.onChangeState,this),this.charRole._body.addEventListener(egret.Event.COMPLETE,this.onChangeState,this)),this.m_AnimGroup.addChild(this.charRole),this.charRole.x=this.m_AnimGroup.width/2,this.charRole.y=this.m_AnimGroup.height/2,this.charRole.scaleX=1,this.charRole.scaleY=1,this.charRole.hideHpComp(),this.charRole._body.alpha=1,this.charRole._body.visible=!0,this.charRole._titleMc&&(this.charRole._titleMc.visible=!1)}},t.prototype.clearRole=function(){this.charRole&&(this.charRole._titleMc&&(this.charRole._titleMc.visible=!0),this.charRole._body&&this.charRole._body.removeEventListener(egret.Event.COMPLETE,this.onChangeState,this),this.charRole.scaleX=1,this.charRole.scaleY=1,this.charRole.hideHpComp(!0),DisplayUtils.dispose(this.charRole),this.charRole._infoModel=null,this.charRole=null)},t.prototype.onChangeState=function(){this.charRole._body.removeEventListener(egret.Event.COMPLETE,this.onChangeState,this),this.charRole.playAction(EntityAction.STAND)},t.prototype.hideJob=function(){this.m_JobGroup.visible=!1},t.prototype.addTime=function(){TimerManager.ins().removeAll(this),TimerManager.ins().doTimer(500,10,function(){this.charRole&&this.charRole._body&&0==this.charRole._body.visible&&(this.charRole._body.visible=!0,this.charRole.playAction(EntityAction.STAND))},this)},t.prototype.release=function(){TimerManager.ins().removeAll(this),this.clearRole()},t}(eui.Component);__reflect(SkillRoleAnim.prototype,"SkillRoleAnim"),window.SkillRoleAnim=SkillRoleAnim;var SkillShowWin=function(e){function t(){var t=e.call(this)||this;return t.needItemId=0,t.haveNum=0,t.skinName="SkillShowWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.m_bg.init("SkillShowWin",GlobalConfig.jifengTiaoyueLg.st100255),this.m_MPLab.visible=!1},t.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.data=e[0],this.addViewEvent(),this.setData(),t.isOpen=!0},t.prototype.close=function(){this.release()},t.prototype.release=function(){DisplayUtils.dispose(this.m_BodyEff),this.m_BodyEff=null,DisplayUtils.dispose(this.m_UpLvEff),this.m_UpLvEff=null,DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null,t.isOpen=!1,this.removeViewEvent()},t.prototype.addViewEvent=function(){this.m_NeedItem.addEvent(),this.AddClick(this.m_UpLvBtn,this.onClickLvUpBtn),this.observe(MessageDef.SKILL_UPGRADE,this.onLvUp),this.observe(MessageDef.SKILL_GREWUPALL,this.onLvUp),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.setData)},t.prototype.removeViewEvent=function(){this.m_NeedItem.removeEvent()},t.prototype.onLvUp=function(){this.setData(),this.playBodyEff()},t.prototype.setData=function(){this.m_MainBtnGroup.visible=!1,this.m_FullLab.visible=!1;var e=this.data;this.m_SkillIcon.setData(e);var t,i=ZhuanZhiModel.ins().getZhuanZhiLevel(e.curRole),o=UserSkill.ins().getskillLv(e.curRole,e.index),s=UserSkill.ins().getSkillId(e.job,e.index,o),n=!1;if(0==o?(t=GlobalConfig.ins("SkillsConfig")[s+1],this.m_UpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st100256):(t=GlobalConfig.ins("SkillsConfig")[s],this.m_UpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st100257),t){if(this.m_SkillNameLab.text=t.skinName,0==t.cd)this.m_CDLab.text="";else{var r=Math.ceil(t.cd/1e3);this.m_CDLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100258,[r])}var a=UserSkill.ins().getSkillTypeStr(t.skillType);0==o?this.m_NowLvCont.text=GlobalConfig.jifengTiaoyueLg.st100259+"："+t.desc:this.m_NowLvCont.text=GlobalConfig.jifengTiaoyueLg.st100260+"："+t.desc,this.m_SkillType.text=GlobalConfig.jifengTiaoyueLg.st100261+"："+a,t.skillArgs?this.m_MPLab.text=GlobalConfig.jifengTiaoyueLg.st100262+"："+t.skillArgs.skillCost+"MP":this.m_MPLab.text=""}var l;if(l=GlobalConfig.ins("SkillsConfig")[s+1]){if(0==o){var h=GlobalConfig.ins("SkillsConfig")[s+2];this.m_NextLvCont.text=GlobalConfig.jifengTiaoyueLg.st100263+"："+h.desc}else this.m_NextLvCont.text=GlobalConfig.jifengTiaoyueLg.st100263+"："+l.desc;var c=l.upgradeLimit,u=GameLogic.ins().actorModel.level,d=UserZs.ins()?UserZs.ins().lv:0,p=GlobalConfig.jifengTiaoyueLg.st100093;c>=1e3?(c/=1e3,p=GlobalConfig.jifengTiaoyueLg.st100067,d>=c?(this.m_NeedLvLab.textColor=Color.Green,n=!0):this.m_NeedLvLab.textColor=Color.Red):u>=c?(this.m_NeedLvLab.textColor=Color.Green,n=!0):this.m_NeedLvLab.textColor=Color.Red,0==o?this.m_NeedLvLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100264,[c+p]):this.m_NeedLvLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100265,[c+p])}else this.m_NextLvCont.text="",this.m_NeedLvLab.text="";this.m_SkillLvLab.text="Lv."+o+"/"+UserSkill.ins().maxLv,this.m_SkillLvLab.textColor=Color.FontColor;for(var f=GlobalConfig.ins("SkillsOpenConfig")[e.job],g=null,_=0;_<f.length;_++)if(f[_].index==e.index){g=f[_];break}if(n&&o<UserSkill.ins().maxLv&&i>=g.level){this.m_MainBtnGroup.visible=!0;var m=GlobalConfig.ins("SkillsUpgradeConfig")[o+1];if(m){var v=g.levelUpCost;this.needItemId=v;var y=UserBag.ins().getBagGoodsCountById(0,v),b=m.cost;this.haveNum=y,this.m_NeedItem.setData(this.needItemId,b)}}else i<g.level?(this.m_FullLab.visible=!0,this.m_FullLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100267,[g.roleName]),this.m_SkillLvLab.text=GlobalConfig.jifengTiaoyueLg.st100268,this.m_SkillLvLab.textColor=Color.Red):o>=UserSkill.ins().maxLv?(this.m_FullLab.visible=!0,this.m_FullLab.text=GlobalConfig.jifengTiaoyueLg.st100020,this.m_NextLvCont.text=""):n||(this.m_FullLab.visible=!0,this.m_FullLab.text=GlobalConfig.jifengTiaoyueLg.st100269);0==e.curRole&&2==e.index&&UserFb.ins().guanqiaID==GuideQuanQiaType.SKILL?UserSkill.ins().checkSkillGuide(2)&&(Setting.currPart=18,Setting.currStep=3,GuideUtils.ins().show(this.m_UpLvBtn,18,3)):0==e.curRole&&3==e.index&&UserFb.ins().guanqiaID==GuideQuanQiaType.SKILL1&&UserSkill.ins().checkSkillGuide(3)&&(Setting.currPart=23,Setting.currStep=3,GuideUtils.ins().show(this.m_UpLvBtn,23,3)),18==Setting.currPart&&4==Setting.currStep?(GuideUtils.ins().show(this.m_bg.closeButtomBtn,18,4),this.m_bg.closeButtomBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickClose,this)):23==Setting.currPart&&4==Setting.currStep&&(GuideUtils.ins().show(this.m_bg.closeButtomBtn,23,4),this.m_bg.closeButtomBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickClose,this))},t.prototype.onClickLvUpBtn=function(){GuideUtils.ins().next(this.m_UpLvBtn);var e=this.data,t=UserSkill.ins().getskillLv(e.curRole,e.index),i=GlobalConfig.ins("SkillsUpgradeConfig")[t+1];i&&(this.haveNum>=i.cost?UserSkill.ins().sendGrewUpSkill(e.curRole,e.index):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100217))},t.prototype.onClickClose=function(){this.m_bg.closeButtomBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickClose,this),t.isOpen=!1,GuideUtils.ins().next(this.m_bg.closeButtomBtn),ViewManager.ins().close(this),MessageCenter.ins().dispatch(MessageDef.CLOSE_SKILLSHOWWIN_MSG,1)},t.prototype.playBodyEff=function(){this.m_BodyEff=ViewManager.ins().createEff(this.m_BodyEff,this.m_BodyEffGrouo,"eff_ui_upgrade"),this.m_UpLvEff=ViewManager.ins().createEff(this.m_UpLvEff,this.m_LvUpEffGroup,"eff_ui_success"),this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_iconUpgrade")},t.prototype.onClickGetLab=function(){this.needItemId&&UserWarn.ins().setBuyGoodsWarn(this.needItemId)},t.isOpen=!1,t}(BaseEuiPanel);__reflect(SkillShowWin.prototype,"SkillShowWin"),ViewManager.ins().reg(SkillShowWin,LayerManager.UI_Popup),window.SkillShowWin=SkillShowWin;var SkillEff=function(e){function t(){var t=e.call(this)||this;return t.runTime=4e3,t.initX=-480,t.initY=-800,t.endX=480,t.endY=800,t.skinName="SkillEffSkin",t}return __extends(t,e),t.prototype.initEff=function(e){for(var t=this.m_MainGroup.numChildren,i=0;t>i;i++){var o=this.m_MainGroup.getChildAt(i);if(o&&o instanceof eui.Group){var s=void 0;o.numChildren>0&&(s=o.getChildAt(0)),s||(s=ObjectPool.ins().pop("MovieClip")),s instanceof MovieClip&&s.loadUrl(ResDataPath.GetSkillPathByID(e),!0,-1),o.addChild(s)}}},t.prototype.playEff=function(e){var t=this;this.initEff(e),this.m_MainGroup.x=this.initX,this.m_MainGroup.y=this.initY;var i=this.endX+StageUtils.ins().getWidth()-480,o=this.endY+StageUtils.ins().getHeight()-800;egret.Tween.get(this.m_MainGroup).to({x:i,y:o},this.runTime).call(function(){t.release()})},t.prototype.release=function(){for(var e=this.m_MainGroup.numChildren,t=0;e>t;t++){var i=this.m_MainGroup.getChildAt(t);if(i&&i instanceof eui.Group){var o=void 0;i.numChildren>0&&(o=i.getChildAt(0)),o&&o instanceof MovieClip&&(DisplayUtils.dispose(o),ObjectPool.ins().push(o))}}},t}(eui.Component);__reflect(SkillEff.prototype,"SkillEff"),window.SkillEff=SkillEff;var SpecialRing=function(e){function t(){var t=e.call(this)||this;return t.m_Rings={},t.regNetMsg(S2cProtocol.sc_ring_datas,t._DoInitData),t.regNetMsg(S2cProtocol.sc_ring_uplevel_result,t._DoUpLevelData),t.regNetMsg(S2cProtocol.sc_ring_open,t._DoRingOpen),t.regNetMsg(S2cProtocol.sc_ring_taskinfo,t._DoRingTask),t.regNetMsg(S2cProtocol.sc_ring_onetask,t._DoRingOneTask),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.Init=function(){var e=GlobalConfig.ins("PublicSpecialringConfig");for(var t in e){var i=e[t];this.m_Rings[i.id]={id:i.id,level:0}}},t.prototype._DoRingOpen=function(e){this.m_OpenData=e,GameGlobal.MessageCenter.dispatch(MessageDef.RING_UPDATE_OPEN_DATA)},t.prototype._DoRingTask=function(e){this.m_TaskData=e,GameGlobal.MessageCenter.dispatch(MessageDef.RING_UPDATE_TASK_DATA)},t.prototype._DoRingOneTask=function(e){var t=!1;if(this.m_TaskData)for(var i=0,o=this.m_TaskData.task;i<o.length;i++){var s=o[i];if(s.id==e.task.id){s.state=e.task.state,s.value=e.task.value,t=!0;break}}t||(null==this.m_TaskData&&(this.m_TaskData={task:[]}),this.m_TaskData.task.push(e.task),this.m_TaskData.task.sort(function(e,t){return e.id-t.id})),GameGlobal.MessageCenter.dispatch(MessageDef.RING_UPDATE_TASK_DATA)},t.prototype._DoInitData=function(e){for(var t=0,i=e.datas;t<i.length;t++){var o=i[t];this.m_Rings[o.id]=o}GameGlobal.MessageCenter.dispatch(MessageDef.RING_INIT_DATA)},t.prototype._DoUpLevelData=function(e){e.result?this.m_Rings[e.data.id]=e.data:this.m_Rings[e.data.id]?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101670):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101671),GameGlobal.MessageCenter.dispatch(MessageDef.RING_UPDATE_DATA)},t.prototype.SendUplevel=function(e){var t=new Sproto.cs_ring_uplevel_request;t.id=e,this.Rpc(C2sProtocol.cs_ring_uplevel,t)},t.prototype.SendActiveRing=function(){var e=this.GetCurActId();if(e){var t=new Sproto.cs_ring_active_request;t.id=e,this.Rpc(C2sProtocol.cs_ring_active,t)}},t.prototype.GetCurActId=function(){return this.m_OpenData?this.m_OpenData.ringid:0},t.prototype.GetCurActState=function(e){if(!this.m_TaskData)return RewardState.NotReached;var t=this.GetCurActId(),i=GlobalConfig.ins("PublicSpecialringConfig")[t];if(i){var o=i.condition[e];if(o){var s=this.GetTaskInfo(o);if(s)return s.state}}return RewardState.NotReached},t.prototype.GetCurActSurplusTime=function(){return this.m_OpenData?Math.max(this.m_OpenData.endTime-GameServer.serverTime,0):0},t.prototype.CanActiveRing=function(){if(!this.m_TaskData)return!1;var e=this.GetCurActId(),t=GlobalConfig.ins("PublicSpecialringConfig")[e];if(!t)return!1;for(var i=0,o=t.condition;i<o.length;i++){var s=o[i],n=this.GetTaskInfo(s);if(!n||n.state==RewardState.NotReached)return!1}return!0},t.prototype.GetTaskInfo=function(e){if(this.m_TaskData)for(var t=0,i=this.m_TaskData.task;t<i.length;t++){var o=i[t];if(o.id==e)return o}return null},t.prototype.GetRingData=function(e){var t=this.m_Rings[e];return t?t:null},t.prototype.HasRing=function(e){var t=this.GetRingData(e);return t&&t.level>0?!0:!1},t.prototype._CanUp=function(e,t){if(!GlobalConfig.publicSpeRRConfig[e][t])return!1;var i=GlobalConfig.publicSpeRRConfig[e][t-1];if(i){var o=UserBag.ins().getBagItemById(i.rankUpItem.id);if(o&&o.count>=i.rankUpItem.count)return!0}return!1},t.prototype.IsRedPoint=function(){for(var e in this.m_Rings){var t=this.m_Rings[e];if(t.level>0&&this.IsRedPointById(t.id))return!0}return!1},t.prototype.IsRedPointById=function(e){var t=this.GetRingData(e);return t&&t.level>0?this._CanUp(e,t.level):!1},t.HasNextLvId=function(e){return e&&GlobalConfig.publicSpeRRConfig[e.id][e.level+1]?!0:!1},t.GetRingConfig=function(e,t){return GlobalConfig.publicSpeRRConfig[e][t-1]},t.IsDeblocking=function(){return Deblocking.Check(DeblockingType.TYPE_17,!0)},t}(BaseSystem);__reflect(SpecialRing.prototype,"SpecialRing"),window.SpecialRing=SpecialRing;var RingMainWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="SpecialRingMainSkin",t.commonWindowBg.AddChildStack(new SpecialRingWin),t.commonWindowBg.AddChildStack(new RingSoulWin),t.commonWindowBg.AddChildStack(new RingBossWin),t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e?e[0]:0);var i=e[1]?e[1]:0;if(i){var o=this.commonWindowBg.GetCurViewStackElement();o&&o.OpenRingId&&o.OpenRingId(i)}this.setRedPoint(),MessageCenter.ins().addListener(MessageDef.RING_BUFF_UPDATE,this.setRedPoint,this),MessageCenter.ins().addListener(MessageDef.RING_BOSS_UPDATE,this.setRedPoint,this)},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),MessageCenter.ins().removeAll(this)},t.prototype.setRedPoint=function(){this.commonWindowBg.CheckTabRedPoint()},t.prototype.OnOpenIndex=function(e){var t=GlobalConfig.ins("RingBossCommonConfig");return 1==e?RingSoulModel.ins().isOpen?Deblocking.Check(DeblockingType.TYPE_44):(UserTips.ErrorTip("开服第"+t.openTime+"天且激活所有特戒后开启"),!1):2==e?RingSoulModel.ins().isOpen?Deblocking.Check(DeblockingType.TYPE_45):(UserTips.ErrorTip("开服第"+t.openTime+"天且激活所有特戒后开启"),!1):!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(RingMainWin.prototype,"RingMainWin",["ICommonWindow"]),window.RingMainWin=RingMainWin;var RingSoulModel=function(e){function t(){var t=e.call(this)||this;return t.isOpen=!1,t.ring_soul_data={power:0,arr:[null,null,null,null,null,null,null],buffs:null},t.ringboss_init={chalTimes:0,refreshTimes:null,activeValue2:20,activeValue:0,bossListKey:null},t.regNetMsg(S2cProtocol.sc_ring_soul_data,t.update),t.regNetMsg(S2cProtocol.sc_ring_soul_evil_change_ret,t.ringBuffChange),t.regNetMsg(S2cProtocol.sc_ring_soul_evil_wash_ret,t.ringBuffWash),t.regNetMsg(S2cProtocol.sc_ringboss_init,t.ringBossData),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.update=function(e){if(this.isOpen=!0,this.ring_soul_data.power=e.power,e.slotData)for(var t=0;t<e.slotData.length;t++)this.ring_soul_data.arr[e.slotData[t].slotIndex-1]=e.slotData[t].itemData;this.ring_soul_data.buffs=e.activeSoulEvil.length>0?e.activeSoulEvil:[{configId:2,zslevel:3}],GameGlobal.MessageCenter.dispatch(MessageDef.RING_BUFF_UPDATE)},t.prototype.ringBuffChange=function(e){0==e.retCode?UserTips.InfoTip2("更换成功"):1==e.retCode?UserTips.ErrorTip("无法在背包找到物品"):2==e.retCode&&UserTips.ErrorTip("此槽位禁止装备此物品")},t.prototype.ringBuffWash=function(e){if(0==e.retCode){var t=ViewManager.ins().getView("RingSoulWashWin");t?t.playEff(!0):UserTips.InfoTip2("洗戒语成功")}else 1==e.retCode?UserTips.ErrorTip("无法在背包找到洗戒语"):2==e.retCode&&UserTips.ErrorTip("此槽位禁止装备此洗戒语")},t.prototype.ringBossData=function(e){var t=GlobalConfig.ins("RingBossCommonConfig");this.ringboss_init.chalTimes=t.challengTimes-e.chalTimes>=0?t.challengTimes-e.chalTimes:0,this.ringboss_init.refreshTimes=e.refreshTimes,this.ringboss_init.activeValue=e.activeValue,this.ringboss_init.bossListKey=e.bosslist,GameGlobal.MessageCenter.dispatch(MessageDef.RING_BOSS_UPDATE)},t.prototype.getRingBuffName=function(){return this.ring_buff_name||(this.ring_buff_name=GlobalConfig.ins("JieYuTypeName")),this.ring_buff_name
},t.prototype.getRingBuffList=function(){return UserBag.ins().getBagEquipByType(ItemType.RINGSOUL)},t.prototype.getRingBuff=function(){return UserBag.ins().getBagEquipByType(ItemType.RINGBUFF)},t.prototype.hasRedPoint=function(){var e=GlobalConfig.ins("RingBossCommonConfig"),i=t.ins().isOpen&&e&&e.zslv<=GameGlobal.actorModel.zsLv&&e.openTime<=GameServer.serverOpenDay?!0:!1;return this.ringboss_init.activeValue<this.ringboss_init.activeValue2&&this.ringboss_init.chalTimes<1||!i?!1:!0},t.prototype.hasRedRing=function(){if(!this.isOpen)return!1;for(var e,i=!1,o=GlobalConfig.ins("ItemConfig"),s=UserBag.ins().getBagEquipByType(ItemType.RINGSOUL),n=[],r=0,a=s;r<a.length;r++){var l=a[r];n[l.itemConfig.subType-1]||(n[l.itemConfig.subType-1]=[]),n[l.itemConfig.subType-1].push(l.itemConfig)}for(var h=0;7>h;h++)if(null==t.ins().ring_soul_data.arr[h])n[h]&&n[h].length>0&&(i=!0);else if(e=o[t.ins().ring_soul_data.arr[h].configID],n[h]&&0!=n[h].length){for(var c=!1,u=0,d=n[h];u<d.length;u++){var p=d[u];p.zsLevel>e.zsLevel&&(c=!0)}i=i?i:c}else;return i},t.prototype.getAttrSoul=function(){var e=GlobalConfig.ins("ExRingSoulEvil"),i=[],o=t.ins().ring_soul_data.arr;if(!o||!e)return[];for(var s,n=GlobalConfig.ins("ItemConfig"),r=[],a=0;7>a;a++)r.push({lv:0,value:null});for(var l in o)if(o[l]){r[l].lv=n[o[l].configID].zsLevel;for(var h=0,c=o[l].att;h<c.length;h++){var u=c[h];u.type==AttributeType.atRingBuff&&(s=u.value)}r[l].value=s}for(var d in e){var p=1,f=0;for(var g in e[d]){for(var _=e[d][g].evil,m=0,v=0,y=[!1,!1,!1,!1,!1,!1,!1],b=0,C=_;b<C.length;b++){var T=C[b];for(var S in r)if(r[S].value&&r[S].lv>=e[d][g].zslevel&&r[S].value==T&&!y[S]){y[S]=!0,m++;break}v++}v=0==v?1:v,m/v>0&&m/v>f?(f=m/v,p=e[d][g].zslevel):m/v>0&&m/v==f&&(p=e[d][g].zslevel>p?e[d][g].zslevel:p)}1==f&&i.push(e[d][p].attr)}var w=[],I=[];for(var G in i)for(var L in i[G]){var P=i[G][L];w[P.type]?w[P.type].value+=P.value:w[P.type]=P}for(var k in w)w[k]&&I.push(w[k]);return I},t.prototype.getSortBufs=function(){var e=GlobalConfig.ins("ExRingSoulEvil"),i=[],o=t.ins().ring_soul_data.arr;if(!o||!e)return[];for(var s,n=GlobalConfig.ins("ItemConfig"),r=[],a=0;7>a;a++)r.push({lv:0,value:null});for(var l in o)if(o[l]){r[l].lv=n[o[l].configID].zsLevel;for(var h=0,c=o[l].att;h<c.length;h++){var u=c[h];u.type==AttributeType.atRingBuff&&(s=u.value)}r[l].value=s}for(var d in e){var p=1,f=0;for(var g in e[d]){for(var _=e[d][g].evil,m=0,v=0,y=[!1,!1,!1,!1,!1,!1,!1],b=0,C=_;b<C.length;b++){var T=C[b];for(var S in r)if(r[S].value&&r[S].lv>=e[d][g].zslevel&&r[S].value==T&&!y[S]){y[S]=!0,m++;break}v++}v=0==v?1:v,m/v>0&&m/v>f?(f=m/v,p=e[d][g].zslevel):m/v>0&&m/v==f&&(p=e[d][g].zslevel>p?e[d][g].zslevel:p)}i.push([e[d][p],f])}for(var w=[],I=0;I<i.length;I++)for(var G,L=I+1;L<i.length;L++)i[I][1]<i[L][1]&&(G=i[I],i[I]=i[L],i[L]=G),i[I][1]==i[L][1]&&i[I][0].zslevel<i[L][0].zslevel&&(G=i[I],i[I]=i[L],i[L]=G);for(var P=0,k=i;P<k.length;P++){var E=k[P];w.push(E[0])}return w},t.prototype.getKeyValue=function(){var e=t.ins().ring_soul_data.arr;if(!e)return[];for(var i,o=GlobalConfig.ins("ItemConfig"),s=[],n=0;7>n;n++)s.push({lv:0,value:null});for(var r in e)if(e[r]){s[r].lv=o[e[r].configID].zsLevel;for(var a=0,l=e[r].att;a<l.length;a++){var h=l[a];h.type==AttributeType.atRingBuff&&(i=h.value)}s[r].value=i}return s},t}(BaseSystem);__reflect(RingSoulModel.prototype,"RingSoulModel"),window.RingSoulModel=RingSoulModel;var SpecialRingActivityPanel=function(e){function t(){var t=e.call(this)||this;return t.m_RingConfig=null,t.skinName="SpecialRingActivityPanelSkin",t.list.itemRenderer=SpecialRingActivityItem,t.m_Mc=new MovieClip,t.ringEffeGroup.addChild(t.m_Mc),t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.AddClick(this.descBtn,this._OnClick),this.AddClick(this.goBtn,this._OnClick),this.observe(MessageDef.RING_UPDATE_DATA,this.UpdateContent),this.observe(MessageDef.RING_UPDATE_TASK_DATA,this.UpdateContent),this.UpdateContent()},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype._OnClick=function(e){switch(e.target){case this.descBtn:ViewManager.ins().open(RingMainWin,0,this.m_RingConfig.id),ViewManager.ins().close(this);break;case this.goBtn:SpecialRing.ins().CanActiveRing()?Checker.Money(MoneyConst.yuanbao,this.m_RingConfig.todaypay)&&SpecialRing.ins().SendActiveRing():UserTips.ErrorTip("激活条件未完成")}},t.prototype.UpdateContent=function(){var e=SpecialRing.ins().GetCurActId();if(this.m_RingConfig=GlobalConfig.ins("PublicSpecialringConfig")[e],null!=this.m_RingConfig){SpecialRingWin.SetRingTipImg(this.ringTipImg,this.m_RingConfig,null),this.powerLabel.text=SpecialRingWin.GetRingPower(this.m_RingConfig.id,1,!0),this.commonWindowBg.title=this.m_RingConfig.name,this.commonWindowBg._UpdateTitle(),this.list.dataProvider=new eui.ArrayCollection(this.GetActConfigList()),this.m_Mc.loadUrl(SpecialRingWin.GetRingEffPath(this.m_RingConfig.id),!0,-1),UIHelper.SetIconMovie(this.m_Mc,0);var t=SpecialRing.ins().HasRing(this.m_RingConfig.id);this.activeGroup.visible=t,this.deactiveGroup.visible=!t,this.descBtn.icon=SpecialRingItem.ICON_LIST[SpecialRingWin.GetIdIndex(this.m_RingConfig.id)-1]}},t.prototype.GetActConfigList=function(){for(var e=[],t=0;t<this.m_RingConfig.condition.length;++t)e.push(this.m_RingConfig);return e},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(SpecialRingActivityPanel.prototype,"SpecialRingActivityPanel");var SpecialRingActivityItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.touchEnabled=!1,this.goLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),UIHelper.SetLinkStyleLabel(this.goLabel)},t.prototype._OnClick=function(){ViewManager.ins().close(SpecialRingActivityPanel);var e=GlobalConfig.ins("ExringTaskConfig")[this.data.condition[this.itemIndex]];ViewManager.Guide(e.controlTarget,null)},t.prototype.dataChanged=function(){var e=GlobalConfig.ins("ExringTaskConfig")[this.data.condition[this.itemIndex]],t=SpecialRing.ins().GetTaskInfo(e.id),i=SpecialRing.ins().GetCurActState(this.itemIndex)!=RewardState.NotReached;if(i)this.conditionLabel.text=e.desc+"(已完成)";else{var o=8==e.type?Math.floor(.001*e.target):e.target;this.conditionLabel.text=e.desc+("("+(t?t.value:0)+"/"+o+")")}this.finishImg.visible=i,this.goLabel.visible=!i},t}(eui.ItemRenderer);__reflect(SpecialRingActivityItem.prototype,"SpecialRingActivityItem"),window.SpecialRingActivityPanel=SpecialRingActivityPanel,window.SpecialRingActivityItem=SpecialRingActivityItem;var SpecialRingPreviewPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="SpecialRingPreviewSkin",t.attrGroup.itemRenderer=SpecialRingPreviewItem1,t.list.itemRenderer=SpecialRingPreviewItem2,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1],s=(GlobalConfig.publicSpeRRConfig[i][o-1],GlobalConfig.publicSpeRRConfig[i][o]);this.arrow.visible=s?!0:!1;var n=[{num:0,id:i,level:o}],r=[{num:0,id:i,level:o}];s&&(n.push({num:1,id:i,level:o}),r.push({num:1,id:i,level:o+1})),this.attrGroup.dataProvider=new eui.ArrayCollection(r),this.list.dataProvider=new eui.ArrayCollection(n),this.m_bg.init("SpecialRingPreviewPanel","升阶")},t.prototype.close=function(){},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(SpecialRingPreviewPanel.prototype,"SpecialRingPreviewPanel");var SpecialRingPreviewItem1=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){var e=this.data;this.ringNameImg.text=SpecialRingWin.ringNames[SpecialRingWin.GetIdIndex(e.id)-1],this.levelLabel.text="（"+e.level+"阶）",this.ringIcon.source=SpecialRingWin.GetRingIconImg(e.id),this.powerLabel.text="战斗力："+SpecialRingWin.GetRingPower(e.id,e.level),SpecialRingWin.SetAttrLabelByData(this.attr,e.id,e.level,0==this.itemIndex?"ui_tj_zi_dqsx":"ui_tj_xjsx")},t}(eui.ItemRenderer);__reflect(SpecialRingPreviewItem1.prototype,"SpecialRingPreviewItem1");var SpecialRingPreviewItem2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){var e=this.data,t=e.num,i=[5,10,15,20],o=GlobalConfig.publicSpeRRConfig[e.id][e.level-1].skillid,s=GlobalConfig.skillsConfig[o].displayLevel;if(0==t)this.lv.text="当前技能",SpecialRingWin.SetSkillAttrLabel(this.content,e.id,e.level,s);else{var n=void 0,r=void 0;e.level<i[0]&&(this.lv.text="下级技能(特戒"+i[0]+"阶开启)",n=i[0],r=2),e.level>=i[0]&&e.level<i[1]&&(this.lv.text="下级技能(特戒"+i[1]+"阶开启)",n=i[1],r=3),e.level>=i[1]&&e.level<i[2]&&(this.lv.text="下级技能(特戒"+i[2]+"阶开启)",n=i[2],r=4),e.level>=i[2]&&e.level<i[3]&&(this.lv.text="下级技能(特戒"+i[3]+"阶开启)",n=i[3],r=5),e.level>=i[3]&&(this.lv.text="已经升至满级",n=i[3]),SpecialRingWin.SetSkillAttrLabel(this.content,e.id,n,r)}},t}(eui.ItemRenderer);__reflect(SpecialRingPreviewItem2.prototype,"SpecialRingPreviewItem2"),window.SpecialRingPreviewPanel=SpecialRingPreviewPanel,window.SpecialRingPreviewItem1=SpecialRingPreviewItem1,window.SpecialRingPreviewItem2=SpecialRingPreviewItem2;var SpecialRingWin=function(e){function t(){var t=e.call(this)||this;t.m_ConfigData=[],t.windowTitleIconName="L特戒R",t.skinName="SpecialRingSkin",t.name="特戒",t.list.itemRenderer=SpecialRingItem;var i=GlobalConfig.ins("PublicSpecialringConfig");for(var o in i)t.m_ConfigData.push(i[o]);return t.m_ConfigData.sort(function(e,t){return e.id-t.id}),t.m_ListData=new eui.ArrayCollection(t.m_ConfigData),t.list.dataProvider=t.m_ListData,t.m_Mc=new MovieClip,t.ringEffeGroup.addChild(t.m_Mc),t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.goBtn,this._OnClick),this.AddClick(this.getwayLabel,this._OnClick),this.AddClick(this.getwayLabel0,this._OnClick),this.AddClick(this.leftBtn,this._OnClick),this.AddClick(this.rightBtn,this._OnClick),this.AddItemClick(this.list,this._ItemClick),this.observe(MessageDef.RING_UPDATE_DATA,this.UpdateContent),this.attr2.curKey.text="下阶属性",this.list.selectedIndex=0,this.UpdateContent()},t.prototype.close=function(){},t.prototype.OpenRingId=function(e){for(var t=-1,i=0;i<this.m_ConfigData.length;++i)if(this.m_ConfigData[i].id==e){t=i;break}-1!=t?(this.list.selectedIndex=t,UIHelper.ScrollHIndex(this.list,t,80),this._UpdateData()):console.log("not id => "+e)},t.prototype._ItemClick=function(e){this._UpdateData()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.goBtn:var t=this.GetCurRingInfo();if(t&&t.level){var i=GlobalConfig.publicSpeRRConfig[t.id][t.level].rankUpItem,o=i.id,s=i.count,n=UserBag.ins().getBagItemById(o);n&&n.count>=s?SpecialRing.ins().SendUplevel(t.id):UserTips.ErrorTip("材料不足")}else{if(this.GetCurRingId()==SpecialRing.ins().GetCurActId())return void ViewManager.ins().open(SpecialRingActivityPanel);var r=this.GetCurRingId(),a=GlobalConfig.ins("PublicSpecialringConfig")[r];if(a.activateid){var n=UserBag.ins().getBagItemById(a.activateid);if(n&&n.count>=a.actnum)return void SpecialRing.ins().SendUplevel(r)}if(a.pay)Checker.Money(MoneyConst.yuanbao,a.pay)&&SpecialRing.ins().SendUplevel(r);else{var n=UserBag.ins().getBagItemById(a.activateid);n&&n.count>=a.actnum?SpecialRing.ins().SendUplevel(r):UserTips.ErrorTip("材料不足")}}break;case this.getwayLabel:var r=this.GetCurRingId(),t=this.GetCurRingInfo(),l=t&&t.level?t.level:1;ViewManager.ins().open(SpecialRingPreviewPanel,r,l),console.log(r,l);break;case this.getwayLabel0:var t=this.GetCurRingInfo();if(t&&t.level)UserWarn.ins().setBuyGoodsWarn(SpecialRing.GetRingConfig(t.id,t.level).rankUpItem.id);else{var r=this.GetCurRingId(),h=GlobalConfig.ins("PublicSpecialringConfig")[r];h.gainWay&&ViewManager.Guide(h.gainWay[0][1][0],0)}break;case this.leftBtn:break;case this.rightBtn:}},t.prototype._UpdateList=function(){this.m_ListData.replaceAll(this.m_ConfigData)},t.prototype.GetCurRingId=function(){var e=this.list.selectedIndex,t=this.m_ConfigData[e];return t.id},t.prototype.GetCurRingInfo=function(){return SpecialRing.ins().GetRingData(this.GetCurRingId())},t.prototype.UpdateContent=function(){this._UpdateList(),this._UpdateData()},t.prototype._UpdateData=function(){this.group01.visible=!1,this.getwayLabel0.visible=!1,this.fullGroup.visible=!1,this.actGroup.visible=!0,this.jihuoTips.visible=!1;var e=this.list.selectedIndex,i=this.m_ConfigData[e],o=SpecialRing.ins().GetRingData(i.id);this.ringName.text=i.name,t.SetRingTipImg(this.ringTipImg,i,o);var s=o.level?o.level:1,n=GlobalConfig.publicSpeRRConfig[i.id][s-1].skillid,r=GlobalConfig.skillsConfig[n].displayLevel;t.SetSkillAttrLabel(this,i.id,s,r);var a=SpecialRing.GetRingConfig(i.id,s);if(t.SetAttrLabel(this.attr1,AttributeData.getAttStr(a.attrs,0,1,"：")),t.SetAttrLabel(this.attr2,null),this.ringOtherAttr.text=a?a.announce:"",o.level>0){var l=SpecialRing.GetRingConfig(o.id,o.level),h=SpecialRing.GetRingConfig(o.id,o.level+1);h?(this._SetConsume(l.rankUpItem.id,l.rankUpItem.count),t.SetAttrLabel(this.attr2,AttributeData.getAttStr(h.attrs,0,1,"："),"ui_tj_xjsx"),this._SetGetwayLabel(GetwayLabel.GainItemLabel(l.rankUpItem.id)),this.group01.visible=!0):(this.fullGroup.visible=!0,this.actGroup.visible=!1)}else this.actGroup.visible=!1,this.jihuoTips.visible=!0,this.ringOtherAttr.text="属性对所有角色有效";this.powerLabel.text=t.GetRingPower(i.id,s),this.m_Mc.loadUrl(ResDataPath.GetUIEffePath("eff_ui_rings_00"+t.GetIdIndex(i.id)),!0,-1),UIHelper.SetIconMovie(this.m_Mc,0)},t.prototype._SetGetwayLabel=function(e){e?(this.getwayLabel0.visible=!0,UIHelper.SetLinkStyleLabel(this.getwayLabel0,"获取材料")):this.getwayLabel0.visible=!1},t.prototype._SetConsume=function(e,t){var i=GlobalConfig.itemConfig[e];this.consumeName.text="消耗："+i.name;var o=UserBag.ins().getBagItemById(e);this.consumeValue.textFlow=ConsumeLabel.GetValueColor(o?o.count:0,t)},t.SetAttrLabelByData=function(e,t,i,o){void 0===o&&(o=null);var s=GlobalConfig.publicSpeRRConfig[t][i-1];this.SetAttrLabel(e,AttributeData.getAttStr(s.attrs,0,1,"："))},t.SetAttrLabel=function(e,t,i){return void 0===i&&(i=null),null==t?(e.visible=!1,void(e.height=0)):(e.visible=!0,e.height=106,e.curKey.source=i?i:"ui_tj_tjsx",void(e.curAttr.text=t))},t.SetSkillAttrLabel=function(e,i,o,s){var n=GlobalConfig.ins("PublicSpecialringConfig")[i],r=GlobalConfig.skillsConfig[GlobalConfig.publicSpeRRConfig[n.id][o-1].skillid];e.ringSkillName.text=n.skillname+"(Lv"+s+")",e.ringSkillAttr.text=r.desc,e.ringIcon.source="ui_tj_jn_0"+t.GetIdIndex(i)+"_png"},t.GetIdIndex=function(e){return e%10},t.GetRingEffPath=function(e){return ResDataPath.GetUIEffePath("eff_ui_rings_00"+t.GetIdIndex(e))},t.GetRingNameImg=function(e){return"ui_tj_mz_sj_0"+t.GetIdIndex(e)+"_png"},t.GetRingIconImg=function(e){return"comp_70_70_0"+t.GetIdIndex(e)+"_png"},t.GetRingPower=function(e,t,i){void 0===i&&(i=!1);var o=GlobalConfig.publicSpeRRConfig[e][t-1];return(ItemConfig.CalcAttrScoreValue(o.attrs)+o.power)*(i?SubRoles.MAX_COUNT:SubRoles.ins().subRolesLen||1)},t.SetRingTipImg=function(e,t,i){e.visible=!1},t.ringNames=["防御神戒","神力神戒","暴击神戒","治愈神戒","护身神戒","复活神戒","麻痹神戒"],t._REG=new RegExp("{(\\w+)}","g"),t}(BaseEuiPanel);__reflect(SpecialRingWin.prototype,"SpecialRingWin",["ICommonWindowTitle"]);var SpecialRingItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data,i=SpecialRing.ins().GetRingData(e.id);i&&i.level?(this.label.text=i.level+" 阶",this.label.textColor=Color.Orange):(this.label.text="未激活",this.label.textColor=5461335),this.redPoint.visible=SpecialRing.ins().IsRedPointById(e.id),this.iconDisplay.source=t.ICON_LIST[SpecialRingWin.GetIdIndex(e.id)-1]},t.ICON_LIST=["comp_70_70_01_png","comp_70_70_02_png","comp_70_70_03_png","comp_70_70_04_png","comp_70_70_05_png","comp_70_70_06_png","comp_70_70_07_png"],t}(eui.ItemRenderer);__reflect(SpecialRingItem.prototype,"SpecialRingItem"),window.SpecialRingWin=SpecialRingWin,window.SpecialRingItem=SpecialRingItem;var RingBossItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="RingBossItemSkin",t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.euiComplete,t),t}return __extends(t,e),t.prototype.euiComplete=function(e){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.euiComplete,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this)},t.prototype.btnClick=function(e){if(RingSoulModel.ins().hasRedPoint()){ViewManager.ins().close(RingMainWin);var t=new Sproto.sc_ringboss_enter_req_request;t.id=this.data.id,GameSocket.ins().Rpc(C2sProtocol.sc_ringboss_enter_req,t,null,this)}else UserTips.ErrorTip("挑战次数或历练值不足，无法挑战")},t.prototype.dataChanged=function(){this.btn.redPoint.visible=RingSoulModel.ins().hasRedPoint(),this.zhanLi.text="推荐战力: "+this.data.recommendpower,this.group.itemRenderer=ItemBase,this.group.dataProvider=new eui.ArrayCollection(this.data.showitemid),this.group.validateNow();for(var e=0;e<this.group.numChildren;e++){var t=this.group.getChildAt(e);t&&t.showItemEffect()}var i=GlobalConfig.monstersConfig,o=i[this.data.showBoss];this.jie.text=o.name+"",this.mc_g.removeChildren(),this.mc=new MovieClip,this.mc.scaleX=this.mc.scaleY=.6,this.mc_g.addChild(this.mc),this.mc.loadUrl(ResDataPath.GetMonsterBodyPath(o.avatar+"_3s"),!0,-1)},t}(eui.ItemRenderer);__reflect(RingBossItem.prototype,"RingBossItem"),window.RingBossItem=RingBossItem;var RingBossWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName="L戒灵BOSSR",t.skinName="RingBossSkin",t.name="戒灵BOSS",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.updataList=function(e){this.list.itemRenderer=RingBossItem,this.listArr=new eui.ArrayCollection,this.listArr.source=e,this.list.dataProvider=this.listArr},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];MessageCenter.ins().addListener(MessageDef.RING_BOSS_UPDATE,this.UpdateContent,this);var i=new Sproto.cs_ringboss_init_request;GameSocket.ins().Rpc(C2sProtocol.cs_ringboss_init,i,null,this),this.AddClick(this.btn,this.onBtn),this.yb.priceLabel.textFlow=TextFlowMaker.generateTextFlow("<font color=0x535557>300</font>"),this.UpdateContent()},t.prototype.onBtn=function(e){var t=new Sproto.sc_ringboss_refresh_req_request;GameSocket.ins().Rpc(C2sProtocol.sc_ringboss_refresh_req,t,null,this)},t.prototype.CheckRedPoint=function(){return RingSoulModel.ins().hasRedPoint()},t.prototype.close=function(){MessageCenter.ins().removeAll(this)},t.prototype.UpdateContent=function(){var e=GlobalConfig.ins("RingBossCommonConfig"),t=RingSoulModel.ins().ringboss_init.activeValue,i=e.useItem,o=RingSoulModel.ins().ringboss_init.chalTimes,s=e.challengTimes;this.refreshCount=RingSoulModel.ins().ringboss_init.refreshTimes?RingSoulModel.ins().ringboss_init.refreshTimes:0,t>=i?this.count.textFlow=(new egret.HtmlTextParser).parser("<font color='0x535557'>消耗:次数"+o+"/"+s+"或历练值</font><font color='0x00ff00'>"+t+"</font><font color='0x535557'>/"+i+"（活跃任务可获得历练值）</font>"):this.count.textFlow=(new egret.HtmlTextParser).parser("<font color='0x535557'>消耗:次数"+o+"/"+s+"或历练值</font><font color='0xf87372'>"+t+"</font><font color='0x535557'>/"+i+"（活跃任务可获得历练值）</font>");var n=GlobalConfig.ins("RingBossConfig");if(RingSoulModel.ins().ringboss_init.bossListKey){for(var r=[],a=0,l=RingSoulModel.ins().ringboss_init.bossListKey;a<l.length;a++){var h=l[a];r.push(n[h])}this.updataList(r)}var c=e.refreshNumber,u=0,d=e.mianfeiNumber;c&&(u=this.refreshCount>=c.length?c[c.length-1]:c[this.refreshCount]),e.mianfeiNumber-this.refreshCount>0?(this.yb.visible=!1,this.count0.visible=!0,this.count0.text="免费刷新次数 "+(e.mianfeiNumber-this.refreshCount)+"/"+d):(this.yb.visible=!0,this.yb.priceLabel.text=""+u,this.count0.visible=!1)},t}(BaseView);__reflect(RingBossWin.prototype,"RingBossWin",["ICommonWindowTitle"]),window.RingBossWin=RingBossWin;var RingBuffName=function(e){function t(){var t=e.call(this)||this;return t.imgSrc=["comp_46_21_0_png","comp_46_21_02_png"],t.skinName="RingBuffNameSkin",t}return __extends(t,e),t.prototype.setLabel=function(e){this.text.text=e},t.prototype.setImage=function(e){e?this.bg.source=this.imgSrc[1]:this.bg.source=this.imgSrc[0]},t}(eui.Component);__reflect(RingBuffName.prototype,"RingBuffName"),window.RingBuffName=RingBuffName;var RingSoulChangeItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="RingSoulChangeItemSkin",t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.euiComplete,t),t.group1.visible=!0,t.group2.visible=!1,t}return __extends(t,e),t.prototype.euiComplete=function(e){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.euiComplete,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this)},t.prototype.btnClick=function(e){var t=new Sproto.cs_ring_soul_evil_change_request;t.slotIndex=ViewManager.ins().getView("RingSoulChangeWin").n+1,t.handle=this.data.data.handle,GameSocket.ins().Rpc(C2sProtocol.cs_ring_soul_evil_change,t,null,this)},t.prototype.dataChanged=function(){var e=["0","一","二","三","四","五","六","七","八","九","十","十一","十二"],t=this.data.data.itemConfig,i=this.data.data.att;this.itemIcon.setData({icon:t.icon,id:t.id,quality:t.quality}),this.jie.text=t.name+" "+e[t.zsLevel]+"转";var o=ZhuanZhiModel.ins().getZhuanZhiEquipBaseAttr(this.data.data);this.attr0.text=AttributeData.getAttStr(o,0,1,"："),this.attr1.y=this.attr0.height+this.attr0.y+10,this.buff.y=this.attr1.y-6,this.buff.setImage(!0);var s;if(i instanceof Array)for(var n=0;n<i.length;n++)i[n].type==AttributeType.atRingBuff&&(s=RingSoulModel.ins().getRingBuffName()[i[n].value].name);this.buff.setLabel(s),this.data.is?this.btn.label="更换":this.btn.label="装备"},t.array=["防御","神力","暴击","治愈","护身","复活","麻痹"],t}(eui.ItemRenderer);__reflect(RingSoulChangeItem.prototype,"RingSoulChangeItem"),window.RingSoulChangeItem=RingSoulChangeItem;var RingSoulChangeWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName="L更换R",t.isDress=!1,t.skinName="RingSoulChangeSkin",t.name="更换",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.n=e[0],MessageCenter.ins().addListener(MessageDef.RING_BUFF_UPDATE,this.update,this),this.update(),this.m_bg.init("RingSoulChangeWin","更换")},t.prototype.onClose=function(e){ViewManager.ins().close(t)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.updataList=function(e){for(var t=[],i=0;i<e.length;i++)t.push({data:e[i],is:this.isDress});this.list.itemRenderer=RingSoulChangeItem,this.listArr=new eui.ArrayCollection,this.listArr.source=t,this.list.dataProvider=this.listArr},t.prototype.update=function(){this.UpdateContent();var e=[],t=[];e=UserBag.ins().getBagEquipByType(ItemType.RINGSOUL);for(var i=0,o=e;i<o.length;i++){var s=o[i];s.itemConfig.subType==this.n+1&&t.push(s)}this.updataList(t)},t.prototype.onBtn=function(e){},t.prototype.CheckRedPoint=function(){return!1},t.prototype.close=function(){},t.prototype.UpdateContent=function(){var e=this.n;if(RingSoulModel.ins().ring_soul_data.arr[e]&&(this.isDress=!0),this.isDress){this.itemIcon0.group1.visible=!0,this.itemIcon0.group2.visible=!1,this.itemIcon0.current.visible=!0,this.itemIcon0.btn.visible=!1;var t=RingSoulModel.ins().ring_soul_data.arr[e],i=ZhuanZhiModel.ins().getZhuanZhiEquipBaseAttr(t);this.itemIcon0.attr0.text=AttributeData.getAttStr(i,0,1,"：");var o=GlobalConfig.ins("ItemConfig")[t.configID],s=""+o.name;this.itemIcon0.attr1.y=this.itemIcon0.attr0.height+this.itemIcon0.attr0.y+10,this.itemIcon0.buff.y=this.itemIcon0.attr1.y-6;var n=["0","一","二","三","四","五","六","七","八","九","十","十一","十二"];this.itemIcon0.jie.text=s+" "+n[o.zsLevel]+"转";var r,a=t.att;if(a instanceof Array)for(var l=0;l<a.length;l++)a[l].type==AttributeType.atRingBuff&&(r=RingSoulModel.ins().getRingBuffName()[a[l].value].name);this.itemIcon0.buff.setLabel(r),this.itemIcon0.buff.setImage(!0),this.itemIcon0.itemIcon.setData(o)}else this.itemIcon0.group1.visible=!1,this.itemIcon0.group2.visible=!0},t}(BaseEuiPanel);__reflect(RingSoulChangeWin.prototype,"RingSoulChangeWin",["ICommonWindow"]),ViewManager.ins().reg(RingSoulChangeWin,LayerManager.UI_Popup),window.RingSoulChangeWin=RingSoulChangeWin;var RingSoulWashChoseeWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="RingSoulWashChoseeSkin",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.item_data=e[0],this.up(),this.updateView(),this.m_bg.init("RingSoulWashChoseeWin","选择材料")},t.prototype.up=function(){this.item_data?(this.itemChosee.label.visible=!0,this.itemChosee.label.text="当前选择",this.itemChosee.group1.visible=!0,this.itemChosee.btn.label="取消选择",this.itemChosee.itemBase.setDataByConfig(this.item_data.itemConfig),this.itemChosee.itemBase.setCount(""+this.item_data.count),this.itemChosee.itemBase.itemConfig=this.item_data.itemConfig):(this.itemChosee.label.visible=!0,this.itemChosee.group1.visible=!1)},t.prototype.updateView=function(){var e=UserBag.ins().getBagGoodsByType(ItemType.RINGBUFF),t=[];if(e)for(var i=0,o=e;i<o.length;i++){var s=o[i];0!=s.itemConfig.subType&&t.push(s)}this.list.itemRenderer=RingSoulWashChoseeItem,this.list.dataProvider=new eui.ArrayCollection(t)},t.prototype.onClose=function(e){ViewManager.ins().close(t)},t.prototype.close=function(){},t}(BaseEuiPanel);__reflect(RingSoulWashChoseeWin.prototype,"RingSoulWashChoseeWin"),ViewManager.ins().reg(RingSoulWashChoseeWin,LayerManager.UI_Popup);var RingSoulWashChoseeItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="RingSoulWashChoseeItemSkin",t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.euiComplete,t),t}return __extends(t,e),t.prototype.euiComplete=function(e){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.euiComplete,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this)},t.prototype.btnClick=function(e){var t=ViewManager.ins().getView(RingSoulWashChoseeWin),i=ViewManager.ins().getView(RingSoulWashWin);ViewManager.ins().close(t),i&&("选择"==e.currentTarget.label?i.commonWindowBg.GetCurViewStackElementByIndex(0).updataChosee(this.data):i.commonWindowBg.GetCurViewStackElementByIndex(0).updataChosee(null))},t.prototype.dataChanged=function(){this.label.visible=!1,this.itemBase.setCount(""+this.data.count),this.itemBase.setDataByConfig(this.data.itemConfig),this.itemBase.itemConfig=this.data.itemConfig},t}(eui.ItemRenderer);__reflect(RingSoulWashChoseeItem.prototype,"RingSoulWashChoseeItem"),window.RingSoulWashChoseeWin=RingSoulWashChoseeWin,window.RingSoulWashChoseeItem=RingSoulWashChoseeItem;var RingSoulWashFinish=function(e){function t(){var t=e.call(this)||this;return t.skinName="RingSoulWashFinishSkin",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1],s=RingSoulModel.ins().ring_soul_data.arr;if(s[i]&&null!=i&&null!=o){var n,r=s[i].att;for(var a in r)r[a].type==AttributeType.atRingBuff&&(n=r[a].value);var l=ZhuanZhiModel.ins().getZhuanZhiEquipBaseAttr(s[i]),h=AttributeData.getAttStr(l,0,1,"： ");this.attr1.text=h,this.attr2.y=this.attr1.height+this.attr1.y+10,this.attr3_1.y=this.attr2.y-6,this.attr1_2.text=h,this.attr2_2.y=this.attr2.y,this.attr3_2.y=this.attr3_1.y,this.attr3_1.setImage(!0),this.attr3_2.setImage(!0);var c=RingSoulModel.ins().getRingBuffName()[o].name,u=RingSoulModel.ins().getRingBuffName()[n].name;this.attr3_1.setLabel(c),this.attr3_2.setLabel(u)}this.m_bg.init("RingSoulWashFinish","提示")},t.prototype.clickClose=function(e){ViewManager.ins().close(t)},t.prototype.close=function(){},t}(BaseEuiPanel);__reflect(RingSoulWashFinish.prototype,"RingSoulWashFinish"),ViewManager.ins().reg(RingSoulWashFinish,LayerManager.UI_Popup),window.RingSoulWashFinish=RingSoulWashFinish;var RingSoulWashWin=function(e){function t(){var t=e.call(this)||this;return t.item_num=0,t.num=null,t.value=null,t.skinName="SpecialRingMainSkin",t.commonWindowBg.AddChildStack(new RingSoulWashPanel),t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.item_num=e[0],this.commonWindowBg.OnAdded(this),this.commonWindowBg.tabBar.visible=!1},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.setRedPoint=function(){this.commonWindowBg.CheckTabRedPoint()},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.playEff=function(e){var t=new MovieClip,i=e?"eff_success":"eff_fail";t.scaleX=t.scaleY=1,t.rotation=0,t.x=240,t.y=300,t.loadUrl(ResDataPath.GetUIEffePath(i),!0,1,function(){DisplayUtils.dispose(t),t=null;var e=ViewManager.ins().getView("RingSoulWashWin");e&&ViewManager.ins().open(RingSoulWashFinish,e.num,e.value)}),this.addChild(t)},t}(BaseEuiPanel);__reflect(RingSoulWashWin.prototype,"RingSoulWashWin",["ICommonWindow"]),ViewManager.ins().reg(RingSoulWashWin,LayerManager.UI_Popup);var RingSoulWashPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName="L戒语洗练R",t.item_num=0,t.array=[!1,!1,!1,!1,!1,!1,!1],t.ring_buff_name={},t.skinName="RingSoulWashSkin",t.name="戒语洗练",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.item_num=ViewManager.ins().getView("RingSoulWashWin").item_num,this.AddClick(this.btn0,this.onBtn0),UIHelper.SetLinkStyleLabel(this.attr),this.AddClick(this.attr,this.showAttr),this.AddClick(this.itemBase,this.onChosee),MessageCenter.ins().addListener(MessageDef.RING_BUFF_UPDATE,this.UpdateContent,this),this.ring_buff_name=RingSoulModel.ins().getRingBuffName();var i=this.item_bg.$children;i[0].visible=!1,i[this.item_num].visible=!0},t.prototype.showAttr=function(){var e=new eui.Component;e.skinName="RingSoulAttrSkin";for(var t="",i=RingSoulModel.ins().ring_soul_data.arr,o=[],s=[],n=0,r=i;n<r.length;n++){var a=r[n],l=ZhuanZhiModel.ins().getZhuanZhiEquipBaseAttr(a);if(a)for(var h=0,c=l;h<c.length;h++){var u=c[h];o[u.type]||(o[u.type]=0),o[u.type]+=u.value}}var d=RingSoulModel.ins().getAttrSoul();for(var p in d)o[d[p].type]?o[d[p].type]+=d[p].value:o[d[p].type]=d[p].value;for(var f=0;f<o.length;f++)o[f]&&s.push({type:f,value:o[f]});t=AttributeData.getAttStrForRing(s),e.attr.text=t,e.addEventListener(egret.TouchEvent.TOUCH_END,function(){e.$getEventMap()[egret.TouchEvent.TOUCH_END]=null,LayerManager.UI_Popup.removeChild(e)},e),LayerManager.UI_Popup.addChild(e)},t.prototype.reItem=function(){this.itemBase.setItemImg("pf_orange_02_png"),this.itemBase.setCount(""),this.itemBase.setItemBg(ResDataPath.GetItemQualityName(0)),this.itemBase.nameTxt.text="选择材料";var e=UserBag.ins().getBagGoodsByType(ItemType.RINGBUFF),t=0;if(e)for(var i=0,o=e;i<o.length;i++){var s=o[i];0==s.itemConfig.subType&&(t=s.count)}this.count_bottom.text="消耗洗戒石: "+t+"/1",this.count_bottom.visible=!0},t.prototype.onChosee=function(e){ViewManager.ins().open(RingSoulWashChoseeWin,this.item_data)},t.prototype.onBtn0=function(e){var t=RingSoulModel.ins().ring_soul_data.arr[this.item_num];if(!t)return UserTips.ErrorTip("该槽位未装备戒灵符文");var i,o=t.att;for(var s in o)o[s].type==AttributeType.atRingBuff&&(i=o[s].value);if(this.item_data){var n=this.item_data.itemConfig,r=void 0;if(r=n.subType,r&&i&&r==i){var a=GlobalConfig.ins("JieYuTypeName")[r].name;return UserTips.ErrorTip("当前戒语已经是"+a+"，不能重复洗炼")}var l=new Sproto.cs_wash_soul_evil_type_request;l.slotIndex=this.item_num+1,l.handle=this.item_data.handle,GameSocket.ins().Rpc(C2sProtocol.cs_wash_soul_evil_type,l,null,this);var h=ViewManager.ins().getView("RingSoulWashWin");return h&&(h.num=this.item_num,h.value=i),void(this.item_data=null)}var c=UserBag.ins().getBagGoodsByType(ItemType.RINGBUFF);if(c.length<1)return UserTips.ErrorTip("背包无洗戒石");for(var u,d=0,p=c;d<p.length;d++){var f=p[d];
0==f.itemConfig.subType&&(u=f)}if(!u)return UserTips.ErrorTip("背包无洗戒石");var g=new Sproto.cs_wash_soul_evil_type_request;g.slotIndex=this.item_num+1,g.handle=u.handle,GameSocket.ins().Rpc(C2sProtocol.cs_wash_soul_evil_type,g,null,this);var h=ViewManager.ins().getView("RingSoulWashWin");return void(h&&(h.num=this.item_num,h.value=i))},t.prototype.updataChosee=function(e){e?(this.item_data=e,this.itemBase.setDataByConfig(e.itemConfig),this.updateAtt()):(this.item_data=null,this.reItem(),this.updateAtt())},t.prototype.CheckRedPoint=function(){return!1},t.prototype.close=function(){MessageCenter.ins().removeAll(this)},t.prototype.onClick=function(e){var t=this.item_bg.$children;t[this.item_num].visible=!1,this.item_num=e.currentTarget.parent.getChildIndex(e.currentTarget)?e.currentTarget.parent.getChildIndex(e.currentTarget):0,t[this.item_num].visible=!0,this.updateAtt()},t.prototype.updateAtt=function(){var e=RingSoulModel.ins().ring_soul_data.arr[this.item_num];if(this.attr_g.x=0,e){var t=ZhuanZhiModel.ins().getZhuanZhiEquipBaseAttr(e);this.attr1.text=AttributeData.getAttStr(t,0,1,"： ");var i,o=e.att;if(o instanceof Array)for(var s=0;s<o.length;s++)o[s].type==AttributeType.atRingBuff&&(i=RingSoulModel.ins().getRingBuffName()[o[s].value].name);this.attr3_1.setLabel(i),this.attr3_1.setImage(!0),this.attr_g.visible=!0,this.isDress.visible=!1}else this.attr_g.visible=!1,this.isDress.visible=!0,this.atr2_g.visible=!1;if(this.attr2.y=this.attr1.height+this.attr1.y+6,this.attr2.text="戒语:",this.attr3_1.y=this.attr2.y-2,e&&this.item_data){this.atr2_g.visible=!0,this.attr1_2.text=this.attr1.text,this.attr2_2.text=this.attr2.text;var n=this.item_data.itemConfig.subType,r=RingSoulModel.ins().getRingBuffName()[n].name;this.attr3_2.setLabel(r),this.attr2_2.y=this.attr2.y,this.attr3_2.y=this.attr3_1.y,this.attr3_2.setImage(!0),this.attr3_2.visible=!0,this.count_bottom.visible=!1}else e&&(this.attr_g.x=100,this.atr2_g.visible=!1,this.count_bottom.visible=!0)},t.prototype.UpdateContent=function(){this.powerLabel.text=RingSoulModel.ins().ring_soul_data.power,this.attr3_1.setImage(!0),this.reItem(),this.updateItems(),this.updateAtt(),this.updateBuffName()},t.prototype.updateItems=function(){for(var e,t=this.item_g.$children,i=GlobalConfig.ins("ItemConfig"),o=0;o<t.length;o++){if(null==RingSoulModel.ins().ring_soul_data.arr[o])t[o].setItemImg("balck_90000"+(o+1)+"_png"),t[o].showImgBottom(!1);else{e=i[RingSoulModel.ins().ring_soul_data.arr[o].configID],t[o].setItemImg(e.icon+"_png"),t[o].setItemBg(ResDataPath.GetItemQualityName(e.quality));var s=RingSoulModel.ins().ring_soul_data.arr[o].att,n=1;for(var r in s)s[r].type&&s[r].type==AttributeType.atRingBuff&&(n=s[r].value);t[o].setImgBottom("90000"+n+"_png"),t[o].showImgBottom(!0)}this.AddClick(t[o],this.onClick)}},t.prototype.updateBuffName=function(){this.s_g.removeChildren();for(var e,t,i,o=["0","一","二","三","四","五","六","七","八","九","十","十一","十二"],s=RingSoulModel.ins().getSortBufs(),n=s.length,r=[3,53,103],a=4,l=RingSoulModel.ins().getKeyValue(),h=0;n>h;h++){var c=[!1,!1,!1,!1,!1,!1,!1];t=new eui.Label,t.text=o[s[h].zslevel]+"转 "+s[h].name,t.size=14,t.name="buff"+h,this.s_g.addChild(t),t.x=8,t.y=a,a=a+14+4,t=null,i=0,e=s[h].evil.length?s[h].evil.length:0;for(var u=0;e>u;u++){t=new RingBuffName,t.setImage(!1),t.text.textColor="0xc8e4ed",t.text.strokeColor="0x1f5263";for(var d in l)if(l[d].value&&l[d].lv>=s[h].zslevel&&s[h].evil[u]==l[d].value&&!c[d]){c[d]=!0,t.setImage(!0),t.text.textColor="0xf3ecc8",t.text.strokeColor="0x4f3514",i++;break}t.setLabel(this.ring_buff_name[s[h].evil[u]].name),this.s_g.addChild(t),t.x=r[u%3],t.y=a+25*Math.floor(u/3)}if(a+=25*Math.floor(e/3+2/3),t=new eui.Label,t.text=AttributeData.getAttStrForRing(s[h].attr),t.size=14,this.s_g.addChild(t),t.x=8,t.y=a,a=a+t.height+10,e>i){var p=this.s_g.getChildByName("buff"+h);p.text=s[h].zslevel+"转 "+s[h].name+" ("+i+"/"+e+")",p.textColor=5461335}else{var p=this.s_g.getChildByName("buff"+h);p.text=s[h].zslevel+"转 "+s[h].name+" ("+i+"/"+e+")",p.textColor=65280}}},t}(BaseView);__reflect(RingSoulWashPanel.prototype,"RingSoulWashPanel",["ICommonWindowTitle"]),window.RingSoulWashWin=RingSoulWashWin,window.RingSoulWashPanel=RingSoulWashPanel;var RingSoulWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName="L戒灵R",t.item_num=0,t.array=[!1,!1,!1,!1,!1,!1,!1],t.ring_buff_name={},t.skinName="RingSoulSkin",t.name="戒灵",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];UIHelper.SetLinkStyleLabel(this.attr),this.AddClick(this.btn,this.onBtn),this.AddClick(this.btn0,this.onBtn0),this.AddClick(this.attr,this.showAttr),MessageCenter.ins().addListener(MessageDef.RING_BUFF_UPDATE,this.UpdateContent,this),this.ring_buff_name=RingSoulModel.ins().getRingBuffName(),this.UpdateContent()},t.prototype.onBtn0=function(e){ViewManager.ins().open(RingSoulWashWin,this.item_num)},t.prototype.onBtn=function(e){ViewManager.ins().open(RingSoulChangeWin,this.item_num)},t.prototype.close=function(){MessageCenter.ins().removeAll(this)},t.prototype.showAttr=function(){var e=new eui.Component;e.skinName="RingSoulAttrSkin";for(var t="",i=RingSoulModel.ins().ring_soul_data.arr,o=[],s=[],n=0,r=i;n<r.length;n++){var a=r[n],l=ZhuanZhiModel.ins().getZhuanZhiEquipBaseAttr(a);if(a)for(var h=0,c=l;h<c.length;h++){var u=c[h];o[u.type]||(o[u.type]=0),o[u.type]+=u.value}}var d=RingSoulModel.ins().getAttrSoul();for(var p in d)o[d[p].type]?o[d[p].type]+=d[p].value:o[d[p].type]=d[p].value;for(var f=0;f<o.length;f++)o[f]&&s.push({type:f,value:o[f]});t=AttributeData.getAttStrForRing(s),e.attr.text=t,e.addEventListener(egret.TouchEvent.TOUCH_END,function(){e.$getEventMap()[egret.TouchEvent.TOUCH_END]=null,LayerManager.UI_Popup.removeChild(e)},e),LayerManager.UI_Popup.addChild(e)},t.prototype.onClick=function(e){var t=this.item_bg.$children;t[this.item_num].visible=!1,this.item_num=e.currentTarget.parent.getChildIndex(e.currentTarget)?e.currentTarget.parent.getChildIndex(e.currentTarget):0,t[this.item_num].visible=!0,this.updateAtt()},t.prototype.updateAtt=function(){var e=RingSoulModel.ins().ring_soul_data.arr[this.item_num];if(this.jie.text="",e){var t=ZhuanZhiModel.ins().getZhuanZhiEquipBaseAttr(e);this.attr1.text=AttributeData.getAttStr(t,0,1,"： ");var i,o=e.att;if(o instanceof Array)for(var s=0;s<o.length;s++)o[s].type==AttributeType.atRingBuff&&(i=RingSoulModel.ins().getRingBuffName()[o[s].value].name);this.attr3_1.setLabel(i),this.attr3_1.setImage(!0),this.attr2.y=this.attr1.height+this.attr1.y+6,this.attr2.text="戒语:",this.attr3_1.y=this.attr2.y-2,this.attr_g.visible=!0,this.isDress.visible=!1;var n=GlobalConfig.ins("ItemConfig");this.jie.text=n[e.configID].zsLevel+"转 "+n[e.configID].name,this.btn.label="更换";for(var r=!1,a=n[e.configID].zsLevel,l=UserBag.ins().getBagEquipByType(ItemType.RINGSOUL),h=0,c=l;h<c.length;h++){var u=c[h];u.itemConfig.zsLevel>a&&u.itemConfig.subType==this.item_num+1&&(r=!0)}this.redPoint.visible=r}else{this.attr_g.visible=!1,this.isDress.visible=!0,this.btn.label="装备",this.redPoint.visible=!1;for(var l=UserBag.ins().getBagEquipByType(ItemType.RINGSOUL),d=0,p=l;d<p.length;d++){var u=p[d];u.itemConfig.subType==this.item_num+1&&(this.redPoint.visible=!0)}}},t.prototype.UpdateContent=function(){this.powerLabel.text=RingSoulModel.ins().ring_soul_data.power,this.attr3_1.setImage(!0),this.updateItems(),this.updateAtt(),this.updateBuffName()},t.prototype.CheckRedPoint=function(){return RingSoulModel.ins().hasRedRing()},t.prototype.updateItems=function(){for(var e,t=this.item_g.$children,i=GlobalConfig.ins("ItemConfig"),o=UserBag.ins().getBagEquipByType(ItemType.RINGSOUL),s=[],n=0,r=o;n<r.length;n++){var a=r[n];s[a.itemConfig.subType-1]||(s[a.itemConfig.subType-1]=[]),s[a.itemConfig.subType-1].push(a.itemConfig)}for(var l=0;l<t.length;l++){if(null==RingSoulModel.ins().ring_soul_data.arr[l])t[l].setItemImg("balck_90000"+(l+1)+"_png"),t[l].showImgBottom(!1),s[l]&&s[l].length>0?t[l].showRedPoint(!0):t[l].showRedPoint(!1);else{e=i[RingSoulModel.ins().ring_soul_data.arr[l].configID],t[l].setItemImg(e.icon+"_png"),t[l].setItemBg(ResDataPath.GetItemQualityName(e.quality));var h=RingSoulModel.ins().ring_soul_data.arr[l].att,c=1;for(var u in h)h[u].type&&h[u].type==AttributeType.atRingBuff&&(c=h[u].value);if(t[l].setImgBottom("90000"+c+"_png"),t[l].showImgBottom(!0),s[l]&&0!=s[l].length){for(var d=!1,p=0,f=s[l];p<f.length;p++){var g=f[p];g.zsLevel>e.zsLevel&&(d=!0)}t[l].showRedPoint(d)}else t[l].showRedPoint(!1)}this.AddClick(t[l],this.onClick)}},t.prototype.updateBuffName=function(){this.s_g.removeChildren();for(var e,t,i,o=["0","一","二","三","四","五","六","七","八","九","十","十一","十二"],s=RingSoulModel.ins().getSortBufs(),n=s.length,r=[3,53,103],a=4,l=RingSoulModel.ins().getKeyValue(),h=0;n>h;h++){var c=[!1,!1,!1,!1,!1,!1,!1];t=new eui.Label,t.text=o[s[h].zslevel]+"转 "+s[h].name,t.size=14,t.name="buff"+h,this.s_g.addChild(t),t.x=8,t.y=a,a=a+14+4,t=null,i=0,e=s[h].evil.length?s[h].evil.length:0;for(var u=0;e>u;u++){t=new RingBuffName,t.setImage(!1),t.text.textColor="0xc8e4ed",t.text.strokeColor="0x1f5263";for(var d in l)if(l[d].value&&l[d].lv>=s[h].zslevel&&s[h].evil[u]==l[d].value&&!c[d]){c[d]=!0,t.setImage(!0),t.text.textColor="0xf3ecc8",t.text.strokeColor="0x4f3514",i++;break}t.setLabel(this.ring_buff_name[s[h].evil[u]].name),this.s_g.addChild(t),t.x=r[u%3],t.y=a+25*Math.floor(u/3)}if(a+=25*Math.floor(e/3+2/3),t=new eui.Label,t.text=AttributeData.getAttStrForRing(s[h].attr),t.size=14,this.s_g.addChild(t),t.x=8,t.y=a,a=a+t.height+10,e>i){var p=this.s_g.getChildByName("buff"+h);p.text=s[h].zslevel+"转 "+s[h].name+" ("+i+"/"+e+")",p.textColor=5461335,t.textColor=5461335}else{var p=this.s_g.getChildByName("buff"+h);p.text=s[h].zslevel+"转 "+s[h].name+" ("+i+"/"+e+")",p.textColor=65280,t.textColor=65280}}},t}(BaseView);__reflect(RingSoulWin.prototype,"RingSoulWin",["ICommonWindowTitle"]),window.RingSoulWin=RingSoulWin;var StoryRoleTips=function(e){function t(){var t=e.call(this)||this;return t.skinName="StoryRoleTipsSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t}(eui.Component);__reflect(StoryRoleTips.prototype,"StoryRoleTips"),window.StoryRoleTips=StoryRoleTips;var StoryTalkItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="StoryTalkItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.setData=function(e){switch(this.dialogueConfig=e,e.type){case GuideJQType.TYPE1:this.currentState="state1";break;case GuideJQType.TYPE2:this.currentState="state3";break;case GuideJQType.TYPE5:this.currentState="state2"}TimerManager.ins().doNext(this.setLab(),this)},t.prototype.setLab=function(){if(this.dialogueConfig){this.dialogueConfig.txt&&(this.m_Tips1.textFlow=TextFlowMaker.generateTextFlow(this.dialogueConfig.txt)),this.dialogueConfig.txt2&&(this.m_Tips2.textFlow=TextFlowMaker.generateTextFlow(this.dialogueConfig.txt2)),this.dialogueConfig.txt3&&(this.m_Tips3.textFlow=TextFlowMaker.generateTextFlow(this.dialogueConfig.txt3));var e=SubRoles.ins().getSubRoleByIndex(0);if("0"==this.dialogueConfig.img){var t=e.sex,i=e.job;this.m_RoleImg.source="comp_jq_role_"+t+i+"_png"}else this.m_RoleImg.source=this.dialogueConfig.img+"_png";"0"==this.dialogueConfig.name?this.m_NameLab.text=e.name:this.m_NameLab.text=this.dialogueConfig.name}},t}(eui.Component);__reflect(StoryTalkItem.prototype,"StoryTalkItem"),window.StoryTalkItem=StoryTalkItem;var StoryWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="StoryWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(e,t){1>=t?this.m_Item1.setData(e):this.m_Item2.setData(e)},t.prototype.initPoint=function(){this.m_MainGroup.y=563},t}(eui.Component);__reflect(StoryWin.prototype,"StoryWin"),ViewManager.ins().reg(PetStarWin,LayerManager.UI_Popup),window.StoryWin=StoryWin;var StrongItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_MainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.m_Icon.source=t.icon+"_png";for(var i=0;i<this.m_StarGroup.numChildren;i++){var o=this.m_StarGroup.getChildAt(i);o&&o instanceof eui.Image&&(o.visible=!1,i<t.start&&(o.visible=!0))}this.m_Cont.text=t.des,this.m_MainBtn.label=t.btnname},t.prototype.onClick=function(){var e=this.data;Deblocking.Check(e.openid)&&(ViewManager.Guide(e.taget[0],e.taget[1]),ViewManager.ins().close(StrongWin))},t}(eui.ItemRenderer);__reflect(StrongItem.prototype,"StrongItem"),window.StrongItem=StrongItem;var StrongPanel=function(e){function t(t){var i=e.call(this)||this;return i.skinName="StrongPanelSkin",i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_List.itemRenderer=StrongItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData},t.prototype.addViewEvent=function(){},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.initData()},t.prototype.close=function(){this.removeEvent()},t.prototype.release=function(){this.removeEvent()},t.prototype.initData=function(){this.listData.replaceAll(this.config)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(StrongPanel.prototype,"StrongPanel",["ICommonWindowTitle"]),window.StrongPanel=StrongPanel;var StrongWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100794,t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this);var t=GlobalConfig.ins("BianQiangMethodConfig");for(var i in t){var o=t[i],s=new StrongPanel,n=[];for(var r in o)s.name||(s.name=o[r].typeName),n.push(o[r]);s.config=n,this.commonWindowBg.AddChildStack(s)}},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e&&e[0]),this.updateRedPoint()},t.prototype.close=function(){this.removeObserve(),this.commonWindowBg.OnRemoved()},t.prototype.updateRedPoint=function(){},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(StrongWin.prototype,"StrongWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(StrongWin,LayerManager.UI_Main),window.StrongWin=StrongWin;var AchievementData=function(){function e(){}return e}();__reflect(AchievementData.prototype,"AchievementData"),window.AchievementData=AchievementData;var GrowUpRoadBtn=function(e){function t(){var t=e.call(this)||this;return t.skinName="GrowUpRoadBtnSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){if(null!=this.data){var e=parseInt(this.data);this.btn.icon=GlobalConfig.funcNoticeConfig[e].iconid+"_png",this.redDot.visible=FuncOpenModel.ins().GetRewardState(e)==RewardState.CanGet,GrowUpRoadWin.selectIndex==this.itemIndex?this.btn.m_SelectImg.visible=!0:this.btn.m_SelectImg.visible=!1}},t.prototype.onClick=function(){GrowUpRoadWin.selectIndex=this.itemIndex,MessageCenter.ins().dispatch(MessageDef.HEROWAY_MSG)},t}(eui.ItemRenderer);__reflect(GrowUpRoadBtn.prototype,"GrowUpRoadBtn"),window.GrowUpRoadBtn=GrowUpRoadBtn;var GrowUpRoadWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GrowUpRoadWinSkin",t.list.useVirtualLayout=!1,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101272,t.m_btnGet.label=GlobalConfig.jifengTiaoyueLg.st100004,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.list.itemRenderer=GrowUpRoadBtn,this.listReward.itemRenderer=ItemBase,this._listData=new eui.ArrayCollection,this.list.dataProvider=this._listData},t.prototype.destoryView=function(){e.prototype.destoryView.call(this)},t.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.observe(MessageDef.HEROWAY_MSG,this._updateView),this.commonWindowBg.OnAdded(this),this.commonWindowBg.nameIcon.text=GlobalConfig.jifengTiaoyueLg.st101268,this.observe(MessageDef.FUNC_OPEN_UPDATE,this.updateRedPoint),this.m_btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onGet,this),t.selectIndex=e[0]-1||0,this._updateView(),this.updateRedPoint(),this.list.validateNow(),this.setScrollerPoint()},t.prototype.close=function(){DisplayUtils.dispose(this._mc),this._mc=null,this.roleShowPanel.release(),this.m_btnGet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._onGet,this),this.commonWindowBg.OnRemoved(),this.scroller.stopAnimation()},t.prototype.OnOpenIndex=function(e){return!0},t.prototype._updateView=function(){var e=Object.keys(GlobalConfig.funcNoticeConfig);this._listData.replaceAll(e),this._curIdx=t.selectIndex+1;var i=GlobalConfig.funcNoticeConfig[this._curIdx];if(null!=i){if(1==i.openLv[0])this.m_txtOpen.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101269,[i.openLv[1]]);else if(2==i.openLv[0])if(i.openLv[1]>=1e3){var o=.001*i.openLv[1];this.m_txtOpen.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102112,[o])}else this.m_txtOpen.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101270,[i.openLv[1]]);else 3==i.openLv[0]?this.m_txtOpen.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102114,[i.openLv[1]]):4==i.openLv[0]&&(this.m_txtOpen.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102113,[i.openLv[1]]));this.m_txtContent.textFlow=TextFlowMaker.generateTextFlow(i.tips),this.listReward.dataProvider=new eui.ArrayCollection(i.reward);var s=FuncOpenModel.ins().GetRewardState(this._curIdx)==RewardState.Gotten;this.m_imgGet.visible=s,this.m_btnGet.visible=!s,this._initRoleShow(i),this.scrollerLab&&this.scrollerLab.viewport&&(this.scrollerLab.viewport.scrollV=0),FuncOpenModel.ins().GetRewardState(this._curIdx)==RewardState.CanGet?this.m_btnGet.redPoint.visible=!0:this.m_btnGet.redPoint.visible=!1}},t.prototype._onGet=function(){var e=GlobalConfig.funcNoticeConfig[this._curIdx];FuncOpenModel.Check(e.openLv[0],e.openLv[1])?FuncOpenModel.ins().SendGetFuncOpen(this._curIdx):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101271)},t.prototype._initRoleShow=function(e){if(e.movieBody||e.movieMounts||e.movieWeapon||e.movieWing){var t=SubRoles.ins().getSubRoleByIndex(0);this.roleShowPanel.creatAnim(t),this.roleShowPanel.setCharSexJob(t.sex,t.job,e.movieBody,e.movieWeapon,e.movieMounts,e.movieWing),this.roleShowPanel.visible=!0,this.m_groupMc.visible=!1}else e.moviePet&&(this.roleShowPanel.visible=!1,this.m_groupMc.visible=!0,null==this._mc&&(this._mc=new MovieClip,this._mc.x=this.m_groupMc.width/2,this._mc.y=this.m_groupMc.height/2,this.m_groupMc.addChild(this._mc)),this._mc.loadUrl(ResDataPath.GetMonsterBodyPath(e.moviePet+"_3"+EntityAction.STAND),!0,-1))},t.prototype.updateRedPoint=function(){if(FuncOpenModel.ins().GetRewardState(this._curIdx)!=RewardState.CanGet){for(var e=Object.keys(GlobalConfig.ins("FuncNoticeConfig")),i=null,o=0;o<e.length;o++){var s=parseInt(e[o]);if(FuncOpenModel.ins().GetRewardState(s)==RewardState.CanGet){i=s;break}}i&&(t.selectIndex=i-1),this.setScrollerPoint()}this._updateView(),this._listData.replaceAll(Object.keys(GlobalConfig.funcNoticeConfig))},t.prototype.setScrollerPoint=function(){var e=0;e=t.selectIndex>=this._listData.source.length-4.8?this._listData.source.length-4.8:t.selectIndex,this.scroller&&this.scroller.viewport&&(this.scroller.viewport.scrollH=74*e)},t.selectIndex=1,t}(BaseEuiPanel);__reflect(GrowUpRoadWin.prototype,"GrowUpRoadWin",["ICommonWindow"]),ViewManager.ins().reg(GrowUpRoadWin,LayerManager.UI_Main),window.GrowUpRoadWin=GrowUpRoadWin;var LiLianWin=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.commonWindowBg.AddChildStack(new VitalityNewPanel);var t=GlobalConfig.ins("BianQiangMethodConfig");for(var i in t){var o=t[i],s=new StrongPanel,n=[];for(var r in o)s.name||(s.name=o[r].typeName),n.push(o[r]);s.config=n,this.commonWindowBg.AddChildStack(s)}this.gamePersonPanel=new GamePersonPanel,this.gamePersonPanel.name=GlobalConfig.jifengTiaoyueLg.st100537,this.commonWindowBg.AddChildStack(this.gamePersonPanel)},t.prototype.destoryView=function(){e.prototype.destoryView.call(this)},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];void 0==e[0]?0:e[0];return!0},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(UserTask.postTaskChangeData,this.setRedPoint),this.observe(MessageDef.UPDATE_VITALITY,this.setRedPoint),this.observe(MessageDef.EXPWEL_INIT_MSG,this.setRedPoint),this.observe(MessageDef.UPDATA_TASK,this.setRedPoint);var i=void 0==e[0]?0:e[0];this.commonWindowBg.OnAdded(this,i),this.setRedPoint()},t.prototype.close=function(){MessageCenter.ins().removeAll(this),this.commonWindowBg.OnRemoved()},t.prototype.setRedPoint=function(){this.commonWindowBg.CheckTabRedPoint()},t.prototype.checkIsOpen=function(e){},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t}(BaseEuiPanel);__reflect(LiLianWin.prototype,"LiLianWin",["ICommonWindow"]),ViewManager.ins().reg(LiLianWin,LayerManager.UI_Main),window.LiLianWin=LiLianWin;var MissionState;!function(e){e[e.doing=0]="doing",e[e.canGet=1]="canGet",e[e.havaGet=2]="havaGet"}(MissionState||(MissionState={}));var TaskData=function(){function e(){this.weight=0}return e}();__reflect(TaskData.prototype,"TaskData"),window.TaskData=TaskData;var UserTask=function(e){function t(){var t=e.call(this)||this;return t.vitalityAwards=[],t.achiEvement=[],t.lv=1,t.exp=0,t.sysId=PackageID.Task,t.regNetMsg(S2cProtocol.sc_task_init_data,t.doTaskData),t.regNetMsg(S2cProtocol.sc_task_change_data,t.doTaskChangeData),t.regNetMsg(S2cProtocol.sc_task_vitality,t.doVitality),t.regNetMsg(S2cProtocol.sc_task_vitality_award,t.doVitalityAwards),t.regNetMsg(S2cProtocol.sc_task_achieve_data,t.doAchieveData),t.regNetMsg(S2cProtocol.sc_task_join_achieve_data,t.doJoinAchieveData),t.regNetMsg(S2cProtocol.sc_task_achieve_change_data,t.doAchieveChangeData),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendGetTask=function(e){var t=new Sproto.cs_task_get_task_request;t.taskID=e,this.Rpc(C2sProtocol.cs_task_get_task,t)},t.prototype.sendGetVitalityAwards=function(e){var t=new Sproto.cs_task_get_vitality_awards_request;t.taskID=e,this.Rpc(C2sProtocol.cs_task_get_vitality_awards,t)},t.prototype.sendGetAchieve=function(e){var t=new Sproto.cs_task_get_achieve_request;t.taskID=e,this.Rpc(C2sProtocol.cs_task_get_achieve,t)},t.prototype.doTaskData=function(e){this.task=[],this.vitalityAwards=[];for(var t=e.taskDatas.length,i=0;t>i;i++){var o=e.taskDatas[i],s=new TaskData;s.id=o.id,s.value=o.value,s.state=o.state,this.task.push(s)}this.vitality=e.vitality;for(var n=e.vitalityDats.length,i=0;n>i;i++){var r=e.vitalityDats[i],a=new VitalityData;a.id=r.id,a.state=r.state,this.vitalityAwards.push(a)}this.sortTask(),this.lv=e.growupid,this.exp=e.growup,GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_VITALITY)},t.prototype.doTaskChangeData=function(e){var i=e.id,o=t.ins().getTaskDataById(i);o?(o.value=e.value,o.state=e.state,t.ins().sortTask(),t.postTaskChangeData(),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATA_TASK)):Main.errorBack("推送任务数据异常，任务id："+i)},t.postTaskChangeData=function(){},t.prototype.doVitality=function(e){this.vitality=e.vitality,this.lv=e.growupid,this.exp=e.growup,GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_VITALITY)},t.prototype.doVitalityAwards=function(e){var t=e.id,i=this.getVitalityAwardsById(t);i.state=e.state,GameGlobal.MessageCenter.dispatch(MessageDef.UPDATA_TASK),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_VITALITY)},t.prototype.doAchieveData=function(e){this.achiEvement=[];for(var i=e.achiEvement.length,o=0;i>o;o++){var s=e.achiEvement[o],n=new AchievementData;n.id=s.id,n.state=s.state,n.value=s.value,this.taskTrace=n,t.postUpdteTaskTrace()}this.sortAchiEvement()},t.postUpdteTaskTrace=function(){},t.prototype.doJoinAchieveData=function(e){this.changeAchieve(e.data)},t.prototype.doAchieveChangeData=function(e){this.changeAchieve(e.data)},t.prototype.changeAchieve=function(e){if(0==e.id)return this.taskTrace=null,void t.postUpdteTaskTrace();var i;i=this.taskTrace,i=null==this.taskTrace?this.getAchieveByTaskId(e.id):this.taskTrace,null!=i&&(i.id=e.id,i.state=e.state,i.value=e.value,t.postUpdteTaskTrace())},t.prototype.getAchieveDataById=function(e){for(var t=0;t<this.achiEvement.length;t++)if(this.achiEvement[t].achievementId==e)return this.achiEvement[t];return null},t.prototype.getAchieveByTaskId=function(e){for(var t=0;t<this.achiEvement.length;t++)if(this.achiEvement[t].id==e)return this.achiEvement[t];return null},t.prototype.getVitalityAwardsById=function(e){for(var t=0;t<this.vitalityAwards.length;t++)if(this.vitalityAwards[t].id==e)return this.vitalityAwards[t];return null},t.prototype.getTaskDataById=function(e){if(null!=this.task){for(var t=0;t<this.task.length;t++)if(this.task[t].id==e)return this.task[t];return null}},t.prototype.getAchieveConfById=function(e){var t,i=GlobalConfig.ins("AchievementTaskConfig");for(t in i){var o=i[t];if(o.taskId==e)return o}return null},t.prototype.getAchievementConfigById=function(e){return this.getAchieveConfById(e)},t.prototype.getAwardsConfigById=function(e){null==this.dailyAwardConfig&&(this.dailyAwardConfig=GlobalConfig.ins("DailyAwardConfig"));var t,i=this.dailyAwardConfig;for(t in i){var o=i[t];if(o.id==e)return o}return null},t.prototype.getTaskStast=function(){if(this.task){var e=void 0;for(e=0;e<this.task.length;e++)if(1==this.task[e].state)return void t.postUpdataTaskPoint(!0);for(e=0;e<this.vitalityAwards.length;e++){var i=this.getAwardsConfigById(this.vitalityAwards[e].id);if(this.vitality>=i.valueLimit&&0==this.vitalityAwards[e].state)return void t.postUpdataTaskPoint(!0)}for(e=0;e<this.achiEvement.length;e++)if(1==this.achiEvement[e].state)return void t.postUpdataTaskPoint(!0);return void t.postUpdataTaskPoint(!1)}},t.postUpdataTaskPoint=function(e){return e},t.prototype.sortTask=function(){if(this.task.length>2){this.task.sort(this.sort);for(var e=[],t=0;t<this.task.length;t++)0!=this.task[t].state&&(e.push(this.task[t]),this.task.splice(t,1),t--);e.length>0&&(this.task=this.task.concat(e))}},t.prototype.sort=function(e,t){var i=e.id,o=t.id;return o>i?-1:i>o?1:0},t.prototype.sortAchiEvement=function(){for(var e=0;e<this.achiEvement.length;e++){var t=this.achiEvement[e];1==t.state?(this.achiEvement.splice(e,1),this.achiEvement.unshift(t)):2==t.state&&(this.achiEvement.splice(e,1),this.achiEvement.push(t))}},t.getTopDataReach=function(e){var i=GlobalConfig.ins("AchieveBottomConfig")[e],o=0;for(var s in i){var n=t.ins().getAchieveDataById(i[s].achievementId);n&&n.state==MissionState.canGet&&o++}return o},t.getBottomIndex=function(e){var t=GlobalConfig.ins("AchieveBottomConfig");for(var i in t)for(var o in t[i])if(t[i][o].achievementId==e)return t[i][o].index-1;return 0},t.getTopData=function(){var e=[],i=GlobalConfig.ins("AchieveBottomConfig");for(var o in i){var s=i[o];for(var n in s){var r=GameGlobal.taskModel.getAchieveDataById(s[n].achievementId);r&&e.push(r)}}return e.sort(t.sortTopData),e},t.sortTopData=function(e,t){return e.state==MissionState.canGet&&t.state!=MissionState.canGet?-1:t.state==MissionState.canGet&&e.state!=MissionState.canGet?1:e.state==MissionState.havaGet&&t.state!=MissionState.havaGet?1:t.state==MissionState.havaGet&&e.state!=MissionState.havaGet?-1:e.id>t.id?1:t.id>e.id?-1:0},t.prototype.GetTaskList=function(){for(var e=[],t=0,i=this.task.length;i>t;++t){var o=this.task[t];(o.id!=TaskConfigId.MINE||Deblocking.Check(DeblockingType.TYPE_08,!0))&&(WxSdk.ins().isHidePay()&&14==o.id||e.push(o))}return e},t.prototype.IsGotReward=function(e){return 2==this.vitalityAwards[e].state},t.prototype.IsCanGet=function(e){var t=GlobalConfig.ins("DailyAwardConfig")[e+1];return this.vitality>=t.valueLimit&&2!=this.vitalityAwards[e].state?!0:!1},t.prototype.CheckAllVitalityReward=function(){for(var e,i=this.vitality,o=0,s=(UserZs.ins()?UserZs.ins().lv:0,1);4>=s;++s){var n=t.ins().IsCanGet(s-1);if(e=GlobalConfig.ins("DailyAwardConfig")[s],e&&(i<e.valueLimit||n||i>=e.valueLimit&&!n&&4==s)){i>=e.valueLimit&&!n?o=2:n&&(o=1);break}}if(1==o)return!0;for(var r=this.GetTaskList(),a=0;a<r.length;a++)if(1==r[a].state)return!0;return!1},t.prototype.checkUIMissonComplet=function(e){var i=this.taskTrace;if(i){var o=t.ins().getAchieveConfById(i.id);214==o.type&&e==o.param&&this.sendUIMissonComplet(o.taskId)}},t.prototype.sendUIMissonComplet=function(e){var t=new Sproto.cs_task_share_open_request;t.taskID=e,this.Rpc(C2sProtocol.cs_task_share_open,t)},t.prototype.getLordAward=function(e){return GlobalConfig.ins("LordLevelConfig")[e].award},t.prototype.sendGetAwak=function(e){var t=new Sproto.cs_task_apply_vitality_request;t.taskID=e,this.Rpc(C2sProtocol.cs_task_apply_vitality,t)},t}(BaseSystem);__reflect(UserTask.prototype,"UserTask"),MessageCenter.compile(UserTask);var TaskConfigId;!function(e){e[e.INDEX=7]="INDEX",e[e.MINE=8]="MINE"}(TaskConfigId||(TaskConfigId={})),window.UserTask=UserTask;var VitalityData=function(){function e(){}return e}();__reflect(VitalityData.prototype,"VitalityData"),window.VitalityData=VitalityData;var VitalityListItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="VitalityListItemSkin",t.getway.label=GlobalConfig.jifengTiaoyueLg.st101245,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.getway.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(){var e=this.data;if(0==e.state){var t=GlobalConfig.ins("DailyConfig")[e.id];if(!t)return;if(!this._CheckOpen(!1))return;ViewManager.ins().close(LiLianWin),ViewManager.Guide(t.controlTarget[0],t.controlTarget[1])}else 1==e.state&&UserTask.ins().sendGetAwak(e.id)},t.prototype._CheckOpen=function(e){var t=GlobalConfig.ins("DailyConfig")[this.data.id];return t?null==t.funcopenId?!0:Deblocking.Check(t.funcopenId,e):!1},t.prototype.dataChanged=function(){var e=this.data,t=GlobalConfig.ins("DailyConfig")[e.id];if(t)if(this.label.text=t.desc+"",ViewManager.ins().setLab(this.count,e.value,t.target),this.count0.text=GlobalConfig.jifengTiaoyueLg.st102096+"+"+t.activeValue,this.finish.visible=!1,this.getway.visible=!1,this._CheckOpen(!0)||0!=e.state)switch(e.state){case 0:this.getway.label=GlobalConfig.jifengTiaoyueLg.st101245,this.getway.visible=!0;break;case 1:this.getway.label=GlobalConfig.jifengTiaoyueLg.st101210,this.getway.visible=!0;break;default:this.finish.visible=!0}else null==this.funcOpenConfig&&(this.funcOpenConfig=GlobalConfig.ins("FuncOpenConfig"))},t}(eui.ItemRenderer);__reflect(VitalityListItem.prototype,"VitalityListItem"),window.VitalityListItem=VitalityListItem;var VitalityNewPanel=function(e){function t(t){var i=e.call(this)||this;return i.index=0,i.name=GlobalConfig.jifengTiaoyueLg.st102096,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st102096,i.skinName="VitalityNewPanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.listData=new eui.ArrayCollection,this.listData1=new eui.ArrayCollection,this.listData2=new eui.ArrayCollection,this.list.itemRenderer=VitalityListItem,this.list.dataProvider=this.listData,this.m_List1.dataProvider=this.listData1,this.m_List2.dataProvider=this.listData2,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st102092,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st102093,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st102094,this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100004,UserTask.ins().getLordAward(1)
},t.prototype.addViewEvent=function(){this.observe(MessageDef.UPDATE_VITALITY,this.initData),this.observe(MessageDef.UPDATA_TASK,this.initData),this.AddClick(this.m_MainBtn,this.onClick)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.addViewEvent(),this.initData()},t.prototype.close=function(){this.removeEvent()},t.prototype.release=function(){},t.prototype.initData=function(){for(var e=UserTask.ins(),t=e.GetTaskList(),i=0;i<t.length;i++){switch(t[i].weight=0,t[i].state){case 0:t[i].weight+=2e3;break;case 1:t[i].weight+=1e4;break;case 2:t[i].weight+=1e3}var o=GlobalConfig.ins("DailyConfig")[t[i].id],s=o?Deblocking.Check(o.funcopenId,!0):!1;s&&(t[i].weight+=100),t[i].weight+=t[i].id}t.sort(function(e,t){return t.weight-e.weight}),this.listData.removeAll(),this.listData.replaceAll(t),this.m_Progress.visible=!0,this.m_LiLianImg.visible=!0,this.m_Progress.value=e.exp;var n=GlobalConfig.ins("LordLevelConfig")[e.lv],r=GlobalConfig.ins("LordLevelConfig")[e.lv+1];if(n&&(this.m_NowLv.text=n.levelTips+GlobalConfig.jifengTiaoyueLg.st102091,AttributeData.setAttrGroup(n.attrs,this.m_AttrGroup1,16,Color.FontColor,!1),this.m_Img.source=n.pich,this.totalPower.text=UserBag.getAttrPower(n.attrs)),r){this.m_NextLv.text=r.levelTips+GlobalConfig.jifengTiaoyueLg.st102091,AttributeData.setAttrGroup(r.attrs,this.m_AttrGroup2,16,Color.FontColor,!1,Color.needOrange),this.m_NextLv.visible=!0,this.m_AttrGroup2.visible=!0,this.m_RightArrImg.visible=!0,this.m_Progress.maximum=r.growUpNeed;var a=e.getLordAward(e.lv+1);this.listData1.removeAll(),this.listData1.replaceAll(a),this.m_StateImg.visible=!1}else{this.m_NextLv.visible=!1,this.m_AttrGroup2.visible=!1,this.m_RightArrImg.visible=!1,this.m_Progress.maximum=0,this.m_Progress.value=0,this.m_Progress.visible=!1,this.m_LiLianImg.visible=!1;var a=e.getLordAward(e.lv);this.listData1.removeAll(),this.listData1.replaceAll(a),this.m_StateImg.visible=!0}this.setSchedule()},t.prototype.setSchedule=function(){for(var e,t=UserTask.ins().vitality,i=0,o=UserZs.ins()?UserZs.ins().lv:0,s=1;4>=s;++s){var n=UserTask.ins().IsCanGet(s-1);if(e=GlobalConfig.ins("DailyAwardConfig")[s],this.index=s,e&&(ViewManager.ins().setLab(this.m_ScheduleLab,t,e.valueLimit),t<e.valueLimit||n||t>=e.valueLimit&&!n&&4==s)){t>=e.valueLimit&&!n?i=2:n&&(i=1);break}}switch(e&&(this.listData2.removeAll(),this.listData2.replaceAll(e["awardList"+o])),i){case 0:this.m_TipsLab.text=GlobalConfig.jifengTiaoyueLg.st100680,this.m_TipsLab.textColor=Color.Red,this.m_MainBtn.visible=!1,this.m_TipsLab.visible=!0;break;case 1:this.m_MainBtn.visible=!0,this.m_TipsLab.visible=!1;break;case 2:this.m_TipsLab.text=GlobalConfig.jifengTiaoyueLg.st100981,this.m_TipsLab.textColor=Color.Green,this.m_MainBtn.visible=!1,this.m_TipsLab.visible=!0}},t.prototype.onClick=function(e){UserTask.ins().sendGetVitalityAwards(this.index)},t.prototype.UpdateContent=function(){},t.prototype.CheckRedPoint=function(){var e=UserTask.ins();return e.CheckAllVitalityReward()},t}(BaseView);__reflect(VitalityNewPanel.prototype,"VitalityNewPanel",["ICommonWindowTitle"]),window.VitalityNewPanel=VitalityNewPanel;var VitalityTips=function(e){function t(){var t=e.call(this)||this;return t.time=4,t.skinName="VitalityTipsSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_bg.init("VitalityTips",GlobalConfig.jifengTiaoyueLg.st102097)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.time=4,this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent(),this.removeTime()},t.prototype.addViewEvent=function(){this.AddClick(this.m_MainBtn,this.onClickClose)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=GlobalConfig.ins("LordLevelConfig")[UserTask.ins().lv];this.m_List1.dataProvider=new eui.ArrayCollection(e.award),this.playTime()},t.prototype.addTime=function(){this.removeTime(),TimerManager.ins().doTimer(1e3,0,this.playTime,this),this.playTime()},t.prototype.removeTime=function(){TimerManager.ins().doTimer(1e3,0,this.playTime,this)},t.prototype.playTime=function(){this.time--,this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100040+"("+this.time+")",this.time<=0&&(this.removeTime(),this.onClickClose())},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(VitalityTips.prototype,"VitalityTips"),ViewManager.ins().reg(VitalityTips,LayerManager.UI_Popup),window.VitalityTips=VitalityTips;var TeamFbItem=function(e){function t(){var t=e.call(this)||this;return t.isCanClick=!1,t.skinName="TeamFbItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=ItemBase,this.dataList=new eui.ArrayCollection,this.m_List.dataProvider=this.dataList,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=TeamFbModel.getInstance,i=this.data.key,o=GlobalConfig.ins("teamFbConfig")[i];if(o){var s=GlobalConfig.ins("MonstersConfig")[o.bossid];s&&this.playEff(s.avatar+"_3"+EntityAction.STAND),this.m_Name.text=o.fbName;for(var n=SubRoles.ins().rolesModel,r=0,a=0;a<n.length;a++){var l=n[a],h=l.wingsData.lv;h&&(r=Math.max(h,r))}if(this.isCanClick=!1,r<o.wingLevel-1)this.m_Cont.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101972,[o.wingLevel]),this.m_Cont.textColor=16717591;else if(o.zslevel){var c=UserZs.ins()?UserZs.ins().lv:0;c<o.zslevel?(this.m_Cont.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101973,[o.zslevel]),this.m_Cont.textColor=16717591):(t.isShouTong(o.id)?this.m_Cont.text=GlobalConfig.jifengTiaoyueLg.st101989:this.m_Cont.text=GlobalConfig.jifengTiaoyueLg.st100399,this.m_Cont.textColor=15816961,this.isCanClick=!0)}else GameLogic.ins().actorModel.level<o.level?(this.m_Cont.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101974,[o.level]),this.m_Cont.textColor=16717591):(t.isShouTong(o.id)?this.m_Cont.text=GlobalConfig.jifengTiaoyueLg.st101989:this.m_Cont.text=GlobalConfig.jifengTiaoyueLg.st100399,this.m_Cont.textColor=15816961,this.isCanClick=!0);var u=[];if(t.isShouTong(o.id))for(var a=0;a<o.firstRewards.length;a++){var d=o.firstRewards[a],p={type:d.type,id:d.id,count:d.count,isShowName:2};u.push(p)}else for(var a=0;a<o.normalRewards.length;a++){var d=o.normalRewards[a],p={type:d.type,id:d.id,count:d.count,isShowName:2};u.push(p)}this.dataList.removeAll(),this.dataList.replaceAll(u),this.dataList.refresh()}t.teamFbSelectId==parseInt(this.data.key)?this.m_SelectImg.visible=!0:this.m_SelectImg.visible=!1},t.prototype.playEff=function(e){this.initEffData(),this.m_Eff.loadUrl(ResDataPath.GetMonsterBodyPath(e),!0,-1)},t.prototype.initEffData=function(){this.m_Eff||(this.m_Eff=new MovieClip,this.m_Eff.touchEnabled=!1,this.m_AnimGroup.addChild(this.m_Eff),this.m_Eff.x=this.m_AnimGroup.width/2,this.m_Eff.y=this.m_AnimGroup.height/2)},t.prototype.onClick=function(){var e=TeamFbModel.getInstance;this.isCanClick&&!TeamFbModel.getInstance.isInRoom?(e.teamFbSelectId=parseInt(this.data.key),MessageCenter.ins().dispatch(TeamFbEvt.TEAMFB_UPDATE_DATA),TeamFbSproto.ins().sendGetTeamMsg(e.teamFbSelectId)):this.isCanClick?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st102005):UserTips.ins().showTips(this.m_Cont.text)},t.prototype.release=function(){this.m_Eff&&(DisplayUtils.dispose(this.m_Eff),this.m_Eff=null)},t}(eui.ItemRenderer);__reflect(TeamFbItem.prototype,"TeamFbItem"),window.TeamFbItem=TeamFbItem;var TeamFbPanel=function(e){function t(t){var i=e.call(this)||this;return i.mWindowHelpId=35,i.autoQuickTIme=0,i.autoFightTime=0,i.autoStartTime=0,i.isInRoomOld=!1,i.resTime=60,i.initTime=15,i.initPoint=0,i.changeNum=136,i.name=GlobalConfig.jifengTiaoyueLg.st101969,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101969,i.skinName="TeamFbPanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101968,this.m_FbList.itemRenderer=TeamFbItem,this.fbData=new eui.ArrayCollection,this.m_FbList.dataProvider=this.fbData,this.m_AwardList.itemRenderer=ItemBase,this.awardData=new eui.ArrayCollection,this.m_AwardList.dataProvider=this.awardData,this.m_PlayerList.itemRenderer=TeamPlayerItem,this.ladderData=new eui.ArrayCollection,this.m_PlayerList.dataProvider=this.ladderData,this.m_InRoomPlayerList.itemRenderer=TeamPlayerState,this.inRoomPlayerData=new eui.ArrayCollection,this.m_InRoomPlayerList.dataProvider=this.inRoomPlayerData,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101976,this.m_NoTeamLab.text=GlobalConfig.jifengTiaoyueLg.st101988},t.prototype.addViewEvent=function(){this.AddClick(this.m_OpenTog,this.onClickTog),this.AddClick(this.m_GoTog1,this.onClickTog),this.AddClick(this.m_GoTog2,this.onClickTog),this.AddClick(this.m_MainBtn,this.onClickMain),this.AddClick(this.m_MainBtn2,this.onClickMain),this.AddClick(this.m_RightBtn,this.onClickAttrBtn),this.AddClick(this.m_LeftBtn,this.onClickAttrBtn),this.observe(TeamFbEvt.TEAMFB_UPDATE_DATA,this.initData)},t.prototype.removeEvent=function(){},t.prototype.open=function(){TeamFbModel.getInstance.isInRoom||this.setOpenIndex(),this.resTime=this.initTime;var e=GlobalConfig.ins("teamFbBaseConfig");this.autoQuickTIme=e.autoQuickTIme,this.autoFightTime=e.autoFightTime,this.autoStartTime=e.autoStartTime,this.addViewEvent(),this.addTime(),this.initData(),TeamFbSproto.ins().sendGetTeamMsg(TeamFbModel.getInstance.teamFbSelectId)},t.prototype.close=function(){this.removeEvent();for(var e=this.m_FbList.numChildren,t=0;e>t;t++){var i=this.m_FbList.getChildAt(t);i&&i instanceof TeamFbItem&&i.release()}this.removeTime()},t.prototype.release=function(){this.removeEvent()},t.prototype.addTime=function(){this.removeTime(),TimerManager.ins().doTimer(1e3,0,this.runTime,this)},t.prototype.removeTime=function(){TimerManager.ins().remove(this.runTime,this)},t.prototype.runTime=function(){var e=GlobalConfig.ins("teamFbBaseConfig"),t=TeamFbModel.getInstance;t.isInRoom?t.isMyLadder&&(t.isMyRoomFull?this.m_OpenTog.selected?(this.autoStartTime-=1,this.autoStartTime<0&&(this.autoStartTime=e.autoStartTime,TeamFbSproto.ins().sendFight()),this.m_OpenTog.label=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101978,[this.autoStartTime])):this.m_OpenTog.label=GlobalConfig.jifengTiaoyueLg.st101970:(this.m_GoTog2.selected?(this.autoFightTime-=1,this.autoFightTime<0&&(this.autoFightTime=e.autoFightTime,TeamFbSproto.ins().sendFight()),this.m_GoTog2.label=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101979,[this.autoFightTime])):this.m_GoTog2.label=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101979,[this.autoFightTime]),this.m_OpenTog.label=GlobalConfig.jifengTiaoyueLg.st101970)):(this.m_GoTog1.selected&&(this.autoQuickTIme-=1,this.autoQuickTIme<0&&(this.autoQuickTIme=e.autoQuickTIme,TeamFbSproto.ins().sendCreateTeam(t.teamFbSelectId,-1)),this.m_GoTog1.label=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101977,[this.autoQuickTIme])),this.resTime--,this.resTime<=0&&(this.resTime=this.initTime,TeamFbSproto.ins().sendGetTeamMsg(TeamFbModel.getInstance.teamFbSelectId)))},t.prototype.initData=function(){var e=GlobalConfig.ins("teamFbBaseConfig"),t=TeamFbModel.getInstance;if(this.m_PlayerScroller.visible=!1,this.m_InRoomPlayerScroller.visible=!1,this.m_NoTeamLab.visible=!1,this.m_GoTog1.visible=!1,this.m_GoTog2.visible=!1,this.m_OpenTog.visible=!1,this.m_MainBtn2.visible=!0,this.setFBData(),t.isInRoom){var i=t.teamPlayerDic.values;this.m_InRoomPlayerScroller.visible=!0,this.inRoomPlayerData.removeAll(),this.inRoomPlayerData.replaceAll(i),this.inRoomPlayerData.refresh(),t.isMyLadder?(this.m_GoTog2.visible=!0,this.m_OpenTog.visible=!0):this.m_MainBtn2.visible=!1,this.isInRoomOld!=t.isInRoom&&(this.autoQuickTIme=e.autoQuickTIme),this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101982,this.m_MainBtn2.label=GlobalConfig.jifengTiaoyueLg.st101983}else{var o=t.teamLadderDic.values;this.m_GoTog1.visible=!0,o.length>0?(this.ladderData.removeAll(),this.ladderData.replaceAll(o),this.m_PlayerScroller.visible=!0):this.m_NoTeamLab.visible=!0,this.isInRoomOld!=t.isInRoom&&(this.autoFightTime=e.autoFightTime,this.autoStartTime=e.autoStartTime),this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101980,this.m_MainBtn2.label=GlobalConfig.jifengTiaoyueLg.st101981}var s=UserVip.ins().lv,n=e.rewardCount[s];this.m_HaveLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101984,[t.rewardCount,n]),this.isInRoomOld=t.isInRoom,this.resTime=this.initTime},t.prototype.setFBData=function(){var e=TeamFbModel.getInstance,t=GlobalConfig.ins("teamFbConfig"),i=[];for(var o in t){var s={key:o,weight:1};i.push(s)}this.fbData.replaceAll(i),e.teamFbSelectId||(e.teamFbSelectId=parseInt(this.fbData.source[0].key),this.fbData.refresh());for(var n=t[e.teamFbSelectId],r=[],a=0;a<n.luckRewards.length;a++){var l=n.luckRewards[a],h={type:l.type,id:l.id,count:l.count,isShowName:2};r.push(h)}this.awardData.removeAll(),this.awardData.replaceAll(r),this.awardData.refresh(),this.m_FbName.text=n.fbName},t.prototype.onClickTog=function(e){var t=GlobalConfig.ins("teamFbBaseConfig");switch(e.currentTarget){case this.m_OpenTog:this.m_OpenTog.selected&&(this.autoStartTime=t.autoStartTime);break;case this.m_GoTog1:this.m_GoTog1.selected&&(this.autoQuickTIme=t.autoQuickTIme);break;case this.m_GoTog2:this.autoFightTime&&(this.autoFightTime=t.autoFightTime)}},t.prototype.onClickMain=function(e){var t=TeamFbModel.getInstance;switch(e.currentTarget){case this.m_MainBtn:t.isInRoom?TeamFbSproto.ins().sendQuitTeam():TeamFbSproto.ins().sendCreateTeam(t.teamFbSelectId,0);break;case this.m_MainBtn2:t.isInRoom?TeamFbSproto.ins().sendFight():TeamFbSproto.ins().sendCreateTeam(t.teamFbSelectId,-1)}},t.prototype.sorData=function(e,t){return t.weight-e.weight},t.prototype.UpdateContent=function(){},t.prototype.setOpenIndex=function(){var e=TeamFbModel.getInstance,t=GlobalConfig.ins("teamFbConfig"),i=[],o=0,s=0;for(var n in t){var r={key:n,weight:1},a=parseInt(n),l=e.isShouTong(a),h=e.isFbOpen(a);l&&h?r.weight=100-a+1e4:h?r.weight=a+1e3:r.weight=100-a,r.weight>o&&(o=r.weight,s=a),i.push(r)}e.teamFbSelectId=s;var c=i.length,u=(c-3)*this.changeNum-6;if(e.teamFbSelectId<=2)this.initPoint=0;else{var d=(e.teamFbSelectId-2)*this.changeNum;d>u&&(d=u),this.initPoint=d}this.m_Scroller.stopAnimation(),this.m_Scroller.viewport.scrollH=this.initPoint},t.prototype.onClickAttrBtn=function(e){switch(this.m_Scroller.stopAnimation(),e.currentTarget){case this.m_RightBtn:var t=this.fbData.source.length,i=(t-3)*this.changeNum-6,o=this.m_Scroller.viewport.scrollH+3*this.changeNum;o>i&&(o=i),this.m_Scroller.viewport.scrollH=o;break;case this.m_LeftBtn:var s=this.m_Scroller.viewport.scrollH-3*this.changeNum;0>s&&(s=0),this.m_Scroller.viewport.scrollH=s}},t}(BaseView);__reflect(TeamFbPanel.prototype,"TeamFbPanel",["ICommonWindowTitle"]),window.TeamFbPanel=TeamFbPanel;var TeamPlayerItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_MainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMainBtn,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.m_Name.text=t.name,this.m_Room.text=GlobalConfig.jifengTiaoyueLg.st101971+t.playerNum+"/3",this.m_Head.source=ResDataPath.GetHeadMiniImgName2(t.job,t.sex)},t.prototype.onClickMainBtn=function(){var e=this.data;TeamFbSproto.ins().sendCreateTeam(TeamFbModel.getInstance.teamFbSelectId,e.roomId)},t}(eui.ItemRenderer);__reflect(TeamPlayerItem.prototype,"TeamPlayerItem"),window.TeamPlayerItem=TeamPlayerItem;var TeamPlayerState=function(e){function t(){var t=e.call(this)||this;return t.skinName="TeamPlayerStateSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_TBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTBtn,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.m_Name.text=t.name,this.m_Lv.text=t.zslv+GlobalConfig.jifengTiaoyueLg.st100067+t.lv+GlobalConfig.jifengTiaoyueLg.st100093,this.m_Head.source=ResDataPath.GetHeadMiniImgName2(t.job,t.sex),this.m_LadderImg.visible=t.isLadder,this.m_Power.text=GlobalConfig.jifengTiaoyueLg.st101117+t.power,TeamFbModel.getInstance.isMyLadder&&!t.isLadder?this.m_TBtn.visible=!0:this.m_TBtn.visible=!1},t.prototype.onClickTBtn=function(){var e=this.data;TeamFbSproto.ins().sendTRole(e.dbid)},t}(eui.ItemRenderer);__reflect(TeamPlayerState.prototype,"TeamPlayerState"),window.TeamPlayerState=TeamPlayerState;var TeamFbEvt=function(){function e(){}return e.TEAMFB_UPDATE_DATA="TEAMFB_UPDATE_DATA",e}();__reflect(TeamFbEvt.prototype,"TeamFbEvt"),window.TeamFbEvt=TeamFbEvt;var TeamFbModel=function(){function e(){this.teamLadderDic=new Dictionary,this.teamPlayerDic=new Dictionary,this.isInRoom=!1,this.teamFbSelectId=0,this.gotop1Time=0,this.gotop2Time=0,this.openTime=0,this.shouTongDataList=[],this.rewardCount=0,this.myTeamLadderId=0,this.myTeamId=0,this.roomMaxNum=3}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.setTeamLadderData=function(e){if(this.teamLadderDic.clear(),e.list)for(var t=0;t<e.list.length;t++){var i=e.list[t],o=new TeamLadderData;o.fbId=e.groupid,o.roomId=i.teamid,o.name=i.name,o.playerNum=i.num,o.job=i.job,o.sex=i.sex,this.teamLadderDic.set(o.roomId,o)}},e.prototype.setMyTeamData=function(e){if(this.teamPlayerDic.clear(),this.myTeamLadderId=e.captain,this.myTeamId=e.teamid,e.members)for(var t=0;t<e.members.length;t++){var i=e.members[t],o=new TeamPlayerData;e.captain==i.dbid?o.isLadder=!0:o.isLadder=!1,o.job=i.job,o.lv=i.level,o.name=i.name,o.power=i.power,o.sex=i.sex,o.zslv=i.zslevel,o.dbid=i.dbid,o.serverId=i.serverid,o.teamId=e.teamid,this.teamPlayerDic.set(o.dbid,o)}},Object.defineProperty(e.prototype,"isMyLadder",{get:function(){return this.myTeamLadderId==RoleMgr.actorid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMyRoomFull",{get:function(){return this.teamPlayerDic.values.length>=this.roomMaxNum},enumerable:!0,configurable:!0}),e.prototype.isShouTong=function(e){return this.shouTongDataList[e-1]?!1:!0},e.prototype.isFbOpen=function(e){var t=GlobalConfig.ins("teamFbConfig")[e];if(t){for(var i=SubRoles.ins().rolesModel,o=0,s=0;s<i.length;s++){var n=i[s],r=n.wingsData.lv;r&&(o=Math.max(r,o))}if(o<t.wingLevel-1)return!1;if(t.zslevel){var a=UserZs.ins()?UserZs.ins().lv:0;return a<t.zslevel?!1:!0}return GameLogic.ins().actorModel.level<t.level?!1:!0}return!1},e.prototype.isShowRedPoint=function(){return this.rewardCount>0&&Deblocking.Check(DeblockingType.TYPE_83,!0)?!0:!1},e.prototype.releaseTeamData=function(){this.myTeamLadderId=0,this.isInRoom=!1,this.teamPlayerDic.clear(),MessageCenter.ins().dispatch(TeamFbEvt.TEAMFB_UPDATE_DATA)},e}();__reflect(TeamFbModel.prototype,"TeamFbModel"),window.TeamFbModel=TeamFbModel;var TeamFbSproto=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_team_my_res,t.getInfoMsg),t.regNetMsg(S2cProtocol.sc_team_res,t.getAllTeamMsg),t.regNetMsg(S2cProtocol.sc_team_info_res,t.getMyTeamMsg),t.regNetMsg(S2cProtocol.sc_team_join_res,t.getJoinTeam),t.regNetMsg(S2cProtocol.sc_team_quit_res,t.getQuitTeam),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getInfoMsg=function(e){var t=TeamFbModel.getInstance;t.rewardCount=e.times,t.shouTongDataList=e.first,MessageCenter.ins().dispatch(TeamFbEvt.TEAMFB_UPDATE_DATA)},t.prototype.getAllTeamMsg=function(e){var t=TeamFbModel.getInstance;t.setTeamLadderData(e),MessageCenter.ins().dispatch(TeamFbEvt.TEAMFB_UPDATE_DATA)},t.prototype.getMyTeamMsg=function(e){var t=TeamFbModel.getInstance;t.setMyTeamData(e),t.teamFbSelectId=e.groupid,e.members.length>0?TeamFbModel.getInstance.isInRoom=!0:TeamFbModel.getInstance.isInRoom=!1,MessageCenter.ins().dispatch(TeamFbEvt.TEAMFB_UPDATE_DATA)},t.prototype.getJoinTeam=function(e){switch(e.result){case-1:UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101985);break;case-2:UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101986);break;case-3:UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101987);break;case-4:UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101994);break;default:ViewManager.ins().open(FbWin,2)}},t.prototype.getQuitTeam=function(e){var t=TeamFbModel.getInstance;if(t.teamPlayerDic.remove(e.dbid),t.myTeamLadderId=e.captain,e.captain>0)for(var i=t.teamPlayerDic.values,o=0;o<i.length;o++){var s=i[o];s.dbid==e.captain?s.isLadder=!0:s.isLadder=!1}e.captain<=0?(t.myTeamLadderId=0,t.isInRoom=!1,t.teamPlayerDic.clear()):e.dbid==RoleMgr.actorid&&(TeamFbModel.getInstance.isInRoom=!1,TeamFbModel.getInstance.teamPlayerDic.clear()),MessageCenter.ins().dispatch(TeamFbEvt.TEAMFB_UPDATE_DATA)},t.prototype.sendGetTeamMsg=function(e){var t=new Sproto.cs_team_req_request;t.groupid=e,this.Rpc(C2sProtocol.cs_team_req,t)},t.prototype.sendTeamInfoMsg=function(){var e=new Sproto.cs_team_info_req_request;this.Rpc(C2sProtocol.cs_team_info_req,e)},t.prototype.sendCreateTeam=function(e,t){var i=new Sproto.cs_team_join_req_request;i.groupid=e,i.teamid=t,this.Rpc(C2sProtocol.cs_team_join_req,i)},t.prototype.sendQuitTeam=function(){var e=new Sproto.cs_team_quit_req_request;this.Rpc(C2sProtocol.cs_team_quit_req,e)},t.prototype.sendTRole=function(e){var t=new Sproto.cs_team_kick_req_request;t.kickid=e,this.Rpc(C2sProtocol.cs_team_kick_req,t)},t.prototype.sendFight=function(){var e=new Sproto.cs_team_fight_req_request;this.Rpc(C2sProtocol.cs_team_fight_req,e)},t}(BaseSystem);__reflect(TeamFbSproto.prototype,"TeamFbSproto"),window.TeamFbSproto=TeamFbSproto;var TeamLadderData=function(){function e(){this.name=""}return e}();__reflect(TeamLadderData.prototype,"TeamLadderData"),window.TeamLadderData=TeamLadderData;var TeamPlayerData=function(){function e(){this.isLadder=!1}return e}();__reflect(TeamPlayerData.prototype,"TeamPlayerData"),window.TeamPlayerData=TeamPlayerData;var TenKillBattleView=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="TenKillBattleSkin",this.touchEnabled=!1,Main.isLiuhai&&(this.bossinfo_group.y=140,this.m_MainGroup.y=147)},t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),this.observe(MessageDef.TENKILL_BLOOD_UPDATE,this.refushTargetHp),this.observe(MessageDef.ON_HOOK_ROLE_UPDATE,this.updateRoleState),this.observe(MessageDef.TENKILL_BOSS_INIT,this.onBoss),this.observe(MessageDef.TENKILL_PANEL_UPDATE,this.initUIstate),this.m_BuffImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuff,this),this.initUIstate(),this.updateRoleState(),this.m_LeftBloodBar.labelDisplay.visible=!1,this.m_RightBloodBar.labelDisplay.visible=!1},t.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this,t),this.m_BuffImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuff,this),this.removeObserve(),this.release()},t.prototype.release=function(){this.removeTween()},t.prototype.removeTween=function(){egret.Tween.removeTweens(this.m_LeftBeginBg),egret.Tween.removeTweens(this.m_RightBeginBg)},t.prototype.initTenkillRole=function(){for(var e=EntityManager.ins().getRolesList(!0,!0),t=0;t<e.length;t++)for(var i=e[t],o=0;o<i.length;o++){var s=i[o];s&&s.playAction(EntityAction.STAND)}},t.prototype.initUIstate=function(){var e=this;this.m_MainGroup.visible=!1,this.m_BeginGroup.visible=!0,this.m_BuffImg.visible=!1,this.m_VSImg.visible=!1,this.m_LeftBeginBg.x=-720,this.m_RightBeginBg.x=720,this.bossinfo_group.visible=!1;var t=TenKillModel.getInstance;t.raidType==RaidType.Type2?(egret.Tween.get(this.m_LeftBeginBg).wait(300).to({x:0},1500).call(function(){e.m_VSImg.visible=!0}).wait(500).call(function(){e.m_BeginGroup.visible=!1,TenKillSproto.ins().sendContinueFB(),e.m_MainGroup.visible=!0,TenKillModel.getInstance.isBuyBuff()&&(e.m_BuffImg.visible=!0)}),egret.Tween.get(this.m_RightBeginBg).wait(300).to({x:0},1500)):t.raidType==RaidType.Type3&&(this.bossinfo_group.visible=!0,TenKillSproto.ins().sendContinueFB(),TenKillModel.getInstance.isBuyBuff()&&(this.m_BuffImg.visible=!0)),this.updateRoleState()},t.prototype.updateRoleState=function(){this.name_label.text=GameLogic.ins().actorModel.name;var e=SubRoles.ins().getSubRoleByIndex(0);e&&(this.head_image.source=ResDataPath.GetHeadMiniImgName2(e.job,e.sex));var t=EntityManager.ins().getRolesList(!0,!1),i=EntityManager.ins().getRolesList(!1,!0);if(t.length>0){var o=SubRoles.ins().getSubRoleByIndex(0);this.m_LeftNameLvLab.text=o.name,this.m_LeftHeadImg.source=ResDataPath.GetHeadMiniImgName2(o.job,o.sex)}if(i.length>0){var s=i[0][0].infoModel;this.m_RightNameLvLab.text=s.name,this.m_RightHeadImg.source=ResDataPath.GetHeadMiniImgName2(s.job,s.sex)}TenKillModel.getInstance.raidType==RaidType.Type3?this.m_MainRightGroup.visible=!1:this.m_MainRightGroup.visible=!0,this.refushTargetHp(),this.initTenkillRole()},t.prototype.refushTargetHp=function(){var e=EntityManager.ins().getRolesList(!0,!1),t=EntityManager.ins().getRolesList(!1,!0),i=this.getHp(e,TenKillModel.getInstance.myTeamMaxBlood),o=this.getHp(t,TenKillModel.getInstance.otherTeamMaxBlood);this.m_LeftBloodBar.value=100*i,this.m_RightBloodBar.value=100*o,this.refushTargetRoleHp();var s=EntityManager.ins().getMonstersList();if(s.length>0)for(var n=0;n<s.length;n++){var r=s[n];r&&1==r.infoModel.monstersType&&this.upDataBossHP(r.infoModel)}},t.prototype.getHp=function(e,t){for(var i,o,s=0,n=0;n<e.length;n++){o=e[n];for(var r=0;r<o.length;r++){i=o[r];var a=i.infoModel.getAtt(AttributeType.atHp);a>0&&(s+=a)}}return s>0?s/t:0},t.prototype.onBoss=function(e){this.showBossinfo(e)},t.prototype.refushTargetRoleHp=function(){for(var e,t,i=0,o=0,s=EntityManager.ins().getRolesList(!0),n=0;n<s.length;n++){t=s[n];for(var r=0;r<t.length;r++)e=t[r],i+=e.infoModel.getAtt(AttributeType.atHp),o+=e.infoModel.getAtt(AttributeType.atMaxHp)}this.hudunbloodBar.maximum=o,this.hudunbloodBar.value=i},t.prototype.showBossinfo=function(e){this.bossinfo_group.visible=!0,this.hudun.visible=!0,null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig),this.currentBoss=this.monstersConfig[e.configID],this.nameTxt.text=this.currentBoss.name,this.head.source=ResDataPath.getBossHeadImage(this.currentBoss.head),this.lvTxt.text=this.currentBoss.level+"",this.bloodBar.changeMaxBarNum=this.currentBoss.hpCount,this.bloodBar.changeMaximum=e.getAtt(AttributeType.atMaxHp),this.bloodBar.changeValue=e.getAtt(AttributeType.atHp),this.no_blood.visible=!1},t.prototype.upDataBossHP=function(e){var t=e.getAtt(AttributeType.atHp),i=e.getAtt(AttributeType.atMaxHp);this.bloodBar.changeMaximum=i,this.bloodBar.changeValue=t},t.prototype.onClickBuff=function(){var e=GlobalConfig.ins("PropertyLibraryConfig");"<font color='#00FF3F'>"+e[1].tips2+"</font>";WarnWin.show(e[1].tips2,null,this,null,null,"sure")},t}(BaseEuiView);__reflect(TenKillBattleView.prototype,"TenKillBattleView"),ViewManager.ins().reg(TenKillBattleView,LayerManager.UI_HUD),window.TenKillBattleView=TenKillBattleView;var TenKillModel=function(){function e(){this.buffList=new Dictionary}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.setBuffDic=function(e){this.buffList.clear();for(var t=0;t<e.length;t++)this.buffList.set(e[t].type,e[t])},e.prototype.isBuyBuff=function(){for(var e=!1,t=this.buffList.values,i=0;i<t.length;i++)if(1==t[i].sign){e=!0;break}return e},e.prototype.checkRedPoint=function(){if(Deblocking.Check(DeblockingType.TYPE_34,!0)){var e=GlobalConfig.ins("ShiLianShaCommonConfig");if(e){var t=e.costItem.id,i=e.costItem.count,o=(e.costItem.type,UserBag.ins().getBagGoodsCountById(0,t));if(this.useCnt>=1||this.winCnt>0||o>=i)return!0}}return!1},e}();__reflect(TenKillModel.prototype,"TenKillModel");var RaidType;!function(e){e[e.Type2=2]="Type2",e[e.Type3=3]="Type3"}(RaidType||(RaidType={})),window.TenKillModel=TenKillModel;var TenKillPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100885,t.skinName="TenKillPanelSkin",t.name=GlobalConfig.jifengTiaoyueLg.st100885,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100894,t.m_GetItemImg.text=GlobalConfig.jifengTiaoyueLg.st100895,t.m_OpenBtn.label=GlobalConfig.jifengTiaoyueLg.st100892,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];UIHelper.SetLinkStyleLabel(this.m_GetItemImg),this.addViewEvent(),TenKillSproto.ins().sendGetTenKillBuffList(),TenKillSproto.ins().sendGetTenKillMsg()},t.prototype.close=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.m_OpenBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickOpen,this),MessageCenter.ins().addListener(MessageDef.TENKILLBUFF_UPDATE,this.updateBuffMsg,this),MessageCenter.ins().addListener(MessageDef.TENKILL_PANEL_UPDATE,this.updatePanelMsg,this),this.m_BuffBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuffBtn,this),this.m_RuleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRuleBtn,this),this.m_GetItemImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGetItem,this)},t.prototype.removeViewEvent=function(){this.m_OpenBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickOpen,this),MessageCenter.ins().removeListener(MessageDef.TENKILLBUFF_UPDATE,this.updateBuffMsg,this),MessageCenter.ins().removeListener(MessageDef.TENKILL_PANEL_UPDATE,this.updatePanelMsg,this),this.m_BuffBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBuffBtn,this),this.m_RuleBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickRuleBtn,this),this.m_GetItemImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGetItem,this)},t.prototype.onClickGetItem=function(){var e=GlobalConfig.ins("ShiLianShaCommonConfig"),t=e.costItem.id;UserWarn.ins().setBuyGoodsWarn(t)},t.prototype.onClickOpen=function(){var e=TenKillModel.getInstance;if(e.useCnt>=1||e.winCnt>0)e.isBuyBuff()||e.winCnt>0?TenKillSproto.ins().sendGetTenKillToGo():WarnWin.show(GlobalConfig.jifengTiaoyueLg.st100886,function(){TenKillSproto.ins().sendGetTenKillToGo()},this);else{var t=GlobalConfig.ins("ShiLianShaCommonConfig"),i=t.costItem.id,o=t.costItem.count,s=(t.costItem.type,UserBag.ins().getBagGoodsCountById(0,i));s>=o?e.isBuyBuff()?TenKillSproto.ins().sendGetTenKillToGo():WarnWin.show(GlobalConfig.jifengTiaoyueLg.st100886,function(){TenKillSproto.ins().sendGetTenKillToGo()},this):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100887)}},t.prototype.updateBuffMsg=function(){},t.prototype.updatePanelMsg=function(){var e=GlobalConfig.ins("ShiLianShaCommonConfig");if(e){var t=e.costItem.id,i=e.costItem.count,o=(e.costItem.type,UserBag.ins().getBagGoodsCountById(0,t));this.m_ItemNumLab.text=o+"/"+i,this.m_OpenNumLab.text=GlobalConfig.jifengTiaoyueLg.st100356+"（"+TenKillModel.getInstance.useCnt+"/"+e.num+"）"+GlobalConfig.jifengTiaoyueLg.st100532}var s=TenKillModel.getInstance.winCnt;this.m_GuankaLab.text=GlobalConfig.jifengTiaoyueLg.st100373+(s+1)+GlobalConfig.jifengTiaoyueLg.st100369,s>0?(this.m_ConditionGroup.visible=!1,this.m_WinCntGroup.visible=!0,this.m_BotTipsLab.text="",this.m_OpenBtn.label=GlobalConfig.jifengTiaoyueLg.st100888,s<e.maxFb?this.m_WinCntLab.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100889},{text:s+"/"+e.maxFb,style:{textColor:65343}}]:this.m_WinCntLab.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st100890}]):(this.m_ConditionGroup.visible=!0,this.m_WinCntGroup.visible=!1,this.m_BotTipsLab.text=GlobalConfig.jifengTiaoyueLg.st100891,this.m_OpenBtn.label=GlobalConfig.jifengTiaoyueLg.st100892)
},t.prototype.onClickBuffBtn=function(){var e,t=TenKillModel.getInstance,i=t.isBuyBuff(),o=(t.buffList.values,GlobalConfig.ins("PropertyLibraryConfig"));i&&(e="<font color='#00FF3F'>"+o[1].tips2+"</font>",WarnWin.show(e,null,this,null,null,"sure"));var s=GlobalConfig.ins("ShiLianShaCommonConfig");i||(t.winCnt>0?ViewManager.ins().open(ZsBossRuleSpeak,28,""):(e="<font color='#f27d27'>"+o[1].tips1+"</font>\n"+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100893,[s.costAttr]),WarnWin.show(e,function(){var e=GameLogic.ins().actorModel.yb;e<s.costAttr?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100008):TenKillSproto.ins().sendGetTenKillBuyBuff(o[1].value[0].type)},this)))},t.prototype.onClickRuleBtn=function(){ViewManager.ins().open(ZsBossRuleSpeak,28,"")},t.openCheck=function(){return Deblocking.Check(DeblockingType.TYPE_34)},t.prototype.CheckRedPoint=function(){return TenKillModel.getInstance.checkRedPoint()},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(TenKillPanel.prototype,"TenKillPanel",["ICommonWindowTitle"]),window.TenKillPanel=TenKillPanel;var TenKillSproto=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_shiliansha_send_bufffs,t.getBuffMsg),t.regNetMsg(S2cProtocol.sc_shiliansha_send_info,t.getTenKillMsg),t.regNetMsg(S2cProtocol.sc_shiliansha_send_relute,t.getTenKillFBResult),t.regNetMsg(S2cProtocol.sc_shiliansha_send_enemyhp,t.getTenKillHp),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendGetTenKillMsg=function(){var e=new Sproto.cs_shiliansha_send_info_request;this.Rpc(C2sProtocol.cs_shiliansha_send_info,e)},t.prototype.sendGetTenKillBuyBuff=function(e){var t=new Sproto.cs_shiliansha_send_buy_buff_request;t.index=e,this.Rpc(C2sProtocol.cs_shiliansha_send_buy_buff,t);var i=GlobalConfig.ins("PropertyLibraryConfig"),o="<font color='#00FF3F'>"+i[1].tips2+"</font>";WarnWin.show(o,null,this,null,null,"sure")},t.prototype.sendGetTenKillBuffList=function(){var e=new Sproto.cs_shiliansha_send_buff_request;this.Rpc(C2sProtocol.cs_shiliansha_send_buff,e)},t.prototype.sendGetTenKillToGo=function(){var e=new Sproto.cs_shiliansha_send_enter_request;this.Rpc(C2sProtocol.cs_shiliansha_send_enter,e)},t.prototype.sendContinueFB=function(){var e=new Sproto.cs_shiliansha_send_continue_request;this.Rpc(C2sProtocol.cs_shiliansha_send_continue,e)},t.prototype.getBuffMsg=function(e){var t=TenKillModel.getInstance;t.setBuffDic(e.buffs),GameGlobal.MessageCenter.dispatch(MessageDef.TENKILLBUFF_UPDATE)},t.prototype.getTenKillMsg=function(e){TenKillModel.getInstance.useCnt=e.useCnt,TenKillModel.getInstance.winCnt=e.winCnt,TenKillModel.getInstance.raidType=e.raidType,GameGlobal.MessageCenter.dispatch(MessageDef.TENKILL_PANEL_UPDATE)},t.prototype.getTenKillFBResult=function(e){var t=e.relute,i=GlobalConfig.ins("ShiLianShaAwardConfig"),o=TenKillModel.getInstance,s=[];if(i){var n=i[o.winCnt+1];n&&(s=2==o.raidType?n.challengeAward:n.adventureAward)}var r=function(){ViewManager.ins().open(LadderWin,6)};ViewManager.ins().open(ResultWin,t,s,GlobalConfig.jifengTiaoyueLg.st100797,r)},t.prototype.getTenKillHp=function(e){switch(e.ctype){case 0:TenKillModel.getInstance.myTeamMaxBlood=e.dhp;break;case 1:TenKillModel.getInstance.otherTeamMaxBlood=e.dhp}GameGlobal.MessageCenter.dispatch(MessageDef.TENKILL_BLOOD_UPDATE)},t}(BaseSystem);__reflect(TenKillSproto.prototype,"TenKillSproto"),window.TenKillSproto=TenKillSproto;var TheGunAnim=function(e){function t(){var t=e.call(this)||this;return t.skinName="TheGunAnimSkin",t}return __extends(t,e),t.prototype.setTheGunData=function(e){if(e){var t=TheGunModel.getInstance,i=GlobalConfig.ins("SpearLevelConfig")[e.level];if(i){this.m_RAndNameLab.text=i.name,this.playEff(i.appearance),this.m_Lv=e.level,this.m_NowLv=e.level,this.totalPower.visible=!0;var o=t.getAllPower(e);this.totalPower.text=o+""}}},t.prototype.playEff=function(e){this.m_Eff=ViewManager.ins().createEff(this.m_Eff,this.m_AnimGroup,e,-1),this.m_DuTuEff=ViewManager.ins().createEff(this.m_DuTuEff,this.m_AnimGroup0,"eff_ditu",-1)},t.prototype.changeAnimLv=function(e){var t=(TheGunModel.getInstance,GlobalConfig.ins("SpearLevelConfig")[e]);t&&(this.m_RAndNameLab.text=t.name,this.m_Lv=e,this.totalPower.visible=!1,this.playEff(t.appearance),this.m_Eff.gotoAndPlay(1,-1))},t.prototype.release=function(){this.m_Eff&&(DisplayUtils.dispose(this.m_Eff),this.m_Eff=null),this.m_DuTuEff&&(DisplayUtils.dispose(this.m_DuTuEff),this.m_DuTuEff=null)},t}(eui.Component);__reflect(TheGunAnim.prototype,"TheGunAnim"),window.TheGunAnim=TheGunAnim;var TheGunAwardItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEvent(),this.m_ItemList.itemRenderer=ItemBase,this.listData=new eui.ArrayCollection,this.m_ItemList.dataProvider=this.listData,this.m_GetTxt.text=GlobalConfig.jifengTiaoyueLg.st100680},t.prototype.addEvent=function(){this.m_GetBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickGetBtn,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=GlobalConfig.ins("SpearAchievementConfig")[this.itemIndex+1];t&&(this.listData.removeAll(),this.listData.replaceAll(t.award),this.listData.refresh(),this.m_Cont.text=t.shuoMing);var i=this.data;switch(i){case 1:this.m_GetBtn.visible=!0,this.m_GetTxt.visible=!1,this.m_GetImg.visible=!1,this.m_GetBtn.label=GlobalConfig.jifengTiaoyueLg.st101076;break;case 0:this.m_GetBtn.visible=!1,this.m_GetTxt.visible=!0,this.m_GetImg.visible=!1,this.m_GetBtn.label=GlobalConfig.jifengTiaoyueLg.st101076;break;case 2:this.m_GetBtn.visible=!1,this.m_GetTxt.visible=!1,this.m_GetImg.visible=!0,this.m_GetBtn.label=GlobalConfig.jifengTiaoyueLg.st100981}},t.prototype.onClickGetBtn=function(){var e=GlobalConfig.ins("SpearAchievementConfig")[this.itemIndex+1];e&&TheGunSproto.ins().sendTheGunGetAward(e.rankMin)},t}(eui.ItemRenderer);__reflect(TheGunAwardItem.prototype,"TheGunAwardItem"),window.TheGunAwardItem=TheGunAwardItem;var TheGunAwardWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MountLvUpAwardWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=TheGunAwardItem,this.m_ListData=new eui.ArrayCollection,this.m_List.dataProvider=this.m_ListData,this.m_bg.init("TheGunAwardWin",GlobalConfig.jifengTiaoyueLg.st102042)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.observe(TheGunEvt.THEGUN_AWARD_MSG,this.setData)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){for(var e=TheGunModel.getInstance,t=[],i=0;i<e.achieve.length;i++)t.push(e.achieve[i]);this.m_ListData.replaceAll(t)},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(TheGunAwardWin.prototype,"TheGunAwardWin"),ViewManager.ins().reg(TheGunAwardWin,LayerManager.UI_Popup),window.TheGunAwardWin=TheGunAwardWin;var TheGunDanItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);this.data;this.nameTxt.visible=!1,this.count.text=this.data.count+"",this.count.visible=!0,this.mCallback=function(){var e=UserBag.ins().getBagGoodsByTypeAndId(0,this.data.id);e||(e=new ItemData,e.count=0,e.configID=this.data.id),ViewManager.ins().open(MountDanYaoUseWin,e,ItemType.TYPE16)};var t=UserBag.ins().getBagGoodsByTypeAndId(0,this.data.id);t&&t.count>0?this.redPoint.visible=!0:this.redPoint.visible=!1},t}(ItemBase);__reflect(TheGunDanItem.prototype,"TheGunDanItem"),window.TheGunDanItem=TheGunDanItem;var TheGunPanel=function(e){function t(t){var i=e.call(this)||this;return i._isAutoUp=!1,i.name=GlobalConfig.jifengTiaoyueLg.st102041,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st102041,i.skinName="TheGunPanelSkin",i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_ListSkill.itemRenderer=TheGunSkillItem,this.m_SkillData=new eui.ArrayCollection,this.m_ListSkill.dataProvider=this.m_SkillData,this.m_ListEquip.itemRenderer=TheGunDanItem,this.m_DanData=new eui.ArrayCollection,this.m_ListEquip.dataProvider=this.m_DanData,UIHelper.SetLinkStyleLabel(this.getItem),this.m_UpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101103,this.m_AutoBuyBox.label=GlobalConfig.jifengTiaoyueLg.st101105,this.getItem.text=GlobalConfig.jifengTiaoyueLg.st100418,this.m_UpLayerBtn.label=GlobalConfig.jifengTiaoyueLg.st100242,this.m_FullLvLab.text=GlobalConfig.jifengTiaoyueLg.st100327,this.m_Lan.text=GlobalConfig.jifengTiaoyueLg.st102036,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100670,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100218,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st102037},t.prototype.addViewEvent=function(){this.AddClick(this.m_LvUpAwardBtn,this.onClickLvUpAwardBtn),this.AddClick(this.m_AutoUpLvBtn,this.btnAutoUpClick),this.AddClick(this.m_UpLvBtn,this.onClickUpLvBtn),this.AddClick(this.m_UpLayerBtn,this.onClickUpLayer),this.AddClick(this.m_StateBtn,this.onClickStateBtn),this.AddClick(this.m_ListSkill,this.onClickSkill),this.AddClick(this.m_LeftArrImg,this.onClickArrImg),this.AddClick(this.m_RightArrImg,this.onClickArrImg),this.AddClick(this.getItem,this.onClickGetLab1),this.observe(TheGunEvt.THEGUN_DATAUPDATE_MSG,this.initData),this.observe(MessageDef.BAG_HAS_ITEM_CAN_USE,this.initData)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.m_RoleSelectPanel.y=130,this.addViewEvent(),this.initData()},t.prototype.close=function(){this.m_RoleSelectPanel.y=158,this.removeEvent()},t.prototype.release=function(){this.removeEvent()},t.prototype.initData=function(){var e=TheGunModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.theGunDic.get(i.roleID);e.nowSelectRoldData=i;var s=GlobalConfig.ins("SpearCommonConfig");if(this.m_LvUpRedPoint.visible=!1,o){o.level==s.lvMax?this.m_RightArrImg.visible=!1:this.m_RightArrImg.visible=!0,this.m_LvLab.text=o.level+GlobalConfig.jifengTiaoyueLg.st100103,this.m_TheGunAnim.setTheGunData(o);for(var n=[0,0,0,0],r=0;r<o.skill.values.length;r++)n[r]=o.skill.values[r];this.m_SkillData.replaceAll(n);var a=GlobalConfig.ins("SpearShuXingDanjcConfig"),l=[];for(var h in a)l.push(a[h]);for(var c=[0,0,0],u=[],r=0;r<c.length;r++)if(null!=o.danYao.values[r]){c[r]=o.danYao.values[r];var d={type:1,id:l[r].id,count:c[r]};u.push(d)}this.m_DanData.replaceAll(u),this.starList.starNum=o.star%10;var p=GlobalConfig.ins("SpearStarConfig")[o.star];0==p.exp||o.level==s.lvMax?(this.m_StarGroup.visible=!1,this.m_UpLayerBtn.visible=!1,this.m_FullLvLab.visible=!0,this.stopAutoUp()):10*o.level==o.star?(this.m_StarGroup.visible=!1,this.m_UpLayerBtn.visible=!0,this.m_FullLvLab.visible=!1,this.stopAutoUp()):(this.m_StarGroup.visible=!0,this.m_UpLayerBtn.visible=!1,this.m_FullLvLab.visible=!1),p&&(this.m_ExpBar.maximum=p.exp,this.m_ExpBar.value=o.exp);var f=GlobalConfig.ins("SpearLevelConfig")[o.level];if(f){var g=GlobalConfig.ins("ItemConfig")[f.cost[0].id];if(g){for(var _=[],r=0;r<f.cost.length;r++)_.push(f.cost[r]);UserBag.ins().setNeedItem(_,this.m_NeedItemGroup)}}o.isCanLvUp&&(this.m_LvUpRedPoint.visible=!0)}this.m_LvUpAwardBtn.redPoint.visible=e.checkTheGunLvUpAwardRedPoint(),this.setArrImg(),this.setRoleRedPoint()},t.prototype.setArrImg=function(){var e=TheGunModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.theGunDic.get(i.roleID),s=GlobalConfig.ins("SpearCommonConfig");1==this.m_TheGunAnim.m_Lv?this.m_LeftArrImg.visible=!1:this.m_LeftArrImg.visible=!0,this.m_TheGunAnim.m_Lv==s.lvMax||this.m_TheGunAnim.m_Lv>this.m_TheGunAnim.m_NowLv?this.m_RightArrImg.visible=!1:this.m_RightArrImg.visible=!0,o&&o.level==this.m_TheGunAnim.m_Lv&&(this.m_TheGunAnim.totalPower.visible=!0)},t.prototype.setRoleRedPoint=function(){for(var e=TheGunModel.getInstance,t=(this.m_RoleSelectPanel.getCurRole(),SubRoles.ins().rolesModel),i=0;i<t.length;i++){var o=t[i];this.m_RoleSelectPanel.showRedPoint(o.roleID,e.checkRoleRedPoint(o))}},t.prototype.onClickLvUpAwardBtn=function(){ViewManager.ins().open(TheGunAwardWin)},t.prototype.btnAutoUpClick=function(){this._isAutoUp?this.stopAutoUp():(this._isAutoUp=!0,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101096,TimerManager.ins().doTimer(500,0,this.autoUpStar,this))},t.prototype.stopAutoUp=function(){this._isAutoUp=!1,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101097,TimerManager.ins().remove(this.autoUpStar,this)},t.prototype.autoUpStar=function(){var e=TheGunModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.theGunDic.get(i.roleID);if(o){var s=GlobalConfig.ins("SpearStarConfig")[o.star];if(null==s&&0==s.exp)return this._isAutoUp=!1,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101097,TimerManager.ins().remove(this.autoUpStar,this),void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101098);var n=GlobalConfig.ins("SpearLevelConfig")[o.level],r=UserBag.ins().getBagGoodsCountById(0,n.cost[0].id),a=GameLogic.ins().actorModel.gold;if(r>=n.cost[0].count&&a>=n.cost[1].count)TheGunSproto.ins().sendTheGunStarUp(i.roleID,!1);else{if(a<n.cost[1].count)UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100323);else if(1==this.m_AutoBuyBox.selected){n.cost[0].count-r;if(Checker.Money(MoneyConst.yuanbao,ItemStoreConfig.getStoreByItemID(n.cost[0].id).price*n.cost[0].count,Checker.YUNBAO_FRAME))return void TheGunSproto.ins().sendTheGunStarUp(i.roleID,!0)}else UserWarn.ins().setBuyGoodsWarn(n.cost[0].id,n.cost[0].count-r);this._isAutoUp=!1,this.m_AutoUpLvBtn.label=GlobalConfig.jifengTiaoyueLg.st101097,TimerManager.ins().remove(this.autoUpStar,this)}}},t.prototype.onClickUpLvBtn=function(){var e=TheGunModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.theGunDic.get(i.roleID);if(o){var s=GlobalConfig.ins("SpearStarConfig")[o.star];if(null==s&&0==s.exp)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101098);var n=GlobalConfig.ins("SpearLevelConfig")[o.level],r=UserBag.ins().getBagGoodsCountById(0,n.cost[0].id),a=GameLogic.ins().actorModel.gold;if(r>=n.cost[0].count&&a>=n.cost[1].count)TheGunSproto.ins().sendTheGunStarUp(i.roleID,!1);else if(a<n.cost[1].count)UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100323);else if(1==this.m_AutoBuyBox.selected){n.cost[0].count-r;if(Checker.Money(MoneyConst.yuanbao,ItemStoreConfig.getStoreByItemID(n.cost[0].id).price*n.cost[0].count,Checker.YUNBAO_FRAME))return void TheGunSproto.ins().sendTheGunStarUp(i.roleID,!0)}else UserWarn.ins().setBuyGoodsWarn(n.cost[0].id,n.cost[0].count-r)}},t.prototype.onClickUpLayer=function(){var e=this.m_RoleSelectPanel.getCurRole(),t=SubRoles.ins().getSubRoleByIndex(e);TheGunSproto.ins().sendTheGunLvUp(t.roleID)},t.prototype.onClickStateBtn=function(){var e=TheGunModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.theGunDic.get(i.roleID);ViewManager.ins().open(TheGunStateWin,o)},t.prototype.onClickSkill=function(){var e=this.m_RoleSelectPanel.getCurRole(),t=SubRoles.ins().getSubRoleByIndex(e);ViewManager.ins().open(TheGunSkillWin,t.roleID)},t.prototype.onClickArrImg=function(e){switch(e.currentTarget){case this.m_LeftArrImg:this.m_RightArrImg.visible=!0,this.m_TheGunAnim.changeAnimLv(this.m_TheGunAnim.m_Lv-=1);break;case this.m_RightArrImg:this.m_TheGunAnim.m_Lv==this.m_TheGunAnim.m_NowLv&&(this.m_RightArrImg.visible=!1),this.m_TheGunAnim.changeAnimLv(this.m_TheGunAnim.m_Lv+=1)}this.m_LvLab.text=this.m_TheGunAnim.m_Lv+GlobalConfig.jifengTiaoyueLg.st100103,this.setArrImg()},t.prototype.onClickGetLab1=function(){var e=TheGunModel.getInstance,t=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(t),o=e.theGunDic.get(i.roleID);if(o){var s=GlobalConfig.ins("SpearLevelConfig")[o.level];s&&UserWarn.ins().setBuyGoodsWarn(s.cost[0].id)}},t.prototype.UpdateContent=function(){this.stopAutoUp(),this.initData()},t}(BaseView);__reflect(TheGunPanel.prototype,"TheGunPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.TheGunPanel=TheGunPanel;var TheGunSkillItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data,i=TheGunModel.getInstance;if(this.m_RedPoint.visible=!1,this.m_Mask.visible=!1,0>=t){var o=i.skillSoltDic.get(this.itemIndex+1);this.m_Cont.text=o.lv+GlobalConfig.jifengTiaoyueLg.st100674,this.m_Icon.source=o.skillId+"_png",this.m_Mask.visible=!0}else{var o=i.skillSoltDic.get(this.itemIndex+1);this.m_Icon.source=o.skillId+"_png",this.m_Cont.text=t+GlobalConfig.jifengTiaoyueLg.st100093;var s=i.checkSkillUp(o.skillId,t);s&&(this.m_RedPoint.visible=!0)}i.skillSelect==this.itemIndex?this.m_SelectImg.visible=!0:this.m_SelectImg.visible=!1},t}(eui.ItemRenderer);__reflect(TheGunSkillItem.prototype,"TheGunSkillItem"),window.TheGunSkillItem=TheGunSkillItem;var TheGunSkillWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MountSkillWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List.itemRenderer=TheGunSkillItem,this.m_SkillData=new eui.ArrayCollection,this.m_List.dataProvider=this.m_SkillData,this.m_LvUpBtn.label=GlobalConfig.jifengTiaoyueLg.st100296,this.m_LvFullLab.text=GlobalConfig.jifengTiaoyueLg.st100327,this.m_bg.init("TheGunSkillWin",GlobalConfig.jifengTiaoyueLg.st102036)},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];TheGunModel.getInstance.skillSelect=0,this.addViewEvent(),this.roleId=e[0],this.setData()},t.prototype.close=function(){TheGunModel.getInstance.skillSelect=-1,this.release()},t.prototype.release=function(){DisplayUtils.dispose(this.m_NewEff),this.m_NewEff=null,DisplayUtils.dispose(this.m_ItemEff),this.m_ItemEff=null,DisplayUtils.dispose(this.m_SkillEff),this.m_SkillEff=null,this.removeViewEvent()},t.prototype.addViewEvent=function(){this.m_NeedItem.addEvent(),this.m_List.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClickItem,this),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.setData),this.AddClick(this.m_LvUpBtn,this.onClickLvUpBtn),this.observe(TheGunEvt.THEGUN_DATAUPDATE_MSG,this.setData),this.observe(TheGunEvt.THEGUN_SKILLDATAUPDATE_MSG,this.playUpEff)},t.prototype.removeViewEvent=function(){this.m_NeedItem.removeEvent(),this.m_List.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClickItem,this)},t.prototype.setData=function(){var e=TheGunModel.getInstance,t=e.theGunDic.get(this.roleId);if(this.m_LvUpGroup.visible=!1,this.m_LvFullLab.visible=!1,this.m_NoActivate.visible=!1,this.m_NextGroup.visible=!0,this.m_NextCont.visible=!1,this.m_NextAttrGroup.visible=!1,this.m_FightGroup.visible=!1,t){for(var i=[0,0,0,0],o=0;o<t.skill.values.length;o++)i[o]=t.skill.values[o];this.m_SkillData.replaceAll(i);var s=i[e.skillSelect];if(this.skillLv=s,0>=s){this.m_NowTips.text=GlobalConfig.jifengTiaoyueLg.st100676,this.m_NextTips.text=GlobalConfig.jifengTiaoyueLg.st100676;var n=e.skillSoltDic.get(e.skillSelect+1);n&&(this.m_NextCont.visible=!0,this.m_NextTips.text=GlobalConfig.jifengTiaoyueLg.st100677,this.m_NextCont.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102040,[n.lv]),this.m_NoActivate.visible=!0);var r=GlobalConfig.ins("SpearSkillsUpgradeConfig")[n.skillId][0];this.m_SkillNameLab.text=r.skillName+" Lv."+s,AttributeData.setAttrGroup(r.attrs,this.m_NowAttrGroup)}else{this.m_NowTips.text=GlobalConfig.jifengTiaoyueLg.st100260,this.m_NextTips.text=GlobalConfig.jifengTiaoyueLg.st100676;var n=e.skillSoltDic.get(e.skillSelect+1),a=GlobalConfig.ins("SpearSkillsUpgradeConfig")[n.skillId][s-1];if(a){this.m_SkillNameLab.text=a.skillName+" Lv."+s;var l=Math.floor(UserBag.getAttrPower(a.attrs));this.m_FightLab.text=GlobalConfig.jifengTiaoyueLg.st100306+l,this.m_FightGroup.visible=!0,AttributeData.setAttrGroup(a.attrs,this.m_NowAttrGroup);var h=[];h.push(a.cost);var c=a.cost.id,u=UserBag.ins().getBagGoodsCountById(0,c);this.itemId=c,this.m_NeedItem.setData(c,a.cost.count),this.itemNum=u,this.needNum=a.cost.count}var d=GlobalConfig.ins("SpearSkillsUpgradeConfig")[n.skillId][s];d?(this.m_NextAttrGroup.visible=!0,this.m_NextGroup.visible=!0,AttributeData.setAttrGroup(d.attrs,this.m_NextAttrGroup),this.m_LvUpGroup.visible=!0):(this.m_LvFullLab.visible=!0,this.m_NextGroup.visible=!1)}}},t.prototype.onClickLvUpBtn=function(){var e=TheGunModel.getInstance;this.itemNum>=this.needNum&&this.skillLv>0?TheGunSproto.ins().sendTheGunSkillUp(this.roleId,e.skillSelect+1):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100217)},t.prototype.onClickItem=function(e){var t=TheGunModel.getInstance;t.skillSelect=e.itemIndex,this.setData()},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t.prototype.playUpEff=function(){var e=this.m_MainSkillGroup.getChildAt(TheGunModel.getInstance.skillSelect);e&&e instanceof eui.Group&&(this.m_SkillEff=ViewManager.ins().createEff(this.m_SkillEff,e,"eff_ui_iconUpgrade")),this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_icon"),this.m_NewEff=ViewManager.ins().createEff(this.m_NewEff,this.m_EffGroup,"eff_ui_success")},t.prototype.onClickGetBtn=function(){UserWarn.ins().setBuyGoodsWarn(this.itemId)},t}(BaseEuiPanel);__reflect(TheGunSkillWin.prototype,"TheGunSkillWin"),ViewManager.ins().reg(TheGunSkillWin,LayerManager.UI_Popup),window.TheGunSkillWin=TheGunSkillWin;var TheGunStateWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="TheGunStateWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100687,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st102038,this.m_Lan0.text=GlobalConfig.jifengTiaoyueLg.st100246+GlobalConfig.jifengTiaoyueLg.st101831,this.m_bg.init("TheGunStateWin",GlobalConfig.jifengTiaoyueLg.st102039)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.theGunData=e[0],this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.m_TheGunAnim.release(),this.removeViewEvent()},t.prototype.addViewEvent=function(){},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=TheGunModel.getInstance,t=this.theGunData;if(t){this.m_LvLab.text=t.level+GlobalConfig.jifengTiaoyueLg.st100103,this.m_TheGunAnim.setTheGunData(t);var i=e.getTheGunStarLvAllAttr(t);AttributeData.setAttrGroup(i,this.m_LvUpGroup);var o=t.allDanAttr;AttributeData.setAttrGroup(o,this.m_DanGroup);var s=e.getSkillAttr(t);AttributeData.setAttrGroup(s,this.m_SkillGroup)}},t.prototype.onClickClose=function(){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(TheGunStateWin.prototype,"TheGunStateWin"),ViewManager.ins().reg(TheGunStateWin,LayerManager.UI_Popup),window.TheGunStateWin=TheGunStateWin;var TheGunWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st102041,t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.theGunPanel=new TheGunPanel,this.commonWindowBg.AddChildStack(this.theGunPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];TheGunSproto.ins().sendTheGunInitMsg(),this.commonWindowBg.OnAdded(this,e&&e[0]),this.addWinEvent(),this.updateRedPoint()},t.prototype.close=function(){this.theGunPanel.release(),this.removeObserve(),this.removeWinEvetn(),this.commonWindowBg.OnRemoved()},t.prototype.addWinEvent=function(){this.observe(TheGunEvt.THEGUN_DATAUPDATE_MSG,this.updateRedPoint),this.observe(TheGunEvt.THEGUN_AWARD_MSG,this.updateRedPoint),this.observe(TheGunEvt.THEGUN_DANYAO_MSG,this.updateRedPoint),this.observe(TheGunEvt.THEGUN_SKILLDATAUPDATE_MSG,this.updateRedPoint)},t.prototype.removeWinEvetn=function(){},t.prototype.updateRedPoint=function(){var e=TheGunModel.getInstance;this.commonWindowBg.ShowTalRedPoint(0,e.checkAllRedPoint())},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(TheGunWin.prototype,"TheGunWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(TheGunWin,LayerManager.UI_Main),window.TheGunWin=TheGunWin;var TheGunData=function(){function e(e){this.skill=new Dictionary,this.danYao=new Dictionary,this.roleid=e.roleid,e.scala?this.level=e.scala:this.level=1,this.exp=e.exp,this.star=e.star,this.power=e.power,this.init();for(var t=0;t<e.skill.length;t++)e.skill[t]&&this.skill.set(t+1,e.skill[t].level);for(var t=0;t<e.danyao.length;t++)this.danYao.set(e.danyao[t].id,e.danyao[t].num)}return e.prototype.init=function(){this.skill.clear();for(var e=GlobalConfig.ins("SpearCommonConfig").skill,t=0;4>t;t++){e[t];this.skill.set(t+1,0)}this.danYao.clear();var i=GlobalConfig.ins("SpearShuXingDanjcConfig");if(i)for(var o in i){var s=i[o];s&&this.danYao.set(s.id,0)}},Object.defineProperty(e.prototype,"isCanLvUp",{get:function(){var e=GlobalConfig.ins("SpearStarConfig")[this.star];if(null==e&&0==e.exp)return!1;var t=GlobalConfig.ins("SpearLevelConfig")[this.level],i=UserBag.ins().getBagGoodsCountById(0,t.cost[0].id),o=GameLogic.ins().actorModel.gold;return i>=t.cost[0].count&&o>=t.cost[1].count?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allDanAttr",{get:function(){var e=GlobalConfig.ins("SpearShuXingDanjcConfig"),t=[];for(var i in e)t.push(e[i]);if(this.danYao){for(var o=[],s=0;s<this.danYao.values.length;s++){for(var n=this.danYao.values[s],r=[],a=t[s].value,l=0;l<a.length;l++){var h={type:a[l].type,value:a[l].value*n};r.push(h)}o.push(r)}var c=AttributeData.getAttr(o);return c}return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"danPower",{get:function(){var e=this.allDanAttr;return Math.floor(UserBag.getAttrPower(e))},enumerable:!0,configurable:!0}),e}();__reflect(TheGunData.prototype,"TheGunData");var TheGunEvt=function(){function e(){}return e.THEGUN_DATAUPDATE_MSG="THEGUN_DATAUPDATE_MSG",e.THEGUN_AWARD_MSG="THEGUN_AWARD_MSG",e.THEGUN_DANYAO_MSG="THEGUN_DANYAO_MSG",e.THEGUN_SKILLDATAUPDATE_MSG="THEGUN_SKILLDATAUPDATE_MSG",e}();__reflect(TheGunEvt.prototype,"TheGunEvt"),window.TheGunEvt=TheGunEvt;var TheGunModel=function(){function e(){this.theGunDic=new Dictionary,this.m_SkillSoltUnlockDic=new Dictionary,this.achieve=[],this.skillSelect=-1,this.testData()}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.getAllPower=function(e){for(var t=0,i=this.getTheGunStarLvAllAttr(e),o=i,s=this.skillSoltDic.values,n=0;n<e.skill.values.length;n++){var r=GlobalConfig.ins("SpearSkillsUpgradeConfig")[s[n].skillId][e.skill.values[n]-1];r&&(o=AttributeData.getAttr([o,r.attrs]))}return t+=Math.floor(UserBag.getAttrPower(o)),t+=e.danPower},e.prototype.getSkillAttr=function(e){for(var t=[],i=this.skillSoltDic.values,o=0;o<e.skill.values.length;o++){var s=GlobalConfig.ins("SpearSkillsUpgradeConfig")[i[o].skillId][e.skill.values[o]-1];s&&(t=AttributeData.getAttr([t,s.attrs]))}return t},e.prototype.checkRoleRedPoint=function(e){return this.checkRoleSkillUp(e)||this.checkRoleTheGunLvUpRedPoint(e)||this.checkAllDanUp()?!0:!1},e.prototype.checkRoleSkillUp=function(e){var t=this.theGunDic.get(e.roleID);if(t)for(var i=[0,0,0,0],o=0;o<t.skill.values.length;o++){i[o]=t.skill.values[o];var s=this.skillSoltDic.get(o+1),n=this.checkSkillUp(s.skillId,i[o]);if(n)return!0}return!1},e.prototype.checkSkillUp=function(e,t){var i=GlobalConfig.ins("SpearSkillsUpgradeConfig")[e][t],o=GlobalConfig.ins("SpearSkillsUpgradeConfig")[e][t+1];if(i&&o){var s=i.cost.id,n=i.cost.count,r=UserBag.ins().getBagGoodsCountById(0,s);if(r>=n&&t>0)return!0}return!1},Object.defineProperty(e.prototype,"skillSoltDic",{get:function(){if(this.m_SkillSoltUnlockDic.length<=0){var e=GlobalConfig.ins("SpearLevelConfig");for(var t in e){var i=e[t].skill_limit;if(i){var o={slot:e[t].skill_limit[0],lv:e[t].level,skillId:e[t].skill_limit[1]};this.m_SkillSoltUnlockDic.set(o.slot,o)}}}return this.m_SkillSoltUnlockDic},enumerable:!0,configurable:!0}),e.prototype.checkRoleTheGunLvUpRedPoint=function(e){var t=this.theGunDic.get(e.roleID);return t&&t.isCanLvUp?!0:void 0},e.prototype.checkTheGunLvUpAwardRedPoint=function(){for(var e=0;e<this.achieve.length;e++)if(1==this.achieve[e])return!0;return!1},e.prototype.getTheGunStarLvAllAttr=function(e){var t=new Dictionary,i=GlobalConfig.ins("SpearStarConfig")[e.star],o=[],s=[];if(i)for(var n=0;n<i.attr.length;n++){var r={type:i.attr[n].type,value:i.attr[n].value};o.push(r)}var a=GlobalConfig.ins("SpearLevelConfig")[e.level];if(a)for(var n=0;n<a.attr.length;n++){var l={type:a.attr[n].type,value:a.attr[n].value};s.push(l)}for(var n=0;n<o.length;n++){var h=o[n].type,c=t.get(h);c?c.value+=o[n].value:t.set(h,o[n])}for(var n=0;n<s.length;n++){var h=s[n].type,c=t.get(h);c?c.value+=s[n].value:t.set(h,s[n])}return t.values},e.prototype.checkAllRedPoint=function(){return Deblocking.Check(DeblockingType.TYPE_92,!0)&&(this.checkAllSkillCanUp()||this.checkAllTheGunLvUpRedPoint()||this.checkTheGunLvUpAwardRedPoint()||this.checkAllDanUp())?!0:!1},e.prototype.checkAllSkillCanUp=function(){for(var e=SubRoles.ins().rolesModel,t=0;t<e.length;t++){var i=this.checkRoleSkillUp(e[t]);if(i)return!0}return!1},e.prototype.checkAllTheGunLvUpRedPoint=function(){for(var e=0;3>e;e++){var t=this.theGunDic.get(e);if(t&&t.isCanLvUp)return!0}return!1},e.prototype.checkAllDanUp=function(){var e=GlobalConfig.ins("SpearShuXingDanjcConfig");for(var t in e){var i=e[t],o=this.checkDanUp(i.id);if(o)return!0}return!1},e.prototype.checkDanUp=function(e){var t=UserBag.ins().getBagGoodsCountById(0,e);return t>0?!0:!1},e.prototype.testData=function(){var e=GlobalConfig.ins("SpearCommonConfig").skill;if(this.theGunDic.values.length<=0)for(var t=0;3>t;t++){var i=new Sproto.holygun_data;i.roleid=t,i.scala=1,i.exp=0,i.star=0,i.power=0;for(var o=[],s=0;4>s;s++){var n=new Sproto.skillinfo;n.skillid=e[s],n.level=0,o.push(n),i.skill=o}var r=[],a=GlobalConfig.ins("SpearShuXingDanjcConfig");if(a)for(var l in a){var h=a[l];if(h){var c=new Sproto.dan_info;c.id=h.id,c.num=0,r.push(c),i.danyao=r}}var u=new TheGunData(i);this.theGunDic.set(i.roleid,u)}},e}();__reflect(TheGunModel.prototype,"TheGunModel");var TheGunSproto=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_holygun_init,t.getTheGunInit),t.regNetMsg(S2cProtocol.sc_holygun_upscala,t.getTheGunLvUp),t.regNetMsg(S2cProtocol.sc_holygun_upstar,t.getTheGunStarUp),t.regNetMsg(S2cProtocol.sc_holygun_upskill,t.getTheGunSkillUp),t.regNetMsg(S2cProtocol.sc_holygun_eatdanyao,t.getTheGunDanYaoEat),t.regNetMsg(S2cProtocol.sc_holygun_achievement,t.getTheGunGetaward),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getTheGunInit=function(e){for(var t=TheGunModel.getInstance,i=0;i<e.data.length;i++){var o=new TheGunData(e.data[i]);t.theGunDic.set(e.data[i].roleid,o)}GameGlobal.MessageCenter.dispatch(TheGunEvt.THEGUN_DATAUPDATE_MSG)},t.prototype.getTheGunLvUp=function(e){var t=TheGunModel.getInstance,i=t.theGunDic.get(e.roleid);if(i){i.level=e.scala;var o=GlobalConfig.ins("SpearLevelConfig")[e.scala];ViewManager.ins().open(MainNewWin,ResAnimType.TYPE1,0,[o.appearance,o.name,2])}this.sendTheGunInitMsg(),GameGlobal.MessageCenter.dispatch(TheGunEvt.THEGUN_DATAUPDATE_MSG)},t.prototype.getTheGunStarUp=function(e){var t=TheGunModel.getInstance,i=t.theGunDic.get(e.roleid);
i&&(i.star=e.star,i.exp=e.exp),GameGlobal.MessageCenter.dispatch(TheGunEvt.THEGUN_DATAUPDATE_MSG)},t.prototype.getTheGunSkillUp=function(e){var t=TheGunModel.getInstance,i=t.theGunDic.get(e.roleid);i&&null!=e.id&&null!=e.level&&i.skill.set(e.id,e.level),GameGlobal.MessageCenter.dispatch(TheGunEvt.THEGUN_DATAUPDATE_MSG),GameGlobal.MessageCenter.dispatch(TheGunEvt.THEGUN_SKILLDATAUPDATE_MSG)},t.prototype.getTheGunDanYaoEat=function(e){var t=TheGunModel.getInstance,i=t.theGunDic.get(e.roleid);i&&i.danYao.set(e.id,e.num),GameGlobal.MessageCenter.dispatch(TheGunEvt.THEGUN_DANYAO_MSG),GameGlobal.MessageCenter.dispatch(TheGunEvt.THEGUN_DATAUPDATE_MSG)},t.prototype.getTheGunGetaward=function(e){var t=TheGunModel.getInstance;t.achieve=e.data,GameGlobal.MessageCenter.dispatch(TheGunEvt.THEGUN_AWARD_MSG)},t.prototype.sendTheGunInitMsg=function(){var e=new Sproto.cs_holygun_init_request;this.Rpc(C2sProtocol.cs_holygun_init,e),this.sendTheGunInitAward()},t.prototype.sendTheGunLvUp=function(e){var t=new Sproto.cs_holygun_upscala_request;t.roleid=e,this.Rpc(C2sProtocol.cs_holygun_upscala,t)},t.prototype.sendTheGunStarUp=function(e,t){var i=new Sproto.cs_holygun_upstar_request;i.roleid=e,i.isAuto=t,this.Rpc(C2sProtocol.cs_holygun_upstar,i)},t.prototype.sendTheGunSkillUp=function(e,t){var i=new Sproto.cs_holygun_upskill_request;i.roleid=e,i.id=t,this.Rpc(C2sProtocol.cs_holygun_upskill,i)},t.prototype.sendTheGunEatDanYao=function(e,t,i){var o=new Sproto.cs_holygun_eatdanyao_request;o.roleid=e,o.id=t,o.num=i,this.Rpc(C2sProtocol.cs_holygun_eatdanyao,o)},t.prototype.sendTheGunGetAward=function(e){var t=new Sproto.cs_holygun_reward_request;t.id=e,this.Rpc(C2sProtocol.cs_holygun_reward,t)},t.prototype.sendTheGunInitAward=function(){var e=new Sproto.cs_holygun_achievement_request;this.Rpc(C2sProtocol.cs_holygun_achievement,e)},t}(BaseSystem);__reflect(TheGunSproto.prototype,"TheGunSproto"),window.TheGunSproto=TheGunSproto;var UserTips=function(e){function t(){var t=e.call(this)||this;return MessageCenter.ins().addListener(MessageDef.POWER_BOOST,t.showBoostPower,t),t.regNetMsg(S2cProtocol.sc_error_code,t._ErrorTip),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype._ErrorTip=function(e){var t=e.msg;t&&this.showTips(t)},t.ErrorTip=function(e){t.ins().showTips("|C:0xff0000&T:"+e+"|")},t.InfoTip=function(e){t.ins().showTips("|C:0x535557&T:"+e+"|")},t.InfoTip2=function(e){t.ins().showTips("|C:0x00ff00&T:"+e+"|")},t.prototype.showTips=function(e){var t=ViewManager.ins().open(TipsView);DelayOptManager.ins().addDelayOptFunction(t,t.showTips,e)},t.prototype.showGoodEquipTips=function(e){ViewManager.ins().open(TipsView).showGoodEquipTip(e)},t.prototype.showBoostPower=function(e,t){ViewManager.ins().open(BoostPowerView).showBoostPower(e,t)},t.prototype.showFuncNotice=function(e){console.warn("showFuncNotice")},t}(BaseSystem);__reflect(UserTips.prototype,"UserTips"),MessageCenter.compile(UserTips),window.UserTips=UserTips;var BoostPowerView=function(e){function t(){var t=e.call(this)||this;return t.lastTime=0,t.lastPower=0,t.timeout=0,t.touchEnabled=!1,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this);var t=300,i=106;this.verticalCenter=20*this.numChildren,this.horizontalCenter=0,this.img=new eui.Image,this.img.source="comp_268_123_01_png",this.img.x=i+0,this.img.y=t+0,this.addChild(this.img),this.img.alpha=1,this.img.touchEnabled=!1,this.sp=new egret.Sprite,this.sp.x=i+150,this.sp.y=t+25,this.addChild(this.sp),this.lastTime=0,this.lastPower=0,this.clearShow()},t.prototype.showBoostPower=function(e,t){0==this.lastPower?(this.lastPower=t,TimerManager.ins().doTimer(500,1,this.delayPowerUp,this)):(TimerManager.ins().remove(this.delayPowerUp,this),TimerManager.ins().doTimer(500,1,this.delayPowerUp,this))},t.prototype.clearShow=function(){this.sp.removeChildren(),egret.Tween.removeTweens(this.img),this.img.visible=!1,TimerManager.ins().removeAll(this),egret.clearTimeout(this.timeout),this.timeout=0},t.prototype.delayPowerUp=function(){var e=this.lastPower,t=GameLogic.ins().actorModel.power;this.lastPower=0,t>e&&this.showPowerUp(e,t)},t.prototype.showPowerUp=function(e,t){var i=this;this.clearShow(),this.img.visible=!0,this.img.alpha=1;var o=new eui.BitmapLabel;o.font="font_pz_zi_j1_fnt",o.text=e+"",this.sp.addChild(o);var s=t-e,n=0;TimerManager.ins().doTimer(20,25,function(){n+=Math.floor(s/25),o.text=n+e+""},this,function(){o.text=GameLogic.ins().actorModel.power+"";var e="+"+s,t=new eui.BitmapLabel;t.font="font_pz_zi_j1_fnt",t.text=e,t.y-=o.height,i.sp.addChild(t);var n=1e3,r=500,a=egret.Tween.get(t);a.to({y:t.y-45},n).to({alpha:0},r).call(function(){egret.Tween.removeTweens(t),DisplayUtils.removeFromParent(t)},i);var l=egret.Tween.get(o);l.wait(n).to({alpha:0},r).call(function(){egret.Tween.removeTweens(o),DisplayUtils.removeFromParent(o)},i);var h=egret.Tween.get(i.img);h.wait(n).to({alpha:0},r).call(function(){egret.Tween.removeTweens(i.img),i.img.visible=!1},i)},this)},t}(BaseEuiView);__reflect(BoostPowerView.prototype,"BoostPowerView"),ViewManager.ins().reg(BoostPowerView,LayerManager.UI_Tips),window.BoostPowerView=BoostPowerView;var TipsGoodEquip=function(e){function t(){var t=e.call(this)||this;return t.isUsing=!1,t.skinName="OrangeEquipNoticeSkin",t.horizontalCenter=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"data",{set:function(e){this.item.data=e,4==e.itemConfig.quality?this.desc.text=GlobalConfig.jifengTiaoyueLg.st101899:5==e.itemConfig.quality&&(this.desc.text=GlobalConfig.jifengTiaoyueLg.st101898),this.itemName.text=e.itemConfig.name,this.itemName.textColor=ItemBase.QUALITY_COLOR[e.itemConfig.quality]},enumerable:!0,configurable:!0}),t}(eui.Component);__reflect(TipsGoodEquip.prototype,"TipsGoodEquip"),window.TipsGoodEquip=TipsGoodEquip;var TipsItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="TipsSkin",null==t.lab&&(t.lab=new eui.Label,t.lab.textColor=16711680,t.lab.horizontalCenter=0,t.touchEnabled=!1,t.verticalCenter=-1),null==t.bg&&(t.bg=new eui.Image),t}return __extends(t,e),Object.defineProperty(t.prototype,"labelText",{get:function(){return this._labelText},set:function(e){var t=this;if(null!=this.lab&&null!=this.bg){this._labelText=e,this.lab.textFlow=TextFlowMaker.generateTextFlow(this._labelText),this.bg.width=this.lab.width+80,this.bg.alpha=1,this.lab.alpha=1,this.bg.y=0,this.lab.verticalCenter=-1;var i=egret.Tween.get(this.bg);i.to({y:-25},500).wait(500).to({alpha:0},200).call(function(){DisplayUtils.removeFromParent(t)},this);var o=egret.Tween.get(this.lab);o.to({verticalCenter:-25},500).wait(500).to({alpha:0},200)}},enumerable:!0,configurable:!0}),t}(eui.Component);__reflect(TipsItem.prototype,"TipsItem"),window.TipsItem=TipsItem;var TipsView=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labCount=0,t.list=[],t.goodEquipList=[],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.touchChildren=!1,this.touchEnabled=!1,this.equipTip1=new TipsGoodEquip,this.equipTip2=new TipsGoodEquip},t.prototype.showTips=function(e){var t=ObjectPool.ins().pop("TipsItem");t.verticalCenter=0,t.horizontalCenter=0,t.labelText=e,this.addChild(t),this.list.unshift(t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTip,this);for(var i=this.list.length-1;i>=0;i--){egret.Tween.removeTweens(this.list[i]);var o=egret.Tween.get(this.list[i]);o.to({verticalCenter:-25*i},500)}},t.prototype.removeTip=function(e){var t=this.list.indexOf(e.currentTarget);this.list.splice(t,1),egret.Tween.removeTweens(e.currentTarget),e.currentTarget.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTip,this),ObjectPool.ins().push(e.currentTarget)},t.prototype.showGoodEquipTip=function(e){this.goodEquipList.push(e),TimerManager.ins().isExists(this.goodEquipTimer,this)||TimerManager.ins().doTimer(16,0,this.goodEquipTimer,this)},t.prototype.goodEquipTimer=function(){var e=this;if(0!=this.goodEquipList.length&&!this.isWait){var t=void 0;if(this.equipTip1.isUsing||(t=this.equipTip1),this.equipTip2.isUsing||(t=this.equipTip2),void 0!=t){t.x=50,t.y=700,t.alpha=1,this.addChild(t),t.isUsing=!0,this.isWait=!0;var i=this.goodEquipList.pop();t.data=i;var o=egret.Tween.get(t);o.to({y:550},500).call(function(){e.isWait=!1}).wait(1e3).to({alpha:0},1e3).call(function(){t.isUsing=!1,e.removeChild(t)});var s;if(s=t==this.equipTip1?this.equipTip2:this.equipTip1,s.isUsing){egret.Tween.removeTweens(s);var n=egret.Tween.get(s);n.to({y:400,alpha:0},1e3).wait(300).call(function(){s.isUsing=!1,e.removeChild(s)})}}}},t}(BaseEuiView);__reflect(TipsView.prototype,"TipsView"),ViewManager.ins().reg(TipsView,LayerManager.UI_Tips),window.TipsView=TipsView;var Title=function(e){function t(){var t=e.call(this)||this;return t.sysId=PackageID.Title,t.regNetMsg(S2cProtocol.sc_title_list,t.postListUpdate),t.regNetMsg(S2cProtocol.sc_title_add,t.doAdd),t.regNetMsg(S2cProtocol.sc_title_del,t.doRemove),t.regNetMsg(S2cProtocol.sc_title_set,t.doUpdateShow),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postUseTitle=function(e){return e},t.prototype.sendGetList=function(){GameSocket.ins().Rpc(C2sProtocol.cs_title_req)},t.prototype.postListUpdate=function(e){for(var t={},i=e.titles.length,o=0;i>o;++o)t[e.titles[o].titleid]=e.titles[o].titleEndTime;this.useRole=0,this.showID=SubRoles.ins().getSubRoleByIndex(0).title||0,this.initList(t)},t.prototype.doAdd=function(e){this.change(e.titleid,e.titleEndTime)},t.prototype.doRemove=function(e){this.change(e.titleid,-1)},t.prototype.sendChangeShow=function(e){var t=new Sproto.cs_title_set_request;t.titleid=e,GameSocket.ins().Rpc(C2sProtocol.cs_title_set,t)},t.prototype.doUpdateShow=function(e){var t=EntityManager.ins().getEntityByHandle(e.rolehandle);if(t&&(t.infoModel.title=e.titleid,t.updateTitle(),t.team==Team.My)){var i=this.showID,o=t.infoModel;o.title?(this.useRole=t.infoModel.index,this.showID=t.infoModel.title):o.index==this.useRole&&(this.showID=0),GameGlobal.MessageCenter.dispatch(MessageDef.TITLE_SHOW,this.useRole,this.showID,i)}},t.prototype.setTitle=function(e){this.sendChangeShow(e)},t.prototype.sortFunc=function(e,t){return e.endTime<0==t.endTime<0?e.config.Id>t.config.Id?1:-1:e.endTime<0?1:-1},t.prototype.initList=function(e){this.timeDict=e,this.infoDict={},this._totalAttrs=[],this._totalAttrsText=new eui.ArrayCollection;var t=[],i=GlobalConfig.ins("TitleConf");for(var o in i){var s=new TitleInfo(i[o]);if(s.config.Id in e){s.endTime=e[s.config.Id];for(var n in s.config.attrs)this._totalAttrs[s.config.attrs[n].type]=(this._totalAttrs[s.config.attrs[n].type]||0)+s.config.attrs[n].value}else s.endTime=-1;t[t.length]=this.infoDict[s.config.Id]=s,s.attrsTotal=this._totalAttrsText}t.sort(this.sortFunc),this.list=new eui.ArrayCollection(t),this.updateTotalAttrs(),this.setDressTitle(t)},t.prototype.setDressTitle=function(e){for(var t=[],i=0,o=e.length;o>i;i++){var s=e[i],n=new DressItemInfo;n.context=ViewManager.ins().getView(DressWin),n.zhuanban=s.config,n.isDress=s.config.Id==SubRoles.ins().getSubRoleByIndex(0).title,n.isUser=s.endTime>=0,n.timer=s.endTime,n.isTitle=!0,t.push(n)}this._dressTitleList=new eui.ArrayCollection(t)},Object.defineProperty(t.prototype,"dressTitleList",{get:function(){return this._dressTitleList},enumerable:!0,configurable:!0}),t.prototype.change=function(e,t){if(this.infoDict&&e in this.infoDict&&e in this.timeDict!=t>=0){var i=this.infoDict[e];i.endTime=t,0>t?delete this.timeDict[e]:this.timeDict[e]=t,this.list.source.sort(this.sortFunc),this.list.refresh();for(var o=0>t?-1:1,s=0,n=i.config.attrs;s<n.length;s++){var r=n[s];this._totalAttrs[r.type]=(this._totalAttrs[r.type]||0)+o*r.value}this.updateTotalAttrs(),this.setDressTitle(this.list.source)}},t.prototype.updateTotalAttrs=function(){var e=this._totalAttrsText.source;e.length=0;for(var t in this._totalAttrs)this._totalAttrs[t]>0&&e.push(TitleInfo.formatAttr(Number(t),this._totalAttrs[t]));if(0==e.length)for(var i=this.infoDict[1].config.attrs,o=0,s=i;o<s.length;o++){var n=s[o];e.push(TitleInfo.formatAttr(n.type,0))}this._totalAttrsText.refresh()},t.prototype.getTitleByActivityId=function(e){var t=GlobalConfig.ins("TitleConf");for(var i in t)if(e==t[i].Id)return t[i];return null},t.IsEffName=function(e){return null==e?!1:-1!=e.indexOf("eff")},t}(BaseSystem);__reflect(Title.prototype,"Title"),MessageCenter.compile(Title),window.Title=Title;var TitleInfo=function(){function e(e){this.config=e}return Object.defineProperty(e.prototype,"attrsText",{get:function(){if(!this._attrsText){for(var t=[],i=this.config.attrs.length;i--;)t[i]=e.formatAttr(this.config.attrs[i].type,this.config.attrs[i].value);this._attrsText=new eui.ArrayCollection(t),this._power=UserBag.getAttrPower(this.config.attrs)}return this._attrsText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){this.attrsText;return this._power},enumerable:!0,configurable:!0}),e.formatAttr=function(e,t){return{h:AttributeData.getAttrStrByType(e)+"：",t:String(t),textColor:65280}},e}();__reflect(TitleInfo.prototype,"TitleInfo"),window.TitleInfo=TitleInfo;var TitleItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onTap=function(e){e.target==this.btnSet&&Title.ins().postUseTitle(this.data)},t.prototype.dataChanged=function(){if(this.data instanceof TitleInfo){var e=this.data;e.config.img.split("_");if(-1!=e.config.img.indexOf("eff_title")?(this.mc||(this.mc=new MovieClip,this.mc.x=80,this.mc.y=60),this.mc.loadUrl(ResDataPath.GetUIEffePath(e.config.img),!0),this.addChild(this.mc),this.img.source=""):this.img.source=e.config.img,e.endTime>=0?(this.btnSet.selected=e.config.Id==Title.ins().showID,this.btnSet.visible=!0,this.labLack.visible=!1):(this.btnSet.visible=!1,this.labLack.visible=!0),"string"==typeof t.rareText[e.config.rare]){var i=TextFlowMaker.generateTextFlow("稀有度：|C:"+t.rareText[e.config.rare]).toString();t.rareText[e.config.rare]=i}this.labRare.textFlow=t.rareText[e.config.rare],this.powLabel.text=e.power,this.data.endTime<=0?this.timeTF.visible=!1:(this.timeTF.visible=!0,this.timeTF.text=DateUtils.getFormatBySecond(this.data.endTime-GameServer.serverTime,5,4)),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)}else this.timeTF.visible=!1,this.img.source="",this.powLabel.text="",this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.rareText=["0xfbf8ee&T:普通","0x00ff3c&T:稀有","0x066eba&T:珍贵","0xd200ff&T:国器","0xf45601&T:无双"],t}(eui.ItemRenderer);__reflect(TitleItem.prototype,"TitleItem"),window.TitleItem=TitleItem;var TitleWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="TitleSkin",this.list.itemRenderer=TitleItem},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];MessageCenter.addListener(Title.ins().postListUpdate,this.updateList,this),GameGlobal.MessageCenter.addListener(MessageDef.TITLE_SHOW,this.updateShow,this),MessageCenter.addListener(Title.ins().postUseTitle,this.useTitle,this),this.list.dataProvider=new eui.ArrayCollection,this.commonWindowBg.OnAdded(this,e[0]||0),null==Title.ins().list?Title.ins().sendGetList():this.updateList()},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),MessageCenter.ins().removeAll(this)},t.prototype.onTap=function(e){ViewManager.ins().close(t)},t.prototype.useTitle=function(e){e.config.Id!=Title.ins().showID?Title.ins().setTitle(e.config.Id):Title.ins().setTitle(0),this.updatePower()},t.prototype.updatePower=function(){for(var e=0,t=Title.ins().list,i=0;i<t.length;++i){var o=t.getItemAt(i);o.endTime>=0&&o.power&&(e+=o.power*SubRoles.ins().subRolesLen)}this.totalPower.text="战斗力 "+e},t.prototype.updateList=function(){this.list.dataProvider=Title.ins().list,this.updatePower()},t.prototype.updateShow=function(e,t,i){if(e==Title.ins().useRole){if(t>0==i>0)this.updateItemByID(i),this.updateItemByID(t);else for(var o in Title.ins().timeDict)this.updateItemByID(Number(o));this.updateList()}},t.prototype.updateItemByID=function(e){if(e in Title.ins().infoDict){var t=Title.ins().infoDict[e];Title.ins().list.itemUpdated(t)}},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(TitleWin.prototype,"TitleWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(TitleWin,LayerManager.UI_Main),window.TitleWin=TitleWin;var Hunt=function(e){function t(){var t=e.call(this)||this;return t.todayHuntCount=0,t.rewardbin=0,t.sysId=PackageID.TreasureHunt,t.regNetMsg(S2cProtocol.sc_treasure_hunt_result,t.doHuntResult),t.regNetMsg(S2cProtocol.sc_treasure_record_datas,t.doBestListInfo),t.regNetMsg(S2cProtocol.sc_treasure_add_record,t.doAddBestList),t.regNetMsg(S2cProtocol.sc_treasure_base_info,t.doTreasureBoxInfo),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendHunt=function(e){var t=new Sproto.cs_treasure_hunt_request;t.type=e,GameSocket.ins().Rpc(C2sProtocol.cs_treasure_hunt,t)},t.prototype.sendHuntList=function(){GameSocket.ins().Rpc(C2sProtocol.cs_treasure_record,new Sproto.cs_treasure_record_request)},t.prototype.doHuntResult=function(e){for(var t=e.type,i=e.items.length,o=[],s=0;i>s;s++)o[s]=[e.items[s].id,e.items[s].count];var n=ViewManager.ins().getView(HuntResultWin);n&&n.isShow()?GameGlobal.MessageCenter.dispatchImmediate(MessageDef.HUNT_RESULT,[t,o]):ViewManager.ins().open(HuntResultWin,t,o)},t.prototype.doBestListInfo=function(e){t.postBestListInfo(e)},t.postBestListInfo=function(e){for(var t=e.treasureRecord.length,i=[],o=0;t>o;o++)i[o]=[e.treasureRecord[o].name,e.treasureRecord[o].itemid];return i.reverse(),i},t.prototype.doAddBestList=function(e){var t=[e.treasureRecord.name,e.treasureRecord.itemid];GameGlobal.MessageCenter.dispatch(MessageDef.HUNT_ADDRECORD,t)},t.prototype.doTreasureBoxInfo=function(e){this.todayHuntCount=e.todayHuntCount,this.rewardbin=e.rewardbin,GameGlobal.MessageCenter.dispatch(MessageDef.HUNT_BOX_INFO)},t.prototype.getTreasureDailyAward=function(e){var t=new Sproto.cs_get_treasure_daily_award_request;t.id=e,GameSocket.ins().Rpc(C2sProtocol.cs_get_treasure_daily_award,t)},t}(BaseSystem);__reflect(Hunt.prototype,"Hunt"),MessageCenter.compile(Hunt),window.Hunt=Hunt;var ActivityType31Model=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_luckywheel_hunt,t.doHuntone),t.regNetMsg(S2cProtocol.sc_luckywheel_record,t.doLuckywheelRecord),t.regNetMsg(S2cProtocol.sc_luckywheel_add_record,t.doLuckywheelAddRecord),t.regNetMsg(S2cProtocol.sc_luckywheel_goldPool_broadcast,t.doLuckywheelGoldPool),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendHuntOne=function(e,t){void 0===t&&(t=0);var i=new Sproto.cs_luckywheel_hunt_request;i.type=e,i.activityId=t,this.Rpc(C2sProtocol.cs_luckywheel_hunt,i)},t.prototype.doHuntone=function(e){var t=e.type;if(e.items)var i=e.items.length;var o=e.activityId,s=GameGlobal.activityData[o];s&&(s.goldPool=e.goldCount);for(var n=[],r=0;i>r;r++)n[r]=[e.items[r].id,e.items[r].count];GameGlobal.MessageCenter.dispatch(MessageDef.HUNT_LUCK_REWARD,t,n)},t.prototype.sendLuckywheelList=function(){this.Rpc(C2sProtocol.cs_luckywheel_record,new Sproto.cs_luckywheel_record_request)},t.prototype.doLuckywheelRecord=function(e){t.postBestListInfo(e)},t.prototype.doLuckywheelGoldPool=function(e){var t=GameGlobal.activityData[e.activityId];t&&(t.goldPool=e.goldPool,GameGlobal.MessageCenter.dispatch(MessageDef.HUNT_LUCK_GOODPOOL,e.goldPool))},t.postBestListInfo=function(e){for(var t=e.luckywheelRecord.length,i=[],o=0;t>o;o++)i[o]=[e.luckywheelRecord[o].name,e.luckywheelRecord[o].itemid];return i.reverse(),i},t.prototype.doLuckywheelAddRecord=function(e){var i=[e.luckyWheelRecord.name,e.luckyWheelRecord.itemid];0==t.isPlayTween?setTimeout(function(){GameGlobal.MessageCenter.dispatch(MessageDef.HUNT_LUCK_ADDLOG,i)},5e3):GameGlobal.MessageCenter.dispatch(MessageDef.HUNT_LUCK_ADDLOG,i)},t.isPlayTween=!1,t.bCanClose=!0,t}(BaseSystem);__reflect(ActivityType31Model.prototype,"ActivityType31Model"),MessageCenter.compile(ActivityType31Model),window.ActivityType31Model=ActivityType31Model;var ActivityType31ResultWin=function(e){function t(){var t=e.call(this)||this;return t.arr=[],t.items=[],t.activityId=0,t.canClicck=!0,t.canBuy=!0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ActivityType31ResultSkin",this.closeBtn.label=GlobalConfig.jifengTiaoyueLg.st100040},t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),this.m_bg.init("ActivityType31ResultWin",GlobalConfig.jifengTiaoyueLg.st100038),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeCB,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this),this.observe(MessageDef.HUNT_RESULT,this.updateView),this.updateView([t[0],t[1],t[2]]),this.canClicck=!0},t.prototype.close=function(){e.prototype.close.call(this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeCB,this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this),MessageCenter.ins().removeAll(this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.updateView=function(e){this.huntType=e[0],this.arr=e[1],this.activityId=e[2];var t=ActivityType31Data.getConfig(this.activityId);0==this.huntType?(this.num.text=t.huntOnce+"",this.currentState="one",egret.setTimeout(function(){this.tip&&(this.tip.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102069,[1]),this.buyBtn.label=GlobalConfig.jifengTiaoyueLg.st102058)},this,200)):1==this.huntType?(this.num.text=t.huntTenth+"",this.currentState="ten",egret.setTimeout(function(){this.tip&&(this.tip.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102069,[10]),this.buyBtn.label=GlobalConfig.jifengTiaoyueLg.st102057)},this,200)):(this.num.text="",this.currentState="type_2",egret.setTimeout(function(){this.tip&&(this.tip.text=GlobalConfig.jifengTiaoyueLg.st102070)},this,200)),this.playResult()},t.prototype.playResult=function(){this.canBuy=!0,this.m_Group.removeChildren();for(var e=0;e<this.arr.length;e++){this.items[e]=this.createItem(this.m_Group,this.arr[e]);var i=egret.Tween.get(this.items[e]);this.items[e].x=e%5*t.c_distantX+t.c_firstX,this.items[e].y=Math.floor(e/5)*t.c_distantY+t.c_firstY,this.items[e].alpha=0,this.items[e].showEquipEffect(),i.wait(e*t.waitTime).to({alpha:1},200).call(function(e){egret.Tween.removeTweens(e)},this,[this.items[e]])}},t.PlayItem=function(e,i){var o=egret.Tween.get(i);i.x=e%5*t.c_distantX+t.c_firstX,i.y=Math.floor(e/5)*t.c_distantY+t.c_firstY,i.alpha=0,i.showEquipEffect(),o.wait(e*t.waitTime).to({alpha:1},200).call(function(){egret.Tween.removeTweens(i)})},t.playGet=function(e,i){if(void 0===i&&(i=void 0),0==e.length)return void(i&&i());var o=e.slice(0,e.length);e.length=0;for(var s,n=function(e,n){var r=o[e];r.alpha=1,egret.Tween.removeTweens(r),s=egret.Tween.get(r),s.to({y:t.c_depotY,x:t.c_depotX,scaleX:0,scaleY:0},300-50*Math.floor(e/5)).call(function(){if(egret.Tween.removeTweens(r),e==n-1){void 0!=i&&i();for(var t=0,s=o;t<s.length;t++){var a=s[t];a.destruct(),DisplayUtils.removeFromParent(a)}}})},r=0,a=o.length;a>r;r++)n(r,a)},t.prototype.createItem=function(e,i){var o=new ItemBase;if(e.addChild(o),i[0]==MoneyConst.yuanbao){GameGlobal.activityData[this.activityId];o.data={id:MoneyConst.yuanbao,type:0,count:i[1]}}else o.data=this.getRewardData(i[0]);return o.x=t.c_launchX,o.y=t.c_launchY,o},t.prototype.getRewardData=function(e){for(var t=ActivityType31Data.getConfig(this.activityId),i=t.rewardShow.length,o=0;i>o;++o){var s=t.rewardShow[o];if(e==s.id)return s}return e},t.prototype.closeCB=function(e){var i=this;if(this.canClicck){this.canClicck=!1;var o=function(){ViewManager.ins().close(i)};t.playGet(this.items,o)}},t.prototype.buy=function(e){return this.canClicck&&this.canBuy?this.huntType>1?void this.closeCB(null):void(Checker.Money(MoneyConst.yuanbao,Number(this.num.text),Checker.YUNBAO_FRAME)&&(this.canBuy=!1,t.playGet(this.items),ActivityType31Model.ins().sendHuntOne(this.huntType,this.activityId))):void 0},t.c_launchX=180,t.c_launchY=500,t.c_firstX=50,t.c_firstY=180,t.c_distantX=77,t.c_distantY=90,t.c_depotX=320,t.c_depotY=620,t.waitTime=50,t}(BaseEuiPanel);__reflect(ActivityType31ResultWin.prototype,"ActivityType31ResultWin"),ViewManager.ins().reg(ActivityType31ResultWin,LayerManager.UI_Popup),window.ActivityType31ResultWin=ActivityType31ResultWin;var EggBroken=function(e){function t(){var t=e.call(this)||this;return t.diffDay=0,t.regNetMsg(S2cProtocol.sc_eggbroken_hunt_result,t.doHuntResult),t.regNetMsg(S2cProtocol.sc_eggbroken_record_datas,t.doBestListInfo),t.regNetMsg(S2cProtocol.sc_eggbroken_add_record,t.doAddBestList),t.regNetMsg(S2cProtocol.sc_eggbroken_info,t.doEggbrokenInfo),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendHunt=function(e,t){void 0===t&&(t=0);var i=new Sproto.cs_eggbroken_hunt_request;i.type=e,i.activityId=t,GameSocket.ins().Rpc(C2sProtocol.cs_eggbroken_hunt,i)},t.prototype.sendHitting=function(e,t){void 0===t&&(t=0);var i=new Sproto.cs_eggbroken_hitting_request;i.id=e,i.activityId=t,GameSocket.ins().Rpc(C2sProtocol.cs_eggbroken_hitting,i)},t.prototype.sendHuntList=function(){GameSocket.ins().Rpc(C2sProtocol.cs_eggbroken_record,new Sproto.cs_eggbroken_record_request)},t.prototype.doHuntResult=function(e){for(var t=e.type,i=e.items.length,o=e.activityId,s=[],n=0;i>n;n++)s[n]=[e.items[n].id,e.items[n].count];ViewManager.ins().open(EggBrokenResultWin,t,s,o),GameGlobal.MessageCenter.dispatch(MessageDef.EGG_BROKEN_RESULT,t)},t.prototype.doBestListInfo=function(e){t.postBestListInfo(e)},t.postBestListInfo=function(e){for(var t=e.eggbrokenRecord.length,i=[],o=0;t>o;o++)i[o]=[e.eggbrokenRecord[o].name,e.eggbrokenRecord[o].itemid,e.eggbrokenRecord[o].count,e.eggbrokenRecord[o].activityId];return i.reverse(),i},t.prototype.doAddBestList=function(e){var t=[e.eggbrokenRecord.name,e.eggbrokenRecord.itemid,e.eggbrokenRecord.count,e.eggbrokenRecord.activityId];GameGlobal.MessageCenter.dispatch(MessageDef.EggBroken_ADDRECORD,t)},t.prototype.doEggbrokenInfo=function(e){this.count=e.count,this.awards=e.awards,this.endTime=e.endTime,GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_ACTIVITY_PANEL,ActivityModel.CUS_ACT_3.id)},t.prototype.HasAward=function(e){void 0===e&&(e=!0);var t=e?GlobalConfig.ins("SEtotalrewardsConfig"):GlobalConfig.ins("SEtotalrewardsAConfig");for(var i in t)if(0==(this.awards&1<<t[i].index)&&this.count>=t[i].time)return!0;return!1},t.IsOpen=function(){var e=GlobalConfig.ins("SmashEggsConfig").opentime;return GameServer.serverOpenDay>=e[0]&&GameServer.serverOpenDay<=e[1]},t}(BaseSystem);__reflect(EggBroken.prototype,"EggBroken"),MessageCenter.compile(EggBroken),window.EggBroken=EggBroken;var EggBrokenPanel=function(e){function t(){var t=e.call(this)||this;return t.m_ArrayDatas=new eui.ArrayCollection,t.skinName="EggBrokenSkin",t.menuScroller.scrollPolicyV=eui.ScrollPolicy.OFF,t.listEgg.itemRenderer=EggBrokenPanelItem,t.list.itemRenderer=HuntListRenderer,t.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101309,t.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101310,t.warehouse.label=GlobalConfig.jifengTiaoyueLg.st101311,t.buy0.label=GlobalConfig.jifengTiaoyueLg.st101312,t.buy1.label=GlobalConfig.jifengTiaoyueLg.st101313,t}return __extends(t,e),t.prototype.open=function(e){this.updateView(),this.buy0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.buy1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.warehouse.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),MessageCenter.addListener(EggBroken.postBestListInfo,this.listRefush,this),GameGlobal.MessageCenter.addListener(MessageDef.EggBroken_ADDRECORD,this.listAddData,this),GameGlobal.MessageCenter.addListener(MessageDef.EGG_BROKEN_RESULT,this._UpdateList,this),GameGlobal.MessageCenter.addListener(MessageDef.ITEM_COUNT_CHANGE,this._UpdateRedPoint,this),EggBroken.ins().sendHuntList();var t=GlobalConfig.ins("SEDayConfig")[GameServer.serverOpenDay];if(this.priceIcon1.price=GlobalConfig.ins("SmashEggsConfig").huntOnce,this.priceIcon2.price=GlobalConfig.ins("SmashEggsConfig").huntTenth,t){t=t.rewardShow;for(var i=0;3>i;i++)this["item"+i].data=t[i],this["item"+i].showItemEffect()}this.listRefush([]),this.listEgg.dataProvider=this.m_ArrayDatas,this._UpdateList(),this.lefttime.text=this.updateTimer(EggBroken.ins().endTime)},t.prototype._OnClick=function(){ViewManager.ins().open(TreasureStorePanel)},t.prototype._UpdateList=function(){var e=[],t=GlobalConfig.ins("SEtotalrewardsConfig");for(var i in t)e.push([t[i].index,t[i].time]);e.sort(function(e,t){return e[0]-t[0]}),this.m_ArrayDatas.replaceAll(e),this._UpdateRedPoint()},t.prototype._UpdateRedPoint=function(){UIHelper.ShowRedPoint(this.warehouse,TreasureHuntWin.IsRedPointByWarehouse())},t.prototype.close=function(){this.buy0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.buy1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.warehouse.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),MessageCenter.ins().removeAll(this)},t.prototype.listRefush=function(e){this.list.dataProvider=new eui.ArrayCollection(e)},t.prototype.listAddData=function(e){this.list.dataProvider.addItemAt(e,0)},t.prototype.onBuy=function(e){switch(e.target){case this.buy0:this.buyHunt(0);break;case this.buy1:this.buyHunt(1)}},t.prototype.buyHunt=function(e){var t=0==e&&GlobalConfig.ins("SmashEggsConfig").huntOnce||GlobalConfig.ins("SmashEggsConfig").huntTenth;Checker.Money(MoneyConst.yuanbao,t,Checker.YUNBAO_FRAME)&&EggBroken.ins().sendHunt(e)},t.prototype.hitting=function(e){EggBroken.ins().sendHitting(e)},t.prototype.updateData=function(){},t.prototype.updateView=function(){},t.prototype.updateTimer=function(e){var t="",i=e-GameServer.serverTime;return t=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100628,[i/24/3600>>0,i/3600%24>>0,i/60%60>>0])},t}(eui.Component);__reflect(EggBrokenPanel.prototype,"EggBrokenPanel");var EggBrokenPanelItem=function(e){function t(){var t=e.call(this)||this;return t.index=0,t.needcount=0,t.skinName="OnlyOneEggSkin",t.btOpen.addEventListener(egret.TouchEvent.TOUCH_TAP,t.OnClick,t),t}return __extends(t,e),t.prototype.OnClick=function(e){switch(e.currentTarget){case this.btOpen:this.IsHas()||ViewManager.ins().open(EggBrokenPreview2Panel,this.index)}},t.prototype.dataChanged=function(){this.index=this.data[0],this.needcount=this.data[1],this.hasopen.visible=this.IsHas(),this.showCount.textFlow=ConsumeLabel.GetValueColor(Math.min(EggBroken.ins().count,this.needcount),this.needcount)},t.prototype.IsHas=function(){return 0!=(1<<this.index&EggBroken.ins().awards)},t}(eui.ItemRenderer);__reflect(EggBrokenPanelItem.prototype,"EggBrokenPanelItem"),window.EggBrokenPanel=EggBrokenPanel,window.EggBrokenPanelItem=EggBrokenPanelItem;var EggBrokenPreview2Panel=function(e){function t(){var t=e.call(this)||this;return t.m_Index=1,t.skinName="EggBrokenItem2Skin",t.group.itemRenderer=ItemBase,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_Index=e[0],this.dialogCloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClose,this),this.AddClick(this.sure,this._OnClick),this.group.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(GlobalConfig.ins("SEtotalrewardsConfig")[this.m_Index].box))},t.prototype.close=function(){this.dialogCloseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClose,this)},t.prototype._OnClick=function(){EggBroken.ins().count>=GlobalConfig.ins("SEtotalrewardsConfig")[this.m_Index].time?EggBroken.ins().sendHitting(this.m_Index):UserTips.ErrorTip("目标未达成"),ViewManager.ins().close(this)},t.prototype._OnClose=function(e){ViewManager.ins().close(this)
},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(EggBrokenPreview2Panel.prototype,"EggBrokenPreview2Panel"),window.EggBrokenPreview2Panel=EggBrokenPreview2Panel;var EggBrokenResultWin=function(e){function t(){var t=e.call(this)||this;return t.arr=[],t.items=[],t.activityId=0,t.canClicck=!0,t.canBuy=!0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="EggBrokenResultSkin",this.titleLabel.text=GlobalConfig.jifengTiaoyueLg.st101314,this.closeBtn.label=GlobalConfig.jifengTiaoyueLg.st101176},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeCB,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this),this.observe(MessageDef.HUNT_RESULT,this.updateView),this.updateView([e[0],e[1],e[2]]),this.dialogCloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype.close=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeCB,this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this),MessageCenter.ins().removeAll(this),this.dialogCloseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.updateView=function(e){this.huntType=e[0],this.arr=e[1],this.activityId=e[2];var t=ActivityModel.GetActivityConfig(this.activityId);0==this.huntType?(this.num.text=t&&12==t.activityType?GlobalConfig.ins("SmashEggsAConfig").huntOnce+"":GlobalConfig.ins("SmashEggsConfig").huntOnce+"",this.currentState="one",egret.setTimeout(function(){this.tip.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101315,[1]),this.buyBtn.label=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101316,[1])},this,100)):1==this.huntType?(this.num.text=t&&12==t.activityType?GlobalConfig.ins("SmashEggsAConfig").huntTenth+"":GlobalConfig.ins("SmashEggsConfig").huntTenth+"",this.currentState="ten",egret.setTimeout(function(){this.tip.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101315,[10]),this.buyBtn.label=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101316,[10])},this,100)):(this.num.text="",this.currentState="type_2"),this.playResult()},t.prototype.playResult=function(){this.canBuy=!0,this.m_Group.removeChildren();for(var e=0;e<this.arr.length;e++){this.items[e]=t.createItem(this.m_Group,this.arr[e]);var i=egret.Tween.get(this.items[e]);this.items[e].x=e%5*t.c_distantX+t.c_firstX,this.items[e].y=Math.floor(e/5)*t.c_distantY+t.c_firstY,this.items[e].alpha=0,this.items[e].showEquipEffect(),i.wait(e*t.waitTime).to({alpha:1},200).call(function(e){egret.Tween.removeTweens(e)},this,[this.items[e]])}},t.PlayItem=function(e,i){var o=egret.Tween.get(i);i.x=e%5*t.c_distantX+t.c_firstX,i.y=Math.floor(e/5)*t.c_distantY+t.c_firstY,i.alpha=0,i.showEquipEffect(),o.wait(e*t.waitTime).to({alpha:1},200).call(function(){egret.Tween.removeTweens(i)})},t.playGet=function(e,i){if(void 0===i&&(i=void 0),0==e.length)return void(i&&i());var o=e.slice(0,e.length);e.length=0;for(var s,n=function(e,n){var r=o[e];r.alpha=1,egret.Tween.removeTweens(r),s=egret.Tween.get(r),s.to({y:t.c_depotY,x:t.c_depotX,scaleX:0,scaleY:0},300-50*Math.floor(e/5)).call(function(){if(egret.Tween.removeTweens(r),e==n-1){void 0!=i&&i();for(var t=0,s=o;t<s.length;t++){var a=s[t];a.destruct(),DisplayUtils.removeFromParent(a)}}})},r=0,a=o.length;a>r;r++)n(r,a)},t.createItem=function(e,i,o){void 0===o&&(o=null);var s=new(o||ItemBase);return e.addChild(s),s.num=i[1],s.data=i[0],s.x=t.c_launchX,s.y=t.c_launchY,s},t.prototype.closeCB=function(e){var i=this;if(this.canClicck){this.canClicck=!1;var o=function(){ViewManager.ins().close(i)};t.playGet(this.items,o)}},t.prototype.buy=function(e){return this.canClicck&&this.canBuy?this.huntType>1?void this.closeCB(null):void(Checker.Money(MoneyConst.yuanbao,Number(this.num.text),Checker.YUNBAO_FRAME)&&(this.canBuy=!1,t.playGet(this.items),EggBroken.ins().sendHunt(this.huntType,this.activityId))):void 0},t.c_launchX=180,t.c_launchY=500,t.c_firstX=50,t.c_firstY=180,t.c_distantX=77,t.c_distantY=90,t.c_depotX=320,t.c_depotY=620,t.waitTime=50,t}(BaseEuiPanel);__reflect(EggBrokenResultWin.prototype,"EggBrokenResultWin"),ViewManager.ins().reg(EggBrokenResultWin,LayerManager.UI_Popup),window.EggBrokenResultWin=EggBrokenResultWin;var TreasureBoss=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_treasure_boss_list,t.doTreasureBossList),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendTreasureBossList=function(){GameSocket.ins().Rpc(C2sProtocol.cs_get_treasure_boss_list,new Sproto.cs_get_treasure_boss_list_request)},t.prototype.doTreasureBossList=function(e){t.postTreasureBossList(e)},t.postTreasureBossList=function(e){var t=e.bosslist;return t.sort(this.bossSort),[t,e.huntMin,e.huntMax]},t.bossSort=function(e,t){return e.people>t.people?1:e.people<t.people?-1:e.id>t.id?1:e.id<t.id?-1:0},t.prototype.enterTreasureRaid=function(e){var t=new Sproto.cs_enter_treasure_raid_request;t.handle=e,GameSocket.ins().Rpc(C2sProtocol.cs_enter_treasure_raid,t)},t}(BaseSystem);__reflect(TreasureBoss.prototype,"TreasureBoss"),MessageCenter.compile(TreasureBoss),window.TreasureBoss=TreasureBoss;var TreasureBossPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100041,t.name=GlobalConfig.jifengTiaoyueLg.st100041,t.skinName="TreasureBossPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.tab.itemRenderer=TreasureBossTab,this.group.itemRenderer=ItemBase,this.bar.slideDuration=0,this.bossImage=new MovieClip,this.bossImage.scaleX=-1,this.bossImage.x=this.bossGroup.width/2,this.bossImage.y=this.bossGroup.height/2,this.bossGroup.addChild(this.bossImage),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100045,this.battleBtn.label=GlobalConfig.jifengTiaoyueLg.st100046,this.noRef.text=GlobalConfig.jifengTiaoyueLg.st100048},t.prototype.open=function(){this.addItemTapEvent(this,this.onTouchTab,this.tab),this.AddClick(this.battleBtn,this.onClick),MessageCenter.addListener(TreasureBoss.postTreasureBossList,this.listRefush,this),this.tab.selectedIndex=0,TreasureBoss.ins().sendTreasureBossList()},t.prototype.close=function(){this.removeObserve()},t.prototype.onTouchTab=function(e){this.updateBossInfo()},t.prototype.listRefush=function(e){this.bar.maximum=e[2],this.bar.value=e[1],this.dec.textFlow=TextFlowMaker.generateTextFlow(GlobalConfig.jifengTiaoyueLg.st100042+StringUtils.addColor(GlobalConfig.jifengTiaoyueLg.st100043,Color.Green)+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100044,[e[2]])),e[0].length>0?(this.tab.dataProvider=new eui.ArrayCollection(e[0]),this.tab.selectedIndex=0,this.updateBossInfo(),this.stateGroup.visible=!0,this.noRef.visible=!1):(this.tab.dataProvider=new eui.ArrayCollection([0]),this.stateGroup.visible=!1,this.noRef.visible=!0)},t.prototype.updateBossInfo=function(){var e,t=this.tab.selectedItem,i=GlobalConfig.ins("TreasureHuntBossConfig");for(var o in i)for(var s=i[o],n=0;n<s.length;n++)if(t.id==s[n].keyId){e=s[n];break}if(e){var r=GlobalConfig.monstersConfig[e.bossId];this.bossImage.loadUrl(ResDataPath.GetMonsterBodyPath(r.avatar+"_3s"),!0,-1),this.group.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(e.rewards))}},t.prototype.onClick=function(e){TreasureBoss.ins().enterTreasureRaid(this.tab.selectedItem.handle),ViewManager.ins().close(TreasureHuntWin)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(TreasureBossPanel.prototype,"TreasureBossPanel",["ICommonWindowTitle"]),window.TreasureBossPanel=TreasureBossPanel;var TreasureBossTab=function(e){function t(){var t=e.call(this)||this;return t.skinName="TreasureBossTabSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.copyName.text=GlobalConfig.jifengTiaoyueLg.st100047+(this.itemIndex+1)},Object.defineProperty(t.prototype,"selected",{set:function(e){this.selected!=e&&(this.invalidateState(),this.selectedImage.visible=e)},enumerable:!0,configurable:!0}),t}(eui.ItemRenderer);__reflect(TreasureBossTab.prototype,"TreasureBossTab"),window.TreasureBossTab=TreasureBossTab;var BreakDownItemRenderer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.configID=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.itemIcon.isShowJob(!1),this.itemIcon.isShowName(!1)},t.prototype.dataChanged=function(){var e=this.data.itemConfig,i="";i=e.zsLevel>0?e.zsLevel+GlobalConfig.jifengTiaoyueLg.st100067:"Lv."+e.level,this.itemIcon.data=this.data,this.equipName.textFlow=TextFlowMaker.generateTextFlow(e.name+StringUtils.addColor(i,Color.Green));var o=10*e.level+1e4*e.zsLevel+e.quality+1e3*e.type;6==e.type&&(o=e.id);var s=GlobalConfig.ins("SmeltConfig")[o],n=s.stoneId,r=GlobalConfig.ins("ItemConfig")[n];if(e.type==ItemType.ZHUANZHI)return this.desc.text=GlobalConfig.jifengTiaoyueLg.st100771+" x"+s.stoneNum,this.desc.textColor=12920861,this.tip.visible=!1,void(this.configID=this.data.handle);if(4==e.quality?(this.breakDown.label=GlobalConfig.jifengTiaoyueLg.st100775,this.tip.text=GlobalConfig.jifengTiaoyueLg.st100776,this.tip2.text=GlobalConfig.jifengTiaoyueLg.st100772):(this.breakDown.label=GlobalConfig.jifengTiaoyueLg.st100777,this.tip.text=GlobalConfig.jifengTiaoyueLg.st100778,this.tip2.text=GlobalConfig.jifengTiaoyueLg.st101112),5==e.quality)this.desc.text=GlobalConfig.jifengTiaoyueLg.st100496+" x"+t.getSmeltConfig(e).stoneNum,this.desc.textColor=12920861;else{var a=t.getSmeltConfig(e).stoneNum,l=t.getSmeltConfig(e);0==e.subType?this.desc.text=r.name+" x"+(a+l.weaponStone):2==e.subType?this.desc.text=r.name+" x"+(a+l.clotheStone):this.desc.text=r.name+" x"+a,this.desc.textColor=16738849}var h=(GameLogic.ins().actorModel.level,UserEquip.ins().getEquipConfigIDByPosAndQuality(e.subType,e.quality)),c=GlobalConfig.itemConfig[h],u=1e4*e.zsLevel+e.level,d=1e4*c.zsLevel+c.level;5!=e.quality&&d>u?this.tip.visible=!0:this.tip.visible=!1,this.configID=this.data.handle},t.getSmeltConfig=function(e){var t=GlobalConfig.ins("SmeltConfig");return t[10*e.level+1e4*e.zsLevel+e.quality]},t}(eui.ItemRenderer);__reflect(BreakDownItemRenderer.prototype,"BreakDownItemRenderer"),window.BreakDownItemRenderer=BreakDownItemRenderer;var BreakDownListview=function(e){function t(){var t=e.call(this)||this;return t.itemID=0,t.quality=0,t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="BreakDownSkin",this.equipList.itemRenderer=BreakDownItemRenderer,this.listData=new eui.ArrayCollection,this.equipList.dataProvider=this.listData,this.goList=[],this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100762},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_bg.init("BreakDownListview",GlobalConfig.jifengTiaoyueLg.st100762),this.m_ResolveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickResolveBtn,this),GameGlobal.MessageCenter.addListener(MessageDef.DELETE_ITEM,this.updateData,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.itemID=e[0],this.quality=e[1];var i="";1e3==this.quality?(this.m_ResolveBtn.label=GlobalConfig.jifengTiaoyueLg.st100763,this.m_bg.txtTitle.text=GlobalConfig.jifengTiaoyueLg.st100764,i=GlobalConfig.jifengTiaoyueLg.st100765):5==this.quality?(this.m_ResolveBtn.label=GlobalConfig.jifengTiaoyueLg.st100763,this.m_bg.txtTitle.text=GlobalConfig.jifengTiaoyueLg.st100766,i=GlobalConfig.jifengTiaoyueLg.st100767):(this.m_ResolveBtn.label=GlobalConfig.jifengTiaoyueLg.st100768,this.m_bg.txtTitle.text=GlobalConfig.jifengTiaoyueLg.st100769,i=GlobalConfig.jifengTiaoyueLg.st100770),this.tipImg.text=i,this.updateData()},t.prototype.close=function(){this.m_ResolveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickResolveBtn,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this);for(var e=0;e<this.goList.length;e++)this.goList[e].parent&&this.goList[e].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGo,this);MessageCenter.ins().removeAll(this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.updateData=function(){var e;if(e=1e3==this.quality?UserBag.ins().getBagEquipByZhuanZhiSplit():UserBag.ins().getBagEquipByOrangeSplit(this.quality),e.sort(function(e,t){var i=GlobalConfig.itemConfig[e.configID],o=GlobalConfig.itemConfig[t.configID];return i.zsLevel>o.zsLevel?1:i.zsLevel<o.zsLevel?-1:i.level>o.level?1:i.level<o.level?-1:0}),this.listData.source=e,e.length>0){this.m_MaxResolveGroup.visible=!0;for(var t=0,i=0;i<e.length;i++){var o=e[i].itemConfig,s=0;o.type==ItemType.ZHUANZHI?GlobalConfig.ins("SmeltConfig")[o.id]&&(s=GlobalConfig.ins("SmeltConfig")[o.id].stoneNum):BreakDownItemRenderer.getSmeltConfig(o)&&(s=BreakDownItemRenderer.getSmeltConfig(o).stoneNum);var n=BreakDownItemRenderer.getSmeltConfig(o);t+=0==o.subType?s+(n.weaponStone?n.weaponStone:0):2==o.subType?s+(n.clotheStone?n.clotheStone:0):s}1e3==this.quality?this.m_MaxDebrisNum.textFlow=TextFlowMaker.getTextFlowByHtml("<font color='#535557'>"+GlobalConfig.jifengTiaoyueLg.st101112+"：</font>"+GlobalConfig.jifengTiaoyueLg.st100771+t):5==this.quality?this.m_MaxDebrisNum.textFlow=TextFlowMaker.getTextFlowByHtml("<font color='#535557'>"+GlobalConfig.jifengTiaoyueLg.st101112+"：</font>"+GlobalConfig.jifengTiaoyueLg.st100496+"X"+t):this.m_MaxDebrisNum.text=""}else this.m_MaxResolveGroup.visible=!1;null==this.gainItemConfig&&(this.gainItemConfig=GlobalConfig.ins("GainItemConfig"));var r=this.gainItemConfig[this.itemID],a=0;if(!Assert(r,"BreakDown GainItemConfig "+this.itemID+" null")){a=r.gainWay.length;for(var l=void 0,h=0;h<this.goList.length;h++)this.goList[h].parent&&(this.goList[h].visible=!1);for(var h=0;a>h;h++){this.goList[h]||this.goList.push(new GainGoodsItem);var l=this.goList[h];this.addTouchEvent(this,this.onGo,l),l.visible=!0,l.data=r.gainWay[h],this.contrain.addChild(l),l.y=57*h}}},t.prototype.onTap=function(e){switch(e.currentTarget){default:if(e.target instanceof eui.Button)switch(e.target.name){case"breakDown":var t=e.target.parent.data,i=t.itemConfig;if(i&&5==i.quality&&LegendModel.ins().CanEquipTip(t.configID)){var o=GlobalConfig.jifengTiaoyueLg.st100773+ItemBase.QUALITY_COLOR_STR[5]+"&T:"+t.itemConfig.name+"|\n"+GlobalConfig.jifengTiaoyueLg.st100774;return void WarnWin.show(TextFlowMaker.generateTextFlow(o),function(){UserEquip.ins().sendSmeltEquip(1,[t])},this)}UserEquip.ins().sendSmeltEquip(1,[t])}}},t.prototype.onGo=function(e){var t=e.currentTarget,i=t.userData;ViewManager.ins().close(this),ViewManager.Guide(i[1][0],null)},t.prototype.onClickResolveBtn=function(){var e=this;if(this.listData.source&&this.listData.source.length>0){for(var t=0;t<this.listData.source.length;t++){var i=this.listData.source[t],o=i.itemConfig;if(o&&5==o.quality&&LegendModel.ins().CanEquipTip(i.configID)){var s=GlobalConfig.jifengTiaoyueLg.st100773+ItemBase.QUALITY_COLOR_STR[5]+"&T:"+i.itemConfig.name+"|\n"+GlobalConfig.jifengTiaoyueLg.st100774;return void WarnWin.show(TextFlowMaker.generateTextFlow(s),function(){UserEquip.ins().sendSmeltEquip(1,e.listData.source)},this)}}UserEquip.ins().sendSmeltEquip(0,this.listData.source)}},t}(BaseEuiPanel);__reflect(BreakDownListview.prototype,"BreakDownListview"),ViewManager.ins().reg(BreakDownListview,LayerManager.UI_Popup),window.BreakDownListview=BreakDownListview;var GainGoodsItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GainGoodsItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){if(this.data){var e=this.data[0];this.data[1],this.data[2],this.desc.text=e}},Object.defineProperty(t.prototype,"userData",{get:function(){return this.data},enumerable:!0,configurable:!0}),t}(eui.ItemRenderer);__reflect(GainGoodsItem.prototype,"GainGoodsItem"),window.GainGoodsItem=GainGoodsItem;var GetReward2Panel=function(e){function t(){var t=e.call(this)||this;return t.m_Rewards=[],t.skinName="ChapterRewardPanelSkin",t.group.itemRenderer=ItemBase,t.sure.label=GlobalConfig.jifengTiaoyueLg.st100004,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_Des=e[1],this.m_Rewards=e[2],this.m_Callback=e[3],this.state=null==e[4]?RewardState.CanGet:e[4],this.addTouchEvent(this,this.OnClick,this.sure),this.m_bg.init("GetReward2Panel",e[0]),this.UpdateContent()},t.prototype.SetDes=function(e){this.m_Des=e,this.desc.text=e},t.prototype.SetReward=function(e){this.m_Rewards=e||[],this.group.dataProvider=new eui.ArrayCollection(this.m_Rewards)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.close=function(){this.removeEvents(),this.removeObserve()},t.prototype.UpdateContent=function(){this.state==RewardState.NotReached?(this.sure.enabled=!1,this.getway.visible=!1):this.state==RewardState.CanGet?(this.sure.enabled=!0,this.getway.visible=!1):this.state==RewardState.Gotten?(this.sure.enabled=!1,this.getway.visible=!1):(this.sure.enabled=!0,this.getway.visible=!1),this.m_Rewards&&this.SetReward(this.m_Rewards),this.m_Des&&this.SetDes(this.m_Des)},t.prototype.OnClick=function(){for(var e=this.m_Rewards,t=0,i=0;i<e.length;i++)1==e[i].type&&e[i].id<2e5&&t++;UserBag.ins().getSurplusCount()>=t?(this.m_Callback&&!this.m_Callback()&&ViewManager.ins().close(this),this.m_Callback=null):UserTips.ins().showTips("|C:0xf87372&T:背包少于"+t+"格，请清理背包|")},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(GetReward2Panel.prototype,"GetReward2Panel"),window.GetReward2Panel=GetReward2Panel;var GodSuitAttrPanel=function(e){function t(){var t=e.call(this)||this;return t.height01=530,t.height02=487,t.labelY=88,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GodSuitAttrSkin",this.attrList.itemRenderer=GodSuitAttrItem,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100642},t.GetStage=function(e){return LegendModel.GetStage(e)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_bg.init("GodSuitAttrPanel",GlobalConfig.jifengTiaoyueLg.st100302),this.m_Role=e[0],this.UpdateContent()},t.prototype.close=function(){},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.UpdateContent=function(){for(var e=[],i=1,o=0;i>o;++o){for(var s=[],n=[],r=0;r<EquipPos.MAX;++r)s[r]=!1,n[r]=0;e[o]={mIndex:o,mEquipSet:s,mLv:n}}for(var a=this.m_Role,o=0;o<EquipPos.MAX;++o){var l=a.getEquipByIndex(o);if(l.goditem.configID>0){var h=t.GetStage(l.goditem.configID);e[0].mEquipSet[o]=!0,e[0].mLv[o]=h}}this.label0.visible=0==e.length,this.attrList.dataProvider=new eui.ArrayCollection(e),this.attrList.validateNow();for(var c=0,o=0;o<this.attrList.numChildren;++o)c+=this.attrList.getChildAt(o).height},t}(BaseEuiPanel);__reflect(GodSuitAttrPanel.prototype,"GodSuitAttrPanel");var GodSuitAttrItem=function(e){function t(){var t=e.call(this)||this;return t.m_Info=[],t}return __extends(t,e),t.prototype.childrenCreated=function(){t.HEIGHT=this.height;for(var e=0;4>e;++e)this.m_Info[e]=this["info"+e],t.LABEL_HEIGHT=this.m_Info[e].height;this.m_EquipPosGroup=this.equipPosGroup.$children,this.m_EquipLvGroup=this.equipLvGroup.$children,t.NORMAL=this.m_EquipPosGroup[0].textColor},t.prototype.dataChanged=function(){for(var e=this.data.mEquipSet,i=(this.data.mIndex,0),o=0;o<e.length;++o){var s=e[o];this.m_EquipPosGroup[o].textColor=s?Color.Green:t.NORMAL,this.m_EquipLvGroup[o].textColor=s?Color.Green:t.NORMAL,this.m_EquipPosGroup[o].text=t.godSuitToName(o),i+=s?1:0}for(var n=new Dictionary,r=this.data.mLv,a=0;a<r.length;a++){var l=r[a];0==l?this.m_EquipLvGroup[a].text="("+GlobalConfig.jifengTiaoyueLg.st100280+")":this.m_EquipLvGroup[a].text="("+l+GlobalConfig.jifengTiaoyueLg.st100103+")";for(var h=0;h<r.length;h++)if(r[a]<=r[h]&&h!=a){var c=n.get(r[a]);c||n.set(r[a],r[a])}}for(var u=new Dictionary,d=n.values,a=0;a<d.length;a++)for(var h=0;h<r.length;h++)if(d[a]<=r[h]){var p=u.get(d[a]);p?p+=1:p=1,u.set(d[a],p)}var f=u.keys;f.sort(this.sorLv);for(var g=Math.min(Math.floor(.5*i)+1,EquipPos.MAX>>1),_=0;4>_;++_){for(var m=2*(_+1),v=this.m_Info[_],y=0,h=0;h<f.length;h++)if(u.get(f[h])>=m){y=f[h];break}var b=GlobalConfig.ins("LegendSuitConfig")[y];b||(b=GlobalConfig.ins("LegendSuitConfig")[1]),i>=m?v.textFlow=[{text:"("+m+"/8)"+AttributeData.getAttStr(new AttributeData(b["attr"+m][0]),0),style:{textColor:Color.Green}},{text:"("+y+GlobalConfig.jifengTiaoyueLg.st100641+")",style:{textColor:15584087}}]:v.textFlow=[{text:"("+m+"/8)"+AttributeData.getAttStr(new AttributeData(b["attr"+m][0]),0),style:{textColor:t.NORMAL}},{text:"("+GlobalConfig.jifengTiaoyueLg.st100340+")",style:{textColor:t.NORMAL}}],v.visible=g>_}this.height=t.HEIGHT-(4-g)*t.LABEL_HEIGHT},t.prototype.sorLv=function(e,t){return t-e},t.godSuitToName=function(e){var t=[GlobalConfig.jifengTiaoyueLg.st100114,GlobalConfig.jifengTiaoyueLg.st100115,GlobalConfig.jifengTiaoyueLg.st100116,GlobalConfig.jifengTiaoyueLg.st100117,GlobalConfig.jifengTiaoyueLg.st100118,GlobalConfig.jifengTiaoyueLg.st100118,GlobalConfig.jifengTiaoyueLg.st100119,GlobalConfig.jifengTiaoyueLg.st100119];return t[e]},t.NORMAL=10395294,t.LABEL_HEIGHT=19,t.HEIGHT=144,t}(eui.ItemRenderer);__reflect(GodSuitAttrItem.prototype,"GodSuitAttrItem"),ViewManager.ins().reg(GodSuitAttrPanel,LayerManager.UI_Popup),window.GodSuitAttrPanel=GodSuitAttrPanel,window.GodSuitAttrItem=GodSuitAttrItem;var HuntListRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="HuntListRendererSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data,i=GlobalConfig.itemConfig[e[1]];if(null!=i){var o,s="";e[2]&&(s="x"+e[2]),o=0==i.type?"<font color = '#12b2ff'>"+e[0]+"</font> "+GlobalConfig.jifengTiaoyueLg.st101471+" <font color='"+ItemBase.QUALITY_COLOR[i.quality]+"'>"+t.makeNameList(i)+s+"</font>":"<font color = '#12b2ff'>"+e[0]+"</font> "+GlobalConfig.jifengTiaoyueLg.st101471+" <font color='"+ItemBase.QUALITY_COLOR[i.quality]+"'>"+i.name+s+"</font>",this.showText.textFlow=TextFlowMaker.generateTextFlow(o)}},t.MakeTextFlow=function(e,t,i){var o=GlobalConfig.itemConfig[t];if(null==o)return[];var s,n="";return i&&(n="x"+i),s=0==o.type?"<font color = '#12b2ff'>"+e+"</font> "+GlobalConfig.jifengTiaoyueLg.st101471+"  <font color='"+ItemBase.QUALITY_COLOR[o.quality]+"'>"+this.makeNameList(o)+n+"</font>":"<font color = '#12b2ff'>"+e+"</font>"+GlobalConfig.jifengTiaoyueLg.st101471+"  <font color='"+ItemBase.QUALITY_COLOR[o.quality]+"'>"+o.name+n+"</font>",TextFlowMaker.generateTextFlow(s)},t.makeNameList=function(e){var t="";return t=e.name,t+=e.zsLevel>0?"("+e.zsLevel+GlobalConfig.jifengTiaoyueLg.st100067+" ":"("+e.level+GlobalConfig.jifengTiaoyueLg.st100093+" ",t+=Role.jobNumberToName(e.job)+")"},t.QUALITY_COLOR=["#f7f0f0","#5ad200","#00d8ff","#ce1af5","#feca2d","#f87372"],t}(eui.ItemRenderer);__reflect(HuntListRenderer.prototype,"HuntListRenderer"),window.HuntListRenderer=HuntListRenderer;var HuntResultWin=function(e){function t(){var t=e.call(this)||this;return t.arr=[],t.items=[],t.canClicck=!0,t.canBuy=!0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="HuntResult",this.priceIcon03.iconImg.source=ResDataPath.GetItemFullName("200015"),this.closeBtn.label=GlobalConfig.jifengTiaoyueLg.st100040},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.canClicck=!0,this.canBuy=!0,this.m_bg.init("HuntResultWin",GlobalConfig.jifengTiaoyueLg.st100038),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeCB,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this),this.observe(MessageDef.HUNT_RESULT,this.updateView),this.observe(UserBag.postItemAdd,this.updatePrice),this.updateView([e[0],e[1]])},t.prototype.close=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeCB,this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this),MessageCenter.ins().removeAll(this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.updateView=function(e){var t;this.huntType=e[0],this.arr=e[1],0==this.huntType?(this.tip.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100039,[1]),this.buyBtn.label=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100037,[1]),this.num.text=GlobalConfig.ins("TreasureHuntConfig").huntOnce+"",this.currentState="one",t=1):(this.tip.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100039,[10]),this.buyBtn.label=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100037,[10]),this.num.text=GlobalConfig.ins("TreasureHuntConfig").huntTenth+"",this.currentState="ten",t=10);var i=UserBag.ins().getBagGoodsCountById(UserBag.BAG_TYPE_OTHTER,ItemConst.TREASURE_HUNT);this.priceIcon03.setText("("+i+"/"+t+")"),this.playResult()},t.prototype.updatePrice=function(){var e=UserBag.ins().getBagGoodsCountById(UserBag.BAG_TYPE_OTHTER,ItemConst.TREASURE_HUNT),t=0==this.huntType?1:10;this.priceIcon03.setText("("+e+"/"+t+")")},t.prototype.playResult=function(){this.canBuy=!0,this.scrollerCon.scrollV=0,this.scrollerCon.removeChildren();for(var e=0;e<this.arr.length;e++){this.items[e]=this.createItem(this.arr[e]);var i=egret.Tween.get(this.items[e]);this.items[e].x=e%5*t.c_distantX+t.c_firstX,this.items[e].y=Math.floor(e/5)*t.c_distantY+t.c_firstY,this.items[e].alpha=0,this.items[e].showEquipEffect(),i.wait(e*t.waitTime).to({alpha:1},200).call(function(e){egret.Tween.removeTweens(e)},this,[this.items[e]])}},t.prototype.playGet=function(e){if(void 0===e&&(e=void 0),0==this.items.length)return void(e&&e());var i=this.items.slice(0,this.items.length);this.items=[];for(var o,s=function(s,n){var r=i[s];r.alpha=1,egret.Tween.removeTweens(r),o=egret.Tween.get(r),o.to({y:t.c_depotY,x:t.c_depotX,scaleX:0,scaleY:0},300-50*Math.floor(s/5)).call(function(){if(egret.Tween.removeTweens(r),s==n-1){void 0!=e&&e();for(var t=0,o=i;t<o.length;t++){var a=o[t];a.destruct(),DisplayUtils.removeFromParent(a)}}})},n=0,r=i.length;r>n;n++)s(n,r)},t.prototype.createItem=function(e){var t=new ItemBase;return this.scrollerCon.addChild(t),t.num=e[1],t.data=e[0],t},t.prototype.closeCB=function(e){var t=this;if(this.canClicck){this.canClicck=!1;var i=function(){ViewManager.ins().close(t)};this.playGet(i)}},t.prototype.buy=function(e){if(this.canClicck&&this.canBuy){var t=UserBag.ins().getBagGoodsCountById(UserBag.BAG_TYPE_OTHTER,ItemConst.TREASURE_HUNT),i=0==this.huntType?1:10;return void(t>=i?(this.canBuy=!1,this.playGet(),Hunt.ins().sendHunt(this.huntType)):UserWarn.ins().setBuyGoodsWarn(ItemConst.TREASURE_HUNT,10-t));var t,t}},t.c_launchX=0,t.c_launchY=0,t.c_firstX=2,t.c_firstY=0,t.c_distantX=110,t.c_distantY=116,t.c_depotX=320,t.c_depotY=620,t.waitTime=50,t}(BaseEuiPanel);__reflect(HuntResultWin.prototype,"HuntResultWin"),ViewManager.ins().reg(HuntResultWin,LayerManager.UI_Popup),window.HuntResultWin=HuntResultWin;var ItemBaseStore=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onClick=function(){var e=this.data.handle;this.data.type?UserBag.ins().sendGetGoodsByStore(e,UserBag.BAG_TYPE_VIPTREASUREHUNT):UserBag.ins().sendGetGoodsByStore(e)},t}(ItemBase);__reflect(ItemBaseStore.prototype,"ItemBaseStore");var TreasureStorePanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.name=GlobalConfig.jifengTiaoyueLg.st101311,this.skinName="TreasureStore",this.list.itemRenderer=ItemBaseStore,this.listScroller.viewport=this.list,this.getBtn.label=GlobalConfig.jifengTiaoyueLg.st101317},t.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.type=e[0],t.isOpen=!0,this.m_bg.init("TreasureStorePanel",GlobalConfig.jifengTiaoyueLg.st101311),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getGoods,this),MessageCenter.addListener(UserBag.postHuntStore,this.updateData,this),this.updateData()},t.prototype.close=function(){t.isOpen=!1;for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];this.getBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.getGoods,this),MessageCenter.ins().removeAll(this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.updateData=function(){var e=[];e=this.type?UserBag.ins().getHuntGoodsBySort(UserBag.BAG_TYPE_VIPTREASUREHUNT):UserBag.ins().getHuntGoodsBySort();for(var t=0;t<e.length;t++)e[t].type=this.type;this.list.dataProvider=new eui.ArrayCollection(e)},t.prototype.getGoods=function(e){this.list.dataProvider.length>0&&(this.type?(UserBag.ins().sendGetGoodsByStore(0,UserBag.BAG_TYPE_VIPTREASUREHUNT),UserBag.ins().getSurplusCount()<this.list.dataProvider.length&&(ViewManager.ins().close(t),BagFullTipsPanel.OpenNoCloseMe()),egret.setTimeout(function(){GameGlobal.MessageCenter.dispatch(CouponEvt.COUPON_TREASURE_UPDATE)},this,500)):(UserBag.ins().sendGetGoodsByStore(0),UserBag.ins().getSurplusCount()<this.list.dataProvider.length&&(ViewManager.ins().close(t),BagFullTipsPanel.OpenNoCloseMe())))},t.isOpen=!1,t}(BaseEuiPanel);__reflect(TreasureStorePanel.prototype,"TreasureStorePanel"),ViewManager.ins().reg(TreasureStorePanel,LayerManager.UI_Popup),window.ItemBaseStore=ItemBaseStore,window.TreasureStorePanel=TreasureStorePanel;var LegendEquipPanel=function(e){function t(){var t=e.call(this)||this;return t.m_EquipGroup=[],t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st101855,t.skinName="LegendEquipSkin",t}return __extends(t,e),t.GetLegendEquipId=function(e){return Number("1"+ForgeConst.EQUIP_POS_TO_SUB[e]+"1500")},t.GetMaxRank=function(){var e=1;for(var t in GlobalConfig.ins("LegendSuitConfig"))Number(t)>e&&(e=Number(t));return e},t.prototype.childrenCreated=function(){for(var e=0;e<this.group.numChildren;++e)this.m_EquipGroup[e]=new LegendEquipItem(ForgeConst.EQUIP_POS_TO_SUB[e],e,this.group.getChildAt(e),this._Select,this);this.consumeLabel.consumeType=GlobalConfig.jifengTiaoyueLg.st100631,this.curIndex=0,this.topLevel.text=GlobalConfig.jifengTiaoyueLg.st100234},t.prototype.open=function(){this.getShenzhuangLink.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openSmeltView,this);for(var e=0,t=this.m_EquipGroup;e<t.length;e++){var i=t[e];i.addEventListener()}this.executeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.executeCB,this),MessageCenter.addListener(UserEquip.ins().postMixGodEquip,this.mixCB,this),MessageCenter.addListener(UserBag.postItemAdd,this.UpdateContent,this),GameGlobal.MessageCenter.addListener(MessageDef.DELETE_ITEM,this.UpdateContent,this),MessageCenter.addListener(UserBag.postItemChange,this.UpdateContent,this),this.observe(MessageDef.LEGEND_UPDATE_DRESS,this.UpdateDress),this.suitAttr.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ShowSuitAttr,this),this.suitAttr0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ShowSuitAttr0,this),MessageCenter.addListener(UserEquip.ins().postSmeltEquipComplete,this.checkHaveLegend,this);for(var o=0,s=this.m_EquipGroup;o<s.length;o++){var i=s[o];i.SetSelect(this.curIndex)}this.checkHaveLegend()},t.prototype.close=function(){this.getShenzhuangLink.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openSmeltView,this);for(var e=0,t=this.m_EquipGroup;e<t.length;e++){var i=t[e];i.removeEventListener()}this.executeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.executeCB,this),this.suitAttr.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ShowSuitAttr,this),this.suitAttr0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ShowSuitAttr0,this),MessageCenter.ins().removeAll(this)},t.prototype.checkHaveLegend=function(){var e=UserBag.ins().getBagEquipByOrangeSplit(5);UIHelper.SetBtnJumpEffe(this.getShenzhuangLink,e.length>0),this.getShenzhuangLink.redPoint.visible=e.length>0
},t.prototype.ShowSuitAttr=function(e){ViewManager.ins().open(GodSuitAttrPanel,SubRoles.ins().getSubRoleByIndex(this._roleId))},t.prototype.ShowSuitAttr0=function(e){ViewManager.ins().open(LegendShowPanel,this._roleId)},t.prototype.executeCB=function(e){if(this.executeBtn.label==GlobalConfig.jifengTiaoyueLg.st100296){if(this.consumeLabel.curValue<this.consumeLabel.consumeValue)return void UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st100632+"|");this.grewup()}else if(this.executeBtn.label==GlobalConfig.jifengTiaoyueLg.st100613){var i=UserEquip.ins().canEquipHandler[this.curIndex],o=UserBag.ins().getBagGoodsByHandle(UserBag.BAG_TYPE_EQUIP,i);o&&(Checker.Level(o.itemConfig.zsLevel,o.itemConfig.level,!1)?UserEquip.ins().sendWearEquipment(UserEquip.ins().canEquipHandler[this.curIndex],this.curIndex,this._roleId):(i=UserEquip.ins().checkContrast(this.curIndex),i?UserEquip.ins().sendWearEquipment(i,this.curIndex,this._roleId):UserTips.ins().showTips(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100633,[o.itemConfig.zsLevel]))))}else if(this.executeBtn.label==GlobalConfig.jifengTiaoyueLg.st100640){var s=t.GetLegendEquipId(this.curIndex);s&&s>0&&UserWarn.ins().setBuyGoodsWarn(s)}},t.prototype.grewup=function(){var e=GlobalConfig.itemConfig[this.curEquipConfigId+1];return e.level>GameLogic.ins().actorModel.level||e.zsLevel>UserZs.ins().lv?void UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st100634+"|"):void UserEquip.ins().sendGrewupEquip(this._roleId,this.curIndex,!0)},t.prototype.mix=function(){var e=UserEquip.ins().getEquipConfigIDByPosAndQuality(ForgeConst.EQUIP_POS_TO_SUB[this.curIndex],5,1,this._roleId,this.curIndex),t=GlobalConfig.itemConfig[e];t.level<=GameLogic.ins().actorModel.level&&t.zsLevel<=UserZs.ins().lv?UserEquip.ins().sendMixEquip(this._roleId,this.curEquipConfigId,this.curIndex):UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st100635+"|")},t.prototype.mixCB=function(e,t,i){return 1==t?void UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st100636+"|"):0==t?void UserTips.ins().showTips("|C:0xf87372&T:"+GlobalConfig.jifengTiaoyueLg.st100637+"|"):2==t?(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100638),void this.UpdateContent()):(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100639),void this.UpdateContent())},t.prototype.openSmeltView=function(e){ViewManager.ins().open(BreakDownListview,ItemConst.LEGEND_FRAGMENT,5)},t.prototype._Select=function(e){this.curIndex=e;for(var t=0,i=this.m_EquipGroup;t<i.length;t++){var o=i[t];o.SetSelect(e)}this.UpdateContent()},t.prototype.UpdateContent=function(){UserEquip.ins().updateEquipHandler(),this.updateAttrPanel(),this.updateIconAndDesc();for(var e=0;e<SubRoles.ins().subRolesLen;++e)this.m_RoleSelectPanel.showRedPoint(e,LegendModel.ins().IsRedPointByRole(e));UIHelper.SetCircleEffe(this.suitAttr0,LegendModel.ins().IsNewDress(this.m_RoleSelectPanel.curRole),36,33),this.UpdateDress()},t.prototype.UpdateDress=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.curRole),t=!1;if(null==e.legendDress){var i=LegendModel.GetFullStageByRoleIndex(this.m_RoleSelectPanel.curRole),o=(i[0],i[1]);o>0&&(t=!0)}UIHelper.ShowRedPoint(this.suitAttr0,t)},t._GetConfigIDByNumber=function(e,t){return void 0===t&&(t=0),1e5+t+1e4*ForgeConst.EQUIP_POS_TO_SUB[e]+500+1e3},t.prototype.updateAttrPanel=function(){var e=SubRoles.ins().getSubRoleByIndex(this._roleId).getEquipByIndex(this.curIndex),t=GlobalConfig.itemConfig[e.goditem.configID+1],i=null,o=0;if(this.getShenzhuangLink.visible=!0,this.topLevel.visible=!1,void 0==t&&0!=e.goditem.handle&&5==GlobalConfig.itemConfig[e.goditem.configID].quality)this.mixAttributes.visible=!0,this.grewupAttributes.visible=!1,this.curEquipConfigId=this.updateMixPanel(5),this.executeBtn.visible=!1,this.consumeLabel.visible=!1,this.topLevel.visible=!0,this.m_AttrComp.setLeftLab(GlobalConfig.jifengTiaoyueLg.st101858);else{if(void 0!=t&&0!=e.goditem.handle&&5==GlobalConfig.itemConfig[e.goditem.configID].quality){this.mixAttributes.visible=!1,this.grewupAttributes.visible=!0,this.curEquipConfigId=this.updateGrewupPanel(),this.executeBtn.label=GlobalConfig.jifengTiaoyueLg.st100296;var s=GlobalConfig.legendLevelupConfig[this.curEquipConfigId];i=s.count,o=s.itemId}else this.mixAttributes.visible=!0,this.grewupAttributes.visible=!1,this.curEquipConfigId=this.updateMixPanel(),this.executeBtn.label=UserEquip.ins().canEquipHandler[this.curIndex]>0?GlobalConfig.jifengTiaoyueLg.st100613:GlobalConfig.jifengTiaoyueLg.st100640,this.m_AttrComp.setLeftLab(GlobalConfig.jifengTiaoyueLg.st101859);if(this.executeBtn.visible=!0,i){var n=UserBag.ins().getBagGoodsCountById(0,o);this.consumeLabel.curValue=n,this.consumeLabel.consumeValue=i,this.consumeLabel.visible=!0}else this.consumeLabel.visible=!1}},t.prototype.updateMixPanel=function(e){void 0===e&&(e=0);var i=(GameLogic.ins().actorModel.level,t._GetConfigIDByNumber(this.curIndex,e)),o=GlobalConfig.equipConfig[i],s=[];for(var n in AttributeData.translate)if(!(o[n]<=0)&&o[n]){var r={type:AttributeData.translate[n],value:o[n]};s.push(r)}if(o.baseAttr)for(var a=0;a<o.baseAttr.length;a++){var l={type:o.baseAttr[a].type,value:o.baseAttr[a].value};s.push(l)}return this._SetAttrIcon01(this.mixAttributes.icon,i,5==e),this.m_AttrComp.setState("state2"),this.m_AttrComp.setLeftAttr(s),i},t.prototype.updateGrewupPanel=function(){var e=SubRoles.ins().getSubRoleByIndex(this._roleId).getEquipByIndex(this.curIndex),t=e.goditem.configID,i=(GlobalConfig.itemConfig[t],GlobalConfig.itemConfig[t+1]);if(void 0==i);else{var o=[],s=[],n=[],r=[],a=[],l=GlobalConfig.equipConfig[t],h=GlobalConfig.equipConfig[t+1],c=e.goditem;for(var u in AttributeData.translate)if(!(l[u]<=0)){if(void 0!=c)for(var d=c.att,p=0;p<d.length;p++)if(d[p].type==AttributeData.translate[u]){n.push(" +"+d[p].value+"%");break}var f={type:AttributeData.translate[u],value:l[u]},g={type:AttributeData.translate[u],value:h[u]};s.push(f),r.push(g),o.push(AttributeData.getAttrStrByType(AttributeData.translate[u]))}if(l.baseAttr)for(var _=0;_<l.baseAttr.length;_++){var m={type:l.baseAttr[_].type,value:l.baseAttr[_].value};s.push(m)}if(h.baseAttr)for(var _=0;_<h.baseAttr.length;_++){var v={type:h.baseAttr[_].type,value:h.baseAttr[_].value};r.push(v)}this._SetAttrIcon01(this.grewupAttributes.curIcon,t),this._SetAttrIcon01(this.grewupAttributes.nextIcon,t+1),this.m_AttrComp.setState("state1"),this.m_AttrComp.setLeftLab(GlobalConfig.jifengTiaoyueLg.st101858),this.m_AttrComp.setRightLab(GlobalConfig.jifengTiaoyueLg.st101859),this.m_AttrComp.setLeftAttr(s,n),this.m_AttrComp.setRightAttr(r,a)}return t},t.prototype._SetOtherAttr=function(e,t,i){void 0===i&&(i=!1),null!=e&&(null!=t.baseAttr?(e.visible=!0,e.text=AttributeData.getAttStrByType(t.baseAttr[0],0,"+",!1,!i)):e.visible=!1)},t.prototype._SetAttrIcon01=function(e,t,i){void 0===i&&(i=!0);var o=GlobalConfig.itemConfig[t];e.icon.source=i?ResDataPath.GetItemFullName(o.icon):LegendEquipItem.DEACTIVATE_IMG[o.subType],e.nameTxt.text=o.name,e.level.text=""+o.zsLevel+GlobalConfig.jifengTiaoyueLg.st100067},t.prototype.updateIconAndDesc=function(){for(var e=0,t=this.m_EquipGroup;e<t.length;e++){var i=t[e];i.UpdateItem(SubRoles.ins().getSubRoleByIndex(this._roleId))}},Object.defineProperty(t.prototype,"_roleId",{get:function(){return this.m_RoleSelectPanel.getCurRole()},enumerable:!0,configurable:!0}),t}(BaseView);__reflect(LegendEquipPanel.prototype,"LegendEquipPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]);var LegendEquipItem=function(){function e(e,t,i,o,s){this.m_EquipType=e,this.m_EquipIndex=t,this.m_Item=i,this.m_Callback=o,this.m_ThisObject=s}return e.prototype.SetSelect=function(e){this.m_Item.select.visible=this.m_EquipIndex==e},e.prototype.UpdateItem=function(t){this.m_Item.currentState="normal",this.m_Item.redPoint.visible=UserEquip.ins().setLegendEquipItemState(this.m_EquipIndex,t);var i=t.getEquipByIndex(this.m_EquipIndex),o=0!=i.goditem.configID?i.goditem.configID:LegendEquipPanel._GetConfigIDByNumber(this.m_EquipIndex),s=GlobalConfig.itemConfig[o];this.m_Item.title.text=s.name.split("(")[0];GlobalConfig.itemConfig[o].zsLevel;if(0!=i.goditem.handle&&5==GlobalConfig.itemConfig[i.goditem.configID].quality){var n=GlobalConfig.itemConfig[i.goditem.configID];this.m_Item.icon.source=n.icon+"_png",this.m_Item.level.text=""+LegendModel.GetStage(i.goditem.configID)+GlobalConfig.jifengTiaoyueLg.st100103}else this.m_Item.icon.source=e.DEACTIVATE_IMG[this.m_EquipType],this.m_Item.level.text=""},e.prototype._Click=function(){this.m_Callback&&this.m_Callback.call(this.m_ThisObject,this.m_EquipIndex)},e.prototype.addEventListener=function(){this.m_Item.addEventListener(egret.TouchEvent.TOUCH_TAP,this._Click,this)},e.prototype.removeEventListener=function(){this.m_Item.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._Click,this)},e.ACTIVATE_IMG=(_a={},_a[EquipType.WEAPON]="101501_png",_a[EquipType.HEAD]="111501_png",_a[EquipType.CLOTHES]="121501_png",_a[EquipType.NECKLACE]="131501_png",_a[EquipType.BRACELET]="141501_png",_a[EquipType.RING]="151501_png",_a),e.DEACTIVATE_IMG=(_b={},_b[EquipType.WEAPON]="101501_1_png",_b[EquipType.HEAD]="111501_1_png",_b[EquipType.CLOTHES]="121501_1_png",_b[EquipType.NECKLACE]="131501_1_png",_b[EquipType.BRACELET]="141501_1_png",_b[EquipType.RING]="151501_1_png",_b),e}();__reflect(LegendEquipItem.prototype,"LegendEquipItem"),window.LegendEquipPanel=LegendEquipPanel,window.LegendEquipItem=LegendEquipItem;var _a,_b,LegendSalePanel=function(e){function t(){var t=e.call(this)||this;return t.m_Stage=1,t.windowTitleIconName="L永恒神装R",t.skinName="LegendSalePanelSkin",t.dataGroup.itemRenderer=ItemBaseEffe,t}return __extends(t,e),t.prototype.open=function(){this.commonWindowBg.OnAdded(this),this.AddClick(this.commonWindowBg.closeBtn,this._OnClickClose),this.observe(MessageDef.LEGEND_UPDATE_SALE,this._DoUpdate),this.AddClick(this.buyBtn,this._OnClick),TimerManager.ins().doTimer(1e3,0,this._UpdateTimeLabel,this),this.UpdateContent()},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),TimerManager.ins().doTimer(1e3,0,this._UpdateTimeLabel,this)},t.prototype._OnClickClose=function(){ViewManager.ins().close(this)},t.prototype._OnClick=function(){LegendModel.ins().IsOpenSale()&&Checker.Money(MoneyConst.yuanbao,LegendModel.ins().GetSaleConfig().price)&&LegendModel.ins().SendBuyLegendSale()},t.prototype._DoUpdate=function(){this.buyBtn.visible=LegendModel.ins().IsOpenSale()},t.prototype.UpdateContent=function(){this.buyBtn.visible=!1;var e=LegendModel.ins().GetSaleConfig(),t=e?e:GlobalConfig.ins("LegendSuitSoldConfig")[1];this.m_Stage=t.legendLv,this.dataGroup.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(e.reward)),this.dataGroup.validateNow(),this.y_price.price=e.yuanjia,this.price.price=e.price,this.rankLabel.text=this.m_Stage+"阶永恒神装",LegendShowPanel.SetRoleShowPanel(this.roleShowPanel,this.m_Stage,0),this._UpdateTimeLabel()},t.prototype._UpdateTimeLabel=function(){this.timeLabel.visible=LegendModel.ins().IsOpenSale(),this.buyBtn.visible=LegendModel.ins().IsOpenSale(),this.timeLabel.text="剩余时间："+DateUtils.format_12(1e3*LegendModel.ins().GetSaleSurplusTime(),4)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(LegendSalePanel.prototype,"LegendSalePanel",["ICommonWindow","ICommonWindowTitle"]),window.LegendSalePanel=LegendSalePanel;var LegendShowPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName="L永恒套装R",t.m_ShowIndex=0,t.skinName="LegendShowPanelSkin",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=e[0]?e[0]:0;if(this.AddClick(this.rightBtn,this._OnClick),this.AddClick(this.leftBtn,this._OnClick),this.AddClick(this.dressBtn,this._OnClick),this.AddClick(this.useDefault,this._OnClick),this.observe(MessageDef.LEGEND_UPDATE_DRESS,this.UpdateContent),LegendModel.ins().IsNewDress(o))this.m_ShowIndex=LegendModel.ins().GetShowDressIndex(o)-1;else{var s=LegendModel.GetFullStageByRoleIndex(o),n=(s[0],s[1]);this.m_ShowIndex=Math.min(Math.max(n-1,0),t.SHOW_LIST.length-1)}LegendModel.ins().SetNewDress(o),this.commonWindowBg.OnAdded(this,0,o)},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype._OnClick=function(e){switch(e.target){case this.leftBtn:this.m_ShowIndex=Math.max(--this.m_ShowIndex,0);break;case this.rightBtn:this.m_ShowIndex=Math.min(++this.m_ShowIndex,t.SHOW_LIST.length-1);break;case this.dressBtn:LegendModel.ins().SendDress(this._roleId,this.m_ShowIndex);break;case this.useDefault:this.useDefault.selected&&null!=SubRoles.ins().getSubRoleByIndex(this._roleId).legendDress&&LegendModel.ins().SendDress(this._roleId,null)}this.UpdateContent()},t.prototype.UpdateContent=function(){var e=SubRoles.ins().getSubRoleByIndex(this._roleId),i=LegendModel.GetFullStageByRole(e),o=i[0],s=i[1],n=this.m_ShowIndex+1,r=!1;r=s>=n,this.leftBtn.visible=this.m_ShowIndex>0,this.rightBtn.visible=this.m_ShowIndex<t.SHOW_LIST.length-1,this.rightBtn.enabled=this.m_ShowIndex<o,this.tipImg.visible=!r,this.dressBtn.enabled=r,this.useDefault.selected=null==e.legendDress,this.m_ShowIndex==e.legendDress?(this.dressBtn.enabled=!1,this.dressBtn.label="已穿戴"):this.dressBtn.label="穿戴",t.SetRoleShowPanel(this.roleShowPanel,this.m_ShowIndex+1,e.sex),this.rankLabel.text=n+"阶永恒神装"},t.SetRoleShowPanel=function(e,i,o){var s=t.SHOW_LIST[i-1];e.SetBody(ResDataPath.GetUIEffePath(s[o||0]),null,null,!0),e.SetWeapon(ResDataPath.GetUIEffePath(s[2]),null,!0)},Object.defineProperty(t.prototype,"_roleId",{get:function(){return this.m_RoleSelectPanel.getCurRole()},enumerable:!0,configurable:!0}),t.LAYER_LEVEL=LayerManager.UI_Main_2,t.SHOW_LIST=[["eff_ui_body800_1","eff_ui_body800_0","eff_ui_weapon800_1"],["body801/eff_ui_body801_1","body801/eff_ui_body801_0","body801/eff_ui_weapon801_1"],["body802/eff_ui_body802_1","body802/eff_ui_body802_0","body802/eff_ui_weapon802_1"],["body803/eff_ui_body803_0","body803/eff_ui_body803_1","body803/eff_ui_weapon803_1"],["body804/eff_ui_body804_0","body804/eff_ui_body804_1","body804/eff_ui_weapon804_1"],["body805/eff_ui_body805_0","body805/eff_ui_body805_1","body805/eff_ui_weapon805_1"]],t}(BaseEuiPanel);__reflect(LegendShowPanel.prototype,"LegendShowPanel",["ICommonWindow","ICommonWindowTitle","ICommonWindowRoleSelect"]),window.LegendShowPanel=LegendShowPanel;var OrangeBreakItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="OrangeBreakItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101867,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101868,this.m_MinBtn.label=GlobalConfig.jifengTiaoyueLg.st101114,this.m_MaxBtn.label=GlobalConfig.jifengTiaoyueLg.st101113,this.m_MaxBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_MinBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_AddBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_CutBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.m_SmeltBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickSmeltBtn,this),this.m_NumLabel.addEventListener(egret.Event.CHANGE,this.onLabChange,this),this.m_ItemIcon.count.visible=!1},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data.id,i=GlobalConfig.ins("LegendRecycleConfig")[t];if(i){var o=!1;if(i.condition>=1e3){var s=UserZs.ins()?UserZs.ins().lv:0;1e3*s>=i.condition?o=!0:this.m_CantLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101870,[i.condition/1e3])}else{var n=GameLogic.ins().actorModel.level;n>=i.condition?o=!0:this.m_CantLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101871,[i.condition])}o?(this.m_AddGroup.visible=!0,this.m_SmeltBtn.visible=!0,this.m_CantLab.visible=!1):(this.m_AddGroup.visible=!1,this.m_SmeltBtn.visible=!1,this.m_CantLab.visible=!0);var r=i.itemId;this.itemId=r;var a=UserBag.ins().getBagGoodsCountById(0,r);this.m_NumLab.text=a+"";var l=GlobalConfig.ins("ItemConfig")[r];this.m_ItemIcon.data=l,this.m_ItemIcon.dataChanged(),this.m_NumLabel.text=this.data.smeltSelectNum+"",this.onLabChange()}},t.prototype.setGetNum=function(){var e=this.data.id,t=GlobalConfig.ins("LegendRecycleConfig")[e];if(t){var i=this.data.smeltSelectNum;i||(i=1),this.m_ContLab.text=t.itemName+"x"+i*t.recycle.count}},t.prototype.onClick=function(e){var t,i=this.data,o=this.data.id,s=GlobalConfig.ins("LegendRecycleConfig")[o];if(s){var n=s.itemId;t=UserBag.ins().getBagGoodsCountById(0,n)}switch(e.currentTarget){case this.m_CutBtn:i.smeltSelectNum>1&&(i.smeltSelectNum-=1);break;case this.m_AddBtn:i.smeltSelectNum<t&&(i.smeltSelectNum+=1);break;case this.m_MaxBtn:i.smeltSelectNum<t&&(i.smeltSelectNum=t);break;case this.m_MinBtn:i.smeltSelectNum>1&&(i.smeltSelectNum=1)}this.m_NumLabel.text=i.smeltSelectNum+"",this.setGetNum()},t.prototype.onLabChange=function(){var e=this.data,t=this.data.id,i=GlobalConfig.ins("LegendRecycleConfig")[t];if(i){var o=i.itemId,s=UserBag.ins().getBagGoodsCountById(0,o),n=this.m_NumLabel.text,r=parseInt(n);0>=r?(e.smeltSelectNum=0,r=0):r>s?(e.smeltSelectNum=s,r=s):e.smeltSelectNum=r,this.m_NumLabel.text=r+""}this.setGetNum()},t.prototype.onClickSmeltBtn=function(){var e=this.data,t=e.smeltSelectNum;t>0?(UserEquip.ins().sendEquipItemResolve(this.itemId,t,e.id),this.playUpEff()):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100217)},t.prototype.playUpEff=function(){this.m_ItemEff=ViewManager.ins().createEff(this.m_ItemEff,this.m_ItemEffGroup,"eff_ui_icon")},t}(eui.ItemRenderer);__reflect(OrangeBreakItem.prototype,"OrangeBreakItem"),window.OrangeBreakItem=OrangeBreakItem;var OrangeBreakWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="OrangeBreakWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_bg.init("OrangeBreakWin",GlobalConfig.jifengTiaoyueLg.st101865),this.m_TipLab.text=GlobalConfig.jifengTiaoyueLg.st101866,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100108,this.m_List.itemRenderer=OrangeBreakItem,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,this.gainList.itemRenderer=GainGoodsItem},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){},t.prototype.addViewEvent=function(){this.AddClick(this.gainList,this.onTouchList),this.observe(MessageDef.EQUIP_ITEM_RESOLVE_MSG,this.setData)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=GlobalConfig.ins("LegendRecycleConfig"),t=[],i=0;for(var o in e){var s=1,n=this.listData.source[i];n&&(s=n.smeltSelectNum);var r={id:e[o].id,smeltSelectNum:s};t.push(r),i++}this.listData.replaceAll(t),this.setListData()},t.prototype.onTouchList=function(e){var t=e.target;t&&(t=t.userData,t&&t[1][0]&&GameGuider.guidance(t[1][0],t[1][1])&&ViewManager.ins().close(this))},t.prototype.setListData=function(){var e=200007,t=GlobalConfig.ins("GainItemConfig")[e];if(null!=t){for(var i=t.gainWay.slice(0,t.gainWay.length),o=0;o<i.length;++o){var s=i[o];if(s[1][0]==ViewIndexDef.ACT_GIFT){var n=ActivityModel.ins().GetActivityDataByType(2);ActivityModel.ins().IsOpen(n)||i.splice(o,1),e!=ViewIndexDef.EGG_BROKEN_PANEL||EggBroken.IsOpen()||i.splice(o,1)}}this.gainList.dataProvider=new eui.ArrayCollection(i)}else this.gainList.dataProvider=new eui.ArrayCollection([]);this.validateNow()},t}(BaseEuiPanel);__reflect(OrangeBreakWin.prototype,"OrangeBreakWin"),ViewManager.ins().reg(OrangeBreakWin,LayerManager.UI_Popup),window.OrangeBreakWin=OrangeBreakWin;var OrangeEquipPanel=function(e){function t(){var t=e.call(this)||this;return t.CONST_GREWUP="state1",t.CONST_MIX="state2",t.state="state1",t.needNum=0,t.currentNum=0,t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100630,t.skinName="OrangeEquipSkin",t.dec_label.text=GlobalConfig.jifengTiaoyueLg.st101844,t.topLevel.text=GlobalConfig.jifengTiaoyueLg.st101857,t.executeBtn.label=GlobalConfig.jifengTiaoyueLg.st101856,t.m_GetLab.textFlow=[{text:GlobalConfig.jifengTiaoyueLg.st101865,style:{underline:!0}}],t}return __extends(t,e),t.prototype.childrenCreated=function(){this.name=GlobalConfig.jifengTiaoyueLg.st100630,this.curIndex=1,this.getTreasureBtn.touchEnabled=!0},t.prototype.open=function(){this.AddClick(this.m_GetLab,this.onClickGet),this.AddClick(this.getTreasureBtn,this.openSmeltView);for(var e=0;8>e;e++){var t=this["equip"+e];t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSelect,this),t.mixBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSelect,this)}this.executeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.executeCB,this),MessageCenter.addListener(UserEquip.ins().postMixEquip,this.mixCB,this),MessageCenter.addListener(UserBag.postItemAdd,this.UpdateContent,this),GameGlobal.MessageCenter.addListener(MessageDef.DELETE_ITEM,this.UpdateContent,this),MessageCenter.addListener(UserBag.postItemChange,this.UpdateContent,this),this.curIndex=this.computerCurIndex()},t.prototype.close=function(){for(var e=0;8>e;e++){var t=this["equip"+e];t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSelect,this),t.mixBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSelect,this)}this.executeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.executeCB,this),MessageCenter.ins().removeAll(this)},t.prototype.onSelect=function(e){GameLogic.ins().actorModel.level;switch(e.currentTarget){case this.equip0:case this.equip0.mixBtn:this.curIndex=0;break;case this.equip1:case this.equip1.mixBtn:this.curIndex=1;break;case this.equip2:case this.equip2.mixBtn:this.curIndex=2;break;case this.equip3:case this.equip3.mixBtn:this.curIndex=3;break;case this.equip4:case this.equip4.mixBtn:this.curIndex=4;break;case this.equip5:case this.equip5.mixBtn:this.curIndex=5;break;case this.equip6:case this.equip6.mixBtn:this.curIndex=6;break;case this.equip7:case this.equip7.mixBtn:this.curIndex=7}this.UpdateContent(!1)},t.prototype.executeCB=function(e){var t=this;if(this.UpdateContent(),this.currentNum<this.needNum)return void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100217);if(this.state==this.CONST_GREWUP)this.grewup();else if(this.state==this.CONST_MIX){var i=SubRoles.ins().getSubRoleByIndex(this._roleId).getEquipByIndex(this.curIndex),o=i.item.configID,s=GlobalConfig.itemConfig[o];if(void 0!=s&&5==s.quality){var n=GlobalConfig.itemConfig[i.item.configID],r=n.zsLevel>0?LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[n.zsLevel]):LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101368,[n.level]);WarnWin.show(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101843,[r]),function(){t.mix()},this)}else this.mix()}},t.prototype.grewup=function(){var e=GlobalConfig.itemConfig[this.curEquipConfigId+1];return e.level>GameLogic.ins().actorModel.level||e.zsLevel>UserZs.ins().lv?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101677):void UserEquip.ins().sendGrewupEquip(this._roleId,this.curIndex)},t.prototype.mix=function(){UserEquip.ins().sendMixEquip(this._roleId,this.curEquipConfigId,this.curIndex)},t.prototype.mixCB=function(e,t,i){return 1==t?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101678):0==t?void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101679):2==t?(this.playBodyEff(),UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100638),void this.UpdateContent(!1)):(this.playBodyEff(),UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100639),void this.UpdateContent(!1))},t.prototype.openSmeltView=function(e){ViewManager.ins().open(BreakDownListview,200007,4)},t.prototype.updateDetailPanel=function(){var e=SubRoles.ins().getSubRoleByIndex(this._roleId).getEquipByIndex(this.curIndex);if(null!=e){var t=GlobalConfig.itemConfig[e.item.configID+1],i=0;if(void 0==t&&0!=e.item.handle&&4==GlobalConfig.itemConfig[e.item.configID].quality)this.mixPanel.visible=!0,this.grewupPanel.visible=!1,this.curEquipConfigId=this.updateMixPanel(!0),this.topLevel.visible=!0,this.executeBtn.visible=!1,this.dec_label.visible=!1,this.num_label.text="",this.mixPanel.m_ImgBg.visible=!1,this.mixPanel.m_NowItem.visible=!1,this.mixPanel.m_ItemGroup.y=162,this.mixPanel.equipName0.visible=!1,this.m_AttrComp.setLeftLab(GlobalConfig.jifengTiaoyueLg.st101858);else{if(void 0!=t&&0!=e.item.handle&&4==e.item.itemConfig.quality){this.mixPanel.visible=!1,this.grewupPanel.visible=!0,this.curEquipConfigId=this.updateGrewupPanel(),this.state=this.CONST_GREWUP;var o=GlobalConfig.legendLevelupConfig[this.curEquipConfigId];this.needNum=o.count,i=o.itemId;var s=GlobalConfig.ins("ItemConfig")[i];this.dec_label.text=GlobalConfig.jifengTiaoyueLg.st100218+s.name+":",this.upDataGrewupItme(o)}else{this.mixPanel.visible=!0,this.grewupPanel.visible=!1,this.curEquipConfigId=this.updateMixPanel(!1),this.state=this.CONST_MIX,null==this.legendComposeConfig&&(this.legendComposeConfig=GlobalConfig.ins("LegendComposeConfig"));var n=this.legendComposeConfig[this.curEquipConfigId];this.needNum=n.count,i=n.itemId;var s=GlobalConfig.ins("ItemConfig")[i];this.dec_label.text=GlobalConfig.jifengTiaoyueLg.st100218+s.name+":",this.upDateMixItemData(n),this.m_AttrComp.setLeftLab(GlobalConfig.jifengTiaoyueLg.st101859)}this.currentNum=UserBag.ins().getBagGoodsCountById(0,i),this.currentNum>=this.needNum?this.num_label.textFlow=(new egret.HtmlTextParser).parse("<font color='0x2ECA22'>"+this.currentNum+"</font>/"+this.needNum):this.num_label.textFlow=(new egret.HtmlTextParser).parse("<font color='0xf87372'>"+this.currentNum+"</font>/"+this.needNum),this.topLevel.visible=!1,this.executeBtn.visible=!0,this.dec_label.visible=!0}}},t.prototype.upDateMixItemData=function(e){this.mixPanel.m_ItemGroup.y=223,this.mixPanel.m_ImgBg.visible=!0;var t=GlobalConfig.ins("ItemConfig")[e.itemId];this.mixPanel.m_NowItem.visible=!0,this.mixPanel.m_NowItem.setData(t),this.mixPanel.equipName0.visible=!0,this.mixPanel.equipName0.text=t.name},t.prototype.upDataGrewupItme=function(e){var t=GlobalConfig.ins("ItemConfig")[e.itemId],i=GlobalConfig.ins("ItemConfig")[e.oldEquipId];this.grewupPanel.m_NowName.text=i.name+"",i.zsLevel>0?this.grewupPanel.m_NowLv.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[i.zsLevel]):this.grewupPanel.m_NowLv.text="Lv."+i.level,this.grewupPanel.m_NowItem.setData(i),this.grewupPanel.m_NeedItem.setData(t),this.grewupPanel.m_NowName0.text=t.name},t.prototype.updateMixPanel=function(e){var t,i,o=GameLogic.ins().actorModel.level;if(o>=1){var s=this.curIndex;(4==s||5==s)&&(s=4),(6==s||7==s)&&(s=5);var n=SubRoles.ins().getSubRoleByIndex(this._roleId);i=UserEquip.ins().getEquipConfigIDByPosAndQuality(s,4,n.job,n.roleID,this.curIndex),t=GlobalConfig.itemConfig[i]}void 0!=t&&(t.zsLevel>0?this.mixPanel.level.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[t.zsLevel]):this.mixPanel.level.text="Lv."+t.level,this.mixPanel.equipName.text=t.name,this.mixPanel.itemIcon.imgJob.visible=!1,this.mixPanel.itemIcon.setData(t));var r=[],a=[],l=[];null==this.EquipConfig&&(this.EquipConfig=GlobalConfig.equipConfig);var h=this.EquipConfig[i],c=SubRoles.ins().getSubRoleByIndex(this._roleId).getEquipByIndex(this.curIndex);for(var u in AttributeData.translate)if(!(h[u]<=0)){if(e){var d=c.item;if(void 0!=d)for(var p=d.att,f=0;f<p.length;f++)if(p[f].type==AttributeData.translate[u]){l.push(" +"+p[f].value+"%");break}}else l.push(" +?%");var g={type:AttributeData.translate[u],value:h[u]};a.push(g),r.push(AttributeData.getAttrStrByType(AttributeData.translate[u]))}return this.m_AttrComp.setState("state2"),this.m_AttrComp.setLeftAttr(a,l),i},t.prototype.updateGrewupPanel=function(){var e=SubRoles.ins().getSubRoleByIndex(this._roleId).getEquipByIndex(this.curIndex),t=e.item.configID,i=(GlobalConfig.itemConfig[t],GlobalConfig.itemConfig[t+1]);if(void 0==i);else{this.grewupPanel.nextName.text=i.name+"",i.zsLevel>0?this.grewupPanel.nextLevel.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[i.zsLevel]):this.grewupPanel.nextLevel.text="Lv."+i.level,this.grewupPanel.nextItemIcon.imgJob.visible=!1,this.grewupPanel.nextItemIcon.setData(i);var o=[],s=[],n=[],r=[],a=[];null==this.EquipConfig&&(this.EquipConfig=GlobalConfig.equipConfig);var l=this.EquipConfig[t],h=this.EquipConfig[t+1],c=e.item;for(var u in AttributeData.translate)if(!(l[u]<=0)){if(void 0!=c)for(var d=c.att,p=0;p<d.length;p++)if(d[p].type==AttributeData.translate[u]){n.push(" +"+d[p].value+"%");break}var f={type:AttributeData.translate[u],value:l[u]},g={type:AttributeData.translate[u],value:h[u]};s.push(f),r.push(g),a.push(" +?%"),o.push(AttributeData.getAttrStrByType(AttributeData.translate[u]))}this.m_AttrComp.setState("state1"),this.m_AttrComp.setLeftLab(GlobalConfig.jifengTiaoyueLg.st101858),this.m_AttrComp.setRightLab(GlobalConfig.jifengTiaoyueLg.st101859),this.m_AttrComp.setLeftAttr(s,n),this.m_AttrComp.setRightAttr(r,a)}return t},t.prototype.updateAllEquipItem=function(){for(var e=0;8>e;e++)this.updateEquipItem(e)},t.prototype.updateEquipItem=function(e){var t=this["equip"+e];if(null!=t){var i=SubRoles.ins().getSubRoleByIndex(this._roleId).getEquipByIndex(e),o=t.itemIcon;o.imgJob.visible=!1,0==i.item.handle||i.item.itemConfig.quality<4?(o.setData(null),o.imgIcon.source=ResDataPath.GetEquipDefaultIcon(e),t.level.text=""):(t.mixBtn.visible=!1,i.item.itemConfig.zsLevel>0?t.level.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101367,[i.item.itemConfig.zsLevel]):t.level.text="Lv."+i.item.itemConfig.level,o.setData(i.item.itemConfig)),this.curIndex==e?t.select.visible=!0:t.select.visible=!1}},t.prototype.setItemRedPoint=function(){for(var e=0;e<EquipPos.MAX;e++){var t=this["equip"+e];t.redPoint.visible=UserEquip.ins().setOrangeEquipItemState(e,SubRoles.ins().getSubRoleByIndex(this._roleId))}for(var i=0;i<SubRoles.ins().subRolesLen;++i)this.m_RoleSelectPanel.showRedPoint(i,UserEquip.ins().CheckOrangeRedPointByRoleIndex(i))},t.prototype.computerCurIndex=function(){for(var e=SubRoles.ins().getSubRoleByIndex(this._roleId),t=0;t<EquipPos.MAX;++t)if(UserEquip.ins().setOrangeEquipItemState(t,e))return t;return 1},t.prototype.UpdateContent=function(e){if(void 0===e&&(e=!0),e)for(var t=SubRoles.ins().getSubRoleByIndex(this._roleId),i=0;i<EquipPos.MAX;++i){var o=(this.curIndex+i)%EquipPos.MAX;if(UserEquip.ins().setOrangeEquipItemState(o,t)){this.curIndex=o;break}}this.updateAllEquipItem(),this.updateDetailPanel(),this.setItemRedPoint(),this.updateGetTreasureBtnState(),this.getTreasureBtn.redPoint.visible=UserBag.ins().getBagEquipByOrangeSplit(4).length>0},Object.defineProperty(t.prototype,"_roleId",{get:function(){return this.m_RoleSelectPanel.getCurRole()},enumerable:!0,configurable:!0}),t.prototype.updateGetTreasureBtnState=function(){var e=UserBag.ins().getBagEquipByOrangeSplit(4);UIHelper.SetBtnJumpEffe(this.getTreasureBtn,e.length>0)},t.prototype.playBodyEff=function(){this.m_MainEff1=ViewManager.ins().createEff(this.m_MainEff1,this.mixPanel.m_MianEffGroup,"eff_ui_iconUpgrade"),this.m_MainEff2=ViewManager.ins().createEff(this.m_MainEff2,this.grewupPanel.m_MianEffGroup,"eff_ui_iconUpgrade"),this.m_Eff1=ViewManager.ins().createEff(this.m_Eff1,this.mixPanel.m_EffGroup,"eff_ui_icon"),this.m_Eff2=ViewManager.ins().createEff(this.m_Eff2,this.grewupPanel.m_EffGroup,"eff_ui_icon"),this.m_Eff3=ViewManager.ins().createEff(this.m_Eff3,this.grewupPanel.m_EffGroup0,"eff_ui_icon"),this.m_Eff4=ViewManager.ins().createEff(this.m_Eff4,this.m_EffGroup0,"eff_ui_upgrade"),this.m_Eff5=ViewManager.ins().createEff(this.m_Eff5,this.m_EffGroup1,"eff_ui_success")},t.prototype.onClickGet=function(){ViewManager.ins().open(OrangeBreakWin)},t.defaultEquipIcon=["xb_10","xb_11","xb_12","xb_13","xb_14","xb_14","xb_15","xb_15"],t
}(BaseView);__reflect(OrangeEquipPanel.prototype,"OrangeEquipPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.OrangeEquipPanel=OrangeEquipPanel;var RoleZBAttrPanel=function(e){function t(){var t=e.call(this)||this;return t.m_LibeList=[],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="RoleZBAttrSkin",this.m_LibeList.push(this.m_AttLab1,this.m_AttLab2,this.m_AttLab3,this.m_AttLab4),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100329,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101833,this.m_lan1.text=GlobalConfig.jifengTiaoyueLg.st100114,this.m_lan2.text=GlobalConfig.jifengTiaoyueLg.st100115,this.m_lan3.text=GlobalConfig.jifengTiaoyueLg.st100116,this.m_lan4.text=GlobalConfig.jifengTiaoyueLg.st100117,this.m_lan5.text=GlobalConfig.jifengTiaoyueLg.st100118,this.m_lan6.text=GlobalConfig.jifengTiaoyueLg.st100118,this.m_lan7.text=GlobalConfig.jifengTiaoyueLg.st100119,this.m_lan8.text=GlobalConfig.jifengTiaoyueLg.st100119},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.curRole=e[0],this.forgeType=e[1],this.dialogCloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.setRoleAttr()},t.prototype.close=function(){this.dialogCloseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},t.prototype.onTouch=function(e){switch(e.currentTarget){case this.leftBtn:--this.curRole,this.setRoleAttr();break;case this.rightBtn:++this.curRole,this.setRoleAttr()}},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.setRoleAttr=function(){var e,t,i=this.curRole,o=SubRoles.ins().getSubRoleByIndex(i),s=Role.getJobNameByJob(o.job);switch(this.forgeType){case ForgeType.TYPE0:t=GlobalConfig.jifengTiaoyueLg.st100317;break;case ForgeType.TYPE1:t=GlobalConfig.jifengTiaoyueLg.st101194;break;case ForgeType.TYPE2:t=GlobalConfig.jifengTiaoyueLg.st101198}this.title.text=t+GlobalConfig.jifengTiaoyueLg.st101831,this.m_RoleTitle.text=s+t+GlobalConfig.jifengTiaoyueLg.st101832;for(var n=new Dictionary,r=0;8>r;r++){var a=o.GetEquipLevelByType(r,this.forgeType);if(a){var l=(this.equipPosGroup.getChildAt(r),this.equipLvGroup.getChildAt(r));l.text="+"+a}else{var l=(this.equipPosGroup.getChildAt(r),this.equipLvGroup.getChildAt(r));l.text="+0"}if(e=UserForge.ins().getForgeConfigByPos(r,a,this.forgeType))for(var h=AttributeData.getAttrStrAdd(e.attr,0==this.forgeType?11:12),c=0;c<h.length;c++){var u={value:h[c].value,type:h[c].type};if(u.type){var d=n.get(u.type);if(d)d.value+=u.value,n.set(u.type,d);else{var p=u;n.set(u.type,p)}}}}for(var f=n.values,g=0;g<this.m_LibeList.length;g++){var _=f[g];_?this.m_LibeList[g].text=AttributeData.getAttStr([f[g]],1):this.m_LibeList[g].text=""}this.setBtn()},t.prototype.setBtn=function(){var e=SubRoles.ins().subRolesLen;1==e?(this.leftBtn.visible=!1,this.rightBtn.visible=!1):e>1&&(0==this.curRole?(this.leftBtn.visible=!1,this.rightBtn.visible=!0):1==this.curRole?(this.leftBtn.visible=!0,3>e?this.rightBtn.visible=!1:this.rightBtn.visible=!0):2==this.curRole&&(this.leftBtn.visible=!0,this.rightBtn.visible=!1))},t}(BaseEuiPanel);__reflect(RoleZBAttrPanel.prototype,"RoleZBAttrPanel"),ViewManager.ins().reg(RoleZBAttrPanel,LayerManager.UI_Popup),window.RoleZBAttrPanel=RoleZBAttrPanel;var TreasureHuntPanel=function(e){function t(){var t=e.call(this)||this;return t.mWindowHelpId=36,t.maxIndex=0,t.rewardId=-1,t.poolOtherId=-1,t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100032,t.skinName="Treasure",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.name=GlobalConfig.jifengTiaoyueLg.st100032,this.warehouse.label=GlobalConfig.jifengTiaoyueLg.st100036,this.buy1.label=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100037,[1]),this.buy10.label=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100037,[10]),this.priceIcon01.price=GlobalConfig.ins("TreasureHuntConfig").huntOnce,this.priceIcon02.price=GlobalConfig.ins("TreasureHuntConfig").huntTenth,this.priceIcon03.iconImg.source=ResDataPath.GetItemFullName("200015"),this.priceIcon04.iconImg.source=ResDataPath.GetItemFullName("200015"),this.list.itemRenderer=HuntListRenderer,this.listRefush([]),this.bar.slideDuration=0,this.maxIndex=this.getGroup.numChildren,this.dataGroupLeft.itemRenderer=ItemBase,this.dataGroupRight.itemRenderer=ItemBase;for(var e=GlobalConfig.ins("TreasureHuntConfig").poolOtherReward,t=0;t<e.length;t++)if(GameServer.serverOpenDay>=e[t].day&&(void 0==e[t+1]||GameServer.serverOpenDay<e[t+1].day)){this.poolOtherId=e[t].id;break}for(var i=GlobalConfig.ins("TreasureHuntConfig").showrReward,t=0;t<i.length;t++)if(GameServer.serverOpenDay>=i[t].day&&(void 0==i[t+1]||GameServer.serverOpenDay<i[t+1].day)){this.rewardId=i[t].id;break}},t.prototype.open=function(){for(var e=0;e<this.getGroup.numChildren;++e){this.getGroup.getChildAt(e);this["mc"+(e+1)]||(this["mc"+(e+1)]=new MovieClip,this["mc"+(e+1)].touchEnabled=!1),this["mc"+(e+1)].x=-12,this["mc"+(e+1)].y=-18}this.buy1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.buy10.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.warehouse.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onWarehouse,this);for(var e=0;e<this.maxIndex;++e)this.AddClick(this.getGroup.getChildAt(e),this.boxClick);MessageCenter.addListener(Hunt.postBestListInfo,this.listRefush,this),GameGlobal.MessageCenter.addListener(MessageDef.HUNT_ADDRECORD,this.listAddData,this),GameGlobal.MessageCenter.addListener(MessageDef.HUNT_BOX_INFO,this.UpdateContent,this),this.observe(MessageDef.CHANGE_ITEM,this._ItemUpdate),this.observe(MessageDef.DELETE_ITEM,this._ItemUpdate),this.observe(UserBag.postItemAdd,this._ItemUpdate),this.listRefush([]),Hunt.ins().sendHuntList(),this._ItemUpdate(),this.updateShowData(),this.bar.labelDisplay.visible=!1},t.prototype.close=function(){for(var e=0;e<this.getGroup.numChildren;++e)this["mc"+(e+1)]&&(DisplayUtils.dispose(this["mc"+(e+1)]),this["mc"+(e+1)]=null);this.buy1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),this.buy10.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuy,this),MessageCenter.ins().removeAll(this)},t.prototype._ItemUpdate=function(){var e=UserBag.ins().getBagGoodsCountById(UserBag.BAG_TYPE_OTHTER,ItemConst.TREASURE_HUNT);this.priceIcon03.text="("+e+"/1)",this.priceIcon04.text="("+e+"/10)",UIHelper.ShowRedPoint(this.buy1,LegendModel.ins().IsRedItem()),this._UpdateRedPoint()},t.prototype.listRefush=function(e){this.list.dataProvider=new eui.ArrayCollection(e)},t.prototype.listAddData=function(e){this.list.dataProvider.addItemAt(e,0)},t.prototype.onBuy=function(e){switch(e.target){case this.buy1:this.buyHunt(0);break;case this.buy10:this.buyHunt(1)}},t.prototype.buyHunt=function(e){var t=UserBag.ins().getBagGoodsCountById(UserBag.BAG_TYPE_OTHTER,ItemConst.TREASURE_HUNT);return void(0==e?t>=1?Hunt.ins().sendHunt(e):UserWarn.ins().setBuyGoodsWarn(ItemConst.TREASURE_HUNT,1):t>=10?Hunt.ins().sendHunt(e):UserWarn.ins().setBuyGoodsWarn(ItemConst.TREASURE_HUNT,10-t));var t,t},t.prototype.UpdateContent=function(){this.todayHuntCount.text=GlobalConfig.jifengTiaoyueLg.st100033+Hunt.ins().todayHuntCount,this.bar.value=Hunt.ins().todayHuntCount;for(var e=0;e<this.maxIndex;e++){var t=this.getBoxRewardState(e),i=this.getGroup.getChildAt(e);i.redPoint.visible=t==RewardState.CanGet,i.stateImg.visible=t==RewardState.Gotten,this.playEffect(this["mc"+(e+1)],t==RewardState.CanGet,i)}this._UpdateRedPoint()},t.prototype.playEffect=function(e,t,i){t?(e.loadUrl(ResDataPath.GetUIEffePath("eff_task_box"),!0),i.addChild(e)):e.parent&&DisplayUtils.removeFromParent(e)},t.prototype.getBoxRewardState=function(e){var t=GlobalConfig.ins("poolTotalrewardsConfig")[this.poolOtherId][e];return t&&Hunt.ins().todayHuntCount<t.time?RewardState.NotReached:BitUtil.Has(Hunt.ins().rewardbin,e+1)?RewardState.Gotten:t&&Hunt.ins().todayHuntCount>=t.time?RewardState.CanGet:RewardState.Undo},t.prototype.boxClick=function(e){var t=this.getGroup.getChildIndex(e.currentTarget),i=this.getBoxRewardState(t),o=GlobalConfig.ins("poolTotalrewardsConfig")[this.poolOtherId],s=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100034,[o[t].time]);ViewManager.ins().open(GetReward2Panel,GlobalConfig.jifengTiaoyueLg.st100035,s,RewardData.ToRewardDatas(o[t].box),function(){Hunt.ins().getTreasureDailyAward(t+1)},i)},t.prototype.onWarehouse=function(e){ViewManager.ins().open(TreasureStorePanel)},t.prototype._UpdateRedPoint=function(){UIHelper.ShowRedPoint(this.warehouse,TreasureHuntWin.IsRedPointByWarehouse())},t.prototype.updateShowData=function(){var e=GlobalConfig.ins("TreasureHuntPoolConfig")[this.rewardId];if(this.item1.data=e[0].id,this.item2.data=e[1].id,this.item1.showItemEffect(),this.item2.showItemEffect(),this.item1.isShowName(!1),this.item2.isShowName(!1),this.item1Name.text=this.item1.nameTxt.text,this.item2Name.text=this.item2.nameTxt.text,this.dataGroupLeft.dataProvider=new eui.ArrayCollection(this.getPoolReward(2,7,e)),this.dataGroupRight.dataProvider=new eui.ArrayCollection(this.getPoolReward(8,13,e)),this.boxGroup.visible=this.getGroup.visible=-1!=this.poolOtherId,e){for(var e=GlobalConfig.ins("poolTotalrewardsConfig")[this.poolOtherId],t=0;t<this.maxIndex;++t){var i=this.getGroup.getChildAt(t),o=e[t];i.count.text=o.time}this.bar.maximum=e[this.maxIndex-1].time}},t.prototype.getPoolReward=function(e,t,i){for(var o=[],s=e;t>=s;++s){var n=i[s].id;o.push(n)}return o},t}(BaseView);__reflect(TreasureHuntPanel.prototype,"TreasureHuntPanel",["ICommonWindowTitle"]),window.TreasureHuntPanel=TreasureHuntPanel;var TreasureHuntWin=function(e){function t(){var t=e.call(this)||this;return t.titles=[GlobalConfig.jifengTiaoyueLg.st100032,GlobalConfig.jifengTiaoyueLg.st100041],t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.treasureHuntPanel=new TreasureHuntPanel,this.commonWindowBg.AddChildStack(this.treasureHuntPanel)},t.prototype.destoryView=function(){e.prototype.destoryView.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];MessageCenter.addListener(UserBag.postHuntStore,this.setRedPoint,this),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.setRedPoint);var i=e[0]||0,o=e[1]||0;this.commonWindowBg.OnAdded(this,i,o),this.setRedPoint()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];MessageCenter.ins().removeAll(this),this.commonWindowBg.OnRemoved()},t.openCheck=function(){return!0},t.prototype.setRedPoint=function(){this.commonWindowBg.ShowTalRedPoint(0,t.IsRedPointByWarehouse()||LegendModel.ins().IsRedItem())},t.IsRedPointByWarehouse=function(){return UserBag.ins().getHuntGoodsBySort().length>0},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t}(BaseEuiPanel);__reflect(TreasureHuntWin.prototype,"TreasureHuntWin",["ICommonWindow"]),ViewManager.ins().reg(TreasureHuntWin,LayerManager.UI_Main),window.TreasureHuntWin=TreasureHuntWin;var TrLegendshuxinItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="TrLegendshuxinItemSkin",t.touchEnabled=!0,t.touchChildren=!1,t}return __extends(t,e),t.prototype.dataChanged=function(){this._id=this.data,this.icon.source=t.ICON_LIST[this.data],this.select.visible=!1},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),t.prototype.setSelect=function(e){this.select.visible=e},t.ICON_LIST={0:"fun_sq_png",1:"fun_tj_png",2:"fun_fw_png",3:"fun_sz_png",4:"fun_xf_png",5:"fun_jm_png",6:"fun_tf_png",7:"fun_liz_png"},t}(eui.ItemRenderer);__reflect(TrLegendshuxinItem.prototype,"TrLegendshuxinItem"),window.TrLegendshuxinItem=TrLegendshuxinItem;var TrLegendshuxinItemJNLabel=function(e){function t(){var t=e.call(this)||this;return t.skinName="TrLegendshuxinItemLabelJNSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.jingMaiData(),this.jmTfiData()},t.prototype.jingMaiData=function(){var e=this.data,t=e.skillid;if(null!=t){var i=GlobalConfig.ins("SkillsConfig")[t];this.icon.source=i.icon+"_png",this.title.text=i.skinName+" LV."+i.displayLevel,this.desc.text=i.desc}},t.prototype.jmTfiData=function(){var e=this.data.talentid,t=this.data.talentlevel;if(null!=e&&null!=t){var i=GlobalConfig.ins("TransferTalentConfig")[e][t];if(this.desc.visible=!1,0==i.attrs.length){var o=i.skillTips,s=GlobalConfig.ins("SkillsConfig")[o];this.icon.source=s.icon+"_png",this.title.text=s.desc}else{this.icon.source=i.TalentID+"_png";var n=StringUtils.complementByChar(AttributeData.getAttrStrByType(i.attrs[0].type),0)+": "+AttributeData.getAttStrByType(i.attrs[0]);this.title.text=n}}},t}(eui.ItemRenderer);__reflect(TrLegendshuxinItemJNLabel.prototype,"TrLegendshuxinItemJNLabel"),window.TrLegendshuxinItemJNLabel=TrLegendshuxinItemJNLabel;var TrLegendshuxinItemLabel=function(e){function t(){var t=e.call(this)||this;return t.skinName="TrLegendshuxinItemLabelSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.teJieData(),this.fuWenData()},t.prototype.teJieData=function(){var e=this.data;if(null!=e.configId&&null!=e.zslevel){var t=e.configId,i=e.zslevel,o=GlobalConfig.ins("ExRingSoulEvil")[t][i];this.itemTu1.visible=!0;for(var s="",n=o.attr.length,r=0;n>r;r++)s+=StringUtils.complementByChar(AttributeData.getAttrStrByType(o.attr[r].type),0)+": "+AttributeData.getAttStrByType(o.attr[r]);var a=o.zslevel+GlobalConfig.jifengTiaoyueLg.st100067+" "+o.name+"\n"+s+"\n";this.itemTu1.source="fuyin"+t+"_png",this.shuText0.text=a}},t.prototype.fuWenData=function(){this.itemTu1.visible=!1;var e=this.data,t=GlobalConfig.ins("EquipConfig")[e];if(t){var i=null==t.baseAttr?"":StringUtils.complementByChar(AttributeData.getAttrStrByType(t.baseAttr[0].type),0)+": "+AttributeData.getAttStrByType(t.baseAttr[0]);this.shuText0.text=i}},t}(eui.ItemRenderer);__reflect(TrLegendshuxinItemLabel.prototype,"TrLegendshuxinItemLabel"),window.TrLegendshuxinItemLabel=TrLegendshuxinItemLabel;var TrLegendshuxinPanel=function(e){function t(t){var i=e.call(this)||this;return i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100096,i.skinName="TrLegendshuxinSkin",i.name=GlobalConfig.jifengTiaoyueLg.st100096,i.listIcom.itemRenderer=TrLegendshuxinItemLabel,i.m_SZAttrSJList.itemRenderer=GodSuitAttrItem,i.szListData=new eui.ArrayCollection,i.m_SZAttrSJList.dataProvider=i.szListData,i.m_JMSkillList.itemRenderer=TrLegendshuxinItemJNLabel,i.jmListData=new eui.ArrayCollection,i.m_JMSkillList.dataProvider=i.jmListData,i.m_TFSkillList.itemRenderer=TrLegendshuxinItemJNLabel,i.tfSkillData=new eui.ArrayCollection,i.m_TFSkillList.dataProvider=i.tfSkillData,i.m_NoActLab.text=GlobalConfig.jifengTiaoyueLg.st100099,i.wu.text=GlobalConfig.jifengTiaoyueLg.st100300,i.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100301,i.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100302,i.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st100301,i.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st100303,i.m_Lan5.text=GlobalConfig.jifengTiaoyueLg.st100303,i.m_Lan6.text=GlobalConfig.jifengTiaoyueLg.st100301,i.m_Lan7.text=GlobalConfig.jifengTiaoyueLg.st100304,i.m_Lan8.text=GlobalConfig.jifengTiaoyueLg.st100301,i.m_Lan9.text=GlobalConfig.jifengTiaoyueLg.st100302,i}return __extends(t,e),t.GetStage=function(e){return LegendModel.GetStage(e)},t.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),this.fuzhuImg.visible=!1,this.shuxin.visible=!1,this.wu.visible=!1,this.shuxinOne.visible=!1,this.shuxinTwo.visible=!1,this.shuxinThree.visible=!1,this.shuxinFour.visible=!1,this.shuxinFive.visible=!1,this.listJNIcom.visible=!1,this.listIcom.visible=!1,this.list.itemRenderer=TrLegendshuxinItem,this.tabData=new eui.ArrayCollection,Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_get_actor_module_isactive,this.sc_get_actor_module_isactive,this),Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_actor_base_info_aritifact,this.sc_actor_base_info_aritifact,this),Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_actor_base_info_exring,this.sc_actor_base_info_exring,this),Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_actor_base_info_fuwen,this.sc_actor_base_info_fuwen,this),Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_actor_base_info_godequip,this.sc_actor_base_info_godequip,this),Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_actor_base_info_skillmiji,this.sc_actor_base_info_skillmiji,this),Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_actor_base_info_jingmai,this.sc_actor_base_info_jingmai,this),Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_actor_base_info_talent,this.sc_actor_base_info_talent,this),Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_actor_base_info_lizhuang,this.sc_actor_base_info_lizhuang,this),this.list.addEventListener(egret.TouchEvent.TOUCH_TAP,this._touchList,this),this.list.useVirtualLayout=!1,this.listJNIcom.useVirtualLayout=!1},t.prototype.close=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.close.call(this),this.list.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._touchList,this),null==this._curId},t.prototype._touchList=function(e){if(e.target instanceof TrLegendshuxinItem){var t=e.target.id;this._curId!=t&&(this._setTabSelect(t),this._curId=t,GameLogic.ins().SendGetOtherInfo(UserReadPlayer.ins().actorId,this.m_RoleSelectPanel.curRole,t),this.scrollerBig&&this.scrollerBig.viewport&&(this.scrollerBig.viewport.scrollV=0))}},t.prototype._setTabSelect=function(e){for(var t=0,i=this.list.numChildren;i>t;t++){var o=this.list.getChildAt(t);o.setSelect(e==o.id)}},t.prototype.sc_get_actor_module_isactive=function(e){this._updataTabBar(e.isactive)},t.prototype._updataTabBar=function(e){for(var t=[],i=[e.sq,e.ex,e.fw,e.sz,e.xf,e.jm,e.tf,e.lz],o=!0,s=0,n=i.length;n>s;s++)i[s]>0&&(t.push(s),o=!1);if(o?(this.wu.visible=!0,this.fuzhuImg.visible=!1,this.shuxin.visible=!1,this.setVisible(null)):(this.fuzhuImg.visible=!0,this.shuxin.visible=!0,this.wu.visible=!1),this.tabData.replaceAll(t),this.list.dataProvider=this.tabData,t.length>5?this.fuzhuImg.visible=!0:this.fuzhuImg.visible=!1,!o){var r=t.indexOf(this._curId)>=0?this._curId:t[0];this.scroller&&this.scroller.viewport&&r==t[0]&&(this.scroller.viewport.scrollH=0),GameLogic.ins().SendGetOtherInfo(UserReadPlayer.ins().actorId,this.m_RoleSelectPanel.curRole,r),this.list.validateNow(),this._setTabSelect(r)}},t.prototype.sc_actor_base_info_aritifact=function(e){e.attrs&&e.attrs.length>0?this.m_NoActLab.visible=!1:this.m_NoActLab.visible=!0,this.powerLabel.text=e.info.sumpower+"",AttributeData.setAttrGroup(e.attrs,this.m_ArtifactAttrGroup),this.setVisible(LookState.AR)},t.prototype.setVisible=function(e){switch(null==e?this.m_titleImg.visible=!1:(this.m_titleImg.visible=!0,this.m_titleImg.source="comp_state_"+e+"_png"),this.m_ArtifactGroup.visible=!1,this.m_SZGroup.visible=!1,this.m_JMGroup.visible=!1,this.m_LZGroup.visible=!1,this.m_FWGroup.visible=!1,this.m_TFGroup.visible=!1,e){case LookState.AR:this.m_ArtifactGroup.visible=!0;break;case LookState.SZ:this.m_SZGroup.visible=!0;break;case LookState.JM:this.m_JMGroup.visible=!0;break;case LookState.LZ:this.m_LZGroup.visible=!0;break;case LookState.FW:this.m_FWGroup.visible=!0;break;case LookState.TF:this.m_TFGroup.visible=!0}},t.prototype.sc_actor_base_info_exring=function(e){},t.prototype.sc_actor_base_info_fuwen=function(e){var t=e.info[0];this.powerLabel.text=t.sumpower+"";for(var i=0,o=0,s=0,n=0,r=0;r<t.ids.length;r++){var a=t.ids[r],l=GlobalConfig.ins("EquipConfig")[a];i+=l.hp,o+=l.atk,s+=l.def,n+=l.res}var h=[],c={type:2,value:i},u={type:4,value:o},d={type:5,value:s},p={type:6,value:n};h.push(c,u,d,p),AttributeData.setAttrGroup(h,this.m_FWAttrGroup);var f=t.level,g=GlobalConfig.ins("FuwenLevelConfig")[f],_=GlobalConfig.jifengTiaoyueLg.st100097+g.PlayerEnhance/100+"%\n"+GlobalConfig.jifengTiaoyueLg.st100098+g.MonsterEnhance/100+"%";this.m_FWLab.textFlow=TextFlowMaker.generateTextFlow(_),this.setVisible(LookState.FW)},t.prototype.sc_actor_base_info_godequip=function(e){var t=e.info,i=t.pop();t.unshift(i);for(var o="",s=0,n=0;n<t.length;n++)0!=t[n].configID&&(s+=ItemConfig.pointCalNumber(GlobalConfig.itemConfig[t[n].configID]));o+=s,this.powerLabel.text=o;for(var r=[],a=1,n=0;a>n;++n){for(var l=[],h=[],c=0;c<EquipPos.MAX;++c)l[c]=!1,h[c]=0;r[n]={mIndex:n,mEquipSet:l,mLv:h}}for(var n=0;n<EquipPos.MAX;++n)if(t[n].configID>0){var u=GodSuitAttrPanel.GetStage(t[n].configID);r[0].mEquipSet[n]=!0,r[0].mLv[n]=u}this.szListData.replaceAll(r),this.m_SZAttrSJList.validateNow();for(var d=0,n=0;n<this.m_SZAttrSJList.numChildren;++n)d+=this.m_SZAttrSJList.getChildAt(n).height;this.setVisible(LookState.SZ)},t.prototype.sc_actor_base_info_skillmiji=function(e){},t.prototype.sc_actor_base_info_jingmai=function(e){var t=["attr_zs","attr_fs","attr_ds"];this.henText0.visible=!0,this.listJNIcom.visible=!0,this.powerLabel.text=e.sumpower+"";var i=e.info[0],o=i.level,s=i.stage;this.m_JMLvLab.text=s+GlobalConfig.jifengTiaoyueLg.st100103+o+GlobalConfig.jifengTiaoyueLg.st100093;for(var n=GlobalConfig.ins("MeridianLevelConfig")[o],r=GlobalConfig.ins("MeridianStageConfig")[s],a=t[this.m_RoleSelectPanel.getCurRole()],l=[],h=n[a],c=0;c<h.length;c++){var u={type:h[c].type,value:h[c].value};l.push(u)}for(var d=r[a],c=0;c<d.length;c++){var u={type:d[c].type,value:d[c].value};l.push(u)}var p=AttributeData.getAttr([l]);this.jmListData.replaceAll(i.skill),AttributeData.setAttrGroup(p,this.m_JMAttrGroup),this.setVisible(LookState.JM)},t.prototype.sc_actor_base_info_talent=function(e){this.powerLabel.text=e.sumpower+"";for(var t=e.info,i=[],o=0,s=t.length;s>o;o++){var n=t[o];n.talentlevel>0&&i.push(n)}this.tfSkillData.replaceAll(i),this.setVisible(LookState.TF)},t.prototype.sc_actor_base_info_lizhuang=function(e){this.powerLabel.text=e.sumpower+"";for(var t=[],i=GlobalConfig.ins("TransferEquipGrowUpConfig"),o=GlobalConfig.ins("TransferEquipStarConfig"),s=0;s<e.info.length;s++){var n=[];for(var r in i){var a=i[r];for(var l in a)if(a[l].itemID==e.info[s].item.configID){var h=a[l];n=ZhuanZhiModel.ins().getZhuanZhiEquipAttr(h,e.info[s].num2,5)}}var c=[];for(var r in o){var u=o[r];for(var l in u)if(u[l].itemID==e.info[s].item.configID){var d=u[l];c=ZhuanZhiModel.ins().getZhuanZhiEquipAttr(d,e.info[s].star,4)}}var p=new ItemData;p.parser(e.info[s].item);var f=ZhuanZhiModel.ins().getZhuanZhiEquipBaseAttr(p),g=AttributeData.AttrAddition(n,c),_=AttributeData.AttrAddition(f,g);t=AttributeData.AttrAddition(t,_)}AttributeData.setAttrGroup(t,this.m_LZAttrGroup);for(var m=e.info,v=m.length,y="",b=0;v>b;b++){var C=m[b].item.configID,T=GlobalConfig.ins("EquipConfig")[C];T.baseAttr&&(y+=StringUtils.complementByChar(AttributeData.getAttrStrByType(T.baseAttr[0].type),0)+": "+AttributeData.getAttStrByType(T.baseAttr[0])+"\n")}this.m_LZLab.text=y,y.length>1?this.m_LzTeShuGroup.visible=!0:this.m_LzTeShuGroup.visible=!1,this.setVisible(LookState.LZ)},t.prototype._getTotalTjValue=function(e,t,i){void 0===i&&(i="PublicSpeRRConfig");for(var o=0,s=0;s<e.length;s++){var n=e[s].id,r=e[s].level-1,a=GlobalConfig.ins(i)[n][r];a&&(o+=a.attrs[t].value)}return o},t.prototype._sortGroupView=function(){this.listJNIcom.validateNow();for(var e=0,t=0,i=this.groupShuxin.numChildren;i>t;t++){var o=this.groupShuxin.getChildAt(t);o.visible&&(o.top=e,e+=o.height+20)}},t.prototype.UpdateContent=function(){null!=UserReadPlayer.ins().actorId&&GameLogic.ins().SendGetOtherActorBaseInfo(UserReadPlayer.ins().actorId,this.m_RoleSelectPanel.curRole)},Object.defineProperty(t.prototype,"_roleId",{get:function(){return this.m_RoleSelectPanel.getCurRole()},enumerable:!0,configurable:!0}),t.equipItemIndex=0,t}(BaseView);__reflect(TrLegendshuxinPanel.prototype,"TrLegendshuxinPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]);var LookState;!function(e){e[e.AR=0]="AR",e[e.EX=1]="EX",e[e.FW=2]="FW",e[e.SZ=3]="SZ",e[e.MJ=4]="MJ",e[e.JM=5]="JM",e[e.TF=6]="TF",e[e.LZ=7]="LZ"}(LookState||(LookState={})),window.LookState=LookState,window.TrLegendshuxinPanel=TrLegendshuxinPanel;var TrRoleInfoPanel=function(e){function t(t){var i=e.call(this)||this;return i.windowCommonBg="pic_bj_20_png",i.m_Context=t,i.skinName="TrRoleInfoSkin",i.name=GlobalConfig.jifengTiaoyueLg.st100100,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100100,i}return __extends(t,e),t.prototype.childrenCreated=function(){this.touchEnabled=!1,this.touchChildren=!0,this.equips=[];for(var e=0;e<EquipPos.MAX;e++)this.equips[e]=this["item"+e],this.equips[e].touchEnabled=!0,this.equips[e].isShowJob(!1);this.zhuzaiArr=[];for(var e=0;4>e;e++)this.zhuzaiArr[e]=this["zhuzai"+e];this.m_State.label=GlobalConfig.jifengTiaoyueLg.st100095},t.prototype.open=function(){this.strenLevel.text="0",this.gemLevel.text="0",this.zhuLingLevel.text="0",this.m_State.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_rank_player_info,this.sc_rank_player_info,this)},t.prototype.close=function(){this.roleShowPanel.release()},t.prototype.onClick=function(e){switch(e.currentTarget){case this.m_State:ViewManager.ins().open(TrTreasureHuntWin,this.m_Context.mActorData,this.m_Context.mRoleData,this.m_RoleSelectPanel.curRole),GameLogic.ins().SendGetOtherActorBaseInfo(UserReadPlayer.ins().actorId,this.m_RoleSelectPanel.curRole)}},t.prototype.sc_rank_player_info=function(e){var t=e.infos[0],i=e.infos[1],o=e.infos[2];this.strenLevel.text=t.sum+"",this.gemLevel.text=i.sum+"",this.zhuLingLevel.text=o.sum+""},t.prototype.setEquip=function(e){if(e){for(var t=e.getEquipLen2(),i=0;t>i;i++){var o=e.equipsData[i];this.equips[i].model=e,this.equips[i].data=o.item,this.equips[i].showItemEffect(),0==o.item.configID&&this.equips[i].setItemImg(i>=8?"role_25":ResDataPath.GetEquipDefaultIcon(i))}var s=e.GetSubRoleData();this.roleShowPanel.creatAnim(s),this.totalPower.text=GlobalConfig.jifengTiaoyueLg.st100094+e.power}},t.prototype.setEquipPoint=function(e,t){void 0===t&&(t=!1),null==this.EquipPointConstConfig&&(this.EquipPointConstConfig=GlobalConfig.ins("EquipPointGrowUpConfig"));for(var i=GlobalConfig.equipPointBasicConfig,o=0;4>o;o++){var s=e.zhuZaiData[o];if(s.lv){var n=this.EquipPointConstConfig[s.id][s.lv];n&&(this.zhuzaiArr[o].nameTxt.text=n.rank+GlobalConfig.jifengTiaoyueLg.st100103)}else this.zhuzaiArr[o].nameTxt.text=(i[o+1].activationLevel/1e3>>0)+GlobalConfig.jifengTiaoyueLg.st100104;var r=ZhuzaiEquip.GetBgIconByData(s),a=r[0],l=r[1];this.zhuzaiArr[o].setItemImg(a),this.zhuzaiArr[o].setItemBg(l),this.zhuzaiArr[o].showZhuZaiItemEffect(n),t||this.zhuzaiArr[o].IsShowRedPoint(s.canLevelup()||s.canAdvance())}},t.prototype.updataEquip=function(){this.setEquip(this.GetRoleData()),this.setEquipPoint(this.GetRoleData(),!0)},t.prototype.GetRoleData=function(){return this.m_Context.mRoleData[this.m_RoleSelectPanel.curRole]},t.prototype.UpdateContent=function(){for(var e=0;e<this.zhuzaiArr.length;e++)this.zhuzaiArr[e].visible=this.m_Context.mActorData.actorData.level>=80,this.zhuzaiArr[e].count.text="";this.updataEquip(),GameLogic.ins().SendGetOtherPlayerInfo(UserReadPlayer.ins().actorId,this.m_RoleSelectPanel.curRole)},t}(BaseView);__reflect(TrRoleInfoPanel.prototype,"TrRoleInfoPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.TrRoleInfoPanel=TrRoleInfoPanel;var TrRoleWin=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mRoleData=[],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainWinSkin",this.commonWindowBg.AddChildStack(new TrRoleInfoPanel(this)),this.commonWindowBg.AddChildStack(new TrRoleWingPanel(this))},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.mActorData=GameLogic.ins().GetShowOtherActor(e[0]),null==this.mActorData)return void ViewManager.ins().close(this);this.mRoleData=[];for(var i=0,o=this.mActorData.roleList;i<o.length;i++){var s=o[i],n=new Role;n.parser(s),this.mRoleData.push(n)}this.commonWindowBg.roleSelect.mRoleData=this.mRoleData,this.commonWindowBg.OnAdded(this)},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.OnOpenIndex=function(){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(TrRoleWin.prototype,"TrRoleWin",["ICommonWindow"]),window.TrRoleWin=TrRoleWin;var TrRoleWingPanel=function(e){function t(t){var i=e.call(this)||this;return i.windowTitleIconName="",i.windowCommonBg="pic_bj_20_png",i.showLVbnt=!0,i.m_Context=t,i.name=GlobalConfig.jifengTiaoyueLg.st100339,i.skinName="TrRoleWingSkin",i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100339,i.warnLabel.text=GlobalConfig.jifengTiaoyueLg.st100342,i}return __extends(t,e),t.prototype.GetRoleData=function(){return this.m_Context.mRoleData[this.m_RoleSelectPanel.curRole]},Object.defineProperty(t.prototype,"curRole",{get:function(){return this.m_RoleSelectPanel.getCurRole()},enumerable:!0,configurable:!0}),t.prototype.open=function(){},t.prototype.close=function(){},t.prototype.notOpenStatus=function(){this.starList.visible=!1,this.expBar.visible=!1,this.attrLabel.visible=!1,this.powerLabel.visible=!1,this.warnLabel.visible=!0,this.warnLabel.text=GlobalConfig.jifengTiaoyueLg.st100340},t.prototype.openStatusOpen=function(){this.warnLabel.visible=!1,this.starList.visible=!0,this.expBar.visible=!0,this.attrLabel.visible=!0,this.powerLabel.visible=!0},t.prototype.setWingData=function(){this._wingsData=this.GetRoleData().wingsData;var e=this.GetRoleData(),t=e.GetSubRoleData();return this.roleShowPanel.creatAnim(t),this.wingImg.touchEnabled=!1,this._wingsData.openStatus?(this.openStatusOpen(),this.wingName.text=""+GlobalConfig.wingLevelConfig[this._wingsData.lv].name,this.m_img.visible=!0,this.updateAtt(),void this.isShowUpGradeBtn()):(this.notOpenStatus(),this.wingName.text="",void(this.m_img.visible=!1))},t.prototype.updateAtt=function(){null==this.wingCommonConfig&&(this.wingCommonConfig=GlobalConfig.ins("WingCommonConfig"));var e=GlobalConfig.wingLevelConfig[this._wingsData.lv],t=GlobalConfig.wingStarConfig[this._wingsData.star];this.attrLabel.SetCurAttrByAddType(e,t),this._totalPower=UserBag.getAttrPower(AttributeData.AttrAddition(e.attr,t.attr));for(var i=0,o=this._wingsData.equipsLen,s=0;o>s;s++){var n=this._wingsData.getEquipByIndex(s);n.itemConfig&&(i+=ItemConfig.calculateBagItemScore(n))}if(this._totalPower=this._totalPower+i,this.powerLabel.text=this._totalPower,this._wingsData.lv<this.wingCommonConfig.lvMax){var r=void 0,a=void 0;this._wingsData.star>0&&this._wingsData.star%10==0&&this.showLVbnt?(r=GlobalConfig.wingLevelConfig[this._wingsData.lv+1],a=t,this.showLVbnt=!1):this._wingsData.star%10!=0||this.showLVbnt?(r=e,a=GlobalConfig.wingStarConfig[this._wingsData.star+1],this.showLVbnt=!0):(r=e,a=GlobalConfig.wingStarConfig[this._wingsData.star+1]),this.attrLabel.SetNextAttrByAddType(r,a)}},t.prototype.isShowUpGradeBtn=function(){if(null==this.wingCommonConfig&&(this.wingCommonConfig=GlobalConfig.ins("WingCommonConfig")),this._wingsData.lv>=this.wingCommonConfig.lvMax)return this.notOpenStatus(),this.powerLabel.visible=!0,this.warnLabel.visible=!0,this.warnLabel.x=153,this.warnLabel.y=492,this.warnLabel.text=GlobalConfig.jifengTiaoyueLg.st100341,void(this.attrLabel.visible=!0);var e,t=GlobalConfig.wingLevelConfig[this._wingsData.lv],i=this._wingsData.star/10-t.level,o=!1;this._wingsData.star>0&&Math.floor(this._wingsData.star/10)-this._wingsData.lv>0&&this._wingsData.lv<this.wingCommonConfig.lvMax&&i?(e=10,o=!0):e=this._wingsData.star%10,this.starList.starNum=e},t.prototype.UpdateContent=function(){this.setWingData()},t}(BaseView);__reflect(TrRoleWingPanel.prototype,"TrRoleWingPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.TrRoleWingPanel=TrRoleWingPanel;
var TrSpecialRingWin=function(e){function t(t){var i=e.call(this)||this;i.m_ConfigData=[],i.mRoleData=[],i.windowTitleIconName="L特戒R",i.mActorData=t.mActorData,i.mRoleData=t.mRoleData,i.skinName="TrSpecialRingSkin",i.name="特戒",i.list.itemRenderer=SpecialRingItem;var o=GlobalConfig.ins("PublicSpecialringConfig");for(var s in o)i.m_ConfigData.push(o[s]);return i.m_ConfigData.sort(function(e,t){return e.id-t.id}),i.m_ListData=new eui.ArrayCollection(i.m_ConfigData),console.log(i.m_ListData),i.list.dataProvider=i.m_ListData,i.m_Mc=new MovieClip,i.ringEffeGroup.addChild(i.m_Mc),i}return __extends(t,e),t.prototype.open=function(){this.AddClick(this.getwayLabel,this._OnClick),this.AddClick(this.leftBtn,this._OnClick),this.AddClick(this.rightBtn,this._OnClick),this.AddItemClick(this.list,this._ItemClick),this.observe(MessageDef.RING_UPDATE_DATA,this.UpdateContent),this.list.selectedIndex=0,this.UpdateContent()},t.prototype.close=function(){},t.prototype.OpenRingId=function(e){for(var t=-1,i=0;i<this.m_ConfigData.length;++i)if(this.m_ConfigData[i].id==e){t=i;break}-1!=t?(this.list.selectedIndex=t,UIHelper.ScrollHIndex(this.list,t,80),this._UpdateData()):console.log("not id => "+e)},t.prototype._ItemClick=function(e){this._UpdateData()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.getwayLabel:var t=this.GetCurRingId(),i=this.GetCurRingInfo(),o=i&&i.level?i.level:1;ViewManager.ins().open(SpecialRingPreviewPanel,t,o);break;case this.leftBtn:break;case this.rightBtn:}},t.prototype._UpdateList=function(){this.m_ListData.replaceAll(this.m_ConfigData)},t.prototype.GetCurRingId=function(){var e=this.list.selectedIndex,t=this.m_ConfigData[e];return t.id},t.prototype.GetCurRingInfo=function(){return SpecialRing.ins().GetRingData(this.GetCurRingId())},t.prototype.UpdateContent=function(){this._UpdateList(),this._UpdateData()},t.prototype._UpdateData=function(){this.fullGroup.visible=!1,this.noneActiveLabel.visible=!1;var e=this.list.selectedIndex,i=this.m_ConfigData[e],o=SpecialRing.ins().GetRingData(i.id);this.ringNameImg.source=t.GetRingNameImg(i.id),t.SetRingTipImg(this.ringTipImg,i,o);var s=o.level?o.level:1,n=GlobalConfig.publicSpeRRConfig[i.id][s-1].skillid,r=GlobalConfig.skillsConfig[n].displayLevel;t.SetSkillAttrLabel(this,i.id,s,r);var a=SpecialRing.GetRingConfig(i.id,s);if(t.SetAttrLabel(this.attr1,AttributeData.getAttStr(a.attrs,0,1,"：")),t.SetAttrLabel(this.attr2,null),this.ringOtherAttr.text=a?a.announce:"",o.level>0){var l=SpecialRing.GetRingConfig(o.id,o.level),h=SpecialRing.GetRingConfig(o.id,o.level+1);h?(this._SetConsume(l.rankUpItem.id,l.rankUpItem.count),t.SetAttrLabel(this.attr2,AttributeData.getAttStr(h.attrs,0,1,"："),"ui_tj_xjsx"),this._SetGetwayLabel(GetwayLabel.GainItemLabel(l.rankUpItem.id))):this.fullGroup.visible=!0}else this.ringOtherAttr.text="属性对所有角色有效",i.pay||this._SetConsume(i.activateid,i.actnum),i.gainWay&&this._SetGetwayLabel(i.gainWay[0][0]);this.powerLabel.text="战斗力 +"+t.GetRingPower(i.id,s),this.m_Mc.loadUrl(ResDataPath.GetUIEffePath("eff_ui_rings_00"+t.GetIdIndex(i.id)),!0,-1),UIHelper.SetIconMovie(this.m_Mc,0),i.day>GameServer.serverOpenDay?(this.noneActiveLabel.visible=!0,this.noneActiveLabel.text="开服第"+i.day+"天可以激活"):i.id==SpecialRing.ins().GetCurActId()},t.prototype._SetGetwayLabel=function(e){},t.prototype._SetConsume=function(e,t){GlobalConfig.itemConfig[e],UserBag.ins().getBagItemById(e)},t.SetAttrLabelByData=function(e,t,i,o){void 0===o&&(o=null);var s=GlobalConfig.publicSpeRRConfig[t][i-1];this.SetAttrLabel(e,AttributeData.getAttStr(s.attrs,0,1,"："))},t.SetAttrLabel=function(e,t,i){return void 0===i&&(i=null),null==t?(e.visible=!1,void(e.height=0)):(e.visible=!0,e.height=106,e.curKey.source=i?i:"ui_tj_tjsx",void(e.curAttr.text=t))},t.SetSkillAttrLabel=function(e,i,o,s){var n=GlobalConfig.ins("PublicSpecialringConfig")[i],r=GlobalConfig.skillsConfig[GlobalConfig.publicSpeRRConfig[n.id][o-1].skillid];e.ringSkillName.text=n.skillname+"(Lv"+s+")",e.ringSkillAttr.text=r.desc,e.ringIcon.source="ui_tj_jn_0"+t.GetIdIndex(i)},t.GetIdIndex=function(e){return e%10},t.GetRingEffPath=function(e){return ResDataPath.GetUIEffePath("eff_ui_rings_00"+t.GetIdIndex(e))},t.GetRingNameImg=function(e){return"ui_tj_mz_sj_0"+t.GetIdIndex(e)},t.GetRingIconImg=function(e){return"ui_tj_p_jz0"+t.GetIdIndex(e)},t.GetRingPower=function(e,t,i){void 0===i&&(i=!1);var o=GlobalConfig.publicSpeRRConfig[e][t-1];return(ItemConfig.CalcAttrScoreValue(o.attrs)+o.power)*(i?SubRoles.MAX_COUNT:SubRoles.ins().subRolesLen||1)},t.SetRingTipImg=function(e,t,i){e.visible=!1},t._REG=new RegExp("{(\\w+)}","g"),t}(BaseView);__reflect(TrSpecialRingWin.prototype,"TrSpecialRingWin",["ICommonWindowTitle"]);var TrSpecialRingItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data,t=SpecialRing.ins().GetRingData(e.id);t&&t.level?(this.label.text=t.level+" 阶",this.label.textColor=Color.Orange):(this.label.text="未激活",this.label.textColor=Color.White),this.redPoint.visible=SpecialRing.ins().IsRedPointById(e.id),this.iconDisplay.source=TrSpecialRingWin.GetRingIconImg(e.id)},t.ICON_LIST=[],t}(eui.ItemRenderer);__reflect(TrSpecialRingItem.prototype,"TrSpecialRingItem"),window.TrSpecialRingWin=TrSpecialRingWin,window.TrSpecialRingItem=TrSpecialRingItem;var TrTreasureHuntWin=function(e){function t(){var t=e.call(this)||this;return t.mRoleData=[],t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.sxPanel=new TrLegendshuxinPanel(this),this.commonWindowBg.AddChildStack(this.sxPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mActorData=e[0],this.mRoleData=e[1],this.commonWindowBg.roleSelect.mRoleData=this.mRoleData,this.commonWindowBg.OnAdded(this,0,e[2])},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnRemoved()},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(TrTreasureHuntWin.prototype,"TrTreasureHuntWin",["ICommonWindow"]),window.TrTreasureHuntWin=TrTreasureHuntWin;var UserVip=function(e){function t(){var t=e.call(this)||this;return t.lv=0,t.exp=0,t.state=0,t.sysId=PackageID.Vip,t.regNetMsg(S2cProtocol.sc_vip_update_data,t.doUpdateVipData),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendGetAwards=function(e){var t=new Sproto.sc_vip_get_awards_request;t.lv=e,this.Rpc(C2sProtocol.sc_vip_get_awards,t)},t.prototype.doUpdateVipData=function(e){var t=this.lv,i=this.exp;this.state;this.lv=e.lv,this.exp=e.exp,this.state=e.state,this.lv!=t&&GameGlobal.MessageCenter.dispatch(MessageDef.VIP_LEVEL_CHANGE),this.exp!=i&&GameGlobal.MessageCenter.dispatch(MessageDef.UPDATA_VIP_EXP),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATA_VIP_AWARDS)},t.prototype.GetRewardState=function(e){return null!=this.state&&this.state>>e>0?!0:!1},t.prototype.CheckRedPoint=function(){for(var e=!1,t=1;t<=this.lv;t++)if(void 0!=this.state&&0==(this.state>>t&1))return e=!0;return e},t}(BaseSystem);__reflect(UserVip.prototype,"UserVip"),window.UserVip=UserVip;var MonthCardWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MonthCardPanelSkin",t.list_yk.itemRenderer=ItemBaseEffe,t.fsImg.text=GlobalConfig.jifengTiaoyueLg.st100028,t.getBtn.label=GlobalConfig.jifengTiaoyueLg.st100004,t}return __extends(t,e),t.prototype.open=function(){this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sendBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.addListener(MessageDef.RECHARGE_UPDATE_MONTH_DAY,this._UpdateContent,this),GameGlobal.MessageCenter.addListener(MessageDef.RECHARGE_UPDATE_MONTH_REWARD,this._UpdateContent,this),this._UpdateContent()},t.prototype._UpdateContent=function(){this.sendBtn2.visible=!Recharge.ins().zunCard,this.sendBtn2State.visible=Recharge.ins().zunCard,this.fsImg.visible=Recharge.ins().GetMonthReward()==RewardState.NotReached,this.getBtn.visible=Recharge.ins().GetMonthReward()==RewardState.CanGet,this.stateImg.visible=Recharge.ins().GetMonthReward()==RewardState.Gotten,UIHelper.SetBtnNormalEffe(this.getBtn,this.getBtn.visible);var e=Recharge.ins().monthDay>0;if(e){var t=Recharge.ins().monthDay,i=Math.floor(t/86400);GlobalConfig.jifengTiaoyueLg.st100025+"<font color='#00ff00'>"+i+"</font>"+GlobalConfig.jifengTiaoyueLg.st100006;this.lastTime=GlobalConfig.jifengTiaoyueLg.st100025+i+GlobalConfig.jifengTiaoyueLg.st100006}else this.lastTime="";var o=GlobalConfig.ins("MonthCardConfig"),s=o.money/10,n=o.moneyEx/10;this.sendBtn2.label=n+GlobalConfig.jifengTiaoyueLg.st100026,this.sendBtn.skinName=e?"Btn3Skin":"Btn1Skin",this.sendBtn.label=e?s+GlobalConfig.jifengTiaoyueLg.st100027+"\n"+this.lastTime:s+GlobalConfig.jifengTiaoyueLg.st100026,this.list_yk.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(GlobalConfig.ins("MonthCardConfig").firstAward))},t.prototype.close=function(){this.sendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sendBtn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.removeListener(MessageDef.RECHARGE_UPDATE_MONTH_DAY,this._UpdateContent,this),GameGlobal.MessageCenter.removeListener(MessageDef.RECHARGE_UPDATE_MONTH_REWARD,this._UpdateContent,this)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.sendBtn:Recharge.ins().TestMonth(1);break;case this.sendBtn2:Recharge.ins().TestMonth(2);break;case this.getBtn:UserBag.ins().getSurplusCount()<UserBag.BAG_ENOUGH?BagFullTipsPanel.Open():Recharge.ins().sendgetgifData()}},t}(eui.Component);__reflect(MonthCardWin.prototype,"MonthCardWin"),window.MonthCardWin=MonthCardWin;var VIP3WIn=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="Vip3Skin";var t=VipWin.LoadVIPEff(3);t.x=this.groupEff.width/2,t.y=this.groupEff.height/2,this.groupEff.addChild(t)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this);for(var i=GlobalConfig.ins("VipConfig")[3].awards,o=1;3>=o;++o){var s=i[o],n=this.group.getChildAt(o-1);n.item.data=s,n&&n.item&&n.item.showItemEffect(),n.attr1.text=AttributeData.GetAttrValueByItemId(s.id,AttributeType.atMaxHp),n.attr2.text=AttributeData.GetAttrValueByItemId(s.id,AttributeType.atAttack),n.attrp.text="战斗力 "+ItemConfig.CalculateItemScore(s.id).toString()}GameGlobal.actorModel.vipLv<3?(this.sureBtn.visible=!1,UIHelper.SetBtnNormalEffe(this.sureBtn,!1)):(this.sureBtn.visible=!0,this.closeBtn1.visible=!1,UIHelper.SetBtnNormalEffe(this.sureBtn,!0))},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.closeBtn:case this.closeBtn0:ViewManager.ins().close(t);break;case this.closeBtn1:ViewManager.ins().open(ChargeFirstWin,t),ViewManager.ins().close(t);break;case this.sureBtn:ViewManager.ins().open(VipWin),ViewManager.ins().close(t)}},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiPanel);__reflect(VIP3WIn.prototype,"VIP3WIn"),window.VIP3WIn=VIP3WIn;var VipWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.LoadVIPEff=function(e){var i;if(i="number"==typeof e?t.EFFE[e]:e,!i)return null;var o=i[0];if(1==o){var s=new egret.DisplayObjectContainer;s.x=240,s.y=250;for(var n=new egret.DisplayObjectContainer,r=1;r<i.length;++r){var a=void 0,l=ResDataPath.GetUIEffePath(i[r]);if(r==i.length-1){var h=new MovieClip;h.loadUrl(l,!0,-1),a=h}else{var c=new eui.Image;c.blendMode="add",c.source=l,c.x=-256,c.y=-256,a=c}n.addChild(a)}return UIHelper.SetIconMovie(n),s.addChild(n),s}if(2==o){var l=ResDataPath.GetUIEffePath(i[1]),h=new MovieClip;return h.loadUrl(l,!0,-1),h.x=240,h.y=250,h}if(3==o){for(var u=i[1],d=[],r=0;8>r;r++)d.push(u+"/0"+r);for(var p=[],f=0,g=d;f<g.length;f++){var _=g[f];p.push(ResDataPath.GetUIEffePath(_+".png"))}var m=new SimpleMovieClip(p);return m}if(4==o){var v=new eui.Image;return v.source=i[1],v}},t.prototype.OnResUnload=function(){if(!this.effGroup)return!1;for(var e=0;e<this.effGroup.numChildren;++e)SimpleResMgr.Unload(this.effGroup.getChildAt(e));return this.effGroup.removeChildren(),!0},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="VipSkin",this.list.itemRenderer=ItemBase,this.topUpBtn.label=GlobalConfig.jifengTiaoyueLg.st100784,this.seeDetails.text=GlobalConfig.jifengTiaoyueLg.st100785,this.suerBtn.label=GlobalConfig.jifengTiaoyueLg.st100004},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.closeBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.topUpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.suerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.seeDetails.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATA_VIP_EXP,this.changeExpBar,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATA_VIP_AWARDS,this.changeAwards,this),this.changeExpBar();var i=e[0];if(i){var o=GlobalConfig.ins("VipConfig")[i];this.setAwards(o),this._curLv=i,this.changeBtn()}else this.changeAwards();UIHelper.SetLinkStyleLabel(this.seeDetails),this.topUpBtn.visible=!WxSdk.ins().isHidePay()},t.prototype.close=function(){this.closeBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.topUpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.suerBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.seeDetails.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this),SimpleResMgr.Unload(this)},t.prototype.onTap=function(e){var i;switch(e.currentTarget){case this.closeBtn0:ViewManager.ins().close(t);break;case this.topUpBtn:ViewManager.ins().close(t),ViewManager.ins().open(ChargeFirstWin);break;case this.leftBtn:i=GlobalConfig.ins("VipConfig")[--this._curLv],this.showVipInfo(i);break;case this.rightBtn:i=GlobalConfig.ins("VipConfig")[++this._curLv],this.showVipInfo(i);break;case this.suerBtn:i=GlobalConfig.ins("VipConfig")[this._curLv];for(var o=0,s=SubRoles.ins().getSubRoleByIndex(0).job,n=i.awards[s-1],r=n.length,a=0;r>a;a++)1==n[a].type&&n[a].id<2e5&&o++;UserBag.ins().getSurplusCount()>=o?UserVip.ins().sendGetAwards(this._curLv):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100051);break;case this.seeDetails:ViewManager.ins().open(ZsBossRuleSpeak,0,GlobalConfig.jifengTiaoyueLg.st100779,GlobalConfig.ins("VipConfig")[this._curLv].description)}},t.prototype.showVipInfo=function(e){e?this.setAwards(e):this._curLv=UserVip.ins().lv,this.changeBtn()},t.prototype.changeExpBar=function(){var e=UserVip.ins(),t=GlobalConfig.ins("VipConfig")[e.lv],i=0,o=e.exp;t&&(i=e.lv,this.curVip.text="v"+i);var s=GlobalConfig.ins("VipConfig")[i+1],n=0,r="";s?(n=s.needYb-o,this.nextVip.text="v"+(e.lv+1),r=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100780,[n])+(e.lv+1),this.expBar.maximum=s.needYb,this.expBar.value=o):(r=GlobalConfig.jifengTiaoyueLg.st100781,this.expBar.labelDisplay.visible=!1,this.expBar.maximum=1,this.expBar.value=1,this.nextVip.text=GlobalConfig.jifengTiaoyueLg.st100020)},t.prototype.changeAwards=function(){var e;if(this._curLv=UserVip.ins().lv,this._curLv>=0){for(var t=1;t<=this._curLv;t++)if(!this.getRemindByIndex(t))return e=GlobalConfig.ins("VipConfig")[t],this.setAwards(e?e:e=GlobalConfig.ins("VipConfig")[--this._curLv]),this._curLv=t,void this.changeBtn();e=GlobalConfig.ins("VipConfig")[++this._curLv],this.setAwards(e?e:e=GlobalConfig.ins("VipConfig")[--this._curLv]),this.changeBtn()}},t.prototype.setAwards=function(e){this.titleVip.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100782,[e.id]),this.list.dataProvider=new eui.ArrayCollection(e.awards),this.list.validateNow();for(var t=0;t<this.list.numChildren;++t)this.list.getChildAt(t).showItemEffect();this.suerBtn.visible=!1,this.suerBtn.enabled=!1,this.getState.visible=!1;var i="comp_252_121_0";e.id>=10&&(i="comp_252_121_"),this.vipDesImg.source=i+e.id+"_png",this.cost.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100783,[e.showYuanBao,e.id]),this.titleLabel.textFlow=TextFlowMaker.generateTextFlow(e.description),SimpleResMgr.Unload(this),UIHelper.SetBtnNormalEffe(this.suerBtn,!1),this.getRemindByIndex(e.id)?(this.suerBtn.visible=!1,this.getState.visible=!0):UserVip.ins().lv>=e.id&&(this.suerBtn.visible=!0,this.suerBtn.enabled=!0,UIHelper.SetBtnNormalEffe(this.suerBtn,!0))},t.prototype.getRemindByIndex=function(e){var t=UserVip.ins(),i=t.state;return 1==(i>>e&1)},t.prototype.changeBtn=function(){this._curLv>1?(this.leftBtn.visible=!0,this.rightBtn.visible=!0,this._curLv>=CommonUtils.getObjectLength(GlobalConfig.ins("VipConfig"))&&(this.rightBtn.visible=!1)):this._curLv<=1&&(this.leftBtn.visible=!1,this.rightBtn.visible=!0)},t.LAYER_LEVEL=LayerManager.UI_Main,t.EFFE=[[""],[4,"comp_333_363_01_png"],[4,"comp_333_363_02_png"],[4,"comp_333_363_03_png"],[4,"comp_333_363_04_png"],[4,"comp_333_363_05_png"],[4,"comp_333_363_06_png"],[4,"comp_333_363_07_png"],[4,"comp_333_363_08_png"],[4,"comp_333_363_09_png"],[4,"comp_333_363_10_png"]],t.vipEffPos=[{x:-15,y:0},{x:-15,y:-90},{x:-15,y:-90},{x:-15,y:-90},{x:-15,y:-90},{x:-15,y:-90},{x:-15,y:-90},{x:-15,y:-90},{x:-15,y:-90},{x:-15,y:-90},{x:-15,y:-90}],t}(BaseEuiPanel);__reflect(VipWin.prototype,"VipWin",["IResObject"]),window.VipWin=VipWin;var BagFullTipsPanel=function(){function e(){}return e.CheckOpen=function(t){return UserBag.ins().getSurplusCount()<t?(e.Open(),!1):!0},e.Open=function(){WarnWin.show(GlobalConfig.jifengTiaoyueLg.st101897,function(){ViewManager.ins().open(SmeltEquipTotalWin)},this,null,null,"sure",{btnName:GlobalConfig.jifengTiaoyueLg.st101896})},e.OpenNoCloseMe=function(){WarnWin.show(GlobalConfig.jifengTiaoyueLg.st101897,function(){ViewManager.ins().openEasy(SmeltEquipTotalWin)},this,null,null,"sure",{btnName:GlobalConfig.jifengTiaoyueLg.st101896})},e}();__reflect(BagFullTipsPanel.prototype,"BagFullTipsPanel"),window.BagFullTipsPanel=BagFullTipsPanel;var ShopGoodsWarn=function(e){function t(){var t=e.call(this)||this;return t._totalNum=0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GainGoodsSkin",this.gainList.itemRenderer=GainGoodsItem,this.countTxt.restrict="0-9",this.price.setType(MoneyConst.yuanbao),this.totalPrice.setType(MoneyConst.yuanbao),this.topUpBtn.visible=0==StartGetUserInfo.isOne,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100791+"：",this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st100792+"：",this.buyBtn.label=GlobalConfig.jifengTiaoyueLg.st100069,this.topUpBtn.label=GlobalConfig.jifengTiaoyueLg.st100227},t.prototype.open=function(){var e=this;this.topUpBtn.visible=!WxSdk.ins().isHidePay(),this.m_bg.init("ShopGoodsWarn",GlobalConfig.jifengTiaoyueLg.st100108),TimerManager.ins().doTimer(500,1,function(){e.decBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTap,e),e.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTap,e),e.dec10Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTap,e),e.add10Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTap,e),e.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTap,e),e.topUpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTap,e),e.gainList.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTouchList,e),e.countTxt.addEventListener(egret.Event.CHANGE,e.onTxtChange,e),MessageCenter.addListener(Shop.postBuyResult,e.buyCallBack,e)},this)},t.prototype.close=function(){this.decBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.dec10Btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.add10Btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.topUpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.gainList.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchList,this),this.countTxt.removeEventListener(egret.Event.CHANGE,this.onTxtChange,this),MessageCenter.ins().removeAll(this)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.decBtn:this.setTotalPrice(this._totalNum-1);break;case this.addBtn:this.setTotalPrice(this._totalNum+1);break;case this.dec10Btn:this.setTotalPrice(this._totalNum-10);break;case this.add10Btn:this.setTotalPrice(this._totalNum+10);break;case this.buyBtn:Checker.Money(this.shopConfig.costType,this.totalPrice.getPrice())&&Shop.ins().sendBuy(1,[[this._goodsId,this._totalNum]]);break;case this.topUpBtn:ViewManager.ins().open(ChargeFirstWin),ViewManager.ins().close(this)}},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.onTouchList=function(e){var i=e.target;i&&(i=i.userData,i&&i[1][0]&&GameGuider.guidance(i[1][0],i[1][1])&&ViewManager.ins().close(t))},t.prototype.buyCallBack=function(e){e>0?ViewManager.ins().close(t):UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100014)},t.prototype.onTxtChange=function(e){var t=Number(this.countTxt.text);this.setTotalPrice(t)},t.prototype.setData=function(e,t){var i;if(e>=101501&&151505>=e){var o=GlobalConfig.itemConfig[e];this.itemIcon.setData(o),this.nameTxt.text=""+o.name,this.nameTxt.textColor=ItemBase.QUALITY_COLOR[o.quality],i=!1,this.titleTxt.text=GlobalConfig.jifengTiaoyueLg.st100786}else if(e>2e4){var o=GlobalConfig.itemConfig[e];this.itemIcon.setData(o),this.nameTxt.text=""+o.name,this.nameTxt.textColor=ItemBase.QUALITY_COLOR[o.quality],i=ItemStoreConfig.getStoreByItemID(e),this.titleTxt.text=GlobalConfig.jifengTiaoyueLg.st100786}else this.itemIcon.setData(null),this.itemIcon.setItemImg(MoneyManger.MoneyConstToSource(e)),this.itemIcon.setItemBg(ResDataPath.GetItemQualityName(MoneyManger.MoneyConstToQuality(e))),this.nameTxt.text=MoneyManger.MoneyConstToName(e),this.titleTxt.text=MoneyManger.MoneyConstToName(e)+GlobalConfig.jifengTiaoyueLg.st100790,this.nameTxt.textColor=16758826;null==this.gainItemConfig&&(this.gainItemConfig=GlobalConfig.ins("GainItemConfig"));var s=this.gainItemConfig[e];if(null!=s){for(var n=s.gainWay.slice(0,s.gainWay.length),r=0;r<n.length;++r){var a=n[r];if(a[1][0]==ViewIndexDef.ACT_GIFT){var l=ActivityModel.ins().GetActivityDataByType(2);ActivityModel.ins().IsOpen(l)||n.splice(r,1),e!=ViewIndexDef.EGG_BROKEN_PANEL||EggBroken.IsOpen()||n.splice(r,1)}}this.gainList.dataProvider=new eui.ArrayCollection(n)}else this.gainList.dataProvider=new eui.ArrayCollection([]);this.currentState=i?"shop":"getway",this.validateNow();this.gainList.dataProvider.length;this.shopConfig=i,i&&(this.price.setType(i.costType),this.totalPrice.setType(i.costType),this._goodsId=i.index,this.price.setPrice(i.price),this.setTotalPrice(t))},t.prototype.setTotalPrice=function(e){0>=e?this._totalNum=1:e>=1e4?this._totalNum=9999:this._totalNum=e,this.countTxt.text=this._totalNum+"",this.totalPrice.setPrice(this._totalNum*this.price.getPrice())},t}(BaseEuiPanel);__reflect(ShopGoodsWarn.prototype,"ShopGoodsWarn"),ViewManager.ins().reg(ShopGoodsWarn,LayerManager.UI_Popup),window.ShopGoodsWarn=ShopGoodsWarn;var UserWarn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.setWarnLabel=function(e,t,i,o,s){void 0===o&&(o="normal"),void 0===s&&(s=null),ViewManager.ins().open(WarnWin).setWarnLabel(e,t,i,o,s)},t.prototype.setWarnContent=function(e,t,i,o,s){void 0===o&&(o="normal"),void 0===s&&(s=null),ViewManager.ins().open(WarnWin).setWarnContent(e,t,i,o,s)},t.prototype.setBuyGoodsWarn=function(e,t){void 0===t&&(t=1),ViewManager.ins().open(ShopGoodsWarn).setData(e,t)},t}(BaseSystem);__reflect(UserWarn.prototype,"UserWarn"),MessageCenter.compile(UserWarn),window.UserWarn=UserWarn;var WarnWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.show=function(e,t,i,o,s,n,r){void 0===o&&(o=null),void 0===s&&(s=null),void 0===n&&(n="normal"),void 0===r&&(r=null),UserWarn.ins().setWarnLabel(e,{func:t,thisObj:i},{func2:o,thisObj2:s},n,r)},t.ShowContent=function(e,t,i,o,s,n,r){void 0===o&&(o=null),void 0===s&&(s=null),void 0===n&&(n="normal"),void 0===r&&(r=null),UserWarn.ins().setWarnContent(e,{func:t,thisObj:i},{func2:o,thisObj2:s},n,r)},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="warnFrameSkin",this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100367,this.sureBtn.label=GlobalConfig.jifengTiaoyueLg.st100040,this.notBtn.label=GlobalConfig.jifengTiaoyueLg.st100602},t.prototype.open=function(){this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.notBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.dialogCloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(e){"sure2"!=this.currentState&&ViewManager.ins().close(this)},t.prototype.close=function(){this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.notBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.dialogCloseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.callBack=null,this.calback2=null,this.sureBtn.label="确定",this.notBtn.label="取消",1==t.isRelease&&(t.isRelease=!1,ViewManager.ins().releaseView(t))},t.prototype.onTap=function(e){var i=this.callBack,o=this.calback2;switch(ViewManager.ins().close(t),e.currentTarget){case this.sureBtn:i&&null!=i.func&&i.func.call(i.thisObj);break;case this.notBtn:o&&o.func2&&o.func2.call(o.thisObj2)}},Object.defineProperty(t.prototype,"isShowWin",{get:function(){return this._isShowWin},set:function(e){this._isShowWin!=e&&(this._isShowWin=e)},enumerable:!0,configurable:!0}),t.prototype._Adjust=function(e){var t=Math.max(e-37,0),i=.5*t;this.warnLabel.y=382-i,this.warnBg.height=89+t,this.warnBg.y=356-i,this.sureBtn.y=687+i,this.notBtn.y=687+i},t.prototype.setWarnLabel=function(e,t,i,o,s){void 0===i&&(i=null),void 0===o&&(o="normal"),void 0===s&&(s=null),"string"==typeof e?this.warnLabel.textFlow=(new egret.HtmlTextParser).parser(e):this.warnLabel.textFlow=e,this.callBack=t,this.calback2=i,this.currentState=o,s&&s.btnName&&(this.sureBtn.label=s.btnName)},t.prototype.setWarnContent=function(e,t,i,o,s){void 0===i&&(i=null),void 0===o&&(o="normal"),void 0===s&&(s=null),this.warnLabel.visible=!1,this.callBack=t,this.calback2=i,this.currentState=o,s&&s.btnName&&(this.sureBtn.label=s.btnName);var n=null;"string"==typeof e?(n=new eui.Component,n.skinName=e):n=e,this.addChild(n),n.x=.5*(480-n.width),n.y=.5*(800-n.height)-100},t.isRelease=!1,t}(BaseEuiPanel);__reflect(WarnWin.prototype,"WarnWin"),ViewManager.ins().reg(WarnWin,LayerManager.UI_Popup),window.WarnWin=WarnWin;var WelcomeWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="welcomePanelSkin"},t.prototype.open=function(){t.isOpen=!0;for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.close=function(){t.isOpen=!1;for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(e){ViewManager.ins().close(t)},t.isOpen=!1,t}(BaseEuiPanel);__reflect(WelcomeWin.prototype,"WelcomeWin"),ViewManager.ins().reg(WelcomeWin,LayerManager.UI_Popup),window.WelcomeWin=WelcomeWin;var WarOrderBtn=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;switch(t){case 1:this.labelDisplay.text=GlobalConfig.jifengTiaoyueLg.st102082;break;case 2:this.labelDisplay.text=GlobalConfig.jifengTiaoyueLg.st102083;break;default:this.labelDisplay.text=GlobalConfig.jifengTiaoyueLg.st102084}WarOrderModel.getInstance.showMissionType==t?this.enabled=!1:this.enabled=!0,this.redPoint.visible=WarOrderModel.getInstance.checkMissionRedPointBuyType(t)},t.prototype.onClick=function(){WarOrderModel.getInstance.showMissionType=this.data,MessageCenter.ins().dispatch(WarOrderEvt.WARORDEREVT_DATAUPDATEMISSIONTYPE_MSG)},t}(eui.ItemRenderer);__reflect(WarOrderBtn.prototype,"WarOrderBtn"),window.WarOrderBtn=WarOrderBtn;var WarOrderIconItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="WarOrderIconItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.m_ItemBase.data=t.item,this.m_ItemBase.dataChanged();var i=WarOrderModel.getInstance;switch(t.type){case 1:var o=i.commonAwardList[t.lv-1];switch(o){case 0:this.m_MaskGuoup.visible=!1,this.m_Shuo.visible=!0;break;case 1:this.m_MaskGuoup.visible=!1,this.m_Shuo.visible=!1;break;case 2:this.m_MaskGuoup.visible=!0,this.m_Shuo.visible=!1}break;default:if(i.isUpWarOrder){var s=i.upAwardList[t.lv-1];switch(s){case 0:this.m_MaskGuoup.visible=!1,this.m_Shuo.visible=!0;break;case 1:this.m_MaskGuoup.visible=!1,this.m_Shuo.visible=!1;break;case 2:this.m_MaskGuoup.visible=!0,this.m_Shuo.visible=!1}}else this.m_Shuo.visible=!0,this.m_MaskGuoup.visible=!1}},t}(eui.ItemRenderer);__reflect(WarOrderIconItem.prototype,"WarOrderIconItem"),window.WarOrderIconItem=WarOrderIconItem;var WarOrderItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="WarOrderItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List1.itemRenderer=WarOrderIconItem,this.m_List2.itemRenderer=WarOrderIconItem,this.listData1=new eui.ArrayCollection,this.listData2=new eui.ArrayCollection,this.m_List1.dataProvider=this.listData1,this.m_List2.dataProvider=this.listData2,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=WarOrderModel.getInstance,i=this.data;this.m_LvLab.text=i+"";var o=[],s=GlobalConfig.ins("TokenConfig")[t.mainId];if(s){for(var n=s[i-1].baseAward,r=0;r<n.length;r++){var a={type:n[r].type,id:n[r].id,count:n[r].count,isShowName:2},l={lv:i,type:1,item:a};o.push(l)}this.listData1.replaceAll(o);for(var h=[],c=s[i-1].advancedAward,r=0;r<c.length;r++){var u={type:c[r].type,id:c[r].id,count:c[r].count,isShowName:2},d={lv:i,type:2,item:u};h.push(d)}this.listData2.replaceAll(h)}MessageCenter.ins().dispatch(WarOrderEvt.WARORDEREVT_CHANGESHOWLIST_MSG)},t.prototype.onClick=function(){var e=WarOrderModel.getInstance.checkCanGetByLv(this.data);e&&WarOrderSproto.ins().sendGetAllAward()
},t}(eui.ItemRenderer);__reflect(WarOrderItem.prototype,"WarOrderItem"),window.WarOrderItem=WarOrderItem;var WarOrderJinJieWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="WarOrderJinJieWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_List1.itemRenderer=ItemBase,this.m_List2.itemRenderer=ItemBase,this.listData1=new eui.ArrayCollection,this.listData2=new eui.ArrayCollection,this.m_List1.dataProvider=this.listData1,this.m_List2.dataProvider=this.listData2,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st102078,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st102079,this.m_UnLockLab.text=GlobalConfig.jifengTiaoyueLg.st102080},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addViewEvent(),this.setData(),this.playEff()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent(),this.mc&&(DisplayUtils.dispose(this.mc),this.mc=null)},t.prototype.addViewEvent=function(){this.observe(WarOrderEvt.WARORDEREVT_DATAUPDATE_MSG,this.setData),this.AddClick(this.m_WarOrderUpBtn,this.onClick),this.AddClick(this.m_CloseBtn2,this.onMaskTap)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){var e=WarOrderModel.getInstance,t=GlobalConfig.ins("TokenBaseConfig")[e.mainId];t&&(this.m_WarOrderUpBtn.label="￥"+t.tokenPrice,this.listData1.replaceAll(t.extraAward),this.listData2.replaceAll(t.showAward)),e.isUpWarOrder?(this.m_WarOrderUpBtn.visible=!1,this.m_UnLockLab.visible=!0):(this.m_WarOrderUpBtn.visible=!0,this.m_UnLockLab.visible=!1)},t.prototype.onClick=function(){var e=WarOrderModel.getInstance,t=GlobalConfig.ins("TokenBaseConfig")[e.mainId];t&&Recharge.ins().commonTopUp(t.id,t.tokenPrice,t.payItem[0],GlobalConfig.jifengTiaoyueLg.st102071),WarOrderSproto.ins().sendUpWarOrdetJinJie()},t.prototype.playEff=function(){this.mc=ViewManager.ins().createEff(this.mc,this.groupEff,"eff_jiesuan",-1)},t}(BaseEuiPanel);__reflect(WarOrderJinJieWin.prototype,"WarOrderJinJieWin"),ViewManager.ins().reg(WarOrderJinJieWin,LayerManager.UI_Popup),window.WarOrderJinJieWin=WarOrderJinJieWin;var WarOrderLvUpWin=function(e){function t(){var t=e.call(this)||this;return t.nowNum=1,t.skinName="WarOrderLvUpWinSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_bg.init("WarOrderLvUpWin",GlobalConfig.jifengTiaoyueLg.st102073),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st102081,this.m_List.itemRenderer=ItemBase,this.listData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,this.m_GetBtn.label=GlobalConfig.jifengTiaoyueLg.st100069},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.nowNum=1;WarOrderModel.getInstance;this.addViewEvent(),this.setData()},t.prototype.close=function(){this.release()},t.prototype.release=function(){this.removeViewEvent()},t.prototype.addViewEvent=function(){this.AddClick(this.m_CutBtn,this.onClickCunBtn),this.AddClick(this.m_AddBtn,this.onClickAddBtn),this.AddClick(this.m_MaxBtn,this.onClickMaxBtn),this.AddClick(this.m_MinBtn,this.onClickMinBtn),this.AddClick(this.m_GetBtn,this.onClickMainBtn)},t.prototype.removeViewEvent=function(){},t.prototype.setData=function(){for(var e=WarOrderModel.getInstance,t=GlobalConfig.ins("TokenConfig")[e.mainId],i=0,o=[],s=e.lv;s<e.lv+this.nowNum;s++){i+=t[s].baseAward.length,i+=t[s].advancedAward.length;for(var n=0;n<t[s].baseAward.length;n++){var r=t[s].baseAward.slice(0),a=r[n];o.push(a)}for(var n=0;n<t[s].advancedAward.length;n++){var r=t[s].advancedAward.slice(0),a=r[n];o.push(a)}}this.listData.replaceAll(o),this.m_LvUpGetLab.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102085,["<font color="+Color.Green+">"+this.nowNum+"</font>","<font color="+Color.Green+">"+i+"</font>"])),this.m_BuyLvLab.textFlow=(new egret.HtmlTextParser).parser(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st102086,["<font color="+Color.Green+">"+this.nowNum+"</font>","<font color="+Color.Green+">"+(this.nowNum+e.lv)+"</font>"])),this.m_MainNumLab.text=this.nowNum+"";var l=GlobalConfig.ins("TokenBaseConfig")[e.mainId];if(l){for(var h=l.levelPrice.slice(0),c=[],s=0;s<h.length;s++){var u=h[s].count*this.nowNum,d={type:h[s].type,id:h[s].id,count:u};c.push(d)}UserBag.ins().setNeedItem(c,this.m_NeedItemGroup)}},t.prototype.onClickCunBtn=function(){this.nowNum>1&&(this.nowNum-=1),this.setData()},t.prototype.onClickAddBtn=function(){this.nowNum<WarOrderModel.getInstance.maxLv-WarOrderModel.getInstance.lv&&(this.nowNum+=1),this.setData()},t.prototype.onClickMaxBtn=function(){this.nowNum!=WarOrderModel.getInstance.maxLv-WarOrderModel.getInstance.lv&&(this.nowNum=WarOrderModel.getInstance.maxLv-WarOrderModel.getInstance.lv,this.setData())},t.prototype.onClickMinBtn=function(){1!=this.nowNum&&(this.nowNum=1,this.setData())},t.prototype.onClickMainBtn=function(){WarOrderSproto.ins().sendUpWarOrderLv(this.nowNum),this.onMaskTap()},t}(BaseEuiPanel);__reflect(WarOrderLvUpWin.prototype,"WarOrderLvUpWin"),ViewManager.ins().reg(WarOrderLvUpWin,LayerManager.UI_Popup),window.WarOrderLvUpWin=WarOrderLvUpWin;var WarOrderMissionItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="WarOrderMissionItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_MainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data.id,i=WarOrderModel.getInstance,o=GlobalConfig.ins("TokenTaskConfig")[i.showMissionType][t];if(o){var s=o.award[0],n={type:s.type,id:s.id,count:s.count,isShowName:2};this.m_ItemBase.data=n,this.m_ItemBase.dataChanged();var r=i.missionDic.get(i.showMissionType).get(t);switch(r.state){case 0:this.m_MainBtn.skinName="Btn1Skin",this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101245,this.m_MainBtn.enabled=!0;break;case 1:this.m_MainBtn.skinName="btnRoSkin2",this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st101210,this.m_MainBtn.enabled=!0;break;default:this.m_MainBtn.skinName="Btn1Skin",this.m_MainBtn.label=GlobalConfig.jifengTiaoyueLg.st100648,this.m_MainBtn.enabled=!1}this.m_MissionName.textFlow=TextFlowMaker.generateTextFlow(o.desc+"("+r.num+"/"+o.target+")")}},t.prototype.onClick=function(){var e=this.data.id,t=WarOrderModel.getInstance,i=t.missionDic.get(t.showMissionType).get(e);if(i)switch(i.state){case 0:var o=GlobalConfig.ins("TokenTaskConfig")[t.showMissionType][e];o&&(o.funcopenId?Deblocking.Check(o.funcopenId)&&ViewManager.Guide(o.controlTarget[0],o.controlTarget[1]):ViewManager.Guide(o.controlTarget[0],o.controlTarget[1]));break;case 1:WarOrderSproto.ins().sendCompMission(e)}},t}(eui.ItemRenderer);__reflect(WarOrderMissionItem.prototype,"WarOrderMissionItem"),window.WarOrderMissionItem=WarOrderMissionItem;var WarOrderMissionPanel=function(e){function t(t){var i=e.call(this)||this;return i.name=GlobalConfig.jifengTiaoyueLg.st100975,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st102071,i.skinName="WarOrderMissionPanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_BuyLvBtn.label=GlobalConfig.jifengTiaoyueLg.st102073,this.m_WarOrderJinJieBtn.label=GlobalConfig.jifengTiaoyueLg.st102074,this.m_List.itemRenderer=WarOrderMissionItem,this.m_BtnList.itemRenderer=WarOrderBtn,this.listData=new eui.ArrayCollection,this.btnListData=new eui.ArrayCollection,this.m_List.dataProvider=this.listData,this.m_BtnList.dataProvider=this.btnListData,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st102088},t.prototype.addViewEvent=function(){this.AddClick(this.m_BuyLvBtn,this.onClickBuyBtn),this.AddClick(this.m_WarOrderJinJieBtn,this.onClickJinJieBtn),this.AddClick(this.m_ExpBtn,this.onClickExpBtn),this.observe(WarOrderEvt.WARORDEREVT_DATAUPDATE_MSG,this.initData),this.observe(WarOrderEvt.WARORDEREVT_DATAUPDATEMISSIONTYPE_MSG,this.changeMissionType)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.addViewEvent(),this.initData()},t.prototype.close=function(){this.removeEvent()},t.prototype.release=function(){this.removeEvent()},t.prototype.initData=function(){var e=WarOrderModel.getInstance;this.setTopData(),this.btnListData.replaceAll([1,2,3]);var t=(GlobalConfig.ins("TokenTaskConfig")[e.showMissionType],[]),i=e.missionDic.get(e.showMissionType);if(i)for(var o=i.values,s=0;s<o.length;s++){var n=o[s].id,r=i.get(n),a=r.state+10;1==r.state&&(a=1);var l={id:n,state:a};t.push(l)}t.sort(this.sorLvUp),this.listData.replaceAll(t)},t.prototype.changeMissionType=function(){this.m_Scroller.stopAnimation(),egret.setTimeout(function(){this.m_Scroller.viewport&&(this.m_Scroller.viewport.scrollV=0)},this,100),this.initData()},t.prototype.setTopData=function(){var e=WarOrderModel.getInstance;this.m_ExpBtn.redPoint.visible=e.checkCanGetExpBag();var t=GlobalConfig.ins("TokenBaseConfig")[e.mainId];t&&(this.m_Lan0.text=t.activityTimeTips),this.m_LvLab.text=e.lv+"",this.m_ExpBar.value=e.exp,this.m_ExpBar.maximum=e.maxExp},t.prototype.onClickBuyBtn=function(){var e=WarOrderModel.getInstance;e.isLvMax()?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st102077):ViewManager.ins().open(WarOrderLvUpWin)},t.prototype.onClickJinJieBtn=function(){ViewManager.ins().open(WarOrderJinJieWin)},t.prototype.onClickExpBtn=function(){var e=WarOrderModel.getInstance;return e.isUpWarOrder?void(e.checkCanGetExpBag()?WarOrderSproto.ins().sendGetExpBag():UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st102076)):void ViewManager.ins().open(WarOrderJinJieWin)},t.prototype.sorLvUp=function(e,t){return e.state-t.state},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(WarOrderMissionPanel.prototype,"WarOrderMissionPanel",["ICommonWindowTitle"]),window.WarOrderMissionPanel=WarOrderMissionPanel;var WarOrderPanel=function(e){function t(t){var i=e.call(this)||this;return i.name=GlobalConfig.jifengTiaoyueLg.st101386,i.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st102071,i.skinName="WarOrderPanelSkin",i.touchEnabled=!1,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_BuyLvBtn.label=GlobalConfig.jifengTiaoyueLg.st102073,this.m_WarOrderJinJieBtn.label=GlobalConfig.jifengTiaoyueLg.st102074,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st102088},t.prototype.addViewEvent=function(){this.AddClick(this.m_BuyLvBtn,this.onClickBuyBtn),this.AddClick(this.m_WarOrderJinJieBtn,this.onClickJinJieBtn),this.AddClick(this.m_ExpBtn,this.onClickExpBtn),this.AddClick(this.m_GetBtn,this.onClickGetBtn),this.observe(WarOrderEvt.WARORDEREVT_DATAUPDATE_MSG,this.initData)},t.prototype.removeEvent=function(){},t.prototype.open=function(){this.addTime(),t.isFirstOpen=!0,this.addViewEvent(),this.initData()},t.prototype.close=function(){t.isFirstOpen=!1,this.removeEvent(),this.removeTime()},t.prototype.release=function(){this.removeEvent(),this.removeTime()},t.prototype.initData=function(){var e=WarOrderModel.getInstance;this.m_WarOrderShowItem.setData(),this.m_GetBtn.redPoint.visible=e.checkCanGet(),this.setTopData()},t.prototype.addTime=function(){this.removeTime(),TimerManager.ins().doTimer(1e3,0,this.playTime,this),this.playTime},t.prototype.removeTime=function(){TimerManager.ins().remove(this.playTime,this)},t.prototype.playTime=function(){var e=WarOrderModel.getInstance,t=e.endTime-GameServer.serverTime;this.m_TimeLab.text=DateUtils.getFormatBySecond(t,DateUtils.TIME_FORMAT_5,4)},t.prototype.setTopData=function(){var e=WarOrderModel.getInstance;this.m_ExpBtn.redPoint.visible=e.checkCanGetExpBag();var t=GlobalConfig.ins("TokenBaseConfig")[e.mainId];t&&(this.m_Lan0.text=t.activityTimeTips),this.m_LvLab.text=e.lv+"",this.m_ExpBar.value=e.exp,this.m_ExpBar.maximum=e.maxExp},t.prototype.onClickBuyBtn=function(){var e=WarOrderModel.getInstance;e.isLvMax()?UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st102077):ViewManager.ins().open(WarOrderLvUpWin)},t.prototype.onClickJinJieBtn=function(){ViewManager.ins().open(WarOrderJinJieWin)},t.prototype.onClickExpBtn=function(){var e=WarOrderModel.getInstance;return e.isUpWarOrder?void(e.checkCanGetExpBag()?WarOrderSproto.ins().sendGetExpBag():UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st102076)):void ViewManager.ins().open(WarOrderJinJieWin)},t.prototype.onClickGetBtn=function(){var e=WarOrderModel.getInstance;e.checkCanGet()&&WarOrderSproto.ins().sendGetAllAward()},t.prototype.UpdateContent=function(){},t.isFirstOpen=!0,t}(BaseView);__reflect(WarOrderPanel.prototype,"WarOrderPanel",["ICommonWindowTitle"]),window.WarOrderPanel=WarOrderPanel;var WarOrderShowItem=function(e){function t(){var t=e.call(this)||this;return t.previewLv=0,t.skinName="WarOrderShowItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100333,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st101386,this.m_Lan3.text=GlobalConfig.jifengTiaoyueLg.st102075,this.m_Lan4.text=GlobalConfig.jifengTiaoyueLg.st100431,this.listData1=new eui.ArrayCollection,this.listData2=new eui.ArrayCollection,this.listData3=new eui.ArrayCollection,this.m_List1.itemRenderer=ItemBase,this.m_List2.itemRenderer=ItemBase,this.m_List3.itemRenderer=WarOrderItem,this.m_List1.dataProvider=this.listData1,this.m_List2.dataProvider=this.listData2,this.m_List3.dataProvider=this.listData3,this.addEvent()},t.prototype.addEvent=function(){this.m_MaskGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickJinJie,this),MessageCenter.ins().addListener(WarOrderEvt.WARORDEREVT_DATAUPDATE_MSG,this.setData,this),MessageCenter.ins().addListener(WarOrderEvt.WARORDEREVT_CHANGESHOWLIST_MSG,this.setPreviewLv,this)},t.prototype.onClickJinJie=function(){ViewManager.ins().open(WarOrderJinJieWin)},t.prototype.setData=function(){var e=WarOrderModel.getInstance,t=GlobalConfig.ins("TokenConfig")[e.mainId];if(t){for(var i=[],o=0;o<t.length;o++)i.push(t[o].level);this.listData3.replaceAll(i)}e.isUpWarOrder?this.m_MaskGroup.visible=!1:this.m_MaskGroup.visible=!0,WarOrderPanel.isFirstOpen&&(WarOrderPanel.isFirstOpen=!1,this.m_Scroller.viewport.scrollV=e.listPoint),this.setPreviewLv()},t.prototype.setPreviewLv=function(){var e=WarOrderModel.getInstance,t=(this.m_List3.numChildren,0);this.m_Scroller.viewport&&(t=this.m_Scroller.viewport.scrollV);var i=Math.ceil((t+e.scrHight)/e.oneItemHight);i>e.maxLv?i=e.maxLv:0>=i&&(i=1);var o=Math.ceil(i/10);if(this.previewLv!=o){this.previewLv=o,o&&(this.m_LvLab.text="("+10*o+")");var s=GlobalConfig.ins("TokenConfig")[e.mainId];if(s){var n=s[10*o-1];if(n){for(var r=[],a=0;a<n.baseAward.length;a++){var l={type:n.baseAward[a].type,id:n.baseAward[a].id,count:n.baseAward[a].count,isShowName:2};r.push(l)}this.listData1.removeAll(),this.listData1.replaceAll(r);for(var h=[],a=0;a<n.baseAward.length;a++){var l={type:n.advancedAward[a].type,id:n.advancedAward[a].id,count:n.advancedAward[a].count,isShowName:2};h.push(l)}this.listData2.removeAll(),this.listData2.replaceAll(h)}}}},t}(eui.Component);__reflect(WarOrderShowItem.prototype,"WarOrderShowItem"),window.WarOrderShowItem=WarOrderShowItem;var WarOrderWin=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st102071,t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.warOrderPanel=new WarOrderPanel,this.commonWindowBg.AddChildStack(this.warOrderPanel),this.warOrderMissionPanel=new WarOrderMissionPanel,this.commonWindowBg.AddChildStack(this.warOrderMissionPanel)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e&&e[0]),this.addWinEvent(),this.updateRedPoint()},t.prototype.close=function(){this.warOrderPanel.release(),this.warOrderMissionPanel.release(),this.removeObserve(),this.removeWinEvetn(),this.commonWindowBg.OnRemoved()},t.prototype.addWinEvent=function(){this.observe(WarOrderEvt.WARORDEREVT_DATAUPDATE_MSG,this.updateRedPoint)},t.prototype.removeWinEvetn=function(){},t.prototype.updateRedPoint=function(){var e=WarOrderModel.getInstance;this.commonWindowBg.ShowTalRedPoint(0,e.checkAwardRewPoint()),this.commonWindowBg.ShowTalRedPoint(1,e.checkMissionRedPoint())},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(WarOrderWin.prototype,"WarOrderWin",["ICommonWindow","ICommonWindowTitle"]),ViewManager.ins().reg(WarOrderWin,LayerManager.UI_Main),window.WarOrderWin=WarOrderWin;var WarOrderEvt=function(){function e(){}return e.WARORDEREVT_DATAUPDATE_MSG="WARORDEREVT_DATAUPDATE_MSG",e.WARORDEREVT_CHANGESHOWLIST_MSG="WARORDEREVT_CHANGESHOWLIST_MSG",e.WARORDEREVT_DATAUPDATEMISSIONTYPE_MSG="WARORDEREVT_DATAUPDATEMISSIONTYPE_MSG",e}();__reflect(WarOrderEvt.prototype,"WarOrderEvt"),window.WarOrderEvt=WarOrderEvt;var WarOrderMissionData=function(){function e(){this.type=1,this.id=0,this.state=0,this.num=0}return e}();__reflect(WarOrderMissionData.prototype,"WarOrderMissionData"),window.WarOrderMissionData=WarOrderMissionData;var WarOrderModel=function(){function e(){this.mainId=1015,this.lv=1,this._maxLv=0,this.exp=0,this.commonAwardList=[0,0,0,0,0,0,0,0,0,0],this.upAwardList=[0,0,0,0,0,0,0,0,0],this.scrHight=200,this.oneItemHight=76,this.nowShowLv=1,this.isUpWarOrder=!1,this.isHaveExtraExp=!1,this.endTime=0,this.showMissionType=1,this.missionDic=new Dictionary,this.isShow=!1}return Object.defineProperty(e,"getInstance",{get:function(){return e.s_instance||(e.s_instance=new e),e.s_instance},enumerable:!0,configurable:!0}),e.prototype.setData=function(e){this.mainId=e.baseData.id,this.endTime=e.baseData.endTime,this.lv=e.lv,this.exp=e.exp,e.scala?this.isUpWarOrder=!0:this.isUpWarOrder=!1,0==e.extraExp||2==e.extraExp?this.isHaveExtraExp=!1:this.isHaveExtraExp=!0,this.commonAwardList=[],this.upAwardList=[];for(var t=0;t<e.lvList.length;t++)this.commonAwardList.push(e.lvList[t].reward1),this.upAwardList.push(e.lvList[t].reward2);this.isShow=!0,MessageCenter.ins().dispatch(WarOrderEvt.WARORDEREVT_DATAUPDATE_MSG)},Object.defineProperty(e.prototype,"listPoint",{get:function(){for(var e=null,t=0;t<this.lv;t++)if(1==this.commonAwardList[0]||1==this.upAwardList[0]){e=t;break}null==e&&(e=this.lv-1),0>e&&(e=0);var i=e*this.oneItemHight,o=this.oneItemHight*this.maxLv-this.scrHight;return i>o&&(i=o),i},enumerable:!0,configurable:!0}),e.prototype.checkCanGet=function(){for(var e=0;e<this.lv;e++){var t=this.commonAwardList[e];if(1==t)return!0;if(this.isUpWarOrder){var i=this.upAwardList[e];if(1==i)return!0}}return!1},e.prototype.checkCanGetExpBag=function(){return this.isUpWarOrder&&this.isHaveExtraExp?!0:!1},Object.defineProperty(e.prototype,"maxLv",{get:function(){if(!this._maxLv){var e=GlobalConfig.ins("TokenBaseConfig")[this.mainId];this._maxLv=e.maxLevel}return this._maxLv},enumerable:!0,configurable:!0}),e.prototype.isLvMax=function(){return this.lv>=this.maxLv?!0:!1},e.prototype.checkCanGetByLv=function(e){var t=this.commonAwardList[e-1];if(1==t)return!0;if(this.isUpWarOrder){var i=this.upAwardList[e-1];if(1==i)return!0}return!1},Object.defineProperty(e.prototype,"maxExp",{get:function(){var e=GlobalConfig.ins("TokenConfig")[this.mainId];if(e){var t=e[this.lv];if(t)return t.exp}return 100},enumerable:!0,configurable:!0}),e.prototype.testData=function(){var e=GlobalConfig.ins("TokenTaskConfig");for(var t in e){var i=e[t];if(i){var o=new Dictionary;for(var s in i){var n=i[s],r=new WarOrderMissionData;r.type=n.taskType,r.id=n.taskId,r.num=1,r.state=0,o.set(r.id,r)}this.missionDic.set(parseInt(t),o)}}},e.prototype.setMissionData=function(e,t){void 0===t&&(t=!0),t&&this.missionDic.clear();for(var i=0;i<e.length;i++){var o=e[i],s=this.missionDic.get(o.tasktype);if(s){var n=s.get(o.id);n?(n.id=o.id,n.state=o.state,n.num=o.value,n.type=o.tasktype):(n=new WarOrderMissionData,n.id=o.id,n.state=o.state,n.num=o.value,n.type=o.tasktype,s.set(o.id,n))}else{s=new Dictionary;var n=new WarOrderMissionData;n.id=o.id,n.state=o.state,n.num=o.value,n.type=o.tasktype,s.set(o.id,n),this.missionDic.set(o.tasktype,s)}}},e.prototype.checkAllRedPoint=function(){return this.checkAwardRewPoint()||this.checkMissionRedPoint()},e.prototype.checkAwardRewPoint=function(){for(var e=0;e<this.commonAwardList.length;e++)if(1==this.commonAwardList[e])return!0;if(this.isUpWarOrder)for(var e=0;e<this.upAwardList.length;e++)if(1==this.upAwardList[e])return!0;return this.checkCanGetExpBag()?!0:!1},e.prototype.checkMissionRedPoint=function(){for(var e=1;4>e;e++){var t=this.checkMissionRedPointBuyType(e);if(t)return!0}return!1},e.prototype.checkMissionRedPointBuyType=function(e){var t=this.missionDic.get(e);if(t)for(var i=0;i<t.values.length;i++)if(1==t.values[i].state)return!0;return!1},e}();__reflect(WarOrderModel.prototype,"WarOrderModel"),window.WarOrderModel=WarOrderModel;var WarOrderSproto=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_activity_warorder_reward,t.getAward),t.regNetMsg(S2cProtocol.sc_activity_warorder_exreward,t.getExpBag),t.regNetMsg(S2cProtocol.sc_task_warorder_data,t.getAllMission),t.regNetMsg(S2cProtocol.sc_task_warorder_update,t.getMission),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getAward=function(e){ViewManager.ins().open(ResultWin,!0,e.data,null,null,1),MessageCenter.ins().dispatch(WarOrderEvt.WARORDEREVT_DATAUPDATE_MSG)},t.prototype.getExpBag=function(e){ViewManager.ins().open(ResultWin,!0,e.data,null,null,1),MessageCenter.ins().dispatch(WarOrderEvt.WARORDEREVT_DATAUPDATE_MSG)},t.prototype.getAllMission=function(e){WarOrderModel.getInstance.setMissionData(e.data),MessageCenter.ins().dispatch(WarOrderEvt.WARORDEREVT_DATAUPDATE_MSG)},t.prototype.getMission=function(e){WarOrderModel.getInstance.setMissionData([e.data],!1),MessageCenter.ins().dispatch(WarOrderEvt.WARORDEREVT_DATAUPDATE_MSG)},t.prototype.sendGetExpBag=function(){var e=new Sproto.cs_activity_warorder_exreward_request;e.activityId=WarOrderModel.getInstance.mainId,this.Rpc(C2sProtocol.cs_activity_warorder_exreward,e)},t.prototype.sendGetAllAward=function(){var e=new Sproto.cs_activity_warorder_reward_request;e.activityId=WarOrderModel.getInstance.mainId,this.Rpc(C2sProtocol.cs_activity_warorder_reward,e)},t.prototype.sendUpWarOrderLv=function(e){var t=new Sproto.cs_activity_warorder_buylv_request;t.activityId=WarOrderModel.getInstance.mainId,t.buyNum=e,this.Rpc(C2sProtocol.cs_activity_warorder_buylv,t)},t.prototype.sendUpWarOrdetJinJie=function(){var e=new Sproto.cs_activity_warorder_buyscale_request;e.activityId=WarOrderModel.getInstance.mainId,this.Rpc(C2sProtocol.cs_activity_warorder_buyscale,e)},t.prototype.sendCompMission=function(e){var t=new Sproto.cs_task_warorder_reward_request;t.taskID=e,this.Rpc(C2sProtocol.cs_task_warorder_reward,t)},t}(BaseSystem);__reflect(WarOrderSproto.prototype,"WarOrderSproto"),window.WarOrderSproto=WarOrderSproto;var WorldBossWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="WorldBossWinSkin",t.seeReward.text=GlobalConfig.jifengTiaoyueLg.st101318,t.enterGame.label=GlobalConfig.jifengTiaoyueLg.st100501,t}return __extends(t,e),t.prototype.childrenCreated=function(){UIHelper.SetLinkStyleLabel(this.seeReward)},t.prototype.initMc=function(){this.centerBossImage||(this.centerBossImage=new MovieClip,this.centerBossImage.scaleX=-1,this.centerBossImage.scaleY=1,this.centerBossImage.x=240,this.centerBossImage.y=380,this.centerBossImage.touchEnabled=!1,this.addChild(this.centerBossImage))},t.prototype.open=function(){this.commonWindowBg.OnAdded(this),this.wbossCenterView.rank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.seeReward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.enterGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.initData(),this.refushBtn(),ZsBoss.ins().wBossId>0?this.m_index=ZsBoss.ins().wBossId:this.m_index=ZsBoss.ins().wNextBossId,this.refreshCenter(this.worldBossConfig[this.m_index])},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),this.wbossCenterView.rank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.seeReward.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.enterGame.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},t.prototype.initData=function(){null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig),null==this.worldBossConfig&&(this.worldBossConfig=GlobalConfig.ins("WorldBossConfig"))},t.prototype.refreshCenter=function(e){if(null==e)return void Main.errorBack("世界BOSS数据错误");var t=ZsBoss.ins().wAcIsOpen?GlobalConfig.jifengTiaoyueLg.st100497:GlobalConfig.jifengTiaoyueLg.st100498;this.wbossCenterView.rank.textFlow=(new egret.HtmlTextParser).parser("<font color = '#23C42A'><u>"+t+"</u></fomt>"),this.wbossCenterView.bossName.text=this.monstersConfig[e.bossId].name+"("+e.llimit+"-"+e.hlimit+"转)",this.wbossCenterView.rewardList.itemRenderer=ItemBase,this.wbossCenterView.rewardList.dataProvider=new eui.ArrayCollection(e.showReward),this.wBossOpenTimeLable.text=this.worldBossConfig[this.m_index].openTiem,this.initMc(),this.centerBossImage.loadUrl(ResDataPath.GetMonsterBodyPath(this.monstersConfig[e.bossId].avatar+"_3s"),!0,-1)},t.prototype.refushBtn=function(){var e=ZsBoss.ins();e.wAcIsOpen?this.wbossCenterView.sign.textFlow=(new egret.HtmlTextParser).parser("<font color = '#27e327'>"+GlobalConfig.jifengTiaoyueLg.st100500+"</fomt>"):this.wbossCenterView.sign.textFlow=(new egret.HtmlTextParser).parser("<font color = '#ffcc00'>"+GlobalConfig.jifengTiaoyueLg.st100279+"</fomt>"),this.wbossCenterView.bossBg.visible=!1},t.prototype.onTouch=function(e){var t=e.target;switch(t==this.wbossCenterView.rank&&this.openRankWin(this.m_index),e.target){case this.seeReward:ViewManager.ins().open(ZsBossRewardShowWin,!1);break;case this.enterGame:if(!ZsBoss.ins().wAcIsOpen)return void UserTips.ins().showTips(ZsBoss.ins().wPromptList[5]);ZsBoss.ins().worldBossChallengeReq()}},t.prototype.openRankWin=function(e){ViewManager.ins().open(ZsBossRankWin,e)},t}(BaseEuiPanel);__reflect(WorldBossWin.prototype,"WorldBossWin",["ICommonWindow"]),ViewManager.ins().reg(WorldBossWin,LayerManager.UI_Main),window.WorldBossWin=WorldBossWin;var ZhuanZhiEquipItem=function(e){function t(){var t=e.call(this)||this;return t.LAW=5,t.skinName="ZhuanZhiEquipItemSkin",t.imgList=[],t.addEventListener(egret.TouchEvent.TOUCH_END,t.selectedHandle,t),t}return __extends(t,e),t.prototype.dataChanged=function(){this.itemIcon.imgJob.visible=!1;var e=this.data.equip;if(e.item&&e.item.configID>0)this.itemIcon.setData(e.item.itemConfig),this.title.text=e.item.itemConfig.zsLevel>0?e.item.itemConfig.zsLevel+GlobalConfig.jifengTiaoyueLg.st100067:e.item.itemConfig.level+GlobalConfig.jifengTiaoyueLg.st100093,this.level.text="+"+e.num2,this.lock.visible=!1;else{this.itemIcon.setData(null),this.itemIcon.imgIcon.source="ui_zz_zb_icon_"+(this.mIndex+8)+"_"+this.data.job+"_png",this.title.text="",this.level.text="";var t=ZhuanZhiModel.ins().getZhuanZhiEquipId(this.mIndex,this.data.job),i=GlobalConfig.ins("TransferEquipConfig")[t],o=SubRoles.ins().getSubRoleByIndex(this.data.roleIndex);this.lock.visible=!(o.zhuanZhiJm.level>=i.activationLevel)}this.foundStarLvl(e.star)},t.prototype.selectedHandle=function(e){this.isSelected||GameGlobal.MessageCenter.dispatch(MessageDef.ZHUANZHI_EQUIP_ITEM_SELECT,this.mIndex)},Object.defineProperty(t.prototype,"selected",{set:function(e){this.isSelected!=e&&(this.isSelected=e,this.select.visible=e)},enumerable:!0,configurable:!0}),t.prototype.setShowRedPoint=function(e){this.redPoint.visible=e},t.prototype.foundStarLvl=function(e){var t=this;t.clear();for(var i,o=Math.floor(e/t.LAW),s=0;o>s;s++)i=t.getimage(),i.source="comp_15_15_01_png",this.starGroup.addChild(i);var n=e-o*t.LAW;for(s=0;n>s;s++)i=t.getimage(),i.source="comp_222_2222_png",this.starGroup.addChild(i)},t.prototype.clear=function(){for(;this.starGroup.numChildren;)this.imgList.push(this.starGroup.removeChildAt(0))},t.prototype.getimage=function(){if(this.imgList.length>0)return this.imgList.shift();var e=new eui.Image;return e},t}(eui.ItemRenderer);__reflect(ZhuanZhiEquipItem.prototype,"ZhuanZhiEquipItem"),window.ZhuanZhiEquipItem=ZhuanZhiEquipItem;var ZhuanZhiEquipMainPanel=function(e){function t(){var t=e.call(this)||this;return t.m_EquipGroup=[],t.skinName="ZhuanZhiEquipMainPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.gotoLable.label=GlobalConfig.jifengTiaoyueLg.st101077;for(var i=0;6>i;++i)this.m_EquipGroup[i]=this["equip"+i],this.m_EquipGroup[i].mIndex=i;this.m_EquipGroup[t.equipItemIndex].selected=!0,this.getItem.text=GlobalConfig.jifengTiaoyueLg.st100418,UIHelper.SetLinkStyleLabel(this.getItem)},t.prototype.open=function(){this.observe(MessageDef.ZHUANZHI_EQUIP_ITEM_SELECT,this.onEquipItemChange),this.observe(MessageDef.CHANGE_EQUIP,this.UpdateContent),this.observe(ZhuanZhiModel.ins().postZhuanZhiEquipPower,this.updatePower),this.addTouchEvent(this,this.onClick,this.replaceBtn),this.addTouchEvent(this,this.onClick,this.gotoLable),this.AddClick(this.getItem,this.onClickGetLab1)},t.prototype.close=function(){},t.prototype.onClick=function(e){var i=this.m_RoleSelectPanel.getCurRole();e.currentTarget==this.replaceBtn?ViewManager.ins().open(ZhuanZhiEquipReplaceWin,i,t.equipItemIndex):ViewManager.ins().open(ZhuanZhiEquipWin,0,i)},t.prototype.onEquipItemChange=function(e){this.m_EquipGroup[t.equipItemIndex].selected=!1,this.m_EquipGroup[e].selected=!0,t.equipItemIndex=e,this.updataEquipInfo()},t.prototype.UpdateContent=function(){for(var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()),t=e.equipsData,i=0;i<this.m_EquipGroup.length;i++){var o=this.m_EquipGroup[i],s={};s.equip=t[i+EquipPos.MAX],s.job=e.job,s.roleIndex=this.m_RoleSelectPanel.getCurRole(),o.data=s,s.equip&&s.equip.item&&(s.equip.item.configID>0?o.setShowRedPoint(ZhuanZhiModel.ins().canReplaceZzEquipRedPoint(s.equip.item)):o.setShowRedPoint(ZhuanZhiModel.ins().canMountZzEquipRedPoint(i,e)))}this.updataEquipInfo(),this.updatePower(),this.updataRoleRedPoint()},t.prototype.updataEquipInfo=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()),i=e.equipsData,o=i[t.equipItemIndex+EquipPos.MAX],s=ZhuanZhiModel.ins().getZhuanZhiEquipId(t.equipItemIndex,e.job);if(o.item&&o.item.configID>0){this.attrLabel.visible=!0,this.addAttrLable.visible=!0;var n=GlobalConfig.ins("TransferEquipGrowUpConfig")[s][o.item.configID],r=GlobalConfig.ins("TransferEquipStarConfig")[s][o.item.configID],a=ZhuanZhiModel.ins().getZhuanZhiEquipAttr(n,o.num2,5),l=ZhuanZhiModel.ins().getZhuanZhiEquipAttr(r,o.star,4),h=ZhuanZhiModel.ins().getZhuanZhiEquipBaseAttr(o.item),c=AttributeData.AttrAddition(a,l);this.attrLabel.SetCurAttr(AttributeData.getAttStr(AttributeData.removeZeroAttr(AttributeData.AttrAddition(h,c)),1));var u=GlobalConfig.equipConfig[o.item.configID];if(u){var d=u.baseAttr?u.baseAttr[0]:null;d?this.addAttrLable.textFlow=TextFlowMaker.generateTextFlow(AttributeData.getAttrStrByType(d.type)+StringUtils.addColor(AttributeData.getAttStrByType(d),Color.Green)):this.addAttrLable.text=""}this.openTips.visible=!1,this.gotoLable.visible=!1,this.replaceBtn.visible=!0,this.replaceBtn.label=GlobalConfig.jifengTiaoyueLg.st100318}else{this.attrLabel.visible=!1,this.addAttrLable.visible=!1;var p=GlobalConfig.ins("TransferEquipConfig")[s];if(e.zhuanZhiJm.level>=p.activationLevel)this.replaceBtn.label=GlobalConfig.jifengTiaoyueLg.st100665,this.replaceBtn.visible=!0,this.openTips.visible=!1,this.gotoLable.visible=!1;
else{this.gotoLable.visible=!0,this.openTips.visible=!0;var f=Math.floor(p.activationLevel/8),g=p.activationLevel%8;this.openTips.text=p.name+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100666,[f,g]),this.replaceBtn.visible=!1}}},t.prototype.updatePower=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole());this.powerLabel.text=e.hjPower},t.prototype.updataRoleRedPoint=function(){for(var e=0,t=SubRoles.ins().subRolesLen;t>e;++e)this.m_RoleSelectPanel.showRedPoint(e,ZhuanZhiModel.ins().zhuanZhiEquipRoleRedPqoint(e))},t.prototype.CheckRedPoint=function(){for(var e=0,t=SubRoles.ins().subRolesLen;t>e;++e)if(ZhuanZhiModel.ins().zhuanZhiEquipRoleRedPqoint(e))return!0;return!1},t.openCheck=function(){return Deblocking.Check(DeblockingType.TYPE_31)},t.prototype.onClickGetLab1=function(){UserWarn.ins().setBuyGoodsWarn(721001)},t.equipItemIndex=0,t}(BaseView);__reflect(ZhuanZhiEquipMainPanel.prototype,"ZhuanZhiEquipMainPanel",["eui.UIComponent","egret.DisplayObject","ICommonWindowTitle","ICommonWindowRoleSelect"]),window.ZhuanZhiEquipMainPanel=ZhuanZhiEquipMainPanel;var ZhuanZhiEquipReplaceItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ZhuanZhiEquipReplaceItemSkin",t.item.isShowName(!1),t.replaceBtn.addEventListener(egret.TouchEvent.TOUCH_END,t.replaceHandle,t),t}return __extends(t,e),t.prototype.replaceHandle=function(e){UserEquip.ins().sendWearEquipment(this.data.handle,ZhuanZhiEquipReplaceWin.equipPos,ZhuanZhiEquipReplaceWin.roleId),ViewManager.ins().close(ZhuanZhiEquipReplaceWin)},t.prototype.dataChanged=function(){var e=this.data;this.item.data=e;var t=GlobalConfig.itemConfig[e.configID];this.dec.text=GlobalConfig.jifengTiaoyueLg.st100809+ItemConfig.calculateBagItemScore(e);var i=t.zsLevel>0?" "+t.zsLevel+GlobalConfig.jifengTiaoyueLg.st100067:" LV"+t.level;this.equipName.text=t.name+i,this.equipName.textColor=ItemBase.QUALITY_COLOR[t.quality];var o=SubRoles.ins().getSubRoleByIndex(ZhuanZhiEquipReplaceWin.roleId),s=o.equipsData[ZhuanZhiEquipReplaceWin.equipPos];s&&s.item.configID>0?this.replaceBtn.label=GlobalConfig.jifengTiaoyueLg.st101148:this.replaceBtn.label=GlobalConfig.jifengTiaoyueLg.st100665},t}(eui.ItemRenderer);__reflect(ZhuanZhiEquipReplaceItem.prototype,"ZhuanZhiEquipReplaceItem"),window.ZhuanZhiEquipReplaceItem=ZhuanZhiEquipReplaceItem;var ZhuanZhiEquipReplaceWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ZhuanZhiEquipReplaceSkin",this.item.isShowName(!1),this.itemList.itemRenderer=ZhuanZhiEquipReplaceItem,this.tips.text=GlobalConfig.jifengTiaoyueLg.st100667,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100668},t.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.m_bg.init("ZhuanZhiEquipReplaceWin",GlobalConfig.jifengTiaoyueLg.st101148),t.roleId=e[0],t.equipPos=e[1]+EquipPos.MAX;var o=ZhuanZhiModel.ins().posToSubType[e[1]],s=SubRoles.ins().getSubRoleByIndex(t.roleId),n=s.equipsData[t.equipPos];if(n&&n.item.configID>0){this.currGroup.visible=!0,this.tips.visible=!1,this.item.data=n.item;var r=GlobalConfig.itemConfig[n.item.configID],a=r.zsLevel>0?" "+r.zsLevel+GlobalConfig.jifengTiaoyueLg.st100067:" LV"+r.level;this.equipName.text=r.name+a,this.equipName.textColor=ItemBase.QUALITY_COLOR[r.quality],this.dec.text=GlobalConfig.jifengTiaoyueLg.st100809+ItemConfig.calculateBagItemScore(n.item)}else this.currGroup.visible=!1,this.tips.visible=!0;var l=UserBag.ins().getBagGoodsByZhuanZhi(ItemType.ZHUANZHI,o,s.job);l.sort(UserBag.ins().sort1),this.itemList.dataProvider=new eui.ArrayCollection(l)},t.prototype.close=function(){},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.roleId=0,t.equipPos=0,t}(BaseEuiPanel);__reflect(ZhuanZhiEquipReplaceWin.prototype,"ZhuanZhiEquipReplaceWin"),ViewManager.ins().reg(ZhuanZhiEquipReplaceWin,LayerManager.UI_Popup),window.ZhuanZhiEquipReplaceWin=ZhuanZhiEquipReplaceWin;var ZhuanZhiEquipUpLevelPanel=function(e){function t(){var t=e.call(this)||this;return t.m_EquipGroup=[],t.skinName="ZhuanZhiEquipUpLevelPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.attrLabel.showBg();for(var i=0;6>i;++i)this.m_EquipGroup[i]=this["equip"+i],this.m_EquipGroup[i].mIndex=i;this.m_EquipGroup[t.equipItemIndex].selected=!0,this.putOnBtn.label=GlobalConfig.jifengTiaoyueLg.st100665,this.replaceBtn.label=GlobalConfig.jifengTiaoyueLg.st100318,this.upLevelBtn.label=GlobalConfig.jifengTiaoyueLg.st100208,this.gotoLable.label=GlobalConfig.jifengTiaoyueLg.st101077},t.prototype.open=function(){this.observe(MessageDef.ZHUANZHI_EQUIP_ITEM_SELECT,this.onEquipItemChange),this.observe(MessageDef.CHANGE_EQUIP,this.UpdateContent),this.observe(ZhuanZhiModel.ins().postZhuanZhiEquipUpLevel,this.UpdateContent),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateContent),this.observe(ZhuanZhiModel.ins().postZhuanZhiEquipPower,this.updatePower),this.addTouchEvent(this,this.onClick,this.replaceBtn),this.addTouchEvent(this,this.onClick,this.upLevelBtn),this.addTouchEvent(this,this.onClick,this.putOnBtn),this.addTouchEvent(this,this.onClick,this.getLable),this.addTouchEvent(this,this.onClick,this.gotoLable)},t.prototype.close=function(){},t.prototype.onClick=function(e){var i=this.m_RoleSelectPanel.getCurRole();switch(e.currentTarget){case this.upLevelBtn:ZhuanZhiModel.ins().sendZhuanZhiEquipUpLevel(i,t.equipItemIndex+EquipPos.MAX);break;case this.getLable:ViewManager.ins().open(BreakDownListview,760001,1e3);break;case this.gotoLable:ViewManager.ins().open(ZhuanZhiEquipWin,0,i);break;case this.putOnBtn:case this.replaceBtn:ViewManager.ins().open(ZhuanZhiEquipReplaceWin,i,t.equipItemIndex)}},t.prototype.onEquipItemChange=function(e){this.m_EquipGroup[t.equipItemIndex].selected=!1,this.m_EquipGroup[e].selected=!0,t.equipItemIndex=e,this.updataEquipInfo()},t.prototype.UpdateContent=function(){for(var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()),t=e.equipsData,i=0;i<this.m_EquipGroup.length;i++){var o=this.m_EquipGroup[i],s={};s.equip=t[i+EquipPos.MAX],s.job=e.job,s.roleIndex=this.m_RoleSelectPanel.getCurRole(),o.data=s,o.setShowRedPoint(ZhuanZhiModel.ins().canLevelZzEquipRedPoint(s.equip))}this.updataEquipInfo(),this.updatePower(),this.updataRoleRedPoint()},t.prototype.updataEquipInfo=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()),i=e.equipsData,o=i[t.equipItemIndex+EquipPos.MAX],s=ZhuanZhiModel.ins().getZhuanZhiEquipId(t.equipItemIndex,e.job);if(o.item&&o.item.configID>0){this.attrLabel.visible=!0;var n=GlobalConfig.ins("TransferEquipGrowUpConfig")[s][o.item.configID],r=ZhuanZhiModel.ins().getZhuanZhiEquipAttr(n,o.num2,5);if(r=AttributeData.removeZeroAttr(r),this.attrLabel.SetCurAttr(AttributeData.getAttStr(r,1)),o.num2<n.maxLevel){var a=ZhuanZhiModel.ins().getZhuanZhiEquipAttr(n,o.num2+1,5);a=AttributeData.removeZeroAttr(a),this.attrLabel.SetNextAttr(AttributeData.getAttStr(a,1))}this.consumeLabel.visible=!0,this.consumeLabel.consumeType=GlobalConfig.itemConfig[n.itemId1].name,this.consumeLabel.curValue=UserBag.ins().getBagGoodsCountById(0,n.itemId1),this.consumeLabel.consumeValue=1+Math.floor(o.num2/5),this.getLable.visible=!0,this.openTips.visible=!1,this.gotoLable.visible=!1,this.putOnBtn.visible=!1,this.replaceBtn.visible=!0,this.upLevelBtn.visible=!0}else{this.attrLabel.visible=!1,this.replaceBtn.visible=!1,this.upLevelBtn.visible=!1,this.consumeLabel.visible=!1,this.getLable.visible=!1;var l=GlobalConfig.ins("TransferEquipConfig")[s];if(e.zhuanZhiJm.level>=l.activationLevel)this.putOnBtn.visible=!0,this.openTips.visible=!1,this.gotoLable.visible=!1;else{this.putOnBtn.visible=!1,this.gotoLable.visible=!0,this.openTips.visible=!0;var h=Math.floor(l.activationLevel/8),c=l.activationLevel%8;this.openTips.text=l.name+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100666,[h,c])}}},t.prototype.updatePower=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole());this.powerLabel.text=e.hjPower},t.prototype.updataRoleRedPoint=function(){for(var e=0,t=SubRoles.ins().subRolesLen;t>e;++e)this.m_RoleSelectPanel.showRedPoint(e,ZhuanZhiModel.ins().zZEquipUpLevelRoleRedPqoint(e))},t.prototype.CheckRedPoint=function(){for(var e=0,t=SubRoles.ins().subRolesLen;t>e;++e)if(ZhuanZhiModel.ins().zZEquipUpLevelRoleRedPqoint(e))return!0;return!1},t.openCheck=function(){return Deblocking.Check(DeblockingType.TYPE_31)},t.equipItemIndex=0,t}(BaseView);__reflect(ZhuanZhiEquipUpLevelPanel.prototype,"ZhuanZhiEquipUpLevelPanel",["eui.UIComponent","egret.DisplayObject","ICommonWindowTitle","ICommonWindowRoleSelect"]),window.ZhuanZhiEquipUpLevelPanel=ZhuanZhiEquipUpLevelPanel;var ZhuanZhiEquipUpStarPanel=function(e){function t(){var t=e.call(this)||this;return t.m_EquipGroup=[],t.skinName="ZhuanZhiEquipUpStarPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.attrLabel.showBg();for(var i=0;6>i;++i)this.m_EquipGroup[i]=this["equip"+i],this.m_EquipGroup[i].mIndex=i;this.m_EquipGroup[t.equipItemIndex].selected=!0,this.putOnBtn.label=GlobalConfig.jifengTiaoyueLg.st100665,this.replaceBtn.label=GlobalConfig.jifengTiaoyueLg.st100318,this.upStarBtn.label=GlobalConfig.jifengTiaoyueLg.st101107,this.gotoLable.label=GlobalConfig.jifengTiaoyueLg.st101077},t.prototype.open=function(){this.observe(MessageDef.ZHUANZHI_EQUIP_ITEM_SELECT,this.onEquipItemChange),this.observe(MessageDef.CHANGE_EQUIP,this.UpdateContent),this.observe(ZhuanZhiModel.ins().postZhuanZhiEquipUpStar,this.UpdateContent),this.observe(ZhuanZhiModel.ins().postZhuanZhiEquipPower,this.updatePower),this.addTouchEvent(this,this.onClick,this.replaceBtn),this.addTouchEvent(this,this.onClick,this.upStarBtn),this.addTouchEvent(this,this.onClick,this.putOnBtn),this.addTouchEvent(this,this.onClick,this.getLable),this.addTouchEvent(this,this.onClick,this.gotoLable)},t.prototype.close=function(){},t.prototype.onClick=function(e){var i=this.m_RoleSelectPanel.getCurRole();switch(e.currentTarget){case this.upStarBtn:ZhuanZhiModel.ins().sendZhuanZhiEquipUpStar(i,t.equipItemIndex+EquipPos.MAX);break;case this.getLable:UserWarn.ins().setBuyGoodsWarn(760002);break;case this.gotoLable:ViewManager.ins().open(ZhuanZhiEquipWin,0,i);break;case this.putOnBtn:case this.replaceBtn:ViewManager.ins().open(ZhuanZhiEquipReplaceWin,i,t.equipItemIndex)}},t.prototype.onEquipItemChange=function(e){this.m_EquipGroup[t.equipItemIndex].selected=!1,this.m_EquipGroup[e].selected=!0,t.equipItemIndex=e,this.updataEquipInfo()},t.prototype.UpdateContent=function(){for(var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()),t=e.equipsData,i=0;i<this.m_EquipGroup.length;i++){var o=this.m_EquipGroup[i],s={};s.equip=t[i+EquipPos.MAX],s.job=e.job,s.roleIndex=this.m_RoleSelectPanel.getCurRole(),o.data=s,o.setShowRedPoint(ZhuanZhiModel.ins().canStarZzEquipRedPoint(s.equip))}this.updataEquipInfo(),this.updatePower(),this.updataRoleRedPoint()},t.prototype.updatePower=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole());this.powerLabel.text=e.hjPower},t.prototype.updataEquipInfo=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole()),i=e.equipsData,o=i[t.equipItemIndex+EquipPos.MAX],s=ZhuanZhiModel.ins().getZhuanZhiEquipId(t.equipItemIndex,e.job);if(o.item&&o.item.configID>0){this.attrLabel.visible=!0;var n=GlobalConfig.ins("TransferEquipStarConfig")[s][o.item.configID],r=ZhuanZhiModel.ins().getZhuanZhiEquipAttr(n,o.star,4);if(r=AttributeData.removeZeroAttr(r),this.attrLabel.SetCurAttr(AttributeData.getAttStr(r,1)),o.star<n.maxLevel){var a=ZhuanZhiModel.ins().getZhuanZhiEquipAttr(n,o.star+1,4);a=AttributeData.removeZeroAttr(a),this.attrLabel.SetNextAttr(AttributeData.getAttStr(a,1))}this.consumeLabel.visible=!0,this.consumeLabel.consumeType=GlobalConfig.itemConfig[n.itemId1].name,this.consumeLabel.curValue=UserBag.ins().getBagGoodsCountById(0,n.itemId1),this.consumeLabel.consumeValue=1+Math.floor((o.star+1)/4),this.getLable.visible=!0,this.openTips.visible=!1,this.gotoLable.visible=!1,this.putOnBtn.visible=!1,this.replaceBtn.visible=!0,this.upStarBtn.visible=!0}else{this.attrLabel.visible=!1,this.replaceBtn.visible=!1,this.upStarBtn.visible=!1,this.consumeLabel.visible=!1,this.getLable.visible=!1;var l=GlobalConfig.ins("TransferEquipConfig")[s];if(e.zhuanZhiJm.level>=l.activationLevel)this.putOnBtn.visible=!0,this.openTips.visible=!1,this.gotoLable.visible=!1;else{this.putOnBtn.visible=!1,this.gotoLable.visible=!0,this.openTips.visible=!0;var h=Math.floor(l.activationLevel/8),c=l.activationLevel%8;this.openTips.text=l.name+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100666,[h,c])}}},t.prototype.updataRoleRedPoint=function(){for(var e=0,t=SubRoles.ins().subRolesLen;t>e;++e)this.m_RoleSelectPanel.showRedPoint(e,ZhuanZhiModel.ins().zZEquipUpStarRoleRedPoint(e))},t.prototype.CheckRedPoint=function(){for(var e=0,t=SubRoles.ins().subRolesLen;t>e;++e)if(ZhuanZhiModel.ins().zZEquipUpStarRoleRedPoint(e))return!0;return!1},t.openCheck=function(){return Deblocking.Check(DeblockingType.TYPE_31)},t.equipItemIndex=0,t}(BaseView);__reflect(ZhuanZhiEquipUpStarPanel.prototype,"ZhuanZhiEquipUpStarPanel",["eui.UIComponent","egret.DisplayObject","ICommonWindowTitle","ICommonWindowRoleSelect"]),window.ZhuanZhiEquipUpStarPanel=ZhuanZhiEquipUpStarPanel;var ZhuanZhiEquipWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="ZhuanZhiEquipWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){this.zhuanZhiPanel||(this.zhuanZhiPanel=new ZhuanZhiPanel,this.zhuanZhiPanel.name=GlobalConfig.jifengTiaoyueLg.st100649,this.commonWindowBg.AddChildStack(this.zhuanZhiPanel)),this.zhuanZhiEquipMainPanel||(this.zhuanZhiEquipMainPanel=new ZhuanZhiEquipMainPanel,this.zhuanZhiEquipMainPanel.name=GlobalConfig.jifengTiaoyueLg.st100652,this.commonWindowBg.AddChildStack(this.zhuanZhiEquipMainPanel)),this.zhuanZhiEquipUpLevelPanel||(this.zhuanZhiEquipUpLevelPanel=new ZhuanZhiEquipUpLevelPanel,this.zhuanZhiEquipUpLevelPanel.name=GlobalConfig.jifengTiaoyueLg.st100208,this.commonWindowBg.AddChildStack(this.zhuanZhiEquipUpLevelPanel)),this.zhuanZhiEquipUpStarPanel||(this.zhuanZhiEquipUpStarPanel=new ZhuanZhiEquipUpStarPanel,this.zhuanZhiEquipUpStarPanel.name=GlobalConfig.jifengTiaoyueLg.st101107,this.commonWindowBg.AddChildStack(this.zhuanZhiEquipUpStarPanel))},t.prototype.destoryView=function(){e.prototype.destoryView.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0]||0,o=e[1]||0;this.commonWindowBg.OnAdded(this,i,o),this.equipBG.visible=i&&i>0,this.observe(MessageDef.CHANGE_EQUIP,this.refushRed),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.refushRed),this.refushRed()},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.openCheck=function(e){var t=void 0==e[0]?0:e[0];return 0==t?Deblocking.Check(DeblockingType.TYPE_30):Deblocking.Check(DeblockingType.TYPE_31)},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return this.equipBG.visible=e&&e>0,!0},t.prototype.UpdateContent=function(){},t.prototype.refushRed=function(){this.commonWindowBg.CheckTabRedPoint()},t}(BaseEuiPanel);__reflect(ZhuanZhiEquipWin.prototype,"ZhuanZhiEquipWin",["ICommonWindow"]),ViewManager.ins().reg(ZhuanZhiEquipWin,LayerManager.UI_Main),window.ZhuanZhiEquipWin=ZhuanZhiEquipWin;var ZhuanZhiJmAttrWin=function(e){function t(){var t=e.call(this)||this;return t._lastX=0,t.attrJob=["","attr_zs","attr_fs","attr_ds"],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ZhuanZhiJmAttrWinSkin",this.skillList.itemRenderer=ZhuanZhiJmSkillItem,this.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st101840,this.m_Lan2.text=GlobalConfig.jifengTiaoyueLg.st100095,this.closeBtn.label=GlobalConfig.jifengTiaoyueLg.st101841},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.curRole=e[0],this.setRoleAttr(this.curRole),this.AddClick(this.leftBtn,this.onTouch),this.AddClick(this.rightBtn,this.onTouch),this.AddClick(this.closeBtn,this.tapFun),this.observe(ZhuanZhiModel.ins().postZhuanZhiJmSkill,this.updateSkillList),ZhuanZhiModel.ins().sendZhuanZhiJmSkill(this.curRole)},t.prototype.close=function(){e.prototype.close.call(this),this.removeEvents(),this.removeObserve()},t.prototype.tapFun=function(e){ViewManager.ins().close(t)},t.prototype.moveAttr=function(e){var t,i=this,o=egret.Tween.get(this.attrGroup);t=e>0?0:242,o.to({x:this.attrGroup.x+e,alpha:0},200).to({x:t},200).to({x:214,alpha:1},200).call(function(){egret.Tween.removeTweens(i.attrGroup)})},t.prototype.onTouch=function(e){switch(e.currentTarget){case this.leftBtn:this.setRoleAttr(--this.curRole),this.moveAttr(200);break;case this.rightBtn:this.setRoleAttr(++this.curRole),this.moveAttr(-200)}ZhuanZhiModel.ins().sendZhuanZhiJmSkill(this.curRole)},t.prototype.setRoleAttr=function(e){var t=SubRoles.ins().getSubRoleByIndex(e),i=[GlobalConfig.jifengTiaoyueLg.st100111,GlobalConfig.jifengTiaoyueLg.st100112,GlobalConfig.jifengTiaoyueLg.st100113];this.job.text=i[t.job-1];var o=this.attrJob[t.job],s=GlobalConfig.meridianStageConfig[t.zhuanZhiJm.stage],n=GlobalConfig.meridianLevelConfig[t.zhuanZhiJm.level];this.attr.text=AttributeData.getAttStr(AttributeData.AttrAddition(s[o],n[o]),1),this.setBtn()},t.prototype.updateSkillList=function(e){this.skillList.dataProvider=new eui.ArrayCollection(e)},t.prototype.setBtn=function(){var e=SubRoles.ins().subRolesLen;1==e?(this.leftBtn.visible=!1,this.rightBtn.visible=!1):e>1&&(0==this.curRole?(this.leftBtn.visible=!1,this.rightBtn.visible=!0):1==this.curRole?(this.leftBtn.visible=!0,3>e?this.rightBtn.visible=!1:this.rightBtn.visible=!0):2==this.curRole&&(this.leftBtn.visible=!0,this.rightBtn.visible=!1))},t}(BaseEuiPanel);__reflect(ZhuanZhiJmAttrWin.prototype,"ZhuanZhiJmAttrWin"),ViewManager.ins().reg(ZhuanZhiJmAttrWin,LayerManager.UI_Popup);var ZhuanZhiJmSkillItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ZhuanZhiJmSkillItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=GlobalConfig.skillsConfig[this.data];this.icon.source=e.icon+"_png",this.title.text=e.skinName+" LV."+e.displayLevel,this.desc.text=e.desc},t}(eui.ItemRenderer);__reflect(ZhuanZhiJmSkillItem.prototype,"ZhuanZhiJmSkillItem"),window.ZhuanZhiJmAttrWin=ZhuanZhiJmAttrWin,window.ZhuanZhiJmSkillItem=ZhuanZhiJmSkillItem;var ZhuanZhiJmPanel=function(e){function t(t){var i=e.call(this)||this;return i.pointList=[],i.lineList=[],i.isClick=!1,i.attrJob=["","attr_zs","attr_fs","attr_ds"],i.skillJob=["","skillid_zs","skillid_fs","skillid_ds"],i.skinName="ZhuanZhiJmPanelSkin",i.m_RoleSelectPanel=t,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);for(var t=0;8>t;t++)this.pointList.push(this["point"+t]),this["line"+t]&&this.lineList.push(this["line"+t]);this.rect=new egret.Rectangle(-45,-45,100,100),this.checkAttr.text=GlobalConfig.jifengTiaoyueLg.st100095,this.maxTips.text=GlobalConfig.jifengTiaoyueLg.st100654},t.prototype.open=function(){this.initMc(),this.addTouchEvent(this,this.onTap,this.upLevelBtn),this.addTouchEvent(this,this.seeAttr,this.checkAttr),this.addTouchEvent(this,this.getXiuwei,this.link),this.addTouchEvent(this,this.onIconTap,this.icon8),this.addTouchEvent(this,this.onIconTap,this.icon5),this.addTouchEvent(this,this.onIconTap,this.icon2),this.observe(ZhuanZhiModel.ins().postZhuanZhiJmUpdate,this.UpdateContent),this.observe(UserZs.ins().postZsData,this.UpdateContent),UIHelper.SetLinkStyleLabel(this.checkAttr)},t.prototype.close=function(){DisplayUtils.dispose(this.zhenqiMc),this.zhenqiMc.mask=null,this.zhenqiMc=null,this.rect=null,this.removeEvents(),this.removeObserve();for(var e=0,t=this.groupStars.numChildren;t>e;e++){var i=this.groupStars.getChildAt(e);i&&egret.Tween.removeTweens(i)}},t.prototype.initMc=function(){this.zhenqiMc||(this.zhenqiMc=new MovieClip,this.zhenqiMc.x=this.groupEffect.width/2,this.zhenqiMc.y=this.groupEffect.height/2,this.groupEffect.addChild(this.zhenqiMc)),this.zhenqiMc.loadUrl(ResDataPath.GetUIEffePath("eff_changejob"),!0,-1)},t.prototype.onTap=function(e){this.isClick=!0,ZhuanZhiModel.ins().sendZhuanZhiJmUpLevel(this.curRole),this.upLevelBtn.label==GlobalConfig.jifengTiaoyueLg.st100242&&ZhuanZhiModel.ins().sendZhuanZhiJmUpGrade(this.curRole)},t.prototype.seeAttr=function(e){ViewManager.ins().open(ZhuanZhiJmAttrWin,this.curRole)},t.prototype.getXiuwei=function(e){ViewManager.ins().open(GainZsWin)},t.prototype.onIconTap=function(e){var t=e.currentTarget.id;t>0||ViewManager.ins().open(ZhuanZhiEquipWin,1)},t.prototype.UpdateContent=function(){var e=SubRoles.ins().getSubRoleByIndex(this.curRole),t=e.zhuanZhiJm,i=this.attrJob[e.job],o=GlobalConfig.meridianStageConfig[t.stage],s=GlobalConfig.meridianLevelConfig[t.level];this.attrLabel.SetCurAttr(AttributeData.getAttStr(AttributeData.AttrAddition(o[i],s[i]),1)),this.powerLabel.text=e.jMPower;var n=t.level/8-o.stage,r=t.level%8;1==n&&(r=8);for(var a=0;8>a;++a)this.pointList[a].visible=r>a,this.lineList[a]&&(this.lineList[a].visible=r-1>a);if(o.stage<GlobalConfig.ins("MeridianCommonConfig").stageMax){var l=void 0,h=void 0;t.level>0&&t.level%8==0&&n?(l=GlobalConfig.meridianStageConfig[t.stage+1],h=s):(l=o,h=GlobalConfig.meridianLevelConfig[t.level+1]),this.attrLabel.SetNextAttr(AttributeData.getAttStr(AttributeData.AttrAddition(l[i],h[i]),1)),this.upLevelBtn.visible=!0,this.consumeLabel.visible=!0,this.consumeLabel1.visible=!0,this.maxTips.visible=!1,t.level>0&&t.level%8==7?this.upLevelBtn.label=GlobalConfig.jifengTiaoyueLg.st100242:this.upLevelBtn.label=GlobalConfig.jifengTiaoyueLg.st100208}else this.upLevelBtn.visible=!1,this.consumeLabel.visible=!1,this.consumeLabel1.visible=!1,this.maxTips.visible=!0,n=1;this.xiuwei.text=UserZs.ins().exp+"\n"+GlobalConfig.jifengTiaoyueLg.st100266,this.stages.text=t.stage+GlobalConfig.jifengTiaoyueLg.st100103+r+GlobalConfig.jifengTiaoyueLg.st100093,this.consumeLabel.consumeType=GlobalConfig.jifengTiaoyueLg.st100266,this.consumeLabel.curValue=UserZs.ins().exp,this.consumeLabel.consumeValue=s.rankUpItem[0].count,this.consumeLabel1.consumeType=GlobalConfig.jifengTiaoyueLg.st100018,this.consumeLabel1.curValue=GameLogic.ins().actorModel.gold,this.consumeLabel1.consumeValue=s.rankUpItem[1].count;var c=1-UserZs.ins().exp/15e4;this.rect.y=-45+90*(c>0?c:0),this.zhenqiMc.mask=this.rect,this.updateJmIcon(t,e.job),this.updataRoleRedPoint()},t.prototype._playLevelUpAni=function(e){var t=this,i=this;if(0==e)for(var o=function(e,o){var s=i.groupStars.getChildAt(e);s.visible=!0,s.scaleX=3,s.scaleY=3,egret.Tween.get(s).to({scaleX:1,scaleY:1},350).call(function(){egret.Tween.removeTweens(s),s.visible=!1,t.isClick=!1})},s=0,n=i.groupStars.numChildren;n>s;s++)o(s,n);else{for(var s=0,n=i.groupStars.numChildren;n>s;s++){var r=i.groupStars.getChildAt(s);r.visible=e>s}var a=0==e?0:e-1,l=i.groupStars.getChildAt(a);l.scaleX=3,l.scaleY=3,egret.Tween.get(l).to({scaleX:1,scaleY:1},200).call(function(){egret.Tween.removeTweens(l),t.isClick=!1})}},t.prototype.updateJmIcon=function(e,t){var i=8*e.stage+2,o=8*e.stage+5,s=8*e.stage+8,n=GlobalConfig.meridianLevelConfig[i],r=GlobalConfig.meridianLevelConfig[o],a=GlobalConfig.meridianLevelConfig[s],l=this.skillJob[t];if(n&&(n[l]||n.equip_id)){this.cbLine2.visible=!0,this.icon2.visible=!0,this.icon2.id=-1,n[l]&&(this.icon2.id=n[l].length>1?n[l][1]:n[l][0]);var h=this.getJmIconInfo(n[l],n.equip_id,t);this.icon2.icon.source=h.res,e.level>=i?(this.cbLine2.selected=!0,this.icon2.title.text=h.title,this.icon2.lock.visible=!1):(this.cbLine2.selected=!1,this.icon2.title.text=i+GlobalConfig.jifengTiaoyueLg.st100310,this.icon2.lock.visible=!0)}else this.cbLine2.visible=!1,this.icon2.visible=!1;if(r&&(r[l]||r.equip_id)){this.cbLine5.visible=!0,this.icon5.visible=!0,this.icon5.id=-1,r[l]&&(this.icon5.id=r[l].length>1?r[l][1]:r[l][0]);var h=this.getJmIconInfo(r[l],r.equip_id,t);if(this.icon5.icon.source=h.res,e.level>=o){this.cbLine5.selected=!0;var c=this.getJmIconInfo(r[l],r.equip_id,t);this.icon5.title.text=c.title,this.icon5.lock.visible=!1}else this.cbLine5.selected=!1,this.icon5.title.text=o+GlobalConfig.jifengTiaoyueLg.st100310,this.icon5.lock.visible=!0}else this.cbLine5.visible=!1,this.icon5.visible=!1;if(a&&(a[l]||a.equip_id)){this.cbLine8.visible=!0,this.icon8.visible=!0,this.icon8.id=-1,a[l]&&(this.icon8.id=a[l].length>1?a[l][1]:a[l][0]);var h=this.getJmIconInfo(a[l],a.equip_id,t);this.icon8.icon.source=h.res,e.level>=s?(this.cbLine8.selected=!0,this.icon8.title.text=h.title,this.icon8.lock.visible=!1):(this.cbLine8.selected=!1,this.icon8.title.text=s+GlobalConfig.jifengTiaoyueLg.st100310,this.icon8.lock.visible=!0)}else this.cbLine8.visible=!1,this.icon8.visible=!1},t.prototype.getJmIconInfo=function(e,t,i){var o={};if(t){var s=t[i-1],n=GlobalConfig.ins("TransferEquipGrowUpConfig")[s],r=GlobalConfig.ins("TransferEquipConfig")[s],a=void 0;for(var l in n){a=parseInt(l);break}var h=GlobalConfig.itemConfig[a];return o.res=h.icon+"_png",o.title=r.name,o}if(e){var s=e.length>1?e[1]:e[0],c=GlobalConfig.skillsConfig[s];return o.res=c.icon+"_png",o.title=c.skinName,o}},Object.defineProperty(t.prototype,"curRole",{get:function(){return this.m_RoleSelectPanel.getCurRole()},enumerable:!0,configurable:!0}),t.prototype.updataRoleRedPoint=function(){for(var e=0,t=SubRoles.ins().subRolesLen;t>e;++e)this.m_RoleSelectPanel.showRedPoint(e,ZhuanZhiModel.ins().zhuanZhiJmRoleRedPqoint(e))},t}(BaseView);__reflect(ZhuanZhiJmPanel.prototype,"ZhuanZhiJmPanel",["eui.UIComponent","egret.DisplayObject","ICommonWindowTitle","ICommonWindowRoleSelect"]);var JmIcon=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(eui.Component);__reflect(JmIcon.prototype,"JmIcon"),window.ZhuanZhiJmPanel=ZhuanZhiJmPanel,window.JmIcon=JmIcon;var ZhuanZhiModel=function(e){function t(){var t=e.call(this)||this;return t.zhuanZhiTaskList=[],t.tfItemIndex=0,t.zhuanZhiTfList=[],t.posToSubType=[EquipType.SHOULDER,EquipType.UNDERCLOTHES,EquipType.ASSISTANT,EquipType.BELT,EquipType.KNEE,EquipType.PENDANT],t.regNetMsg(S2cProtocol.sc_zhuanzhi_tasklist,t.doZhuanZhiTaskList),t.regNetMsg(S2cProtocol.sc_zhuanzhi_uplevel_result,t.doZhuanZhiUpLevelResult),t.regNetMsg(S2cProtocol.sc_zhuanzhi_jingmai_boost,t.doZhuanZhiJmUpLevel),t.regNetMsg(S2cProtocol.sc_zhuanzhi_jingmai_upgrade,t.doZhuanZhiJmUpGrade),t.regNetMsg(S2cProtocol.sc_equip_zhuanzhi_skill,t.seeZhuanZhiJmSkill),t.regNetMsg(S2cProtocol.sc_zhuanzhi_talent_init,t.doZhuanZhiTfInIt),t.regNetMsg(S2cProtocol.sc_zhuanzhi_talent_upgrade,t.doZhuanZhiTfUpLevel),t.regNetMsg(S2cProtocol.sc_equip_lvl_upgrade,t.doZhuanZhiEquipUpLevel),t.regNetMsg(S2cProtocol.sc_equip_star_upgrade,t.doZhuanZhiEquipUpStar),t.regNetMsg(S2cProtocol.sc_equip_zhuanzhi_power,t.doZhuanZhiEquipPower),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.zhuanZhiIsRed=function(){return this.zhuanZhiJmTabRedPoint()||this.zhuanZhiTfTabRedPoint()},t.prototype.sendZhuanZhiTaskList=function(){this.Rpc(C2sProtocol.cs_zhuanzhi_tasklist_req,new Sproto.cs_zhuanzhi_tasklist_req_request)},t.prototype.doZhuanZhiTaskList=function(e){for(var t=SubRoles.ins().subRolesLen,i=0;t>i;i++)null==this.zhuanZhiTaskList[i]&&(this.zhuanZhiTaskList[i]=new ZhuanZhiTaskInfo),this.zhuanZhiTaskList[i].parse(e.data[i]);GameGlobal.MessageCenter.dispatch(MessageDef.ZHUANZHI_TASKLIST)},t.prototype.sendZhuanZhiDonate=function(e,t,i){var o=new Sproto.cs_zhuanzhi_donate_request;o.itemid=e,o.count=t,o.roleid=i,this.Rpc(C2sProtocol.cs_zhuanzhi_donate,o)},t.prototype.sendZhuanZhiEnterRaid=function(e,t){var i=new Sproto.cs_zhuanzhi_enter_raid_request;i.roleid=e,i.taskid=t,this.Rpc(C2sProtocol.cs_zhuanzhi_enter_raid,i)},t.prototype.sendZhuanZhiActive=function(e){var t=new Sproto.cs_zhuanzhi_active_request;t.roleid=e,this.Rpc(C2sProtocol.cs_zhuanzhi_active,t)},t.prototype.doZhuanZhiUpLevelResult=function(e){UserTips.InfoTip(GlobalConfig.jifengTiaoyueLg.st101842),this.zhuanZhiTaskList[e.data.roleid].parse(e.data),GameGlobal.MessageCenter.dispatch(MessageDef.ZHUANZHI_UPLEVEL_RESULT);var t=EntityManager.ins().getMainRole(e.data.roleid);t&&t.updateModel()},t.prototype.getZhuanZhiTaskData=function(e){return this.zhuanZhiTaskList[e]?this.zhuanZhiTaskList[e].task:null},t.prototype.getZhuanZhiLevel=function(e){return this.zhuanZhiTaskList[e]?this.zhuanZhiTaskList[e].level:0},t.prototype.canZhuanZhi=function(){for(var e=SubRoles.ins().subRolesLen,t=0;e>t;t++)if(this.canZhuanZhiByRoleId(t))return!0;return!1},t.prototype.canZhuanZhiByRoleId=function(e,t){void 0===t&&(t=!1);var i=this.zhuanZhiTaskList[e];if(!i)return!1;var o=this.getZhuanZhiLevel(e);if(o>=GlobalConfig.ins("TransferConfig").maxZzlevel)return t&&UserTips.InfoTip(GlobalConfig.jifengTiaoyueLg.st100996),!1;var s=GlobalConfig.ins("TransferConfig").zslevel;if(!Checker.Level(s[o],null,!1))return t&&UserTips.InfoTip(LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st101830,[s[o]])),!1;for(var n=0,r=i.task;n<r.length;n++){var a=r[n];if(0==a.state)return t&&UserTips.InfoTip(GlobalConfig.jifengTiaoyueLg.st101829),!1}return!0},t.prototype.zhuanZhiTaskIsOpen=function(e){var t=this.getZhuanZhiLevel(e),i=GlobalConfig.ins("TransferConfig").zslevel;return Checker.Level(i[t],null,!1)?!0:!1},t.prototype.showZhuanZhiTaskIcon=function(){for(var e=SubRoles.ins().subRolesLen,t=0;e>t;t++){var i=this.getZhuanZhiLevel(t);if(i<GlobalConfig.ins("TransferConfig").maxZzlevel)return!0}return!1},t.prototype.hasZhuanZhiRole=function(){for(var e=SubRoles.ins().subRolesLen,t=0;e>t;t++){var i=this.getZhuanZhiLevel(t);if(i>0)return!0}return!1},t.prototype.sendZhuanZhiJmUpLevel=function(e){var t=new Sproto.cs_zhuanzhi_jingmai_boost_request;t.roleID=e,this.Rpc(C2sProtocol.cs_zhuanzhi_jingmai_boost,t)},t.prototype.sendZhuanZhiJmUpGrade=function(e){var t=new Sproto.cs_zhuanzhi_jingmai_upgrade_request;t.roleID=e,this.Rpc(C2sProtocol.cs_zhuanzhi_jingmai_upgrade,t)},t.prototype.isNotLevelUp=function(e){if(0==e.data.level&&0==e.data.stage)return!0;var t=SubRoles.ins().getSubRoleByIndex(e.index).zhuanZhiJm;return t.level==e.data.level&&t.stage==e.data.stage?!0:!1},t.prototype.doZhuanZhiJmUpLevel=function(e){this.isNotLevelUp(e)||(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100638),this.doUpData(e))},t.prototype.doZhuanZhiJmUpGrade=function(e){this.isNotLevelUp(e)||(UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100904),this.doUpData(e))},t.prototype.doUpData=function(e){var t=e.index;SubRoles.ins().getSubRoleByIndex(t).zhuanZhiJm.parser(e.data),this.postZhuanZhiJmUpdate()},t.prototype.postZhuanZhiJmUpdate=function(){},t.prototype.sendZhuanZhiJmSkill=function(e){var t=new Sproto.cs_equip_zhuanzhi_skill_request;t.roleid=e,this.Rpc(C2sProtocol.cs_equip_zhuanzhi_skill,t)},t.prototype.seeZhuanZhiJmSkill=function(e){this.postZhuanZhiJmSkill(e)},t.prototype.postZhuanZhiJmSkill=function(e){return e.skill},t.prototype.zhuanZhiJmTabRedPoint=function(){for(var e=0,t=SubRoles.ins().subRolesLen;t>e;++e)if(this.zhuanZhiJmRoleRedPqoint(e))return!0;return!1},t.prototype.zhuanZhiJmRoleRedPqoint=function(e){var t=SubRoles.ins().getSubRoleByIndex(e),i=t.zhuanZhiJm,o=this.getZhuanZhiLevel(e);if(o<GlobalConfig.ins("TransferConfig").openLevel_jm)return!1;if(i.level>=GlobalConfig.ins("MeridianCommonConfig").limitLevel)return!1;var s=GlobalConfig.meridianLevelConfig[i.level];return Checker.Money(s.rankUpItem[0].id,s.rankUpItem[0].count,!1)&&Checker.Money(s.rankUpItem[1].id,s.rankUpItem[1].count,!1)?!0:!1},t.prototype.doZhuanZhiTfInIt=function(e){for(var t=SubRoles.ins().subRolesLen,i=0;t>i;i++)null==this.zhuanZhiTfList[i]&&(this.zhuanZhiTfList[i]=new ZhuanZhiTfInfo),this.zhuanZhiTfList[i].parse(e.data[i])},t.prototype.sendZhuanZhiTfUpLevel=function(e,t){var i=new Sproto.cs_zhuanzhi_talent_upgrade_request;
i.roleid=e,i.skillid=t,this.Rpc(C2sProtocol.cs_zhuanzhi_talent_upgrade,i)},t.prototype.doZhuanZhiTfUpLevel=function(e){UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100638),this.doUpDataTf(e)},t.prototype.doUpDataTf=function(e){var t=this.zhuanZhiTfList[e.roleid];t.roleid=e.roleid,t.power=e.power;for(var i=0,o=t.list;i<o.length;i++){var s=o[i];if(s.skillid==e.skillid){s.level=e.level;break}}this.postZhuanZhiTfUpdate()},t.prototype.postZhuanZhiTfUpdate=function(){},t.prototype.getTfLevelById=function(e){for(var t=SubRoles.ins().subRolesLen,i=0;t>i;i++)for(var o=this.zhuanZhiTfList[i],s=0,n=o.list;s<n.length;s++){var r=n[s];if(e==r.skillid)return r.level}},t.prototype.isOpenZhuanZhiTf=function(){for(var e=!1,t=SubRoles.ins().subRolesLen,i=0;t>i;i++)if(this.isOpenZhuanZhiTfByRoleId(i)){e=!0;break}return e},t.prototype.isOpenZhuanZhiTfByRoleId=function(e){var i=GlobalConfig.ins("TransferConfig"),o=t.ins().getZhuanZhiLevel(e);return o>=i.openLevel_tf},t.prototype.zhuanZhiTfTabRedPoint=function(){for(var e=0,t=SubRoles.ins().subRolesLen;t>e;++e)if(this.zhuanZhiTfRoleRedPqoint(e))return!0;return!1},t.prototype.zhuanZhiTfRoleRedPqoint=function(e){if(!this.isOpenZhuanZhiTfByRoleId(e))return!1;var i=this.zhuanZhiTfList[e];if(i&&i.list)for(var o=0,s=i.list;o<s.length;o++){var n=s[o],r=GlobalConfig.transferTalentConfig[n.skillid];if(r&&r[n.level+1]){var a=r[n.level];if(Checker.Money(a.rankUpItem[0].id,a.rankUpItem[0].count,!1)&&Checker.Money(a.rankUpItem[1].id,a.rankUpItem[1].count,!1)){var l=a.condition.length,h=!0;if(n.level<=0&&l>0)for(var c=0;l>c;c++){var u=a.condition[c][0],d=a.condition[c][1],p=t.ins().getTfLevelById(u);if(d>p){h=!1;break}}if(h)return!0}}}return!1},t.prototype.getZhuanZhiEquipId=function(e,t){return 100*t+this.posToSubType[e]},t.prototype.sendZhuanZhiEquipUpLevel=function(e,t){var i=new Sproto.cs_equip_lvl_upgrade_request;i.roleid=e,i.pos=t,this.Rpc(C2sProtocol.cs_equip_lvl_upgrade,i)},t.prototype.sendZhuanZhiEquipUpStar=function(e,t){var i=new Sproto.cs_equip_star_upgrade_request;i.roleid=e,i.pos=t,this.Rpc(C2sProtocol.cs_equip_star_upgrade,i)},t.prototype.doZhuanZhiEquipUpLevel=function(e){UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100638);var t=SubRoles.ins().getSubRoleByIndex(e.roleid);t.hjPower=e.power;var i=t.equipsData[e.pos];i.num2=e.value,this.postZhuanZhiEquipUpLevel()},t.prototype.postZhuanZhiEquipUpLevel=function(){},t.prototype.doZhuanZhiEquipUpStar=function(e){UserTips.ins().showTips("升星成功");var t=SubRoles.ins().getSubRoleByIndex(e.roleid);t.hjPower=e.power;var i=t.equipsData[e.pos];i.star=e.value,this.postZhuanZhiEquipUpStar()},t.prototype.postZhuanZhiEquipUpStar=function(){},t.prototype.doZhuanZhiEquipPower=function(e){var t=SubRoles.ins().getSubRoleByIndex(e.roleID);e.type?1==e.type?t.hjPower=e.power:t.jMPower=e.power:t.hjPower=e.power,this.postZhuanZhiEquipPower()},t.prototype.postZhuanZhiEquipPower=function(){},t.prototype.getZhuanZhiEquipAttr=function(e,t,i){var o=AttributeData.getNowPower(0,t,0,i,e.price,e.basiccon,e.increasecon,e.slope,e.revisecon),s=AttributeData.getAttrByPower(e.maxHp,e.maxAtk,e.maxDef,e.maxMagDef,o);return s},t.prototype.getZhuanZhiEquipBaseAttr=function(e){var t=[];if(e){var i=GlobalConfig.equipConfig[e.configID];for(var o in Role.translate)if(!(i[o]<=0)){var s=new AttributeData;s.type=Role.getAttrTypeByName(o),s.value=i[o];for(var n=e.att,r=0;r<n.length;r++)if(n[r].type==Role.getAttrTypeByName(o)){s.value+=n[r].value;break}t.push(s)}}return t},t.prototype.canMountZzEquipRedPoint=function(e,i){var o=t.ins().posToSubType[e],s=t.ins().getZhuanZhiEquipId(e,i.job),n=GlobalConfig.ins("TransferEquipConfig")[s];if(i.zhuanZhiJm.level<n.activationLevel)return!1;var r=UserBag.ins().bagModel[UserBag.BAG_TYPE_EQUIP];for(var a in r)if(r[a].itemConfig.type==ItemType.ZHUANZHI&&r[a].itemConfig.subType==o&&r[a].itemConfig.job==i.job&&Checker.Level(r[a].itemConfig.zsLevel,r[a].itemConfig.level,!1))return!0;return!1},t.prototype.canReplaceZzEquipRedPoint=function(e){var t=UserBag.ins().bagModel[UserBag.BAG_TYPE_EQUIP],i=ItemConfig.calculateBagItemScore(e);for(var o in t){var s=t[o];if(s.itemConfig.type==ItemType.ZHUANZHI&&s.itemConfig.subType==e.itemConfig.subType&&s.itemConfig.job==e.itemConfig.job&&Checker.Level(s.itemConfig.zsLevel,s.itemConfig.level,!1)){var n=ItemConfig.calculateBagItemScore(s);if(n>i)return!0}}return!1},t.prototype.zhuanZhiEquipRoleRedPqoint=function(e){for(var t=SubRoles.ins().getSubRoleByIndex(e),i=t.equipsData,o=0;6>o;o++){var s=i[o+EquipPos.MAX];if(s&&s.item)if(s.item.configID>0){if(this.canReplaceZzEquipRedPoint(s.item))return!0}else if(this.canMountZzEquipRedPoint(o,t))return!0}return!1},t.prototype.canLevelZzEquipRedPoint=function(e){if(e&&e.item&&e.item.configID>0&&e.num2<200){var t=UserBag.ins().getBagGoodsCountById(0,760001),i=1+Math.floor(e.num2/2);if(t>=i)return!0}return!1},t.prototype.zZEquipUpLevelRoleRedPqoint=function(e){for(var t=SubRoles.ins().getSubRoleByIndex(e),i=t.equipsData,o=0;6>o;o++){var s=i[o+EquipPos.MAX];if(this.canLevelZzEquipRedPoint(s))return!0}return!1},t.prototype.canStarZzEquipRedPoint=function(e){if(e&&e.item&&e.item.configID>0&&e.star<10){var t=UserBag.ins().getBagGoodsCountById(0,760002),i=3*(e.star+1);if(t>=i)return!0}return!1},t.prototype.zZEquipUpStarRoleRedPoint=function(e){for(var t=SubRoles.ins().getSubRoleByIndex(e),i=t.equipsData,o=0;6>o;o++){var s=i[o+EquipPos.MAX];if(this.canStarZzEquipRedPoint(s))return!0}return!1},t.prototype.zhuanZhiEquipAllRedPoint=function(){if(!Deblocking.Check(DeblockingType.TYPE_31,!0))return!1;for(var e=0,t=SubRoles.ins().subRolesLen;t>e;++e){if(this.zZEquipUpLevelRoleRedPqoint(e))return!0;if(this.zZEquipUpStarRoleRedPoint(e))return!0;if(this.zhuanZhiEquipRoleRedPqoint(e))return!0}return!1},t}(BaseSystem);__reflect(ZhuanZhiModel.prototype,"ZhuanZhiModel"),MessageCenter.compile(ZhuanZhiModel),window.ZhuanZhiModel=ZhuanZhiModel;var ZhuanZhiPanel=function(e){function t(){var t=e.call(this)||this;return t.panelList=[],t.tabDatas1=[{name:"",img:"zz_01_png"},{name:"",img:"zz_02_png"},{name:"",img:"zz_03_png"}],t.tabDatas2=[{name:"",img:"zz_11_png"},{name:"",img:"zz_12_png"},{name:"",img:"zz_13_png"}],t.tabDatas3=[{name:"",img:"zz_21_png"},{name:"",img:"zz_22_png"},{name:"",img:"zz_23_png"}],t.skinName="ZhuanZhiPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addItemTapEvent(this,this.onTouchTab,this.tabBar),this.panelList=[],this.viewStack.removeChildren(),this.panelList.push(new ZhuanZhiJmPanel(this.m_RoleSelectPanel)),this.panelList.push(new ZhuanZhiTfPanel(this.m_RoleSelectPanel));for(var i=0;i<this.panelList.length;i++)this.viewStack.addChild(this.panelList[i]),this.panelList[i].open();this.tabBar.selectedIndex=0,this.viewStack.selectedIndex=0},t.prototype.onTouchTab=function(e){var t=this.panelList[this.tabBar.selectedIndex];return void 0==t?(this.tabBar.selectedIndex=this.m_OldIndex,void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st100653)):1!=this.tabBar.selectedIndex||ZhuanZhiModel.ins().isOpenZhuanZhiTf()?(this.m_OldIndex=this.tabBar.selectedIndex,this.viewStack.selectedIndex=this.tabBar.selectedIndex,void(t&&t.UpdateContent())):(this.tabBar.selectedIndex=this.m_OldIndex,void UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101860))},t.prototype.close=function(){this.removeEvents(),this.removeObserve(),this.viewStack.removeChildren();for(var e=0;e<this.panelList.length;e++)this.panelList[e].close()},t.openCheck=function(){return Deblocking.Check(DeblockingType.TYPE_30)},t.prototype.UpdateContent=function(){var e=SubRoles.ins().getSubRoleByIndex(this.m_RoleSelectPanel.getCurRole());e.job==JobConst.ZhanShi?this.tabBar.dataProvider=new eui.ArrayCollection(this.tabDatas1):e.job==JobConst.FaShi?this.tabBar.dataProvider=new eui.ArrayCollection(this.tabDatas2):e.job==JobConst.DaoShi&&(this.tabBar.dataProvider=new eui.ArrayCollection(this.tabDatas3));var t=this.panelList[this.tabBar.selectedIndex];t&&t.UpdateContent()},t.prototype.CheckRedPoint=function(){return ZhuanZhiModel.ins().zhuanZhiIsRed()},t}(BaseView);__reflect(ZhuanZhiPanel.prototype,"ZhuanZhiPanel",["eui.UIComponent","egret.DisplayObject","ICommonWindowTitle","ICommonWindowRoleSelect"]),window.ZhuanZhiPanel=ZhuanZhiPanel;var ZhuanZhiTaskConWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ZhuanZhiTaskConWinSkin",this.item.isShowName(!1)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_bg.init("ZhuanZhiTaskConWin",GlobalConfig.jifengTiaoyueLg.st101895),this.addTouchEvent(this,this.onTap,this.btn),this.config=e[0],this.roldId=e[1],this.desc.text=this.config.desc;var i=0;MoneyConst.gold==this.config.param?(i=GameLogic.ins().actorModel.gold,this.item.data={id:this.config.param,type:0}):MoneyConst.yuanbao==this.config.param?(i=GameLogic.ins().actorModel.yb,this.item.data={id:this.config.param,type:0}):(i=UserBag.ins().getBagGoodsCountById(0,this.config.param),this.item.data=this.config.param),this.info.text=GlobalConfig.jifengTiaoyueLg.st101894+i,this.btn.enabled=i>=this.config.target},t.prototype.close=function(){this.removeEvents()},t.prototype.onTap=function(e){ZhuanZhiModel.ins().sendZhuanZhiDonate(this.config.param,this.config.target,this.roldId),ViewManager.ins().close(t)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t}(BaseEuiPanel);__reflect(ZhuanZhiTaskConWin.prototype,"ZhuanZhiTaskConWin"),ViewManager.ins().reg(ZhuanZhiTaskConWin,LayerManager.UI_Popup),window.ZhuanZhiTaskConWin=ZhuanZhiTaskConWin;var ZhuanZhiTaskPane=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100643,t.listData=new eui.ArrayCollection,t.mainListData=new eui.ArrayCollection,t.zsLv=1,t.skinName="ZhuanZhiTaskPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.list.itemRenderer=ZhuanZhiTaskItem,this.listData=new eui.ArrayCollection,this.list.dataProvider=this.listData,this.m_MainList.itemRenderer=ZhuanZhiTaskSkillIconItem,this.mainListData=new eui.ArrayCollection,this.m_MainList.dataProvider=this.mainListData,this.changeBtn.label=GlobalConfig.jifengTiaoyueLg.st100649,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100650,this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st100643},t.prototype.open=function(){this.AddClick(this.changeBtn,this._OnClick),this.observe(MessageDef.ZHUANZHI_UPLEVEL_RESULT,this.UpdateContent),this.observe(MessageDef.ZHUANZHI_TASKLIST,this.UpdateContent),ZhuanZhiModel.ins().sendZhuanZhiTaskList(),this.m_RoleSelectPanel.y=135},t.prototype.close=function(){this.removeEvents(),this.removeObserve(),this.m_RoleSelectPanel.y=158},t.prototype.release=function(){this.m_SkillRoleAnim.release(),this.removeEvents(),this.m_RoleSelectPanel.y=0},t.prototype._OnClick=function(e){ZhuanZhiModel.ins().canZhuanZhiByRoleId(this.m_RoleSelectPanel.getCurRole(),!0)&&ZhuanZhiModel.ins().sendZhuanZhiActive(this.m_RoleSelectPanel.getCurRole())},t.prototype.UpdateContent=function(){var e=this.m_RoleSelectPanel.getCurRole(),i=SubRoles.ins().getSubRoleByIndex(e);t.currRoleId=e,this.m_MissionGroup.visible=!0;var o=[],s=0,n=ZhuanZhiModel.ins().getZhuanZhiLevel(e);switch(this.zsLv){case 1:s=1;break;case 2:s=2;break;case 3:s=3}if(s-1==n){var r=ZhuanZhiModel.ins().getZhuanZhiTaskData(e);o=r}else{var a=GlobalConfig.ins("TransferTaskConfig");for(var l in a){var h=a[l];if(i.job==h.roletype&&s-1==h.level){var c=new Sproto.zhuanzhi_task;c.id=h.id,c.value=0,c.state=-1,o.push(c)}}}this.listData.removeAll(),this.listData.replaceAll(o),this.listData.refresh();var u=GlobalConfig.ins("TransferAppearanceConfig")[i.job][n];u&&(this.m_CompNowJobLab.text=GlobalConfig.jifengTiaoyueLg.st100644+u.targetJob);var d=GlobalConfig.ins("TransferAppearanceConfig")[i.job][s-1];if(d){this.m_LeftJobLab.text=d.targetJob;var p=s-1;0>p&&(p=1),this.m_LeftJobImg.source="zsjob_"+i.job+"_"+p+"_png",this.m_NoChangeLab.text=GlobalConfig.jifengTiaoyueLg.st100645+d.targetJob,this.m_MissionGroup.visible=!1}var f=GlobalConfig.ins("TransferAppearanceConfig")[i.job][s];if(f){this.dec.textFlow=TextFlowMaker.generateTextFlow(f.TransferTips);for(var g=[],a=GlobalConfig.ins("SkillsOpenConfig")[i.job],_=0;_<a.length;_++)if(a[_].level==s){var m={job:i.job,level:s,curRole:e,index:a[_].index};g.push(m)}this.mainListData.replaceAll(g),this.m_RightJobLab.text=f.targetJob,this.m_RightJobImg.source="zsjob_"+i.job+"_"+s+"_png"}else this.dec.text="";if(n>=s?(this.changeBtn.visible=!1,this.m_CompLab.visible=!0,this.m_CompLab.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100646,[s]),this.m_CompNowJobLab.visible=!0):(this.changeBtn.visible=!0,this.m_CompLab.visible=!1,this.m_CompNowJobLab.visible=!1),n==s-1?this.m_MissionGroup.visible=!0:this.m_MissionGroup.visible=!1,this.m_NoChangeLab.visible=!1,s>n+1&&(this.changeBtn.visible=!1,this.m_NoChangeLab.visible=!0),this.lockTips.visible=!1,this.changeBtn.visible&&!ZhuanZhiModel.ins().zhuanZhiTaskIsOpen(this.m_RoleSelectPanel.getCurRole())){this.changeBtn.visible=!1,this.lockTips.visible=!0;var v=ZhuanZhiModel.ins().getZhuanZhiLevel(this.m_RoleSelectPanel.getCurRole()),y=GlobalConfig.ins("TransferConfig").zslevel;this.lockTips.text=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100647,[y[v]])}this.m_SkillRoleAnim.setData(e,s,i.job,!0)},t.currRoleId=0,t}(BaseView);__reflect(ZhuanZhiTaskPane.prototype,"ZhuanZhiTaskPane",["ICommonWindowTitle","ICommonWindowRoleSelect"]);var ZhuanZhiTaskItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.touchEnabled=!1,this.goLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),UIHelper.SetLinkStyleLabel(this.goLabel),this.goLabel.text=GlobalConfig.jifengTiaoyueLg.st100651,this.finishImg.text=GlobalConfig.jifengTiaoyueLg.st100648},t.prototype._OnClick=function(){var e=GlobalConfig.ins("TransferTaskConfig")[this.data.id];80!=e.type&&ViewManager.ins().close(ZhuanZhiTaskWin),75!=e.type&&(80==e.type?ViewManager.ins().open(ZhuanZhiTaskConWin,e,ZhuanZhiTaskPane.currRoleId):76==e.type?ViewManager.ins().open(ZsWin,0,ZhuanZhiTaskPane.currRoleId):37==e.type?ViewManager.ins().open(ForgeWin,1,ZhuanZhiTaskPane.currRoleId):21==e.type?ViewManager.ins().open(ForgeWin,2,ZhuanZhiTaskPane.currRoleId):e.arg?ZhuanZhiModel.ins().sendZhuanZhiEnterRaid(ZhuanZhiTaskPane.currRoleId,e.id):Deblocking.Check(e.openid)&&ViewManager.Guide(e.controlTarget[0],e.controlTarget[1]))},t.prototype.dataChanged=function(){var e=this.data,t=GlobalConfig.ins("TransferTaskConfig")[e.id];e.state>0?this.conditionLabel.text=t.desc+("("+GlobalConfig.jifengTiaoyueLg.st100648+")"):this.conditionLabel.text=t.desc+("("+e.value+"/"+t.target+")"),this.finishImg.visible=e.state>0,this.goLabel.visible=!(e.state>0)},t}(eui.ItemRenderer);__reflect(ZhuanZhiTaskItem.prototype,"ZhuanZhiTaskItem"),window.ZhuanZhiTaskPane=ZhuanZhiTaskPane,window.ZhuanZhiTaskItem=ZhuanZhiTaskItem;var ZhuanZhiTaskSkillIconItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="SkillIconSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.m_MainSkill.visible=!1,this.m_Shuo.visible=!1,this.m_LvLab.visible=!1,this.m_Mask.visible=!1,this.addEvent()},t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data,i=UserSkill.ins().getskillLv(t.curRole,t.index),o=UserSkill.ins().getSkillId(t.job,t.index,i),s=GlobalConfig.ins("SkillsConfig")[o];s&&(this.m_Icon.source=s.icon+"_png")},t.prototype.onClick=function(){var e=this.data;ViewManager.ins().open(SkillShowWin,e)},t}(eui.ItemRenderer);__reflect(ZhuanZhiTaskSkillIconItem.prototype,"ZhuanZhiTaskSkillIconItem"),window.ZhuanZhiTaskSkillIconItem=ZhuanZhiTaskSkillIconItem;var ZhuanZhiTaskWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.zhuanZhiTaskPane1=new ZhuanZhiTaskPane,this.zhuanZhiTaskPane1.zsLv=1,this.zhuanZhiTaskPane1.name=GlobalConfig.jifengTiaoyueLg.st101947,this.commonWindowBg.AddChildStack(this.zhuanZhiTaskPane1),this.zhuanZhiTaskPane2=new ZhuanZhiTaskPane,this.zhuanZhiTaskPane2.zsLv=2,this.zhuanZhiTaskPane2.name=GlobalConfig.jifengTiaoyueLg.st101948,this.commonWindowBg.AddChildStack(this.zhuanZhiTaskPane2),this.zhuanZhiTaskPane3=new ZhuanZhiTaskPane,this.zhuanZhiTaskPane3.zsLv=3,this.zhuanZhiTaskPane3.name=GlobalConfig.jifengTiaoyueLg.st101949,this.commonWindowBg.AddChildStack(this.zhuanZhiTaskPane3)},t.prototype.destoryView=function(){e.prototype.destoryView.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e?e[0]:0),this.updateRedPoint()},t.prototype.close=function(){this.commonWindowBg.OnRemoved(),this.zhuanZhiTaskPane1.release(),this.zhuanZhiTaskPane2.release(),this.zhuanZhiTaskPane3.release()},t.prototype.updateRedPoint=function(){},t.prototype.onTap=function(e){ViewManager.ins().close(this)},t.openCheck=function(){return!0},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t}(BaseEuiPanel);__reflect(ZhuanZhiTaskWin.prototype,"ZhuanZhiTaskWin",["ICommonWindow"]),ViewManager.ins().reg(ZhuanZhiTaskWin,LayerManager.UI_Main),window.ZhuanZhiTaskWin=ZhuanZhiTaskWin;var ZhuanZhiTfPanel=function(e){function t(t){var i=e.call(this)||this;return i.m_TfGroup=[],i.skinName="ZhuanZhiTfPanelSkin",i.m_RoleSelectPanel=t,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);for(var t=0;22>t;++t)this.m_TfGroup[t]=this["item"+t],this.m_TfGroup[t].mIndex=t,this.m_TfGroup[t].selected=!1;this.m_TfGroup[ZhuanZhiModel.ins().tfItemIndex].selected=!0,this.upLevelBtn.label=GlobalConfig.jifengTiaoyueLg.st100208},t.prototype.open=function(){this.addTouchEvent(this,this.onClick,this.upLevelBtn),this.addTouchEvent(this,this.getXiuwei,this.link),this.observe(MessageDef.ZHUANZHI_JM_ITEM_SELECT,this.onTfItemChange),this.observe(ZhuanZhiModel.ins().postZhuanZhiTfUpdate,this.UpdateContent),this.observe(UserZs.ins().postZsData,this.UpdateContent)},t.prototype.close=function(){this.removeEvents(),this.removeObserve()},t.prototype.getXiuwei=function(e){ViewManager.ins().open(GainZsWin)},t.prototype.onClick=function(e){var t=this.m_TfGroup[ZhuanZhiModel.ins().tfItemIndex].data,i=GlobalConfig.transferTalentConfig[t.skillid][t.level];(!(i.rankUpItem&&i.rankUpItem.length>0)||Checker.Money(i.rankUpItem[0].id,i.rankUpItem[0].count)&&Checker.Money(i.rankUpItem[1].id,i.rankUpItem[1].count))&&ZhuanZhiModel.ins().sendZhuanZhiTfUpLevel(this.curRole,t.skillid)},t.prototype.onTfItemChange=function(e){this.m_TfGroup[ZhuanZhiModel.ins().tfItemIndex].selected=!1,this.m_TfGroup[e].selected=!0,ZhuanZhiModel.ins().tfItemIndex=e,this.updateAttrOrCost()},t.prototype.UpdateContent=function(){for(var e=ZhuanZhiModel.ins().zhuanZhiTfList[this.curRole],t=0;t<this.m_TfGroup.length;t++){var i=this.m_TfGroup[t];i.roldId=this.curRole,i.data=e.list[t]}this.updateAttrOrCost(),this.powerLabel.text=e.power.toString(),this.updataRoleRedPoint()},t.prototype.updateAttrOrCost=function(){var e=this.m_TfGroup[ZhuanZhiModel.ins().tfItemIndex].data,t=GlobalConfig.transferTalentConfig[e.skillid][e.level];this.tfName.text=GlobalConfig.jifengTiaoyueLg.st100662+"："+t.TalentName,t.rankUpItem&&t.rankUpItem.length>0?(this.consumeLabel.visible=!0,this.consumeLabel.consumeType=GlobalConfig.jifengTiaoyueLg.st100266,this.consumeLabel.curValue=UserZs.ins().exp,this.consumeLabel.consumeValue=t.rankUpItem[0].count,this.consumeLabel1.visible=!0,this.consumeLabel1.consumeType=GlobalConfig.jifengTiaoyueLg.st100018,this.consumeLabel1.curValue=GameLogic.ins().actorModel.gold,this.consumeLabel1.consumeValue=t.rankUpItem[1].count):(this.consumeLabel.visible=!1,this.consumeLabel1.visible=!1),this.unlockTips.visible=!1,this.attrLabel.visible=!0,this.upLevelBtn.enabled=!0;var i=t.condition.length;if(e.level<=0&&i>0){for(var o=!1,s=GlobalConfig.jifengTiaoyueLg.st100663+"\n",n=0;i>n;n++){var r=t.condition[n][0],a=t.condition[n][1],l=ZhuanZhiModel.ins().getTfLevelById(r),h=GlobalConfig.transferTalentConfig[r][a];s+=h.TalentName+LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100664,[a])+"\n",a>l&&(o=!0)}o&&(this.attrLabel.visible=!1,this.unlockTips.visible=!0,this.unlockTips.textFlow=TextFlowMaker.generateTextFlow(s),this.upLevelBtn.enabled=!1)}if(t.skillTips&&t.skillTips.length>0){var c=GlobalConfig.skillsConfig[t.skillTips[0]],u=GlobalConfig.skillsConfig[t.skillTips[1]];this.attrLabel.SetCurAttr(c.desc),u&&this.attrLabel.SetNextAttr(u.desc),0==e.level&&(this.tfName.text=GlobalConfig.jifengTiaoyueLg.st100256+":"+c.skinName)}else{this.attrLabel.SetCurAttr(AttributeData.getAttStr(t.attrs,1));var d=GlobalConfig.transferTalentConfig[e.skillid][e.level+1];d&&this.attrLabel.SetNextAttr(AttributeData.getAttStr(d.attrs,1))}},Object.defineProperty(t.prototype,"curRole",{get:function(){return this.m_RoleSelectPanel.getCurRole()},enumerable:!0,configurable:!0}),t.prototype.updataRoleRedPoint=function(){for(var e=0,t=SubRoles.ins().subRolesLen;t>e;++e)this.m_RoleSelectPanel.showRedPoint(e,ZhuanZhiModel.ins().zhuanZhiTfRoleRedPqoint(e))},t}(BaseView);__reflect(ZhuanZhiTfPanel.prototype,"ZhuanZhiTfPanel",["eui.UIComponent","egret.DisplayObject","ICommonWindowTitle","ICommonWindowRoleSelect"]);var ZhuanZhiTfItem=function(e){function t(){var t=e.call(this)||this;return t.mIndex=0,t.roldId=0,t.skinName="ZhuanZhiTfItemSkin",t.addEventListener(egret.TouchEvent.TOUCH_END,t.selectedHandle,t),t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data,t=GlobalConfig.transferTalentConfig[e.skillid][e.level],i=GlobalConfig.transferTalentConfig[e.skillid],o=0;for(var s in i)o++;this.level.text=e.level+"/"+(o-1),this.lockBg.visible=!1,this.icon.source=t.TalentID+"_png";var n=t.condition.length;if(e.level<=0&&n>0){for(var r=!1,a=0;n>a;a++){var l=t.condition[a][0],h=t.condition[a][1],c=ZhuanZhiModel.ins().getTfLevelById(l);if(h>c){r=!0;break}}r&&(this.lockBg.visible=!0)}this.redPoint.visible=!1,this.lockBg.visible||ZhuanZhiModel.ins().isOpenZhuanZhiTfByRoleId(this.roldId)&&e.level<o-1&&Checker.Money(t.rankUpItem[0].id,t.rankUpItem[0].count,!1)&&Checker.Money(t.rankUpItem[1].id,t.rankUpItem[1].count,!1)&&(this.redPoint.visible=!0)},t.prototype.selectedHandle=function(e){this.isSelected||GameGlobal.MessageCenter.dispatch(MessageDef.ZHUANZHI_JM_ITEM_SELECT,this.mIndex)},Object.defineProperty(t.prototype,"selected",{set:function(e){this.isSelected!=e&&(this.isSelected=e,this.select.visible=e)},enumerable:!0,configurable:!0}),t}(eui.ItemRenderer);__reflect(ZhuanZhiTfItem.prototype,"ZhuanZhiTfItem"),window.ZhuanZhiTfPanel=ZhuanZhiTfPanel,window.ZhuanZhiTfItem=ZhuanZhiTfItem;var ZhuanZhiTaskInfo=function(){function e(){this.roleid=0,this.level=0,this.task=[]}return e.prototype.parse=function(e){e&&(this.roleid=e.roleid,this.level=e.level,this.task=e.task,LocalStorageData.setItem(LocalDataKey.zhuanzhiLv+"_"+this.roleid,this.level+""))},e}();__reflect(ZhuanZhiTaskInfo.prototype,"ZhuanZhiTaskInfo"),window.ZhuanZhiTaskInfo=ZhuanZhiTaskInfo;var ZhuanZhiTfInfo=function(){function e(){this.roleid=0,this.power=0,this.list=[]}return e.prototype.parse=function(e){e&&(this.roleid=e.roleid,this.power=e.power,this.list=e.list)},e}();__reflect(ZhuanZhiTfInfo.prototype,"ZhuanZhiTfInfo"),window.ZhuanZhiTfInfo=ZhuanZhiTfInfo;var ZhuZaiData=function(){function e(){}return e.prototype.parser=function(e){this.id=e.id,this.level=e.level},Object.defineProperty(e.prototype,"lv",{get:function(){return this.level},enumerable:!0,configurable:!0}),e.prototype.isMaxLevel=function(){null==this.equipPointGrowUpConfig&&(this.equipPointGrowUpConfig=GlobalConfig.ins("EquipPointGrowUpConfig"));var e=this.equipPointGrowUpConfig[this.id][this.lv+1];if(!e){var t=1e4*(Math.floor(this.lv/1e4)+1);e=this.equipPointGrowUpConfig[this.id][t]}return e?!1:!0},e.prototype.canLevelup=function(){null==this.equipPointGrowUpConfig&&(this.equipPointGrowUpConfig=GlobalConfig.ins("EquipPointGrowUpConfig"));var e=this.equipPointGrowUpConfig[this.id][this.lv],t=e.growUpItem.id,i=e.needLevel/1e3>>0,o=e.needLevel%1e3;return this.isMaxLevel()||i&&UserZs.ins().lv<i||GameLogic.ins().actorModel.level<o?!1:UserBag.ins().getBagGoodsCountById(0,t)<e.growUpItem.count?!1:!0},e.prototype.canAdvance=function(){null==this.equipPointRankConfig&&(this.equipPointRankConfig=GlobalConfig.ins("EquipPointGrowUpConfig"));var e=this.equipPointRankConfig[this.id][this.lv];if(!this.lv||!e)return!1;var t=e.growUpItem.id;return UserBag.ins().getBagGoodsCountById(0,t)<e.growUpItem.count?!1:!0},e.prototype.getZyRank=function(){null==this.equipPointRankConfig&&(this.equipPointRankConfig=GlobalConfig.ins("EquipPointGrowUpConfig"));var e=this.equipPointRankConfig[this.id][this.lv];return e?e.rank:0},e}();__reflect(ZhuZaiData.prototype,"ZhuZaiData"),window.ZhuZaiData=ZhuZaiData;var ZhuzaiEquip=function(e){function t(){var t=e.call(this)||this;return t.sysId=PackageID.ZhuZaiEquip,t.regNetMsg(S2cProtocol.sc_zhuzai_data,t.doZhuZaiData),t.regNetMsg(S2cProtocol.sc_zhuzai_shengjie_result,t.doShengjie),t.regNetMsg(S2cProtocol.sc_zhuzai_grow_result,t.doShengjie),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.doZhuZaiData=function(e){SubRoles.ins().getSubRoleByIndex(e.roleId).setZhuZaiData(e.data.id-1,e.data),GameGlobal.MessageCenter.dispatch(MessageDef.ZHUZAI_DATA_UPDATE)},t.prototype.sendShengjie=function(e,t){var i=new Sproto.cs_zhuzai_shengjie_request;i.roleId=e,i.pos=t,GameSocket.ins().Rpc(C2sProtocol.cs_zhuzai_shengjie,i)},t.prototype.doShengjie=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.ZHUZAI_UP_RESULT,e.result)},t.prototype.sendGrow=function(e,t,i){var o=new Sproto.cs_zhuzai_grow_request;o.roleId=e,o.pos=t,o.isProtect=i,GameSocket.ins().Rpc(C2sProtocol.cs_zhuzai_grow,o)},t.prototype.sendFenjie=function(){if(this.canFengjie()){var e=new Sproto.cs_zhuzai_fenjie_request;e.items=this.GetFengjieItemHandleData(),GameSocket.ins().Rpc(C2sProtocol.cs_zhuzai_fenjie,e)}},t.prototype.canFengjie=function(){var e=this.GetFengjieList();for(var t in e)if(e[parseInt(t)]>0)return!0;return!1},t.prototype.GetFengjieList=function(){var e={},t=GlobalConfig.ins("EquipPointResolveConfig"),i=GlobalConfig.equipPointBasicConfig;for(var o in t){for(var s=parseInt(o),n=t[s].id,r=i[n].activationItem.count,a=UserBag.ins().getBagGoodsById(UserBag.BAG_TYPE_OTHTER,s),l=a?a.count:0,h=0;h<SubRoles.MAX_COUNT;++h){var c=SubRoles.ins().getSubRoleByIndex(h);if(c){var u=c.getZhuZaiDataByIndex(n-1);if(u&&u.getZyRank()>0)continue}l-=r}e[s]=Math.max(l,0)}return e},t.prototype.GetFengjieItemHandleData=function(){var e=[],t=GlobalConfig.ins("EquipPointResolveConfig"),i=GlobalConfig.equipPointBasicConfig;for(var o in t){for(var s=parseInt(o),n=t[s].id,r=i[n].activationItem.count,a=UserBag.ins().getBagGoodsById(UserBag.BAG_TYPE_OTHTER,s),l=a?a.count:0,h=0;h<SubRoles.MAX_COUNT;++h){var c=SubRoles.ins().getSubRoleByIndex(h);if(c){var u=c.getZhuZaiDataByIndex(n-1);if(u&&u.getZyRank()>0)continue}l-=r}if(a&&l>0){var d=new Sproto.zhuzai_fenjie_data;d.itemHandle=a.handle,d.count=l,e.push(d)}}return e},t.prototype.canAllLevelup=function(){for(var e=SubRoles.ins().subRolesLen,t=0;e>t;t++)if(this.canLevelup(t))return!0;return!1},t.prototype.canLevelup=function(e){var t=GlobalConfig.equipPointBasicConfig,i=!1;for(var o in t){var s=SubRoles.ins().getSubRoleByIndex(e),n=s.getZhuZaiDataByIndex(parseInt(o)-1);if(n&&(i=n.canLevelup()),i)return!0}return!1},t.prototype.canAllAdvance=function(){for(var e=SubRoles.ins().subRolesLen,t=0;e>t;t++)if(this.canAdvance(t))return!0;return!1},t.prototype.canAdvance=function(e){var t=GlobalConfig.equipPointBasicConfig,i=!1;for(var o in t){var s=SubRoles.ins().getSubRoleByIndex(e),n=s.getZhuZaiDataByIndex(parseInt(o)-1);if(n&&(i=n.canAdvance()),i)return!0}return!1},t.GetBgIconByData=function(e){var t="pf_orange_01_png",i=e.id;null==this.EquipPointConstConfig&&(this.EquipPointConstConfig=GlobalConfig.ins("EquipPointGrowUpConfig"));var o=this.EquipPointConstConfig[i][e.lv];return[ResDataPath.GetItemFullName(ItemConst["ZHUZAI_0"+i]+(o.growlevel<1?"_1":"")),t]},t.GetBgIcon=function(e,t){return this.GetBgIconByData(SubRoles.ins().getSubRoleByIndex(e).getZhuZaiDataByIndex(t))},t.qualityObj=["pf_black_01_png","pf_green_01_png","pf_blue_01_png","pf_purple_01_png","pf_orange_01_png","pf_red_01_png"],t}(BaseSystem);__reflect(ZhuzaiEquip.prototype,"ZhuzaiEquip"),MessageCenter.compile(ZhuzaiEquip),window.ZhuzaiEquip=ZhuzaiEquip;var UserZs=function(e){function t(){var t=e.call(this)||this;return t.lv=0,t.sysId=PackageID.Zs,t.regNetMsg(S2cProtocol.sc_zs_data,t.postZsData),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postZsData=function(e){var t=this.lv,i=this.exp;this.lv=e.lv,this.exp=e.exp,this.upgradeCount=[e.expupCount,e.normalupCount,e.highupCount],t!=this.lv&&ActivityModel.SendLevelInfo(),i!=this.exp&&this.exp>i&&UserTips.ins().showTips("修为 +"+(this.exp-i))},t.prototype.sendGetXiuWei=function(e,t){void 0===t&&(t=-1);var i=new Sproto.cs_zs_get_exp_request;i.type=e,i.itemid=t,GameSocket.ins().Rpc(C2sProtocol.cs_zs_get_exp,i)},t.prototype.sendZsUpgrade=function(){GameSocket.ins().Rpc(C2sProtocol.cs_zs_uplevel,new Sproto.cs_zs_uplevel_request)},t.prototype.canUpgrade=function(){var e=GlobalConfig.zhuanShengLevelConfig[this.lv],t=GlobalConfig.zhuanShengLevelConfig[this.lv+1];if(!t)return!1;for(var i=Checker.Level(null,e.levelLimit,!1),o=!0,s=0;3>s;s++)if(ZhuanZhiModel.ins().getZhuanZhiLevel(s)<e.zzLevelLimit){o=!1;break}return i&&o&&this.exp>=t.exp},t.prototype.isMaxLv=function(){return null==this.ZhuanShengConfig&&(this.ZhuanShengConfig=GlobalConfig.zhuanShengLevelConfig),this.ZhuanShengConfig[this.lv+1]?!1:!0},t.prototype.canGet=function(e){if(this.upgradeCount){var i,o=GlobalConfig.ins("ZhuanShengConfig");if(0==e)return i=o.conversionCount-this.upgradeCount[0],i>0&&Checker.Level(null,o.level+1,!1);if(1==e){i=o.normalCount[t.ins().lv]-this.upgradeCount[1];var s=UserBag.ins().getBagGoodsCountById(0,o.normalItem);return i>0&&s>0}if(2==e){i=o.advanceCount[t.ins().lv]-this.upgradeCount[2];var n=UserBag.ins().getBagGoodsCountById(0,o.advanceItem);return i>0&&n>0}return!1}},t.prototype.canOpenZSWin=function(){var e=GameLogic.ins().actorModel.level,t=null!=this.lv?this.lv:0;return 0>=t&&80>e?!1:!0},t.prototype.canGetRedPoint=function(){for(var e=0;3>e;e++)if(this.canGet(e))return!0;return!1},t}(BaseSystem);__reflect(UserZs.prototype,"UserZs"),MessageCenter.compile(UserZs),window.UserZs=UserZs;var NeiGongControl=function(e){function t(){var t=e.call(this)||this;return t.neiGongDic=new Dictionary,t.regNetMsg(S2cProtocol.sc_neigong_info,t.sc_neigong_info),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sc_neigong_info=function(e){var t=new NeiGongData;t.progress=e.progress,t.starLv=e.starLv,t.roleid=e.roleid,t.jindu=e.jindu,t.power=e.power,this.neiGongDic.set(t.roleid,t),GameGlobal.MessageCenter.dispatch(MessageDef.NEIGONG_UPDATE)},t.prototype.cs_neigong_upstar=function(e){var t=new Sproto.cs_neigong_upstar_request;t.roleid=e,this.Rpc(C2sProtocol.cs_neigong_upstar,t)},t.prototype.cs_neigong_uppro=function(e){var t=new Sproto.cs_neigong_uppro_request;t.roleid=e,this.Rpc(C2sProtocol.cs_neigong_uppro,t)},t.prototype.cs_neigong_info=function(e){var t=new Sproto.cs_neigong_info_request;t.roleid=e,this.Rpc(C2sProtocol.cs_neigong_info,t)},t.prototype.getAllRoleNeiGongMsg=function(){for(var e=SubRoles.ins().subRolesLen,t=0;e>t;t++){var i=SubRoles.ins().getSubRoleByIndex(t);
i&&this.cs_neigong_info(i.roleID)}},t.prototype.checkRed=function(){if(Deblocking.Check(DeblockingType.TYPE_47,!0))for(var e=SubRoles.ins().subRolesLen,t=0;e>t;t++){var i=SubRoles.ins().getSubRoleByIndex(t);if(i){var o=this.checkRoleRed(i.roleID);if(o)return!0}}return!1},t.prototype.checkRoleRed=function(e){var t=GlobalConfig.ins("NeiGongConfigCommon"),i=t.levelMax,o=this.neiGongDic.get(e);if(o){var s=o.starLv+o.progress*t.levelPerStage;if(i>s){var n=GlobalConfig.ins("NeiGongConfigLevel")[s];if(n){var r=UserBag.ins().getBagGoodsCountById(0,n.cost.id);if(r>=n.cost.count)return!0}}}return!1},t}(BaseSystem);__reflect(NeiGongControl.prototype,"NeiGongControl"),window.NeiGongControl=NeiGongControl;var NeiGongData=function(){function e(){}return e}();__reflect(NeiGongData.prototype,"NeiGongData"),window.NeiGongData=NeiGongData;var NeiGongPanel=function(e){function t(){var t=e.call(this)||this;return t.currStarNum=-1,t.barH=60,t.skinName="NeiGongSkin",t}return __extends(t,e),t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_47)},t.prototype.updataRoleRed=function(){for(var e=0;e<SubRoles.ins().subRolesLen;++e){var t=NeiGongControl.ins().checkRoleRed(e);this.m_RoleSelectPanel.showRedPoint(e,t)}},t.prototype.UpdateContent=function(){NeiGongControl.ins().cs_neigong_info(this.m_RoleSelectPanel.curRole),this.currStarNum=-1},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=GlobalConfig.ins("NeiGongConfigCommon");this.levelPerStage=i.levelPerStage,this.levelMax=i.levelMax,this.observe(MessageDef.NEIGONG_UPDATE,this.sc_neigong_info),this.observe(MessageDef.BAG_HAS_ITEM_CAN_USE,this.sc_neigong_info),NeiGongControl.ins().cs_neigong_info(this.m_RoleSelectPanel.curRole),this.addTouchEvent(this,this.onCLick,this.btnUp),this.addTouchEvent(this,this.onTap,this.getItem),this.observe(MessageDef.REDPOINT_STATE,this.updataRoleRed),this.updataRoleRed()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeEvents(),this.removeObserve(),this.currStarNum=-1},t.prototype.sc_neigong_info=function(){var e=NeiGongControl.ins().neiGongDic.get(this.m_RoleSelectPanel.curRole);if(e){var t=e.starLv%this.levelPerStage==0&&0!=e.starLv,i=GlobalConfig.ins("NeiGongConfigLevel"),o=GlobalConfig.ins("NeiGongConfigGrade"),s=e.starLv+e.progress*this.levelPerStage,n=i[s],r=i[s+1]?i[s+1].cost:i[s].cost,a=o[e.progress];0==e.starLv&&null==n?(UserBag.ins().setNeedItem([i[e.starLv+1].cost],this.m_NeedItemGroup),this.InternalWork.text=GlobalConfig.jifengTiaoyueLg.st100292+" 0\n"+GlobalConfig.jifengTiaoyueLg.st100293+" 0\n"+GlobalConfig.jifengTiaoyueLg.st100294+" 0"):(UserBag.ins().setNeedItem([n.cost],this.m_NeedItemGroup),a?this.InternalWork.text=GlobalConfig.jifengTiaoyueLg.st100292+" "+(n.Shield+a.Shield)+"\n"+GlobalConfig.jifengTiaoyueLg.st100293+" "+(n.Relief+a.Relief)/100+"%\n"+GlobalConfig.jifengTiaoyueLg.st100294+" "+(n.ShieldRep+a.ShieldRep):this.InternalWork.text=GlobalConfig.jifengTiaoyueLg.st100292+" "+n.Shield+"\n"+GlobalConfig.jifengTiaoyueLg.st100293+" "+n.Relief/100+"%\n"+GlobalConfig.jifengTiaoyueLg.st100294+" "+n.ShieldRep),this.percentTf.text=e.jindu+"%",a=o[t?e.progress+1:e.progress],n=i[t?s:s+1],n?(a?(t?UserBag.ins().setNeedItem([a.cost],this.m_NeedItemGroup):UserBag.ins().setNeedItem([n.cost],this.m_NeedItemGroup),this.InternalWorkValue.text=n.Shield+a.Shield+"\n"+(n.Relief+a.Relief)/100+"%\n"+(n.ShieldRep+a.ShieldRep)):this.InternalWorkValue.text=n.Shield+"\n"+n.Relief/100+"%\n"+n.ShieldRep,this.btnUp.visible=!0,this.m_NeedManGroup.visible=!0):(this.InternalWorkValue.text=GlobalConfig.jifengTiaoyueLg.st100020,this.btnUp.visible=!1,this.m_NeedManGroup.visible=!1),this.share.y=this.fireBall.y-(this.barH>>1)+this.barH-this.barH*e.jindu/100+10,this.fireBall.visible=!1,this.update(e);var l=UserBag.ins().getBagGoodsCountById(0,r.id);this.needItemId=r.id,l>=r.count?this.isaa=!0:this.isaa=!1,this.updataRoleRed()}},t.prototype.update=function(e){this.powerLabel.text=e.power,this.heavy.text=e.progress+GlobalConfig.jifengTiaoyueLg.st100295;var t=e.starLv,i=!1;e.starLv%this.levelPerStage==0&&0!=e.starLv?(this.btnUp.labelDisplay.text=GlobalConfig.jifengTiaoyueLg.st100214,t=this.levelPerStage):this.btnUp.labelDisplay.text=GlobalConfig.jifengTiaoyueLg.st100296,-1!=this.currStarNum&&e.starLv>this.currStarNum&&(i=!0),this.currStarNum=e.starLv;for(var o,s,n=this.startGroup.numChildren,r=0;n>r;r++)s=this.startGroup.getChildAt(r),s.source=t>r?"comp_40_40_03_png":"",t-1==r&&i&&(o=ObjectPool.ins().pop("MovieClip"),o.loadUrl(ResDataPath.GetUIEffePath("eff_neigong_show"),!0,1,function(e){DisplayUtils.dispose(e),ObjectPool.ins().push(e)}),o.x=this.startGroup.x+s.x+22,o.y=this.startGroup.y+s.y+21,this.addChild(o))},t.prototype.onCLick=function(e){this.btnUp.labelDisplay.text==GlobalConfig.jifengTiaoyueLg.st100214?(NeiGongControl.ins().cs_neigong_uppro(this.m_RoleSelectPanel.curRole),this.successEff=new MovieClip,this.successEff.loadUrl(ResDataPath.GetUIEffePath("eff_success"),!0,1,function(e){DisplayUtils.dispose(e),ObjectPool.ins().push(e)}),this.m_EffGroup.addChild(this.successEff)):this.isaa?NeiGongControl.ins().cs_neigong_upstar(this.m_RoleSelectPanel.curRole):UserWarn.ins().setBuyGoodsWarn(this.needItemId)},t.prototype.onTap=function(e){UserWarn.ins().setBuyGoodsWarn(this.needItemId)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.fireBall=ObjectPool.ins().pop("MovieClip"),this.fireBall.x=238,this.fireBall.y=355,this.addChildAt(this.fireBall,10),this.fireBall.loadUrl(ResDataPath.GetUIEffePath("eff_neigong_ball"),!0,-1),this.share=new egret.Shape,this.share.graphics.beginFill(65280,1),this.share.graphics.drawRect(0,0,this.barH,2*this.barH),this.share.graphics.endFill(),this.share.x=208,this.share.y=130,this.addChild(this.share),this.fireBall.mask=this.share,this.fireBall.visible=!1,this.percentTf.visible=!1,this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st100297},t}(BaseView);__reflect(NeiGongPanel.prototype,"NeiGongPanel",["ICommonWindowTitle","ICommonWindowRoleSelect"]),window.NeiGongPanel=NeiGongPanel;var GainZsWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GainZsSkin",this.infoTxts=[this.infoTxt0,this.infoTxt1,this.infoTxt2],this.toDays=[this.toDay0,this.toDay1,this.toDay2],this.items=[this.item0,this.item1,this.item2],this.btns=[this.btn0,this.btn1,this.btn2];for(var t=0;t<this.items.length;t++)this.items[t].isShowName(!1);this.priceIcon1.setType(MoneyConst.yuanbao),this.priceIcon2.setType(MoneyConst.yuanbao);var i=new RewardData;i.type=0,i.id=0,i.count=0,this.items[0].data=i,this.layerLevel=VIEW_LAYER_LEVEL.TOP,this.btns[0].label=GlobalConfig.jifengTiaoyueLg.st100726},t.prototype.open=function(){this.m_bg.init("GainZsWin",GlobalConfig.jifengTiaoyueLg.st100727),this.AddClick(this,this.onTap),MessageCenter.addListener(UserZs.ins().postZsData,this.setData,this),MessageCenter.addListener(GameLogic.ins().postLevelChange,this.setData,this),this.setData()},t.prototype.close=function(){MessageCenter.ins().removeAll(this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.setData=function(){null==this.ZhuanShengConfig&&(this.ZhuanShengConfig=GlobalConfig.ins("ZhuanShengConfig"));var e,t=this.ZhuanShengConfig,i=GameLogic.ins().actorModel,o=t.level+1,s=Math.max(i.level,o),n=(GlobalConfig.zhuanShengLevelConfig[s],GlobalConfig.ins("ZhuanShengExpConfig")[s]),r=UserZs.ins();this.toDays[0].textColor=i.level<o?16282482:11050120;var a=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100715,[n.exp]);this.infoTxts[0].textFlow=(new egret.HtmlTextParser).parser(a),e=t.conversionCount-r.upgradeCount[0];var l=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100716,[o-1]),h=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100717,[e]);this.toDays[0].textFlow=(new egret.HtmlTextParser).parser(i.level<o?l:h),this.btns[0].enabled=e>0;var c=t.normalItem,u=GlobalConfig.itemConfig[c],d=UserBag.ins().getBagGoodsCountById(0,c);this.items[1].data=c,d?(this.btns[1].label=GlobalConfig.jifengTiaoyueLg.st100711,this.btns[1].labelDisplay.size=14):(this.btns[1].label=GlobalConfig.jifengTiaoyueLg.st100718,this.btns[1].labelDisplay.size=14),this.btns[1].name=t.normalExp+"",this.priceIcon1.visible=0==d,this.priceIcon1.setPrice(ItemStoreConfig.getStoreByItemID(c).price),this.priceIcon1.name=u.name;var p=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100719,[t.normalExp,u.name]),f=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100720,[d]);this.infoTxts[1].textFlow=(new egret.HtmlTextParser).parser(p+(d?f:""));var g=0;g=UserZs.ins().lv>12?12:UserZs.ins().lv,e=t.normalCount[g]-r.upgradeCount[1];var _=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100717,[e]);this.toDays[1].textFlow=(new egret.HtmlTextParser).parser(_),this.btns[1].enabled=e>0,c=t.advanceItem,u=GlobalConfig.itemConfig[c],d=UserBag.ins().getBagGoodsCountById(0,c),this.items[2].data=c,d?(this.btns[2].label=GlobalConfig.jifengTiaoyueLg.st100711,this.btns[2].labelDisplay.size=14):(this.btns[2].label=GlobalConfig.jifengTiaoyueLg.st100718,this.btns[2].labelDisplay.size=14),this.btns[2].name=t.advanceExp+"",this.priceIcon2.visible=0==d;var m=ItemStoreConfig.getStoreByItemID(c);this.priceIcon2.setPrice(m.price),this.priceIcon2.setType(m.costType),this.priceIcon2.name=u.name;var v=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100719,[t.advanceExp,u.name]),y=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100720,[d]);this.infoTxts[2].textFlow=(new egret.HtmlTextParser).parser(v+(d?y:"")),e=t.advanceCount[g]-r.upgradeCount[2];var b=LanguageString.jifengTiaoyueCh(GlobalConfig.jifengTiaoyueLg.st100717,[e]);this.toDays[2].textFlow=(new egret.HtmlTextParser).parser(b),this.btns[2].enabled=e>0;for(var C=0;3>C;C++)UIHelper.ShowRedPoint(this["btn"+C],UserZs.ins().canGet(C));if(r.lv>=t.maxzslevel)this.m_TurnLab1.visible=!1,this.m_TurnLab2.visible=!1;else{var T=r.lv+1;T>12&&(T=12),this.m_TurnLab1.textFlow=(new egret.HtmlTextParser).parser('<font color="#9de242">'+T+"</font>"+GlobalConfig.jifengTiaoyueLg.st100721+'<font color="#9de242">'+this.ZhuanShengConfig.normalCount[T]+"</font>"),this.m_TurnLab2.textFlow=(new egret.HtmlTextParser).parser('<font color="#9de242">'+T+"</font>"+GlobalConfig.jifengTiaoyueLg.st100721+'<font color="#9de242">'+this.ZhuanShengConfig.advanceCount[T]+"</font>")}},t.prototype.onTap=function(e){switch(e.target){default:var t=this.btns.indexOf(e.target);if(t>-1)if(0==t)UserZs.ins().sendGetXiuWei(t+1);else if(this.btns[t].label==GlobalConfig.jifengTiaoyueLg.st100711)UserZs.ins().sendGetXiuWei(t+1);else{var i=this["priceIcon"+t].getPrice(),o=this.ZhuanShengConfig,s=void 0;s=1==t?o.normalItem:o.advanceItem;var n=ItemStoreConfig.getStoreByItemID(s);if(Checker.Money(n.costType,i)){null==this.ZhuanShengConfig&&(this.ZhuanShengConfig=GlobalConfig.ins("ZhuanShengConfig"));var r=this.ZhuanShengConfig;r=1==t&&r.normalItem||r.advanceItem,UserZs.ins().sendGetXiuWei(t+1,r)}}}},t}(BaseEuiPanel);__reflect(GainZsWin.prototype,"GainZsWin"),ViewManager.ins().reg(GainZsWin,LayerManager.UI_Popup),window.GainZsWin=GainZsWin;var ZsWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainWinSkin",t.layerLevel=VIEW_LAYER_LEVEL.TOP,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skillMainPanel=new SkillMainPanel,this.skillMainPanel.name=GlobalConfig.jifengTiaoyueLg.st100246,this.commonWindowBg.AddChildStack(this.skillMainPanel),this.fuwenPanel=new FuwenPanel,this.fuwenPanel.name=GlobalConfig.jifengTiaoyueLg.st100247,this.commonWindowBg.AddChildStack(this.fuwenPanel),this.neiGongPanel=new NeiGongPanel,this.neiGongPanel.name=GlobalConfig.jifengTiaoyueLg.st100248,this.commonWindowBg.AddChildStack(this.neiGongPanel),this.jingMai=new JingMaiPanel,this.jingMai.name=GlobalConfig.jifengTiaoyueLg.st100249,this.commonWindowBg.AddChildStack(this.jingMai);var t=new PrestigeWin;this.prestige=t,this.commonWindowBg.AddChildStack(t)},t.prototype.destoryView=function(){e.prototype.destoryView.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e?e[0]:0,e?e[1]:0),this.observe(UserZs.ins().postZsData,this.updateRedPoint),this.observe(GameLogic.ins().postLevelChange,this.updateRedPoint),this.observe(GameLogic.ins().postGoldChange,this.updateRedPoint),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.updateRedPoint),this.observe(MessageDef.GUIDE_SKILL_END,this.checkSkillGuide),this.observe(MessageDef.PRESTIGE_RESULT,this.updateRedPoint),this.updateRedPoint()},t.prototype.close=function(){this.prestige.release(),this.commonWindowBg.OnRemoved(),this.skillMainPanel.release()},t.prototype.updateRedPoint=function(){this.commonWindowBg.ShowTalRedPoint(0,UserSkill.ins().checkAllSkillRedPoint()),this.commonWindowBg.ShowTalRedPoint(1,FuwenModel.ins().CalculationFuwenRedPoint()),this.commonWindowBg.ShowTalRedPoint(2,NeiGongControl.ins().checkRed()),this.commonWindowBg.ShowTalRedPoint(3,UserJingMai.ins().IsRed()),this.commonWindowBg.ShowTalRedPoint(4,PrestigeModel.CheckRedPoint())},t.prototype.and=function(e){for(var t=0,i=e;t<i.length;t++){var o=i[t];if(o)return!0}return!1},t.prototype.onTap=function(e){ViewManager.ins().close(this)},t.openCheck=function(){return!0},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){var t=!0;if(0==e)return Deblocking.Check(DeblockingType.TYPE_61);if(1==e)t=Deblocking.Check(DeblockingType.TYPE_07);else if(2==e)t=Deblocking.Check(DeblockingType.TYPE_47);else if(3==e)t=Deblocking.Check(DeblockingType.TYPE_77);else if(4==e)return Deblocking.Check(DeblockingType.TYPE_89);return t},t.prototype.checkSkillGuide=function(){1==Setting.currStep&&19==Setting.currPart?(this.commonWindowBg.returnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.guideEnd,this),GuideUtils.ins().show(this.commonWindowBg.returnBtn,19,1)):1==Setting.currStep&&24==Setting.currPart?(this.commonWindowBg.returnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.guideEnd,this),GuideUtils.ins().show(this.commonWindowBg.returnBtn,24,1)):1==Setting.currStep&&26==Setting.currPart&&(this.commonWindowBg.returnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.guideEnd,this),GuideUtils.ins().show(this.commonWindowBg.returnBtn,26,1))},t.prototype.guideEnd=function(){GuideUtils.ins().next(this.commonWindowBg.returnBtn),this.commonWindowBg.returnBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.guideEnd,this),MessageCenter.ins().dispatch(MessageDef.GUIDE_SKILLBATTLE_END)},t}(BaseEuiPanel);__reflect(ZsWin.prototype,"ZsWin",["ICommonWindow"]),ViewManager.ins().reg(ZsWin,LayerManager.UI_Main),window.ZsWin=ZsWin;var ZsBoss=function(e){function t(){var t=e.call(this)||this;return t.autoClear=!1,t._clearOther=!1,t.canChange=!0,t.bossRankList={},t.sysId=PackageID.ZsBoss,t.regNetMsg(S2cProtocol.sc_zs_boss_list,t.postBossList),t.regNetMsg(S2cProtocol.sc_zs_boss_open,t.postBossOpen),t.regNetMsg(S2cProtocol.sc_zs_boss_remain_time,t.RspRemainTime),t.regNetMsg(S2cProtocol.sc_zs_boss_rank_info,t.postRankInfo),t.regNetMsg(S2cProtocol.sc_zs_boss_lottery_info,t.postLotteryInfo),t.regNetMsg(S2cProtocol.sc_zs_boss_challenge_result,t.postChallengeResult),t.regNetMsg(S2cProtocol.sc_zs_boss_hudun_point,t.RspHudunPoint),t.regNetMsg(S2cProtocol.sc_zs_boss_win_result,t.postWinResult),t.regNetMsg(S2cProtocol.sc_zs_boss_get_my_point,t.RspGetMyPoint),t.regNetMsg(S2cProtocol.sc_zs_boss_talk_max_point,t.RspTalkMaxPoint),t.regNetMsg(S2cProtocol.sc_zs_boss_actordie_feats,t.backActordieFeats),t.regNetMsg(S2cProtocol.sc_world_boss_open,t.worldBossOpenRep),t.regNetMsg(S2cProtocol.sc_world_boss_challenge_result,t.postWorldChallengeResult),t}return __extends(t,e),Object.defineProperty(t.prototype,"promptList",{get:function(){var e=GlobalConfig.jifengTiaoyueLg,t=["",e.st101890,e.st101889,e.st101888,e.st101886,e.st101885,e.st101884];return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wPromptList",{get:function(){var e=GlobalConfig.jifengTiaoyueLg,t=["",e.st101890,e.st101889,e.st101887,e.st101886,e.st101885,e.st101884];return t},enumerable:!0,configurable:!0}),t.prototype.GetBossRankList=function(e){return this.bossRankList[e]||[]},t.ins=function(){return e.ins.call(this)},t.prototype.backActordieFeats=function(e){var t=e.robName,i=e.berobName,o=e.feats;e.totalFeats;UserTips.ins().showTips(t+"击杀了"+i+"获得了"+o+"功勋。")},t.prototype.sendGetBossList=function(){this.Rpc(C2sProtocol.cs_zs_boss_list)},t.prototype.sendRequstChallenge=function(){this.Rpc(C2sProtocol.cs_zs_boss_challenge)},t.prototype.sendRequstBossRank=function(e){var t=new Sproto.cs_zs_boss_rank_request;t.bossId=e,this.Rpc(C2sProtocol.cs_zs_boss_rank,t)},t.prototype.sendJoinChoujiang=function(){GameMap.IsWorldBoss()?this.Rpc(C2sProtocol.cs_world_boss_join_lottery):this.Rpc(C2sProtocol.cs_zs_boss_join_lottery)},t.prototype.sendBuyCd=function(){GameMap.IsWorldBoss()?this.Rpc(C2sProtocol.cs_world_boss_buy_cd):this.Rpc(C2sProtocol.cs_zs_boss_buy_cd)},t.prototype.postBossList=function(e){if(e.boss_info_list){var t=e.boss_info_list.length;this.bossInfoList=[];for(var i=0;t>i;i++)this.bossInfoList.push(new BossInfoData(e.boss_info_list[i]))}this.aliveBossNum=e.alive_boss_num},t.prototype.getBossListLength=function(){var e=0;return null!=this.bossInfoList&&(e=this.bossInfoList.length),e},t.prototype.getBossInfoByIndex=function(e){var t=null;return null!=this.bossInfoList&&e>=0&&e<this.bossInfoList.length&&(t=this.bossInfoList[e]),t},t.prototype.postBossOpen=function(e){this.bossId=e.bossId,this.nextBossId=e.nextBossId,this.acIsOpen=this.bossId>0?!0:!1,this.acIsOpen||(this.hudun=null,this.reliveTime=0),GameGlobal.MessageCenter.dispatch(MessageDef.ZS_BOSS_OPEN)},t.prototype.RspRemainTime=function(e){this.remainTime=.001*e.remain_time,this.reliveTime=.001*e.relive_time,GameGlobal.MessageCenter.dispatch(MessageDef.ZS_BOSS_REMAIN_TIME)},t.prototype.postRankInfo=function(e){this.parseBossRankList(e)},t.prototype.postLotteryInfo=function(e){this.lotteryItemId=e.lotteryItemId,ViewManager.ins().open(ZSBossLotteryWin),this.hudun=0,GameGlobal.MessageCenter.dispatch(MessageDef.ZS_BOSS_HUDUN_POINT)},t.prototype.postChallengeResult=function(e){var t=e.index;t>0?UserTips.ins().showTips(this.promptList[t]):0==t&&ViewManager.ins().close(BossWin)},t.prototype.RspHudunPoint=function(e){this.hudun=e.hudun,GameGlobal.MessageCenter.dispatch(MessageDef.ZS_BOSS_HUDUN_POINT)},t.prototype.postWinResult=function(e){for(var i=[e.first,e.kill,e.myrank],o=e.rewardDatas.length,s=[],n=0;o>n;n++){var r=new RewardData;r.parser(e.rewardDatas[n]),s.push(r)}ViewManager.ins().open(ZsBossResultWin,i,s),t.ins().sendGetBossList()},t.prototype.RspGetMyPoint=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.ZS_BOSS_GETMY_LOTTERY_POINT,e.point)},t.prototype.RspTalkMaxPoint=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.ZS_BOSS_LOTTERY_MAX_POINT,e.name,e.point)},Object.defineProperty(t.prototype,"reliveTime",{get:function(){return this._reliveTime},set:function(e){this._reliveTime!=e&&(this._reliveTime=e,TimerManager.ins().remove(this.timeClock,this),TimerManager.ins().doTimer(1e3,this._reliveTime,this.timeClock,this))},enumerable:!0,configurable:!0}),t.prototype.timeClock=function(){this._reliveTime--,this._reliveTime<=0&&TimerManager.ins().remove(this.timeClock,this)},t.prototype.parseBossRankList=function(e){for(var t=e.bossId,i=e.rank_list.length,o=[],s=0;i>s;s++){var n=e.rank_list[s],r=new WildBossJoinItemData;r.name=n.names,r.value=n.shanghai,o.push(r)}o.sort(function(e,t){return t.value-e.value}),this.bossRankList[t]=o},t.prototype.getBarList=function(e){this.barList=[];for(var t,i=e?GlobalConfig.ins("OtherBoss1Config"):GlobalConfig.ins("WorldBossConfig"),o=1;5>o;o++)if(t=i[o]){var s=GlobalConfig.monstersConfig[t.bossId],n=s.name;n=n.substring(n.length-2),this.barList.push(n)}return this.barList},t.prototype.isZsBossFb=function(e){null==this.otherBoss1Config&&(this.otherBoss1Config=GlobalConfig.ins("OtherBoss1Config"));for(var t,i=1;5>i;i++)if(t=this.otherBoss1Config[i],e==t.fbid)return!0;return!1},t.prototype.checkIsMoreMoney=function(){return GameLogic.ins().actorModel.yb>=30},t.prototype.checkisAutoRelive=function(e){if(void 0===e&&(e=!0),this.reliveTime>0){if(this.autoClear){if(this.checkIsMoreMoney())return e&&this.sendBuyCd(),!1;UserTips.ins().showTips(GlobalConfig.jifengTiaoyueLg.st101699),this.autoClear=!1}return!0}return!1},t.prototype.canPlayBossIndex=function(){null==this.otherBoss1Config&&(this.otherBoss1Config=GlobalConfig.ins("OtherBoss1Config"));for(var e,t=UserZs.ins().lv,i=4;i>=1;i--)if(e=this.otherBoss1Config[i],t>=e.llimit&&t<=e.hlimit&&this.aliveBossNum>=i)return i;return 0},t.prototype.IsRedPoint=function(){var e=this.canPlayBossIndex();return 0!=e?this.bossInfoList[e-1]&&!this.bossInfoList[e-1].kill:!1},t.prototype.canPlayBossName=function(){var e=this.canPlayBossIndex();if(e>0){null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig),null==this.otherBoss1Config&&(this.otherBoss1Config=GlobalConfig.ins("OtherBoss1Config"));var t=this.otherBoss1Config[e];return this.monstersConfig[t.bossId].name}return"转生boss "},Object.defineProperty(t.prototype,"clearOther",{get:function(){return this._clearOther},set:function(e){this._clearOther!=e&&(this._clearOther=e,this.canChange=!1,TimerManager.ins().doTimer(1e3,10,this.overDealy,this,this.dealyOver,this))},enumerable:!0,configurable:!0}),t.prototype.dealyOver=function(){TimerManager.ins().remove(this.overDealy,this),this.canChange=!0},t.prototype.overDealy=function(){},t.prototype.worldBossOpenRep=function(e){this.wBossId=e.bossId,this.wNextBossId=e.nextBossId,this.wAcIsOpen=this.wBossId>0?!0:!1,this.wAcIsOpen||(this.hudun=null,this.reliveTime=0),GameGlobal.MessageCenter.dispatch(MessageDef.WORLD_BOSS_OPEN)},t.prototype.worldBossChallengeReq=function(){this.Rpc(C2sProtocol.cs_world_boss_challenge)},t.prototype.postWorldChallengeResult=function(e){var t=e.index;t>0?UserTips.ins().showTips(this.wPromptList[t]):0==t&&ViewManager.ins().close(WorldBossWin)},t}(BaseSystem);__reflect(ZsBoss.prototype,"ZsBoss");var BossInfoData=function(){function e(e){this.bossId=e.bossId,this.challengeIn=e.challengeIn,this.kill=e.kill}return e}();__reflect(BossInfoData.prototype,"BossInfoData"),MessageCenter.compile(ZsBoss),window.ZsBoss=ZsBoss,window.BossInfoData=BossInfoData;var ZSBossLotteryWin=function(e){function t(){var t=e.call(this)||this;return t.layerLevel=VIEW_LAYER_LEVEL.MIDDLE,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ZSBossLotterySkin",this.bar.labelFunction=function(){return""},this.languageTxt.text=GlobalConfig.jifengTiaoyueLg.st101578,this.languageTxt0.text=GlobalConfig.jifengTiaoyueLg.st101579,this.languageTxt1.text=GlobalConfig.jifengTiaoyueLg.st101580,this.languageTxt2.text=GlobalConfig.jifengTiaoyueLg.st101581},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.maxPoint.text=GlobalConfig.jifengTiaoyueLg.st101861,this.m_bg.init("ZSBossLotteryWin",GlobalConfig.jifengTiaoyueLg.st101575),this.AddClick(this.play,this.onTap),this.AddClick(this.giveUp,this.onTap),MessageCenter.ins().addListener(MessageDef.ZS_BOSS_GETMY_LOTTERY_POINT,this.getMyPoint,this),MessageCenter.ins().addListener(MessageDef.ZS_BOSS_LOTTERY_MAX_POINT,this.getMaxPoint,this),this.statu=e[0]?e[0]:0,this.bar.maximum=100,this.refushInfo(),this.currentState="select"},t.prototype.close=function(){MessageCenter.ins().removeListener(MessageDef.ZS_BOSS_GETMY_LOTTERY_POINT,this.getMyPoint,this),MessageCenter.ins().removeListener(MessageDef.ZS_BOSS_LOTTERY_MAX_POINT,this.getMaxPoint,this),TimerManager.ins().remove(this.refushBar,this)},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.refushInfo=function(){this.times=0,this.goods.data=ZsBoss.ins().lotteryItemId,TimerManager.ins().doTimer(100,100,this.refushBar,this,this.TimeOver,this),this.timeLabel.text="10秒"},t.prototype.refushBar=function(){this.times++,this.bar.value=100-this.times,this.timeLabel.text=Math.floor(10-this.times/10)+"秒"},t.prototype.TimeOver=function(){"select"==this.currentState&&ViewManager.ins().close(t)},t.prototype.getMyPoint=function(e){return e?(this.currentState="play",void(this.point.text="("+e+")")):void console.error("BossLottery:MyPoint Is Null!!!")},t.prototype.getMaxPoint=function(e,t){this.maxPoint.textFlow=(new egret.HtmlTextParser).parser("<font color = '#FFB82A'>"+e+"</font>"+GlobalConfig.jifengTiaoyueLg.st101576+"<font color = '#FFB82A'>"+t+"</font>"+GlobalConfig.jifengTiaoyueLg.st101577)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.giveUp:ViewManager.ins().close(t);break;case this.play:0==this.statu?ZsBoss.ins().sendJoinChoujiang():1==this.statu&&GuildWar.ins().SendLotteryStart()}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(ZSBossLotteryWin.prototype,"ZSBossLotteryWin"),window.ZSBossLotteryWin=ZSBossLotteryWin;var ZsBossPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName=GlobalConfig.jifengTiaoyueLg.st100465+"BOSS",t.skinName="ZSBossPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.enterGame.label=GlobalConfig.jifengTiaoyueLg.st100501,this.zsbossCenterView.m_Lan1.text=GlobalConfig.jifengTiaoyueLg.st100502},t.prototype.open=function(){this.childrenCreated(),this.AddClick(this.zsbossCenterView.rank,this.onTouch),this.AddClick(this.enterGame,this.onTouch),MessageCenter.addListener(ZsBoss.ins().postBossList,this.refushBtn,this),this.initData(),this.refushBtn(),ZsBoss.ins().bossId>0?this.m_index=ZsBoss.ins().bossId:this.m_index=ZsBoss.ins().nextBossId,this.refreshCenter(this.otherBoss1Config[this.m_index])},t.prototype.close=function(){},t.prototype.release=function(){this.close(),this.removeObserve(),DisplayUtils.dispose(this.centerBossImage),this.centerBossImage=null},t.prototype.initMc=function(){this.centerBossImage||(this.centerBossImage=new MovieClip,this.centerBossImage.scaleX=-1,this.centerBossImage.scaleY=1,this.centerBossImage.touchEnabled=!1,this.m_AnimGroup.addChild(this.centerBossImage))},t.prototype.initData=function(){null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig),null==this.otherBoss1Config&&(this.otherBoss1Config=GlobalConfig.ins("OtherBoss1Config"))},t.prototype.refreshCenter=function(e){if(null==e)return void Main.errorBack(GlobalConfig.jifengTiaoyueLg.st100499);var t=ZsBoss.ins().acIsOpen?GlobalConfig.jifengTiaoyueLg.st100497:GlobalConfig.jifengTiaoyueLg.st100498;this.zsbossCenterView.rank.textFlow=(new egret.HtmlTextParser).parser("<font color = '#23C42A'><u>"+t+"</u></fomt>"),this.zsbossCenterView.bossName.text=this.monstersConfig[e.bossId].name+"("+e.llimit+"-"+e.hlimit+GlobalConfig.jifengTiaoyueLg.st100067+")",this.zsbossCenterView.rewardList.itemRenderer=ItemBase,this.zsbossCenterView.rewardList.dataProvider=new eui.ArrayCollection(e.showReward),this.zsbossCenterView.rewardList.validateNow();for(var i=0;i<this.zsbossCenterView.rewardList.numChildren;++i){var o=this.zsbossCenterView.rewardList.getChildAt(i);o&&o instanceof ItemBase&&o.showItemEffect()}this.zsBossOpenTimeLable.text=this.otherBoss1Config[this.m_index].openTiem,this.initMc(),this.centerBossImage.loadUrl(ResDataPath.GetMonsterBodyPath(this.monstersConfig[e.bossId].avatar+"_3s"),!0,-1),this.m_ElementImg.source=ResDataPath.GetElementImgName(this.monstersConfig.elementType)},t.prototype.refushBtn=function(){var e=ZsBoss.ins();e.acIsOpen?this.zsbossCenterView.sign.textFlow=(new egret.HtmlTextParser).parser("<font color = '#27e327'>"+GlobalConfig.jifengTiaoyueLg.st100500+"</fomt>"):this.zsbossCenterView.sign.textFlow=(new egret.HtmlTextParser).parser("<font color = '#ffcc00'>"+GlobalConfig.jifengTiaoyueLg.st100279+"</fomt>")},t.prototype.onTouch=function(e){var t=e.target;switch(t==this.zsbossCenterView.rank&&this.openRankWin(this.m_index),e.target){case this.enterGame:if(!ZsBoss.ins().acIsOpen)return void UserTips.ins().showTips(ZsBoss.ins().promptList[5]);ZsBoss.ins().sendRequstChallenge()}},t.prototype.openRankWin=function(e){ViewManager.ins().open(ZsBossRankWin,e)},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(ZsBossPanel.prototype,"ZsBossPanel",["ICommonWindowTitle"]),window.ZsBossPanel=ZsBossPanel;var ZsBossRankWin=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ZSBossJoinSkin",this.list.itemRenderer=WildBossJoinItem},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.index=e[0],this.m_bg.init("ZsBossRankWin",GlobalConfig.jifengTiaoyueLg.st101893),MessageCenter.addListener(ZsBoss.ins().postRankInfo,this.refushListInfo,this),ZsBoss.ins().sendRequstBossRank(this.index),this.refushListInfo()},t.prototype.close=function(){},t.prototype.refushListInfo=function(){this.list.dataProvider=new eui.ArrayCollection(ZsBoss.ins().GetBossRankList(this.index))},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(ZsBossRankWin.prototype,"ZsBossRankWin"),window.ZsBossRankWin=ZsBossRankWin;var ZsBossResultWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"closeBtn",{get:function(){return this.fightResultBg.closeBtn},enumerable:!0,configurable:!0}),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ZsBossResultSkin",this.fightResultBg.currentState="result",this.layerLevel=VIEW_LAYER_LEVEL.TOP,this.closeBtn.labelDisplay.size=18},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.first.text=e[0][0],this.kill.text=e[0][1],this.myrank.text=GlobalConfig.jifengTiaoyueLg.st100403+e[0][2],this.list.dataProvider=new eui.ArrayCollection(e[1]),this.s=10,this.updateCloseBtnLabel(),TimerManager.ins().doTimer(1e3,10,this.updateCloseBtnLabel,this),this.AddClick(this.closeBtn,this.onTap),this.fightResultBg.SetState("win")},t.prototype.close=function(){TimerManager.ins().remove(this.updateCloseBtnLabel,this),GameMap.fubenID>0&&UserFb.ins().sendExitFb()},t.prototype.onTap=function(){ViewManager.ins().close(this)},t.prototype.updateCloseBtnLabel=function(){this.s--,this.s<=0&&ViewManager.ins().close(this),this.closeBtn.label=this.closeBtn.name+"("+this.s+"s)"},t}(BaseEuiPanel);__reflect(ZsBossResultWin.prototype,"ZsBossResultWin"),ViewManager.ins().reg(ZsBossResultWin,LayerManager.UI_Popup),window.ZsBossResultWin=ZsBossResultWin;var ZsBossRewardShowWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="ZSBossRewardSkin",t.itemList1.itemRenderer=ItemBase,t.itemList2.itemRenderer=ItemBase,t.itemList3.itemRenderer=ItemBase,t.itemList4.itemRenderer=ItemBase,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isZsBoss=e[0],this.AddClick(this.tab,this.selectIndexChange),this.commonWindowBg.OnAdded(this),this.tab.dataProvider=new eui.ArrayCollection(ZsBoss.ins().getBarList(this.isZsBoss)),this.selectIndexChange(null)},t.prototype.close=function(){this.commonWindowBg.OnRemoved()},t.prototype.selectIndexChange=function(e){var t=this.tab.selectedIndex;null==this.monstersConfig&&(this.monstersConfig=GlobalConfig.monstersConfig);var i=this.isZsBoss?GlobalConfig.ins("OtherBoss1Config")[t+1]:GlobalConfig.ins("WorldBossConfig")[t+1];this.bossName.text=this.monstersConfig[i.bossId].name+"("+i.llimit+"-"+i.hlimit+GlobalConfig.jifengTiaoyueLg.st100067+")",this.ranklabel1.text=i.rankname[0],this.ranklabel2.text=i.rankname[1],this.ranklabel3.text=i.rankname[2],this.ranklabel4.text=i.rankname[3],this.ranklabel5.text=i.rankname[4],this.ranklabel6.text=i.rankname[5],this.itemList1.dataProvider=new eui.ArrayCollection(i.rank1),this.itemList2.dataProvider=new eui.ArrayCollection(i.rank2),this.itemList3.dataProvider=new eui.ArrayCollection(i.rank3),this.itemList4.dataProvider=new eui.ArrayCollection(i.rank4),this.itemList5.data=i.killReward,this.itemList6.data=i.shield[0].reward,this.setEff(this.itemList1),this.setEff(this.itemList2),this.setEff(this.itemList3),this.setEff(this.itemList4)
},t.prototype.setEff=function(e){e.validateNow();for(var t=0;t<e.numChildren;++t){var i=e.getChildAt(t);i&&i.showItemEffect()}},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t}(BaseEuiPanel);__reflect(ZsBossRewardShowWin.prototype,"ZsBossRewardShowWin",["ICommonWindow"]),ViewManager.ins().reg(ZsBossRewardShowWin,LayerManager.UI_Main),window.ZsBossRewardShowWin=ZsBossRewardShowWin;var ZsBossRuleSpeak=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="HelpTipsSkin"},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[2];if(i)this.textInfo.textFlow=TextFlowMaker.generateTextFlow(i);else{var o=e[0],s=GlobalConfig.ins("HelpInfoConfig")[o];s?this.textInfo.textFlow=TextFlowMaker.generateTextFlow(s.text):this.textInfo.text=GlobalConfig.jifengTiaoyueLg.st101892}this.AddClick(this,this.otherClose);var n=e[1];n&&(this.txtTitle.textFlow=TextFlowMaker.generateTextFlow(n))},t.prototype.close=function(){},t.prototype.otherClose=function(e){ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiPanel);__reflect(ZsBossRuleSpeak.prototype,"ZsBossRuleSpeak"),window.ZsBossRuleSpeak=ZsBossRuleSpeak;var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_activity_buyGoods_request=t,__reflect(t.prototype,"Sproto.cs_activity_buyGoods_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.activityID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.activityID&&this.se.wi(this.activityID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_activity_send_dabiao_info_request=i,__reflect(i.prototype,"Sproto.cs_activity_send_dabiao_info_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.activityID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.activityID&&this.se.wi(this.activityID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_activity_send_level_info_request=o,__reflect(o.prototype,"Sproto.cs_activity_send_level_info_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.index&&this.se.wi(this.index,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_activity_send_reward_request=s,__reflect(s.prototype,"Sproto.cs_activity_send_reward_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.activityId=this.de.ri();break;case 1:this.buyNum=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.activityId&&this.se.wi(this.activityId,0),void 0!=this.buyNum&&this.se.wi(this.buyNum,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_activity_warorder_buylv_request=n,__reflect(n.prototype,"Sproto.cs_activity_warorder_buylv_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.activityId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.activityId&&this.se.wi(this.activityId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_activity_warorder_buyscale_request=r,__reflect(r.prototype,"Sproto.cs_activity_warorder_buyscale_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.activityId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.activityId&&this.se.wi(this.activityId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_activity_warorder_exreward_request=a,__reflect(a.prototype,"Sproto.cs_activity_warorder_exreward_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.activityId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.activityId&&this.se.wi(this.activityId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_activity_warorder_reward_request=l,__reflect(l.prototype,"Sproto.cs_activity_warorder_reward_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.state&&this.se.wi(this.state,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_add_small_routine_state_request=h,__reflect(h.prototype,"Sproto.cs_add_small_routine_state_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.activityId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.activityId&&this.se.wi(this.activityId,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_luckywheel_hunt_request=c,__reflect(c.prototype,"Sproto.cs_luckywheel_hunt_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_luckywheel_rank_request=u,__reflect(u.prototype,"Sproto.cs_luckywheel_rank_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_luckywheel_record_request=d,__reflect(d.prototype,"Sproto.cs_luckywheel_record_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.index&&this.se.wi(this.index,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_mond_Sign_send_reward_request=p,__reflect(p.prototype,"Sproto.cs_mond_Sign_send_reward_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_one_recharge_activity_gain_request=f,__reflect(f.prototype,"Sproto.cs_one_recharge_activity_gain_request");var g=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_one_recharge_activity_state_request=g,__reflect(g.prototype,"Sproto.cs_one_recharge_activity_state_request");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.activityId=this.de.ri();break;case 1:this.buyNum=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.activityId&&this.se.wi(this.activityId,0),void 0!=this.buyNum&&this.se.wi(this.buyNum,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_rebate_activity_buy_request=_,__reflect(_.prototype,"Sproto.cs_rebate_activity_buy_request");var m=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.activityId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.activityId&&this.se.wi(this.activityId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_rebate_activity_gain_other_awards_request=m,__reflect(m.prototype,"Sproto.cs_rebate_activity_gain_other_awards_request");var v=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_rebate_activity_info_request=v,__reflect(v.prototype,"Sproto.cs_rebate_activity_info_request");var y=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_small_routine_gain_request=y,__reflect(y.prototype,"Sproto.cs_small_routine_gain_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.startTime=this.de.ri();break;case 2:this.endTime=this.de.ri();break;case 3:this.type=this.de.ri();break;case 4:this.openState=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.startTime&&this.se.wi(this.startTime,1),void 0!=this.endTime&&this.se.wi(this.endTime,2),void 0!=this.type&&this.se.wi(this.type,3),void 0!=this.openState&&this.se.wi(this.openState,4),this.se.Close()},t}(e.SprotoTypeBase);e.activity_base_type=t,__reflect(t.prototype,"Sproto.activity_base_type");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.value&&this.se.wi(this.value,1),this.se.Close()},t}(e.SprotoTypeBase);e.activity_dabiao_data=i,__reflect(i.prototype,"Sproto.activity_dabiao_data");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,23,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type01=this.de.ro(n);break;case 1:this.type02=this.de.ro(r);break;case 2:this.type03=this.de.ro(a);break;case 3:this.type04=this.de.ro(l);break;case 4:this.type05=this.de.ro(h);break;case 5:this.type06=this.de.ro(c);break;case 6:this.type07=this.de.ro(u);break;case 7:this.type08=this.de.ro(d);break;case 8:this.type09=this.de.ro(f);break;case 9:this.type10=this.de.ro(g);break;case 10:this.type11=this.de.ro(_);break;case 11:this.type12=this.de.ro(m);break;case 12:this.type13=this.de.ro(v);break;case 13:this.type14=this.de.ro(y);break;case 14:this.type20=this.de.ro(L);break;case 15:this.type15=this.de.ro(b);break;case 16:this.type302=this.de.ro(T);break;case 17:this.type303=this.de.ro(T);break;case 18:this.type21=this.de.ro(P);break;case 19:this.type22=this.de.ro(k);break;case 20:this.type31=this.de.ro(R);break;case 21:this.type32=this.de.ro(D);break;case 22:this.type35=this.de.ro(A);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type01&&this.se.wo(this.type01,0),void 0!=this.type02&&this.se.wo(this.type02,1),void 0!=this.type03&&this.se.wo(this.type03,2),void 0!=this.type04&&this.se.wo(this.type04,3),void 0!=this.type05&&this.se.wo(this.type05,4),void 0!=this.type06&&this.se.wo(this.type06,5),void 0!=this.type07&&this.se.wo(this.type07,6),void 0!=this.type08&&this.se.wo(this.type08,7),void 0!=this.type09&&this.se.wo(this.type09,8),void 0!=this.type10&&this.se.wo(this.type10,9),void 0!=this.type11&&this.se.wo(this.type11,10),void 0!=this.type12&&this.se.wo(this.type12,11),void 0!=this.type13&&this.se.wo(this.type13,12),void 0!=this.type14&&this.se.wo(this.type14,13),void 0!=this.type20&&this.se.wo(this.type20,14),void 0!=this.type15&&this.se.wo(this.type15,15),void 0!=this.type302&&this.se.wo(this.type302,16),void 0!=this.type303&&this.se.wo(this.type303,17),void 0!=this.type21&&this.se.wo(this.type21,18),void 0!=this.type22&&this.se.wo(this.type22,19),void 0!=this.type31&&this.se.wo(this.type31,20),void 0!=this.type32&&this.se.wo(this.type32,21),void 0!=this.type35&&this.se.wo(this.type35,22),this.se.Close()},t}(e.SprotoTypeBase);e.activity_data_collection=o,__reflect(o.prototype,"Sproto.activity_data_collection");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.value&&this.se.wi(this.value,1),this.se.Close()},t}(e.SprotoTypeBase);e.activity_luckywheel_data=s,__reflect(s.prototype,"Sproto.activity_luckywheel_data");var n=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.record=this.de.ria();break;case 2:this.nums=this.de.ria();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.record&&this.se.wia(this.record,1),void 0!=this.nums&&this.se.wia(this.nums,2),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type01=n,__reflect(n.prototype,"Sproto.activity_type01");var r=function(e){function i(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.buyData=this.de.ria();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.buyData&&this.se.wia(this.buyData,1),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type02=r,__reflect(r.prototype,"Sproto.activity_type02");var a=function(e){function i(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.record=this.de.ri();break;case 2:this.day=this.de.ri();break;case 4:this.rechargeCount=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.record&&this.se.wi(this.record,1),void 0!=this.day&&this.se.wi(this.day,2),void 0!=this.rechargeCount&&this.se.wi(this.rechargeCount,4),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type03=a,__reflect(a.prototype,"Sproto.activity_type03");var l=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type04=l,__reflect(l.prototype,"Sproto.activity_type04");var h=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.record=this.de.ri();break;case 2:this.logTime=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.record&&this.se.wi(this.record,1),void 0!=this.logTime&&this.se.wi(this.logTime,2),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type05=h,__reflect(h.prototype,"Sproto.activity_type05");var c=function(e){function i(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.record=this.de.ri();break;case 2:this.todayRecharge=this.de.ri();break;case 3:this.rechargeDays=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.record&&this.se.wi(this.record,1),void 0!=this.todayRecharge&&this.se.wi(this.todayRecharge,2),void 0!=this.rechargeDays&&this.se.wi(this.rechargeDays,3),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type06=c,__reflect(c.prototype,"Sproto.activity_type06");var u=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.recharge=this.de.ri();break;case 2:this.status=this.de.rb();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.recharge&&this.se.wi(this.recharge,1),void 0!=this.status&&this.se.wb(this.status,2),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type07=u,__reflect(u.prototype,"Sproto.activity_type07");var d=function(e){function i(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.datas=this.de.roa(p);break;case 3:this.status=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.datas&&this.se.woa(this.datas,1),void 0!=this.status&&this.se.wi(this.status,3),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type08=d,__reflect(d.prototype,"Sproto.activity_type08");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;case 1:this.status=this.de.ri();break;case 2:this.day=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.status&&this.se.wi(this.status,1),void 0!=this.day&&this.se.wi(this.day,2),this.se.Close()},t}(e.SprotoTypeBase);e.activity_type08_item=p,__reflect(p.prototype,"Sproto.activity_type08_item");var f=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.buyData=this.de.ria();break;case 2:this.day=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.buyData&&this.se.wia(this.buyData,1),void 0!=this.day&&this.se.wi(this.day,2),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type09=f,__reflect(f.prototype,"Sproto.activity_type09");var g=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.cfgids=this.de.roa(G);break;case 2:this.recharge=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.cfgids&&this.se.woa(this.cfgids,1),void 0!=this.recharge&&this.se.wi(this.recharge,2),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type10=g,__reflect(g.prototype,"Sproto.activity_type10");var _=function(e){function i(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.cfgids=this.de.roa(G);break;case 2:this.recharge=this.de.ri();break;case 3:this.diffDay=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.cfgids&&this.se.woa(this.cfgids,1),void 0!=this.recharge&&this.se.wi(this.recharge,2),void 0!=this.diffDay&&this.se.wi(this.diffDay,3),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type11=_,__reflect(_.prototype,"Sproto.activity_type11");var m=function(e){function i(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.eggBrokenAwards=this.de.ri();break;case 2:this.eggBrokenCount=this.de.ri();break;case 3:this.diffDay=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.eggBrokenAwards&&this.se.wi(this.eggBrokenAwards,1),void 0!=this.eggBrokenCount&&this.se.wi(this.eggBrokenCount,2),void 0!=this.diffDay&&this.se.wi(this.diffDay,3),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type12=m,__reflect(m.prototype,"Sproto.activity_type12");var v=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type13=v,__reflect(v.prototype,"Sproto.activity_type13");var y=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.cfgids=this.de.roa(G);break;case 2:this.accumulativeConsumption=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.cfgids&&this.se.woa(this.cfgids,1),void 0!=this.accumulativeConsumption&&this.se.wi(this.accumulativeConsumption,2),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type14=y,__reflect(y.prototype,"Sproto.activity_type14");var b=function(e){function i(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.buyids=this.de.roa(C);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.buyids&&this.se.woa(this.buyids,1),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type15=b,__reflect(b.prototype,"Sproto.activity_type15");var C=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.buyServerRunDay=this.de.ri();break;case 2:this.buyPrice=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.buyServerRunDay&&this.se.wi(this.buyServerRunDay,1),void 0!=this.buyPrice&&this.se.wi(this.buyPrice,2),this.se.Close()},t}(e.SprotoTypeBase);e.activity_type15_buyids=C,__reflect(C.prototype,"Sproto.activity_type15_buyids");var T=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.records=this.de.ri();break;case 2:this.recharge=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.records&&this.se.wi(this.records,1),void 0!=this.recharge&&this.se.wi(this.recharge,2),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type16=T,__reflect(T.prototype,"Sproto.activity_type16");var S=function(e){function i(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.dayIndex=this.de.ri();break;case 2:this.isGet=this.de.ri();break;case 3:this.canGet=this.de.rb();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.dayIndex&&this.se.wi(this.dayIndex,1),void 0!=this.isGet&&this.se.wi(this.isGet,2),void 0!=this.canGet&&this.se.wb(this.canGet,3),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type17=S,__reflect(S.prototype,"Sproto.activity_type17");var w=function(e){function i(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.lastTime=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.lastTime&&this.se.wi(this.lastTime,1),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type18=w,__reflect(w.prototype,"Sproto.activity_type18");var I=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.count=this.de.ri();break;case 2:this.itemState=this.de.roa(G);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.count&&this.se.wi(this.count,1),void 0!=this.itemState&&this.se.woa(this.itemState,2),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type19=I,__reflect(I.prototype,"Sproto.activity_type19");var G=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.state&&this.se.wi(this.state,0),this.se.Close()},t}(e.SprotoTypeBase);e.activity_type19_item_data=G,__reflect(G.prototype,"Sproto.activity_type19_item_data");var L=function(e){function i(t){return void 0===t&&(t=null),e.call(this,8,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.signInDay=this.de.ri();break;case 3:this.mondCnt=this.de.ri();break;case 4:this.siganInData=this.de.ria();break;case 5:this.todaySigan=this.de.ri();break;case 6:this.month=this.de.ri();break;case 7:this.mondAllCnt=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.signInDay&&this.se.wi(this.signInDay,1),void 0!=this.mondCnt&&this.se.wi(this.mondCnt,3),void 0!=this.siganInData&&this.se.wia(this.siganInData,4),void 0!=this.todaySigan&&this.se.wi(this.todaySigan,5),void 0!=this.month&&this.se.wi(this.month,6),void 0!=this.mondAllCnt&&this.se.wi(this.mondAllCnt,7),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type20=L,__reflect(L.prototype,"Sproto.activity_type20");var P=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.count=this.de.ri();break;case 2:this.rank=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.count&&this.se.wi(this.count,1),void 0!=this.rank&&this.se.wi(this.rank,2),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type21=P,__reflect(P.prototype,"Sproto.activity_type21");var k=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.count=this.de.ri();break;case 2:this.rank=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.count&&this.se.wi(this.count,1),void 0!=this.rank&&this.se.wi(this.rank,2),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type22=k,__reflect(k.prototype,"Sproto.activity_type22");var E=function(e){function i(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.giftBag=this.de.ria();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.giftBag&&this.se.wia(this.giftBag,1),this.se.Close()
},i}(e.SprotoTypeBase);e.activity_type30=E,__reflect(E.prototype,"Sproto.activity_type30");var R=function(e){function i(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.goldPool=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.goldPool&&this.se.wi(this.goldPool,1),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type31=R,__reflect(R.prototype,"Sproto.activity_type31");var D=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.count=this.de.ri();break;case 2:this.rank=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.count&&this.se.wi(this.count,1),void 0!=this.rank&&this.se.wi(this.rank,2),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type32=D,__reflect(D.prototype,"Sproto.activity_type32");var M=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.yuanbao=this.de.ro(nt);break;case 2:this.money=this.de.ro(st);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.yuanbao&&this.se.wo(this.yuanbao,1),void 0!=this.money&&this.se.wo(this.money,2),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type33=M,__reflect(M.prototype,"Sproto.activity_type33");var A=function(e){function i(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.baseData=this.de.ro(t);break;case 1:this.exp=this.de.ri();break;case 2:this.lv=this.de.ri();break;case 3:this.scala=this.de.ri();break;case 4:this.extraExp=this.de.ri();break;case 5:this.lvList=this.de.roa(B);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.exp&&this.se.wi(this.exp,1),void 0!=this.lv&&this.se.wi(this.lv,2),void 0!=this.scala&&this.se.wi(this.scala,3),void 0!=this.extraExp&&this.se.wi(this.extraExp,4),void 0!=this.lvList&&this.se.woa(this.lvList,5),this.se.Close()},i}(e.SprotoTypeBase);e.activity_type35=A,__reflect(A.prototype,"Sproto.activity_type35");var B=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.reward1=this.de.ri();break;case 1:this.reward2=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.reward1&&this.se.wi(this.reward1,0),void 0!=this.reward2&&this.se.wi(this.reward2,1),this.se.Close()},t}(e.SprotoTypeBase);e.listinfo=B,__reflect(B.prototype,"Sproto.listinfo");var x=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.luckywheel_item=x,__reflect(x.prototype,"Sproto.luckywheel_item");var U=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.itemid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.itemid&&this.se.wi(this.itemid,1),this.se.Close()},t}(e.SprotoTypeBase);e.luckywheel_record=U,__reflect(U.prototype,"Sproto.luckywheel_record");var O=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.ro(st);break;case 1:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.wo(this.data,0),void 0!=this.id&&this.se.wi(this.id,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_activity_RMB_info_request=O,__reflect(O.prototype,"Sproto.sc_activity_RMB_info_request");var N=function(e){function t(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 1:this.acId=this.de.ri();break;case 2:this.index=this.de.ri();break;case 3:this.draw=this.de.ri();break;case 4:this.value=this.de.ri();break;case 5:this.rankInfo=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.acId&&this.se.wi(this.acId,1),void 0!=this.index&&this.se.wi(this.index,2),void 0!=this.draw&&this.se.wi(this.draw,3),void 0!=this.value&&this.se.wi(this.value,4),void 0!=this.rankInfo&&this.se.woa(this.rankInfo,5),this.se.Close()},t}(e.SprotoTypeBase);e.sc_activity_dabiao_info_request=N,__reflect(N.prototype,"Sproto.sc_activity_dabiao_info_request");var q=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.draw=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.draw&&this.se.wi(this.draw,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_activity_dabiao_reward_request=q,__reflect(q.prototype,"Sproto.sc_activity_dabiao_reward_request");var W=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.datas=this.de.roa(o);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.datas&&this.se.woa(this.datas,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_activity_init_info_request=W,__reflect(W.prototype,"Sproto.sc_activity_init_info_request");var j=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.data=this.de.ro(o);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.data&&this.se.wo(this.data,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_activity_reward_result_request=j,__reflect(j.prototype,"Sproto.sc_activity_reward_result_request");var F=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;case 1:this.data=this.de.ro(o);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.data&&this.se.wo(this.data,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_activity_update_info_request=F,__reflect(F.prototype,"Sproto.sc_activity_update_info_request");var H=function(t){function i(e){return void 0===e&&(e=null),t.call(this,1,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.data=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_activity_warorder_exreward_request=H,__reflect(H.prototype,"Sproto.sc_activity_warorder_exreward_request");var V=function(t){function i(e){return void 0===e&&(e=null),t.call(this,1,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.data=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_activity_warorder_reward_request=V,__reflect(V.prototype,"Sproto.sc_activity_warorder_reward_request");var z=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.ro(st);break;case 1:this.id=this.de.ri();break;case 2:this.tiemCd=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.wo(this.data,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.tiemCd&&this.se.wi(this.tiemCd,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_activity_yuanbao_request=z,__reflect(z.prototype,"Sproto.sc_activity_yuanbao_request");var Y=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.state&&this.se.wi(this.state,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_add_small_routine_state_request=Y,__reflect(Y.prototype,"Sproto.sc_add_small_routine_state_request");var Z=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.luckyWheelRecord=this.de.ro(U);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.luckyWheelRecord&&this.se.wo(this.luckyWheelRecord,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_luckywheel_add_record_request=Z,__reflect(Z.prototype,"Sproto.sc_luckywheel_add_record_request");var K=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.goldPool=this.de.ri();break;case 1:this.activityId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.goldPool&&this.se.wi(this.goldPool,0),void 0!=this.activityId&&this.se.wi(this.activityId,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_luckywheel_goldPool_broadcast_request=K,__reflect(K.prototype,"Sproto.sc_luckywheel_goldPool_broadcast_request");var J=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.items=this.de.roa(x);break;case 2:this.activityId=this.de.ri();break;case 3:this.goldCount=this.de.ri();break;case 4:this.luckyCount=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.items&&this.se.woa(this.items,1),void 0!=this.activityId&&this.se.wi(this.activityId,2),void 0!=this.goldCount&&this.se.wi(this.goldCount,3),void 0!=this.luckyCount&&this.se.wi(this.luckyCount,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_luckywheel_hunt_request=J,__reflect(J.prototype,"Sproto.sc_luckywheel_hunt_request");var Q=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.rankInfo=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.rankInfo&&this.se.woa(this.rankInfo,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_luckywheel_rank_request=Q,__reflect(Q.prototype,"Sproto.sc_luckywheel_rank_request");var X=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.luckywheelRecord=this.de.roa(U);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.luckywheelRecord&&this.se.woa(this.luckywheelRecord,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_luckywheel_record_request=X,__reflect(X.prototype,"Sproto.sc_luckywheel_record_request");var $=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.code=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.code&&this.se.wi(this.code,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_one_recharge_activity_gain_request=$,__reflect($.prototype,"Sproto.sc_one_recharge_activity_gain_request");var et=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.awardState=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.awardState&&this.se.wi(this.awardState,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_one_recharge_activity_state_request=et,__reflect(et.prototype,"Sproto.sc_one_recharge_activity_state_request");var tt=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.code=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.code&&this.se.wi(this.code,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_rebate_activity_buy_request=tt,__reflect(tt.prototype,"Sproto.sc_rebate_activity_buy_request");var it=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.code=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.code&&this.se.wi(this.code,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_rebate_activity_gain_other_awards_request=it,__reflect(it.prototype,"Sproto.sc_rebate_activity_gain_other_awards_request");var ot=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.activityId=this.de.ri();break;case 1:this.gainNum=this.de.ri();break;case 2:this.dayKey=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.activityId&&this.se.wi(this.activityId,0),void 0!=this.gainNum&&this.se.wi(this.gainNum,1),void 0!=this.dayKey&&this.se.wi(this.dayKey,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_rebate_activity_info_request=ot,__reflect(ot.prototype,"Sproto.sc_rebate_activity_info_request");var st=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 1:this.status=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.status&&this.se.wi(this.status,1),this.se.Close()},t}(e.SprotoTypeBase);e.type33BaseInfo=st,__reflect(st.prototype,"Sproto.type33BaseInfo");var nt=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.status=this.de.ri();break;case 1:this.coolTime=this.de.ri();break;case 2:this.num=this.de.ri();break;case 3:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.status&&this.se.wi(this.status,0),void 0!=this.coolTime&&this.se.wi(this.coolTime,1),void 0!=this.num&&this.se.wi(this.num,2),void 0!=this.count&&this.se.wi(this.count,3),this.se.Close()},t}(e.SprotoTypeBase);e.type33Yuanbao=nt,__reflect(nt.prototype,"Sproto.type33Yuanbao")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.startTime=this.de.ri();break;case 2:this.endTime=this.de.ri();break;case 3:this.type=this.de.ri();break;case 4:this.openState=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.startTime&&this.se.wi(this.startTime,1),void 0!=this.endTime&&this.se.wi(this.endTime,2),void 0!=this.type&&this.se.wi(this.type,3),void 0!=this.openState&&this.se.wi(this.openState,4),this.se.Close()},t}(e.SprotoTypeBase);e.activityw_base_type=t,__reflect(t.prototype,"Sproto.activityw_base_type");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.dresshunt_item=i,__reflect(i.prototype,"Sproto.dresshunt_item");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.items=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.items&&this.se.woa(this.items,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_activityw_dresshunt_ret_request=o,__reflect(o.prototype,"Sproto.sc_activityw_dresshunt_ret_request");var s=function(t){function i(e){return void 0===e&&(e=null),t.call(this,6,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.baseData=this.de.ro(e.activity_base_type);break;case 1:this.status=this.de.ri();break;case 2:this.today=this.de.ri();break;case 3:this.count=this.de.ri();break;case 4:this.personCounts=this.de.ria();break;case 5:this.globalCounts=this.de.ria();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.baseData&&this.se.wo(this.baseData,0),void 0!=this.status&&this.se.wi(this.status,1),void 0!=this.today&&this.se.wi(this.today,2),void 0!=this.count&&this.se.wi(this.count,3),void 0!=this.personCounts&&this.se.wia(this.personCounts,4),void 0!=this.globalCounts&&this.se.wia(this.globalCounts,5),this.se.Close()},i}(e.SprotoTypeBase);e.sc_activityw_update_info_request=s,__reflect(s.prototype,"Sproto.sc_activityw_update_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_artifact_stone_req_request=t,__reflect(t.prototype,"Sproto.cs_artifact_stone_req_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.uptype=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.uptype&&this.se.wi(this.uptype,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_artifact_uplevel_request=i,__reflect(i.prototype,"Sproto.cs_artifact_uplevel_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.level=this.de.ri();break;case 2:this.strenglv=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.strenglv&&this.se.wi(this.strenglv,2),this.se.Close()},t}(e.SprotoTypeBase);e.artifact_data=t,__reflect(t.prototype,"Sproto.artifact_data");var i=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.datas=this.de.roa(t);break;case 1:this.curid=this.de.ri();break;case 2:this.conid=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.datas&&this.se.woa(this.datas,0),void 0!=this.curid&&this.se.wi(this.curid,1),void 0!=this.conid&&this.se.wi(this.conid,2),this.se.Close()},i}(e.SprotoTypeBase);e.sc_artifact_datas_request=i,__reflect(i.prototype,"Sproto.sc_artifact_datas_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.curid=this.de.ri();break;case 1:this.conid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.curid&&this.se.wi(this.curid,0),void 0!=this.conid&&this.se.wi(this.conid,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_artifact_progress_res_request=o,__reflect(o.prototype,"Sproto.sc_artifact_progress_res_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.curid=this.de.ri();break;case 1:this.conid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.curid&&this.se.wi(this.curid,0),void 0!=this.conid&&this.se.wi(this.conid,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_artifact_stone_res_request=s,__reflect(s.prototype,"Sproto.sc_artifact_stone_res_request");var n=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.rb();break;case 1:this.data=this.de.ro(t);break;case 2:this.uptype=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wb(this.result,0),void 0!=this.data&&this.se.wo(this.data,1),void 0!=this.uptype&&this.se.wi(this.uptype,2),this.se.Close()},i}(e.SprotoTypeBase);e.sc_artifact_uplevel_result_request=n,__reflect(n.prototype,"Sproto.sc_artifact_uplevel_result_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.bagNum=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.bagNum&&this.se.wi(this.bagNum,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_bag_add_grid_request=t,__reflect(t.prototype,"Sproto.cs_bag_add_grid_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_bag_compose_item_request=i,__reflect(i.prototype,"Sproto.cs_bag_compose_item_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_bag_danyao_cd_request=o,__reflect(o.prototype,"Sproto.cs_bag_danyao_cd_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_bag_danyao_eat_request=s,__reflect(s.prototype,"Sproto.cs_bag_danyao_eat_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_bag_danyao_info_request=n,__reflect(n.prototype,"Sproto.cs_bag_danyao_info_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.uuid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.uuid&&this.se.wi(this.uuid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_bag_get_goods_by_store_request=r,__reflect(r.prototype,"Sproto.cs_bag_get_goods_by_store_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.uuid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.uuid&&this.se.wi(this.uuid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_bag_get_tendraw_by_store_request=a,__reflect(a.prototype,"Sproto.cs_bag_get_tendraw_by_store_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.uuid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.uuid&&this.se.wi(this.uuid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_bag_get_ticket_by_store_request=l,__reflect(l.prototype,"Sproto.cs_bag_get_ticket_by_store_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_bag_mix_item_request=h,__reflect(h.prototype,"Sproto.cs_bag_mix_item_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_bag_use_item_request=c,__reflect(c.prototype,"Sproto.cs_bag_use_item_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.item_count_base=t,__reflect(t.prototype,"Sproto.item_count_base");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_bag_compose_result_request=i,__reflect(i.prototype,"Sproto.sc_bag_compose_result_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.eatCnt=this.de.ri();break;case 1:this.eatTime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.eatCnt&&this.se.wi(this.eatCnt,0),void 0!=this.eatTime&&this.se.wi(this.eatTime,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_bag_danyao_info_request=o,__reflect(o.prototype,"Sproto.sc_bag_danyao_info_request");var s=function(t){function i(e){return void 0===e&&(e=null),t.call(this,3,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.type=this.de.ri();break;case 1:this.data=this.de.ro(e.item_data);break;case 2:this.showTip=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.data&&this.se.wo(this.data,1),void 0!=this.showTip&&this.se.wi(this.showTip,2),this.se.Close()},i}(e.SprotoTypeBase);e.sc_bag_deal_add_item_request=s,__reflect(s.prototype,"Sproto.sc_bag_deal_add_item_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.handle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.handle&&this.se.wi(this.handle,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_bag_deal_delete_item_request=n,__reflect(n.prototype,"Sproto.sc_bag_deal_delete_item_request");
var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.bagNum=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.bagNum&&this.se.wi(this.bagNum,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_bag_deal_valumn_add_request=r,__reflect(r.prototype,"Sproto.sc_bag_deal_valumn_add_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wia(this.handle,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_bag_get_tendraw_equip_request=a,__reflect(a.prototype,"Sproto.sc_bag_get_tendraw_equip_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wia(this.handle,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_bag_get_ticket_equip_request=l,__reflect(l.prototype,"Sproto.sc_bag_get_ticket_equip_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wia(this.handle,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_bag_get_treasure_equip_request=h,__reflect(h.prototype,"Sproto.sc_bag_get_treasure_equip_request");var c=function(t){function i(e){return void 0===e&&(e=null),t.call(this,3,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.code=this.de.ri();break;case 1:this.type=this.de.ri();break;case 2:this.datas=this.de.roa(e.item_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.code&&this.se.wi(this.code,0),void 0!=this.type&&this.se.wi(this.type,1),void 0!=this.datas&&this.se.woa(this.datas,2),this.se.Close()},i}(e.SprotoTypeBase);e.sc_bag_init_data_request=c,__reflect(c.prototype,"Sproto.sc_bag_init_data_request");var u=function(e){function i(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;case 1:this.useitemid=this.de.ri();break;case 2:this.useitemcount=this.de.ri();break;case 3:this.newitems=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),void 0!=this.useitemid&&this.se.wi(this.useitemid,1),void 0!=this.useitemcount&&this.se.wi(this.useitemcount,2),void 0!=this.newitems&&this.se.woa(this.newitems,3),this.se.Close()},i}(e.SprotoTypeBase);e.sc_bag_mix_item_back_request=u,__reflect(u.prototype,"Sproto.sc_bag_mix_item_back_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.handle=this.de.ri();break;case 2:this.num=this.de.ri();break;case 3:this.showTip=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.handle&&this.se.wi(this.handle,1),void 0!=this.num&&this.se.wi(this.num,2),void 0!=this.showTip&&this.se.wi(this.showTip,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_bag_update_item_data_request=d,__reflect(d.prototype,"Sproto.sc_bag_update_item_data_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.tipIndex=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.tipIndex&&this.se.wi(this.tipIndex,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_bag_user_item_back_request=p,__reflect(p.prototype,"Sproto.sc_bag_user_item_back_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_biaoche_get_revenge_list_request=t,__reflect(t.prototype,"Sproto.cs_biaoche_get_revenge_list_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.robIndex=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.robIndex&&this.se.wi(this.robIndex,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_biaoche_revenge_request=i,__reflect(i.prototype,"Sproto.cs_biaoche_revenge_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_biaoche_list_request=o,__reflect(o.prototype,"Sproto.cs_get_biaoche_list_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dbid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dbid&&this.se.wi(this.dbid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_rob_biaoche_request=s,__reflect(s.prototype,"Sproto.cs_rob_biaoche_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_rob_biaoche_award_request=n,__reflect(n.prototype,"Sproto.cs_rob_biaoche_award_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_start_biaoche_request=r,__reflect(r.prototype,"Sproto.cs_start_biaoche_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_uplevel_biaoche_request=a,__reflect(a.prototype,"Sproto.cs_uplevel_biaoche_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.win=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.win&&this.se.wb(this.win,1),this.se.Close()},t}(e.SprotoTypeBase);e.biaocheRobInfo=t,__reflect(t.prototype,"Sproto.biaocheRobInfo");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,11,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dbid=this.de.ri();break;case 1:this.actorName=this.de.rs();break;case 2:this.guildName=this.de.rs();break;case 3:this.biaocheType=this.de.ri();break;case 4:this.overTime=this.de.ri();break;case 5:this.fightPow=this.de.ri();break;case 6:this.robStatus=this.de.rb();break;case 7:this.berobotcount=this.de.ri();break;case 8:this.mainEle=this.de.ri();break;case 9:this.job=this.de.ri();break;case 10:this.sex=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dbid&&this.se.wi(this.dbid,0),void 0!=this.actorName&&this.se.ws(this.actorName,1),void 0!=this.guildName&&this.se.ws(this.guildName,2),void 0!=this.biaocheType&&this.se.wi(this.biaocheType,3),void 0!=this.overTime&&this.se.wi(this.overTime,4),void 0!=this.fightPow&&this.se.wi(this.fightPow,5),void 0!=this.robStatus&&this.se.wb(this.robStatus,6),void 0!=this.berobotcount&&this.se.wi(this.berobotcount,7),void 0!=this.mainEle&&this.se.wi(this.mainEle,8),void 0!=this.job&&this.se.wi(this.job,9),void 0!=this.sex&&this.se.wi(this.sex,10),this.se.Close()},t}(e.SprotoTypeBase);e.biaoche_info=i,__reflect(i.prototype,"Sproto.biaoche_info");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,9,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.robIndex=this.de.ri();break;case 1:this.biaocheType=this.de.ri();break;case 2:this.roberId=this.de.ri();break;case 3:this.roberName=this.de.rs();break;case 4:this.robTime=this.de.ri();break;case 5:this.robResult=this.de.rb();break;case 6:this.type=this.de.ri();break;case 7:this.isRevenge=this.de.rb();break;case 8:this.fightPow=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.robIndex&&this.se.wi(this.robIndex,0),void 0!=this.biaocheType&&this.se.wi(this.biaocheType,1),void 0!=this.roberId&&this.se.wi(this.roberId,2),void 0!=this.roberName&&this.se.ws(this.roberName,3),void 0!=this.robTime&&this.se.wi(this.robTime,4),void 0!=this.robResult&&this.se.wb(this.robResult,5),void 0!=this.type&&this.se.wi(this.type,6),void 0!=this.isRevenge&&this.se.wb(this.isRevenge,7),void 0!=this.fightPow&&this.se.wi(this.fightPow,8),this.se.Close()},t}(e.SprotoTypeBase);e.biaoche_record_info=o,__reflect(o.prototype,"Sproto.biaoche_record_info");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.biaocheRecordList=this.de.roa(o);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.biaocheRecordList&&this.se.woa(this.biaocheRecordList,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_biaoche_berob_record_request=s,__reflect(s.prototype,"Sproto.sc_biaoche_berob_record_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.totalPage=this.de.ri();break;case 1:this.curPageNum=this.de.ri();break;case 4:this.biaocheList=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.totalPage&&this.se.wi(this.totalPage,0),void 0!=this.curPageNum&&this.se.wi(this.curPageNum,1),void 0!=this.biaocheList&&this.se.woa(this.biaocheList,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_biaoche_list_request=n,__reflect(n.prototype,"Sproto.sc_biaoche_list_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.rb();break;case 1:this.biaocheType=this.de.ri();break;case 2:this.refreshNum=this.de.ri();break;case 3:this.costNum=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wb(this.result,0),void 0!=this.biaocheType&&this.se.wi(this.biaocheType,1),void 0!=this.refreshNum&&this.se.wi(this.refreshNum,2),void 0!=this.costNum&&this.se.wi(this.costNum,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_biaoche_refresh_result_request=r,__reflect(r.prototype,"Sproto.sc_biaoche_refresh_result_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.doubleTime=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.doubleTime&&this.se.wb(this.doubleTime,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_double_biaoche_notice_request=a,__reflect(a.prototype,"Sproto.sc_double_biaoche_notice_request");var l=function(e){function i(t){return void 0===t&&(t=null),e.call(this,10,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.exploitCnt=this.de.ri();break;case 1:this.robCnt=this.de.ri();break;case 2:this.exploitType=this.de.ri();break;case 3:this.exploitOverTime=this.de.ri();break;case 4:this.refreshType=this.de.ri();break;case 5:this.refreshCnt=this.de.ri();break;case 6:this.exploitStatus=this.de.ri();break;case 7:this.beRobInfos=this.de.roa(t);break;case 8:this.stealCnt=this.de.ri();break;case 9:this.isDoublereward=this.de.rb();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.exploitCnt&&this.se.wi(this.exploitCnt,0),void 0!=this.robCnt&&this.se.wi(this.robCnt,1),void 0!=this.exploitType&&this.se.wi(this.exploitType,2),void 0!=this.exploitOverTime&&this.se.wi(this.exploitOverTime,3),void 0!=this.refreshType&&this.se.wi(this.refreshType,4),void 0!=this.refreshCnt&&this.se.wi(this.refreshCnt,5),void 0!=this.exploitStatus&&this.se.wi(this.exploitStatus,6),void 0!=this.beRobInfos&&this.se.woa(this.beRobInfos,7),void 0!=this.stealCnt&&this.se.wi(this.stealCnt,8),void 0!=this.isDoublereward&&this.se.wb(this.isDoublereward,9),this.se.Close()},i}(e.SprotoTypeBase);e.sc_self_biaoche_info_request=l,__reflect(l.prototype,"Sproto.sc_self_biaoche_info_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.countdown=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.countdown&&this.se.wi(this.countdown,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_steal_biaoche_fight_notice_request=h,__reflect(h.prototype,"Sproto.sc_steal_biaoche_fight_notice_request")}(Sproto||(Sproto={}));var C2sProtocol=function(e){function t(){var i=e.call(this)||this;return i.Protocol.SetProtocol(t.CreateActor),i.Protocol.SetRequest(t.CreateActor,Sproto.CreateActor_request),i.Protocol.SetResponse(t.CreateActor,Sproto.CreateActor_response),i.Protocol.SetProtocol(t.EnterGame),i.Protocol.SetRequest(t.EnterGame,Sproto.EnterGame_request),i.Protocol.SetResponse(t.EnterGame,Sproto.EnterGame_response),i.Protocol.SetProtocol(t.QueryList),i.Protocol.SetRequest(t.QueryList,Sproto.QueryList_request),i.Protocol.SetResponse(t.QueryList,Sproto.QueryList_response),i.Protocol.SetProtocol(t.RandName),i.Protocol.SetRequest(t.RandName,Sproto.RandName_request),i.Protocol.SetResponse(t.RandName,Sproto.RandName_response),i.Protocol.SetProtocol(t.UpdateHead),i.Protocol.SetRequest(t.UpdateHead,Sproto.UpdateHead_request),i.Protocol.SetProtocol(t.checkAccount),i.Protocol.SetRequest(t.checkAccount,Sproto.checkAccount_request),i.Protocol.SetProtocol(t.cs_Challenge_actor),i.Protocol.SetRequest(t.cs_Challenge_actor,Sproto.cs_Challenge_actor_request),i.Protocol.SetProtocol(t.cs_Challenge_boss),i.Protocol.SetRequest(t.cs_Challenge_boss,Sproto.cs_Challenge_boss_request),i.Protocol.SetProtocol(t.cs_activity_buyGoods),i.Protocol.SetRequest(t.cs_activity_buyGoods,Sproto.cs_activity_buyGoods_request),i.Protocol.SetProtocol(t.cs_activity_send_dabiao_info),i.Protocol.SetRequest(t.cs_activity_send_dabiao_info,Sproto.cs_activity_send_dabiao_info_request),i.Protocol.SetProtocol(t.cs_activity_send_level_info),i.Protocol.SetRequest(t.cs_activity_send_level_info,Sproto.cs_activity_send_level_info_request),i.Protocol.SetProtocol(t.cs_activity_send_reward),i.Protocol.SetRequest(t.cs_activity_send_reward,Sproto.cs_activity_send_reward_request),i.Protocol.SetProtocol(t.cs_activity_warorder_buylv),i.Protocol.SetRequest(t.cs_activity_warorder_buylv,Sproto.cs_activity_warorder_buylv_request),i.Protocol.SetProtocol(t.cs_activity_warorder_buyscale),i.Protocol.SetRequest(t.cs_activity_warorder_buyscale,Sproto.cs_activity_warorder_buyscale_request),i.Protocol.SetProtocol(t.cs_activity_warorder_exreward),i.Protocol.SetRequest(t.cs_activity_warorder_exreward,Sproto.cs_activity_warorder_exreward_request),i.Protocol.SetProtocol(t.cs_activity_warorder_reward),i.Protocol.SetRequest(t.cs_activity_warorder_reward,Sproto.cs_activity_warorder_reward_request),i.Protocol.SetProtocol(t.cs_add_small_routine_state),i.Protocol.SetRequest(t.cs_add_small_routine_state,Sproto.cs_add_small_routine_state_request),i.Protocol.SetProtocol(t.cs_add_zs_point),i.Protocol.SetRequest(t.cs_add_zs_point,Sproto.cs_add_zs_point_request),i.Protocol.SetProtocol(t.cs_artifact_stone_req),i.Protocol.SetRequest(t.cs_artifact_stone_req,Sproto.cs_artifact_stone_req_request),i.Protocol.SetProtocol(t.cs_artifact_uplevel),i.Protocol.SetRequest(t.cs_artifact_uplevel,Sproto.cs_artifact_uplevel_request),i.Protocol.SetProtocol(t.cs_bag_add_grid),i.Protocol.SetRequest(t.cs_bag_add_grid,Sproto.cs_bag_add_grid_request),i.Protocol.SetProtocol(t.cs_bag_compose_item),i.Protocol.SetRequest(t.cs_bag_compose_item,Sproto.cs_bag_compose_item_request),i.Protocol.SetProtocol(t.cs_bag_danyao_cd),i.Protocol.SetRequest(t.cs_bag_danyao_cd,Sproto.cs_bag_danyao_cd_request),i.Protocol.SetProtocol(t.cs_bag_danyao_eat),i.Protocol.SetRequest(t.cs_bag_danyao_eat,Sproto.cs_bag_danyao_eat_request),i.Protocol.SetProtocol(t.cs_bag_danyao_info),i.Protocol.SetRequest(t.cs_bag_danyao_info,Sproto.cs_bag_danyao_info_request),i.Protocol.SetProtocol(t.cs_bag_get_goods_by_store),i.Protocol.SetRequest(t.cs_bag_get_goods_by_store,Sproto.cs_bag_get_goods_by_store_request),i.Protocol.SetProtocol(t.cs_bag_get_tendraw_by_store),i.Protocol.SetRequest(t.cs_bag_get_tendraw_by_store,Sproto.cs_bag_get_tendraw_by_store_request),i.Protocol.SetProtocol(t.cs_bag_get_ticket_by_store),i.Protocol.SetRequest(t.cs_bag_get_ticket_by_store,Sproto.cs_bag_get_ticket_by_store_request),i.Protocol.SetProtocol(t.cs_bag_mix_item),i.Protocol.SetRequest(t.cs_bag_mix_item,Sproto.cs_bag_mix_item_request),i.Protocol.SetProtocol(t.cs_bag_use_item),i.Protocol.SetRequest(t.cs_bag_use_item,Sproto.cs_bag_use_item_request),i.Protocol.SetProtocol(t.cs_base_get_game_time),i.Protocol.SetProtocol(t.cs_baserecord_info),i.Protocol.SetRequest(t.cs_baserecord_info,Sproto.cs_baserecord_info_request),i.Protocol.SetProtocol(t.cs_biaoche_get_revenge_list),i.Protocol.SetRequest(t.cs_biaoche_get_revenge_list,Sproto.cs_biaoche_get_revenge_list_request),i.Protocol.SetProtocol(t.cs_biaoche_revenge),i.Protocol.SetRequest(t.cs_biaoche_revenge,Sproto.cs_biaoche_revenge_request),i.Protocol.SetProtocol(t.cs_buy_vipshop_item),i.Protocol.SetRequest(t.cs_buy_vipshop_item,Sproto.cs_buy_vipshop_item_request),i.Protocol.SetProtocol(t.cs_buy_wanba_item),i.Protocol.SetRequest(t.cs_buy_wanba_item,Sproto.cs_buy_wanba_item_request),i.Protocol.SetResponse(t.cs_buy_wanba_item,Sproto.cs_buy_wanba_item_response),i.Protocol.SetProtocol(t.cs_buy_xiaoyouxi_item),i.Protocol.SetRequest(t.cs_buy_xiaoyouxi_item,Sproto.cs_buy_xiaoyouxi_item_request),i.Protocol.SetResponse(t.cs_buy_xiaoyouxi_item,Sproto.cs_buy_xiaoyouxi_item_response),i.Protocol.SetProtocol(t.cs_buy_yyb_item),i.Protocol.SetRequest(t.cs_buy_yyb_item,Sproto.cs_buy_yyb_item_request),i.Protocol.SetResponse(t.cs_buy_yyb_item,Sproto.cs_buy_yyb_item_response),i.Protocol.SetProtocol(t.cs_challenge_raid_day_reward),i.Protocol.SetProtocol(t.cs_challenge_raid_new_reward),i.Protocol.SetRequest(t.cs_challenge_raid_new_reward,Sproto.cs_challenge_raid_new_reward_request),i.Protocol.SetProtocol(t.cs_challenge_raid_send),i.Protocol.SetProtocol(t.cs_change_actor_name),i.Protocol.SetRequest(t.cs_change_actor_name,Sproto.cs_change_actor_name_request),i.Protocol.SetProtocol(t.cs_channel_share_use),i.Protocol.SetRequest(t.cs_channel_share_use,Sproto.cs_channel_share_use_request),i.Protocol.SetResponse(t.cs_channel_share_use,Sproto.cs_channel_share_use_response),i.Protocol.SetProtocol(t.cs_chat_send_info),i.Protocol.SetRequest(t.cs_chat_send_info,Sproto.cs_chat_send_info_request),i.Protocol.SetProtocol(t.cs_client_ready_req),i.Protocol.SetRequest(t.cs_client_ready_req,Sproto.cs_client_ready_req_request),i.Protocol.SetProtocol(t.cs_create_new_sub_role),i.Protocol.SetRequest(t.cs_create_new_sub_role,Sproto.cs_create_new_sub_role_request),i.Protocol.SetProtocol(t.cs_cross_boss_challenge),i.Protocol.SetRequest(t.cs_cross_boss_challenge,Sproto.cs_cross_boss_challenge_request),i.Protocol.SetProtocol(t.cs_cross_boss_panel_info),i.Protocol.SetProtocol(t.cs_cross_buy_combat_num),i.Protocol.SetRequest(t.cs_cross_buy_combat_num,Sproto.cs_cross_buy_combat_num_request),i.Protocol.SetProtocol(t.cs_cross_gain_tianti_history_award),i.Protocol.SetRequest(t.cs_cross_gain_tianti_history_award,Sproto.cs_cross_gain_tianti_history_award_request),i.Protocol.SetProtocol(t.cs_cross_get_combat_recode),i.Protocol.SetRequest(t.cs_cross_get_combat_recode,Sproto.cs_cross_get_combat_recode_request),i.Protocol.SetProtocol(t.cs_cross_get_self_info),i.Protocol.SetRequest(t.cs_cross_get_self_info,Sproto.cs_cross_get_self_info_request),i.Protocol.SetProtocol(t.cs_cross_get_tianti_history_rank),i.Protocol.SetRequest(t.cs_cross_get_tianti_history_rank,Sproto.cs_cross_get_tianti_history_rank_request),i.Protocol.SetProtocol(t.cs_cross_get_tianti_rank_info),i.Protocol.SetRequest(t.cs_cross_get_tianti_rank_info,Sproto.cs_cross_get_tianti_rank_info_request),i.Protocol.SetProtocol(t.cs_cross_start_combat),i.Protocol.SetRequest(t.cs_cross_start_combat,Sproto.cs_cross_start_combat_request),i.Protocol.SetProtocol(t.cs_dragon_info),i.Protocol.SetRequest(t.cs_dragon_info,Sproto.cs_dragon_info_request),i.Protocol.SetProtocol(t.cs_dress_activate),i.Protocol.SetRequest(t.cs_dress_activate,Sproto.cs_dress_activate_request),i.Protocol.SetResponse(t.cs_dress_activate,Sproto.cs_dress_activate_response),i.Protocol.SetProtocol(t.cs_dress_continue),i.Protocol.SetRequest(t.cs_dress_continue,Sproto.cs_dress_continue_request),i.Protocol.SetResponse(t.cs_dress_continue,Sproto.cs_dress_continue_response),i.Protocol.SetProtocol(t.cs_dress_dress),i.Protocol.SetRequest(t.cs_dress_dress,Sproto.cs_dress_dress_request),i.Protocol.SetResponse(t.cs_dress_dress,Sproto.cs_dress_dress_response),i.Protocol.SetProtocol(t.cs_dress_get_info),i.Protocol.SetResponse(t.cs_dress_get_info,Sproto.cs_dress_get_info_response),i.Protocol.SetProtocol(t.cs_dress_undress),i.Protocol.SetRequest(t.cs_dress_undress,Sproto.cs_dress_undress_request),i.Protocol.SetResponse(t.cs_dress_undress,Sproto.cs_dress_undress_response),i.Protocol.SetProtocol(t.cs_dress_upgrade),i.Protocol.SetRequest(t.cs_dress_upgrade,Sproto.cs_dress_upgrade_request),i.Protocol.SetResponse(t.cs_dress_upgrade,Sproto.cs_dress_upgrade_response),i.Protocol.SetProtocol(t.cs_eggbroken_hitting),i.Protocol.SetRequest(t.cs_eggbroken_hitting,Sproto.cs_eggbroken_hitting_request),i.Protocol.SetProtocol(t.cs_eggbroken_hunt),i.Protocol.SetRequest(t.cs_eggbroken_hunt,Sproto.cs_eggbroken_hunt_request),i.Protocol.SetProtocol(t.cs_eggbroken_record),i.Protocol.SetRequest(t.cs_eggbroken_record,Sproto.cs_eggbroken_record_request),i.Protocol.SetProtocol(t.cs_element_set_req),i.Protocol.SetRequest(t.cs_element_set_req,Sproto.cs_element_set_req_request),i.Protocol.SetProtocol(t.cs_encounter_buy_pk_count),i.Protocol.SetProtocol(t.cs_encounter_clear_redpoint),i.Protocol.SetRequest(t.cs_encounter_clear_redpoint,Sproto.cs_encounter_clear_redpoint_request),i.Protocol.SetProtocol(t.cs_encounter_get_boss_award),i.Protocol.SetRequest(t.cs_encounter_get_boss_award,Sproto.cs_encounter_get_boss_award_request),i.Protocol.SetProtocol(t.cs_encounter_get_info),i.Protocol.SetProtocol(t.cs_encounter_get_item_info),i.Protocol.SetProtocol(t.cs_encounter_get_news),i.Protocol.SetProtocol(t.cs_encounter_inquire_prestige),i.Protocol.SetProtocol(t.cs_encounter_inquire_record),i.Protocol.SetProtocol(t.cs_encounter_open_item),i.Protocol.SetRequest(t.cs_encounter_open_item,Sproto.cs_encounter_open_item_request),i.Protocol.SetProtocol(t.cs_encounter_send_fight_refresh),i.Protocol.SetProtocol(t.cs_encounter_send_fight_result),i.Protocol.SetRequest(t.cs_encounter_send_fight_result,Sproto.cs_encounter_send_fight_result_request),i.Protocol.SetProtocol(t.cs_encounter_send_result),i.Protocol.SetRequest(t.cs_encounter_send_result,Sproto.cs_encounter_send_result_request),i.Protocol.SetProtocol(t.cs_encounter_send_revenge),i.Protocol.SetRequest(t.cs_encounter_send_revenge,Sproto.cs_encounter_send_revenge_request),i.Protocol.SetProtocol(t.cs_enter_dragon),i.Protocol.SetRequest(t.cs_enter_dragon,Sproto.cs_enter_dragon_request),i.Protocol.SetProtocol(t.cs_enter_treasure_raid),i.Protocol.SetRequest(t.cs_enter_treasure_raid,Sproto.cs_enter_treasure_raid_request),i.Protocol.SetProtocol(t.cs_enter_tryroad_raid),i.Protocol.SetRequest(t.cs_enter_tryroad_raid,Sproto.cs_enter_tryroad_raid_request),i.Protocol.SetProtocol(t.cs_equip_autosmelt_req),i.Protocol.SetRequest(t.cs_equip_autosmelt_req,Sproto.cs_equip_autosmelt_req_request),i.Protocol.SetProtocol(t.cs_equip_lvl_upgrade),i.Protocol.SetRequest(t.cs_equip_lvl_upgrade,Sproto.cs_equip_lvl_upgrade_request),i.Protocol.SetProtocol(t.cs_equip_mix),i.Protocol.SetRequest(t.cs_equip_mix,Sproto.cs_equip_mix_request),i.Protocol.SetProtocol(t.cs_equip_resolve),i.Protocol.SetRequest(t.cs_equip_resolve,Sproto.cs_equip_resolve_request),i.Protocol.SetProtocol(t.cs_equip_smelt),i.Protocol.SetRequest(t.cs_equip_smelt,Sproto.cs_equip_smelt_request),i.Protocol.SetProtocol(t.cs_equip_star_upgrade),i.Protocol.SetRequest(t.cs_equip_star_upgrade,Sproto.cs_equip_star_upgrade_request),i.Protocol.SetProtocol(t.cs_equip_upgrade),i.Protocol.SetRequest(t.cs_equip_upgrade,Sproto.cs_equip_upgrade_request),i.Protocol.SetProtocol(t.cs_equip_wear),i.Protocol.SetRequest(t.cs_equip_wear,Sproto.cs_equip_wear_request),i.Protocol.SetProtocol(t.cs_equip_zhuanzhi_skill),i.Protocol.SetRequest(t.cs_equip_zhuanzhi_skill,Sproto.cs_equip_zhuanzhi_skill_request),i.Protocol.SetProtocol(t.cs_essence_onekey),i.Protocol.SetRequest(t.cs_essence_onekey,Sproto.cs_essence_onekey_request),i.Protocol.SetProtocol(t.cs_essence_upgrade_grade),i.Protocol.SetRequest(t.cs_essence_upgrade_grade,Sproto.cs_essence_upgrade_grade_request),i.Protocol.SetProtocol(t.cs_expjade_use),i.Protocol.SetRequest(t.cs_expjade_use,Sproto.cs_expjade_use_request),i.Protocol.SetProtocol(t.cs_exten_id),i.Protocol.SetRequest(t.cs_exten_id,Sproto.cs_exten_id_request),i.Protocol.SetProtocol(t.cs_faq_req),i.Protocol.SetRequest(t.cs_faq_req,Sproto.cs_faq_req_request),i.Protocol.SetResponse(t.cs_faq_req,Sproto.cs_faq_req_response),i.Protocol.SetProtocol(t.cs_fieldexp_buff_apply_req),i.Protocol.SetRequest(t.cs_fieldexp_buff_apply_req,Sproto.cs_fieldexp_buff_apply_req_request),i.Protocol.SetProtocol(t.cs_fieldexp_buff_finish_req),i.Protocol.SetRequest(t.cs_fieldexp_buff_finish_req,Sproto.cs_fieldexp_buff_finish_req_request),i.Protocol.SetProtocol(t.cs_fieldexp_buff_req),i.Protocol.SetRequest(t.cs_fieldexp_buff_req,Sproto.cs_fieldexp_buff_req_request),i.Protocol.SetProtocol(t.cs_find_assets_get),i.Protocol.SetRequest(t.cs_find_assets_get,Sproto.cs_find_assets_get_request),i.Protocol.SetProtocol(t.cs_find_assets_init),i.Protocol.SetProtocol(t.cs_forge_back_upgrade_goods),i.Protocol.SetRequest(t.cs_forge_back_upgrade_goods,Sproto.cs_forge_back_upgrade_goods_request),i.Protocol.SetProtocol(t.cs_forge_bless_boost_req),i.Protocol.SetRequest(t.cs_forge_bless_boost_req,Sproto.cs_forge_bless_boost_req_request),i.Protocol.SetProtocol(t.cs_forge_bless_ronglu_success),i.Protocol.SetRequest(t.cs_forge_bless_ronglu_success,Sproto.cs_forge_bless_ronglu_success_request),i.Protocol.SetProtocol(t.cs_forge_bless_smelt_req),i.Protocol.SetRequest(t.cs_forge_bless_smelt_req,Sproto.cs_forge_bless_smelt_req_request),i.Protocol.SetProtocol(t.cs_forge_bless_upgrade_req),i.Protocol.SetRequest(t.cs_forge_bless_upgrade_req,Sproto.cs_forge_bless_upgrade_req_request),i.Protocol.SetProtocol(t.cs_forge_onekey),i.Protocol.SetRequest(t.cs_forge_onekey,Sproto.cs_forge_onekey_request),i.Protocol.SetProtocol(t.cs_forge_upgrade_bless),i.Protocol.SetRequest(t.cs_forge_upgrade_bless,Sproto.cs_forge_upgrade_bless_request),i.Protocol.SetProtocol(t.cs_forge_upgrade_grade),i.Protocol.SetRequest(t.cs_forge_upgrade_grade,Sproto.cs_forge_upgrade_grade_request),i.Protocol.SetProtocol(t.cs_funopen_close_req),i.Protocol.SetRequest(t.cs_funopen_close_req,Sproto.cs_funopen_close_req_request),i.Protocol.SetProtocol(t.cs_fuwen_equipup),i.Protocol.SetRequest(t.cs_fuwen_equipup,Sproto.cs_fuwen_equipup_request),i.Protocol.SetProtocol(t.cs_fuwen_open),i.Protocol.SetRequest(t.cs_fuwen_open,Sproto.cs_fuwen_open_request),i.Protocol.SetProtocol(t.cs_gdwar_actor_rank),i.Protocol.SetProtocol(t.cs_gdwar_attack_monster),i.Protocol.SetProtocol(t.cs_gdwar_attack_player),i.Protocol.SetRequest(t.cs_gdwar_attack_player,Sproto.cs_gdwar_attack_player_request),i.Protocol.SetProtocol(t.cs_gdwar_click_flag),i.Protocol.SetProtocol(t.cs_gdwar_enter_city),i.Protocol.SetRequest(t.cs_gdwar_enter_city,Sproto.cs_gdwar_enter_city_request),i.Protocol.SetProtocol(t.cs_gdwar_enter_cross),i.Protocol.SetRequest(t.cs_gdwar_enter_cross,Sproto.cs_gdwar_enter_cross_request),i.Protocol.SetProtocol(t.cs_gdwar_guild_get_group),i.Protocol.SetProtocol(t.cs_gdwar_guild_member),i.Protocol.SetProtocol(t.cs_gdwar_guild_rank),i.Protocol.SetProtocol(t.cs_gdwar_integral_reward),i.Protocol.SetProtocol(t.cs_gdwar_leave),i.Protocol.SetProtocol(t.cs_gdwar_lottery_start),i.Protocol.SetProtocol(t.cs_gdwar_update),i.Protocol.SetProtocol(t.cs_gem_onekey),i.Protocol.SetRequest(t.cs_gem_onekey,Sproto.cs_gem_onekey_request),i.Protocol.SetProtocol(t.cs_gem_upgrade_grade),i.Protocol.SetRequest(t.cs_gem_upgrade_grade,Sproto.cs_gem_upgrade_grade_request),i.Protocol.SetProtocol(t.cs_get_actor_module_isactive),i.Protocol.SetRequest(t.cs_get_actor_module_isactive,Sproto.cs_get_actor_module_isactive_request),i.Protocol.SetProtocol(t.cs_get_biaoche_list),i.Protocol.SetRequest(t.cs_get_biaoche_list,Sproto.cs_get_biaoche_list_request),i.Protocol.SetProtocol(t.cs_get_caiquan_result),i.Protocol.SetRequest(t.cs_get_caiquan_result,Sproto.cs_get_caiquan_result_request),i.Protocol.SetProtocol(t.cs_get_cross_tianti_list),i.Protocol.SetRequest(t.cs_get_cross_tianti_list,Sproto.cs_get_cross_tianti_list_request),i.Protocol.SetProtocol(t.cs_get_gongnengyugao_reward),i.Protocol.SetRequest(t.cs_get_gongnengyugao_reward,Sproto.cs_get_gongnengyugao_reward_request),i.Protocol.SetResponse(t.cs_get_gongnengyugao_reward,Sproto.cs_get_gongnengyugao_reward_response),i.Protocol.SetProtocol(t.cs_get_other_actor_base_info),i.Protocol.SetRequest(t.cs_get_other_actor_base_info,Sproto.cs_get_other_actor_base_info_request),i.Protocol.SetProtocol(t.cs_get_other_actor_info),i.Protocol.SetRequest(t.cs_get_other_actor_info,Sproto.cs_get_other_actor_info_request),i.Protocol.SetProtocol(t.cs_get_qzonewanba_gift),i.Protocol.SetRequest(t.cs_get_qzonewanba_gift,Sproto.cs_get_qzonewanba_gift_request),i.Protocol.SetResponse(t.cs_get_qzonewanba_gift,Sproto.cs_get_qzonewanba_gift_response),i.Protocol.SetProtocol(t.cs_get_qzonewanba_vipgift),i.Protocol.SetRequest(t.cs_get_qzonewanba_vipgift,Sproto.cs_get_qzonewanba_vipgift_request),i.Protocol.SetResponse(t.cs_get_qzonewanba_vipgift,Sproto.cs_get_qzonewanba_vipgift_response),i.Protocol.SetProtocol(t.cs_get_qzonewanba_vipprivilege),i.Protocol.SetRequest(t.cs_get_qzonewanba_vipprivilege,Sproto.cs_get_qzonewanba_vipprivilege_request),i.Protocol.SetResponse(t.cs_get_qzonewanba_vipprivilege,Sproto.cs_get_qzonewanba_vipprivilege_response),i.Protocol.SetProtocol(t.cs_get_qzonewanba_vipprivilege_stat),i.Protocol.SetRequest(t.cs_get_qzonewanba_vipprivilege_stat,Sproto.cs_get_qzonewanba_vipprivilege_stat_request),i.Protocol.SetResponse(t.cs_get_qzonewanba_vipprivilege_stat,Sproto.cs_get_qzonewanba_vipprivilege_stat_response),i.Protocol.SetProtocol(t.cs_get_server_time),i.Protocol.SetRequest(t.cs_get_server_time,Sproto.cs_get_server_time_request),i.Protocol.SetProtocol(t.cs_get_treasure_boss_list),i.Protocol.SetRequest(t.cs_get_treasure_boss_list,Sproto.cs_get_treasure_boss_list_request),i.Protocol.SetProtocol(t.cs_get_treasure_daily_award),i.Protocol.SetRequest(t.cs_get_treasure_daily_award,Sproto.cs_get_treasure_daily_award_request),i.Protocol.SetProtocol(t.cs_get_tryroad_award),i.Protocol.SetRequest(t.cs_get_tryroad_award,Sproto.cs_get_tryroad_award_request),i.Protocol.SetProtocol(t.cs_get_tryroad_rank),i.Protocol.SetRequest(t.cs_get_tryroad_rank,Sproto.cs_get_tryroad_rank_request),i.Protocol.SetProtocol(t.cs_gold_guaji_combat_boss),i.Protocol.SetRequest(t.cs_gold_guaji_combat_boss,Sproto.cs_gold_guaji_combat_boss_request),i.Protocol.SetProtocol(t.cs_gold_guaji_info),i.Protocol.SetRequest(t.cs_gold_guaji_info,Sproto.cs_gold_guaji_info_request),i.Protocol.SetProtocol(t.cs_gold_guaji_obtain_items_info),i.Protocol.SetRequest(t.cs_gold_guaji_obtain_items_info,Sproto.cs_gold_guaji_obtain_items_info_request),i.Protocol.SetProtocol(t.cs_gold_guaji_start_combat),i.Protocol.SetRequest(t.cs_gold_guaji_start_combat,Sproto.cs_gold_guaji_start_combat_request),i.Protocol.SetProtocol(t.cs_gold_guaji_start_relive),i.Protocol.SetRequest(t.cs_gold_guaji_start_relive,Sproto.cs_gold_guaji_start_relive_request),i.Protocol.SetProtocol(t.cs_guild_activity_info),i.Protocol.SetProtocol(t.cs_guild_boss_call),i.Protocol.SetProtocol(t.cs_guild_boss_fight),i.Protocol.SetProtocol(t.cs_guild_boss_rank),i.Protocol.SetProtocol(t.cs_guild_change_notice),i.Protocol.SetRequest(t.cs_guild_change_notice,Sproto.cs_guild_change_notice_request),i.Protocol.SetProtocol(t.cs_guild_change_office),i.Protocol.SetRequest(t.cs_guild_change_office,Sproto.cs_guild_change_office_request),i.Protocol.SetProtocol(t.cs_guild_contribute),i.Protocol.SetRequest(t.cs_guild_contribute,Sproto.cs_guild_contribute_request),i.Protocol.SetProtocol(t.cs_guild_create),i.Protocol.SetRequest(t.cs_guild_create,Sproto.cs_guild_create_request),i.Protocol.SetProtocol(t.cs_guild_demise),i.Protocol.SetProtocol(t.cs_guild_getallchat),i.Protocol.SetProtocol(t.cs_guild_getapply),i.Protocol.SetProtocol(t.cs_guild_getconcount),i.Protocol.SetProtocol(t.cs_guild_gethistory),i.Protocol.SetProtocol(t.cs_guild_getinfo),i.Protocol.SetProtocol(t.cs_guild_getlist),i.Protocol.SetProtocol(t.cs_guild_getmembers),i.Protocol.SetProtocol(t.cs_guild_getplayerinfo),i.Protocol.SetProtocol(t.cs_guild_getskillinfo),i.Protocol.SetProtocol(t.cs_guild_gettaskaward),i.Protocol.SetRequest(t.cs_guild_gettaskaward,Sproto.cs_guild_gettaskaward_request),i.Protocol.SetProtocol(t.cs_guild_join),i.Protocol.SetRequest(t.cs_guild_join,Sproto.cs_guild_join_request),i.Protocol.SetProtocol(t.cs_guild_kick),i.Protocol.SetRequest(t.cs_guild_kick,Sproto.cs_guild_kick_request),i.Protocol.SetProtocol(t.cs_guild_learnskill),i.Protocol.SetRequest(t.cs_guild_learnskill,Sproto.cs_guild_learnskill_request),i.Protocol.SetProtocol(t.cs_guild_quit),i.Protocol.SetProtocol(t.cs_guild_raid_attack),i.Protocol.SetProtocol(t.cs_guild_raid_boost),i.Protocol.SetProtocol(t.cs_guild_raid_daily),i.Protocol.SetRequest(t.cs_guild_raid_daily,Sproto.cs_guild_raid_daily_request),i.Protocol.SetProtocol(t.cs_guild_raid_info),i.Protocol.SetProtocol(t.cs_guild_raid_reward),i.Protocol.SetProtocol(t.cs_guild_raid_sweep),i.Protocol.SetRequest(t.cs_guild_raid_sweep,Sproto.cs_guild_raid_sweep_request),i.Protocol.SetProtocol(t.cs_guild_robber_attack),i.Protocol.SetRequest(t.cs_guild_robber_attack,Sproto.cs_guild_robber_attack_request),i.Protocol.SetProtocol(t.cs_guild_robber_info),i.Protocol.SetProtocol(t.cs_guild_sendchat),i.Protocol.SetRequest(t.cs_guild_sendchat,Sproto.cs_guild_sendchat_request),i.Protocol.SetProtocol(t.cs_guild_setapply),i.Protocol.SetRequest(t.cs_guild_setapply,Sproto.cs_guild_setapply_request),i.Protocol.SetProtocol(t.cs_guild_setautoadd),i.Protocol.SetRequest(t.cs_guild_setautoadd,Sproto.cs_guild_setautoadd_request),i.Protocol.SetProtocol(t.cs_guild_temperskill),i.Protocol.SetRequest(t.cs_guild_temperskill,Sproto.cs_guild_temperskill_request),i.Protocol.SetProtocol(t.cs_guild_upbuilding),i.Protocol.SetRequest(t.cs_guild_upbuilding,Sproto.cs_guild_upbuilding_request),i.Protocol.SetProtocol(t.cs_guildshop_getinfo),i.Protocol.SetProtocol(t.cs_guildshop_getrecord),i.Protocol.SetProtocol(t.cs_guildshop_open),i.Protocol.SetProtocol(t.cs_guildwar_disp_award),i.Protocol.SetRequest(t.cs_guildwar_disp_award,Sproto.cs_guildwar_disp_award_request),i.Protocol.SetProtocol(t.cs_guildwar_get_dayaward),i.Protocol.SetRequest(t.cs_guildwar_get_dayaward,Sproto.cs_guildwar_get_dayaward_request),i.Protocol.SetProtocol(t.cs_guildwar_get_firstwinner_award),i.Protocol.SetProtocol(t.cs_guildwar_get_kffz_info),i.Protocol.SetProtocol(t.cs_guildwar_get_kfwin_records),i.Protocol.SetProtocol(t.cs_guildwar_get_my_guild_rank_info),i.Protocol.SetProtocol(t.cs_guildwar_get_redpacket),i.Protocol.SetRequest(t.cs_guildwar_get_redpacket,Sproto.cs_guildwar_get_redpacket_request),i.Protocol.SetProtocol(t.cs_guildwar_get_winleader),i.Protocol.SetProtocol(t.cs_guildwar_get_winnerinfo),i.Protocol.SetRequest(t.cs_guildwar_get_winnerinfo,Sproto.cs_guildwar_get_winnerinfo_request),i.Protocol.SetProtocol(t.cs_guildwar_send_redpacket),i.Protocol.SetRequest(t.cs_guildwar_send_redpacket,Sproto.cs_guildwar_send_redpacket_request),i.Protocol.SetProtocol(t.cs_holygun_achievement),i.Protocol.SetRequest(t.cs_holygun_achievement,Sproto.cs_holygun_achievement_request),i.Protocol.SetProtocol(t.cs_holygun_eatdanyao),i.Protocol.SetRequest(t.cs_holygun_eatdanyao,Sproto.cs_holygun_eatdanyao_request),i.Protocol.SetProtocol(t.cs_holygun_init),i.Protocol.SetRequest(t.cs_holygun_init,Sproto.cs_holygun_init_request),i.Protocol.SetProtocol(t.cs_holygun_reward),i.Protocol.SetRequest(t.cs_holygun_reward,Sproto.cs_holygun_reward_request),i.Protocol.SetProtocol(t.cs_holygun_upscala),i.Protocol.SetRequest(t.cs_holygun_upscala,Sproto.cs_holygun_upscala_request),i.Protocol.SetProtocol(t.cs_holygun_upskill),i.Protocol.SetRequest(t.cs_holygun_upskill,Sproto.cs_holygun_upskill_request),i.Protocol.SetProtocol(t.cs_holygun_upstar),i.Protocol.SetRequest(t.cs_holygun_upstar,Sproto.cs_holygun_upstar_request),i.Protocol.SetProtocol(t.cs_jingmai_boost),i.Protocol.SetRequest(t.cs_jingmai_boost,Sproto.cs_jingmai_boost_request),i.Protocol.SetResponse(t.cs_jingmai_boost,Sproto.cs_jingmai_boost_response),i.Protocol.SetProtocol(t.cs_jingmai_stage),i.Protocol.SetRequest(t.cs_jingmai_stage,Sproto.cs_jingmai_stage_request),i.Protocol.SetResponse(t.cs_jingmai_stage,Sproto.cs_jingmai_stage_response),i.Protocol.SetProtocol(t.cs_jingmai_upgrade),i.Protocol.SetRequest(t.cs_jingmai_upgrade,Sproto.cs_jingmai_upgrade_request),i.Protocol.SetResponse(t.cs_jingmai_upgrade,Sproto.cs_jingmai_upgrade_response),i.Protocol.SetProtocol(t.cs_ladder_buy_count),i.Protocol.SetProtocol(t.cs_ladder_get_rank_info),i.Protocol.SetProtocol(t.cs_ladder_get_record),i.Protocol.SetProtocol(t.cs_ladder_get_some_one),i.Protocol.SetProtocol(t.cs_ladder_get_week_reward),i.Protocol.SetProtocol(t.cs_ladder_start_play),i.Protocol.SetRequest(t.cs_ladder_start_play,Sproto.cs_ladder_start_play_request),i.Protocol.SetProtocol(t.cs_legend_dress),i.Protocol.SetRequest(t.cs_legend_dress,Sproto.cs_legend_dress_request),i.Protocol.SetProtocol(t.cs_longzhuang_boost),i.Protocol.SetRequest(t.cs_longzhuang_boost,Sproto.cs_longzhuang_boost_request),i.Protocol.SetProtocol(t.cs_longzhuang_onekey),i.Protocol.SetRequest(t.cs_longzhuang_onekey,Sproto.cs_longzhuang_onekey_request),i.Protocol.SetProtocol(t.cs_longzhuang_upgrade),i.Protocol.SetRequest(t.cs_longzhuang_upgrade,Sproto.cs_longzhuang_upgrade_request),i.Protocol.SetProtocol(t.cs_luckypackage_testbuy_req),i.Protocol.SetRequest(t.cs_luckypackage_testbuy_req,Sproto.cs_luckypackage_testbuy_req_request),i.Protocol.SetProtocol(t.cs_luckywheel_hunt),i.Protocol.SetRequest(t.cs_luckywheel_hunt,Sproto.cs_luckywheel_hunt_request),i.Protocol.SetProtocol(t.cs_luckywheel_rank),i.Protocol.SetRequest(t.cs_luckywheel_rank,Sproto.cs_luckywheel_rank_request),i.Protocol.SetProtocol(t.cs_luckywheel_record),i.Protocol.SetRequest(t.cs_luckywheel_record,Sproto.cs_luckywheel_record_request),i.Protocol.SetProtocol(t.cs_mail_delet),i.Protocol.SetRequest(t.cs_mail_delet,Sproto.cs_mail_delet_request),i.Protocol.SetProtocol(t.cs_mail_get_content),i.Protocol.SetRequest(t.cs_mail_get_content,Sproto.cs_mail_get_content_request),i.Protocol.SetProtocol(t.cs_mail_get_reward),i.Protocol.SetRequest(t.cs_mail_get_reward,Sproto.cs_mail_get_reward_request),i.Protocol.SetProtocol(t.cs_mail_init),i.Protocol.SetRequest(t.cs_mail_init,Sproto.cs_mail_init_request),i.Protocol.SetProtocol(t.cs_miji_fuben),i.Protocol.SetRequest(t.cs_miji_fuben,Sproto.cs_miji_fuben_request),i.Protocol.SetProtocol(t.cs_miji_fuben_panel_info),i.Protocol.SetRequest(t.cs_miji_fuben_panel_info,Sproto.cs_miji_fuben_panel_info_request),i.Protocol.SetProtocol(t.cs_miji_fuben_quick),i.Protocol.SetRequest(t.cs_miji_fuben_quick,Sproto.cs_miji_fuben_quick_request),i.Protocol.SetProtocol(t.cs_miji_fuben_reward),i.Protocol.SetRequest(t.cs_miji_fuben_reward,Sproto.cs_miji_fuben_reward_request),i.Protocol.SetProtocol(t.cs_miji_reward_data),i.Protocol.SetRequest(t.cs_miji_reward_data,Sproto.cs_miji_reward_data_request),i.Protocol.SetProtocol(t.cs_mine_mapdata),i.Protocol.SetRequest(t.cs_mine_mapdata,Sproto.cs_mine_mapdata_request),i.Protocol.SetProtocol(t.cs_mine_report_mine_info),i.Protocol.SetRequest(t.cs_mine_report_mine_info,Sproto.cs_mine_report_mine_info_request),i.Protocol.SetProtocol(t.cs_mine_revenge),i.Protocol.SetRequest(t.cs_mine_revenge,Sproto.cs_mine_revenge_request),i.Protocol.SetProtocol(t.cs_mine_rob),i.Protocol.SetRequest(t.cs_mine_rob,Sproto.cs_mine_rob_request),i.Protocol.SetProtocol(t.cs_mine_steal),i.Protocol.SetRequest(t.cs_mine_steal,Sproto.cs_mine_steal_request),i.Protocol.SetProtocol(t.cs_mond_Sign_send_reward),i.Protocol.SetRequest(t.cs_mond_Sign_send_reward,Sproto.cs_mond_Sign_send_reward_request),i.Protocol.SetProtocol(t.cs_money_recharge_get),i.Protocol.SetRequest(t.cs_money_recharge_get,Sproto.cs_money_recharge_get_request),i.Protocol.SetProtocol(t.cs_money_tree_play),i.Protocol.SetProtocol(t.cs_money_tree_reward),i.Protocol.SetRequest(t.cs_money_tree_reward,Sproto.cs_money_tree_reward_request),i.Protocol.SetProtocol(t.cs_monopoly_buy_req),i.Protocol.SetRequest(t.cs_monopoly_buy_req,Sproto.cs_monopoly_buy_req_request),i.Protocol.SetProtocol(t.cs_monopoly_cheat_req),i.Protocol.SetRequest(t.cs_monopoly_cheat_req,Sproto.cs_monopoly_cheat_req_request),i.Protocol.SetProtocol(t.cs_monopoly_dice_req),i.Protocol.SetRequest(t.cs_monopoly_dice_req,Sproto.cs_monopoly_dice_req_request),i.Protocol.SetProtocol(t.cs_monopoly_exchange_req),i.Protocol.SetRequest(t.cs_monopoly_exchange_req,Sproto.cs_monopoly_exchange_req_request),i.Protocol.SetProtocol(t.cs_monopoly_fire_req),i.Protocol.SetRequest(t.cs_monopoly_fire_req,Sproto.cs_monopoly_fire_req_request),i.Protocol.SetProtocol(t.cs_monopoly_raid_open),i.Protocol.SetRequest(t.cs_monopoly_raid_open,Sproto.cs_monopoly_raid_open_request),i.Protocol.SetProtocol(t.cs_monopoly_rank_req),i.Protocol.SetRequest(t.cs_monopoly_rank_req,Sproto.cs_monopoly_rank_req_request),i.Protocol.SetProtocol(t.cs_monopoly_req),i.Protocol.SetRequest(t.cs_monopoly_req,Sproto.cs_monopoly_req_request),i.Protocol.SetProtocol(t.cs_monopoly_store_req),i.Protocol.SetRequest(t.cs_monopoly_store_req,Sproto.cs_monopoly_store_req_request),i.Protocol.SetProtocol(t.cs_monopoly_tili_req),i.Protocol.SetRequest(t.cs_monopoly_tili_req,Sproto.cs_monopoly_tili_req_request),i.Protocol.SetProtocol(t.cs_monopoly_use_req),i.Protocol.SetRequest(t.cs_monopoly_use_req,Sproto.cs_monopoly_use_req_request),i.Protocol.SetProtocol(t.cs_neigong_info),i.Protocol.SetRequest(t.cs_neigong_info,Sproto.cs_neigong_info_request),i.Protocol.SetProtocol(t.cs_neigong_uppro),i.Protocol.SetRequest(t.cs_neigong_uppro,Sproto.cs_neigong_uppro_request),i.Protocol.SetProtocol(t.cs_neigong_upstar),i.Protocol.SetRequest(t.cs_neigong_upstar,Sproto.cs_neigong_upstar_request),i.Protocol.SetProtocol(t.cs_offline_apply_req),i.Protocol.SetRequest(t.cs_offline_apply_req,Sproto.cs_offline_apply_req_request),i.Protocol.SetProtocol(t.cs_one_gift_buy_test),i.Protocol.SetRequest(t.cs_one_gift_buy_test,Sproto.cs_one_gift_buy_test_request),i.Protocol.SetProtocol(t.cs_one_gift_rewards),i.Protocol.SetRequest(t.cs_one_gift_rewards,Sproto.cs_one_gift_rewards_request),i.Protocol.SetProtocol(t.cs_one_recharge_activity_gain),i.Protocol.SetRequest(t.cs_one_recharge_activity_gain,Sproto.cs_one_recharge_activity_gain_request),i.Protocol.SetProtocol(t.cs_one_recharge_activity_state),i.Protocol.SetRequest(t.cs_one_recharge_activity_state,Sproto.cs_one_recharge_activity_state_request),i.Protocol.SetProtocol(t.cs_online_req),i.Protocol.SetRequest(t.cs_online_req,Sproto.cs_online_req_request),i.Protocol.SetProtocol(t.cs_online_reward_req),i.Protocol.SetRequest(t.cs_online_reward_req,Sproto.cs_online_reward_req_request),i.Protocol.SetProtocol(t.cs_operate_share),i.Protocol.SetRequest(t.cs_operate_share,Sproto.cs_operate_share_request),i.Protocol.SetProtocol(t.cs_paidboss_fight_req),i.Protocol.SetRequest(t.cs_paidboss_fight_req,Sproto.cs_paidboss_fight_req_request),i.Protocol.SetProtocol(t.cs_paidboss_req),i.Protocol.SetRequest(t.cs_paidboss_req,Sproto.cs_paidboss_req_request),i.Protocol.SetProtocol(t.cs_paidboss_setting_req),i.Protocol.SetRequest(t.cs_paidboss_setting_req,Sproto.cs_paidboss_setting_req_request),i.Protocol.SetProtocol(t.cs_pet_activate_req),i.Protocol.SetRequest(t.cs_pet_activate_req,Sproto.cs_pet_activate_req_request),i.Protocol.SetProtocol(t.cs_pet_attach_init_req),i.Protocol.SetRequest(t.cs_pet_attach_init_req,Sproto.cs_pet_attach_init_req_request),i.Protocol.SetProtocol(t.cs_pet_attach_req),i.Protocol.SetRequest(t.cs_pet_attach_req,Sproto.cs_pet_attach_req_request),i.Protocol.SetProtocol(t.cs_pet_attach_unlock_req),i.Protocol.SetRequest(t.cs_pet_attach_unlock_req,Sproto.cs_pet_attach_unlock_req_request),i.Protocol.SetProtocol(t.cs_pet_compose_req),i.Protocol.SetRequest(t.cs_pet_compose_req,Sproto.cs_pet_compose_req_request),i.Protocol.SetProtocol(t.cs_pet_init_req),i.Protocol.SetRequest(t.cs_pet_init_req,Sproto.cs_pet_init_req_request),i.Protocol.SetProtocol(t.cs_pet_pack_req),i.Protocol.SetRequest(t.cs_pet_pack_req,Sproto.cs_pet_pack_req_request),i.Protocol.SetProtocol(t.cs_pet_rename_req),i.Protocol.SetRequest(t.cs_pet_rename_req,Sproto.cs_pet_rename_req_request),i.Protocol.SetProtocol(t.cs_pet_setfight_req),i.Protocol.SetRequest(t.cs_pet_setfight_req,Sproto.cs_pet_setfight_req_request),i.Protocol.SetProtocol(t.cs_pet_skillup_req),i.Protocol.SetRequest(t.cs_pet_skillup_req,Sproto.cs_pet_skillup_req_request),i.Protocol.SetProtocol(t.cs_pet_smelt_req),i.Protocol.SetRequest(t.cs_pet_smelt_req,Sproto.cs_pet_smelt_req_request),i.Protocol.SetProtocol(t.cs_pet_uplevel_req),i.Protocol.SetRequest(t.cs_pet_uplevel_req,Sproto.cs_pet_uplevel_req_request),i.Protocol.SetProtocol(t.cs_pet_upstar_req),i.Protocol.SetRequest(t.cs_pet_upstar_req,Sproto.cs_pet_upstar_req_request),i.Protocol.SetProtocol(t.cs_pet_wake_req),i.Protocol.SetRequest(t.cs_pet_wake_req,Sproto.cs_pet_wake_req_request),i.Protocol.SetProtocol(t.cs_pet_wash_req),i.Protocol.SetRequest(t.cs_pet_wash_req,Sproto.cs_pet_wash_req_request),i.Protocol.SetProtocol(t.cs_pet_washlock_req),i.Protocol.SetRequest(t.cs_pet_washlock_req,Sproto.cs_pet_washlock_req_request),i.Protocol.SetProtocol(t.cs_pet_washrep_req),i.Protocol.SetRequest(t.cs_pet_washrep_req,Sproto.cs_pet_washrep_req_request),i.Protocol.SetProtocol(t.cs_petsSearch_hunt),i.Protocol.SetRequest(t.cs_petsSearch_hunt,Sproto.cs_petsSearch_hunt_request),i.Protocol.SetProtocol(t.cs_prestige_req_topthree),i.Protocol.SetProtocol(t.cs_prestige_uplevel),i.Protocol.SetRequest(t.cs_prestige_uplevel,Sproto.cs_prestige_uplevel_request),i.Protocol.SetProtocol(t.cs_public_boss_attack_player),i.Protocol.SetRequest(t.cs_public_boss_attack_player,Sproto.cs_public_boss_attack_player_request),i.Protocol.SetProtocol(t.cs_public_boss_challenge),i.Protocol.SetRequest(t.cs_public_boss_challenge,Sproto.cs_public_boss_challenge_request),i.Protocol.SetProtocol(t.cs_public_boss_challenge_record),i.Protocol.SetRequest(t.cs_public_boss_challenge_record,Sproto.cs_public_boss_challenge_record_request),i.Protocol.SetProtocol(t.cs_public_boss_clear_cd),i.Protocol.SetProtocol(t.cs_public_boss_rank),i.Protocol.SetRequest(t.cs_public_boss_rank,Sproto.cs_public_boss_rank_request),i.Protocol.SetProtocol(t.cs_public_boss_save_autofight),i.Protocol.SetRequest(t.cs_public_boss_save_autofight,Sproto.cs_public_boss_save_autofight_request),i.Protocol.SetProtocol(t.cs_public_boss_save_remind),i.Protocol.SetRequest(t.cs_public_boss_save_remind,Sproto.cs_public_boss_save_remind_request),i.Protocol.SetProtocol(t.cs_public_boss_send_boos_list),i.Protocol.SetProtocol(t.cs_public_boss_send_init_info),i.Protocol.SetProtocol(t.cs_public_boss_send_panel_info),i.Protocol.SetProtocol(t.cs_public_challenge_owner),i.Protocol.SetProtocol(t.cs_public_relive_cd),i.Protocol.SetProtocol(t.cs_raid_add_count),i.Protocol.SetRequest(t.cs_raid_add_count,Sproto.cs_raid_add_count_request),i.Protocol.SetProtocol(t.cs_raid_artifact),i.Protocol.SetRequest(t.cs_raid_artifact,Sproto.cs_raid_artifact_request),i.Protocol.SetProtocol(t.cs_raid_artifact_award),i.Protocol.SetRequest(t.cs_raid_artifact_award,Sproto.cs_raid_artifact_award_request),i.Protocol.SetProtocol(t.cs_raid_artifact_buy_req),i.Protocol.SetRequest(t.cs_raid_artifact_buy_req,Sproto.cs_raid_artifact_buy_req_request),i.Protocol.SetProtocol(t.cs_raid_artifact_info),i.Protocol.SetRequest(t.cs_raid_artifact_info,Sproto.cs_raid_artifact_info_request),i.Protocol.SetProtocol(t.cs_raid_artifact_morra),i.Protocol.SetRequest(t.cs_raid_artifact_morra,Sproto.cs_raid_artifact_morra_request),i.Protocol.SetProtocol(t.cs_raid_call_boss_play),i.Protocol.SetRequest(t.cs_raid_call_boss_play,Sproto.cs_raid_call_boss_play_request),i.Protocol.SetProtocol(t.cs_raid_challenget),i.Protocol.SetRequest(t.cs_raid_challenget,Sproto.cs_raid_challenget_request),i.Protocol.SetProtocol(t.cs_raid_exit_raid),i.Protocol.SetRequest(t.cs_raid_exit_raid,Sproto.cs_raid_exit_raid_request),i.Protocol.SetProtocol(t.cs_raid_get_award),i.Protocol.SetRequest(t.cs_raid_get_award,Sproto.cs_raid_get_award_request),i.Protocol.SetProtocol(t.cs_raid_get_boss_reward),i.Protocol.SetRequest(t.cs_raid_get_boss_reward,Sproto.cs_raid_get_boss_reward_request),i.Protocol.SetProtocol(t.cs_raid_get_world_award),i.Protocol.SetRequest(t.cs_raid_get_world_award,Sproto.cs_raid_get_world_award_request),i.Protocol.SetProtocol(t.cs_raid_guardian_fight_req),i.Protocol.SetRequest(t.cs_raid_guardian_fight_req,Sproto.cs_raid_guardian_fight_req_request),i.Protocol.SetProtocol(t.cs_raid_guardian_quick_req),i.Protocol.SetRequest(t.cs_raid_guardian_quick_req,Sproto.cs_raid_guardian_quick_req_request),i.Protocol.SetProtocol(t.cs_raid_guardian_req),i.Protocol.SetRequest(t.cs_raid_guardian_req,Sproto.cs_raid_guardian_req_request),i.Protocol.SetProtocol(t.cs_raid_guardian_tili_req),i.Protocol.SetRequest(t.cs_raid_guardian_tili_req,Sproto.cs_raid_guardian_tili_req_request),i.Protocol.SetProtocol(t.cs_raid_next_chapter_req),i.Protocol.SetRequest(t.cs_raid_next_chapter_req,Sproto.cs_raid_next_chapter_req_request),i.Protocol.SetProtocol(t.cs_raid_pk_boss),i.Protocol.SetRequest(t.cs_raid_pk_boss,Sproto.cs_raid_pk_boss_request),i.Protocol.SetProtocol(t.cs_raid_wave_complete),i.Protocol.SetRequest(t.cs_raid_wave_complete,Sproto.cs_raid_wave_complete_request),i.Protocol.SetProtocol(t.cs_rank_player_info),i.Protocol.SetRequest(t.cs_rank_player_info,Sproto.cs_rank_player_info_request),i.Protocol.SetProtocol(t.cs_rank_req),i.Protocol.SetRequest(t.cs_rank_req,Sproto.cs_rank_req_request),i.Protocol.SetProtocol(t.cs_rank_worship_all_count),i.Protocol.SetRequest(t.cs_rank_worship_all_count,Sproto.cs_rank_worship_all_count_request),i.Protocol.SetProtocol(t.cs_rank_worship_data_req),i.Protocol.SetRequest(t.cs_rank_worship_data_req,Sproto.cs_rank_worship_data_req_request),i.Protocol.SetProtocol(t.cs_rank_worship_once),i.Protocol.SetRequest(t.cs_rank_worship_once,Sproto.cs_rank_worship_once_request),i.Protocol.SetProtocol(t.cs_rebate_activity_buy),i.Protocol.SetRequest(t.cs_rebate_activity_buy,Sproto.cs_rebate_activity_buy_request),i.Protocol.SetProtocol(t.cs_rebate_activity_gain_other_awards),i.Protocol.SetRequest(t.cs_rebate_activity_gain_other_awards,Sproto.cs_rebate_activity_gain_other_awards_request),i.Protocol.SetProtocol(t.cs_rebate_activity_info),i.Protocol.SetRequest(t.cs_rebate_activity_info,Sproto.cs_rebate_activity_info_request),i.Protocol.SetProtocol(t.cs_receive_sorce_reward),i.Protocol.SetRequest(t.cs_receive_sorce_reward,Sproto.cs_receive_sorce_reward_request),i.Protocol.SetProtocol(t.cs_recharge_get_awards),i.Protocol.SetRequest(t.cs_recharge_get_awards,Sproto.cs_recharge_get_awards_request),i.Protocol.SetProtocol(t.cs_recharge_gift_reward),i.Protocol.SetRequest(t.cs_recharge_gift_reward,Sproto.cs_recharge_gift_reward_request),i.Protocol.SetProtocol(t.cs_recharge_month_reward),i.Protocol.SetProtocol(t.cs_recharge_test),i.Protocol.SetRequest(t.cs_recharge_test,Sproto.cs_recharge_test_request),i.Protocol.SetProtocol(t.cs_recharge_test_invest),i.Protocol.SetRequest(t.cs_recharge_test_invest,Sproto.cs_recharge_test_invest_request),i.Protocol.SetProtocol(t.cs_recharge_test_month),i.Protocol.SetRequest(t.cs_recharge_test_month,Sproto.cs_recharge_test_month_request),i.Protocol.SetProtocol(t.cs_redeemcode_use),i.Protocol.SetRequest(t.cs_redeemcode_use,Sproto.cs_redeemcode_use_request),i.Protocol.SetResponse(t.cs_redeemcode_use,Sproto.cs_redeemcode_use_response),i.Protocol.SetProtocol(t.cs_revive_actor),i.Protocol.SetRequest(t.cs_revive_actor,Sproto.cs_revive_actor_request),i.Protocol.SetProtocol(t.cs_ride_change_req),i.Protocol.SetRequest(t.cs_ride_change_req,Sproto.cs_ride_change_req_request),i.Protocol.SetProtocol(t.cs_ride_eat_req),i.Protocol.SetRequest(t.cs_ride_eat_req,Sproto.cs_ride_eat_req_request),i.Protocol.SetProtocol(t.cs_ride_equip_uplevel_req),i.Protocol.SetRequest(t.cs_ride_equip_uplevel_req,Sproto.cs_ride_equip_uplevel_req_request),i.Protocol.SetProtocol(t.cs_ride_equip_upstar_req),i.Protocol.SetRequest(t.cs_ride_equip_upstar_req,Sproto.cs_ride_equip_upstar_req_request),i.Protocol.SetProtocol(t.cs_ride_equipchange_req),i.Protocol.SetRequest(t.cs_ride_equipchange_req,Sproto.cs_ride_equipchange_req_request),i.Protocol.SetProtocol(t.cs_ride_equipoff_req),i.Protocol.SetRequest(t.cs_ride_equipoff_req,Sproto.cs_ride_equipoff_req_request),i.Protocol.SetProtocol(t.cs_ride_getaward_req),i.Protocol.SetRequest(t.cs_ride_getaward_req,Sproto.cs_ride_getaward_req_request),i.Protocol.SetProtocol(t.cs_ride_init_req),i.Protocol.SetRequest(t.cs_ride_init_req,Sproto.cs_ride_init_req_request),i.Protocol.SetProtocol(t.cs_ride_skillup_req),i.Protocol.SetRequest(t.cs_ride_skillup_req,Sproto.cs_ride_skillup_req_request),i.Protocol.SetProtocol(t.cs_ride_uplevel_req),i.Protocol.SetRequest(t.cs_ride_uplevel_req,Sproto.cs_ride_uplevel_req_request),i.Protocol.SetProtocol(t.cs_ride_upstar_req),i.Protocol.SetRequest(t.cs_ride_upstar_req,Sproto.cs_ride_upstar_req_request),i.Protocol.SetProtocol(t.cs_ring_active),i.Protocol.SetRequest(t.cs_ring_active,Sproto.cs_ring_active_request),i.Protocol.SetProtocol(t.cs_ring_soul_evil_change),i.Protocol.SetRequest(t.cs_ring_soul_evil_change,Sproto.cs_ring_soul_evil_change_request),i.Protocol.SetProtocol(t.cs_ring_uplevel),i.Protocol.SetRequest(t.cs_ring_uplevel,Sproto.cs_ring_uplevel_request),i.Protocol.SetProtocol(t.cs_ringboss_init),i.Protocol.SetRequest(t.cs_ringboss_init,Sproto.cs_ringboss_init_request),i.Protocol.SetProtocol(t.cs_rob_biaoche),i.Protocol.SetRequest(t.cs_rob_biaoche,Sproto.cs_rob_biaoche_request),i.Protocol.SetProtocol(t.cs_rob_biaoche_award),i.Protocol.SetRequest(t.cs_rob_biaoche_award,Sproto.cs_rob_biaoche_award_request),i.Protocol.SetProtocol(t.cs_send_heart_beat),i.Protocol.SetRequest(t.cs_send_heart_beat,Sproto.cs_send_heart_beat_request),i.Protocol.SetProtocol(t.cs_sene_gm_command),i.Protocol.SetRequest(t.cs_sene_gm_command,Sproto.cs_sene_gm_command_request),i.Protocol.SetProtocol(t.cs_set_clientvalue),i.Protocol.SetRequest(t.cs_set_clientvalue,Sproto.cs_set_clientvalue_request),i.Protocol.SetProtocol(t.cs_set_is_open_payfrist),i.Protocol.SetRequest(t.cs_set_is_open_payfrist,Sproto.cs_set_is_open_payfrist_request),i.Protocol.SetProtocol(t.cs_shapeshift_send_comcard),i.Protocol.SetRequest(t.cs_shapeshift_send_comcard,Sproto.cs_shapeshift_send_comcard_request),i.Protocol.SetProtocol(t.cs_shapeshift_send_info),i.Protocol.SetRequest(t.cs_shapeshift_send_info,Sproto.cs_shapeshift_send_info_request),i.Protocol.SetProtocol(t.cs_shapeshift_send_join),i.Protocol.SetRequest(t.cs_shapeshift_send_join,Sproto.cs_shapeshift_send_join_request),i.Protocol.SetProtocol(t.cs_shapeshift_send_upgrade),i.Protocol.SetRequest(t.cs_shapeshift_send_upgrade,Sproto.cs_shapeshift_send_upgrade_request),i.Protocol.SetProtocol(t.cs_share_Help),i.Protocol.SetRequest(t.cs_share_Help,Sproto.cs_share_Help_request),i.Protocol.SetProtocol(t.cs_share_event),i.Protocol.SetRequest(t.cs_share_event,Sproto.cs_share_event_request),i.Protocol.SetProtocol(t.cs_shiliansha_send_buff),i.Protocol.SetRequest(t.cs_shiliansha_send_buff,Sproto.cs_shiliansha_send_buff_request),i.Protocol.SetProtocol(t.cs_shiliansha_send_buy_buff),i.Protocol.SetRequest(t.cs_shiliansha_send_buy_buff,Sproto.cs_shiliansha_send_buy_buff_request),i.Protocol.SetProtocol(t.cs_shiliansha_send_continue),i.Protocol.SetRequest(t.cs_shiliansha_send_continue,Sproto.cs_shiliansha_send_continue_request),i.Protocol.SetProtocol(t.cs_shiliansha_send_enter),i.Protocol.SetRequest(t.cs_shiliansha_send_enter,Sproto.cs_shiliansha_send_enter_request),i.Protocol.SetProtocol(t.cs_shiliansha_send_info),i.Protocol.SetRequest(t.cs_shiliansha_send_info,Sproto.cs_shiliansha_send_info_request),i.Protocol.SetProtocol(t.cs_shop_buy),i.Protocol.SetRequest(t.cs_shop_buy,Sproto.cs_shop_buy_request),i.Protocol.SetProtocol(t.cs_shop_buy_jifen),i.Protocol.SetRequest(t.cs_shop_buy_jifen,Sproto.cs_shop_buy_jifen_request),i.Protocol.SetProtocol(t.cs_shop_buy_medal),i.Protocol.SetRequest(t.cs_shop_buy_medal,Sproto.cs_shop_buy_medal_request),i.Protocol.SetProtocol(t.cs_shop_cross_tianti_glory_buy),i.Protocol.SetRequest(t.cs_shop_cross_tianti_glory_buy,Sproto.cs_shop_cross_tianti_glory_buy_request),i.Protocol.SetProtocol(t.cs_shop_cross_tianti_glory_times),i.Protocol.SetRequest(t.cs_shop_cross_tianti_glory_times,Sproto.cs_shop_cross_tianti_glory_times_request),i.Protocol.SetProtocol(t.cs_shop_godequip_buy),i.Protocol.SetRequest(t.cs_shop_godequip_buy,Sproto.cs_shop_godequip_buy_request),i.Protocol.SetProtocol(t.cs_shop_medal_message),i.Protocol.SetRequest(t.cs_shop_medal_message,Sproto.cs_shop_medal_message_request),i.Protocol.SetProtocol(t.cs_shop_refresh),i.Protocol.SetRequest(t.cs_shop_refresh,Sproto.cs_shop_refresh_request),i.Protocol.SetProtocol(t.cs_shop_start_refresh),i.Protocol.SetProtocol(t.cs_skill_break),i.Protocol.SetRequest(t.cs_skill_break,Sproto.cs_skill_break_request),i.Protocol.SetProtocol(t.cs_skill_setfight_req),i.Protocol.SetRequest(t.cs_skill_setfight_req,Sproto.cs_skill_setfight_req_request),i.Protocol.SetProtocol(t.cs_skill_upgrade),i.Protocol.SetRequest(t.cs_skill_upgrade,Sproto.cs_skill_upgrade_request),i.Protocol.SetProtocol(t.cs_skill_upgrade_all),i.Protocol.SetRequest(t.cs_skill_upgrade_all,Sproto.cs_skill_upgrade_all_request),i.Protocol.SetProtocol(t.cs_small_routine_gain),i.Protocol.SetRequest(t.cs_small_routine_gain,Sproto.cs_small_routine_gain_request),i.Protocol.SetProtocol(t.cs_sore_info),i.Protocol.SetRequest(t.cs_sore_info,Sproto.cs_sore_info_request),i.Protocol.SetProtocol(t.cs_start_biaoche),i.Protocol.SetRequest(t.cs_start_biaoche,Sproto.cs_start_biaoche_request),i.Protocol.SetProtocol(t.cs_task_apply_vitality),i.Protocol.SetRequest(t.cs_task_apply_vitality,Sproto.cs_task_apply_vitality_request),i.Protocol.SetProtocol(t.cs_task_get_achieve),i.Protocol.SetRequest(t.cs_task_get_achieve,Sproto.cs_task_get_achieve_request),i.Protocol.SetProtocol(t.cs_task_get_task),i.Protocol.SetRequest(t.cs_task_get_task,Sproto.cs_task_get_task_request),i.Protocol.SetProtocol(t.cs_task_get_vitality_awards),i.Protocol.SetRequest(t.cs_task_get_vitality_awards,Sproto.cs_task_get_vitality_awards_request),i.Protocol.SetProtocol(t.cs_task_share_open),i.Protocol.SetRequest(t.cs_task_share_open,Sproto.cs_task_share_open_request),i.Protocol.SetProtocol(t.cs_task_warorder_reward),i.Protocol.SetRequest(t.cs_task_warorder_reward,Sproto.cs_task_warorder_reward_request),i.Protocol.SetProtocol(t.cs_tatoo_equipoff_req),i.Protocol.SetRequest(t.cs_tatoo_equipoff_req,Sproto.cs_tatoo_equipoff_req_request),i.Protocol.SetProtocol(t.cs_tatoo_equipon_req),i.Protocol.SetRequest(t.cs_tatoo_equipon_req,Sproto.cs_tatoo_equipon_req_request),i.Protocol.SetProtocol(t.cs_tatoo_init_req),i.Protocol.SetRequest(t.cs_tatoo_init_req,Sproto.cs_tatoo_init_req_request),i.Protocol.SetProtocol(t.cs_tatoo_strength_req),i.Protocol.SetRequest(t.cs_tatoo_strength_req,Sproto.cs_tatoo_strength_req_request),i.Protocol.SetProtocol(t.cs_team_fight_req),i.Protocol.SetRequest(t.cs_team_fight_req,Sproto.cs_team_fight_req_request),i.Protocol.SetProtocol(t.cs_team_info_req),i.Protocol.SetRequest(t.cs_team_info_req,Sproto.cs_team_info_req_request),i.Protocol.SetProtocol(t.cs_team_join_req),i.Protocol.SetRequest(t.cs_team_join_req,Sproto.cs_team_join_req_request),i.Protocol.SetProtocol(t.cs_team_kick_req),i.Protocol.SetRequest(t.cs_team_kick_req,Sproto.cs_team_kick_req_request),i.Protocol.SetProtocol(t.cs_team_quit_req),i.Protocol.SetRequest(t.cs_team_quit_req,Sproto.cs_team_quit_req_request),i.Protocol.SetProtocol(t.cs_team_req),i.Protocol.SetRequest(t.cs_team_req,Sproto.cs_team_req_request),i.Protocol.SetProtocol(t.cs_tendraw_send_draw),i.Protocol.SetRequest(t.cs_tendraw_send_draw,Sproto.cs_tendraw_send_draw_request),i.Protocol.SetProtocol(t.cs_tendraw_send_info),i.Protocol.SetRequest(t.cs_tendraw_send_info,Sproto.cs_tendraw_send_info_request),i.Protocol.SetProtocol(t.cs_ticket_treasure_hunt),i.Protocol.SetRequest(t.cs_ticket_treasure_hunt,Sproto.cs_ticket_treasure_hunt_request),i.Protocol.SetProtocol(t.cs_ticket_treasure_record),i.Protocol.SetRequest(t.cs_ticket_treasure_record,Sproto.cs_ticket_treasure_record_request),i.Protocol.SetProtocol(t.cs_ticket_treasure_reward),i.Protocol.SetRequest(t.cs_ticket_treasure_reward,Sproto.cs_ticket_treasure_reward_request),i.Protocol.SetProtocol(t.cs_title_req),i.Protocol.SetProtocol(t.cs_title_set),i.Protocol.SetRequest(t.cs_title_set,Sproto.cs_title_set_request),i.Protocol.SetProtocol(t.cs_tower_award_req),i.Protocol.SetRequest(t.cs_tower_award_req,Sproto.cs_tower_award_req_request),i.Protocol.SetProtocol(t.cs_tower_enter_req),i.Protocol.SetRequest(t.cs_tower_enter_req,Sproto.cs_tower_enter_req_request),i.Protocol.SetProtocol(t.cs_tower_floor_req),i.Protocol.SetRequest(t.cs_tower_floor_req,Sproto.cs_tower_floor_req_request),i.Protocol.SetProtocol(t.cs_tower_init_req),i.Protocol.SetRequest(t.cs_tower_init_req,Sproto.cs_tower_init_req_request),i.Protocol.SetProtocol(t.cs_tower_sweep_req),i.Protocol.SetRequest(t.cs_tower_sweep_req,Sproto.cs_tower_sweep_req_request),i.Protocol.SetProtocol(t.cs_treasure_hunt),i.Protocol.SetRequest(t.cs_treasure_hunt,Sproto.cs_treasure_hunt_request),i.Protocol.SetProtocol(t.cs_treasure_record),i.Protocol.SetRequest(t.cs_treasure_record,Sproto.cs_treasure_record_request),i.Protocol.SetProtocol(t.cs_update_qzonewanba_token),i.Protocol.SetRequest(t.cs_update_qzonewanba_token,Sproto.cs_update_qzonewanba_token_request),i.Protocol.SetResponse(t.cs_update_qzonewanba_token,Sproto.cs_update_qzonewanba_token_response),i.Protocol.SetProtocol(t.cs_uplevel_biaoche),i.Protocol.SetRequest(t.cs_uplevel_biaoche,Sproto.cs_uplevel_biaoche_request),i.Protocol.SetProtocol(t.cs_use_skill),i.Protocol.SetRequest(t.cs_use_skill,Sproto.cs_use_skill_request),i.Protocol.SetProtocol(t.cs_vip_boss_challenge_time),i.Protocol.SetRequest(t.cs_vip_boss_challenge_time,Sproto.cs_vip_boss_challenge_time_request),i.Protocol.SetProtocol(t.cs_vip_boss_init_panel_info),i.Protocol.SetRequest(t.cs_vip_boss_init_panel_info,Sproto.cs_vip_boss_init_panel_info_request),i.Protocol.SetProtocol(t.cs_vip_boss_refresh_remind),i.Protocol.SetRequest(t.cs_vip_boss_refresh_remind,Sproto.cs_vip_boss_refresh_remind_request),i.Protocol.SetProtocol(t.cs_vip_boss_remind_panel_info),i.Protocol.SetRequest(t.cs_vip_boss_remind_panel_info,Sproto.cs_vip_boss_remind_panel_info_request),i.Protocol.SetProtocol(t.cs_vipshop_info),i.Protocol.SetRequest(t.cs_vipshop_info,Sproto.cs_vipshop_info_request),i.Protocol.SetProtocol(t.cs_wanba_redeemcode_use),i.Protocol.SetRequest(t.cs_wanba_redeemcode_use,Sproto.cs_wanba_redeemcode_use_request),i.Protocol.SetResponse(t.cs_wanba_redeemcode_use,Sproto.cs_wanba_redeemcode_use_response),i.Protocol.SetProtocol(t.cs_wanba_share_use),i.Protocol.SetRequest(t.cs_wanba_share_use,Sproto.cs_wanba_share_use_request),i.Protocol.SetResponse(t.cs_wanba_share_use,Sproto.cs_wanba_share_use_response),i.Protocol.SetProtocol(t.cs_wash_soul_evil_type),i.Protocol.SetRequest(t.cs_wash_soul_evil_type,Sproto.cs_wash_soul_evil_type_request),i.Protocol.SetProtocol(t.cs_wing_activate),i.Protocol.SetRequest(t.cs_wing_activate,Sproto.cs_wing_activate_request),i.Protocol.SetResponse(t.cs_wing_activate,Sproto.cs_wing_activate_response),i.Protocol.SetProtocol(t.cs_wing_boost),i.Protocol.SetRequest(t.cs_wing_boost,Sproto.cs_wing_boost_request),i.Protocol.SetProtocol(t.cs_wing_equip),i.Protocol.SetRequest(t.cs_wing_equip,Sproto.cs_wing_equip_request),i.Protocol.SetResponse(t.cs_wing_equip,Sproto.cs_wing_equip_response),i.Protocol.SetProtocol(t.cs_wing_evolution),i.Protocol.SetRequest(t.cs_wing_evolution,Sproto.cs_wing_evolution_request),i.Protocol.SetResponse(t.cs_wing_evolution,Sproto.cs_wing_evolution_response),i.Protocol.SetProtocol(t.cs_wing_exten),i.Protocol.SetRequest(t.cs_wing_exten,Sproto.cs_wing_exten_request),i.Protocol.SetProtocol(t.cs_wing_onekey),i.Protocol.SetRequest(t.cs_wing_onekey,Sproto.cs_wing_onekey_request),i.Protocol.SetProtocol(t.cs_wing_upgrade),i.Protocol.SetRequest(t.cs_wing_upgrade,Sproto.cs_wing_upgrade_request),i.Protocol.SetProtocol(t.cs_world_boss_buy_cd),i.Protocol.SetProtocol(t.cs_world_boss_challenge),i.Protocol.SetProtocol(t.cs_world_boss_join_lottery),i.Protocol.SetProtocol(t.cs_world_boss_list),i.Protocol.SetProtocol(t.cs_yb_roll_start),i.Protocol.SetRequest(t.cs_yb_roll_start,Sproto.cs_yb_roll_start_request),i.Protocol.SetProtocol(t.cs_yb_turntable_info),i.Protocol.SetRequest(t.cs_yb_turntable_info,Sproto.cs_yb_turntable_info_request),i.Protocol.SetProtocol(t.cs_zhuanzhi_active),i.Protocol.SetRequest(t.cs_zhuanzhi_active,Sproto.cs_zhuanzhi_active_request),i.Protocol.SetProtocol(t.cs_zhuanzhi_donate),i.Protocol.SetRequest(t.cs_zhuanzhi_donate,Sproto.cs_zhuanzhi_donate_request),i.Protocol.SetProtocol(t.cs_zhuanzhi_enter_raid),i.Protocol.SetRequest(t.cs_zhuanzhi_enter_raid,Sproto.cs_zhuanzhi_enter_raid_request),i.Protocol.SetProtocol(t.cs_zhuanzhi_jingmai_boost),i.Protocol.SetRequest(t.cs_zhuanzhi_jingmai_boost,Sproto.cs_zhuanzhi_jingmai_boost_request),i.Protocol.SetProtocol(t.cs_zhuanzhi_jingmai_upgrade),i.Protocol.SetRequest(t.cs_zhuanzhi_jingmai_upgrade,Sproto.cs_zhuanzhi_jingmai_upgrade_request),i.Protocol.SetProtocol(t.cs_zhuanzhi_talent_upgrade),i.Protocol.SetRequest(t.cs_zhuanzhi_talent_upgrade,Sproto.cs_zhuanzhi_talent_upgrade_request),i.Protocol.SetProtocol(t.cs_zhuanzhi_tasklist_req),i.Protocol.SetRequest(t.cs_zhuanzhi_tasklist_req,Sproto.cs_zhuanzhi_tasklist_req_request),i.Protocol.SetProtocol(t.cs_zhuzai_fenjie),i.Protocol.SetRequest(t.cs_zhuzai_fenjie,Sproto.cs_zhuzai_fenjie_request),i.Protocol.SetProtocol(t.cs_zhuzai_grow),i.Protocol.SetRequest(t.cs_zhuzai_grow,Sproto.cs_zhuzai_grow_request),i.Protocol.SetProtocol(t.cs_zhuzai_shengjie),i.Protocol.SetRequest(t.cs_zhuzai_shengjie,Sproto.cs_zhuzai_shengjie_request),i.Protocol.SetProtocol(t.cs_zs_boss_buy_cd),i.Protocol.SetProtocol(t.cs_zs_boss_challenge),i.Protocol.SetProtocol(t.cs_zs_boss_join_lottery),i.Protocol.SetProtocol(t.cs_zs_boss_list),i.Protocol.SetProtocol(t.cs_zs_boss_rank),i.Protocol.SetRequest(t.cs_zs_boss_rank,Sproto.cs_zs_boss_rank_request),i.Protocol.SetProtocol(t.cs_zs_get_exp),i.Protocol.SetRequest(t.cs_zs_get_exp,Sproto.cs_zs_get_exp_request),i.Protocol.SetProtocol(t.cs_zs_point_clear),i.Protocol.SetRequest(t.cs_zs_point_clear,Sproto.cs_zs_point_clear_request),i.Protocol.SetProtocol(t.cs_zs_point_req),i.Protocol.SetRequest(t.cs_zs_point_req,Sproto.cs_zs_point_req_request),i.Protocol.SetProtocol(t.cs_zs_uplevel),i.Protocol.SetRequest(t.cs_zs_uplevel,Sproto.cs_zs_uplevel_request),i.Protocol.SetProtocol(t.sc_guildwar_get_actor_scores),i.Protocol.SetRequest(t.sc_guildwar_get_actor_scores,Sproto.sc_guildwar_get_actor_scores_request),i.Protocol.SetProtocol(t.sc_guildwar_get_guild_scores),i.Protocol.SetRequest(t.sc_guildwar_get_guild_scores,Sproto.sc_guildwar_get_guild_scores_request),i.Protocol.SetProtocol(t.sc_miji_change),i.Protocol.SetRequest(t.sc_miji_change,Sproto.sc_miji_change_request),i.Protocol.SetProtocol(t.sc_miji_learn),i.Protocol.SetRequest(t.sc_miji_learn,Sproto.sc_miji_learn_request),i.Protocol.SetProtocol(t.sc_raid_clear_cd),i.Protocol.SetProtocol(t.sc_ringboss_enter_req),i.Protocol.SetRequest(t.sc_ringboss_enter_req,Sproto.sc_ringboss_enter_req_request),i.Protocol.SetProtocol(t.sc_ringboss_refresh_req),i.Protocol.SetRequest(t.sc_ringboss_refresh_req,Sproto.sc_ringboss_refresh_req_request),i.Protocol.SetProtocol(t.sc_vip_get_awards),i.Protocol.SetRequest(t.sc_vip_get_awards,Sproto.sc_vip_get_awards_request),i
}return __extends(t,e),t.checkAccount=1,t.QueryList=2,t.EnterGame=3,t.CreateActor=4,t.RandName=5,t.cs_base_get_game_time=6,t.UpdateHead=7,t.cs_sene_gm_command=100,t.cs_create_new_sub_role=102,t.cs_get_server_time=114,t.cs_get_other_actor_info=116,t.cs_get_actor_module_isactive=119,t.cs_change_actor_name=122,t.cs_get_gongnengyugao_reward=123,t.cs_set_clientvalue=124,t.cs_baserecord_info=125,t.cs_set_is_open_payfrist=127,t.cs_zs_point_req=128,t.cs_add_zs_point=129,t.cs_zs_point_clear=130,t.cs_jingmai_boost=131,t.cs_jingmai_upgrade=132,t.cs_jingmai_stage=133,t.cs_element_set_req=141,t.cs_client_ready_req=150,t.cs_send_heart_beat=199,t.cs_raid_wave_complete=201,t.cs_raid_pk_boss=202,t.cs_raid_get_boss_reward=203,t.cs_raid_exit_raid=204,t.cs_raid_get_award=205,t.cs_raid_get_world_award=206,t.cs_raid_challenget=210,t.cs_raid_add_count=211,t.cs_raid_call_boss_play=212,t.sc_raid_clear_cd=213,t.cs_raid_artifact=217,t.cs_raid_artifact_award=218,t.cs_raid_artifact_info=222,t.cs_raid_artifact_morra=223,t.cs_raid_next_chapter_req=226,t.cs_raid_guardian_req=227,t.cs_raid_guardian_fight_req=228,t.cs_raid_guardian_quick_req=229,t.cs_raid_guardian_tili_req=230,t.cs_raid_artifact_buy_req=231,t.cs_offline_apply_req=235,t.cs_use_skill=301,t.cs_skill_upgrade=304,t.cs_skill_upgrade_all=305,t.cs_skill_break=308,t.cs_skill_setfight_req=309,t.cs_get_other_actor_base_info=350,t.cs_rank_player_info=400,t.cs_bag_add_grid=401,t.cs_bag_use_item=402,t.cs_bag_get_goods_by_store=403,t.cs_bag_mix_item=407,t.cs_bag_get_tendraw_by_store=409,t.cs_bag_compose_item=412,t.cs_bag_danyao_info=414,t.cs_bag_danyao_eat=415,t.cs_bag_danyao_cd=417,t.cs_bag_get_ticket_by_store=418,t.cs_equip_wear=501,t.cs_equip_smelt=502,t.cs_equip_upgrade=503,t.cs_equip_mix=504,t.cs_equip_autosmelt_req=505,t.cs_equip_resolve=506,t.cs_exten_id=510,t.cs_encounter_send_fight_refresh=601,t.cs_encounter_send_fight_result=602,t.cs_encounter_inquire_record=604,t.cs_encounter_send_result=605,t.cs_encounter_get_boss_award=606,t.cs_encounter_inquire_prestige=607,t.cs_encounter_clear_redpoint=608,t.cs_encounter_open_item=610,t.cs_encounter_get_item_info=611,t.cs_encounter_buy_pk_count=612,t.cs_encounter_send_revenge=613,t.cs_encounter_get_info=614,t.cs_encounter_get_news=615,t.cs_wing_boost=702,t.cs_wing_upgrade=703,t.cs_wing_activate=704,t.cs_wing_equip=711,t.cs_wing_evolution=712,t.cs_wing_onekey=713,t.cs_wing_exten=715,t.cs_forge_upgrade_grade=802,t.cs_forge_upgrade_bless=803,t.cs_forge_back_upgrade_goods=804,t.cs_forge_bless_ronglu_success=805,t.cs_forge_bless_boost_req=806,t.cs_forge_bless_upgrade_req=807,t.cs_forge_bless_smelt_req=808,t.cs_forge_onekey=809,t.cs_mail_get_content=901,t.cs_mail_get_reward=902,t.cs_mail_init=903,t.cs_mail_delet=904,t.cs_task_get_task=1001,t.cs_task_get_vitality_awards=1002,t.cs_task_get_achieve=1003,t.cs_task_share_open=1004,t.cs_task_warorder_reward=1005,t.cs_task_apply_vitality=1010,t.cs_public_boss_send_panel_info=1101,t.cs_public_boss_send_boos_list=1102,t.cs_public_boss_save_remind=1103,t.cs_public_boss_challenge_record=1104,t.cs_public_boss_challenge=1105,t.cs_public_boss_rank=1106,t.cs_public_boss_send_init_info=1110,t.cs_public_boss_clear_cd=1114,t.cs_public_challenge_owner=1115,t.cs_public_relive_cd=1116,t.cs_public_boss_save_autofight=1117,t.cs_public_boss_attack_player=1118,t.cs_cross_boss_panel_info=1119,t.cs_cross_boss_challenge=1120,t.cs_vip_boss_challenge_time=1130,t.cs_vip_boss_init_panel_info=1133,t.cs_vip_boss_refresh_remind=1135,t.cs_vip_boss_remind_panel_info=1137,t.cs_paidboss_req=1140,t.cs_paidboss_setting_req=1141,t.cs_paidboss_fight_req=1142,t.cs_gem_upgrade_grade=1202,t.cs_gem_onekey=1203,t.cs_zs_get_exp=1401,t.cs_zs_uplevel=1402,t.cs_essence_upgrade_grade=1502,t.cs_essence_onekey=1503,t.cs_shop_buy=1702,t.cs_shop_refresh=1703,t.cs_shop_buy_jifen=1705,t.cs_shop_medal_message=1706,t.cs_shop_buy_medal=1707,t.cs_shop_start_refresh=1708,t.cs_shop_godequip_buy=1709,t.cs_shop_cross_tianti_glory_buy=1713,t.cs_shop_cross_tianti_glory_times=1714,t.cs_rank_req=1901,t.cs_rank_worship_data_req=1902,t.cs_rank_worship_once=1903,t.cs_rank_worship_all_count=1904,t.sc_vip_get_awards=2001,t.cs_treasure_hunt=2301,t.cs_treasure_record=2302,t.cs_enter_treasure_raid=2303,t.cs_get_treasure_daily_award=2304,t.cs_get_treasure_boss_list=2305,t.cs_petsSearch_hunt=2306,t.cs_ticket_treasure_hunt=2401,t.cs_ticket_treasure_record=2402,t.cs_ticket_treasure_reward=2403,t.cs_buy_vipshop_item=2450,t.cs_vipshop_info=2451,t.cs_challenge_raid_send=2501,t.cs_challenge_raid_day_reward=2502,t.cs_challenge_raid_new_reward=2503,t.cs_activity_send_reward=2602,t.cs_activity_send_dabiao_info=2603,t.cs_activity_send_level_info=2604,t.cs_yb_turntable_info=2615,t.cs_yb_roll_start=2617,t.cs_rebate_activity_info=2650,t.cs_rebate_activity_buy=2651,t.cs_rebate_activity_gain_other_awards=2652,t.cs_one_recharge_activity_state=2653,t.cs_one_recharge_activity_gain=2654,t.cs_mond_Sign_send_reward=2655,t.cs_luckywheel_hunt=2656,t.cs_luckywheel_record=2657,t.cs_luckywheel_rank=2658,t.cs_small_routine_gain=2659,t.cs_add_small_routine_state=2660,t.cs_activity_buyGoods=2664,t.cs_activity_warorder_reward=2665,t.cs_activity_warorder_exreward=2666,t.cs_activity_warorder_buylv=2667,t.cs_activity_warorder_buyscale=2668,t.cs_artifact_uplevel=2702,t.cs_artifact_stone_req=2704,t.cs_recharge_get_awards=2801,t.cs_recharge_test=2802,t.cs_recharge_test_month=2803,t.cs_recharge_gift_reward=2804,t.cs_recharge_month_reward=2805,t.cs_recharge_test_invest=2806,t.cs_buy_wanba_item=2808,t.cs_buy_yyb_item=2809,t.cs_buy_xiaoyouxi_item=2810,t.cs_chat_send_info=3101,t.cs_zhuzai_shengjie=3203,t.cs_zhuzai_grow=3204,t.cs_zhuzai_fenjie=3205,t.cs_zs_boss_list=3301,t.cs_zs_boss_challenge=3303,t.cs_zs_boss_rank=3304,t.cs_zs_boss_join_lottery=3305,t.cs_zs_boss_buy_cd=3306,t.cs_world_boss_list=3307,t.cs_world_boss_challenge=3308,t.cs_world_boss_buy_cd=3309,t.cs_world_boss_join_lottery=3310,t.cs_ladder_get_some_one=3502,t.cs_ladder_start_play=3503,t.cs_ladder_get_week_reward=3504,t.cs_ladder_get_rank_info=3505,t.cs_ladder_buy_count=3506,t.cs_ladder_get_record=3507,t.sc_miji_learn=3602,t.sc_miji_change=3603,t.cs_miji_fuben=3604,t.cs_miji_fuben_panel_info=3605,t.cs_miji_fuben_quick=3606,t.cs_miji_fuben_reward=3607,t.cs_miji_reward_data=3608,t.cs_money_tree_play=3702,t.cs_money_tree_reward=3703,t.cs_money_recharge_get=3704,t.cs_guild_getinfo=3801,t.cs_guild_getmembers=3802,t.cs_guild_getlist=3803,t.cs_guild_create=3804,t.cs_guild_quit=3805,t.cs_guild_join=3806,t.cs_guild_getapply=3807,t.cs_guild_setapply=3808,t.cs_guild_change_office=3809,t.cs_guild_demise=3810,t.cs_guild_kick=3811,t.cs_guild_contribute=3813,t.cs_guild_change_notice=3814,t.cs_guild_getskillinfo=3815,t.cs_guild_learnskill=3816,t.cs_guild_upbuilding=3817,t.cs_guild_temperskill=3818,t.cs_guild_gettaskaward=3821,t.cs_guild_gethistory=3822,t.cs_guild_getconcount=3824,t.cs_guild_getplayerinfo=3825,t.cs_guild_sendchat=3826,t.cs_guild_getallchat=3827,t.cs_guild_setautoadd=3828,t.cs_title_req=3901,t.cs_title_set=3904,t.cs_find_assets_init=4001,t.cs_find_assets_get=4002,t.cs_guildwar_send_redpacket=4102,t.cs_guildwar_get_redpacket=4103,t.sc_guildwar_get_guild_scores=4108,t.sc_guildwar_get_actor_scores=4109,t.cs_guildwar_get_dayaward=4113,t.cs_guildwar_disp_award=4120,t.cs_guildwar_get_winnerinfo=4121,t.cs_guildwar_get_my_guild_rank_info=4122,t.cs_guildwar_get_firstwinner_award=4123,t.cs_guildwar_get_winleader=4124,t.cs_guildwar_get_kffz_info=4125,t.cs_guildwar_get_kfwin_records=4126,t.cs_get_cross_tianti_list=4200,t.cs_cross_start_combat=4201,t.cs_cross_get_self_info=4202,t.cs_cross_get_combat_recode=4204,t.cs_cross_get_tianti_rank_info=4205,t.cs_cross_get_tianti_history_rank=4206,t.cs_cross_gain_tianti_history_award=4207,t.cs_cross_buy_combat_num=4208,t.cs_guildshop_getinfo=4301,t.cs_guildshop_getrecord=4302,t.cs_guildshop_open=4303,t.cs_gold_guaji_start_combat=4401,t.cs_gold_guaji_info=4402,t.cs_gold_guaji_obtain_items_info=4403,t.cs_gold_guaji_combat_boss=4407,t.cs_gold_guaji_start_relive=4409,t.cs_dress_get_info=4501,t.cs_dress_activate=4502,t.cs_dress_dress=4503,t.cs_dress_undress=4504,t.cs_dress_upgrade=4506,t.cs_dress_continue=4507,t.cs_mine_report_mine_info=4901,t.cs_mine_mapdata=4904,t.cs_mine_rob=4907,t.cs_mine_revenge=4908,t.cs_mine_steal=4909,t.cs_enter_dragon=5001,t.cs_Challenge_actor=5002,t.cs_Challenge_boss=5003,t.cs_sore_info=5004,t.cs_dragon_info=5005,t.cs_revive_actor=5006,t.cs_receive_sorce_reward=5007,t.cs_prestige_uplevel=5101,t.cs_prestige_req_topthree=5102,t.cs_longzhuang_boost=5302,t.cs_longzhuang_upgrade=5303,t.cs_longzhuang_onekey=5304,t.cs_fuwen_equipup=5401,t.cs_fuwen_open=5402,t.cs_expjade_use=5502,t.cs_legend_dress=5601,t.cs_redeemcode_use=5701,t.cs_ring_uplevel=5702,t.cs_ring_active=5706,t.cs_ring_soul_evil_change=5707,t.cs_wash_soul_evil_type=5708,t.cs_ringboss_init=5711,t.sc_ringboss_enter_req=5712,t.sc_ringboss_refresh_req=5713,t.cs_wanba_redeemcode_use=5715,t.cs_wanba_share_use=5718,t.cs_channel_share_use=5719,t.cs_get_qzonewanba_gift=5720,t.cs_get_qzonewanba_vipgift=5721,t.cs_get_qzonewanba_vipprivilege=5722,t.cs_get_qzonewanba_vipprivilege_stat=5723,t.cs_update_qzonewanba_token=5724,t.cs_eggbroken_hunt=5801,t.cs_eggbroken_record=5802,t.cs_eggbroken_hitting=5805,t.cs_holygun_init=6e3,t.cs_holygun_upstar=6001,t.cs_holygun_upscala=6002,t.cs_holygun_upskill=6003,t.cs_holygun_eatdanyao=6004,t.cs_holygun_achievement=6005,t.cs_holygun_reward=6006,t.cs_operate_share=6702,t.cs_share_event=6703,t.cs_share_Help=6705,t.cs_guild_boss_call=7901,t.cs_guild_boss_fight=7902,t.cs_guild_boss_rank=7903,t.cs_gdwar_enter_cross=8e3,t.cs_gdwar_enter_city=8001,t.cs_gdwar_leave=8002,t.cs_gdwar_update=8005,t.cs_gdwar_attack_monster=8006,t.cs_gdwar_attack_player=8007,t.cs_gdwar_integral_reward=8008,t.cs_gdwar_guild_rank=8009,t.cs_gdwar_actor_rank=8010,t.cs_gdwar_guild_member=8011,t.cs_gdwar_guild_get_group=8012,t.cs_gdwar_lottery_start=8101,t.cs_gdwar_click_flag=8401,t.cs_guild_activity_info=9001,t.cs_guild_robber_info=9011,t.cs_guild_robber_attack=9012,t.cs_guild_raid_info=9021,t.cs_guild_raid_sweep=9022,t.cs_guild_raid_boost=9023,t.cs_guild_raid_reward=9024,t.cs_guild_raid_attack=9025,t.cs_guild_raid_daily=9026,t.cs_get_biaoche_list=9600,t.cs_rob_biaoche=9601,t.cs_uplevel_biaoche=9602,t.cs_start_biaoche=9603,t.cs_rob_biaoche_award=9604,t.cs_biaoche_get_revenge_list=9605,t.cs_biaoche_revenge=9606,t.cs_enter_tryroad_raid=21003,t.cs_get_caiquan_result=21004,t.cs_get_tryroad_award=21005,t.cs_get_tryroad_rank=21006,t.cs_zhuanzhi_active=22001,t.cs_zhuanzhi_tasklist_req=22002,t.cs_zhuanzhi_enter_raid=22004,t.cs_equip_star_upgrade=22005,t.cs_equip_lvl_upgrade=22006,t.cs_zhuanzhi_donate=22007,t.cs_equip_zhuanzhi_skill=22010,t.cs_zhuanzhi_jingmai_boost=22011,t.cs_zhuanzhi_jingmai_upgrade=22012,t.cs_zhuanzhi_talent_upgrade=22022,t.cs_faq_req=22100,t.cs_luckypackage_testbuy_req=22111,t.cs_online_req=22121,t.cs_online_reward_req=22122,t.cs_funopen_close_req=22131,t.cs_monopoly_req=22200,t.cs_monopoly_dice_req=22202,t.cs_monopoly_cheat_req=22203,t.cs_monopoly_buy_req=22204,t.cs_monopoly_use_req=22205,t.cs_monopoly_exchange_req=22207,t.cs_monopoly_store_req=22208,t.cs_monopoly_rank_req=22209,t.cs_monopoly_fire_req=22211,t.cs_monopoly_raid_open=22214,t.cs_monopoly_tili_req=22215,t.cs_fieldexp_buff_req=22500,t.cs_fieldexp_buff_apply_req=22501,t.cs_fieldexp_buff_finish_req=22502,t.cs_shapeshift_send_join=25001,t.cs_shapeshift_send_upgrade=25002,t.cs_shapeshift_send_info=25003,t.cs_tendraw_send_draw=25007,t.cs_tendraw_send_info=25011,t.cs_shapeshift_send_comcard=25013,t.cs_shiliansha_send_enter=26001,t.cs_shiliansha_send_buy_buff=26002,t.cs_shiliansha_send_buff=26005,t.cs_shiliansha_send_info=26006,t.cs_shiliansha_send_continue=26007,t.cs_neigong_upstar=27001,t.cs_neigong_uppro=27002,t.cs_neigong_info=27003,t.cs_pet_init_req=3e4,t.cs_pet_uplevel_req=30001,t.cs_pet_upstar_req=30002,t.cs_pet_activate_req=30003,t.cs_pet_rename_req=30004,t.cs_pet_setfight_req=30005,t.cs_pet_skillup_req=30006,t.cs_pet_wash_req=30007,t.cs_pet_attach_init_req=30008,t.cs_pet_attach_unlock_req=30009,t.cs_pet_attach_req=30010,t.cs_pet_washlock_req=30011,t.cs_pet_washrep_req=30012,t.cs_pet_smelt_req=30014,t.cs_pet_compose_req=30015,t.cs_pet_wake_req=30016,t.cs_pet_pack_req=30017,t.cs_ride_init_req=30100,t.cs_ride_uplevel_req=30101,t.cs_ride_upstar_req=30102,t.cs_ride_skillup_req=30105,t.cs_ride_equip_uplevel_req=30106,t.cs_ride_equip_upstar_req=30107,t.cs_ride_equipchange_req=30108,t.cs_ride_equipoff_req=30109,t.cs_ride_eat_req=30110,t.cs_ride_getaward_req=30111,t.cs_ride_change_req=30112,t.cs_tower_init_req=30300,t.cs_tower_award_req=30301,t.cs_tower_enter_req=30303,t.cs_tower_sweep_req=30304,t.cs_tower_floor_req=30305,t.cs_tatoo_init_req=30401,t.cs_tatoo_equipon_req=30402,t.cs_tatoo_equipoff_req=30403,t.cs_tatoo_strength_req=30404,t.cs_team_req=30501,t.cs_team_info_req=30502,t.cs_team_join_req=30503,t.cs_team_quit_req=30504,t.cs_team_kick_req=30505,t.cs_team_fight_req=30506,t.cs_one_gift_rewards=30520,t.cs_one_gift_buy_test=30521,t}(Sproto.ProtocolBase);__reflect(C2sProtocol.prototype,"C2sProtocol");var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ctype=this.de.ri();break;case 1:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ctype&&this.se.wi(this.ctype,0),void 0!=this.level&&this.se.wi(this.level,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_challenge_raid_new_reward_request=t,__reflect(t.prototype,"Sproto.cs_challenge_raid_new_reward_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.fbID=this.de.ri();break;case 1:this.level=this.de.ri();break;case 2:this.status=this.de.rb();break;case 3:this.levelStatus1=this.de.ri();break;case 4:this.levelStatus2=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.fbID&&this.se.wi(this.fbID,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.status&&this.se.wb(this.status,2),void 0!=this.levelStatus1&&this.se.wi(this.levelStatus1,3),void 0!=this.levelStatus2&&this.se.wi(this.levelStatus2,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_challenge_raid_update_info_request=t,__reflect(t.prototype,"Sproto.sc_challenge_raid_update_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.pointId=this.de.ri();break;case 2:this.str=this.de.rs();break;case 3:this.bool=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.pointId&&this.se.wi(this.pointId,1),void 0!=this.str&&this.se.ws(this.str,2),void 0!=this.bool&&this.se.wb(this.bool,3),this.se.Close()},t}(e.SprotoTypeBase);e.cs_chat_send_info_request=t,__reflect(t.prototype,"Sproto.cs_chat_send_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,17,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.name=this.de.rs();break;case 4:this.job=this.de.ri();break;case 5:this.sex=this.de.ri();break;case 6:this.vip=this.de.ri();break;case 7:this.monthCard=this.de.ri();break;case 8:this.monthcard_super=this.de.ri();break;case 9:this.ladderLevel=this.de.ri();break;case 10:this.isFirst=this.de.ri();break;case 11:this.pointId=this.de.ri();break;case 12:this.str=this.de.rs();break;case 13:this.isTeacher=this.de.rb();break;case 14:this.time=this.de.ri();break;case 15:this.groupid=this.de.ri();break;case 16:this.teamid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.name&&this.se.ws(this.name,2),void 0!=this.job&&this.se.wi(this.job,4),void 0!=this.sex&&this.se.wi(this.sex,5),void 0!=this.vip&&this.se.wi(this.vip,6),void 0!=this.monthCard&&this.se.wi(this.monthCard,7),void 0!=this.monthcard_super&&this.se.wi(this.monthcard_super,8),void 0!=this.ladderLevel&&this.se.wi(this.ladderLevel,9),void 0!=this.isFirst&&this.se.wi(this.isFirst,10),void 0!=this.pointId&&this.se.wi(this.pointId,11),void 0!=this.str&&this.se.ws(this.str,12),void 0!=this.isTeacher&&this.se.wb(this.isTeacher,13),void 0!=this.time&&this.se.wi(this.time,14),void 0!=this.groupid&&this.se.wi(this.groupid,15),void 0!=this.teamid&&this.se.wi(this.teamid,16),this.se.Close()},t}(e.SprotoTypeBase);e.chat_data=t,__reflect(t.prototype,"Sproto.chat_data");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.success=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.success&&this.se.wb(this.success,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_chat_is_send_success_request=i,__reflect(i.prototype,"Sproto.sc_chat_is_send_success_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_chat_msg_delete_request=o,__reflect(o.prototype,"Sproto.sc_chat_msg_delete_request");var s=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.chatData=this.de.ro(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.chatData&&this.se.wo(this.chatData,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_chat_new_msg_request=s,__reflect(s.prototype,"Sproto.sc_chat_new_msg_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.level=this.de.ri();break;case 1:this.type=this.de.ri();break;case 2:this.str=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.level&&this.se.wi(this.level,0),void 0!=this.type&&this.se.wi(this.type,1),void 0!=this.str&&this.se.ws(this.str,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_chat_system_message_request=n,__reflect(n.prototype,"Sproto.sc_chat_system_message_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.num&&this.se.wi(this.num,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_cross_buy_combat_num_request=t,__reflect(t.prototype,"Sproto.cs_cross_buy_combat_num_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.cfgIndex=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.cfgIndex&&this.se.wi(this.cfgIndex,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_cross_gain_tianti_history_award_request=i,__reflect(i.prototype,"Sproto.cs_cross_gain_tianti_history_award_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_cross_get_combat_recode_request=o,__reflect(o.prototype,"Sproto.cs_cross_get_combat_recode_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_cross_get_self_info_request=s,__reflect(s.prototype,"Sproto.cs_cross_get_self_info_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_cross_get_tianti_history_rank_request=n,__reflect(n.prototype,"Sproto.cs_cross_get_tianti_history_rank_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_cross_get_tianti_rank_info_request=r,__reflect(r.prototype,"Sproto.cs_cross_get_tianti_rank_info_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dbid=this.de.ri();break;case 1:this.combat=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dbid&&this.se.wi(this.dbid,0),void 0!=this.combat&&this.se.wi(this.combat,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_cross_start_combat_request=a,__reflect(a.prototype,"Sproto.cs_cross_start_combat_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_cross_tianti_list_request=l,__reflect(l.prototype,"Sproto.cs_get_cross_tianti_list_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.cfgIndex=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.cfgIndex&&this.se.wi(this.cfgIndex,0),this.se.Close()},t}(e.SprotoTypeBase);e.award_history_info=t,__reflect(t.prototype,"Sproto.award_history_info");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,14,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.level=this.de.ri();break;case 1:this.power=this.de.ri();break;case 2:this.weaponId=this.de.ri();break;case 3:this.clothesId=this.de.ri();break;case 4:this.wingOpenState=this.de.ri();break;case 5:this.wingLevel=this.de.ri();break;case 6:this.zhuansheng_lv=this.de.ri();break;case 7:this.rank=this.de.ri();break;case 8:this.job=this.de.ri();break;case 9:this.sex=this.de.ri();break;case 10:this.name=this.de.rs();break;case 11:this.combatState=this.de.ri();break;case 12:this.dbid=this.de.ri();break;case 13:this.mainEle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.level&&this.se.wi(this.level,0),void 0!=this.power&&this.se.wi(this.power,1),void 0!=this.weaponId&&this.se.wi(this.weaponId,2),void 0!=this.clothesId&&this.se.wi(this.clothesId,3),void 0!=this.wingOpenState&&this.se.wi(this.wingOpenState,4),void 0!=this.wingLevel&&this.se.wi(this.wingLevel,5),void 0!=this.zhuansheng_lv&&this.se.wi(this.zhuansheng_lv,6),void 0!=this.rank&&this.se.wi(this.rank,7),void 0!=this.job&&this.se.wi(this.job,8),void 0!=this.sex&&this.se.wi(this.sex,9),void 0!=this.name&&this.se.ws(this.name,10),void 0!=this.combatState&&this.se.wi(this.combatState,11),void 0!=this.dbid&&this.se.wi(this.dbid,12),void 0!=this.mainEle&&this.se.wi(this.mainEle,13),this.se.Close()},t}(e.SprotoTypeBase);e.roles_display_info=i,__reflect(i.prototype,"Sproto.roles_display_info");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.code=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.code&&this.se.wi(this.code,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_cross_buy_combat_num_request=o,__reflect(o.prototype,"Sproto.sc_cross_buy_combat_num_request");var s=function(t){function i(e){return void 0===e&&(e=null),t.call(this,5,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.isWin=this.de.rb();break;case 1:this.rewardData=this.de.roa(e.reward_data);break;case 2:this.nowRank=this.de.ri();break;case 3:this.lastRank=this.de.ri();break;case 4:this.rankChange=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.isWin&&this.se.wb(this.isWin,0),void 0!=this.rewardData&&this.se.woa(this.rewardData,1),void 0!=this.nowRank&&this.se.wi(this.nowRank,2),void 0!=this.lastRank&&this.se.wi(this.lastRank,3),void 0!=this.rankChange&&this.se.wi(this.rankChange,4),this.se.Close()},i}(e.SprotoTypeBase);e.sc_cross_combat_result_request=s,__reflect(s.prototype,"Sproto.sc_cross_combat_result_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.code=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.code&&this.se.wi(this.code,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_cross_gain_tianti_history_award_request=n,__reflect(n.prototype,"Sproto.sc_cross_gain_tianti_history_award_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.combatRecord=this.de.roa(d);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.combatRecord&&this.se.woa(this.combatRecord,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_cross_get_combat_record_request=r,__reflect(r.prototype,"Sproto.sc_cross_get_combat_record_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,9,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.rank=this.de.ri();break;case 1:this.job=this.de.ri();break;case 2:this.sex=this.de.ri();break;case 3:this.power=this.de.ri();break;case 4:this.winNum=this.de.ri();break;case 5:this.lossNum=this.de.ri();break;case 6:this.times=this.de.ri();break;case 7:this.dailyBuyNum=this.de.ri();break;case 8:this.mainEle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.rank&&this.se.wi(this.rank,0),void 0!=this.job&&this.se.wi(this.job,1),void 0!=this.sex&&this.se.wi(this.sex,2),void 0!=this.power&&this.se.wi(this.power,3),void 0!=this.winNum&&this.se.wi(this.winNum,4),void 0!=this.lossNum&&this.se.wi(this.lossNum,5),void 0!=this.times&&this.se.wi(this.times,6),void 0!=this.dailyBuyNum&&this.se.wi(this.dailyBuyNum,7),void 0!=this.mainEle&&this.se.wi(this.mainEle,8),this.se.Close()},t}(e.SprotoTypeBase);e.sc_cross_get_self_info_request=a,__reflect(a.prototype,"Sproto.sc_cross_get_self_info_request");var l=function(e){function i(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.selfRank=this.de.ri();break;case 1:this.award_history_info=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.selfRank&&this.se.wi(this.selfRank,0),void 0!=this.award_history_info&&this.se.woa(this.award_history_info,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_cross_get_tianti_history_rank_request=l,__reflect(l.prototype,"Sproto.sc_cross_get_tianti_history_rank_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.rankInfo=this.de.roa(p);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.rankInfo&&this.se.woa(this.rankInfo,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_cross_get_tianti_rank_info_request=h,__reflect(h.prototype,"Sproto.sc_cross_get_tianti_rank_info_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.combatState=this.de.ri();break;case 1:this.targetdbid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.combatState&&this.se.wi(this.combatState,0),void 0!=this.targetdbid&&this.se.wi(this.targetdbid,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_cross_start_combat_request=c,__reflect(c.prototype,"Sproto.sc_cross_start_combat_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 4:this.roles=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roles&&this.se.woa(this.roles,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_get_cross_tianti_list_request=u,__reflect(u.prototype,"Sproto.sc_get_cross_tianti_list_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,9,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.level=this.de.ri();break;case 2:this.zhuansheng_lv=this.de.ri();break;case 3:this.selfRankChangeNum=this.de.ri();break;case 4:this.rankChange=this.de.ri();break;case 5:this.isWin=this.de.rb();break;case 6:this.isCombat=this.de.rb();break;case 7:this.revengeDbid=this.de.ri();break;case 8:this.recordTime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.zhuansheng_lv&&this.se.wi(this.zhuansheng_lv,2),void 0!=this.selfRankChangeNum&&this.se.wi(this.selfRankChangeNum,3),void 0!=this.rankChange&&this.se.wi(this.rankChange,4),void 0!=this.isWin&&this.se.wb(this.isWin,5),void 0!=this.isCombat&&this.se.wb(this.isCombat,6),void 0!=this.revengeDbid&&this.se.wi(this.revengeDbid,7),void 0!=this.recordTime&&this.se.wi(this.recordTime,8),this.se.Close()
},t}(e.SprotoTypeBase);e.tianti_combat_record=d,__reflect(d.prototype,"Sproto.tianti_combat_record");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.level=this.de.ri();break;case 2:this.zhuansheng_lv=this.de.ri();break;case 3:this.rank=this.de.ri();break;case 4:this.serverid=this.de.ri();break;case 5:this.power=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.zhuansheng_lv&&this.se.wi(this.zhuansheng_lv,2),void 0!=this.rank&&this.se.wi(this.rank,3),void 0!=this.serverid&&this.se.wi(this.serverid,4),void 0!=this.power&&this.se.wi(this.power,5),this.se.Close()},t}(e.SprotoTypeBase);e.tianti_rank_info=p,__reflect(p.prototype,"Sproto.tianti_rank_info")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.value=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.value&&this.se.wia(this.value,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_add_zs_point_request=t,__reflect(t.prototype,"Sproto.cs_add_zs_point_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_baserecord_info_request=i,__reflect(i.prototype,"Sproto.cs_baserecord_info_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_change_actor_name_request=o,__reflect(o.prototype,"Sproto.cs_change_actor_name_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_client_ready_req_request=s,__reflect(s.prototype,"Sproto.cs_client_ready_req_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.job=this.de.ri();break;case 1:this.sex=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.job&&this.se.wi(this.job,0),void 0!=this.sex&&this.se.wi(this.sex,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_create_new_sub_role_request=n,__reflect(n.prototype,"Sproto.cs_create_new_sub_role_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.mainEle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.mainEle&&this.se.wi(this.mainEle,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_element_set_req_request=r,__reflect(r.prototype,"Sproto.cs_element_set_req_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.otherid=this.de.ri();break;case 1:this.roleid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.otherid&&this.se.wi(this.otherid,0),void 0!=this.roleid&&this.se.wi(this.roleid,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_actor_module_isactive_request=a,__reflect(a.prototype,"Sproto.cs_get_actor_module_isactive_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_gongnengyugao_reward_request=l,__reflect(l.prototype,"Sproto.cs_get_gongnengyugao_reward_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;case 1:this.gongnengYugao=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.gongnengYugao&&this.se.wi(this.gongnengYugao,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_gongnengyugao_reward_response=h,__reflect(h.prototype,"Sproto.cs_get_gongnengyugao_reward_response");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.otherid=this.de.ri();break;case 1:this.roleid=this.de.ri();break;case 2:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.otherid&&this.se.wi(this.otherid,0),void 0!=this.roleid&&this.se.wi(this.roleid,1),void 0!=this.id&&this.se.wi(this.id,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_other_actor_base_info_request=c,__reflect(c.prototype,"Sproto.cs_get_other_actor_base_info_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.otherid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.otherid&&this.se.wi(this.otherid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_other_actor_info_request=u,__reflect(u.prototype,"Sproto.cs_get_other_actor_info_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_server_time_request=d,__reflect(d.prototype,"Sproto.cs_get_server_time_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.dbid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.dbid&&this.se.wi(this.dbid,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_rank_player_info_request=p,__reflect(p.prototype,"Sproto.cs_rank_player_info_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_send_heart_beat_request=f,__reflect(f.prototype,"Sproto.cs_send_heart_beat_request");var g=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.cmd=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.cmd&&this.se.ws(this.cmd,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_sene_gm_command_request=g,__reflect(g.prototype,"Sproto.cs_sene_gm_command_request");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.value&&this.se.wi(this.value,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_set_clientvalue_request=_,__reflect(_.prototype,"Sproto.cs_set_clientvalue_request");var m=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.value&&this.se.wi(this.value,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_set_is_open_payfrist_request=m,__reflect(m.prototype,"Sproto.cs_set_is_open_payfrist_request");var v=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roldid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roldid&&this.se.wi(this.roldid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_zs_point_clear_request=v,__reflect(v.prototype,"Sproto.cs_zs_point_clear_request");var y=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_zs_point_req_request=y,__reflect(y.prototype,"Sproto.cs_zs_point_req_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.actor_die_notice_request=t,__reflect(t.prototype,"Sproto.actor_die_notice_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.guildID=this.de.ri();break;case 1:this.guildName=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.guildID&&this.se.wi(this.guildID,0),void 0!=this.guildName&&this.se.ws(this.guildName,1),this.se.Close()},t}(e.SprotoTypeBase);e.actor_guild_change_request=i,__reflect(i.prototype,"Sproto.actor_guild_change_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.sumpower=this.de.ri();break;case 1:this.artifacts=this.de.roa(s);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.sumpower&&this.se.wi(this.sumpower,0),void 0!=this.artifacts&&this.se.woa(this.artifacts,1),this.se.Close()},t}(e.SprotoTypeBase);e.aritifact_info=o,__reflect(o.prototype,"Sproto.aritifact_info");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.stage=this.de.ri();break;case 2:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.stage&&this.se.wi(this.stage,1),void 0!=this.level&&this.se.wi(this.level,2),this.se.Close()},t}(e.SprotoTypeBase);e.artifact=s,__reflect(s.prototype,"Sproto.artifact");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.atrrid=this.de.ri();break;case 3:this.atrr=this.de.ri();break;case 4:this.showType=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.atrrid&&this.se.wi(this.atrrid,1),void 0!=this.atrr&&this.se.wi(this.atrr,3),void 0!=this.showType&&this.se.wi(this.showType,4),this.se.Close()},t}(e.SprotoTypeBase);e.attr_update_request=n,__reflect(n.prototype,"Sproto.attr_update_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.value&&this.se.wi(this.value,1),this.se.Close()},t}(e.SprotoTypeBase);e.attribute_datas=r,__reflect(r.prototype,"Sproto.attribute_datas");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.hp=this.de.ri();break;case 2:this.dhp=this.de.ri();break;case 3:this.showType=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.hp&&this.se.wi(this.hp,1),void 0!=this.dhp&&this.se.wi(this.dhp,2),void 0!=this.showType&&this.se.wi(this.showType,3),this.se.Close()},t}(e.SprotoTypeBase);e.blood_update_request=a,__reflect(a.prototype,"Sproto.blood_update_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.entityType=this.de.ri();break;case 1:this.handler=this.de.ri();break;case 2:this.entityModelBase=this.de.ro(d);break;case 3:this.attributeData=this.de.ria();break;case 4:this.owerid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.entityType&&this.se.wi(this.entityType,0),void 0!=this.handler&&this.se.wi(this.handler,1),void 0!=this.entityModelBase&&this.se.wo(this.entityModelBase,2),void 0!=this.attributeData&&this.se.wia(this.attributeData,3),void 0!=this.owerid&&this.se.wi(this.owerid,4),this.se.Close()},t}(e.SprotoTypeBase);e.create_monster_entity_request=l,__reflect(l.prototype,"Sproto.create_monster_entity_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.entityType=this.de.ri();break;case 1:this.handler=this.de.ri();break;case 2:this.entityModelBase=this.de.ro(d);break;case 3:this.attributeData=this.de.ria();break;case 4:this.roleID=this.de.ri();break;case 5:this.name=this.de.rs();break;case 6:this.lv=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.entityType&&this.se.wi(this.entityType,0),void 0!=this.handler&&this.se.wi(this.handler,1),void 0!=this.entityModelBase&&this.se.wo(this.entityModelBase,2),void 0!=this.attributeData&&this.se.wia(this.attributeData,3),void 0!=this.roleID&&this.se.wi(this.roleID,4),void 0!=this.name&&this.se.ws(this.name,5),void 0!=this.lv&&this.se.wi(this.lv,6),this.se.Close()},t}(e.SprotoTypeBase);e.create_pet_entity_request=h,__reflect(h.prototype,"Sproto.create_pet_entity_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,29,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.entityType=this.de.ri();break;case 1:this.roleID=this.de.ri();break;case 2:this.handler=this.de.ri();break;case 3:this.entityModelBase=this.de.ro(d);break;case 4:this.attributeData=this.de.ria();break;case 5:this.attributeExData=this.de.ria();break;case 6:this.name=this.de.rs();break;case 7:this.job=this.de.ri();break;case 8:this.sex=this.de.ri();break;case 9:this.lv=this.de.ri();break;case 10:this.bodyConfigID=this.de.ri();break;case 11:this.weaponConfigID=this.de.ri();break;case 12:this.wingLv=this.de.ri();break;case 13:this.wingOpenStatus=this.de.rb();break;case 14:this.title=this.de.ri();break;case 15:this.guildID=this.de.ri();break;case 16:this.guildName=this.de.rs();break;case 17:this.warLevel=this.de.ri();break;case 18:this.zhuangbei=this.de.ria();break;case 19:this.legendDress=this.de.ri();break;case 20:this.exring=this.de.ri();break;case 21:this.shapeid=this.de.ri();break;case 22:this.ridelv=this.de.ri();break;case 23:this.elements=this.de.ria();break;case 24:this.mainEle=this.de.ri();break;case 25:this.rideshowLv=this.de.ri();break;case 26:this.wingshowLv=this.de.ri();break;case 27:this.owerid=this.de.ri();break;case 28:this.zhuanzhiLv=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.entityType&&this.se.wi(this.entityType,0),void 0!=this.roleID&&this.se.wi(this.roleID,1),void 0!=this.handler&&this.se.wi(this.handler,2),void 0!=this.entityModelBase&&this.se.wo(this.entityModelBase,3),void 0!=this.attributeData&&this.se.wia(this.attributeData,4),void 0!=this.attributeExData&&this.se.wia(this.attributeExData,5),void 0!=this.name&&this.se.ws(this.name,6),void 0!=this.job&&this.se.wi(this.job,7),void 0!=this.sex&&this.se.wi(this.sex,8),void 0!=this.lv&&this.se.wi(this.lv,9),void 0!=this.bodyConfigID&&this.se.wi(this.bodyConfigID,10),void 0!=this.weaponConfigID&&this.se.wi(this.weaponConfigID,11),void 0!=this.wingLv&&this.se.wi(this.wingLv,12),void 0!=this.wingOpenStatus&&this.se.wb(this.wingOpenStatus,13),void 0!=this.title&&this.se.wi(this.title,14),void 0!=this.guildID&&this.se.wi(this.guildID,15),void 0!=this.guildName&&this.se.ws(this.guildName,16),void 0!=this.warLevel&&this.se.wi(this.warLevel,17),void 0!=this.zhuangbei&&this.se.wia(this.zhuangbei,18),void 0!=this.legendDress&&this.se.wi(this.legendDress,19),void 0!=this.exring&&this.se.wi(this.exring,20),void 0!=this.shapeid&&this.se.wi(this.shapeid,21),void 0!=this.ridelv&&this.se.wi(this.ridelv,22),void 0!=this.elements&&this.se.wia(this.elements,23),void 0!=this.mainEle&&this.se.wi(this.mainEle,24),void 0!=this.rideshowLv&&this.se.wi(this.rideshowLv,25),void 0!=this.wingshowLv&&this.se.wi(this.wingshowLv,26),void 0!=this.owerid&&this.se.wi(this.owerid,27),void 0!=this.zhuanzhiLv&&this.se.wi(this.zhuanzhiLv,28),this.se.Close()},t}(e.SprotoTypeBase);e.create_role_entity_request=c,__reflect(c.prototype,"Sproto.create_role_entity_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.fubenID=this.de.ri();break;case 1:this.mapID=this.de.ri();break;case 2:this.mapX=this.de.ri();break;case 3:this.mapY=this.de.ri();break;case 4:this.fbType=this.de.ri();break;case 5:this.fbName=this.de.rs();break;case 6:this.fbDesc=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.fubenID&&this.se.wi(this.fubenID,0),void 0!=this.mapID&&this.se.wi(this.mapID,1),void 0!=this.mapX&&this.se.wi(this.mapX,2),void 0!=this.mapY&&this.se.wi(this.mapY,3),void 0!=this.fbType&&this.se.wi(this.fbType,4),void 0!=this.fbName&&this.se.ws(this.fbName,5),void 0!=this.fbDesc&&this.se.ws(this.fbDesc,6),this.se.Close()},t}(e.SprotoTypeBase);e.enter_map_request=u,__reflect(u.prototype,"Sproto.enter_map_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.handle=this.de.ri();break;case 2:this.configID=this.de.ri();break;case 3:this.masterHandle=this.de.ri();break;case 4:this.x=this.de.ri();break;case 5:this.y=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.handle&&this.se.wi(this.handle,1),void 0!=this.configID&&this.se.wi(this.configID,2),void 0!=this.masterHandle&&this.se.wi(this.masterHandle,3),void 0!=this.x&&this.se.wi(this.x,4),void 0!=this.y&&this.se.wi(this.y,5),this.se.Close()},t}(e.SprotoTypeBase);e.entity_model_base=d,__reflect(d.prototype,"Sproto.entity_model_base");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.mp=this.de.ri();break;case 3:this.playEff=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.mp&&this.se.wi(this.mp,1),void 0!=this.playEff&&this.se.wb(this.playEff,3),this.se.Close()},t}(e.SprotoTypeBase);e.entity_mp_update_request=p,__reflect(p.prototype,"Sproto.entity_mp_update_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.level=this.de.ri();break;case 1:this.exp=this.de.ri();break;case 2:this.upexp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.level&&this.se.wi(this.level,0),void 0!=this.exp&&this.se.wi(this.exp,1),void 0!=this.upexp&&this.se.wi(this.upexp,2),this.se.Close()},t}(e.SprotoTypeBase);e.exp_change_request=f,__reflect(f.prototype,"Sproto.exp_change_request");var g=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.level&&this.se.wi(this.level,1),this.se.Close()},t}(e.SprotoTypeBase);e.exring=g,__reflect(g.prototype,"Sproto.exring");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.sumpower=this.de.ri();break;case 1:this.exrings=this.de.roa(g);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.sumpower&&this.se.wi(this.sumpower,0),void 0!=this.exrings&&this.se.woa(this.exrings,1),this.se.Close()},t}(e.SprotoTypeBase);e.exring_info=_,__reflect(_.prototype,"Sproto.exring_info");var m=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.first_register_request=m,__reflect(m.prototype,"Sproto.first_register_request");var v=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.sumpower=this.de.ri();break;case 1:this.level=this.de.ri();break;case 2:this.ids=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.sumpower&&this.se.wi(this.sumpower,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.ids&&this.se.wia(this.ids,2),this.se.Close()},t}(e.SprotoTypeBase);e.fuwen_info=v,__reflect(v.prototype,"Sproto.fuwen_info");var y=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.configidlist=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.configidlist&&this.se.wia(this.configidlist,0),this.se.Close()},t}(e.SprotoTypeBase);e.godequip_info=y,__reflect(y.prototype,"Sproto.godequip_info");var b=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.value&&this.se.wi(this.value,1),this.se.Close()},t}(e.SprotoTypeBase);e.gold_change_request=b,__reflect(b.prototype,"Sproto.gold_change_request");var C=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.sum=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.sum&&this.se.wi(this.sum,1),this.se.Close()},t}(e.SprotoTypeBase);e.info=C,__reflect(C.prototype,"Sproto.info");var T=function(e){function t(t){return void 0===t&&(t=null),e.call(this,8,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.sq=this.de.ri();break;case 1:this.ex=this.de.ri();break;case 2:this.fw=this.de.ri();break;case 3:this.sz=this.de.ri();break;case 4:this.xf=this.de.ri();break;case 5:this.jm=this.de.ri();break;case 6:this.tf=this.de.ri();break;case 7:this.lz=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.sq&&this.se.wi(this.sq,0),void 0!=this.ex&&this.se.wi(this.ex,1),void 0!=this.fw&&this.se.wi(this.fw,2),void 0!=this.sz&&this.se.wi(this.sz,3),void 0!=this.xf&&this.se.wi(this.xf,4),void 0!=this.jm&&this.se.wi(this.jm,5),void 0!=this.tf&&this.se.wi(this.tf,6),void 0!=this.lz&&this.se.wi(this.lz,7),this.se.Close()},t}(e.SprotoTypeBase);e.isactive_info=T,__reflect(T.prototype,"Sproto.isactive_info");var S=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.configId=this.de.ri();break;case 1:this.zslevel=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.configId&&this.se.wi(this.configId,0),void 0!=this.zslevel&&this.se.wi(this.zslevel,1),this.se.Close()},t}(e.SprotoTypeBase);e.jieling_info=S,__reflect(S.prototype,"Sproto.jieling_info");var w=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.stage=this.de.ri();break;case 1:this.level=this.de.ri();break;case 3:this.skill=this.de.roa(Q);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.stage&&this.se.wi(this.stage,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.skill&&this.se.woa(this.skill,3),this.se.Close()},t}(e.SprotoTypeBase);e.jingmai_info=w,__reflect(w.prototype,"Sproto.jingmai_info");var I=function(t){function i(e){return void 0===e&&(e=null),t.call(this,4,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 1:this.num2=this.de.ri();break;case 2:this.star=this.de.ri();break;case 3:this.item=this.de.ro(e.item_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.num2&&this.se.wi(this.num2,1),void 0!=this.star&&this.se.wi(this.star,2),void 0!=this.item&&this.se.wo(this.item,3),this.se.Close()},i}(e.SprotoTypeBase);e.lizhuang_info=I,__reflect(I.prototype,"Sproto.lizhuang_info");var G=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.endX=this.de.ri();break;case 2:this.endY=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.endX&&this.se.wi(this.endX,1),void 0!=this.endY&&this.se.wi(this.endY,2),this.se.Close()},t}(e.SprotoTypeBase);e.move_entity_request=G,__reflect(G.prototype,"Sproto.move_entity_request");var L=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.itemid=this.de.ri();break;case 2:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.itemid&&this.se.wi(this.itemid,1),void 0!=this.count&&this.se.wi(this.count,2),this.se.Close()},t}(e.SprotoTypeBase);e.record_data=L,__reflect(L.prototype,"Sproto.record_data");var P=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),this.se.Close()},t}(e.SprotoTypeBase);e.remove_entity_request=P,__reflect(P.prototype,"Sproto.remove_entity_request");var k=function(e){function t(t){return void 0===t&&(t=null),e.call(this,24,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.actorid=this.de.ri();break;case 2:this.serverid=this.de.ri();break;case 3:this.actorname=this.de.rs();break;case 4:this.level=this.de.ri();break;case 5:this.exp=this.de.ri();break;case 6:this.power=this.de.ri();break;case 7:this.gold=this.de.ri();break;case 8:this.yuanbao=this.de.ri();break;case 9:this.vip=this.de.ri();break;case 10:this.soul=this.de.ri();break;case 11:this.bagnum=this.de.ri();break;case 12:this.feats=this.de.ri();break;case 13:this.redName=this.de.ri();break;case 14:this.prestige=this.de.ri();break;case 15:this.prestige_level=this.de.ri();
break;case 16:this.gongnengYugao=this.de.ri();break;case 17:this.clientvalue=this.de.ri();break;case 18:this.shopNorefrush=this.de.rb();break;case 19:this.crossTiantiGlory=this.de.ri();break;case 20:this.zhenqi=this.de.ri();break;case 21:this.sharecoin=this.de.ri();break;case 22:this.ticket=this.de.ri();break;case 23:this.ticketTotal=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.actorid&&this.se.wi(this.actorid,1),void 0!=this.serverid&&this.se.wi(this.serverid,2),void 0!=this.actorname&&this.se.ws(this.actorname,3),void 0!=this.level&&this.se.wi(this.level,4),void 0!=this.exp&&this.se.wi(this.exp,5),void 0!=this.power&&this.se.wi(this.power,6),void 0!=this.gold&&this.se.wi(this.gold,7),void 0!=this.yuanbao&&this.se.wi(this.yuanbao,8),void 0!=this.vip&&this.se.wi(this.vip,9),void 0!=this.soul&&this.se.wi(this.soul,10),void 0!=this.bagnum&&this.se.wi(this.bagnum,11),void 0!=this.feats&&this.se.wi(this.feats,12),void 0!=this.redName&&this.se.wi(this.redName,13),void 0!=this.prestige&&this.se.wi(this.prestige,14),void 0!=this.prestige_level&&this.se.wi(this.prestige_level,15),void 0!=this.gongnengYugao&&this.se.wi(this.gongnengYugao,16),void 0!=this.clientvalue&&this.se.wi(this.clientvalue,17),void 0!=this.shopNorefrush&&this.se.wb(this.shopNorefrush,18),void 0!=this.crossTiantiGlory&&this.se.wi(this.crossTiantiGlory,19),void 0!=this.zhenqi&&this.se.wi(this.zhenqi,20),void 0!=this.sharecoin&&this.se.wi(this.sharecoin,21),void 0!=this.ticket&&this.se.wi(this.ticket,22),void 0!=this.ticketTotal&&this.se.wi(this.ticketTotal,23),this.se.Close()},t}(e.SprotoTypeBase);e.scActorBase_request=k,__reflect(k.prototype,"Sproto.scActorBase_request");var E=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.info=this.de.ro(o);break;case 1:this.attrs=this.de.roa(e.attribute_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.info&&this.se.wo(this.info,0),void 0!=this.attrs&&this.se.woa(this.attrs,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_actor_base_info_aritifact_request=E,__reflect(E.prototype,"Sproto.sc_actor_base_info_aritifact_request");var R=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.info=this.de.ro(_);break;case 1:this.ringsoul=this.de.roa(S);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.info&&this.se.wo(this.info,0),void 0!=this.ringsoul&&this.se.woa(this.ringsoul,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_actor_base_info_exring_request=R,__reflect(R.prototype,"Sproto.sc_actor_base_info_exring_request");var D=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.info=this.de.roa(v);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.info&&this.se.woa(this.info,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_actor_base_info_fuwen_request=D,__reflect(D.prototype,"Sproto.sc_actor_base_info_fuwen_request");var M=function(t){function i(e){return void 0===e&&(e=null),t.call(this,1,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.info=this.de.roa(e.item_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.info&&this.se.woa(this.info,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_actor_base_info_godequip_request=M,__reflect(M.prototype,"Sproto.sc_actor_base_info_godequip_request");var A=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.info=this.de.roa(w);break;case 1:this.sumpower=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.info&&this.se.woa(this.info,0),void 0!=this.sumpower&&this.se.wi(this.sumpower,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_actor_base_info_jingmai_request=A,__reflect(A.prototype,"Sproto.sc_actor_base_info_jingmai_request");var B=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.info=this.de.roa(I);break;case 1:this.sumpower=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.info&&this.se.woa(this.info,0),void 0!=this.sumpower&&this.se.wi(this.sumpower,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_actor_base_info_lizhuang_request=B,__reflect(B.prototype,"Sproto.sc_actor_base_info_lizhuang_request");var x=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.info=this.de.ro(X);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.info&&this.se.wo(this.info,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_actor_base_info_skillmiji_request=x,__reflect(x.prototype,"Sproto.sc_actor_base_info_skillmiji_request");var U=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.info=this.de.roa(ot);break;case 1:this.sumpower=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.info&&this.se.woa(this.info,0),void 0!=this.sumpower&&this.se.wi(this.sumpower,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_actor_base_info_talent_request=U,__reflect(U.prototype,"Sproto.sc_actor_base_info_talent_request");var O=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.power=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.power&&this.se.wi(this.power,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_actor_power_request=O,__reflect(O.prototype,"Sproto.sc_actor_power_request");var N=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.value&&this.se.wi(this.value,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_currency_change_request=N,__reflect(N.prototype,"Sproto.sc_currency_change_request");var q=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.mainEle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.mainEle&&this.se.wi(this.mainEle,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_element_set_res_request=q,__reflect(q.prototype,"Sproto.sc_element_set_res_request");var W=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.isactive=this.de.ro(T);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.isactive&&this.se.wo(this.isactive,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_get_actor_module_isactive_request=W,__reflect(W.prototype,"Sproto.sc_get_actor_module_isactive_request");var j=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.infos=this.de.roa(C);break;case 1:this.shapeid=this.de.ri();break;case 2:this.zzid=this.de.ri();break;case 3:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.infos&&this.se.woa(this.infos,0),void 0!=this.shapeid&&this.se.wi(this.shapeid,1),void 0!=this.zzid&&this.se.wi(this.zzid,2),void 0!=this.level&&this.se.wi(this.level,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_rank_player_info_request=j,__reflect(j.prototype,"Sproto.sc_rank_player_info_request");var F=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.record=this.de.ro(L);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.record&&this.se.wo(this.record,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_record_add_request=F,__reflect(F.prototype,"Sproto.sc_record_add_request");var H=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.record=this.de.roa(L);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.record&&this.se.woa(this.record,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_record_datas_request=H,__reflect(H.prototype,"Sproto.sc_record_datas_request");var V=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_rename_result_request=V,__reflect(V.prototype,"Sproto.sc_rename_result_request");var z=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.value&&this.se.wi(this.value,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_set_is_open_payfrist_request=z,__reflect(z.prototype,"Sproto.sc_set_is_open_payfrist_request");var Y=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.actorData=this.de.ro(e.actor_base_data);break;case 1:this.roleList=this.de.roa(e.role_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorData&&this.se.wo(this.actorData,0),void 0!=this.roleList&&this.se.woa(this.roleList,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_show_other_actor_request=Y,__reflect(Y.prototype,"Sproto.sc_show_other_actor_request");var Z=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.point=this.de.ri();break;case 1:this.points=this.de.ria();break;case 2:this.roldid=this.de.ri();break;case 3:this.power=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.point&&this.se.wi(this.point,0),void 0!=this.points&&this.se.wia(this.points,1),void 0!=this.roldid&&this.se.wi(this.roldid,2),void 0!=this.power&&this.se.wi(this.power,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zs_point_info_request=Z,__reflect(Z.prototype,"Sproto.sc_zs_point_info_request");var K=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.shapeid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.shapeid&&this.se.wi(this.shapeid,1),this.se.Close()},t}(e.SprotoTypeBase);e.shape_update_request=K,__reflect(K.prototype,"Sproto.shape_update_request");var J=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.show_server_tip_request=J,__reflect(J.prototype,"Sproto.show_server_tip_request");var Q=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.skillid=this.de.ri();break;case 1:this.type=this.de.ri();break;case 2:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.skillid&&this.se.wi(this.skillid,0),void 0!=this.type&&this.se.wi(this.type,1),void 0!=this.value&&this.se.wi(this.value,2),this.se.Close()},t}(e.SprotoTypeBase);e.skill_info=Q,__reflect(Q.prototype,"Sproto.skill_info");var X=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.configidlist=this.de.ria();break;case 1:this.sumpower=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.configidlist&&this.se.wia(this.configidlist,0),void 0!=this.sumpower&&this.se.wi(this.sumpower,1),this.se.Close()},t}(e.SprotoTypeBase);e.skillmiji_info=X,__reflect(X.prototype,"Sproto.skillmiji_info");var $=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.endX=this.de.ri();break;case 2:this.endY=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.endX&&this.se.wi(this.endX,1),void 0!=this.endY&&this.se.wi(this.endY,2),this.se.Close()},t}(e.SprotoTypeBase);e.stop_move_entity_request=$,__reflect($.prototype,"Sproto.stop_move_entity_request");var et=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;case 1:this.attributeData=this.de.ria();break;case 2:this.power=this.de.ri();break;case 3:this.elements=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.attributeData&&this.se.wia(this.attributeData,1),void 0!=this.power&&this.se.wi(this.power,2),void 0!=this.elements&&this.se.wia(this.elements,3),this.se.Close()},t}(e.SprotoTypeBase);e.sub_role_att_change_request=et,__reflect(et.prototype,"Sproto.sub_role_att_change_request");var tt=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 1:this.roleList=this.de.roa(e.role_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleList&&this.se.woa(this.roleList,1),this.se.Close()},i}(e.SprotoTypeBase);e.sub_roles_request=tt,__reflect(tt.prototype,"Sproto.sub_roles_request");var it=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.type=this.de.ri();break;case 2:this.x=this.de.ri();break;case 3:this.y=this.de.ri();break;case 4:this.arg1=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.type&&this.se.wi(this.type,1),void 0!=this.x&&this.se.wi(this.x,2),void 0!=this.y&&this.se.wi(this.y,3),void 0!=this.arg1&&this.se.wi(this.arg1,4),this.se.Close()},t}(e.SprotoTypeBase);e.sync_entity_pos_request=it,__reflect(it.prototype,"Sproto.sync_entity_pos_request");var ot=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.talentid=this.de.ri();break;case 1:this.talentlevel=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.talentid&&this.se.wi(this.talentid,0),void 0!=this.talentlevel&&this.se.wi(this.talentlevel,1),this.se.Close()},t}(e.SprotoTypeBase);e.talent=ot,__reflect(ot.prototype,"Sproto.talent");var st=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.talents=this.de.roa(ot);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.talents&&this.se.woa(this.talents,0),this.se.Close()},t}(e.SprotoTypeBase);e.talent_info=st,__reflect(st.prototype,"Sproto.talent_info")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dbid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dbid&&this.se.wi(this.dbid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_Challenge_actor_request=t,__reflect(t.prototype,"Sproto.cs_Challenge_actor_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_Challenge_boss_request=i,__reflect(i.prototype,"Sproto.cs_Challenge_boss_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_dragon_info_request=o,__reflect(o.prototype,"Sproto.cs_dragon_info_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_enter_dragon_request=s,__reflect(s.prototype,"Sproto.cs_enter_dragon_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_receive_sorce_reward_request=n,__reflect(n.prototype,"Sproto.cs_receive_sorce_reward_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.retype=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.retype&&this.se.wi(this.retype,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_revive_actor_request=r,__reflect(r.prototype,"Sproto.cs_revive_actor_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_sore_info_request=a,__reflect(a.prototype,"Sproto.cs_sore_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dbid=this.de.ri();break;case 1:this.name=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dbid&&this.se.wi(this.dbid,0),void 0!=this.name&&this.se.ws(this.name,1),this.se.Close()},t}(e.SprotoTypeBase);e.actor_info=t,__reflect(t.prototype,"Sproto.actor_info");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),this.se.Close()},t}(e.SprotoTypeBase);e.boss_info=i,__reflect(i.prototype,"Sproto.boss_info");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;case 1:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.state&&this.se.wi(this.state,1),this.se.Close()},t}(e.SprotoTypeBase);e.reward_info=o,__reflect(o.prototype,"Sproto.reward_info");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.time=this.de.ri();break;case 1:this.name=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.time&&this.se.wi(this.time,0),void 0!=this.name&&this.se.ws(this.name,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_actor_dead_request=s,__reflect(s.prototype,"Sproto.sc_actor_dead_request");var n=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_already_attack_actor_request=n,__reflect(n.prototype,"Sproto.sc_already_attack_actor_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.fbid=this.de.ri();break;case 1:this.topid=this.de.ri();break;case 2:this.starttime=this.de.ri();break;case 3:this.endtime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.fbid&&this.se.wi(this.fbid,0),void 0!=this.topid&&this.se.wi(this.topid,1),void 0!=this.starttime&&this.se.wi(this.starttime,2),void 0!=this.endtime&&this.se.wi(this.endtime,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_basic_info_request=r,__reflect(r.prototype,"Sproto.sc_basic_info_request");var a=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_can_attack_actor_request=a,__reflect(a.prototype,"Sproto.sc_can_attack_actor_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_can_attack_boss_request=l,__reflect(l.prototype,"Sproto.sc_can_attack_boss_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_cur_attr_target_request=h,__reflect(h.prototype,"Sproto.sc_cur_attr_target_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dbid=this.de.ri();break;case 1:this.name=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dbid&&this.se.wi(this.dbid,0),void 0!=this.name&&this.se.ws(this.name,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_enter_top_actor_request=c,__reflect(c.prototype,"Sproto.sc_enter_top_actor_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dbid=this.de.ri();break;case 1:this.name=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dbid&&this.se.wi(this.dbid,0),void 0!=this.name&&this.se.ws(this.name,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_kill_top_boss_actor_request=u,__reflect(u.prototype,"Sproto.sc_kill_top_boss_actor_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.roa(o);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_receive_sorce_reward_request=d,__reflect(d.prototype,"Sproto.sc_receive_sorce_reward_request");var p=function(t){function i(e){return void 0===e&&(e=null),t.call(this,1,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.data=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_reward_info_request=p,__reflect(p.prototype,"Sproto.sc_reward_info_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.sorce=this.de.ri();break;case 1:this.rankid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.sorce&&this.se.wi(this.sorce,0),void 0!=this.rankid&&this.se.wi(this.rankid,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_self_sorce_rank_request=f,__reflect(f.prototype,"Sproto.sc_self_sorce_rank_request");var g=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.roa(v);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_sorce_info_request=g,__reflect(g.prototype,"Sproto.sc_sorce_info_request");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.feats=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.feats&&this.se.wi(this.feats,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_update_feats_request=_,__reflect(_.prototype,"Sproto.sc_update_feats_request");var m=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.sorce=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.sorce&&this.se.wi(this.sorce,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_update_sorce_request=m,__reflect(m.prototype,"Sproto.sc_update_sorce_request");var v=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.orgname=this.de.rs();break;case 2:this.sorce=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.orgname&&this.se.ws(this.orgname,1),void 0!=this.sorce&&this.se.wi(this.sorce,2),this.se.Close()},t}(e.SprotoTypeBase);e.sorce_info=v,__reflect(v.prototype,"Sproto.sorce_info")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_dress_activate_request=t,__reflect(t.prototype,"Sproto.cs_dress_activate_request");var i=function(t){function i(e){return void 0===e&&(e=null),t.call(this,1,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.timeInfo=this.de.ro(e.dress_time_info);
break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.timeInfo&&this.se.wo(this.timeInfo,0),this.se.Close()},i}(e.SprotoTypeBase);e.cs_dress_activate_response=i,__reflect(i.prototype,"Sproto.cs_dress_activate_response");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_dress_continue_request=o,__reflect(o.prototype,"Sproto.cs_dress_continue_request");var s=function(t){function i(e){return void 0===e&&(e=null),t.call(this,1,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.timeInfo=this.de.ro(e.dress_time_info);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.timeInfo&&this.se.wo(this.timeInfo,0),this.se.Close()},i}(e.SprotoTypeBase);e.cs_dress_continue_response=s,__reflect(s.prototype,"Sproto.cs_dress_continue_response");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleIndex=this.de.ri();break;case 1:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleIndex&&this.se.wi(this.roleIndex,0),void 0!=this.id&&this.se.wi(this.id,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_dress_dress_request=n,__reflect(n.prototype,"Sproto.cs_dress_dress_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleIndex=this.de.ri();break;case 1:this.posIndex=this.de.ri();break;case 2:this.dressId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleIndex&&this.se.wi(this.roleIndex,0),void 0!=this.posIndex&&this.se.wi(this.posIndex,1),void 0!=this.dressId&&this.se.wi(this.dressId,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_dress_dress_response=r,__reflect(r.prototype,"Sproto.cs_dress_dress_response");var a=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.timeInfo=this.de.roa(e.dress_time_info);break;case 1:this.posInfo=this.de.roa(d);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.timeInfo&&this.se.woa(this.timeInfo,0),void 0!=this.posInfo&&this.se.woa(this.posInfo,1),this.se.Close()},i}(e.SprotoTypeBase);e.cs_dress_get_info_response=a,__reflect(a.prototype,"Sproto.cs_dress_get_info_response");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleIndex=this.de.ri();break;case 1:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleIndex&&this.se.wi(this.roleIndex,0),void 0!=this.id&&this.se.wi(this.id,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_dress_undress_request=l,__reflect(l.prototype,"Sproto.cs_dress_undress_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleIndex=this.de.ri();break;case 1:this.posIndex=this.de.ri();break;case 2:this.dressId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleIndex&&this.se.wi(this.roleIndex,0),void 0!=this.posIndex&&this.se.wi(this.posIndex,1),void 0!=this.dressId&&this.se.wi(this.dressId,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_dress_undress_response=h,__reflect(h.prototype,"Sproto.cs_dress_undress_response");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_dress_upgrade_request=c,__reflect(c.prototype,"Sproto.cs_dress_upgrade_request");var u=function(t){function i(e){return void 0===e&&(e=null),t.call(this,1,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.timeInfo=this.de.ro(e.dress_time_info);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.timeInfo&&this.se.wo(this.timeInfo,0),this.se.Close()},i}(e.SprotoTypeBase);e.cs_dress_upgrade_response=u,__reflect(u.prototype,"Sproto.cs_dress_upgrade_response");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.posArray=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.posArray&&this.se.wia(this.posArray,0),this.se.Close()},t}(e.SprotoTypeBase);e.dress_pos_info=d,__reflect(d.prototype,"Sproto.dress_pos_info")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dressId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dressId&&this.se.wi(this.dressId,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_dress_time_end_request=t,__reflect(t.prototype,"Sproto.sc_dress_time_end_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.activityId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.activityId&&this.se.wi(this.activityId,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_eggbroken_hitting_request=t,__reflect(t.prototype,"Sproto.cs_eggbroken_hitting_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.activityId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.activityId&&this.se.wi(this.activityId,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_eggbroken_hunt_request=i,__reflect(i.prototype,"Sproto.cs_eggbroken_hunt_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_eggbroken_record_request=o,__reflect(o.prototype,"Sproto.cs_eggbroken_record_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.eggbroken_item=t,__reflect(t.prototype,"Sproto.eggbroken_item");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.itemid=this.de.ri();break;case 2:this.count=this.de.ri();break;case 3:this.activityId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.itemid&&this.se.wi(this.itemid,1),void 0!=this.count&&this.se.wi(this.count,2),void 0!=this.activityId&&this.se.wi(this.activityId,3),this.se.Close()},t}(e.SprotoTypeBase);e.eggbroken_record=i,__reflect(i.prototype,"Sproto.eggbroken_record");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.eggbrokenRecord=this.de.ro(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.eggbrokenRecord&&this.se.wo(this.eggbrokenRecord,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_eggbroken_add_record_request=o,__reflect(o.prototype,"Sproto.sc_eggbroken_add_record_request");var s=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.items=this.de.roa(t);break;case 2:this.activityId=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.items&&this.se.woa(this.items,1),void 0!=this.activityId&&this.se.wi(this.activityId,2),this.se.Close()},i}(e.SprotoTypeBase);e.sc_eggbroken_hunt_result_request=s,__reflect(s.prototype,"Sproto.sc_eggbroken_hunt_result_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.count=this.de.ri();break;case 1:this.awards=this.de.ri();break;case 2:this.endTime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.count&&this.se.wi(this.count,0),void 0!=this.awards&&this.se.wi(this.awards,1),void 0!=this.endTime&&this.se.wi(this.endTime,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_eggbroken_info_request=n,__reflect(n.prototype,"Sproto.sc_eggbroken_info_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.eggbrokenRecord=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.eggbrokenRecord&&this.se.woa(this.eggbrokenRecord,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_eggbroken_record_datas_request=r,__reflect(r.prototype,"Sproto.sc_eggbroken_record_datas_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.itemId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.itemId&&this.se.wi(this.itemId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_encounter_clear_redpoint_request=t,__reflect(t.prototype,"Sproto.cs_encounter_clear_redpoint_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_encounter_get_boss_award_request=i,__reflect(i.prototype,"Sproto.cs_encounter_get_boss_award_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.handle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.handle&&this.se.wi(this.handle,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_encounter_open_item_request=o,__reflect(o.prototype,"Sproto.cs_encounter_open_item_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.encounterIndex=this.de.ri();break;case 1:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.encounterIndex&&this.se.wi(this.encounterIndex,0),void 0!=this.result&&this.se.wi(this.result,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_encounter_send_fight_result_request=s,__reflect(s.prototype,"Sproto.cs_encounter_send_fight_result_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wb(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_encounter_send_result_request=n,__reflect(n.prototype,"Sproto.cs_encounter_send_result_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_encounter_send_revenge_request=r,__reflect(r.prototype,"Sproto.cs_encounter_send_revenge_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,14,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;case 1:this.posIndex=this.de.ri();break;case 2:this.lv=this.de.ri();break;case 3:this.zsLv=this.de.ri();break;case 4:this.name=this.de.rs();break;case 6:this.job=this.de.ri();break;case 7:this.sex=this.de.ri();break;case 8:this.itemCount=this.de.ri();break;case 9:this.itemId=this.de.ri();break;case 10:this.state=this.de.ri();break;case 11:this.redPoint=this.de.ri();break;case 12:this.power=this.de.ri();break;case 13:this.mainEle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.posIndex&&this.se.wi(this.posIndex,1),void 0!=this.lv&&this.se.wi(this.lv,2),void 0!=this.zsLv&&this.se.wi(this.zsLv,3),void 0!=this.name&&this.se.ws(this.name,4),void 0!=this.job&&this.se.wi(this.job,6),void 0!=this.sex&&this.se.wi(this.sex,7),void 0!=this.itemCount&&this.se.wi(this.itemCount,8),void 0!=this.itemId&&this.se.wi(this.itemId,9),void 0!=this.state&&this.se.wi(this.state,10),void 0!=this.redPoint&&this.se.wi(this.redPoint,11),void 0!=this.power&&this.se.wi(this.power,12),void 0!=this.mainEle&&this.se.wi(this.mainEle,13),this.se.Close()},t}(e.SprotoTypeBase);e.encounter_data=t,__reflect(t.prototype,"Sproto.encounter_data");var i=function(t){function i(e){return void 0===e&&(e=null),t.call(this,8,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.index=this.de.ri();break;case 1:this.time=this.de.ri();break;case 2:this.isWin=this.de.rb();break;case 3:this.isRevenge=this.de.rb();break;case 4:this.itemId=this.de.ri();break;case 5:this.actorData=this.de.ro(e.actor_simple_data);break;case 12:this.power=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.time&&this.se.wi(this.time,1),void 0!=this.isWin&&this.se.wb(this.isWin,2),void 0!=this.isRevenge&&this.se.wb(this.isRevenge,3),void 0!=this.itemId&&this.se.wi(this.itemId,4),void 0!=this.actorData&&this.se.wo(this.actorData,5),void 0!=this.power&&this.se.wi(this.power,12),this.se.Close()},i}(e.SprotoTypeBase);e.encounter_data_berob=i,__reflect(i.prototype,"Sproto.encounter_data_berob");var o=function(t){function i(e){return void 0===e&&(e=null),t.call(this,7,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.index=this.de.ri();break;case 1:this.time=this.de.ri();break;case 2:this.isWin=this.de.rb();break;case 3:this.itemId=this.de.ri();break;case 4:this.actorData=this.de.ro(e.actor_simple_data);break;case 12:this.power=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.time&&this.se.wi(this.time,1),void 0!=this.isWin&&this.se.wb(this.isWin,2),void 0!=this.itemId&&this.se.wi(this.itemId,3),void 0!=this.actorData&&this.se.wo(this.actorData,4),void 0!=this.power&&this.se.wi(this.power,12),this.se.Close()},i}(e.SprotoTypeBase);e.encounter_data_rob=o,__reflect(o.prototype,"Sproto.encounter_data_rob");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.itemId=this.de.ri();break;case 2:this.timestamp=this.de.ri();break;case 3:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.itemId&&this.se.wi(this.itemId,1),void 0!=this.timestamp&&this.se.wi(this.timestamp,2),void 0!=this.state&&this.se.wi(this.state,3),this.se.Close()},t}(e.SprotoTypeBase);e.encounter_item_data=s,__reflect(s.prototype,"Sproto.encounter_item_data");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.itemId=this.de.ri();break;case 1:this.name=this.de.rs();break;case 2:this.time=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.itemId&&this.se.wi(this.itemId,0),void 0!=this.name&&this.se.ws(this.name,1),void 0!=this.time&&this.se.wi(this.time,2),this.se.Close()},t}(e.SprotoTypeBase);e.encounter_news_data=n,__reflect(n.prototype,"Sproto.encounter_news_data");var r=function(t){function i(e){return void 0===e&&(e=null),t.call(this,4,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.index=this.de.ri();break;case 1:this.result=this.de.ri();break;case 2:this.count=this.de.ria();break;case 3:this.rewardDatas=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.result&&this.se.wi(this.result,1),void 0!=this.count&&this.se.wia(this.count,2),void 0!=this.rewardDatas&&this.se.woa(this.rewardDatas,3),this.se.Close()},i}(e.SprotoTypeBase);e.sc_encounter_battle_result_request=r,__reflect(r.prototype,"Sproto.sc_encounter_battle_result_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.prestige=this.de.ri();break;case 1:this.rank=this.de.ri();break;case 2:this.count=this.de.ri();break;case 3:this.buyCount=this.de.ri();break;case 4:this.nextRecoverTime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.prestige&&this.se.wi(this.prestige,0),void 0!=this.rank&&this.se.wi(this.rank,1),void 0!=this.count&&this.se.wi(this.count,2),void 0!=this.buyCount&&this.se.wi(this.buyCount,3),void 0!=this.nextRecoverTime&&this.se.wi(this.nextRecoverTime,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_encounter_data_update_request=a,__reflect(a.prototype,"Sproto.sc_encounter_data_update_request");var l=function(e){function i(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 1:this.encounterData=this.de.ro(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.encounterData&&this.se.wo(this.encounterData,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_encounter_deal_data_request=l,__reflect(l.prototype,"Sproto.sc_encounter_deal_data_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_encounter_del_data_request=h,__reflect(h.prototype,"Sproto.sc_encounter_del_data_request");var c=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.award=this.de.roa(e.reward_data);break;case 1:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.award&&this.se.woa(this.award,0),void 0!=this.id&&this.se.wi(this.id,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_encounter_get_boss_award_request=c,__reflect(c.prototype,"Sproto.sc_encounter_get_boss_award_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.robDatas=this.de.roa(o);break;case 1:this.berobDatas=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.robDatas&&this.se.woa(this.robDatas,0),void 0!=this.berobDatas&&this.se.woa(this.berobDatas,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_encounter_inquire_record_request=u,__reflect(u.prototype,"Sproto.sc_encounter_inquire_record_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 1:this.itemDatas=this.de.roa(s);break;case 2:this.redPoint=this.de.ri();break;case 3:this.redPointTimestamp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.itemDatas&&this.se.woa(this.itemDatas,1),void 0!=this.redPoint&&this.se.wi(this.redPoint,2),void 0!=this.redPointTimestamp&&this.se.wi(this.redPointTimestamp,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_encounter_item_info_request=d,__reflect(d.prototype,"Sproto.sc_encounter_item_info_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.lastTime=this.de.ri();break;case 3:this.refreshTimes=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.lastTime&&this.se.wi(this.lastTime,0),void 0!=this.refreshTimes&&this.se.wi(this.refreshTimes,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_encounter_last_refresh_time_request=p,__reflect(p.prototype,"Sproto.sc_encounter_last_refresh_time_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.fame=this.de.ri();break;case 1:this.rank=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.fame&&this.se.wi(this.fame,0),void 0!=this.rank&&this.se.wi(this.rank,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_encounter_my_data_request=f,__reflect(f.prototype,"Sproto.sc_encounter_my_data_request");var g=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.ro(n);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.wo(this.data,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_encounter_news_request=g,__reflect(g.prototype,"Sproto.sc_encounter_news_request");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.datas=this.de.roa(n);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.datas&&this.se.woa(this.datas,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_encounter_news_list_request=_,__reflect(_.prototype,"Sproto.sc_encounter_news_list_request");var m=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 1:this.rewardDatas=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.rewardDatas&&this.se.woa(this.rewardDatas,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_encounter_open_result_request=m,__reflect(m.prototype,"Sproto.sc_encounter_open_result_request");var v=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.itemId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.itemId&&this.se.wi(this.itemId,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_encounter_player_rob_request=v,__reflect(v.prototype,"Sproto.sc_encounter_player_rob_request");var y=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.configID=this.de.ri();break;case 1:this.refreshCd=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.configID&&this.se.wi(this.configID,0),void 0!=this.refreshCd&&this.se.wi(this.refreshCd,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_encounter_update_will_boss_request=y,__reflect(y.prototype,"Sproto.sc_encounter_update_will_boss_request");var b=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.result=this.de.rb();break;case 1:this.award=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wb(this.result,0),void 0!=this.award&&this.se.woa(this.award,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_encounter_will_boss_result_request=b,__reflect(b.prototype,"Sproto.sc_encounter_will_boss_result_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_equip_autosmelt_req_request=t,__reflect(t.prototype,"Sproto.cs_equip_autosmelt_req_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;case 1:this.configID=this.de.ri();break;case 2:this.pos=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.configID&&this.se.wi(this.configID,1),void 0!=this.pos&&this.se.wi(this.pos,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_equip_mix_request=i,__reflect(i.prototype,"Sproto.cs_equip_mix_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.itemId=this.de.ri();break;case 1:this.num=this.de.ri();break;case 2:this.pos=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.itemId&&this.se.wi(this.itemId,0),void 0!=this.num&&this.se.wi(this.num,1),void 0!=this.pos&&this.se.wi(this.pos,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_equip_resolve_request=o,__reflect(o.prototype,"Sproto.cs_equip_resolve_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.itemHandle=this.de.ria();break;case 2:this.auto=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.itemHandle&&this.se.wia(this.itemHandle,1),void 0!=this.auto&&this.se.wb(this.auto,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_equip_smelt_request=s,__reflect(s.prototype,"Sproto.cs_equip_smelt_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;case 1:this.pos=this.de.ri();break;case 2:this.isgodequip=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.pos&&this.se.wi(this.pos,1),void 0!=this.isgodequip&&this.se.wb(this.isgodequip,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_equip_upgrade_request=n,__reflect(n.prototype,"Sproto.cs_equip_upgrade_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.itemHandle=this.de.ri();
break;case 1:this.roleID=this.de.ri();break;case 2:this.pos=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.itemHandle&&this.se.wi(this.itemHandle,0),void 0!=this.roleID&&this.se.wi(this.roleID,1),void 0!=this.pos&&this.se.wi(this.pos,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_equip_wear_request=r,__reflect(r.prototype,"Sproto.cs_equip_wear_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_equip_autosmelt_res_request=t,__reflect(t.prototype,"Sproto.sc_equip_autosmelt_res_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.state=this.de.ri();break;case 1:this.goldCount=this.de.ri();break;case 2:this.len=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.state&&this.se.wi(this.state,0),void 0!=this.goldCount&&this.se.wi(this.goldCount,1),void 0!=this.len&&this.se.wi(this.len,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_equip_deal_smelt_result_request=i,__reflect(i.prototype,"Sproto.sc_equip_deal_smelt_result_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.result=this.de.ri();break;case 2:this.configID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.result&&this.se.wi(this.result,1),void 0!=this.configID&&this.se.wi(this.configID,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_equip_deal_upgrade_result_request=o,__reflect(o.prototype,"Sproto.sc_equip_deal_upgrade_result_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_equip_resolve_res_request=s,__reflect(s.prototype,"Sproto.sc_equip_resolve_res_request");var n=function(t){function i(e){return void 0===e&&(e=null),t.call(this,3,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.roleID=this.de.ri();break;case 1:this.equipPos=this.de.ri();break;case 2:this.data=this.de.ro(e.item_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.equipPos&&this.se.wi(this.equipPos,1),void 0!=this.data&&this.se.wo(this.data,2),this.se.Close()},i}(e.SprotoTypeBase);e.sc_equip_update_data_request=n,__reflect(n.prototype,"Sproto.sc_equip_update_data_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.code=this.de.ri();break;case 1:this.msg=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.code&&this.se.wi(this.code,0),void 0!=this.msg&&this.se.ws(this.msg,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_error_code_request=t,__reflect(t.prototype,"Sproto.sc_error_code_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_essence_onekey_request=t,__reflect(t.prototype,"Sproto.cs_essence_onekey_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.pos=this.de.ri();break;case 2:this.isAuto=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.pos&&this.se.wi(this.pos,1),void 0!=this.isAuto&&this.se.wb(this.isAuto,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_essence_upgrade_grade_request=i,__reflect(i.prototype,"Sproto.cs_essence_upgrade_grade_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.index=this.de.ri();break;case 2:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.index&&this.se.wi(this.index,1),void 0!=this.value&&this.se.wi(this.value,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_essence_update_data_request=t,__reflect(t.prototype,"Sproto.sc_essence_update_data_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_expjade_use_request=t,__reflect(t.prototype,"Sproto.cs_expjade_use_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.allExp=this.de.ri();break;case 1:this.addExp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.allExp&&this.se.wi(this.allExp,0),void 0!=this.addExp&&this.se.wi(this.addExp,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_expjade_addexp_request=t,__reflect(t.prototype,"Sproto.sc_expjade_addexp_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.allExp=this.de.ri();break;case 1:this.useCount=this.de.ri();break;case 2:this.doubleCount=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.allExp&&this.se.wi(this.allExp,0),void 0!=this.useCount&&this.se.wi(this.useCount,1),void 0!=this.doubleCount&&this.se.wi(this.doubleCount,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_expjade_data_request=i,__reflect(i.prototype,"Sproto.sc_expjade_data_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.allExp=this.de.ri();break;case 1:this.useCount=this.de.ri();break;case 2:this.doubleCount=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.allExp&&this.se.wi(this.allExp,0),void 0!=this.useCount&&this.se.wi(this.useCount,1),void 0!=this.doubleCount&&this.se.wi(this.doubleCount,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_expjade_use_result_request=o,__reflect(o.prototype,"Sproto.sc_expjade_use_result_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_exten_id_request=t,__reflect(t.prototype,"Sproto.cs_exten_id_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.list=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.list&&this.se.wia(this.list,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_exten_info_request=t,__reflect(t.prototype,"Sproto.sc_exten_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.title=this.de.rs();break;case 2:this.content=this.de.rs();break;case 3:this.contact=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.title&&this.se.ws(this.title,1),void 0!=this.content&&this.se.ws(this.content,2),void 0!=this.contact&&this.se.ws(this.contact,3),this.se.Close()},t}(e.SprotoTypeBase);e.cs_faq_req_request=t,__reflect(t.prototype,"Sproto.cs_faq_req_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ret=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ret&&this.se.wi(this.ret,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_faq_req_response=i,__reflect(i.prototype,"Sproto.cs_faq_req_response")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ret=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ret&&this.se.wi(this.ret,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_faq_res_request=t,__reflect(t.prototype,"Sproto.sc_faq_res_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.moneyType=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.moneyType&&this.se.wi(this.moneyType,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_find_assets_get_request=t,__reflect(t.prototype,"Sproto.cs_find_assets_get_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(t){function i(e){return void 0===e&&(e=null),t.call(this,4,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.type=this.de.ri();break;case 1:this.size=this.de.ri();break;case 2:this.datas=this.de.roa(e.reward_data);break;case 3:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.size&&this.se.wi(this.size,1),void 0!=this.datas&&this.se.woa(this.datas,2),void 0!=this.state&&this.se.wi(this.state,3),this.se.Close()},i}(e.SprotoTypeBase);e.find_assets_data=t,__reflect(t.prototype,"Sproto.find_assets_data");var i=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.datas=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.datas&&this.se.woa(this.datas,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_find_assets_init_info_request=i,__reflect(i.prototype,"Sproto.sc_find_assets_init_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.num&&this.se.wi(this.num,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_forge_back_upgrade_goods_request=t,__reflect(t.prototype,"Sproto.cs_forge_back_upgrade_goods_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.pos=this.de.ri();break;case 2:this.isAuto=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.pos&&this.se.wi(this.pos,1),void 0!=this.isAuto&&this.se.wb(this.isAuto,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_forge_bless_boost_req_request=i,__reflect(i.prototype,"Sproto.cs_forge_bless_boost_req_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handles=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handles&&this.se.wia(this.handles,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_forge_bless_ronglu_success_request=o,__reflect(o.prototype,"Sproto.cs_forge_bless_ronglu_success_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handler=this.de.ri();break;case 1:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handler&&this.se.wi(this.handler,0),void 0!=this.num&&this.se.wi(this.num,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_forge_bless_smelt_req_request=s,__reflect(s.prototype,"Sproto.cs_forge_bless_smelt_req_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.pos=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.pos&&this.se.wi(this.pos,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_forge_bless_upgrade_req_request=n,__reflect(n.prototype,"Sproto.cs_forge_bless_upgrade_req_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_forge_onekey_request=r,__reflect(r.prototype,"Sproto.cs_forge_onekey_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.pos=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.pos&&this.se.wi(this.pos,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_forge_upgrade_bless_request=a,__reflect(a.prototype,"Sproto.cs_forge_upgrade_bless_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.pos=this.de.ri();break;case 2:this.canUseYuanbao=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.pos&&this.se.wi(this.pos,1),void 0!=this.canUseYuanbao&&this.se.wb(this.canUseYuanbao,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_forge_upgrade_grade_request=l,__reflect(l.prototype,"Sproto.cs_forge_upgrade_grade_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_forge_back_goods_success_request=t,__reflect(t.prototype,"Sproto.sc_forge_back_goods_success_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.index=this.de.ri();break;case 2:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.index&&this.se.wi(this.index,1),void 0!=this.value&&this.se.wi(this.value,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_forge_belss_update_request=i,__reflect(i.prototype,"Sproto.sc_forge_belss_update_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.pos=this.de.ri();break;case 2:this.blessexp=this.de.ri();break;case 3:this.blessstar=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.pos&&this.se.wi(this.pos,1),void 0!=this.blessexp&&this.se.wi(this.blessexp,2),void 0!=this.blessstar&&this.se.wi(this.blessstar,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_forge_bless_boost_res_request=o,__reflect(o.prototype,"Sproto.sc_forge_bless_boost_res_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.level=this.de.ri();break;case 1:this.exp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.level&&this.se.wi(this.level,0),void 0!=this.exp&&this.se.wi(this.exp,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_forge_bless_ronglu_success_request=s,__reflect(s.prototype,"Sproto.sc_forge_bless_ronglu_success_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handler=this.de.ri();break;case 1:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handler&&this.se.wi(this.handler,0),void 0!=this.num&&this.se.wi(this.num,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_forge_bless_smelt_res_request=n,__reflect(n.prototype,"Sproto.sc_forge_bless_smelt_res_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.pos=this.de.ri();break;case 2:this.blesslv=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.pos&&this.se.wi(this.pos,1),void 0!=this.blesslv&&this.se.wi(this.blesslv,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_forge_bless_upgrade_res_request=r,__reflect(r.prototype,"Sproto.sc_forge_bless_upgrade_res_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.index=this.de.ri();break;case 2:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.index&&this.se.wi(this.index,1),void 0!=this.value&&this.se.wi(this.value,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_forge_update_data_request=a,__reflect(a.prototype,"Sproto.sc_forge_update_data_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.itemHandle=this.de.ri();break;case 1:this.roleID=this.de.ri();break;case 2:this.pos=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.itemHandle&&this.se.wi(this.itemHandle,0),void 0!=this.roleID&&this.se.wi(this.roleID,1),void 0!=this.pos&&this.se.wi(this.pos,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_fuwen_equipup_request=t,__reflect(t.prototype,"Sproto.cs_fuwen_equipup_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_fuwen_open_request=i,__reflect(i.prototype,"Sproto.cs_fuwen_open_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(t){function i(e){return void 0===e&&(e=null),t.call(this,4,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.roleID=this.de.ri();break;case 1:this.equipPos=this.de.ri();break;case 2:this.data=this.de.ro(e.item_data);break;case 3:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.equipPos&&this.se.wi(this.equipPos,1),void 0!=this.data&&this.se.wo(this.data,2),void 0!=this.level&&this.se.wi(this.level,3),this.se.Close()},i}(e.SprotoTypeBase);e.sc_fuwen_equipup_data_request=t,__reflect(t.prototype,"Sproto.sc_fuwen_equipup_data_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;case 1:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.result&&this.se.wi(this.result,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_fuwen_open_ret_request=i,__reflect(i.prototype,"Sproto.sc_fuwen_open_ret_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,8,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actorname=this.de.rs();break;case 1:this.sex=this.de.ri();break;case 2:this.job=this.de.ri();break;case 3:this.icon=this.de.ri();break;case 4:this.pf=this.de.rs();break;case 5:this.imgurl=this.de.rs();break;case 6:this.inviteid=this.de.ri();break;case 7:this.imgtag=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorname&&this.se.ws(this.actorname,0),void 0!=this.sex&&this.se.wi(this.sex,1),void 0!=this.job&&this.se.wi(this.job,2),void 0!=this.icon&&this.se.wi(this.icon,3),void 0!=this.pf&&this.se.ws(this.pf,4),void 0!=this.imgurl&&this.se.ws(this.imgurl,5),void 0!=this.inviteid&&this.se.wi(this.inviteid,6),void 0!=this.imgtag&&this.se.ws(this.imgtag,7),this.se.Close()},t}(e.SprotoTypeBase);e.CreateActor_request=t,__reflect(t.prototype,"Sproto.CreateActor_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;case 1:this.actorid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),void 0!=this.actorid&&this.se.wi(this.actorid,1),this.se.Close()},t}(e.SprotoTypeBase);e.CreateActor_response=i,__reflect(i.prototype,"Sproto.CreateActor_response");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actorid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorid&&this.se.wi(this.actorid,0),this.se.Close()},t}(e.SprotoTypeBase);e.EnterGame_request=o,__reflect(o.prototype,"Sproto.EnterGame_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.EnterGame_response=s,__reflect(s.prototype,"Sproto.EnterGame_response");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.QueryList_request=n,__reflect(n.prototype,"Sproto.QueryList_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.code=this.de.rb();break;case 1:this.actorid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.code&&this.se.wb(this.code,0),void 0!=this.actorid&&this.se.wi(this.actorid,1),this.se.Close()},t}(e.SprotoTypeBase);e.QueryList_response=r,__reflect(r.prototype,"Sproto.QueryList_response");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.sex=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.sex&&this.se.wi(this.sex,0),this.se.Close()},t}(e.SprotoTypeBase);e.RandName_request=a,__reflect(a.prototype,"Sproto.RandName_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;case 1:this.actorname=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),void 0!=this.actorname&&this.se.ws(this.actorname,1),this.se.Close()},t}(e.SprotoTypeBase);e.RandName_response=l,__reflect(l.prototype,"Sproto.RandName_response");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.imgurl=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.imgurl&&this.se.ws(this.imgurl,0),this.se.Close()},t}(e.SprotoTypeBase);e.UpdateHead_request=h,__reflect(h.prototype,"Sproto.UpdateHead_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.accountname=this.de.rs();break;case 1:this.password=this.de.rs();break;case 2:this.platformuid=this.de.rs();break;case 3:this.token=this.de.rs();break;case 4:this.serverid=this.de.ri();break;case 5:this.deviceInfo=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.accountname&&this.se.ws(this.accountname,0),void 0!=this.password&&this.se.ws(this.password,1),void 0!=this.platformuid&&this.se.ws(this.platformuid,2),void 0!=this.token&&this.se.ws(this.token,3),void 0!=this.serverid&&this.se.wi(this.serverid,4),void 0!=this.deviceInfo&&this.se.ws(this.deviceInfo,5),this.se.Close()},t}(e.SprotoTypeBase);e.checkAccount_request=c,__reflect(c.prototype,"Sproto.checkAccount_request")}(Sproto||(Sproto={}));var Gamec2sProtocol=function(e){function t(){var i=e.call(this)||this;return i.Protocol.SetProtocol(t.CreateActor),i.Protocol.SetRequest(t.CreateActor,Sproto.CreateActor_request),i.Protocol.SetResponse(t.CreateActor,Sproto.CreateActor_response),i.Protocol.SetProtocol(t.EnterGame),i.Protocol.SetRequest(t.EnterGame,Sproto.EnterGame_request),i.Protocol.SetResponse(t.EnterGame,Sproto.EnterGame_response),i.Protocol.SetProtocol(t.QueryList),i.Protocol.SetRequest(t.QueryList,Sproto.QueryList_request),i.Protocol.SetResponse(t.QueryList,Sproto.QueryList_response),i.Protocol.SetProtocol(t.RandName),i.Protocol.SetRequest(t.RandName,Sproto.RandName_request),i.Protocol.SetResponse(t.RandName,Sproto.RandName_response),i.Protocol.SetProtocol(t.checkAccount),i.Protocol.SetRequest(t.checkAccount,Sproto.checkAccount_request),i.Protocol.SetProtocol(t.cs_change_actor_name),i.Protocol.SetRequest(t.cs_change_actor_name,Sproto.cs_change_actor_name_request),i.Protocol.SetProtocol(t.cs_create_new_sub_role),i.Protocol.SetRequest(t.cs_create_new_sub_role,Sproto.cs_create_new_sub_role_request),i.Protocol.SetProtocol(t.cs_get_server_time),i.Protocol.SetRequest(t.cs_get_server_time,Sproto.cs_get_server_time_request),i.Protocol.SetProtocol(t.cs_send_heart_beat),i.Protocol.SetRequest(t.cs_send_heart_beat,Sproto.cs_send_heart_beat_request),i.Protocol.SetProtocol(t.cs_sene_gm_command),i.Protocol.SetRequest(t.cs_sene_gm_command,Sproto.cs_sene_gm_command_request),i
}return __extends(t,e),t.CreateActor=4,t.EnterGame=3,t.QueryList=2,t.RandName=5,t.checkAccount=1,t.cs_change_actor_name=122,t.cs_create_new_sub_role=102,t.cs_get_server_time=114,t.cs_send_heart_beat=199,t.cs_sene_gm_command=100,t}(Sproto.ProtocolBase);__reflect(Gamec2sProtocol.prototype,"Gamec2sProtocol"),window.Gamec2sProtocol=Gamec2sProtocol;var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;case 1:this.ipRegion=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),void 0!=this.ipRegion&&this.se.ws(this.ipRegion,1),this.se.Close()},t}(e.SprotoTypeBase);e.checkAccountRet_request=t,__reflect(t.prototype,"Sproto.checkAccountRet_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleNum=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleNum&&this.se.wi(this.roleNum,0),this.se.Close()},t}(e.SprotoTypeBase);e.scRoleBase_request=i,__reflect(i.prototype,"Sproto.scRoleBase_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.time=this.de.ri();break;case 1:this.serverMergeTime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.time&&this.se.wi(this.time,0),void 0!=this.serverMergeTime&&this.se.wi(this.serverMergeTime,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_base_game_time_request=o,__reflect(o.prototype,"Sproto.sc_base_game_time_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 1:this.day=this.de.ri();break;case 2:this.loginDay=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.day&&this.se.wi(this.day,1),void 0!=this.loginDay&&this.se.wi(this.loginDay,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_base_open_day_request=s,__reflect(s.prototype,"Sproto.sc_base_open_day_request")}(Sproto||(Sproto={}));var Games2cProtocol=function(e){function t(){var i=e.call(this)||this;return i.Protocol.SetProtocol(t.actor_die_notice),i.Protocol.SetRequest(t.actor_die_notice,Sproto.actor_die_notice_request),i.Protocol.SetProtocol(t.actor_guild_change),i.Protocol.SetRequest(t.actor_guild_change,Sproto.actor_guild_change_request),i.Protocol.SetProtocol(t.blood_update),i.Protocol.SetRequest(t.blood_update,Sproto.blood_update_request),i.Protocol.SetProtocol(t.checkAccountRet),i.Protocol.SetRequest(t.checkAccountRet,Sproto.checkAccountRet_request),i.Protocol.SetProtocol(t.create_monster_entity),i.Protocol.SetRequest(t.create_monster_entity,Sproto.create_monster_entity_request),i.Protocol.SetProtocol(t.create_role_entity),i.Protocol.SetRequest(t.create_role_entity,Sproto.create_role_entity_request),i.Protocol.SetProtocol(t.enter_map),i.Protocol.SetRequest(t.enter_map,Sproto.enter_map_request),i.Protocol.SetProtocol(t.entity_mp_update),i.Protocol.SetRequest(t.entity_mp_update,Sproto.entity_mp_update_request),i.Protocol.SetProtocol(t.exp_change),i.Protocol.SetRequest(t.exp_change,Sproto.exp_change_request),i.Protocol.SetProtocol(t.first_register),i.Protocol.SetRequest(t.first_register,Sproto.first_register_request),i.Protocol.SetProtocol(t.gold_change),i.Protocol.SetRequest(t.gold_change,Sproto.gold_change_request),i.Protocol.SetProtocol(t.move_entity),i.Protocol.SetRequest(t.move_entity,Sproto.move_entity_request),i.Protocol.SetProtocol(t.remove_entity),i.Protocol.SetRequest(t.remove_entity,Sproto.remove_entity_request),i.Protocol.SetProtocol(t.scActorBase),i.Protocol.SetRequest(t.scActorBase,Sproto.scActorBase_request),i.Protocol.SetProtocol(t.scRoleBase),i.Protocol.SetRequest(t.scRoleBase,Sproto.scRoleBase_request),i.Protocol.SetProtocol(t.show_server_tip),i.Protocol.SetRequest(t.show_server_tip,Sproto.show_server_tip_request),i.Protocol.SetProtocol(t.stop_move_entity),i.Protocol.SetRequest(t.stop_move_entity,Sproto.stop_move_entity_request),i.Protocol.SetProtocol(t.sub_role_att_change),i.Protocol.SetRequest(t.sub_role_att_change,Sproto.sub_role_att_change_request),i.Protocol.SetProtocol(t.sub_roles),i.Protocol.SetRequest(t.sub_roles,Sproto.sub_roles_request),i.Protocol.SetProtocol(t.sync_entity_pos),i.Protocol.SetRequest(t.sync_entity_pos,Sproto.sync_entity_pos_request),i}return __extends(t,e),t.actor_die_notice=120,t.actor_guild_change=121,t.blood_update=109,t.checkAccountRet=1,t.create_monster_entity=104,t.create_role_entity=105,t.enter_map=103,t.entity_mp_update=114,t.exp_change=107,t.first_register=118,t.gold_change=106,t.move_entity=111,t.remove_entity=110,t.scActorBase=101,t.scRoleBase=3,t.show_server_tip=117,t.stop_move_entity=112,t.sub_role_att_change=108,t.sub_roles=102,t.sync_entity_pos=113,t}(Sproto.ProtocolBase);__reflect(Games2cProtocol.prototype,"Games2cProtocol"),window.Games2cProtocol=Games2cProtocol;var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,9,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actorid=this.de.ri();break;case 1:this.name=this.de.rs();break;case 2:this.level=this.de.ri();break;case 3:this.zhuan=this.de.ri();break;case 4:this.vip=this.de.ri();break;case 5:this.power=this.de.ri();break;case 6:this.guildName=this.de.rs();break;case 7:this.titles=this.de.roa(m);break;case 8:this.dressTimeInfo=this.de.roa(s);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorid&&this.se.wi(this.actorid,0),void 0!=this.name&&this.se.ws(this.name,1),void 0!=this.level&&this.se.wi(this.level,2),void 0!=this.zhuan&&this.se.wi(this.zhuan,3),void 0!=this.vip&&this.se.wi(this.vip,4),void 0!=this.power&&this.se.wi(this.power,5),void 0!=this.guildName&&this.se.ws(this.guildName,6),void 0!=this.titles&&this.se.woa(this.titles,7),void 0!=this.dressTimeInfo&&this.se.woa(this.dressTimeInfo,8),this.se.Close()},t}(e.SprotoTypeBase);e.actor_base_data=t,__reflect(t.prototype,"Sproto.actor_base_data");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.job=this.de.ri();break;case 2:this.sex=this.de.ri();break;case 3:this.zsLv=this.de.ri();break;case 4:this.lv=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.job&&this.se.wi(this.job,1),void 0!=this.sex&&this.se.wi(this.sex,2),void 0!=this.zsLv&&this.se.wi(this.zsLv,3),void 0!=this.lv&&this.se.wi(this.lv,4),this.se.Close()},t}(e.SprotoTypeBase);e.actor_simple_data=i,__reflect(i.prototype,"Sproto.actor_simple_data");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.value&&this.se.wi(this.value,1),this.se.Close()},t}(e.SprotoTypeBase);e.attribute_data=o,__reflect(o.prototype,"Sproto.attribute_data");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dressId=this.de.ri();break;case 2:this.invalidtime=this.de.ri();break;case 3:this.dressLevel=this.de.ri();break;case 4:this.dressExp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dressId&&this.se.wi(this.dressId,0),void 0!=this.invalidtime&&this.se.wi(this.invalidtime,2),void 0!=this.dressLevel&&this.se.wi(this.dressLevel,3),void 0!=this.dressExp&&this.se.wi(this.dressExp,4),this.se.Close()},t}(e.SprotoTypeBase);e.dress_time_info=s,__reflect(s.prototype,"Sproto.dress_time_info");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,12,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.strengthen=this.de.ri();break;case 1:this.star=this.de.ri();break;case 2:this.gem=this.de.ri();break;case 3:this.item=this.de.ro(a);break;case 4:this.zhuling=this.de.ri();break;case 5:this.tupo=this.de.ri();break;case 6:this.bless=this.de.ri();break;case 7:this.num2=this.de.ri();break;case 8:this.goditem=this.de.ro(a);break;case 9:this.blessexp=this.de.ri();break;case 10:this.blessstar=this.de.ri();break;case 11:this.blesslv=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.strengthen&&this.se.wi(this.strengthen,0),void 0!=this.star&&this.se.wi(this.star,1),void 0!=this.gem&&this.se.wi(this.gem,2),void 0!=this.item&&this.se.wo(this.item,3),void 0!=this.zhuling&&this.se.wi(this.zhuling,4),void 0!=this.tupo&&this.se.wi(this.tupo,5),void 0!=this.bless&&this.se.wi(this.bless,6),void 0!=this.num2&&this.se.wi(this.num2,7),void 0!=this.goditem&&this.se.wo(this.goditem,8),void 0!=this.blessexp&&this.se.wi(this.blessexp,9),void 0!=this.blessstar&&this.se.wi(this.blessstar,10),void 0!=this.blesslv&&this.se.wi(this.blesslv,11),this.se.Close()},t}(e.SprotoTypeBase);e.equip_data=n,__reflect(n.prototype,"Sproto.equip_data");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.openStatus=this.de.rb();break;case 1:this.level=this.de.ri();break;case 2:this.equipDatas=this.de.roa(a);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.openStatus&&this.se.wb(this.openStatus,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.equipDatas&&this.se.woa(this.equipDatas,2),this.se.Close()},t}(e.SprotoTypeBase);e.fuwen_data=r,__reflect(r.prototype,"Sproto.fuwen_data");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.configID=this.de.ri();break;case 2:this.count=this.de.ri();break;case 3:this.att=this.de.roa(o);break;case 4:this.invalidtime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.configID&&this.se.wi(this.configID,1),void 0!=this.count&&this.se.wi(this.count,2),void 0!=this.att&&this.se.woa(this.att,3),void 0!=this.invalidtime&&this.se.wi(this.invalidtime,4),this.se.Close()},t}(e.SprotoTypeBase);e.item_data=a,__reflect(a.prototype,"Sproto.item_data");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.level=this.de.ri();break;case 1:this.stage=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.level&&this.se.wi(this.level,0),void 0!=this.stage&&this.se.wi(this.stage,1),this.se.Close()},t}(e.SprotoTypeBase);e.jingmai_data=l,__reflect(l.prototype,"Sproto.jingmai_data");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.isActivate=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.isActivate&&this.se.wi(this.isActivate,0),this.se.Close()},t}(e.SprotoTypeBase);e.legend_data=h,__reflect(h.prototype,"Sproto.legend_data");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.stage=this.de.ri();break;case 1:this.level=this.de.ri();break;case 2:this.exp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.stage&&this.se.wi(this.stage,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.exp&&this.se.wi(this.exp,2),this.se.Close()},t}(e.SprotoTypeBase);e.long_hun_data=c,__reflect(c.prototype,"Sproto.long_hun_data");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.lv=this.de.ri();break;case 2:this.star=this.de.ri();break;case 3:this.exp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.lv&&this.se.wi(this.lv,1),void 0!=this.star&&this.se.wi(this.star,2),void 0!=this.exp&&this.se.wi(this.exp,3),this.se.Close()},t}(e.SprotoTypeBase);e.longzhuang_data=u,__reflect(u.prototype,"Sproto.longzhuang_data");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.x=this.de.ri();break;case 1:this.y=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.x&&this.se.wi(this.x,0),void 0!=this.y&&this.se.wi(this.y,1),this.se.Close()},t}(e.SprotoTypeBase);e.position=d,__reflect(d.prototype,"Sproto.position");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,14,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.job=this.de.ri();break;case 1:this.sex=this.de.ri();break;case 2:this.clothID=this.de.ri();break;case 3:this.swordID=this.de.ri();break;case 4:this.wingOpenStatus=this.de.rb();break;case 5:this.wingLevel=this.de.ri();break;case 6:this.zhuangbei=this.de.ria();break;case 7:this.legendDress=this.de.ri();break;case 8:this.exring=this.de.ri();break;case 9:this.ride=this.de.ri();break;case 10:this.mainEle=this.de.ri();break;case 11:this.rideshow=this.de.ri();break;case 12:this.wingshow=this.de.ri();break;case 13:this.zhuanzhiLv=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.job&&this.se.wi(this.job,0),void 0!=this.sex&&this.se.wi(this.sex,1),void 0!=this.clothID&&this.se.wi(this.clothID,2),void 0!=this.swordID&&this.se.wi(this.swordID,3),void 0!=this.wingOpenStatus&&this.se.wb(this.wingOpenStatus,4),void 0!=this.wingLevel&&this.se.wi(this.wingLevel,5),void 0!=this.zhuangbei&&this.se.wia(this.zhuangbei,6),void 0!=this.legendDress&&this.se.wi(this.legendDress,7),void 0!=this.exring&&this.se.wi(this.exring,8),void 0!=this.ride&&this.se.wi(this.ride,9),void 0!=this.mainEle&&this.se.wi(this.mainEle,10),void 0!=this.rideshow&&this.se.wi(this.rideshow,11),void 0!=this.wingshow&&this.se.wi(this.wingshow,12),void 0!=this.zhuanzhiLv&&this.se.wi(this.zhuanzhiLv,13),this.se.Close()},t}(e.SprotoTypeBase);e.rank_subrole=p,__reflect(p.prototype,"Sproto.rank_subrole");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.count&&this.se.wi(this.count,2),this.se.Close()},t}(e.SprotoTypeBase);e.reward_data=f,__reflect(f.prototype,"Sproto.reward_data");var g=function(e){function t(t){return void 0===t&&(t=null),e.call(this,28,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.title=this.de.ri();break;case 1:this.index=this.de.ri();break;case 2:this.job=this.de.ri();break;case 3:this.sex=this.de.ri();break;case 4:this.power=this.de.ri();break;case 5:this.skillDatas=this.de.ria();break;case 6:this.fightSkill=this.de.ria();break;case 8:this.equipsData=this.de.roa(n);break;case 10:this.wingsData=this.de.ro(v);break;case 11:this.jingmai_Data=this.de.ro(l);break;case 16:this.attributeData=this.de.ria();break;case 17:this.attributeExData=this.de.ria();break;case 18:this.zhuZaiData=this.de.roa(y);break;case 19:this.longzhuang=this.de.roa(u);break;case 20:this.zhuangbei=this.de.ria();break;case 21:this.fuwen=this.de.ro(r);break;case 22:this.legendDress=this.de.ri();break;case 23:this.exring=this.de.ri();break;case 24:this.zzjingmai_Data=this.de.ro(l);break;case 25:this.power2=this.de.ri();break;case 26:this.ride=this.de.ri();break;case 27:this.elements=this.de.ria();break;case 28:this.mainEle=this.de.ri();break;case 29:this.rideshow=this.de.ri();break;case 30:this.zhuanzhiLv=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.title&&this.se.wi(this.title,0),void 0!=this.index&&this.se.wi(this.index,1),void 0!=this.job&&this.se.wi(this.job,2),void 0!=this.sex&&this.se.wi(this.sex,3),void 0!=this.power&&this.se.wi(this.power,4),void 0!=this.skillDatas&&this.se.wia(this.skillDatas,5),void 0!=this.fightSkill&&this.se.wia(this.fightSkill,6),void 0!=this.equipsData&&this.se.woa(this.equipsData,8),void 0!=this.wingsData&&this.se.wo(this.wingsData,10),void 0!=this.jingmai_Data&&this.se.wo(this.jingmai_Data,11),void 0!=this.attributeData&&this.se.wia(this.attributeData,16),void 0!=this.attributeExData&&this.se.wia(this.attributeExData,17),void 0!=this.zhuZaiData&&this.se.woa(this.zhuZaiData,18),void 0!=this.longzhuang&&this.se.woa(this.longzhuang,19),void 0!=this.zhuangbei&&this.se.wia(this.zhuangbei,20),void 0!=this.fuwen&&this.se.wo(this.fuwen,21),void 0!=this.legendDress&&this.se.wi(this.legendDress,22),void 0!=this.exring&&this.se.wi(this.exring,23),void 0!=this.zzjingmai_Data&&this.se.wo(this.zzjingmai_Data,24),void 0!=this.power2&&this.se.wi(this.power2,25),void 0!=this.ride&&this.se.wi(this.ride,26),void 0!=this.elements&&this.se.wia(this.elements,27),void 0!=this.mainEle&&this.se.wi(this.mainEle,28),void 0!=this.rideshow&&this.se.wi(this.rideshow,29),void 0!=this.zhuanzhiLv&&this.se.wi(this.zhuanzhiLv,30),this.se.Close()},t}(e.SprotoTypeBase);e.role_data=g,__reflect(g.prototype,"Sproto.role_data");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.rune_data=_,__reflect(_.prototype,"Sproto.rune_data");var m=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.titleid=this.de.ri();break;case 1:this.titleEndTime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.titleid&&this.se.wi(this.titleid,0),void 0!=this.titleEndTime&&this.se.wi(this.titleEndTime,1),this.se.Close()},t}(e.SprotoTypeBase);e.title_data=m,__reflect(m.prototype,"Sproto.title_data");var v=function(e){function t(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.lv=this.de.ri();break;case 1:this.star=this.de.ri();break;case 2:this.exp=this.de.ri();break;case 3:this.openStatus=this.de.rb();break;case 4:this.equipDatas=this.de.roa(a);break;case 5:this.showlv=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.lv&&this.se.wi(this.lv,0),void 0!=this.star&&this.se.wi(this.star,1),void 0!=this.exp&&this.se.wi(this.exp,2),void 0!=this.openStatus&&this.se.wb(this.openStatus,3),void 0!=this.equipDatas&&this.se.woa(this.equipDatas,4),void 0!=this.showlv&&this.se.wi(this.showlv,5),this.se.Close()},t}(e.SprotoTypeBase);e.wings_data=v,__reflect(v.prototype,"Sproto.wings_data");var y=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.level&&this.se.wi(this.level,1),this.se.Close()},t}(e.SprotoTypeBase);e.zhuzai_data=y,__reflect(y.prototype,"Sproto.zhuzai_data")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_gem_onekey_request=t,__reflect(t.prototype,"Sproto.cs_gem_onekey_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.pos=this.de.ri();break;case 2:this.canUseYuanbao=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.pos&&this.se.wi(this.pos,1),void 0!=this.canUseYuanbao&&this.se.wb(this.canUseYuanbao,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_gem_upgrade_grade_request=i,__reflect(i.prototype,"Sproto.cs_gem_upgrade_grade_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.index=this.de.ri();break;case 2:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.index&&this.se.wi(this.index,1),void 0!=this.value&&this.se.wi(this.value,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gem_update_data_request=t,__reflect(t.prototype,"Sproto.sc_gem_update_data_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_gold_guaji_combat_boss_request=t,__reflect(t.prototype,"Sproto.cs_gold_guaji_combat_boss_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_gold_guaji_info_request=i,__reflect(i.prototype,"Sproto.cs_gold_guaji_info_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_gold_guaji_obtain_items_info_request=o,__reflect(o.prototype,"Sproto.cs_gold_guaji_obtain_items_info_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_gold_guaji_start_combat_request=s,__reflect(s.prototype,"Sproto.cs_gold_guaji_start_combat_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_gold_guaji_start_relive_request=n,__reflect(n.prototype,"Sproto.cs_gold_guaji_start_relive_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.count=this.de.ri();break;case 2:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.count&&this.se.wi(this.count,1),void 0!=this.type&&this.se.wi(this.type,2),this.se.Close()},t}(e.SprotoTypeBase);e.obtain_items=t,__reflect(t.prototype,"Sproto.obtain_items");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gold_guaji_all_die_request=i,__reflect(i.prototype,"Sproto.sc_gold_guaji_all_die_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.code=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.code&&this.se.wi(this.code,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gold_guaji_combat_boss_request=o,__reflect(o.prototype,"Sproto.sc_gold_guaji_combat_boss_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.joinTime=this.de.ri();break;case 1:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.joinTime&&this.se.wi(this.joinTime,0),void 0!=this.id&&this.se.wi(this.id,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gold_guaji_info_request=s,__reflect(s.prototype,"Sproto.sc_gold_guaji_info_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.killNum=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.bossNum=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.killNum&&this.se.wi(this.killNum,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.bossNum&&this.se.wi(this.bossNum,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gold_guaji_mon_skill_num_request=n,__reflect(n.prototype,"Sproto.sc_gold_guaji_mon_skill_num_request");var r=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.items=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.items&&this.se.woa(this.items,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_gold_guaji_obtain_items_info_request=r,__reflect(r.prototype,"Sproto.sc_gold_guaji_obtain_items_info_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gold_guaji_over_request=a,__reflect(a.prototype,"Sproto.sc_gold_guaji_over_request");var l=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.items=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.items&&this.se.woa(this.items,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_gold_guaji_over_obtain_items_info_request=l,__reflect(l.prototype,"Sproto.sc_gold_guaji_over_obtain_items_info_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gold_guaji_pub_boss_ref_request=h,__reflect(h.prototype,"Sproto.sc_gold_guaji_pub_boss_ref_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.code=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.code&&this.se.wi(this.code,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gold_guaji_start_combat_request=c,__reflect(c.prototype,"Sproto.sc_gold_guaji_start_combat_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.code=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.code&&this.se.wi(this.code,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gold_guaji_start_relive_request=u,__reflect(u.prototype,"Sproto.sc_gold_guaji_start_relive_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()
},t}(e.SprotoTypeBase);e.cs_guild_raid_daily_request=t,__reflect(t.prototype,"Sproto.cs_guild_raid_daily_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.wave=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.wave&&this.se.wi(this.wave,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guild_raid_sweep_request=i,__reflect(i.prototype,"Sproto.cs_guild_raid_sweep_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.pos=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.pos&&this.se.wi(this.pos,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guild_robber_attack_request=o,__reflect(o.prototype,"Sproto.cs_guild_robber_attack_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.rank=this.de.ri();break;case 1:this.stage=this.de.ri();break;case 2:this.name=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.rank&&this.se.wi(this.rank,0),void 0!=this.stage&&this.se.wi(this.stage,1),void 0!=this.name&&this.se.ws(this.name,2),this.se.Close()},t}(e.SprotoTypeBase);e.guild_raid_rank=t,__reflect(t.prototype,"Sproto.guild_raid_rank");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.pos=this.de.ri();break;case 1:this.status=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.pos&&this.se.wi(this.pos,0),void 0!=this.status&&this.se.wi(this.status,1),this.se.Close()},t}(e.SprotoTypeBase);e.guild_robber=i,__reflect(i.prototype,"Sproto.guild_robber");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.stage=this.de.ri();break;case 1:this.sweep=this.de.rb();break;case 2:this.reward=this.de.rb();break;case 3:this.boost=this.de.rb();break;case 4:this.number=this.de.ri();break;case 5:this.times=this.de.ri();break;case 6:this.wave=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.stage&&this.se.wi(this.stage,0),void 0!=this.sweep&&this.se.wb(this.sweep,1),void 0!=this.reward&&this.se.wb(this.reward,2),void 0!=this.boost&&this.se.wb(this.boost,3),void 0!=this.number&&this.se.wi(this.number,4),void 0!=this.times&&this.se.wi(this.times,5),void 0!=this.wave&&this.se.wi(this.wave,6),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_raid_actor_info_request=o,__reflect(o.prototype,"Sproto.sc_guild_raid_actor_info_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.stage=this.de.ri();break;case 1:this.time=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.stage&&this.se.wi(this.stage,0),void 0!=this.time&&this.se.wi(this.time,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_raid_overtime_request=s,__reflect(s.prototype,"Sproto.sc_guild_raid_overtime_request");var n=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ranks=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ranks&&this.se.woa(this.ranks,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_guild_raid_ranklist_request=n,__reflect(n.prototype,"Sproto.sc_guild_raid_ranklist_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.stage=this.de.ri();break;case 2:this.boost=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.stage&&this.se.wi(this.stage,1),void 0!=this.boost&&this.se.wi(this.boost,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_raid_ranktop_request=r,__reflect(r.prototype,"Sproto.sc_guild_raid_ranktop_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.value&&this.se.wi(this.value,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_raid_reward_pro_request=a,__reflect(a.prototype,"Sproto.sc_guild_raid_reward_pro_request");var l=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ranks=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ranks&&this.se.woa(this.ranks,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_guild_raid_stagerank_request=l,__reflect(l.prototype,"Sproto.sc_guild_raid_stagerank_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.stage=this.de.ri();break;case 1:this.time=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.stage&&this.se.wi(this.stage,0),void 0!=this.time&&this.se.wi(this.time,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_raid_starttime_request=h,__reflect(h.prototype,"Sproto.sc_guild_raid_starttime_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.wave=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.wave&&this.se.wi(this.wave,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_raid_waveover_request=c,__reflect(c.prototype,"Sproto.sc_guild_raid_waveover_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.times=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.times&&this.se.wi(this.times,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_robber_actor_info_request=u,__reflect(u.prototype,"Sproto.sc_guild_robber_actor_info_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.robbers=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.robbers&&this.se.woa(this.robbers,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_robber_info_request=d,__reflect(d.prototype,"Sproto.sc_guild_robber_info_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.str=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.str&&this.se.ws(this.str,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_robber_notice_request=p,__reflect(p.prototype,"Sproto.sc_guild_robber_notice_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.pos=this.de.ri();break;case 1:this.status=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.pos&&this.se.wi(this.pos,0),void 0!=this.status&&this.se.wi(this.status,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_robber_update_request=f,__reflect(f.prototype,"Sproto.sc_guild_robber_update_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dbid=this.de.ri();break;case 1:this.name=this.de.rs();break;case 2:this.head=this.de.ri();break;case 3:this.value=this.de.ri();break;case 4:this.office=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dbid&&this.se.wi(this.dbid,0),void 0!=this.name&&this.se.ws(this.name,1),void 0!=this.head&&this.se.wi(this.head,2),void 0!=this.value&&this.se.wi(this.value,3),void 0!=this.office&&this.se.wi(this.office,4),this.se.Close()},t}(e.SprotoTypeBase);e.guild_boss_rank_data=t,__reflect(t.prototype,"Sproto.guild_boss_rank_data");var i=function(e){function i(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.callerId=this.de.ri();break;case 1:this.callName=this.de.rs();break;case 2:this.callOffice=this.de.ri();break;case 3:this.callHead=this.de.ri();break;case 4:this.hpPercent=this.de.ri();break;case 5:this.rankDatas=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.callerId&&this.se.wi(this.callerId,0),void 0!=this.callName&&this.se.ws(this.callName,1),void 0!=this.callOffice&&this.se.wi(this.callOffice,2),void 0!=this.callHead&&this.se.wi(this.callHead,3),void 0!=this.hpPercent&&this.se.wi(this.hpPercent,4),void 0!=this.rankDatas&&this.se.woa(this.rankDatas,5),this.se.Close()},i}(e.SprotoTypeBase);e.sc_guild_boss_call_info_request=i,__reflect(i.prototype,"Sproto.sc_guild_boss_call_info_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.cdtime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.cdtime&&this.se.wi(this.cdtime,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_boss_cd_request=o,__reflect(o.prototype,"Sproto.sc_guild_boss_cd_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.callNum=this.de.ri();break;case 1:this.time=this.de.ri();break;case 2:this.index=this.de.ri();break;case 3:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.callNum&&this.se.wi(this.callNum,0),void 0!=this.time&&this.se.wi(this.time,1),void 0!=this.index&&this.se.wi(this.index,2),void 0!=this.level&&this.se.wi(this.level,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_boss_info_request=s,__reflect(s.prototype,"Sproto.sc_guild_boss_info_request");var n=function(t){function i(e){return void 0===e&&(e=null),t.call(this,7,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.result=this.de.rb();break;case 1:this.myRank=this.de.ri();break;case 2:this.myHurt=this.de.ri();break;case 3:this.firstId=this.de.ri();break;case 4:this.firstHurt=this.de.ri();break;case 5:this.furstname=this.de.rs();break;case 6:this.rewards=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wb(this.result,0),void 0!=this.myRank&&this.se.wi(this.myRank,1),void 0!=this.myHurt&&this.se.wi(this.myHurt,2),void 0!=this.firstId&&this.se.wi(this.firstId,3),void 0!=this.firstHurt&&this.se.wi(this.firstHurt,4),void 0!=this.furstname&&this.se.ws(this.furstname,5),void 0!=this.rewards&&this.se.woa(this.rewards,6),this.se.Close()},i}(e.SprotoTypeBase);e.sc_guild_boss_rewards_request=n,__reflect(n.prototype,"Sproto.sc_guild_boss_rewards_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.text=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.text&&this.se.ws(this.text,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guild_change_notice_request=t,__reflect(t.prototype,"Sproto.cs_guild_change_notice_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actorid=this.de.ri();break;case 1:this.office=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorid&&this.se.wi(this.actorid,0),void 0!=this.office&&this.se.wi(this.office,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guild_change_office_request=i,__reflect(i.prototype,"Sproto.cs_guild_change_office_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guild_contribute_request=o,__reflect(o.prototype,"Sproto.cs_guild_contribute_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.name=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.name&&this.se.ws(this.name,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guild_create_request=s,__reflect(s.prototype,"Sproto.cs_guild_create_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.taskid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.taskid&&this.se.wi(this.taskid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guild_gettaskaward_request=n,__reflect(n.prototype,"Sproto.cs_guild_gettaskaward_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guild_join_request=r,__reflect(r.prototype,"Sproto.cs_guild_join_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actorid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorid&&this.se.wi(this.actorid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guild_kick_request=a,__reflect(a.prototype,"Sproto.cs_guild_kick_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.skillid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.skillid&&this.se.wi(this.skillid,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guild_learnskill_request=l,__reflect(l.prototype,"Sproto.cs_guild_learnskill_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.str=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.str&&this.se.ws(this.str,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guild_sendchat_request=h,__reflect(h.prototype,"Sproto.cs_guild_sendchat_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actorid=this.de.ri();break;case 1:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorid&&this.se.wi(this.actorid,0),void 0!=this.result&&this.se.wi(this.result,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guild_setapply_request=c,__reflect(c.prototype,"Sproto.cs_guild_setapply_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.auto=this.de.ri();break;case 1:this.power=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.auto&&this.se.wi(this.auto,0),void 0!=this.power&&this.se.wi(this.power,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guild_setautoadd_request=u,__reflect(u.prototype,"Sproto.cs_guild_setautoadd_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.skillid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.skillid&&this.se.wi(this.skillid,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guild_temperskill_request=d,__reflect(d.prototype,"Sproto.cs_guild_temperskill_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.buildtype=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.buildtype&&this.se.wi(this.buildtype,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guild_upbuilding_request=p,__reflect(p.prototype,"Sproto.cs_guild_upbuilding_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,8,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actorid=this.de.ri();break;case 1:this.vip_level=this.de.ri();break;case 2:this.job=this.de.ri();break;case 3:this.sex=this.de.ri();break;case 4:this.power=this.de.ri();break;case 5:this.actorname=this.de.rs();break;case 6:this.monthcard=this.de.ri();break;case 7:this.monthcard_super=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorid&&this.se.wi(this.actorid,0),void 0!=this.vip_level&&this.se.wi(this.vip_level,1),void 0!=this.job&&this.se.wi(this.job,2),void 0!=this.sex&&this.se.wi(this.sex,3),void 0!=this.power&&this.se.wi(this.power,4),void 0!=this.actorname&&this.se.ws(this.actorname,5),void 0!=this.monthcard&&this.se.wi(this.monthcard,6),void 0!=this.monthcard_super&&this.se.wi(this.monthcard_super,7),this.se.Close()},t}(e.SprotoTypeBase);e.guild_apply=t,__reflect(t.prototype,"Sproto.guild_apply");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,11,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.content=this.de.rs();break;case 2:this.actorid=this.de.ri();break;case 3:this.name=this.de.rs();break;case 4:this.job=this.de.ri();break;case 5:this.sex=this.de.ri();break;case 6:this.vip_level=this.de.ri();break;case 7:this.monthcard=this.de.ri();break;case 8:this.monthcard_super=this.de.ri();break;case 9:this.office=this.de.ri();break;case 10:this.time=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.content&&this.se.ws(this.content,1),void 0!=this.actorid&&this.se.wi(this.actorid,2),void 0!=this.name&&this.se.ws(this.name,3),void 0!=this.job&&this.se.wi(this.job,4),void 0!=this.sex&&this.se.wi(this.sex,5),void 0!=this.vip_level&&this.se.wi(this.vip_level,6),void 0!=this.monthcard&&this.se.wi(this.monthcard,7),void 0!=this.monthcard_super&&this.se.wi(this.monthcard_super,8),void 0!=this.office&&this.se.wi(this.office,9),void 0!=this.time&&this.se.wi(this.time,10),this.se.Close()},t}(e.SprotoTypeBase);e.guild_chat=i,__reflect(i.prototype,"Sproto.guild_chat");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.time=this.de.ri();break;case 1:this.type=this.de.ri();break;case 2:this.param1=this.de.ri();break;case 3:this.param2=this.de.ri();break;case 4:this.param3=this.de.ri();break;case 5:this.name1=this.de.rs();break;case 6:this.name2=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.time&&this.se.wi(this.time,0),void 0!=this.type&&this.se.wi(this.type,1),void 0!=this.param1&&this.se.wi(this.param1,2),void 0!=this.param2&&this.se.wi(this.param2,3),void 0!=this.param3&&this.se.wi(this.param3,4),void 0!=this.name1&&this.se.ws(this.name1,5),void 0!=this.name2&&this.se.ws(this.name2,6),this.se.Close()},t}(e.SprotoTypeBase);e.guild_history=o,__reflect(o.prototype,"Sproto.guild_history");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.level=this.de.ri();break;case 1:this.exp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.level&&this.se.wi(this.level,0),void 0!=this.exp&&this.se.wi(this.exp,1),this.se.Close()},t}(e.SprotoTypeBase);e.guild_skill=s,__reflect(s.prototype,"Sproto.guild_skill");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.level=this.de.ri();break;case 2:this.actorcount=this.de.ri();break;case 3:this.name=this.de.rs();break;case 4:this.leadername=this.de.rs();break;case 5:this.needPower=this.de.ri();break;case 6:this.totalpower=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.actorcount&&this.se.wi(this.actorcount,2),void 0!=this.name&&this.se.ws(this.name,3),void 0!=this.leadername&&this.se.ws(this.leadername,4),void 0!=this.needPower&&this.se.wi(this.needPower,5),void 0!=this.totalpower&&this.se.wi(this.totalpower,6),this.se.Close()},t}(e.SprotoTypeBase);e.guild_summary=n,__reflect(n.prototype,"Sproto.guild_summary");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.value=this.de.ri();break;case 2:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.value&&this.se.wi(this.value,1),void 0!=this.state&&this.se.wi(this.state,2),this.se.Close()},t}(e.SprotoTypeBase);e.guild_task=r,__reflect(r.prototype,"Sproto.guild_task");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,12,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actorid=this.de.ri();break;case 1:this.actorname=this.de.rs();break;case 2:this.office=this.de.ri();break;case 3:this.job=this.de.ri();break;case 4:this.sex=this.de.ri();break;case 5:this.vip_level=this.de.ri();break;case 6:this.monthcard=this.de.ri();break;case 7:this.monthcard_super=this.de.ri();break;case 8:this.contribute=this.de.ri();break;case 9:this.todayContri=this.de.ri();break;case 10:this.power=this.de.ri();break;case 11:this.logouttime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorid&&this.se.wi(this.actorid,0),void 0!=this.actorname&&this.se.ws(this.actorname,1),void 0!=this.office&&this.se.wi(this.office,2),void 0!=this.job&&this.se.wi(this.job,3),void 0!=this.sex&&this.se.wi(this.sex,4),void 0!=this.vip_level&&this.se.wi(this.vip_level,5),void 0!=this.monthcard&&this.se.wi(this.monthcard,6),void 0!=this.monthcard_super&&this.se.wi(this.monthcard_super,7),void 0!=this.contribute&&this.se.wi(this.contribute,8),void 0!=this.todayContri&&this.se.wi(this.todayContri,9),void 0!=this.power&&this.se.wi(this.power,10),void 0!=this.logouttime&&this.se.wi(this.logouttime,11),this.se.Close()},t}(e.SprotoTypeBase);e.member_info=a,__reflect(a.prototype,"Sproto.member_info");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.building=this.de.ria();break;case 1:this.fund=this.de.ri();break;case 2:this.notice=this.de.rs();break;case 3:this.autoJoin=this.de.ri();break;case 4:this.needPower=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.building&&this.se.wia(this.building,0),void 0!=this.fund&&this.se.wi(this.fund,1),void 0!=this.notice&&this.se.ws(this.notice,2),void 0!=this.autoJoin&&this.se.wi(this.autoJoin,3),void 0!=this.needPower&&this.se.wi(this.needPower,4),this.se.Close()},t}(e.SprotoTypeBase);e.other_guild_info=l,__reflect(l.prototype,"Sproto.other_guild_info");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.skill1=this.de.ria();break;case 1:this.skill2=this.de.roa(s);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.skill1&&this.se.wia(this.skill1,0),void 0!=this.skill2&&this.se.woa(this.skill2,1),this.se.Close()},t}(e.SprotoTypeBase);e.role_guild_skill=h,__reflect(h.prototype,"Sproto.role_guild_skill");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.history=this.de.ro(o);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.history&&this.se.wo(this.history,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_addhistory_request=c,__reflect(c.prototype,"Sproto.sc_guild_addhistory_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.chats=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.chats&&this.se.woa(this.chats,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_allchat_request=u,__reflect(u.prototype,"Sproto.sc_guild_allchat_request");var d=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.applyinfo=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.applyinfo&&this.se.woa(this.applyinfo,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_guild_apply_request=d,__reflect(d.prototype,"Sproto.sc_guild_apply_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.autoJoin=this.de.ri();break;case 1:this.needPower=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.autoJoin&&this.se.wi(this.autoJoin,0),void 0!=this.needPower&&this.se.wi(this.needPower,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_autoadd_ret_request=p,__reflect(p.prototype,"Sproto.sc_guild_autoadd_ret_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.chat=this.de.ro(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.chat&&this.se.wo(this.chat,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_broadcastchat_request=f,__reflect(f.prototype,"Sproto.sc_guild_broadcastchat_request");var g=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;case 1:this.text=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),void 0!=this.text&&this.se.ws(this.text,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_change_notice_ret_request=g,__reflect(g.prototype,"Sproto.sc_guild_change_notice_ret_request");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actorid=this.de.ri();break;case 1:this.office=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorid&&this.se.wi(this.actorid,0),void 0!=this.office&&this.se.wi(this.office,1),this.se.Close()
},t}(e.SprotoTypeBase);e.sc_guild_change_office_ret_request=_,__reflect(_.prototype,"Sproto.sc_guild_change_office_ret_request");var m=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.counts=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.counts&&this.se.wia(this.counts,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_concount_request=m,__reflect(m.prototype,"Sproto.sc_guild_concount_request");var v=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;case 1:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),void 0!=this.id&&this.se.wi(this.id,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_create_ret_request=v,__reflect(v.prototype,"Sproto.sc_guild_create_ret_request");var y=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.fund=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.fund&&this.se.wi(this.fund,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_fund_request=y,__reflect(y.prototype,"Sproto.sc_guild_fund_request");var b=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.historys=this.de.roa(o);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.historys&&this.se.woa(this.historys,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_history_request=b,__reflect(b.prototype,"Sproto.sc_guild_history_request");var C=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.name=this.de.rs();break;case 2:this.variable=this.de.ro(l);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.name&&this.se.ws(this.name,1),void 0!=this.variable&&this.se.wo(this.variable,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_info_request=C,__reflect(C.prototype,"Sproto.sc_guild_info_request");var T=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actorid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorid&&this.se.wi(this.actorid,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_kick_ret_request=T,__reflect(T.prototype,"Sproto.sc_guild_kick_ret_request");var S=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.skillid=this.de.ri();break;case 2:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.skillid&&this.se.wi(this.skillid,1),void 0!=this.level&&this.se.wi(this.level,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_learnskill_ret_request=S,__reflect(S.prototype,"Sproto.sc_guild_learnskill_ret_request");var w=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.guilds=this.de.roa(n);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.guilds&&this.se.woa(this.guilds,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_list_request=w,__reflect(w.prototype,"Sproto.sc_guild_list_request");var I=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.members=this.de.roa(a);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.members&&this.se.woa(this.members,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_members_request=I,__reflect(I.prototype,"Sproto.sc_guild_members_request");var G=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.result&&this.se.wi(this.result,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_notice_apply_request=G,__reflect(G.prototype,"Sproto.sc_guild_notice_apply_request");var L=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.task=this.de.ro(r);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.task&&this.se.wo(this.task,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_onetask_request=L,__reflect(L.prototype,"Sproto.sc_guild_onetask_request");var P=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.contribute=this.de.ri();break;case 1:this.curcontribute=this.de.ri();break;case 2:this.office=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.contribute&&this.se.wi(this.contribute,0),void 0!=this.curcontribute&&this.se.wi(this.curcontribute,1),void 0!=this.office&&this.se.wi(this.office,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_playerinfo_request=P,__reflect(P.prototype,"Sproto.sc_guild_playerinfo_request");var k=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.skills=this.de.roa(h);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.skills&&this.se.woa(this.skills,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_skillinfo_request=k,__reflect(k.prototype,"Sproto.sc_guild_skillinfo_request");var E=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.task=this.de.roa(r);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.task&&this.se.woa(this.task,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_taskinfo_request=E,__reflect(E.prototype,"Sproto.sc_guild_taskinfo_request");var R=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.skillid=this.de.ri();break;case 2:this.level=this.de.ri();break;case 3:this.exp=this.de.ri();break;case 4:this.addexp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.skillid&&this.se.wi(this.skillid,1),void 0!=this.level&&this.se.wi(this.level,2),void 0!=this.exp&&this.se.wi(this.exp,3),void 0!=this.addexp&&this.se.wi(this.addexp,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_temperskill_ret_request=R,__reflect(R.prototype,"Sproto.sc_guild_temperskill_ret_request");var D=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.buildtype=this.de.ri();break;case 1:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.buildtype&&this.se.wi(this.buildtype,0),void 0!=this.level&&this.se.wi(this.level,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guild_upbuilding_ret_request=D,__reflect(D.prototype,"Sproto.sc_guild_upbuilding_ret_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dispInfos=this.de.roa(r);break;case 1:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dispInfos&&this.se.woa(this.dispInfos,0),void 0!=this.type&&this.se.wi(this.type,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guildwar_disp_award_request=t,__reflect(t.prototype,"Sproto.cs_guildwar_disp_award_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.day=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.day&&this.se.wi(this.day,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guildwar_get_dayaward_request=i,__reflect(i.prototype,"Sproto.cs_guildwar_get_dayaward_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guildwar_get_redpacket_request=o,__reflect(o.prototype,"Sproto.cs_guildwar_get_redpacket_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guildwar_get_winnerinfo_request=s,__reflect(s.prototype,"Sproto.cs_guildwar_get_winnerinfo_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.yuanbao=this.de.ri();break;case 1:this.number=this.de.ri();break;case 2:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.yuanbao&&this.se.wi(this.yuanbao,0),void 0!=this.number&&this.se.wi(this.number,1),void 0!=this.type&&this.se.wi(this.type,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_guildwar_send_redpacket_request=n,__reflect(n.prototype,"Sproto.cs_guildwar_send_redpacket_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.actorids=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.actorids&&this.se.wia(this.actorids,1),this.se.Close()},t}(e.SprotoTypeBase);e.guildwar_disp_info=r,__reflect(r.prototype,"Sproto.guildwar_disp_info");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildwar_get_actor_scores_request=a,__reflect(a.prototype,"Sproto.sc_guildwar_get_actor_scores_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildwar_get_guild_scores_request=l,__reflect(l.prototype,"Sproto.sc_guildwar_get_guild_scores_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actorid=this.de.ri();break;case 1:this.score=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorid&&this.se.wi(this.actorid,0),void 0!=this.score&&this.se.wi(this.score,1),this.se.Close()},t}(e.SprotoTypeBase);e.guildwar_guildactorscores=t,__reflect(t.prototype,"Sproto.guildwar_guildactorscores");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.yuanbao=this.de.ri();break;case 1:this.actorid=this.de.ri();break;case 2:this.actorname=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.yuanbao&&this.se.wi(this.yuanbao,0),void 0!=this.actorid&&this.se.wi(this.actorid,1),void 0!=this.actorname&&this.se.ws(this.actorname,2),this.se.Close()},t}(e.SprotoTypeBase);e.guildwar_redpacket_getinfo=i,__reflect(i.prototype,"Sproto.guildwar_redpacket_getinfo");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.guildname=this.de.rs();break;case 1:this.actorname=this.de.rs();break;case 2:this.score=this.de.ri();break;case 3:this.serverid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.guildname&&this.se.ws(this.guildname,0),void 0!=this.actorname&&this.se.ws(this.actorname,1),void 0!=this.score&&this.se.wi(this.score,2),void 0!=this.serverid&&this.se.wi(this.serverid,3),this.se.Close()},t}(e.SprotoTypeBase);e.guildwar_scoreinfo=o,__reflect(o.prototype,"Sproto.guildwar_scoreinfo");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.winguild=this.de.ro(n);break;case 1:this.guildlist=this.de.roa(n);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.winguild&&this.se.wo(this.winguild,0),void 0!=this.guildlist&&this.se.woa(this.guildlist,1),this.se.Close()},t}(e.SprotoTypeBase);e.kffz_info=s,__reflect(s.prototype,"Sproto.kffz_info");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.serverid=this.de.ri();break;case 1:this.guildname=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.serverid&&this.se.wi(this.serverid,0),void 0!=this.guildname&&this.se.ws(this.guildname,1),this.se.Close()},t}(e.SprotoTypeBase);e.kffz_one=n,__reflect(n.prototype,"Sproto.kffz_one");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.time=this.de.ri();break;case 1:this.serverid=this.de.ri();break;case 2:this.guildname=this.de.rs();break;case 3:this.leadername=this.de.rs();break;case 4:this.assistnames=this.de.rsa();break;case 5:this.leaderheadid=this.de.ri();break;case 6:this.assistheadid=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.time&&this.se.wi(this.time,0),void 0!=this.serverid&&this.se.wi(this.serverid,1),void 0!=this.guildname&&this.se.ws(this.guildname,2),void 0!=this.leadername&&this.se.ws(this.leadername,3),void 0!=this.assistnames&&this.se.wsa(this.assistnames,4),void 0!=this.leaderheadid&&this.se.wi(this.leaderheadid,5),void 0!=this.assistheadid&&this.se.wia(this.assistheadid,6),this.se.Close()},t}(e.SprotoTypeBase);e.kfwin_record=r,__reflect(r.prototype,"Sproto.kfwin_record");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,8,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actorId=this.de.ri();break;case 1:this.name=this.de.rs();break;case 2:this.mapName=this.de.rs();break;case 3:this.point=this.de.ri();break;case 4:this.attr=this.de.ri();break;case 5:this.office=this.de.ri();break;case 6:this.job=this.de.ri();break;case 7:this.sex=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorId&&this.se.wi(this.actorId,0),void 0!=this.name&&this.se.ws(this.name,1),void 0!=this.mapName&&this.se.ws(this.mapName,2),void 0!=this.point&&this.se.wi(this.point,3),void 0!=this.attr&&this.se.wi(this.attr,4),void 0!=this.office&&this.se.wi(this.office,5),void 0!=this.job&&this.se.wi(this.job,6),void 0!=this.sex&&this.se.wi(this.sex,7),this.se.Close()},t}(e.SprotoTypeBase);e.my_guild_rank_info=a,__reflect(a.prototype,"Sproto.my_guild_rank_info");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.scores=this.de.roa(o);break;case 1:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.scores&&this.se.woa(this.scores,0),void 0!=this.type&&this.se.wi(this.type,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildwar_actor_scores_request=l,__reflect(l.prototype,"Sproto.sc_guildwar_actor_scores_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.canGet=this.de.rb();break;case 1:this.isGet=this.de.rb();break;case 2:this.day=this.de.ri();break;case 3:this.type=this.de.ri();break;case 4:this.guildname=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.canGet&&this.se.wb(this.canGet,0),void 0!=this.isGet&&this.se.wb(this.isGet,1),void 0!=this.day&&this.se.wi(this.day,2),void 0!=this.type&&this.se.wi(this.type,3),void 0!=this.guildname&&this.se.ws(this.guildname,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildwar_dayaward_info_request=h,__reflect(h.prototype,"Sproto.sc_guildwar_dayaward_info_request");var c=function(e){function i(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.guildrank=this.de.ri();break;case 1:this.canDisp=this.de.rb();break;case 2:this.scores=this.de.roa(t);break;case 3:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.guildrank&&this.se.wi(this.guildrank,0),void 0!=this.canDisp&&this.se.wb(this.canDisp,1),void 0!=this.scores&&this.se.woa(this.scores,2),void 0!=this.type&&this.se.wi(this.type,3),this.se.Close()},i}(e.SprotoTypeBase);e.sc_guildwar_disp_info_request=c,__reflect(c.prototype,"Sproto.sc_guildwar_disp_info_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.success=this.de.rb();break;case 1:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.success&&this.se.wb(this.success,0),void 0!=this.type&&this.se.wi(this.type,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildwar_disp_ret_request=u,__reflect(u.prototype,"Sproto.sc_guildwar_disp_ret_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.canAward=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.canAward&&this.se.wb(this.canAward,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildwar_firstwinner_awardinfo_request=d,__reflect(d.prototype,"Sproto.sc_guildwar_firstwinner_awardinfo_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.success=this.de.rb();break;case 1:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.success&&this.se.wb(this.success,0),void 0!=this.type&&this.se.wi(this.type,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildwar_get_redpacket_ret_request=p,__reflect(p.prototype,"Sproto.sc_guildwar_get_redpacket_ret_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.datas=this.de.roa(a);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.datas&&this.se.woa(this.datas,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildwar_guild_rank_info_request=f,__reflect(f.prototype,"Sproto.sc_guildwar_guild_rank_info_request");var g=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.scores=this.de.roa(o);break;case 1:this.upGuildName=this.de.rs();break;case 2:this.upReason=this.de.ri();break;case 3:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.scores&&this.se.woa(this.scores,0),void 0!=this.upGuildName&&this.se.ws(this.upGuildName,1),void 0!=this.upReason&&this.se.wi(this.upReason,2),void 0!=this.type&&this.se.wi(this.type,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildwar_guild_scores_request=g,__reflect(g.prototype,"Sproto.sc_guildwar_guild_scores_request");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.lists=this.de.roa(s);break;case 1:this.infznumber=this.de.ri();break;case 2:this.serverid=this.de.ri();break;case 3:this.guildname=this.de.rs();break;case 4:this.bestguildname=this.de.rs();break;case 5:this.entitle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.lists&&this.se.woa(this.lists,0),void 0!=this.infznumber&&this.se.wi(this.infznumber,1),void 0!=this.serverid&&this.se.wi(this.serverid,2),void 0!=this.guildname&&this.se.ws(this.guildname,3),void 0!=this.bestguildname&&this.se.ws(this.bestguildname,4),void 0!=this.entitle&&this.se.wi(this.entitle,5),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildwar_kffz_info_request=_,__reflect(_.prototype,"Sproto.sc_guildwar_kffz_info_request");var m=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.records=this.de.roa(r);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.records&&this.se.woa(this.records,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildwar_kfwin_records_request=m,__reflect(m.prototype,"Sproto.sc_guildwar_kfwin_records_request");var v=function(e){function t(t){return void 0===t&&(t=null),e.call(this,10,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.sendYuanbao=this.de.ri();break;case 1:this.canSend=this.de.rb();break;case 2:this.canGet=this.de.rb();break;case 3:this.allYuanbao=this.de.ri();break;case 4:this.count=this.de.ri();break;case 5:this.leftCount=this.de.ri();break;case 6:this.getInfos=this.de.roa(i);break;case 7:this.endTime=this.de.ri();break;case 8:this.maxcount=this.de.ri();break;case 9:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.sendYuanbao&&this.se.wi(this.sendYuanbao,0),void 0!=this.canSend&&this.se.wb(this.canSend,1),void 0!=this.canGet&&this.se.wb(this.canGet,2),void 0!=this.allYuanbao&&this.se.wi(this.allYuanbao,3),void 0!=this.count&&this.se.wi(this.count,4),void 0!=this.leftCount&&this.se.wi(this.leftCount,5),void 0!=this.getInfos&&this.se.woa(this.getInfos,6),void 0!=this.endTime&&this.se.wi(this.endTime,7),void 0!=this.maxcount&&this.se.wi(this.maxcount,8),void 0!=this.type&&this.se.wi(this.type,9),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildwar_redpacket_info_request=v,__reflect(v.prototype,"Sproto.sc_guildwar_redpacket_info_request");var y=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.success=this.de.rb();break;case 1:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.success&&this.se.wb(this.success,0),void 0!=this.type&&this.se.wi(this.type,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildwar_send_redpacket_ret_request=y,__reflect(y.prototype,"Sproto.sc_guildwar_send_redpacket_ret_request");var b=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.leadername=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.leadername&&this.se.ws(this.leadername,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildwar_winleader_request=b,__reflect(b.prototype,"Sproto.sc_guildwar_winleader_request");var C=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.guildname=this.de.rs();break;case 1:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.guildname&&this.se.ws(this.guildname,0),void 0!=this.type&&this.se.wi(this.type,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildwar_winner_request=C,__reflect(C.prototype,"Sproto.sc_guildwar_winner_request");var T=function(t){function i(e){return void 0===e&&(e=null),t.call(this,9,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.guildid=this.de.ri();break;case 1:this.guildname=this.de.rs();break;case 2:this.leadername=this.de.rs();break;case 3:this.leaderid=this.de.ri();break;case 4:this.leaderinfo=this.de.ro(e.rank_subrole);break;case 5:this.assistname=this.de.rsa();break;case 6:this.assistinfo=this.de.roa(e.rank_subrole);break;case 7:this.type=this.de.ri();break;case 8:this.serverid=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.guildid&&this.se.wi(this.guildid,0),void 0!=this.guildname&&this.se.ws(this.guildname,1),void 0!=this.leadername&&this.se.ws(this.leadername,2),void 0!=this.leaderid&&this.se.wi(this.leaderid,3),void 0!=this.leaderinfo&&this.se.wo(this.leaderinfo,4),void 0!=this.assistname&&this.se.wsa(this.assistname,5),void 0!=this.assistinfo&&this.se.woa(this.assistinfo,6),void 0!=this.type&&this.se.wi(this.type,7),void 0!=this.serverid&&this.se.wi(this.serverid,8),this.se.Close()},i}(e.SprotoTypeBase);e.sc_guildwar_winner_info_request=T,__reflect(T.prototype,"Sproto.sc_guildwar_winner_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dbid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dbid&&this.se.wi(this.dbid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_gdwar_attack_player_request=t,__reflect(t.prototype,"Sproto.cs_gdwar_attack_player_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_gdwar_enter_city_request=i,__reflect(i.prototype,"Sproto.cs_gdwar_enter_city_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.warType=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.warType&&this.se.wi(this.warType,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_gdwar_enter_cross_request=o,__reflect(o.prototype,"Sproto.cs_gdwar_enter_cross_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.guildId=this.de.ri();break;case 1:this.guildName=this.de.rs();break;case 2:this.integral=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.guildId&&this.se.wi(this.guildId,0),void 0!=this.guildName&&this.se.ws(this.guildName,1),void 0!=this.integral&&this.se.wi(this.integral,2),this.se.Close()},t}(e.SprotoTypeBase);e.gdwar_guild_info=t,__reflect(t.prototype,"Sproto.gdwar_guild_info");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,8,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dbid=this.de.ri();
break;case 1:this.actorName=this.de.rs();break;case 2:this.integral=this.de.ri();break;case 3:this.position=this.de.ri();break;case 4:this.killNum=this.de.ri();break;case 5:this.fightPow=this.de.ri();break;case 6:this.headId=this.de.ri();break;case 7:this.office=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dbid&&this.se.wi(this.dbid,0),void 0!=this.actorName&&this.se.ws(this.actorName,1),void 0!=this.integral&&this.se.wi(this.integral,2),void 0!=this.position&&this.se.wi(this.position,3),void 0!=this.killNum&&this.se.wi(this.killNum,4),void 0!=this.fightPow&&this.se.wi(this.fightPow,5),void 0!=this.headId&&this.se.wi(this.headId,6),void 0!=this.office&&this.se.wi(this.office,7),this.se.Close()},t}(e.SprotoTypeBase);e.gdwar_member_info=i,__reflect(i.prototype,"Sproto.gdwar_member_info");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.guildId=this.de.ri();break;case 1:this.guildName=this.de.rs();break;case 2:this.actorId=this.de.ri();break;case 3:this.actorName=this.de.rs();break;case 4:this.actorHead=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.guildId&&this.se.wi(this.guildId,0),void 0!=this.guildName&&this.se.ws(this.guildName,1),void 0!=this.actorId&&this.se.wi(this.actorId,2),void 0!=this.actorName&&this.se.ws(this.actorName,3),void 0!=this.actorHead&&this.se.wi(this.actorHead,4),this.se.Close()},t}(e.SprotoTypeBase);e.gdwar_targeter=o,__reflect(o.prototype,"Sproto.gdwar_targeter");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.guildId=this.de.ri();break;case 1:this.guildName=this.de.rs();break;case 2:this.hurtValue=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.guildId&&this.se.wi(this.guildId,0),void 0!=this.guildName&&this.se.ws(this.guildName,1),void 0!=this.hurtValue&&this.se.wi(this.hurtValue,2),this.se.Close()},t}(e.SprotoTypeBase);e.guild_hurt_rank=s,__reflect(s.prototype,"Sproto.guild_hurt_rank");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.feats=this.de.ri();break;case 1:this.step=this.de.ri();break;case 2:this.point=this.de.ri();break;case 3:this.wallStatus=this.de.rb();break;case 4:this.cityStatus=this.de.rb();break;case 5:this.palaceStatus=this.de.rb();break;case 6:this.kingStatus=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.feats&&this.se.wi(this.feats,0),void 0!=this.step&&this.se.wi(this.step,1),void 0!=this.point&&this.se.wi(this.point,2),void 0!=this.wallStatus&&this.se.wb(this.wallStatus,3),void 0!=this.cityStatus&&this.se.wb(this.cityStatus,4),void 0!=this.palaceStatus&&this.se.wb(this.palaceStatus,5),void 0!=this.kingStatus&&this.se.wb(this.kingStatus,6),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gdwar_actor_data_request=n,__reflect(n.prototype,"Sproto.sc_gdwar_actor_data_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gdwar_attack_change_request=r,__reflect(r.prototype,"Sproto.sc_gdwar_attack_change_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.datas=this.de.roa(o);break;case 1:this.nums=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.datas&&this.se.woa(this.datas,0),void 0!=this.nums&&this.se.wi(this.nums,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gdwar_attackers_request=a,__reflect(a.prototype,"Sproto.sc_gdwar_attackers_request");var l=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.selfIntegral=this.de.ri();break;case 1:this.guildIntegral=this.de.ri();break;case 2:this.datas=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.selfIntegral&&this.se.wi(this.selfIntegral,0),void 0!=this.guildIntegral&&this.se.wi(this.guildIntegral,1),void 0!=this.datas&&this.se.woa(this.datas,2),this.se.Close()},i}(e.SprotoTypeBase);e.sc_gdwar_base_info_request=l,__reflect(l.prototype,"Sproto.sc_gdwar_base_info_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ownerName=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ownerName&&this.se.ws(this.ownerName,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gdwar_city_owner_change_request=h,__reflect(h.prototype,"Sproto.sc_gdwar_city_owner_change_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.datas=this.de.roa(o);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.datas&&this.se.woa(this.datas,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gdwar_enemies_request=c,__reflect(c.prototype,"Sproto.sc_gdwar_enemies_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,8,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.configId=this.de.ri();break;case 1:this.entityId=this.de.ri();break;case 2:this.overTime=this.de.ri();break;case 3:this.holderId=this.de.ri();break;case 4:this.holderName=this.de.rs();break;case 5:this.shieldRate=this.de.ri();break;case 6:this.openTime=this.de.ri();break;case 7:this.holderGuild=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.configId&&this.se.wi(this.configId,0),void 0!=this.entityId&&this.se.wi(this.entityId,1),void 0!=this.overTime&&this.se.wi(this.overTime,2),void 0!=this.holderId&&this.se.wi(this.holderId,3),void 0!=this.holderName&&this.se.ws(this.holderName,4),void 0!=this.shieldRate&&this.se.wi(this.shieldRate,5),void 0!=this.openTime&&this.se.wi(this.openTime,6),void 0!=this.holderGuild&&this.se.ws(this.holderGuild,7),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gdwar_flag_data_request=u,__reflect(u.prototype,"Sproto.sc_gdwar_flag_data_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.overTime=this.de.ri();break;case 1:this.holderName=this.de.rs();break;case 2:this.holderGuild=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.overTime&&this.se.wi(this.overTime,0),void 0!=this.holderName&&this.se.ws(this.holderName,1),void 0!=this.holderGuild&&this.se.ws(this.holderGuild,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gdwar_flag_notice_request=d,__reflect(d.prototype,"Sproto.sc_gdwar_flag_notice_request");var p=function(t){function i(e){return void 0===e&&(e=null),t.call(this,6,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.bestguildname=this.de.rs();break;case 1:this.serverid=this.de.ri();break;case 2:this.guildname=this.de.rs();break;case 3:this.infznumber=this.de.ri();break;case 4:this.entitle=this.de.ri();break;case 5:this.lists=this.de.roa(e.kffz_info);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.bestguildname&&this.se.ws(this.bestguildname,0),void 0!=this.serverid&&this.se.wi(this.serverid,1),void 0!=this.guildname&&this.se.ws(this.guildname,2),void 0!=this.infznumber&&this.se.wi(this.infznumber,3),void 0!=this.entitle&&this.se.wi(this.entitle,4),void 0!=this.lists&&this.se.woa(this.lists,5),this.se.Close()},i}(e.SprotoTypeBase);e.sc_gdwar_guild_group_request=p,__reflect(p.prototype,"Sproto.sc_gdwar_guild_group_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.datas=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.datas&&this.se.woa(this.datas,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gdwar_guild_member_request=f,__reflect(f.prototype,"Sproto.sc_gdwar_guild_member_request");var g=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.cd=this.de.ri();break;case 1:this.killName=this.de.rs();break;case 2:this.killGuild=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.cd&&this.se.wi(this.cd,0),void 0!=this.killName&&this.se.ws(this.killName,1),void 0!=this.killGuild&&this.se.ws(this.killGuild,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gdwar_kill_info_request=g,__reflect(g.prototype,"Sproto.sc_gdwar_kill_info_request");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.point=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.point&&this.se.wi(this.point,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gdwar_lottery_over_request=_,__reflect(_.prototype,"Sproto.sc_gdwar_lottery_over_request");var m=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.point=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.point&&this.se.wi(this.point,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gdwar_lottery_point_request=m,__reflect(m.prototype,"Sproto.sc_gdwar_lottery_point_request");var v=function(t){function i(e){return void 0===e&&(e=null),t.call(this,8,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.winerId=this.de.ri();break;case 1:this.winerName=this.de.rs();break;case 2:this.actorPoint=this.de.ri();break;case 3:this.actorRank=this.de.ri();break;case 4:this.guildPoint=this.de.ri();break;case 5:this.guildRank=this.de.ri();break;case 6:this.actorReward=this.de.roa(e.reward_data);break;case 7:this.warType=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.winerId&&this.se.wi(this.winerId,0),void 0!=this.winerName&&this.se.ws(this.winerName,1),void 0!=this.actorPoint&&this.se.wi(this.actorPoint,2),void 0!=this.actorRank&&this.se.wi(this.actorRank,3),void 0!=this.guildPoint&&this.se.wi(this.guildPoint,4),void 0!=this.guildRank&&this.se.wi(this.guildRank,5),void 0!=this.actorReward&&this.se.woa(this.actorReward,6),void 0!=this.warType&&this.se.wi(this.warType,7),this.se.Close()},i}(e.SprotoTypeBase);e.sc_gdwar_reward_request=v,__reflect(v.prototype,"Sproto.sc_gdwar_reward_request");var y=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.isWarStart=this.de.rb();break;case 1:this.startTime=this.de.ri();break;case 2:this.endTime=this.de.ri();break;case 3:this.warType=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.isWarStart&&this.se.wb(this.isWarStart,0),void 0!=this.startTime&&this.se.wi(this.startTime,1),void 0!=this.endTime&&this.se.wi(this.endTime,2),void 0!=this.warType&&this.se.wi(this.warType,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gdwar_start_info_request=y,__reflect(y.prototype,"Sproto.sc_gdwar_start_info_request");var b=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.configId=this.de.ri();break;case 1:this.entityId=this.de.ri();break;case 2:this.wallTime=this.de.ri();break;case 3:this.shieldTime=this.de.ri();break;case 4:this.hurtRanks=this.de.roa(s);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.configId&&this.se.wi(this.configId,0),void 0!=this.entityId&&this.se.wi(this.entityId,1),void 0!=this.wallTime&&this.se.wi(this.wallTime,2),void 0!=this.shieldTime&&this.se.wi(this.shieldTime,3),void 0!=this.hurtRanks&&this.se.woa(this.hurtRanks,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_gdwar_wall_rank_request=b,__reflect(b.prototype,"Sproto.sc_gdwar_wall_rank_request");var C=function(t){function i(e){return void 0===e&&(e=null),t.call(this,5,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.firstName=this.de.rs();break;case 1:this.firstId=this.de.ri();break;case 2:this.hurtRank=this.de.ri();break;case 3:this.hurtValue=this.de.ri();break;case 4:this.rewards=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.firstName&&this.se.ws(this.firstName,0),void 0!=this.firstId&&this.se.wi(this.firstId,1),void 0!=this.hurtRank&&this.se.wi(this.hurtRank,2),void 0!=this.hurtValue&&this.se.wi(this.hurtValue,3),void 0!=this.rewards&&this.se.woa(this.rewards,4),this.se.Close()},i}(e.SprotoTypeBase);e.sc_gdwar_wall_reward_request=C,__reflect(C.prototype,"Sproto.sc_gdwar_wall_reward_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.time=this.de.ri();break;case 1:this.name=this.de.rs();break;case 2:this.itemid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.time&&this.se.wi(this.time,0),void 0!=this.name&&this.se.ws(this.name,1),void 0!=this.itemid&&this.se.wi(this.itemid,2),this.se.Close()},t}(e.SprotoTypeBase);e.guildshop_record=t,__reflect(t.prototype,"Sproto.guildshop_record");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.level=this.de.ri();break;case 1:this.leftCount=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.level&&this.se.wi(this.level,0),void 0!=this.leftCount&&this.se.wi(this.leftCount,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildshop_info_request=i,__reflect(i.prototype,"Sproto.sc_guildshop_info_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.itemid=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.itemid&&this.se.wi(this.itemid,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_guildshop_open_ret_request=o,__reflect(o.prototype,"Sproto.sc_guildshop_open_ret_request");var s=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.records=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.records&&this.se.woa(this.records,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_guildshop_record_request=s,__reflect(s.prototype,"Sproto.sc_guildshop_record_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.skillID=this.de.ri();break;case 1:this.show=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.skillID&&this.se.wi(this.skillID,0),void 0!=this.show&&this.se.wb(this.show,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_heji_skill_data_request=t,__reflect(t.prototype,"Sproto.sc_heji_skill_data_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_holygun_achievement_request=t,__reflect(t.prototype,"Sproto.cs_holygun_achievement_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.num&&this.se.wi(this.num,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_holygun_eatdanyao_request=i,__reflect(i.prototype,"Sproto.cs_holygun_eatdanyao_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_holygun_init_request=o,__reflect(o.prototype,"Sproto.cs_holygun_init_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_holygun_reward_request=s,__reflect(s.prototype,"Sproto.cs_holygun_reward_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_holygun_upscala_request=n,__reflect(n.prototype,"Sproto.cs_holygun_upscala_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.id&&this.se.wi(this.id,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_holygun_upskill_request=r,__reflect(r.prototype,"Sproto.cs_holygun_upskill_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.isAuto=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.isAuto&&this.se.wb(this.isAuto,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_holygun_upstar_request=a,__reflect(a.prototype,"Sproto.cs_holygun_upstar_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.num&&this.se.wi(this.num,1),this.se.Close()},t}(e.SprotoTypeBase);e.dan_info=t,__reflect(t.prototype,"Sproto.dan_info");var i=function(e){function i(t){return void 0===t&&(t=null),e.call(this,8,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.star=this.de.ri();break;case 2:this.exp=this.de.ri();break;case 3:this.scala=this.de.ri();break;case 4:this.power=this.de.ri();break;case 6:this.skill=this.de.roa(h);break;case 7:this.danyao=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.star&&this.se.wi(this.star,1),void 0!=this.exp&&this.se.wi(this.exp,2),void 0!=this.scala&&this.se.wi(this.scala,3),void 0!=this.power&&this.se.wi(this.power,4),void 0!=this.skill&&this.se.woa(this.skill,6),void 0!=this.danyao&&this.se.woa(this.danyao,7),this.se.Close()},i}(e.SprotoTypeBase);e.holygun_data=i,__reflect(i.prototype,"Sproto.holygun_data");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.wia(this.data,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_holygun_achievement_request=o,__reflect(o.prototype,"Sproto.sc_holygun_achievement_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.num&&this.se.wi(this.num,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_holygun_eatdanyao_request=s,__reflect(s.prototype,"Sproto.sc_holygun_eatdanyao_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_holygun_init_request=n,__reflect(n.prototype,"Sproto.sc_holygun_init_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.scala=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.scala&&this.se.wi(this.scala,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_holygun_upscala_request=r,__reflect(r.prototype,"Sproto.sc_holygun_upscala_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.level&&this.se.wi(this.level,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_holygun_upskill_request=a,__reflect(a.prototype,"Sproto.sc_holygun_upskill_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.star=this.de.ri();break;case 2:this.exp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.star&&this.se.wi(this.star,1),void 0!=this.exp&&this.se.wi(this.exp,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_holygun_upstar_request=l,__reflect(l.prototype,"Sproto.sc_holygun_upstar_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.skillid=this.de.ri();break;case 1:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.skillid&&this.se.wi(this.skillid,0),void 0!=this.level&&this.se.wi(this.level,1),this.se.Close()},t}(e.SprotoTypeBase);e.skillinfo=h,__reflect(h.prototype,"Sproto.skillinfo")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_jingmai_boost_request=t,__reflect(t.prototype,"Sproto.cs_jingmai_boost_request");var i=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.index=this.de.ri();break;case 1:this.data=this.de.ro(e.jingmai_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.data&&this.se.wo(this.data,1),this.se.Close()},i}(e.SprotoTypeBase);e.cs_jingmai_boost_response=i,__reflect(i.prototype,"Sproto.cs_jingmai_boost_response");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_jingmai_stage_request=o,__reflect(o.prototype,"Sproto.cs_jingmai_stage_request");var s=function(t){function i(e){return void 0===e&&(e=null),t.call(this,4,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.result=this.de.ri();break;case 1:this.type=this.de.ri();break;case 2:this.index=this.de.ri();break;case 3:this.data=this.de.ro(e.jingmai_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),void 0!=this.type&&this.se.wi(this.type,1),void 0!=this.index&&this.se.wi(this.index,2),void 0!=this.data&&this.se.wo(this.data,3),this.se.Close()},i}(e.SprotoTypeBase);e.cs_jingmai_stage_response=s,__reflect(s.prototype,"Sproto.cs_jingmai_stage_response");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_jingmai_upgrade_request=n,__reflect(n.prototype,"Sproto.cs_jingmai_upgrade_request");var r=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.index=this.de.ri();break;case 1:this.data=this.de.ro(e.jingmai_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.data&&this.se.wo(this.data,1),this.se.Close()},i}(e.SprotoTypeBase);e.cs_jingmai_upgrade_response=r,__reflect(r.prototype,"Sproto.cs_jingmai_upgrade_response")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.id&&this.se.wi(this.id,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ladder_start_play_request=t,__reflect(t.prototype,"Sproto.cs_ladder_start_play_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.player=this.de.rs();break;case 2:this.challgeLevel=this.de.ri();break;case 3:this.challgeId=this.de.ri();break;case 4:this.winNum=this.de.ri();break;case 5:this.job=this.de.ri();break;case 6:this.sex=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.player&&this.se.ws(this.player,1),void 0!=this.challgeLevel&&this.se.wi(this.challgeLevel,2),void 0!=this.challgeId&&this.se.wi(this.challgeId,3),void 0!=this.winNum&&this.se.wi(this.winNum,4),void 0!=this.job&&this.se.wi(this.job,5),void 0!=this.sex&&this.se.wi(this.sex,6),this.se.Close()},t}(e.SprotoTypeBase);e.rank_data_ladder=t,__reflect(t.prototype,"Sproto.rank_data_ladder");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,8,t)||this
}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.recordType=this.de.ri();break;case 1:this.isWin=this.de.ri();break;case 2:this.recordTime=this.de.ri();break;case 3:this.name=this.de.rs();break;case 4:this.power=this.de.ri();break;case 5:this.awardType=this.de.ri();break;case 6:this.zhuansheng_lv=this.de.ri();break;case 7:this.lv=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.recordType&&this.se.wi(this.recordType,0),void 0!=this.isWin&&this.se.wi(this.isWin,1),void 0!=this.recordTime&&this.se.wi(this.recordTime,2),void 0!=this.name&&this.se.ws(this.name,3),void 0!=this.power&&this.se.wi(this.power,4),void 0!=this.awardType&&this.se.wi(this.awardType,5),void 0!=this.zhuansheng_lv&&this.se.wi(this.zhuansheng_lv,6),void 0!=this.lv&&this.se.wi(this.lv,7),this.se.Close()},t}(e.SprotoTypeBase);e.record_data_ladder=i,__reflect(i.prototype,"Sproto.record_data_ladder");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.todayBuyTime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.todayBuyTime&&this.se.wi(this.todayBuyTime,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ladder_buy_count_request=o,__reflect(o.prototype,"Sproto.sc_ladder_buy_count_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.recordList=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.recordList&&this.se.woa(this.recordList,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ladder_get_record_request=s,__reflect(s.prototype,"Sproto.sc_ladder_get_record_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,13,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.isOpen=this.de.rb();break;case 1:this.level=this.de.ri();break;case 2:this.nowId=this.de.ri();break;case 3:this.challgeNum=this.de.ri();break;case 4:this.challgeCd=this.de.ri();break;case 5:this.winNum=this.de.ri();break;case 6:this.lianWin=this.de.rb();break;case 7:this.playUpTime=this.de.rb();break;case 8:this.isCanReward=this.de.rb();break;case 9:this.upLevel=this.de.ri();break;case 10:this.upId=this.de.ri();break;case 11:this.upWin=this.de.ri();break;case 12:this.rank=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.isOpen&&this.se.wb(this.isOpen,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.nowId&&this.se.wi(this.nowId,2),void 0!=this.challgeNum&&this.se.wi(this.challgeNum,3),void 0!=this.challgeCd&&this.se.wi(this.challgeCd,4),void 0!=this.winNum&&this.se.wi(this.winNum,5),void 0!=this.lianWin&&this.se.wb(this.lianWin,6),void 0!=this.playUpTime&&this.se.wb(this.playUpTime,7),void 0!=this.isCanReward&&this.se.wb(this.isCanReward,8),void 0!=this.upLevel&&this.se.wi(this.upLevel,9),void 0!=this.upId&&this.se.wi(this.upId,10),void 0!=this.upWin&&this.se.wi(this.upWin,11),void 0!=this.rank&&this.se.wi(this.rank,12),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ladder_info_request=n,__reflect(n.prototype,"Sproto.sc_ladder_info_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.rb();break;case 1:this.id=this.de.ri();break;case 2:this.name=this.de.rs();break;case 3:this.job=this.de.ri();break;case 4:this.sex=this.de.ri();break;case 5:this.level=this.de.ri();break;case 6:this.step=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wb(this.type,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.name&&this.se.ws(this.name,2),void 0!=this.job&&this.se.wi(this.job,3),void 0!=this.sex&&this.se.wi(this.sex,4),void 0!=this.level&&this.se.wi(this.level,5),void 0!=this.step&&this.se.wi(this.step,6),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ladder_player_back_request=r,__reflect(r.prototype,"Sproto.sc_ladder_player_back_request");var a=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.upWeekRank=this.de.ri();break;case 1:this.rankData=this.de.roa(t);break;case 2:this.upWeekRankList=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.upWeekRank&&this.se.wi(this.upWeekRank,0),void 0!=this.rankData&&this.se.woa(this.rankData,1),void 0!=this.upWeekRankList&&this.se.woa(this.upWeekRankList,2),this.se.Close()},i}(e.SprotoTypeBase);e.sc_ladder_rank_list_request=a,__reflect(a.prototype,"Sproto.sc_ladder_rank_list_request");var l=function(t){function i(e){return void 0===e&&(e=null),t.call(this,5,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.isWin=this.de.rb();break;case 1:this.rewardData=this.de.roa(e.reward_data);break;case 2:this.upLevel=this.de.ri();break;case 3:this.upId=this.de.ri();break;case 4:this.upStar=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.isWin&&this.se.wb(this.isWin,0),void 0!=this.rewardData&&this.se.woa(this.rewardData,1),void 0!=this.upLevel&&this.se.wi(this.upLevel,2),void 0!=this.upId&&this.se.wi(this.upId,3),void 0!=this.upStar&&this.se.wi(this.upStar,4),this.se.Close()},i}(e.SprotoTypeBase);e.sc_ladder_result_request=l,__reflect(l.prototype,"Sproto.sc_ladder_result_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleIndex=this.de.ri();break;case 1:this.legendDress=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleIndex&&this.se.wi(this.roleIndex,0),void 0!=this.legendDress&&this.se.wi(this.legendDress,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_legend_dress_request=t,__reflect(t.prototype,"Sproto.cs_legend_dress_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleIndex=this.de.ri();break;case 1:this.legendDress=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleIndex&&this.se.wi(this.roleIndex,0),void 0!=this.legendDress&&this.se.wi(this.legendDress,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_legend_dress_request=t,__reflect(t.prototype,"Sproto.sc_legend_dress_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.canUseYuanbao=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.canUseYuanbao&&this.se.wb(this.canUseYuanbao,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_longzhuang_boost_request=t,__reflect(t.prototype,"Sproto.cs_longzhuang_boost_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_longzhuang_onekey_request=i,__reflect(i.prototype,"Sproto.cs_longzhuang_onekey_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.id&&this.se.wi(this.id,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_longzhuang_upgrade_request=o,__reflect(o.prototype,"Sproto.cs_longzhuang_upgrade_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.star=this.de.ri();break;case 3:this.exp=this.de.ri();break;case 4:this.crit=this.de.ri();break;case 5:this.addExp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.star&&this.se.wi(this.star,2),void 0!=this.exp&&this.se.wi(this.exp,3),void 0!=this.crit&&this.se.wi(this.crit,4),void 0!=this.addExp&&this.se.wi(this.addExp,5),this.se.Close()},t}(e.SprotoTypeBase);e.sc_longzhuang_boost_ret_request=t,__reflect(t.prototype,"Sproto.sc_longzhuang_boost_ret_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.lv=this.de.ri();break;case 3:this.star=this.de.ri();break;case 4:this.exp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.lv&&this.se.wi(this.lv,2),void 0!=this.star&&this.se.wi(this.star,3),void 0!=this.exp&&this.se.wi(this.exp,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_longzhuang_upgrade_ret_request=i,__reflect(i.prototype,"Sproto.sc_longzhuang_upgrade_ret_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_luckypackage_testbuy_req_request=t,__reflect(t.prototype,"Sproto.cs_luckypackage_testbuy_req_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.time=this.de.ri();break;case 2:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.time&&this.se.wi(this.time,1),void 0!=this.num&&this.se.wi(this.num,2),this.se.Close()},t}(e.SprotoTypeBase);e.luckypackage_row=t,__reflect(t.prototype,"Sproto.luckypackage_row");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_luckypackage_active_res_request=i,__reflect(i.prototype,"Sproto.sc_luckypackage_active_res_request");var o=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.datas=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.datas&&this.se.woa(this.datas,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_luckypackage_res_request=o,__reflect(o.prototype,"Sproto.sc_luckypackage_res_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wia(this.handle,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_mail_delet_request=t,__reflect(t.prototype,"Sproto.cs_mail_delet_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_mail_get_content_request=i,__reflect(i.prototype,"Sproto.cs_mail_get_content_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wia(this.handle,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_mail_get_reward_request=o,__reflect(o.prototype,"Sproto.cs_mail_get_reward_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.pageIndex=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.pageIndex&&this.se.wi(this.pageIndex,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_mail_init_request=s,__reflect(s.prototype,"Sproto.cs_mail_init_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.title=this.de.rs();break;case 2:this.times=this.de.ri();break;case 3:this.type=this.de.ri();break;case 4:this.receive=this.de.ri();break;case 5:this.mailtype=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.title&&this.se.ws(this.title,1),void 0!=this.times&&this.se.wi(this.times,2),void 0!=this.type&&this.se.wi(this.type,3),void 0!=this.receive&&this.se.wi(this.receive,4),void 0!=this.mailtype&&this.se.wi(this.mailtype,5),this.se.Close()},t}(e.SprotoTypeBase);e.mail_data=t,__reflect(t.prototype,"Sproto.mail_data");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.type=this.de.ri();break;case 2:this.receive=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.type&&this.se.wi(this.type,1),void 0!=this.receive&&this.se.wi(this.receive,2),this.se.Close()},t}(e.SprotoTypeBase);e.mail_update_data=i,__reflect(i.prototype,"Sproto.mail_update_data");var o=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.mailData=this.de.ro(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.mailData&&this.se.wo(this.mailData,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_mail_add_info_request=o,__reflect(o.prototype,"Sproto.sc_mail_add_info_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wia(this.handle,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_mail_delete_request=s,__reflect(s.prototype,"Sproto.sc_mail_delete_request");var n=function(i){function o(e){return void 0===e&&(e=null),i.call(this,3,e)||this}return __extends(o,i),o.prototype.Decode=function(){for(var i=-1;-1!=(i=this.de.rt());)switch(i){case 0:this.mailData=this.de.ro(t);break;case 1:this.text=this.de.rs();break;case 2:this.rewardData=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},o.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.mailData&&this.se.wo(this.mailData,0),void 0!=this.text&&this.se.ws(this.text,1),void 0!=this.rewardData&&this.se.woa(this.rewardData,2),this.se.Close()},o}(e.SprotoTypeBase);e.sc_mail_detailed_info_request=n,__reflect(n.prototype,"Sproto.sc_mail_detailed_info_request");var r=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.mailData=this.de.roa(t);break;case 1:this.curPage=this.de.ri();break;case 2:this.maxPage=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.mailData&&this.se.woa(this.mailData,0),void 0!=this.curPage&&this.se.wi(this.curPage,1),void 0!=this.maxPage&&this.se.wi(this.maxPage,2),this.se.Close()},i}(e.SprotoTypeBase);e.sc_mail_init_info_request=r,__reflect(r.prototype,"Sproto.sc_mail_init_info_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.isHaveRedPoint=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.isHaveRedPoint&&this.se.wb(this.isHaveRedPoint,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_mail_red_point_request=a,__reflect(a.prototype,"Sproto.sc_mail_red_point_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.updateData=this.de.roa(i);break;case 1:this.showWarnBagSpace=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.updateData&&this.se.woa(this.updateData,0),void 0!=this.showWarnBagSpace&&this.se.wb(this.showWarnBagSpace,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_mail_update_info_request=l,__reflect(l.prototype,"Sproto.sc_mail_update_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_miji_fuben_request=t,__reflect(t.prototype,"Sproto.cs_miji_fuben_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_miji_fuben_panel_info_request=i,__reflect(i.prototype,"Sproto.cs_miji_fuben_panel_info_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.rate=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.rate&&this.se.wi(this.rate,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_miji_fuben_quick_request=o,__reflect(o.prototype,"Sproto.cs_miji_fuben_quick_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.rate=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.rate&&this.se.wi(this.rate,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_miji_fuben_reward_request=s,__reflect(s.prototype,"Sproto.cs_miji_fuben_reward_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_miji_reward_data_request=n,__reflect(n.prototype,"Sproto.cs_miji_reward_data_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.mijiID=this.de.ri();break;case 1:this.mijiID1=this.de.ri();break;case 2:this.mijiID2=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.mijiID&&this.se.wi(this.mijiID,0),void 0!=this.mijiID1&&this.se.wi(this.mijiID1,1),void 0!=this.mijiID2&&this.se.wi(this.mijiID2,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_miji_change_request=r,__reflect(r.prototype,"Sproto.sc_miji_change_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;case 1:this.mijiID=this.de.ri();break;case 2:this.gridID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.mijiID&&this.se.wi(this.mijiID,1),void 0!=this.gridID&&this.se.wi(this.gridID,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_miji_learn_request=a,__reflect(a.prototype,"Sproto.sc_miji_learn_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.mijiID=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.mijiID&&this.se.wia(this.mijiID,0),this.se.Close()},t}(e.SprotoTypeBase);e.mijiData=t,__reflect(t.prototype,"Sproto.mijiData");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleIndex=this.de.ri();break;case 1:this.power=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleIndex&&this.se.wi(this.roleIndex,0),void 0!=this.power&&this.se.wi(this.power,1),this.se.Close()},t}(e.SprotoTypeBase);e.mijiPowerData=i,__reflect(i.prototype,"Sproto.mijiPowerData");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.itemID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.itemID&&this.se.wi(this.itemID,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_miji_change_result_request=o,__reflect(o.prototype,"Sproto.sc_miji_change_result_request");var s=function(e){function i(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.grid=this.de.ri();break;case 1:this.mijiDatas=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.grid&&this.se.wi(this.grid,0),void 0!=this.mijiDatas&&this.se.woa(this.mijiDatas,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_miji_datas_request=s,__reflect(s.prototype,"Sproto.sc_miji_datas_request");var n=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 1:this.reward=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.reward&&this.se.woa(this.reward,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_miji_fuben_award_request=n,__reflect(n.prototype,"Sproto.sc_miji_fuben_award_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.sc_miji_fuben_award_resulte_request=r,__reflect(r.prototype,"Sproto.sc_miji_fuben_award_resulte_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.status=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.status&&this.se.wi(this.status,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_miji_fuben_enter_ret_request=a,__reflect(a.prototype,"Sproto.sc_miji_fuben_enter_ret_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.star=this.de.ri();break;case 2:this.nextId=this.de.ri();break;case 3:this.status=this.de.ri();break;case 4:this.quickid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.star&&this.se.wi(this.star,1),void 0!=this.nextId&&this.se.wi(this.nextId,2),void 0!=this.status&&this.se.wi(this.status,3),void 0!=this.quickid&&this.se.wi(this.quickid,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_miji_fuben_finished_request=l,__reflect(l.prototype,"Sproto.sc_miji_fuben_finished_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.star=this.de.ri();break;case 2:this.sec=this.de.ri();break;case 3:this.quickcount=this.de.ri();break;case 4:this.rewardid=this.de.ri();break;case 5:this.quickid=this.de.ri();break;case 6:this.todayCanChallengeCount=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.star&&this.se.wi(this.star,1),void 0!=this.sec&&this.se.wi(this.sec,2),void 0!=this.quickcount&&this.se.wi(this.quickcount,3),void 0!=this.rewardid&&this.se.wi(this.rewardid,4),void 0!=this.quickid&&this.se.wi(this.quickid,5),void 0!=this.todayCanChallengeCount&&this.se.wi(this.todayCanChallengeCount,6),this.se.Close()},t}(e.SprotoTypeBase);e.sc_miji_fuben_panel_info_request=h,__reflect(h.prototype,"Sproto.sc_miji_fuben_panel_info_request");var c=function(t){function i(e){return void 0===e&&(e=null),t.call(this,3,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.status=this.de.ri();break;case 1:this.rewards=this.de.roa(e.reward_data);break;case 2:this.quickcount=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.status&&this.se.wi(this.status,0),void 0!=this.rewards&&this.se.woa(this.rewards,1),void 0!=this.quickcount&&this.se.wi(this.quickcount,2),this.se.Close()},i}(e.SprotoTypeBase);e.sc_miji_fuben_quick_info_request=c,__reflect(c.prototype,"Sproto.sc_miji_fuben_quick_info_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.power=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.power&&this.se.woa(this.power,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_miji_power_change_request=u,__reflect(u.prototype,"Sproto.sc_miji_power_change_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;case 1:this.index=this.de.ri();break;case 2:this.mijiID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.index&&this.se.wi(this.index,1),void 0!=this.mijiID&&this.se.wi(this.mijiID,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_miji_update_request=d,__reflect(d.prototype,"Sproto.sc_miji_update_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.mapIndex=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.mapIndex&&this.se.wi(this.mapIndex,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_mine_mapdata_request=t,__reflect(t.prototype,"Sproto.cs_mine_mapdata_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_mine_report_mine_info_request=i,__reflect(i.prototype,"Sproto.cs_mine_report_mine_info_request");
var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.acId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.acId&&this.se.wi(this.acId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_mine_revenge_request=o,__reflect(o.prototype,"Sproto.cs_mine_revenge_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.acId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.acId&&this.se.wi(this.acId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_mine_rob_request=s,__reflect(s.prototype,"Sproto.cs_mine_rob_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.acId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.acId&&this.se.wi(this.acId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_mine_steal_request=n,__reflect(n.prototype,"Sproto.cs_mine_steal_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,11,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dbid=this.de.ri();break;case 1:this.actorName=this.de.rs();break;case 2:this.guildName=this.de.rs();break;case 3:this.mineType=this.de.ri();break;case 4:this.overTime=this.de.ri();break;case 5:this.fightPow=this.de.ri();break;case 6:this.robStatus=this.de.rb();break;case 7:this.berobotcount=this.de.ri();break;case 8:this.mainEle=this.de.ri();break;case 9:this.job=this.de.ri();break;case 10:this.sex=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dbid&&this.se.wi(this.dbid,0),void 0!=this.actorName&&this.se.ws(this.actorName,1),void 0!=this.guildName&&this.se.ws(this.guildName,2),void 0!=this.mineType&&this.se.wi(this.mineType,3),void 0!=this.overTime&&this.se.wi(this.overTime,4),void 0!=this.fightPow&&this.se.wi(this.fightPow,5),void 0!=this.robStatus&&this.se.wb(this.robStatus,6),void 0!=this.berobotcount&&this.se.wi(this.berobotcount,7),void 0!=this.mainEle&&this.se.wi(this.mainEle,8),void 0!=this.job&&this.se.wi(this.job,9),void 0!=this.sex&&this.se.wi(this.sex,10),this.se.Close()},t}(e.SprotoTypeBase);e.mine_map_info=t,__reflect(t.prototype,"Sproto.mine_map_info");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,9,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.robIndex=this.de.ri();break;case 1:this.mineType=this.de.ri();break;case 2:this.roberId=this.de.ri();break;case 3:this.roberName=this.de.rs();break;case 4:this.robTime=this.de.ri();break;case 5:this.robResult=this.de.rb();break;case 6:this.type=this.de.ri();break;case 7:this.isRevenge=this.de.rb();break;case 8:this.fightPow=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.robIndex&&this.se.wi(this.robIndex,0),void 0!=this.mineType&&this.se.wi(this.mineType,1),void 0!=this.roberId&&this.se.wi(this.roberId,2),void 0!=this.roberName&&this.se.ws(this.roberName,3),void 0!=this.robTime&&this.se.wi(this.robTime,4),void 0!=this.robResult&&this.se.wb(this.robResult,5),void 0!=this.type&&this.se.wi(this.type,6),void 0!=this.isRevenge&&this.se.wb(this.isRevenge,7),void 0!=this.fightPow&&this.se.wi(this.fightPow,8),this.se.Close()},t}(e.SprotoTypeBase);e.mine_record_info=i,__reflect(i.prototype,"Sproto.mine_record_info");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.win=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.win&&this.se.wb(this.win,1),this.se.Close()},t}(e.SprotoTypeBase);e.robInfo=o,__reflect(o.prototype,"Sproto.robInfo");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.doubleTime=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.doubleTime&&this.se.wb(this.doubleTime,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_double_mining_notice_request=s,__reflect(s.prototype,"Sproto.sc_double_mining_notice_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.mineRecordList=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.mineRecordList&&this.se.woa(this.mineRecordList,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_mine_berob_record_request=n,__reflect(n.prototype,"Sproto.sc_mine_berob_record_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,10,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.exploitCnt=this.de.ri();break;case 1:this.robCnt=this.de.ri();break;case 2:this.exploitType=this.de.ri();break;case 3:this.exploitOverTime=this.de.ri();break;case 4:this.refreshType=this.de.ri();break;case 5:this.refreshCnt=this.de.ri();break;case 6:this.exploitStatus=this.de.ri();break;case 7:this.beRobInfos=this.de.roa(o);break;case 8:this.stealCnt=this.de.ri();break;case 9:this.isDoublereward=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.exploitCnt&&this.se.wi(this.exploitCnt,0),void 0!=this.robCnt&&this.se.wi(this.robCnt,1),void 0!=this.exploitType&&this.se.wi(this.exploitType,2),void 0!=this.exploitOverTime&&this.se.wi(this.exploitOverTime,3),void 0!=this.refreshType&&this.se.wi(this.refreshType,4),void 0!=this.refreshCnt&&this.se.wi(this.refreshCnt,5),void 0!=this.exploitStatus&&this.se.wi(this.exploitStatus,6),void 0!=this.beRobInfos&&this.se.woa(this.beRobInfos,7),void 0!=this.stealCnt&&this.se.wi(this.stealCnt,8),void 0!=this.isDoublereward&&this.se.wb(this.isDoublereward,9),this.se.Close()},t}(e.SprotoTypeBase);e.sc_mine_info_request=r,__reflect(r.prototype,"Sproto.sc_mine_info_request");var a=function(e){function i(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.mineMapNum=this.de.ri();break;case 1:this.curIndex=this.de.ri();break;case 4:this.mapMineList=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.mineMapNum&&this.se.wi(this.mineMapNum,0),void 0!=this.curIndex&&this.se.wi(this.curIndex,1),void 0!=this.mapMineList&&this.se.woa(this.mapMineList,4),this.se.Close()},i}(e.SprotoTypeBase);e.sc_mine_map_info_request=a,__reflect(a.prototype,"Sproto.sc_mine_map_info_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.rb();break;case 1:this.mineType=this.de.ri();break;case 2:this.refreshNum=this.de.ri();break;case 3:this.costNum=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wb(this.result,0),void 0!=this.mineType&&this.se.wi(this.mineType,1),void 0!=this.refreshNum&&this.se.wi(this.refreshNum,2),void 0!=this.costNum&&this.se.wi(this.costNum,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_mine_refresh_result_request=l,__reflect(l.prototype,"Sproto.sc_mine_refresh_result_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.countdown=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.countdown&&this.se.wi(this.countdown,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_steal_mine_fight_notice_request=h,__reflect(h.prototype,"Sproto.sc_steal_mine_fight_notice_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_fieldexp_buff_apply_req_request=t,__reflect(t.prototype,"Sproto.cs_fieldexp_buff_apply_req_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_fieldexp_buff_finish_req_request=i,__reflect(i.prototype,"Sproto.cs_fieldexp_buff_finish_req_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_fieldexp_buff_req_request=o,__reflect(o.prototype,"Sproto.cs_fieldexp_buff_req_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_funopen_close_req_request=s,__reflect(s.prototype,"Sproto.cs_funopen_close_req_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_online_req_request=n,__reflect(n.prototype,"Sproto.cs_online_req_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_online_reward_req_request=r,__reflect(r.prototype,"Sproto.cs_online_reward_req_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.wia(this.data,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_fieldexp_buff_res_request=t,__reflect(t.prototype,"Sproto.sc_fieldexp_buff_res_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.time=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.time&&this.se.wi(this.time,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_fuben_coutdown_request=i,__reflect(i.prototype,"Sproto.sc_fuben_coutdown_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wia(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_funopen_res_request=o,__reflect(o.prototype,"Sproto.sc_funopen_res_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.online=this.de.ri();break;case 1:this.data=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.online&&this.se.wi(this.online,0),void 0!=this.data&&this.se.wia(this.data,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_online_res_request=s,__reflect(s.prototype,"Sproto.sc_online_res_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ret=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ret&&this.se.wi(this.ret,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_online_reward_res_request=n,__reflect(n.prototype,"Sproto.sc_online_reward_res_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.day=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.day&&this.se.wi(this.day,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_money_recharge_get_request=t,__reflect(t.prototype,"Sproto.cs_money_recharge_get_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_money_tree_reward_request=i,__reflect(i.prototype,"Sproto.cs_money_tree_reward_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.day=this.de.ri();break;case 1:this.awards=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.day&&this.se.wi(this.day,0),void 0!=this.awards&&this.se.wia(this.awards,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_money_recharge_gift_info_request=t,__reflect(t.prototype,"Sproto.sc_money_recharge_gift_info_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.playNum=this.de.ri();break;case 1:this.boxOn=this.de.ri();break;case 2:this.addCoefficient=this.de.ri();break;case 3:this.exp=this.de.ri();break;case 4:this.boxInfo=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.playNum&&this.se.wi(this.playNum,0),void 0!=this.boxOn&&this.se.wi(this.boxOn,1),void 0!=this.addCoefficient&&this.se.wi(this.addCoefficient,2),void 0!=this.exp&&this.se.wi(this.exp,3),void 0!=this.boxInfo&&this.se.wi(this.boxInfo,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_money_tree_info_request=i,__reflect(i.prototype,"Sproto.sc_money_tree_info_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.playNum=this.de.ri();break;case 1:this.boxOn=this.de.ri();break;case 2:this.addCoefficient=this.de.ri();break;case 3:this.exp=this.de.ri();break;case 4:this.baoji=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.playNum&&this.se.wi(this.playNum,0),void 0!=this.boxOn&&this.se.wi(this.boxOn,1),void 0!=this.addCoefficient&&this.se.wi(this.addCoefficient,2),void 0!=this.exp&&this.se.wi(this.exp,3),void 0!=this.baoji&&this.se.wi(this.baoji,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_money_tree_play_info_request=o,__reflect(o.prototype,"Sproto.sc_money_tree_play_info_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.boxInfo=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.boxInfo&&this.se.wi(this.boxInfo,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_money_tree_reward_info_request=s,__reflect(s.prototype,"Sproto.sc_money_tree_reward_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.typ=this.de.ri();break;case 1:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.typ&&this.se.wi(this.typ,0),void 0!=this.num&&this.se.wi(this.num,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_monopoly_buy_req_request=t,__reflect(t.prototype,"Sproto.cs_monopoly_buy_req_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.num&&this.se.wi(this.num,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_monopoly_cheat_req_request=i,__reflect(i.prototype,"Sproto.cs_monopoly_cheat_req_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.typ=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.typ&&this.se.wi(this.typ,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_monopoly_dice_req_request=o,__reflect(o.prototype,"Sproto.cs_monopoly_dice_req_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.itemid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.itemid&&this.se.wi(this.itemid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_monopoly_exchange_req_request=s,__reflect(s.prototype,"Sproto.cs_monopoly_exchange_req_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_monopoly_fire_req_request=n,__reflect(n.prototype,"Sproto.cs_monopoly_fire_req_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_monopoly_raid_open_request=r,__reflect(r.prototype,"Sproto.cs_monopoly_raid_open_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_monopoly_rank_req_request=a,__reflect(a.prototype,"Sproto.cs_monopoly_rank_req_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_monopoly_req_request=l,__reflect(l.prototype,"Sproto.cs_monopoly_req_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_monopoly_store_req_request=h,__reflect(h.prototype,"Sproto.cs_monopoly_store_req_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_monopoly_tili_req_request=c,__reflect(c.prototype,"Sproto.cs_monopoly_tili_req_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_monopoly_use_req_request=u,__reflect(u.prototype,"Sproto.cs_monopoly_use_req_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.items=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.items&&this.se.woa(this.items,0),this.se.Close()},t}(e.SprotoTypeBase);e.monopoly_buff=t,__reflect(t.prototype,"Sproto.monopoly_buff");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.num&&this.se.wi(this.num,1),this.se.Close()},t}(e.SprotoTypeBase);e.monopoly_item=i,__reflect(i.prototype,"Sproto.monopoly_item");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.num=this.de.ri();break;case 2:this.reason=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.num&&this.se.wi(this.num,1),void 0!=this.reason&&this.se.wi(this.reason,2),this.se.Close()},t}(e.SprotoTypeBase);e.monopoly_log_item=o,__reflect(o.prototype,"Sproto.monopoly_log_item");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.guild=this.de.rs();break;case 2:this.lvl=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.guild&&this.se.ws(this.guild,1),void 0!=this.lvl&&this.se.wi(this.lvl,2),this.se.Close()},t}(e.SprotoTypeBase);e.monopoly_rank_item=s,__reflect(s.prototype,"Sproto.monopoly_rank_item");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.typ=this.de.ri();break;case 1:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.typ&&this.se.wi(this.typ,0),void 0!=this.num&&this.se.wi(this.num,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_monopoly_buy_res_request=n,__reflect(n.prototype,"Sproto.sc_monopoly_buy_res_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.num=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.num&&this.se.wia(this.num,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_monopoly_dice_res_request=r,__reflect(r.prototype,"Sproto.sc_monopoly_dice_res_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_monopoly_exchange_res_request=a,__reflect(a.prototype,"Sproto.sc_monopoly_exchange_res_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_monopoly_getitem_res_request=l,__reflect(l.prototype,"Sproto.sc_monopoly_getitem_res_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.num=this.de.ri();break;case 2:this.reason=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.num&&this.se.wi(this.num,1),void 0!=this.reason&&this.se.wi(this.reason,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_monopoly_log_res_request=h,__reflect(h.prototype,"Sproto.sc_monopoly_log_res_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.grid=this.de.roa(i);break;case 1:this.curnum=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.grid&&this.se.woa(this.grid,0),void 0!=this.curnum&&this.se.wi(this.curnum,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_monopoly_nextlvl_res_request=c,__reflect(c.prototype,"Sproto.sc_monopoly_nextlvl_res_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.roa(s);break;case 1:this.rank=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),void 0!=this.rank&&this.se.wi(this.rank,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_monopoly_rank_res_request=u,__reflect(u.prototype,"Sproto.sc_monopoly_rank_res_request");var d=function(e){function s(t){return void 0===t&&(t=null),e.call(this,19,t)||this}return __extends(s,e),s.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.grid=this.de.roa(i);break;case 1:this.level=this.de.ri();break;case 2:this.tili=this.de.ri();break;case 3:this.blood=this.de.ri();break;case 4:this.pos=this.de.ri();break;case 5:this.jifen=this.de.ri();break;case 6:this.cheat=this.de.ri();break;case 7:this["double"]=this.de.ri();break;case 8:this.triple=this.de.ri();break;case 9:this.curnum=this.de.ri();break;case 10:this.useItem=this.de.roa(t);break;case 11:this.bag=this.de.roa(i);break;case 12:this.log=this.de.roa(o);break;case 13:this.randpos=this.de.ri();break;case 14:this.maxblood=this.de.ri();break;case 15:this.doublegm=this.de.ri();break;case 16:this.triplegm=this.de.ri();break;case 17:this.cheatgm=this.de.ri();break;case 18:this.tiligm=this.de.ri();break;default:this.de.ReadUnknowData()}},s.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.grid&&this.se.woa(this.grid,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.tili&&this.se.wi(this.tili,2),void 0!=this.blood&&this.se.wi(this.blood,3),void 0!=this.pos&&this.se.wi(this.pos,4),void 0!=this.jifen&&this.se.wi(this.jifen,5),void 0!=this.cheat&&this.se.wi(this.cheat,6),void 0!=this["double"]&&this.se.wi(this["double"],7),void 0!=this.triple&&this.se.wi(this.triple,8),void 0!=this.curnum&&this.se.wi(this.curnum,9),void 0!=this.useItem&&this.se.woa(this.useItem,10),void 0!=this.bag&&this.se.woa(this.bag,11),void 0!=this.log&&this.se.woa(this.log,12),void 0!=this.randpos&&this.se.wi(this.randpos,13),void 0!=this.maxblood&&this.se.wi(this.maxblood,14),void 0!=this.doublegm&&this.se.wi(this.doublegm,15),void 0!=this.triplegm&&this.se.wi(this.triplegm,16),void 0!=this.cheatgm&&this.se.wi(this.cheatgm,17),void 0!=this.tiligm&&this.se.wi(this.tiligm,18),this.se.Close()},s}(e.SprotoTypeBase);e.sc_monopoly_res_request=d,__reflect(d.prototype,"Sproto.sc_monopoly_res_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.roa(i);break;case 1:this.theme=this.de.ri();break;case 2:this.extotal=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),void 0!=this.theme&&this.se.wi(this.theme,1),void 0!=this.extotal&&this.se.wi(this.extotal,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_monopoly_store_res_request=p,__reflect(p.prototype,"Sproto.sc_monopoly_store_res_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();
break;case 1:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.value&&this.se.wi(this.value,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_monopoly_sync_res_request=f,__reflect(f.prototype,"Sproto.sc_monopoly_sync_res_request");var g=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_monopoly_tili_res_request=g,__reflect(g.prototype,"Sproto.sc_monopoly_tili_res_request");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_monopoly_use_res_request=_,__reflect(_.prototype,"Sproto.sc_monopoly_use_res_request");var m=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_monopoly_usespecial_res_request=m,__reflect(m.prototype,"Sproto.sc_monopoly_usespecial_res_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_neigong_info_request=t,__reflect(t.prototype,"Sproto.cs_neigong_info_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_neigong_uppro_request=i,__reflect(i.prototype,"Sproto.cs_neigong_uppro_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_neigong_upstar_request=o,__reflect(o.prototype,"Sproto.cs_neigong_upstar_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.progress=this.de.ri();break;case 1:this.starLv=this.de.ri();break;case 2:this.roleid=this.de.ri();break;case 3:this.jindu=this.de.ri();break;case 4:this.power=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.progress&&this.se.wi(this.progress,0),void 0!=this.starLv&&this.se.wi(this.starLv,1),void 0!=this.roleid&&this.se.wi(this.roleid,2),void 0!=this.jindu&&this.se.wi(this.jindu,3),void 0!=this.power&&this.se.wi(this.power,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_neigong_info_request=t,__reflect(t.prototype,"Sproto.sc_neigong_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.str=this.de.rs();break;case 2:this.time=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.str&&this.se.ws(this.str,1),void 0!=this.time&&this.se.wi(this.time,2),this.se.Close()},t}(e.SprotoTypeBase);e.notice_records=t,__reflect(t.prototype,"Sproto.notice_records");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.str=this.de.rs();break;case 2:this.isNew=this.de.ri();break;case 3:this.time=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.str&&this.se.ws(this.str,1),void 0!=this.isNew&&this.se.wi(this.isNew,2),void 0!=this.time&&this.se.wi(this.time,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_notice_request=i,__reflect(i.prototype,"Sproto.sc_notice_request");var o=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.records=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.records&&this.se.woa(this.records,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_notice_records_request=o,__reflect(o.prototype,"Sproto.sc_notice_records_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_one_gift_buy_test_request=t,__reflect(t.prototype,"Sproto.cs_one_gift_buy_test_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_one_gift_rewards_request=i,__reflect(i.prototype,"Sproto.cs_one_gift_rewards_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;case 1:this.num=this.de.ri();break;case 2:this.statu=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.num&&this.se.wi(this.num,1),void 0!=this.statu&&this.se.wi(this.statu,2),this.se.Close()},t}(e.SprotoTypeBase);e.gift_base=t,__reflect(t.prototype,"Sproto.gift_base");var i=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.list=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.list&&this.se.woa(this.list,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_one_gift_request=i,__reflect(i.prototype,"Sproto.sc_one_gift_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_activate_req_request=t,__reflect(t.prototype,"Sproto.cs_pet_activate_req_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_attach_init_req_request=i,__reflect(i.prototype,"Sproto.cs_pet_attach_init_req_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.petid=this.de.ri();break;case 2:this.slot=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.petid&&this.se.wi(this.petid,1),void 0!=this.slot&&this.se.wi(this.slot,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_attach_req_request=o,__reflect(o.prototype,"Sproto.cs_pet_attach_req_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.slot=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.slot&&this.se.wi(this.slot,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_attach_unlock_req_request=s,__reflect(s.prototype,"Sproto.cs_pet_attach_unlock_req_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.itemid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.itemid&&this.se.wi(this.itemid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_compose_req_request=n,__reflect(n.prototype,"Sproto.cs_pet_compose_req_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_init_req_request=r,__reflect(r.prototype,"Sproto.cs_pet_init_req_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_pack_req_request=a,__reflect(a.prototype,"Sproto.cs_pet_pack_req_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;case 1:this.name=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),void 0!=this.name&&this.se.ws(this.name,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_rename_req_request=l,__reflect(l.prototype,"Sproto.cs_pet_rename_req_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;case 1:this.roleid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),void 0!=this.roleid&&this.se.wi(this.roleid,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_setfight_req_request=h,__reflect(h.prototype,"Sproto.cs_pet_setfight_req_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;case 1:this.isAuto=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),void 0!=this.isAuto&&this.se.wb(this.isAuto,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_skillup_req_request=c,__reflect(c.prototype,"Sproto.cs_pet_skillup_req_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handler=this.de.ri();break;case 1:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handler&&this.se.wi(this.handler,0),void 0!=this.num&&this.se.wi(this.num,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_smelt_req_request=u,__reflect(u.prototype,"Sproto.cs_pet_smelt_req_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;case 1:this.isAuto=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),void 0!=this.isAuto&&this.se.wb(this.isAuto,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_uplevel_req_request=d,__reflect(d.prototype,"Sproto.cs_pet_uplevel_req_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_upstar_req_request=p,__reflect(p.prototype,"Sproto.cs_pet_upstar_req_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_wake_req_request=f,__reflect(f.prototype,"Sproto.cs_pet_wake_req_request");var g=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;case 1:this.isAuto=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),void 0!=this.isAuto&&this.se.wb(this.isAuto,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_wash_req_request=g,__reflect(g.prototype,"Sproto.cs_pet_wash_req_request");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;case 1:this.skillid=this.de.ri();break;case 2:this.status=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),void 0!=this.skillid&&this.se.wi(this.skillid,1),void 0!=this.status&&this.se.wb(this.status,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_washlock_req_request=_,__reflect(_.prototype,"Sproto.cs_pet_washlock_req_request");var m=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_pet_washrep_req_request=m,__reflect(m.prototype,"Sproto.cs_pet_washrep_req_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.petid=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.petid&&this.se.wia(this.petid,1),this.se.Close()},t}(e.SprotoTypeBase);e.pet_attch_data=t,__reflect(t.prototype,"Sproto.pet_attch_data");var i=function(t){function i(e){return void 0===e&&(e=null),t.call(this,12,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.petid=this.de.ri();break;case 1:this.name=this.de.rs();break;case 2:this.level=this.de.ri();break;case 3:this.exp=this.de.ri();break;case 4:this.star=this.de.ri();break;case 5:this.power=this.de.ri();break;case 6:this.attr=this.de.roa(e.attribute_data);break;case 7:this.skill=this.de.ri();break;case 8:this.bskill=this.de.ria();break;case 9:this.wash=this.de.ria();break;case 10:this.lock=this.de.ria();break;case 11:this.awake=this.de.rb();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),void 0!=this.name&&this.se.ws(this.name,1),void 0!=this.level&&this.se.wi(this.level,2),void 0!=this.exp&&this.se.wi(this.exp,3),void 0!=this.star&&this.se.wi(this.star,4),void 0!=this.power&&this.se.wi(this.power,5),void 0!=this.attr&&this.se.woa(this.attr,6),void 0!=this.skill&&this.se.wi(this.skill,7),void 0!=this.bskill&&this.se.wia(this.bskill,8),void 0!=this.wash&&this.se.wia(this.wash,9),void 0!=this.lock&&this.se.wia(this.lock,10),void 0!=this.awake&&this.se.wb(this.awake,11),this.se.Close()},i}(e.SprotoTypeBase);e.pet_data=i,__reflect(i.prototype,"Sproto.pet_data");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pet_activate_res_request=o,__reflect(o.prototype,"Sproto.sc_pet_activate_res_request");var s=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_pet_attach_init_res_request=s,__reflect(s.prototype,"Sproto.sc_pet_attach_init_res_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.petid=this.de.ri();break;case 2:this.slot=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.petid&&this.se.wi(this.petid,1),void 0!=this.slot&&this.se.wi(this.slot,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pet_attach_res_request=n,__reflect(n.prototype,"Sproto.sc_pet_attach_res_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.slot=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.slot&&this.se.wi(this.slot,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pet_attach_unlock_res_request=r,__reflect(r.prototype,"Sproto.sc_pet_attach_unlock_res_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handler=this.de.ri();break;case 1:this.attr=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handler&&this.se.wi(this.handler,0),void 0!=this.attr&&this.se.wia(this.attr,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pet_attr_res_request=a,__reflect(a.prototype,"Sproto.sc_pet_attr_res_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.itemid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.itemid&&this.se.wi(this.itemid,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pet_compose_res_request=l,__reflect(l.prototype,"Sproto.sc_pet_compose_res_request");var h=function(t){function o(e){return void 0===e&&(e=null),t.call(this,4,e)||this}return __extends(o,t),o.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.data=this.de.roa(i);break;case 1:this.star=this.de.ri();break;case 2:this.attr=this.de.roa(e.attribute_data);break;case 3:this.petlist=this.de.ria();break;default:this.de.ReadUnknowData()}},o.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),void 0!=this.star&&this.se.wi(this.star,1),void 0!=this.attr&&this.se.woa(this.attr,2),void 0!=this.petlist&&this.se.wia(this.petlist,3),this.se.Close()},o}(e.SprotoTypeBase);e.sc_pet_init_res_request=h,__reflect(h.prototype,"Sproto.sc_pet_init_res_request");var c=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.star=this.de.ri();break;case 1:this.attr=this.de.roa(e.attribute_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.star&&this.se.wi(this.star,0),void 0!=this.attr&&this.se.woa(this.attr,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_pet_pack_res_request=c,__reflect(c.prototype,"Sproto.sc_pet_pack_res_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;case 1:this.petid=this.de.ri();break;case 2:this.name=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),void 0!=this.petid&&this.se.wi(this.petid,1),void 0!=this.name&&this.se.ws(this.name,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pet_rename_res_request=u,__reflect(u.prototype,"Sproto.sc_pet_rename_res_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;case 1:this.result=this.de.ri();break;case 2:this.roleid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),void 0!=this.result&&this.se.wi(this.result,1),void 0!=this.roleid&&this.se.wi(this.roleid,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pet_setfight_res_request=d,__reflect(d.prototype,"Sproto.sc_pet_setfight_res_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;case 1:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),void 0!=this.result&&this.se.wi(this.result,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pet_skillup_res_request=p,__reflect(p.prototype,"Sproto.sc_pet_skillup_res_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handler=this.de.ri();break;case 1:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handler&&this.se.wi(this.handler,0),void 0!=this.num&&this.se.wi(this.num,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pet_smelt_res_request=f,__reflect(f.prototype,"Sproto.sc_pet_smelt_res_request");var g=function(t){function i(e){return void 0===e&&(e=null),t.call(this,3,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.petid=this.de.ri();break;case 1:this.power=this.de.ri();break;case 2:this.attr=this.de.roa(e.attribute_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),void 0!=this.power&&this.se.wi(this.power,1),void 0!=this.attr&&this.se.woa(this.attr,2),this.se.Close()},i}(e.SprotoTypeBase);e.sc_pet_sync_attr_request=g,__reflect(g.prototype,"Sproto.sc_pet_sync_attr_request");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;case 1:this.level=this.de.ri();break;case 2:this.exp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.exp&&this.se.wi(this.exp,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pet_uplevel_res_request=_,__reflect(_.prototype,"Sproto.sc_pet_uplevel_res_request");var m=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;case 1:this.star=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),void 0!=this.star&&this.se.wi(this.star,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pet_upstar_res_request=m,__reflect(m.prototype,"Sproto.sc_pet_upstar_res_request");var v=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pet_wake_res_request=v,__reflect(v.prototype,"Sproto.sc_pet_wake_res_request");var y=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;case 1:this.wash=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),void 0!=this.wash&&this.se.wia(this.wash,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pet_wash_res_request=y,__reflect(y.prototype,"Sproto.sc_pet_wash_res_request");var b=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;case 1:this.skillid=this.de.ri();break;case 2:this.status=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),void 0!=this.skillid&&this.se.wi(this.skillid,1),void 0!=this.status&&this.se.wb(this.status,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pet_washlock_res_request=b,__reflect(b.prototype,"Sproto.sc_pet_washlock_res_request");var C=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petid=this.de.ri();break;case 1:this.bskill=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petid&&this.se.wi(this.petid,0),void 0!=this.bskill&&this.se.wia(this.bskill,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pet_washrep_res_request=C,__reflect(C.prototype,"Sproto.sc_pet_washrep_res_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_petsSearch_hunt_request=t,__reflect(t.prototype,"Sproto.cs_petsSearch_hunt_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.petsSearch_item=t,__reflect(t.prototype,"Sproto.petsSearch_item");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.itemid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.itemid&&this.se.wi(this.itemid,1),this.se.Close()},t}(e.SprotoTypeBase);e.petsSearch_record=i,__reflect(i.prototype,"Sproto.petsSearch_record");var o=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.items=this.de.roa(t);
break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.items&&this.se.woa(this.items,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_petsSearch_hunt_result_request=o,__reflect(o.prototype,"Sproto.sc_petsSearch_hunt_result_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.petsSearchRecord=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.petsSearchRecord&&this.se.woa(this.petsSearchRecord,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_petsSearch_record_request=s,__reflect(s.prototype,"Sproto.sc_petsSearch_record_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_prestige_uplevel_request=t,__reflect(t.prototype,"Sproto.cs_prestige_uplevel_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(t){function i(e){return void 0===e&&(e=null),t.call(this,3,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 2:this.actorData=this.de.ro(e.actor_base_data);break;case 3:this.subRole=this.de.roa(e.rank_subrole);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorData&&this.se.wo(this.actorData,2),void 0!=this.subRole&&this.se.woa(this.subRole,3),this.se.Close()},i}(e.SprotoTypeBase);e.prestige_rank_data=t,__reflect(t.prototype,"Sproto.prestige_rank_data");var i=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actorList=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorList&&this.se.woa(this.actorList,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_prestige_rank_topthree_request=i,__reflect(i.prototype,"Sproto.sc_prestige_rank_topthree_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_prestige_uplevel_result_request=o,__reflect(o.prototype,"Sproto.sc_prestige_uplevel_result_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_cross_boss_challenge_request=t,__reflect(t.prototype,"Sproto.cs_cross_boss_challenge_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_paidboss_fight_req_request=i,__reflect(i.prototype,"Sproto.cs_paidboss_fight_req_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_paidboss_req_request=o,__reflect(o.prototype,"Sproto.cs_paidboss_req_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.bossAutoFight=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.bossAutoFight&&this.se.wi(this.bossAutoFight,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_paidboss_setting_req_request=s,__reflect(s.prototype,"Sproto.cs_paidboss_setting_req_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dbid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dbid&&this.se.wi(this.dbid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_public_boss_attack_player_request=n,__reflect(n.prototype,"Sproto.cs_public_boss_attack_player_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_public_boss_challenge_request=r,__reflect(r.prototype,"Sproto.cs_public_boss_challenge_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_public_boss_challenge_record_request=a,__reflect(a.prototype,"Sproto.cs_public_boss_challenge_record_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_public_boss_rank_request=l,__reflect(l.prototype,"Sproto.cs_public_boss_rank_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.bossAutoFight=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.bossAutoFight&&this.se.wi(this.bossAutoFight,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_public_boss_save_autofight_request=h,__reflect(h.prototype,"Sproto.cs_public_boss_save_autofight_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.bossRemind=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.bossRemind&&this.se.wi(this.bossRemind,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_public_boss_save_remind_request=c,__reflect(c.prototype,"Sproto.cs_public_boss_save_remind_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_vip_boss_challenge_time_request=u,__reflect(u.prototype,"Sproto.cs_vip_boss_challenge_time_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_vip_boss_init_panel_info_request=d,__reflect(d.prototype,"Sproto.cs_vip_boss_init_panel_info_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.action=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.action&&this.se.wi(this.action,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_vip_boss_refresh_remind_request=p,__reflect(p.prototype,"Sproto.cs_vip_boss_refresh_remind_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_vip_boss_remind_panel_info_request=f,__reflect(f.prototype,"Sproto.cs_vip_boss_remind_panel_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.hp=this.de.ri();break;case 2:this.people=this.de.ri();break;case 3:this.reliveTime=this.de.ri();break;case 4:this.challengeing=this.de.rb();break;case 5:this.killScore=this.de.ri();break;case 6:this.maxKillScore=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.hp&&this.se.wi(this.hp,1),void 0!=this.people&&this.se.wi(this.people,2),void 0!=this.reliveTime&&this.se.wi(this.reliveTime,3),void 0!=this.challengeing&&this.se.wb(this.challengeing,4),void 0!=this.killScore&&this.se.wi(this.killScore,5),void 0!=this.maxKillScore&&this.se.wi(this.maxKillScore,6),this.se.Close()},t}(e.SprotoTypeBase);e.cross_boss_info=t,__reflect(t.prototype,"Sproto.cross_boss_info");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.hp=this.de.ri();break;case 2:this.people=this.de.ri();break;case 3:this.reliveTime=this.de.ri();break;case 4:this.challengeing=this.de.rb();break;case 5:this.ownerNmae=this.de.rs();break;case 6:this.escapeTime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.hp&&this.se.wi(this.hp,1),void 0!=this.people&&this.se.wi(this.people,2),void 0!=this.reliveTime&&this.se.wi(this.reliveTime,3),void 0!=this.challengeing&&this.se.wb(this.challengeing,4),void 0!=this.ownerNmae&&this.se.ws(this.ownerNmae,5),void 0!=this.escapeTime&&this.se.wi(this.escapeTime,6),this.se.Close()},t}(e.SprotoTypeBase);e.public_boss_info=i,__reflect(i.prototype,"Sproto.public_boss_info");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.time=this.de.ri();break;case 1:this.name=this.de.rs();break;case 2:this.hurt=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.time&&this.se.wi(this.time,0),void 0!=this.name&&this.se.ws(this.name,1),void 0!=this.hurt&&this.se.wi(this.hurt,2),this.se.Close()},t}(e.SprotoTypeBase);e.public_boss_log=o,__reflect(o.prototype,"Sproto.public_boss_log");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.roleName=this.de.rs();break;case 2:this.job=this.de.ri();break;case 3:this.sex=this.de.ri();break;case 4:this.hurtValue=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.roleName&&this.se.ws(this.roleName,1),void 0!=this.job&&this.se.wi(this.job,2),void 0!=this.sex&&this.se.wi(this.sex,3),void 0!=this.hurtValue&&this.se.wi(this.hurtValue,4),this.se.Close()},t}(e.SprotoTypeBase);e.public_boss_player_data=s,__reflect(s.prototype,"Sproto.public_boss_player_data");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.roleName=this.de.rs();break;case 2:this.hurtValue=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.roleName&&this.se.ws(this.roleName,1),void 0!=this.hurtValue&&this.se.wi(this.hurtValue,2),this.se.Close()},t}(e.SprotoTypeBase);e.public_boss_rank_item_data=n,__reflect(n.prototype,"Sproto.public_boss_rank_item_data");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.state&&this.se.wi(this.state,1),this.se.Close()},t}(e.SprotoTypeBase);e.reminds=r,__reflect(r.prototype,"Sproto.reminds");var a=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.boosInfos=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.boosInfos&&this.se.woa(this.boosInfos,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_cross_boss_list_request=a,__reflect(a.prototype,"Sproto.sc_cross_boss_list_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_paidboss_notice_res_request=l,__reflect(l.prototype,"Sproto.sc_paidboss_notice_res_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.bossRemind=this.de.ri();break;case 1:this.boosInfos=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.bossRemind&&this.se.wi(this.bossRemind,0),void 0!=this.boosInfos&&this.se.woa(this.boosInfos,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_paidboss_res_request=h,__reflect(h.prototype,"Sproto.sc_paidboss_res_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.bossAutoFight=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.bossAutoFight&&this.se.wi(this.bossAutoFight,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_paidboss_setting_res_request=c,__reflect(c.prototype,"Sproto.sc_paidboss_setting_res_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.hp=this.de.rs();break;case 1:this.dhp=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.hp&&this.se.ws(this.hp,0),void 0!=this.dhp&&this.se.ws(this.dhp,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_blood_update_request=u,__reflect(u.prototype,"Sproto.sc_public_blood_update_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.isShow=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.isShow&&this.se.wb(this.isShow,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_boss_be_hit_request=d,__reflect(d.prototype,"Sproto.sc_public_boss_be_hit_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.monsterId=this.de.ri();break;case 1:this.bossHandler=this.de.ri();break;case 2:this.handler=this.de.ri();break;case 3:this.ranks=this.de.roa(n);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.monsterId&&this.se.wi(this.monsterId,0),void 0!=this.bossHandler&&this.se.wi(this.bossHandler,1),void 0!=this.handler&&this.se.wi(this.handler,2),void 0!=this.ranks&&this.se.woa(this.ranks,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_boss_blood_request=p,__reflect(p.prototype,"Sproto.sc_public_boss_blood_request");var f=function(t){function i(e){return void 0===e&&(e=null),t.call(this,5,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.myRank=this.de.ri();break;case 1:this.no1Name=this.de.rs();break;case 2:this.no1Level=this.de.ri();break;case 3:this.no1Reward=this.de.roa(e.reward_data);break;case 4:this.myReward=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.myRank&&this.se.wi(this.myRank,0),void 0!=this.no1Name&&this.se.ws(this.no1Name,1),void 0!=this.no1Level&&this.se.wi(this.no1Level,2),void 0!=this.no1Reward&&this.se.woa(this.no1Reward,3),void 0!=this.myReward&&this.se.woa(this.myReward,4),this.se.Close()},i}(e.SprotoTypeBase);e.sc_public_boss_challenge_result_request=f,__reflect(f.prototype,"Sproto.sc_public_boss_challenge_result_request");var g=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.robName=this.de.rs();break;case 1:this.berobName=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.robName&&this.se.ws(this.robName,0),void 0!=this.berobName&&this.se.ws(this.berobName,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_boss_challenge_suc_request=g,__reflect(g.prototype,"Sproto.sc_public_boss_challenge_suc_request");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_boss_clear_cd_request=_,__reflect(_.prototype,"Sproto.sc_public_boss_clear_cd_request");var m=function(e){function t(t){return void 0===t&&(t=null),e.call(this,8,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actorid=this.de.ri();break;case 1:this.name=this.de.rs();break;case 2:this.power=this.de.ri();break;case 3:this.job=this.de.ri();break;case 4:this.sex=this.de.ri();break;case 5:this.hp=this.de.ri();break;case 6:this.dhp=this.de.ri();break;case 7:this.mainEle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actorid&&this.se.wi(this.actorid,0),void 0!=this.name&&this.se.ws(this.name,1),void 0!=this.power&&this.se.wi(this.power,2),void 0!=this.job&&this.se.wi(this.job,3),void 0!=this.sex&&this.se.wi(this.sex,4),void 0!=this.hp&&this.se.wi(this.hp,5),void 0!=this.dhp&&this.se.wi(this.dhp,6),void 0!=this.mainEle&&this.se.wi(this.mainEle,7),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_boss_cur_owner_request=m,__reflect(m.prototype,"Sproto.sc_public_boss_cur_owner_request");var v=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.hurt=this.de.ri();break;case 1:this.gold=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.hurt&&this.se.wi(this.hurt,0),void 0!=this.gold&&this.se.wi(this.gold,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_boss_hurt_result_request=v,__reflect(v.prototype,"Sproto.sc_public_boss_hurt_result_request");var y=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 3:this.ranks=this.de.roa(n);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ranks&&this.se.woa(this.ranks,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_boss_init_info_request=y,__reflect(y.prototype,"Sproto.sc_public_boss_init_info_request");var b=function(e){function t(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.challengeCount=this.de.ri();break;case 1:this.restoreTime=this.de.ri();break;case 2:this.toDaySoul=this.de.ri();break;case 3:this.cdTime=this.de.ri();break;case 4:this.bossRemind=this.de.ri();break;case 5:this.bossAutoFight=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.challengeCount&&this.se.wi(this.challengeCount,0),void 0!=this.restoreTime&&this.se.wi(this.restoreTime,1),void 0!=this.toDaySoul&&this.se.wi(this.toDaySoul,2),void 0!=this.cdTime&&this.se.wi(this.cdTime,3),void 0!=this.bossRemind&&this.se.wi(this.bossRemind,4),void 0!=this.bossAutoFight&&this.se.wi(this.bossAutoFight,5),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_boss_init_panel_info_request=b,__reflect(b.prototype,"Sproto.sc_public_boss_init_panel_info_request");var C=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.logs=this.de.roa(o);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.logs&&this.se.woa(this.logs,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_boss_kill_log_request=C,__reflect(C.prototype,"Sproto.sc_public_boss_kill_log_request");var T=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.logs=this.de.roa(o);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.logs&&this.se.woa(this.logs,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_boss_rank_update_request=T,__reflect(T.prototype,"Sproto.sc_public_boss_rank_update_request");var S=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_boss_reborn_notice_request=S,__reflect(S.prototype,"Sproto.sc_public_boss_reborn_notice_request");var w=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.relive_time=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.relive_time&&this.se.wi(this.relive_time,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_boss_relive_time_request=w,__reflect(w.prototype,"Sproto.sc_public_boss_relive_time_request");var I=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.boosInfo=this.de.ro(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.boosInfo&&this.se.wo(this.boosInfo,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_boss_update_boss_request=I,__reflect(I.prototype,"Sproto.sc_public_boss_update_boss_request");var G=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.boosInfos=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.boosInfos&&this.se.woa(this.boosInfos,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_boss_update_list_request=G,__reflect(G.prototype,"Sproto.sc_public_boss_update_list_request");var L=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 1:this.reward=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.reward&&this.se.woa(this.reward,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_public_items_droped_request=L,__reflect(L.prototype,"Sproto.sc_public_items_droped_request");var P=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.list=this.de.roa(s);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.list&&this.se.woa(this.list,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_public_player_list_request=P,__reflect(P.prototype,"Sproto.sc_public_player_list_request");var k=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.sc_vip_boss_challenge_time_request=k,__reflect(k.prototype,"Sproto.sc_vip_boss_challenge_time_request");var E=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.cdTime1=this.de.ri();break;case 1:this.cdTime2=this.de.ri();break;case 2:this.cdTime3=this.de.ri();break;case 3:this.cdJoin=this.de.ri();break;case 4:this.boosInfos=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.cdTime1&&this.se.wi(this.cdTime1,0),void 0!=this.cdTime2&&this.se.wi(this.cdTime2,1),void 0!=this.cdTime3&&this.se.wi(this.cdTime3,2),void 0!=this.cdJoin&&this.se.wi(this.cdJoin,3),void 0!=this.boosInfos&&this.se.woa(this.boosInfos,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_vip_boss_init_panel_info_request=E,__reflect(E.prototype,"Sproto.sc_vip_boss_init_panel_info_request");var R=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_vip_boss_refresh_remind_request=R,__reflect(R.prototype,"Sproto.sc_vip_boss_refresh_remind_request");var D=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.remindStats=this.de.roa(r);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.remindStats&&this.se.woa(this.remindStats,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_vip_boss_remind_panel_info_request=D,__reflect(D.prototype,"Sproto.sc_vip_boss_remind_panel_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.giftid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.giftid&&this.se.wi(this.giftid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_qzonewanba_gift_request=t,__reflect(t.prototype,"Sproto.cs_get_qzonewanba_gift_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ret=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ret&&this.se.wi(this.ret,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_qzonewanba_gift_response=i,__reflect(i.prototype,"Sproto.cs_get_qzonewanba_gift_response");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.giftid=this.de.ri();break;case 1:this.appid=this.de.rs();break;case 2:this.openid=this.de.rs();break;case 3:this.openkey=this.de.rs();break;case 4:this.pf=this.de.rs();break;case 5:this.zoneid=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.giftid&&this.se.wi(this.giftid,0),void 0!=this.appid&&this.se.ws(this.appid,1),void 0!=this.openid&&this.se.ws(this.openid,2),void 0!=this.openkey&&this.se.ws(this.openkey,3),void 0!=this.pf&&this.se.ws(this.pf,4),void 0!=this.zoneid&&this.se.ws(this.zoneid,5),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_qzonewanba_vipgift_request=o,__reflect(o.prototype,"Sproto.cs_get_qzonewanba_vipgift_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this
}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ret=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ret&&this.se.wi(this.ret,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_qzonewanba_vipgift_response=s,__reflect(s.prototype,"Sproto.cs_get_qzonewanba_vipgift_response");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.giftid=this.de.ri();break;case 1:this.appid=this.de.rs();break;case 2:this.openid=this.de.rs();break;case 3:this.openkey=this.de.rs();break;case 4:this.pf=this.de.rs();break;case 5:this.zoneid=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.giftid&&this.se.wi(this.giftid,0),void 0!=this.appid&&this.se.ws(this.appid,1),void 0!=this.openid&&this.se.ws(this.openid,2),void 0!=this.openkey&&this.se.ws(this.openkey,3),void 0!=this.pf&&this.se.ws(this.pf,4),void 0!=this.zoneid&&this.se.ws(this.zoneid,5),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_qzonewanba_vipprivilege_request=n,__reflect(n.prototype,"Sproto.cs_get_qzonewanba_vipprivilege_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ret=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ret&&this.se.wi(this.ret,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_qzonewanba_vipprivilege_response=r,__reflect(r.prototype,"Sproto.cs_get_qzonewanba_vipprivilege_response");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.appid=this.de.rs();break;case 1:this.openid=this.de.rs();break;case 2:this.openkey=this.de.rs();break;case 3:this.pf=this.de.rs();break;case 4:this.zoneid=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.appid&&this.se.ws(this.appid,0),void 0!=this.openid&&this.se.ws(this.openid,1),void 0!=this.openkey&&this.se.ws(this.openkey,2),void 0!=this.pf&&this.se.ws(this.pf,3),void 0!=this.zoneid&&this.se.ws(this.zoneid,4),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_qzonewanba_vipprivilege_stat_request=a,__reflect(a.prototype,"Sproto.cs_get_qzonewanba_vipprivilege_stat_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.state=this.de.ri();break;case 1:this.level=this.de.ri();break;case 2:this.is_vip=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.state&&this.se.wi(this.state,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.is_vip&&this.se.wi(this.is_vip,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_qzonewanba_vipprivilege_stat_response=l,__reflect(l.prototype,"Sproto.cs_get_qzonewanba_vipprivilege_stat_response");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.appid=this.de.rs();break;case 1:this.openid=this.de.rs();break;case 2:this.openkey=this.de.rs();break;case 3:this.pf=this.de.rs();break;case 4:this.zoneid=this.de.rs();break;case 5:this.qua=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.appid&&this.se.ws(this.appid,0),void 0!=this.openid&&this.se.ws(this.openid,1),void 0!=this.openkey&&this.se.ws(this.openkey,2),void 0!=this.pf&&this.se.ws(this.pf,3),void 0!=this.zoneid&&this.se.ws(this.zoneid,4),void 0!=this.qua&&this.se.ws(this.qua,5),this.se.Close()},t}(e.SprotoTypeBase);e.cs_update_qzonewanba_token_request=h,__reflect(h.prototype,"Sproto.cs_update_qzonewanba_token_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ret=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ret&&this.se.ws(this.ret,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_update_qzonewanba_token_response=c,__reflect(c.prototype,"Sproto.cs_update_qzonewanba_token_response")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_offline_apply_req_request=t,__reflect(t.prototype,"Sproto.cs_offline_apply_req_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.fbID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.fbID&&this.se.wi(this.fbID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_add_count_request=i,__reflect(i.prototype,"Sproto.cs_raid_add_count_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.fbID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.fbID&&this.se.wi(this.fbID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_artifact_request=o,__reflect(o.prototype,"Sproto.cs_raid_artifact_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.buyId=this.de.ri();break;case 1:this.fbID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.buyId&&this.se.wi(this.buyId,0),void 0!=this.fbID&&this.se.wi(this.fbID,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_artifact_award_request=s,__reflect(s.prototype,"Sproto.cs_raid_artifact_award_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_artifact_buy_req_request=n,__reflect(n.prototype,"Sproto.cs_raid_artifact_buy_req_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_artifact_info_request=r,__reflect(r.prototype,"Sproto.cs_raid_artifact_info_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_artifact_morra_request=a,__reflect(a.prototype,"Sproto.cs_raid_artifact_morra_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_call_boss_play_request=l,__reflect(l.prototype,"Sproto.cs_raid_call_boss_play_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.fbID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.fbID&&this.se.wi(this.fbID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_challenget_request=h,__reflect(h.prototype,"Sproto.cs_raid_challenget_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.fbType=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.fbType&&this.se.wi(this.fbType,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_exit_raid_request=c,__reflect(c.prototype,"Sproto.cs_raid_exit_raid_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_get_award_request=u,__reflect(u.prototype,"Sproto.cs_raid_get_award_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_get_boss_reward_request=d,__reflect(d.prototype,"Sproto.cs_raid_get_boss_reward_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.pass=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.pass&&this.se.wi(this.pass,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_get_world_award_request=p,__reflect(p.prototype,"Sproto.cs_raid_get_world_award_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_guardian_fight_req_request=f,__reflect(f.prototype,"Sproto.cs_raid_guardian_fight_req_request");var g=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_guardian_quick_req_request=g,__reflect(g.prototype,"Sproto.cs_raid_guardian_quick_req_request");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_guardian_req_request=_,__reflect(_.prototype,"Sproto.cs_raid_guardian_req_request");var m=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_guardian_tili_req_request=m,__reflect(m.prototype,"Sproto.cs_raid_guardian_tili_req_request");var v=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_next_chapter_req_request=v,__reflect(v.prototype,"Sproto.cs_raid_next_chapter_req_request");var y=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_pk_boss_request=y,__reflect(y.prototype,"Sproto.cs_raid_pk_boss_request");var b=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.killCount=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.killCount&&this.se.wi(this.killCount,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_raid_wave_complete_request=b,__reflect(b.prototype,"Sproto.cs_raid_wave_complete_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.exp=this.de.ri();break;case 2:this.gold=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.exp&&this.se.wi(this.exp,1),void 0!=this.gold&&this.se.wi(this.gold,2),this.se.Close()},t}(e.SprotoTypeBase);e.offline_data=t,__reflect(t.prototype,"Sproto.offline_data");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.fbId=this.de.ri();break;case 1:this.useCount=this.de.ri();break;case 2:this.vipBuyCount=this.de.ri();break;case 3:this.vipHoldCount=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.fbId&&this.se.wi(this.fbId,0),void 0!=this.useCount&&this.se.wi(this.useCount,1),void 0!=this.vipBuyCount&&this.se.wi(this.vipBuyCount,2),void 0!=this.vipHoldCount&&this.se.wi(this.vipHoldCount,3),this.se.Close()},t}(e.SprotoTypeBase);e.raid_data=i,__reflect(i.prototype,"Sproto.raid_data");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ret=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ret&&this.se.wi(this.ret,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_offline_apply_res_request=o,__reflect(o.prototype,"Sproto.sc_offline_apply_res_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_radi_artifact_cnt_request=s,__reflect(s.prototype,"Sproto.sc_radi_artifact_cnt_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_radi_artifact_morra_request=n,__reflect(n.prototype,"Sproto.sc_radi_artifact_morra_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.sc_radi_artifact_rewoard_relute_request=r,__reflect(r.prototype,"Sproto.sc_radi_artifact_rewoard_relute_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.times=this.de.ri();break;case 1:this.bought=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.times&&this.se.wi(this.times,0),void 0!=this.bought&&this.se.wi(this.bought,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_raid_artifact_buy_res_request=a,__reflect(a.prototype,"Sproto.sc_raid_artifact_buy_res_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.joincnt=this.de.ri();break;case 1:this.result=this.de.ri();break;case 2:this.bought=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.joincnt&&this.se.wi(this.joincnt,0),void 0!=this.result&&this.se.wi(this.result,1),void 0!=this.bought&&this.se.wi(this.bought,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_raid_artifact_cnt_request=l,__reflect(l.prototype,"Sproto.sc_raid_artifact_cnt_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.cnt=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.cnt&&this.se.wi(this.cnt,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_raid_artifact_kill_cnt_request=h,__reflect(h.prototype,"Sproto.sc_raid_artifact_kill_cnt_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.bossCallNum=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.bossCallNum&&this.se.wi(this.bossCallNum,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_raid_boss_box_num_request=c,__reflect(c.prototype,"Sproto.sc_raid_boss_box_num_request");var u=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.result=this.de.ri();break;case 1:this.rewards=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),void 0!=this.rewards&&this.se.woa(this.rewards,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_raid_chapter_boss_result_request=u,__reflect(u.prototype,"Sproto.sc_raid_chapter_boss_result_request");var d=function(t){function i(e){return void 0===e&&(e=null),t.call(this,12,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.guanqiaID=this.de.ri();break;case 1:this.wave=this.de.ri();break;case 2:this.monsterCount=this.de.ri();break;case 3:this.monsterID=this.de.ri();break;case 4:this.needWave=this.de.ri();break;case 5:this.bossID=this.de.ri();break;case 6:this.desc=this.de.rs();break;case 7:this.refMonsterPos=this.de.roa(e.position);break;case 8:this.bossReward=this.de.roa(e.reward_data);break;case 9:this.refEncounterPos=this.de.roa(e.position);break;case 10:this.killMonsterCount=this.de.ri();break;case 11:this.nextMap=this.de.rb();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.guanqiaID&&this.se.wi(this.guanqiaID,0),void 0!=this.wave&&this.se.wi(this.wave,1),void 0!=this.monsterCount&&this.se.wi(this.monsterCount,2),void 0!=this.monsterID&&this.se.wi(this.monsterID,3),void 0!=this.needWave&&this.se.wi(this.needWave,4),void 0!=this.bossID&&this.se.wi(this.bossID,5),void 0!=this.desc&&this.se.ws(this.desc,6),void 0!=this.refMonsterPos&&this.se.woa(this.refMonsterPos,7),void 0!=this.bossReward&&this.se.woa(this.bossReward,8),void 0!=this.refEncounterPos&&this.se.woa(this.refEncounterPos,9),void 0!=this.killMonsterCount&&this.se.wi(this.killMonsterCount,10),void 0!=this.nextMap&&this.se.wb(this.nextMap,11),this.se.Close()},i}(e.SprotoTypeBase);e.sc_raid_chapter_init_info_request=d,__reflect(d.prototype,"Sproto.sc_raid_chapter_init_info_request");var p=function(e){function i(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.offlineTime=this.de.ri();break;case 1:this.exp=this.de.ri();break;case 2:this.money=this.de.ri();break;case 3:this.equipNum1=this.de.ri();break;case 4:this.equipNum2=this.de.ri();break;case 5:this.offlineData=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.offlineTime&&this.se.wi(this.offlineTime,0),void 0!=this.exp&&this.se.wi(this.exp,1),void 0!=this.money&&this.se.wi(this.money,2),void 0!=this.equipNum1&&this.se.wi(this.equipNum1,3),void 0!=this.equipNum2&&this.se.wi(this.equipNum2,4),void 0!=this.offlineData&&this.se.woa(this.offlineData,5),this.se.Close()},i}(e.SprotoTypeBase);e.sc_raid_chapter_offline_reward_request=p,__reflect(p.prototype,"Sproto.sc_raid_chapter_offline_reward_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wia(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_raid_chapter_reward_request=f,__reflect(f.prototype,"Sproto.sc_raid_chapter_reward_request");var g=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.wave=this.de.ri();break;case 1:this.count=this.de.ri();break;case 2:this.rewards=this.de.roa(S);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.wave&&this.se.wi(this.wave,0),void 0!=this.count&&this.se.wi(this.count,1),void 0!=this.rewards&&this.se.woa(this.rewards,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_raid_chapter_wave_data_request=g,__reflect(g.prototype,"Sproto.sc_raid_chapter_wave_data_request");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.isReceive=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.isReceive&&this.se.wia(this.isReceive,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_raid_chapter_world_reward_request=_,__reflect(_.prototype,"Sproto.sc_raid_chapter_world_reward_request");var m=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.tili=this.de.ri();break;case 1:this.time=this.de.ri();break;case 2:this.info=this.de.ri();break;case 3:this.bought=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.tili&&this.se.wi(this.tili,0),void 0!=this.time&&this.se.wi(this.time,1),void 0!=this.info&&this.se.wi(this.info,2),void 0!=this.bought&&this.se.wi(this.bought,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_raid_guardian_res_request=m,__reflect(m.prototype,"Sproto.sc_raid_guardian_res_request");var v=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.raidModel=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.raidModel&&this.se.woa(this.raidModel,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_raid_info_init_request=v,__reflect(v.prototype,"Sproto.sc_raid_info_init_request");var y=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.cdtime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.cdtime&&this.se.wi(this.cdtime,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_raid_reborn_cd_request=y,__reflect(y.prototype,"Sproto.sc_raid_reborn_cd_request");var b=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.sc_raid_role_all_die_request=b,__reflect(b.prototype,"Sproto.sc_raid_role_all_die_request");var C=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.sc_raid_time_request=C,__reflect(C.prototype,"Sproto.sc_raid_time_request");var T=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.raidData=this.de.ro(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.raidData&&this.se.wo(this.raidData,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_raid_update_info_request=T,__reflect(T.prototype,"Sproto.sc_raid_update_info_request");var S=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.index=this.de.ri();break;case 1:this.drops=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.drops&&this.se.woa(this.drops,1),this.se.Close()},i}(e.SprotoTypeBase);e.wave_drop_data=S,__reflect(S.prototype,"Sproto.wave_drop_data")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_rank_req_request=t,__reflect(t.prototype,"Sproto.cs_rank_req_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_rank_worship_all_count_request=i,__reflect(i.prototype,"Sproto.cs_rank_worship_all_count_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_rank_worship_data_req_request=o,__reflect(o.prototype,"Sproto.cs_rank_worship_data_req_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_rank_worship_once_request=s,__reflect(s.prototype,"Sproto.cs_rank_worship_once_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,17,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.pos=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.player=this.de.rs();break;case 3:this.level=this.de.ri();break;case 4:this.zhuan=this.de.ri();break;case 5:this.job=this.de.ri();break;case 6:this.sex=this.de.ri();break;case 7:this.vip=this.de.ri();break;case 8:this.month=this.de.ri();break;case 9:this.power=this.de.ri();break;case 10:this.count=this.de.ri();break;case 12:this.challgeLevel=this.de.ri();break;case 13:this.challgeId=this.de.ri();break;case 14:this.winNum=this.de.ri();break;case 15:this.serverId=this.de.ri();break;case 16:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.pos&&this.se.wi(this.pos,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.player&&this.se.ws(this.player,2),void 0!=this.level&&this.se.wi(this.level,3),void 0!=this.zhuan&&this.se.wi(this.zhuan,4),void 0!=this.job&&this.se.wi(this.job,5),void 0!=this.sex&&this.se.wi(this.sex,6),void 0!=this.vip&&this.se.wi(this.vip,7),void 0!=this.month&&this.se.wi(this.month,8),void 0!=this.power&&this.se.wi(this.power,9),void 0!=this.count&&this.se.wi(this.count,10),void 0!=this.challgeLevel&&this.se.wi(this.challgeLevel,12),void 0!=this.challgeId&&this.se.wi(this.challgeId,13),void 0!=this.winNum&&this.se.wi(this.winNum,14),void 0!=this.serverId&&this.se.wi(this.serverId,15),void 0!=this.value&&this.se.wi(this.value,16),this.se.Close()},t}(e.SprotoTypeBase);e.rank_data=t,__reflect(t.prototype,"Sproto.rank_data");var i=function(e){function i(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.datas=this.de.roa(t);break;case 2:this.selfRank=this.de.ri();break;case 3:this.value=this.de.ri();
break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.datas&&this.se.woa(this.datas,1),void 0!=this.selfRank&&this.se.wi(this.selfRank,2),void 0!=this.value&&this.se.wi(this.value,3),this.se.Close()},i}(e.SprotoTypeBase);e.sc_rank_data_request=i,__reflect(i.prototype,"Sproto.sc_rank_data_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.worshipCount=this.de.roa(r);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.worshipCount&&this.se.woa(this.worshipCount,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_rank_worship_all_count_ret_request=o,__reflect(o.prototype,"Sproto.sc_rank_worship_all_count_ret_request");var s=function(t){function i(e){return void 0===e&&(e=null),t.call(this,4,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.type=this.de.ri();break;case 1:this.count=this.de.ri();break;case 2:this.actorData=this.de.ro(e.actor_base_data);break;case 3:this.subRole=this.de.roa(e.rank_subrole);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.count&&this.se.wi(this.count,1),void 0!=this.actorData&&this.se.wo(this.actorData,2),void 0!=this.subRole&&this.se.woa(this.subRole,3),this.se.Close()},i}(e.SprotoTypeBase);e.sc_rank_worship_data_request=s,__reflect(s.prototype,"Sproto.sc_rank_worship_data_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_rank_worship_success_request=n,__reflect(n.prototype,"Sproto.sc_rank_worship_success_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.worship_count=r,__reflect(r.prototype,"Sproto.worship_count")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.goodsid=this.de.ri();break;case 1:this.money=this.de.ri();break;case 2:this.zoneid=this.de.ri();break;case 3:this.appid=this.de.rs();break;case 4:this.openid=this.de.rs();break;case 5:this.pf=this.de.rs();break;case 6:this.openkey=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.goodsid&&this.se.wi(this.goodsid,0),void 0!=this.money&&this.se.wi(this.money,1),void 0!=this.zoneid&&this.se.wi(this.zoneid,2),void 0!=this.appid&&this.se.ws(this.appid,3),void 0!=this.openid&&this.se.ws(this.openid,4),void 0!=this.pf&&this.se.ws(this.pf,5),void 0!=this.openkey&&this.se.ws(this.openkey,6),this.se.Close()},t}(e.SprotoTypeBase);e.cs_buy_wanba_item_request=t,__reflect(t.prototype,"Sproto.cs_buy_wanba_item_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ret=this.de.ri();break;case 1:this.price=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ret&&this.se.wi(this.ret,0),void 0!=this.price&&this.se.wi(this.price,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_buy_wanba_item_response=i,__reflect(i.prototype,"Sproto.cs_buy_wanba_item_response");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.goodsid=this.de.ri();break;case 1:this.appid=this.de.rs();break;case 2:this.openid=this.de.rs();break;case 3:this.pf=this.de.rs();break;case 4:this.session_key=this.de.rs();break;case 5:this.orderid=this.de.rs();break;case 6:this.pay_amount=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.goodsid&&this.se.wi(this.goodsid,0),void 0!=this.appid&&this.se.ws(this.appid,1),void 0!=this.openid&&this.se.ws(this.openid,2),void 0!=this.pf&&this.se.ws(this.pf,3),void 0!=this.session_key&&this.se.ws(this.session_key,4),void 0!=this.orderid&&this.se.ws(this.orderid,5),void 0!=this.pay_amount&&this.se.wi(this.pay_amount,6),this.se.Close()},t}(e.SprotoTypeBase);e.cs_buy_xiaoyouxi_item_request=o,__reflect(o.prototype,"Sproto.cs_buy_xiaoyouxi_item_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ret=this.de.ri();break;case 1:this.price=this.de.ri();break;case 2:this.orderid=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ret&&this.se.wi(this.ret,0),void 0!=this.price&&this.se.wi(this.price,1),void 0!=this.orderid&&this.se.ws(this.orderid,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_buy_xiaoyouxi_item_response=s,__reflect(s.prototype,"Sproto.cs_buy_xiaoyouxi_item_response");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.goodsid=this.de.ri();break;case 1:this.appid=this.de.rs();break;case 2:this.openid=this.de.rs();break;case 3:this.openkey=this.de.rs();break;case 4:this.pf=this.de.rs();break;case 5:this.pfkey=this.de.rs();break;case 6:this.zoneid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.goodsid&&this.se.wi(this.goodsid,0),void 0!=this.appid&&this.se.ws(this.appid,1),void 0!=this.openid&&this.se.ws(this.openid,2),void 0!=this.openkey&&this.se.ws(this.openkey,3),void 0!=this.pf&&this.se.ws(this.pf,4),void 0!=this.pfkey&&this.se.ws(this.pfkey,5),void 0!=this.zoneid&&this.se.wi(this.zoneid,6),this.se.Close()},t}(e.SprotoTypeBase);e.cs_buy_yyb_item_request=n,__reflect(n.prototype,"Sproto.cs_buy_yyb_item_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ret=this.de.ri();break;case 1:this.price=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ret&&this.se.wi(this.ret,0),void 0!=this.price&&this.se.wi(this.price,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_buy_yyb_item_response=r,__reflect(r.prototype,"Sproto.cs_buy_yyb_item_response");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.id&&this.se.wi(this.id,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_recharge_get_awards_request=a,__reflect(a.prototype,"Sproto.cs_recharge_get_awards_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_recharge_gift_reward_request=l,__reflect(l.prototype,"Sproto.cs_recharge_gift_reward_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.rechargeId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.rechargeId&&this.se.wi(this.rechargeId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_recharge_test_request=h,__reflect(h.prototype,"Sproto.cs_recharge_test_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_recharge_test_invest_request=c,__reflect(c.prototype,"Sproto.cs_recharge_test_invest_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_recharge_test_month_request=u,__reflect(u.prototype,"Sproto.cs_recharge_test_month_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.day=this.de.ri();break;case 2:this.isFirst=this.de.ri();break;case 3:this.num=this.de.ri();break;case 4:this.isAwards=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.day&&this.se.wi(this.day,1),void 0!=this.isFirst&&this.se.wi(this.isFirst,2),void 0!=this.num&&this.se.wi(this.num,3),void 0!=this.isAwards&&this.se.wi(this.isAwards,4),this.se.Close()},t}(e.SprotoTypeBase);e.recharge_data=t,__reflect(t.prototype,"Sproto.recharge_data");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.sc_pop_shouchong_request=i,__reflect(i.prototype,"Sproto.sc_pop_shouchong_request");var o=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.ro(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.wo(this.data,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_recharge_change_data_request=o,__reflect(o.prototype,"Sproto.sc_recharge_change_data_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.firstOpenStatus=this.de.rb();break;case 1:this.firstRewardStatus=this.de.ri();break;case 2:this.day=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.firstOpenStatus&&this.se.wb(this.firstOpenStatus,0),void 0!=this.firstRewardStatus&&this.se.wi(this.firstRewardStatus,1),void 0!=this.day&&this.se.wi(this.day,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_recharge_first_status_request=s,__reflect(s.prototype,"Sproto.sc_recharge_first_status_request");var n=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.ro(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.wo(this.data,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_recharge_get_data_request=n,__reflect(n.prototype,"Sproto.sc_recharge_get_data_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.monthDay=this.de.ri();break;case 1:this.flag=this.de.ri();break;case 2:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.monthDay&&this.se.wi(this.monthDay,0),void 0!=this.flag&&this.se.wi(this.flag,1),void 0!=this.type&&this.se.wi(this.type,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_recharge_get_month_day_request=r,__reflect(r.prototype,"Sproto.sc_recharge_get_month_day_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dayNum=this.de.ri();break;case 1:this.drawBinList=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dayNum&&this.se.wi(this.dayNum,0),void 0!=this.drawBinList&&this.se.wia(this.drawBinList,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_recharge_gift_reward_request=a,__reflect(a.prototype,"Sproto.sc_recharge_gift_reward_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.costList=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.costList&&this.se.wi(this.costList,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_recharge_item_data_request=l,__reflect(l.prototype,"Sproto.sc_recharge_item_data_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.status=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.status&&this.se.wi(this.status,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_recharge_month_reward_request=h,__reflect(h.prototype,"Sproto.sc_recharge_month_reward_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.status=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.status&&this.se.wi(this.status,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_rxws_can_recharge_request=c,__reflect(c.prototype,"Sproto.sc_rxws_can_recharge_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.shareType=this.de.ri();break;case 1:this.account=this.de.rs();break;case 2:this.action=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.shareType&&this.se.wi(this.shareType,0),void 0!=this.account&&this.se.ws(this.account,1),void 0!=this.action&&this.se.wi(this.action,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_channel_share_use_request=t,__reflect(t.prototype,"Sproto.cs_channel_share_use_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ret=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ret&&this.se.wi(this.ret,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_channel_share_use_response=i,__reflect(i.prototype,"Sproto.cs_channel_share_use_response");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.redeemcode=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.redeemcode&&this.se.ws(this.redeemcode,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_redeemcode_use_request=o,__reflect(o.prototype,"Sproto.cs_redeemcode_use_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ret=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ret&&this.se.wi(this.ret,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_redeemcode_use_response=s,__reflect(s.prototype,"Sproto.cs_redeemcode_use_response");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.redeemcode=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.redeemcode&&this.se.wi(this.redeemcode,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_wanba_redeemcode_use_request=n,__reflect(n.prototype,"Sproto.cs_wanba_redeemcode_use_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ret=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ret&&this.se.wi(this.ret,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_wanba_redeemcode_use_response=r,__reflect(r.prototype,"Sproto.cs_wanba_redeemcode_use_response");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_wanba_share_use_request=a,__reflect(a.prototype,"Sproto.cs_wanba_share_use_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ret=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ret&&this.se.wi(this.ret,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_wanba_share_use_response=l,__reflect(l.prototype,"Sproto.cs_wanba_share_use_response")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.lv=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.lv&&this.se.wi(this.lv,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ride_change_req_request=t,__reflect(t.prototype,"Sproto.cs_ride_change_req_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.itemid=this.de.ri();break;case 2:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.itemid&&this.se.wi(this.itemid,1),void 0!=this.count&&this.se.wi(this.count,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ride_eat_req_request=i,__reflect(i.prototype,"Sproto.cs_ride_eat_req_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.slot=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.slot&&this.se.wi(this.slot,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ride_equip_uplevel_req_request=o,__reflect(o.prototype,"Sproto.cs_ride_equip_uplevel_req_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.slot=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.slot&&this.se.wi(this.slot,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ride_equip_upstar_req_request=s,__reflect(s.prototype,"Sproto.cs_ride_equip_upstar_req_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.slot=this.de.ri();break;case 2:this.handler=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.slot&&this.se.wi(this.slot,1),void 0!=this.handler&&this.se.wi(this.handler,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ride_equipchange_req_request=n,__reflect(n.prototype,"Sproto.cs_ride_equipchange_req_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.slot=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.slot&&this.se.wi(this.slot,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ride_equipoff_req_request=r,__reflect(r.prototype,"Sproto.cs_ride_equipoff_req_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ride_getaward_req_request=a,__reflect(a.prototype,"Sproto.cs_ride_getaward_req_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ride_init_req_request=l,__reflect(l.prototype,"Sproto.cs_ride_init_req_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.isAuto=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.isAuto&&this.se.wb(this.isAuto,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ride_skillup_req_request=h,__reflect(h.prototype,"Sproto.cs_ride_skillup_req_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ride_uplevel_req_request=c,__reflect(c.prototype,"Sproto.cs_ride_uplevel_req_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.isAuto=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.isAuto&&this.se.wb(this.isAuto,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ride_upstar_req_request=u,__reflect(u.prototype,"Sproto.cs_ride_upstar_req_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(t){function o(e){return void 0===e&&(e=null),t.call(this,9,e)||this}return __extends(o,t),o.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.roleid=this.de.ri();break;case 1:this.level=this.de.ri();break;case 2:this.exp=this.de.ri();break;case 3:this.star=this.de.ri();break;case 4:this.power=this.de.ri();break;case 5:this.attr=this.de.roa(e.attribute_data);break;case 6:this.skill=this.de.ria();break;case 7:this.equipList=this.de.roa(i);break;case 8:this.showLevel=this.de.ri();break;default:this.de.ReadUnknowData()}},o.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.exp&&this.se.wi(this.exp,2),void 0!=this.star&&this.se.wi(this.star,3),void 0!=this.power&&this.se.wi(this.power,4),void 0!=this.attr&&this.se.woa(this.attr,5),void 0!=this.skill&&this.se.wia(this.skill,6),void 0!=this.equipList&&this.se.woa(this.equipList,7),void 0!=this.showLevel&&this.se.wi(this.showLevel,8),this.se.Close()},o}(e.SprotoTypeBase);e.ride_data=t,__reflect(t.prototype,"Sproto.ride_data");var i=function(t){function i(e){return void 0===e&&(e=null),t.call(this,5,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.slot=this.de.ri();break;case 1:this.itemid=this.de.ri();break;case 2:this.level=this.de.ri();break;case 3:this.star=this.de.ri();break;case 4:this.attr=this.de.roa(e.attribute_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.slot&&this.se.wi(this.slot,0),void 0!=this.itemid&&this.se.wi(this.itemid,1),void 0!=this.level&&this.se.wi(this.level,2),void 0!=this.star&&this.se.wi(this.star,3),void 0!=this.attr&&this.se.woa(this.attr,4),this.se.Close()},i}(e.SprotoTypeBase);e.ride_equip=i,__reflect(i.prototype,"Sproto.ride_equip");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.showLevel=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.showLevel&&this.se.wi(this.showLevel,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ride_change_res_request=o,__reflect(o.prototype,"Sproto.sc_ride_change_res_request");var s=function(t){function i(e){return void 0===e&&(e=null),t.call(this,4,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.roleid=this.de.ri();break;case 1:this.itemid=this.de.ri();break;case 2:this.count=this.de.ri();break;case 3:this.attr=this.de.roa(e.attribute_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.itemid&&this.se.wi(this.itemid,1),void 0!=this.count&&this.se.wi(this.count,2),void 0!=this.attr&&this.se.woa(this.attr,3),this.se.Close()},i}(e.SprotoTypeBase);e.sc_ride_eat_res_request=s,__reflect(s.prototype,"Sproto.sc_ride_eat_res_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.slot=this.de.ri();break;case 2:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.slot&&this.se.wi(this.slot,1),void 0!=this.level&&this.se.wi(this.level,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ride_equip_uplevel_res_request=n,__reflect(n.prototype,"Sproto.sc_ride_equip_uplevel_res_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.slot=this.de.ri();break;case 2:this.star=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.slot&&this.se.wi(this.slot,1),void 0!=this.star&&this.se.wi(this.star,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ride_equip_upstar_res_request=r,__reflect(r.prototype,"Sproto.sc_ride_equip_upstar_res_request");var a=function(t){function i(e){return void 0===e&&(e=null),t.call(this,4,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.roleid=this.de.ri();break;case 1:this.slot=this.de.ri();break;case 2:this.itemid=this.de.ri();break;case 3:this.attr=this.de.roa(e.attribute_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.slot&&this.se.wi(this.slot,1),void 0!=this.itemid&&this.se.wi(this.itemid,2),void 0!=this.attr&&this.se.woa(this.attr,3),this.se.Close()},i}(e.SprotoTypeBase);e.sc_ride_equipchange_res_request=a,__reflect(a.prototype,"Sproto.sc_ride_equipchange_res_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.slot=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.slot&&this.se.wi(this.slot,1),this.se.Close()
},t}(e.SprotoTypeBase);e.sc_ride_equipoff_res_request=l,__reflect(l.prototype,"Sproto.sc_ride_equipoff_res_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.status=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.status&&this.se.wi(this.status,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ride_getaward_res_request=h,__reflect(h.prototype,"Sproto.sc_ride_getaward_res_request");var c=function(e){function i(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.roa(t);break;case 1:this.achieve=this.de.ria();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),void 0!=this.achieve&&this.se.wia(this.achieve,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_ride_init_res_request=c,__reflect(c.prototype,"Sproto.sc_ride_init_res_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.level&&this.se.wi(this.level,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ride_skillup_res_request=u,__reflect(u.prototype,"Sproto.sc_ride_skillup_res_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.level&&this.se.wi(this.level,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ride_uplevel_res_request=d,__reflect(d.prototype,"Sproto.sc_ride_uplevel_res_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.star=this.de.ri();break;case 2:this.exp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.star&&this.se.wi(this.star,1),void 0!=this.exp&&this.se.wi(this.exp,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ride_upstar_res_request=p,__reflect(p.prototype,"Sproto.sc_ride_upstar_res_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ring_active_request=t,__reflect(t.prototype,"Sproto.cs_ring_active_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 1:this.slotIndex=this.de.ri();break;case 2:this.handle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.slotIndex&&this.se.wi(this.slotIndex,1),void 0!=this.handle&&this.se.wi(this.handle,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ring_soul_evil_change_request=i,__reflect(i.prototype,"Sproto.cs_ring_soul_evil_change_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ring_uplevel_request=o,__reflect(o.prototype,"Sproto.cs_ring_uplevel_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ringboss_init_request=s,__reflect(s.prototype,"Sproto.cs_ringboss_init_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 1:this.slotIndex=this.de.ri();break;case 2:this.handle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.slotIndex&&this.se.wi(this.slotIndex,1),void 0!=this.handle&&this.se.wi(this.handle,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_wash_soul_evil_type_request=n,__reflect(n.prototype,"Sproto.cs_wash_soul_evil_type_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ringboss_enter_req_request=r,__reflect(r.prototype,"Sproto.sc_ringboss_enter_req_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ringboss_refresh_req_request=a,__reflect(a.prototype,"Sproto.sc_ringboss_refresh_req_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.configId=this.de.ri();break;case 1:this.zslevel=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.configId&&this.se.wi(this.configId,0),void 0!=this.zslevel&&this.se.wi(this.zslevel,1),this.se.Close()},t}(e.SprotoTypeBase);e.active_ring_data=t,__reflect(t.prototype,"Sproto.active_ring_data");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.level&&this.se.wi(this.level,1),this.se.Close()},t}(e.SprotoTypeBase);e.ring_data=i,__reflect(i.prototype,"Sproto.ring_data");var o=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.slotIndex=this.de.ri();break;case 1:this.itemData=this.de.ro(e.item_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.slotIndex&&this.se.wi(this.slotIndex,0),void 0!=this.itemData&&this.se.wo(this.itemData,1),this.se.Close()},i}(e.SprotoTypeBase);e.ring_soul_slot_data=o,__reflect(o.prototype,"Sproto.ring_soul_slot_data");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.value=this.de.ri();break;case 2:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.value&&this.se.wi(this.value,1),void 0!=this.state&&this.se.wi(this.state,2),this.se.Close()},t}(e.SprotoTypeBase);e.ring_task=s,__reflect(s.prototype,"Sproto.ring_task");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.datas=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.datas&&this.se.woa(this.datas,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ring_datas_request=n,__reflect(n.prototype,"Sproto.sc_ring_datas_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.task=this.de.ro(s);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.task&&this.se.wo(this.task,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ring_onetask_request=r,__reflect(r.prototype,"Sproto.sc_ring_onetask_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.ringid=this.de.ri();break;case 1:this.endTime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.ringid&&this.se.wi(this.ringid,0),void 0!=this.endTime&&this.se.wi(this.endTime,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ring_open_request=a,__reflect(a.prototype,"Sproto.sc_ring_open_request");var l=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.power=this.de.ri();break;case 1:this.slotData=this.de.roa(o);break;case 2:this.activeSoulEvil=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.power&&this.se.wi(this.power,0),void 0!=this.slotData&&this.se.woa(this.slotData,1),void 0!=this.activeSoulEvil&&this.se.woa(this.activeSoulEvil,2),this.se.Close()},i}(e.SprotoTypeBase);e.sc_ring_soul_data_request=l,__reflect(l.prototype,"Sproto.sc_ring_soul_data_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.slotIndex=this.de.ri();break;case 1:this.retCode=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.slotIndex&&this.se.wi(this.slotIndex,0),void 0!=this.retCode&&this.se.wi(this.retCode,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ring_soul_evil_change_ret_request=h,__reflect(h.prototype,"Sproto.sc_ring_soul_evil_change_ret_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.slotIndex=this.de.ri();break;case 1:this.retCode=this.de.ri();break;case 2:this.newSoulEvilType=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.slotIndex&&this.se.wi(this.slotIndex,0),void 0!=this.retCode&&this.se.wi(this.retCode,1),void 0!=this.newSoulEvilType&&this.se.wi(this.newSoulEvilType,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ring_soul_evil_wash_ret_request=c,__reflect(c.prototype,"Sproto.sc_ring_soul_evil_wash_ret_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.task=this.de.roa(s);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.task&&this.se.woa(this.task,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ring_taskinfo_request=u,__reflect(u.prototype,"Sproto.sc_ring_taskinfo_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.rb();break;case 1:this.data=this.de.ro(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wb(this.result,0),void 0!=this.data&&this.se.wo(this.data,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ring_uplevel_result_request=d,__reflect(d.prototype,"Sproto.sc_ring_uplevel_result_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.chalTimes=this.de.ri();break;case 1:this.refreshTimes=this.de.ri();break;case 2:this.activeValue=this.de.ri();break;case 3:this.bosslist=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.chalTimes&&this.se.wi(this.chalTimes,0),void 0!=this.refreshTimes&&this.se.wi(this.refreshTimes,1),void 0!=this.activeValue&&this.se.wi(this.activeValue,2),void 0!=this.bosslist&&this.se.wia(this.bosslist,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ringboss_init_request=p,__reflect(p.prototype,"Sproto.sc_ringboss_init_request")}(Sproto||(Sproto={}));var S2cProtocol=function(e){function t(){var i=e.call(this)||this;return i.Protocol.SetProtocol(t.actor_die_notice),i.Protocol.SetRequest(t.actor_die_notice,Sproto.actor_die_notice_request),i.Protocol.SetProtocol(t.actor_guild_change),i.Protocol.SetRequest(t.actor_guild_change,Sproto.actor_guild_change_request),i.Protocol.SetProtocol(t.attr_update),i.Protocol.SetRequest(t.attr_update,Sproto.attr_update_request),i.Protocol.SetProtocol(t.blood_update),i.Protocol.SetRequest(t.blood_update,Sproto.blood_update_request),i.Protocol.SetProtocol(t.checkAccountRet),i.Protocol.SetRequest(t.checkAccountRet,Sproto.checkAccountRet_request),i.Protocol.SetProtocol(t.create_monster_entity),i.Protocol.SetRequest(t.create_monster_entity,Sproto.create_monster_entity_request),i.Protocol.SetProtocol(t.create_pet_entity),i.Protocol.SetRequest(t.create_pet_entity,Sproto.create_pet_entity_request),i.Protocol.SetProtocol(t.create_role_entity),i.Protocol.SetRequest(t.create_role_entity,Sproto.create_role_entity_request),i.Protocol.SetProtocol(t.enter_map),i.Protocol.SetRequest(t.enter_map,Sproto.enter_map_request),i.Protocol.SetProtocol(t.entity_mp_update),i.Protocol.SetRequest(t.entity_mp_update,Sproto.entity_mp_update_request),i.Protocol.SetProtocol(t.exp_change),i.Protocol.SetRequest(t.exp_change,Sproto.exp_change_request),i.Protocol.SetProtocol(t.first_register),i.Protocol.SetRequest(t.first_register,Sproto.first_register_request),i.Protocol.SetProtocol(t.gold_change),i.Protocol.SetRequest(t.gold_change,Sproto.gold_change_request),i.Protocol.SetProtocol(t.move_entity),i.Protocol.SetRequest(t.move_entity,Sproto.move_entity_request),i.Protocol.SetProtocol(t.remove_entity),i.Protocol.SetRequest(t.remove_entity,Sproto.remove_entity_request),i.Protocol.SetProtocol(t.scActorBase),i.Protocol.SetRequest(t.scActorBase,Sproto.scActorBase_request),i.Protocol.SetProtocol(t.scRoleBase),i.Protocol.SetRequest(t.scRoleBase,Sproto.scRoleBase_request),i.Protocol.SetProtocol(t.sc_activity_RMB_info),i.Protocol.SetRequest(t.sc_activity_RMB_info,Sproto.sc_activity_RMB_info_request),i.Protocol.SetProtocol(t.sc_activity_dabiao_info),i.Protocol.SetRequest(t.sc_activity_dabiao_info,Sproto.sc_activity_dabiao_info_request),i.Protocol.SetProtocol(t.sc_activity_dabiao_reward),i.Protocol.SetRequest(t.sc_activity_dabiao_reward,Sproto.sc_activity_dabiao_reward_request),i.Protocol.SetProtocol(t.sc_activity_init_info),i.Protocol.SetRequest(t.sc_activity_init_info,Sproto.sc_activity_init_info_request),i.Protocol.SetProtocol(t.sc_activity_reward_result),i.Protocol.SetRequest(t.sc_activity_reward_result,Sproto.sc_activity_reward_result_request),i.Protocol.SetProtocol(t.sc_activity_update_info),i.Protocol.SetRequest(t.sc_activity_update_info,Sproto.sc_activity_update_info_request),i.Protocol.SetProtocol(t.sc_activity_warorder_exreward),i.Protocol.SetRequest(t.sc_activity_warorder_exreward,Sproto.sc_activity_warorder_exreward_request),i.Protocol.SetProtocol(t.sc_activity_warorder_reward),i.Protocol.SetRequest(t.sc_activity_warorder_reward,Sproto.sc_activity_warorder_reward_request),i.Protocol.SetProtocol(t.sc_activity_yuanbao),i.Protocol.SetRequest(t.sc_activity_yuanbao,Sproto.sc_activity_yuanbao_request),i.Protocol.SetProtocol(t.sc_activityw_dresshunt_ret),i.Protocol.SetRequest(t.sc_activityw_dresshunt_ret,Sproto.sc_activityw_dresshunt_ret_request),i.Protocol.SetProtocol(t.sc_activityw_update_info),i.Protocol.SetRequest(t.sc_activityw_update_info,Sproto.sc_activityw_update_info_request),i.Protocol.SetProtocol(t.sc_actor_base_info_aritifact),i.Protocol.SetRequest(t.sc_actor_base_info_aritifact,Sproto.sc_actor_base_info_aritifact_request),i.Protocol.SetProtocol(t.sc_actor_base_info_exring),i.Protocol.SetRequest(t.sc_actor_base_info_exring,Sproto.sc_actor_base_info_exring_request),i.Protocol.SetProtocol(t.sc_actor_base_info_fuwen),i.Protocol.SetRequest(t.sc_actor_base_info_fuwen,Sproto.sc_actor_base_info_fuwen_request),i.Protocol.SetProtocol(t.sc_actor_base_info_godequip),i.Protocol.SetRequest(t.sc_actor_base_info_godequip,Sproto.sc_actor_base_info_godequip_request),i.Protocol.SetProtocol(t.sc_actor_base_info_jingmai),i.Protocol.SetRequest(t.sc_actor_base_info_jingmai,Sproto.sc_actor_base_info_jingmai_request),i.Protocol.SetProtocol(t.sc_actor_base_info_lizhuang),i.Protocol.SetRequest(t.sc_actor_base_info_lizhuang,Sproto.sc_actor_base_info_lizhuang_request),i.Protocol.SetProtocol(t.sc_actor_base_info_skillmiji),i.Protocol.SetRequest(t.sc_actor_base_info_skillmiji,Sproto.sc_actor_base_info_skillmiji_request),i.Protocol.SetProtocol(t.sc_actor_base_info_talent),i.Protocol.SetRequest(t.sc_actor_base_info_talent,Sproto.sc_actor_base_info_talent_request),i.Protocol.SetProtocol(t.sc_actor_dead),i.Protocol.SetRequest(t.sc_actor_dead,Sproto.sc_actor_dead_request),i.Protocol.SetProtocol(t.sc_actor_power),i.Protocol.SetRequest(t.sc_actor_power,Sproto.sc_actor_power_request),i.Protocol.SetProtocol(t.sc_add_small_routine_state),i.Protocol.SetRequest(t.sc_add_small_routine_state,Sproto.sc_add_small_routine_state_request),i.Protocol.SetProtocol(t.sc_already_attack_actor),i.Protocol.SetRequest(t.sc_already_attack_actor,Sproto.sc_already_attack_actor_request),i.Protocol.SetProtocol(t.sc_artifact_datas),i.Protocol.SetRequest(t.sc_artifact_datas,Sproto.sc_artifact_datas_request),i.Protocol.SetProtocol(t.sc_artifact_progress_res),i.Protocol.SetRequest(t.sc_artifact_progress_res,Sproto.sc_artifact_progress_res_request),i.Protocol.SetProtocol(t.sc_artifact_stone_res),i.Protocol.SetRequest(t.sc_artifact_stone_res,Sproto.sc_artifact_stone_res_request),i.Protocol.SetProtocol(t.sc_artifact_uplevel_result),i.Protocol.SetRequest(t.sc_artifact_uplevel_result,Sproto.sc_artifact_uplevel_result_request),i.Protocol.SetProtocol(t.sc_bag_compose_result),i.Protocol.SetRequest(t.sc_bag_compose_result,Sproto.sc_bag_compose_result_request),i.Protocol.SetProtocol(t.sc_bag_danyao_info),i.Protocol.SetRequest(t.sc_bag_danyao_info,Sproto.sc_bag_danyao_info_request),i.Protocol.SetProtocol(t.sc_bag_deal_add_item),i.Protocol.SetRequest(t.sc_bag_deal_add_item,Sproto.sc_bag_deal_add_item_request),i.Protocol.SetProtocol(t.sc_bag_deal_delete_item),i.Protocol.SetRequest(t.sc_bag_deal_delete_item,Sproto.sc_bag_deal_delete_item_request),i.Protocol.SetProtocol(t.sc_bag_deal_valumn_add),i.Protocol.SetRequest(t.sc_bag_deal_valumn_add,Sproto.sc_bag_deal_valumn_add_request),i.Protocol.SetProtocol(t.sc_bag_get_tendraw_equip),i.Protocol.SetRequest(t.sc_bag_get_tendraw_equip,Sproto.sc_bag_get_tendraw_equip_request),i.Protocol.SetProtocol(t.sc_bag_get_ticket_equip),i.Protocol.SetRequest(t.sc_bag_get_ticket_equip,Sproto.sc_bag_get_ticket_equip_request),i.Protocol.SetProtocol(t.sc_bag_get_treasure_equip),i.Protocol.SetRequest(t.sc_bag_get_treasure_equip,Sproto.sc_bag_get_treasure_equip_request),i.Protocol.SetProtocol(t.sc_bag_init_data),i.Protocol.SetRequest(t.sc_bag_init_data,Sproto.sc_bag_init_data_request),i.Protocol.SetProtocol(t.sc_bag_mix_item_back),i.Protocol.SetRequest(t.sc_bag_mix_item_back,Sproto.sc_bag_mix_item_back_request),i.Protocol.SetProtocol(t.sc_bag_update_item_data),i.Protocol.SetRequest(t.sc_bag_update_item_data,Sproto.sc_bag_update_item_data_request),i.Protocol.SetProtocol(t.sc_bag_user_item_back),i.Protocol.SetRequest(t.sc_bag_user_item_back,Sproto.sc_bag_user_item_back_request),i.Protocol.SetProtocol(t.sc_base_game_time),i.Protocol.SetRequest(t.sc_base_game_time,Sproto.sc_base_game_time_request),i.Protocol.SetProtocol(t.sc_base_open_day),i.Protocol.SetRequest(t.sc_base_open_day,Sproto.sc_base_open_day_request),i.Protocol.SetProtocol(t.sc_base_replace_account),i.Protocol.SetProtocol(t.sc_basic_info),i.Protocol.SetRequest(t.sc_basic_info,Sproto.sc_basic_info_request),i.Protocol.SetProtocol(t.sc_biaoche_berob_record),i.Protocol.SetRequest(t.sc_biaoche_berob_record,Sproto.sc_biaoche_berob_record_request),i.Protocol.SetProtocol(t.sc_biaoche_list),i.Protocol.SetRequest(t.sc_biaoche_list,Sproto.sc_biaoche_list_request),i.Protocol.SetProtocol(t.sc_biaoche_refresh_result),i.Protocol.SetRequest(t.sc_biaoche_refresh_result,Sproto.sc_biaoche_refresh_result_request),i.Protocol.SetProtocol(t.sc_biaoche_reward_result),i.Protocol.SetProtocol(t.sc_can_attack_actor),i.Protocol.SetRequest(t.sc_can_attack_actor,Sproto.sc_can_attack_actor_request),i.Protocol.SetProtocol(t.sc_can_attack_boss),i.Protocol.SetRequest(t.sc_can_attack_boss,Sproto.sc_can_attack_boss_request),i.Protocol.SetProtocol(t.sc_challenge_raid_update_info),i.Protocol.SetRequest(t.sc_challenge_raid_update_info,Sproto.sc_challenge_raid_update_info_request),i.Protocol.SetProtocol(t.sc_chat_is_send_success),i.Protocol.SetRequest(t.sc_chat_is_send_success,Sproto.sc_chat_is_send_success_request),i.Protocol.SetProtocol(t.sc_chat_msg_delete),i.Protocol.SetRequest(t.sc_chat_msg_delete,Sproto.sc_chat_msg_delete_request),i.Protocol.SetProtocol(t.sc_chat_new_msg),i.Protocol.SetRequest(t.sc_chat_new_msg,Sproto.sc_chat_new_msg_request),i.Protocol.SetProtocol(t.sc_chat_system_message),i.Protocol.SetRequest(t.sc_chat_system_message,Sproto.sc_chat_system_message_request),i.Protocol.SetProtocol(t.sc_cross_boss_list),i.Protocol.SetRequest(t.sc_cross_boss_list,Sproto.sc_cross_boss_list_request),i.Protocol.SetProtocol(t.sc_cross_buy_combat_num),i.Protocol.SetRequest(t.sc_cross_buy_combat_num,Sproto.sc_cross_buy_combat_num_request),i.Protocol.SetProtocol(t.sc_cross_combat_result),i.Protocol.SetRequest(t.sc_cross_combat_result,Sproto.sc_cross_combat_result_request),i.Protocol.SetProtocol(t.sc_cross_gain_tianti_history_award),i.Protocol.SetRequest(t.sc_cross_gain_tianti_history_award,Sproto.sc_cross_gain_tianti_history_award_request),i.Protocol.SetProtocol(t.sc_cross_get_combat_record),i.Protocol.SetRequest(t.sc_cross_get_combat_record,Sproto.sc_cross_get_combat_record_request),i.Protocol.SetProtocol(t.sc_cross_get_self_info),i.Protocol.SetRequest(t.sc_cross_get_self_info,Sproto.sc_cross_get_self_info_request),i.Protocol.SetProtocol(t.sc_cross_get_tianti_history_rank),i.Protocol.SetRequest(t.sc_cross_get_tianti_history_rank,Sproto.sc_cross_get_tianti_history_rank_request),i.Protocol.SetProtocol(t.sc_cross_get_tianti_rank_info),i.Protocol.SetRequest(t.sc_cross_get_tianti_rank_info,Sproto.sc_cross_get_tianti_rank_info_request),i.Protocol.SetProtocol(t.sc_cross_start_combat),i.Protocol.SetRequest(t.sc_cross_start_combat,Sproto.sc_cross_start_combat_request),i.Protocol.SetProtocol(t.sc_cur_attr_target),i.Protocol.SetRequest(t.sc_cur_attr_target,Sproto.sc_cur_attr_target_request),i.Protocol.SetProtocol(t.sc_currency_change),i.Protocol.SetRequest(t.sc_currency_change,Sproto.sc_currency_change_request),i.Protocol.SetProtocol(t.sc_double_biaoche_notice),i.Protocol.SetRequest(t.sc_double_biaoche_notice,Sproto.sc_double_biaoche_notice_request),i.Protocol.SetProtocol(t.sc_double_mining_notice),i.Protocol.SetRequest(t.sc_double_mining_notice,Sproto.sc_double_mining_notice_request),i.Protocol.SetProtocol(t.sc_dress_time_end),i.Protocol.SetRequest(t.sc_dress_time_end,Sproto.sc_dress_time_end_request),i.Protocol.SetProtocol(t.sc_eggbroken_add_record),i.Protocol.SetRequest(t.sc_eggbroken_add_record,Sproto.sc_eggbroken_add_record_request),i.Protocol.SetProtocol(t.sc_eggbroken_hunt_result),i.Protocol.SetRequest(t.sc_eggbroken_hunt_result,Sproto.sc_eggbroken_hunt_result_request),i.Protocol.SetProtocol(t.sc_eggbroken_info),i.Protocol.SetRequest(t.sc_eggbroken_info,Sproto.sc_eggbroken_info_request),i.Protocol.SetProtocol(t.sc_eggbroken_record_datas),i.Protocol.SetRequest(t.sc_eggbroken_record_datas,Sproto.sc_eggbroken_record_datas_request),i.Protocol.SetProtocol(t.sc_element_set_res),i.Protocol.SetRequest(t.sc_element_set_res,Sproto.sc_element_set_res_request),i.Protocol.SetProtocol(t.sc_encounter_battle_result),i.Protocol.SetRequest(t.sc_encounter_battle_result,Sproto.sc_encounter_battle_result_request),i.Protocol.SetProtocol(t.sc_encounter_data_update),i.Protocol.SetRequest(t.sc_encounter_data_update,Sproto.sc_encounter_data_update_request),i.Protocol.SetProtocol(t.sc_encounter_deal_data),i.Protocol.SetRequest(t.sc_encounter_deal_data,Sproto.sc_encounter_deal_data_request),i.Protocol.SetProtocol(t.sc_encounter_del_data),i.Protocol.SetRequest(t.sc_encounter_del_data,Sproto.sc_encounter_del_data_request),i.Protocol.SetProtocol(t.sc_encounter_get_boss_award),i.Protocol.SetRequest(t.sc_encounter_get_boss_award,Sproto.sc_encounter_get_boss_award_request),i.Protocol.SetProtocol(t.sc_encounter_inquire_record),i.Protocol.SetRequest(t.sc_encounter_inquire_record,Sproto.sc_encounter_inquire_record_request),i.Protocol.SetProtocol(t.sc_encounter_item_info),i.Protocol.SetRequest(t.sc_encounter_item_info,Sproto.sc_encounter_item_info_request),i.Protocol.SetProtocol(t.sc_encounter_last_refresh_time),i.Protocol.SetRequest(t.sc_encounter_last_refresh_time,Sproto.sc_encounter_last_refresh_time_request),i.Protocol.SetProtocol(t.sc_encounter_my_data),i.Protocol.SetRequest(t.sc_encounter_my_data,Sproto.sc_encounter_my_data_request),i.Protocol.SetProtocol(t.sc_encounter_news),i.Protocol.SetRequest(t.sc_encounter_news,Sproto.sc_encounter_news_request),i.Protocol.SetProtocol(t.sc_encounter_news_list),i.Protocol.SetRequest(t.sc_encounter_news_list,Sproto.sc_encounter_news_list_request),i.Protocol.SetProtocol(t.sc_encounter_open_result),i.Protocol.SetRequest(t.sc_encounter_open_result,Sproto.sc_encounter_open_result_request),i.Protocol.SetProtocol(t.sc_encounter_player_rob),i.Protocol.SetRequest(t.sc_encounter_player_rob,Sproto.sc_encounter_player_rob_request),i.Protocol.SetProtocol(t.sc_encounter_update_will_boss),i.Protocol.SetRequest(t.sc_encounter_update_will_boss,Sproto.sc_encounter_update_will_boss_request),i.Protocol.SetProtocol(t.sc_encounter_will_boss_result),i.Protocol.SetRequest(t.sc_encounter_will_boss_result,Sproto.sc_encounter_will_boss_result_request),i.Protocol.SetProtocol(t.sc_enter_top_actor),i.Protocol.SetRequest(t.sc_enter_top_actor,Sproto.sc_enter_top_actor_request),i.Protocol.SetProtocol(t.sc_enter_tryroad_raid),i.Protocol.SetRequest(t.sc_enter_tryroad_raid,Sproto.sc_enter_tryroad_raid_request),i.Protocol.SetProtocol(t.sc_equip_autosmelt_res),i.Protocol.SetRequest(t.sc_equip_autosmelt_res,Sproto.sc_equip_autosmelt_res_request),i.Protocol.SetProtocol(t.sc_equip_deal_smelt_result),i.Protocol.SetRequest(t.sc_equip_deal_smelt_result,Sproto.sc_equip_deal_smelt_result_request),i.Protocol.SetProtocol(t.sc_equip_deal_upgrade_result),i.Protocol.SetRequest(t.sc_equip_deal_upgrade_result,Sproto.sc_equip_deal_upgrade_result_request),i.Protocol.SetProtocol(t.sc_equip_lvl_upgrade),i.Protocol.SetRequest(t.sc_equip_lvl_upgrade,Sproto.sc_equip_lvl_upgrade_request),i.Protocol.SetProtocol(t.sc_equip_resolve_res),i.Protocol.SetRequest(t.sc_equip_resolve_res,Sproto.sc_equip_resolve_res_request),i.Protocol.SetProtocol(t.sc_equip_star_upgrade),i.Protocol.SetRequest(t.sc_equip_star_upgrade,Sproto.sc_equip_star_upgrade_request),i.Protocol.SetProtocol(t.sc_equip_update_data),i.Protocol.SetRequest(t.sc_equip_update_data,Sproto.sc_equip_update_data_request),i.Protocol.SetProtocol(t.sc_equip_zhuanzhi_power),i.Protocol.SetRequest(t.sc_equip_zhuanzhi_power,Sproto.sc_equip_zhuanzhi_power_request),i.Protocol.SetProtocol(t.sc_equip_zhuanzhi_skill),i.Protocol.SetRequest(t.sc_equip_zhuanzhi_skill,Sproto.sc_equip_zhuanzhi_skill_request),i.Protocol.SetProtocol(t.sc_error_code),i.Protocol.SetRequest(t.sc_error_code,Sproto.sc_error_code_request),i.Protocol.SetProtocol(t.sc_essence_update_data),i.Protocol.SetRequest(t.sc_essence_update_data,Sproto.sc_essence_update_data_request),i.Protocol.SetProtocol(t.sc_expjade_addexp),i.Protocol.SetRequest(t.sc_expjade_addexp,Sproto.sc_expjade_addexp_request),i.Protocol.SetProtocol(t.sc_expjade_data),i.Protocol.SetRequest(t.sc_expjade_data,Sproto.sc_expjade_data_request),i.Protocol.SetProtocol(t.sc_expjade_use_result),i.Protocol.SetRequest(t.sc_expjade_use_result,Sproto.sc_expjade_use_result_request),i.Protocol.SetProtocol(t.sc_exten_info),i.Protocol.SetRequest(t.sc_exten_info,Sproto.sc_exten_info_request),i.Protocol.SetProtocol(t.sc_faq_res),i.Protocol.SetRequest(t.sc_faq_res,Sproto.sc_faq_res_request),i.Protocol.SetProtocol(t.sc_fieldexp_buff_res),i.Protocol.SetRequest(t.sc_fieldexp_buff_res,Sproto.sc_fieldexp_buff_res_request),i.Protocol.SetProtocol(t.sc_find_assets_init_info),i.Protocol.SetRequest(t.sc_find_assets_init_info,Sproto.sc_find_assets_init_info_request),i.Protocol.SetProtocol(t.sc_forge_back_goods_success),i.Protocol.SetRequest(t.sc_forge_back_goods_success,Sproto.sc_forge_back_goods_success_request),i.Protocol.SetProtocol(t.sc_forge_belss_update),i.Protocol.SetRequest(t.sc_forge_belss_update,Sproto.sc_forge_belss_update_request),i.Protocol.SetProtocol(t.sc_forge_bless_boost_res),i.Protocol.SetRequest(t.sc_forge_bless_boost_res,Sproto.sc_forge_bless_boost_res_request),i.Protocol.SetProtocol(t.sc_forge_bless_ronglu_success),i.Protocol.SetRequest(t.sc_forge_bless_ronglu_success,Sproto.sc_forge_bless_ronglu_success_request),i.Protocol.SetProtocol(t.sc_forge_bless_smelt_res),i.Protocol.SetRequest(t.sc_forge_bless_smelt_res,Sproto.sc_forge_bless_smelt_res_request),i.Protocol.SetProtocol(t.sc_forge_bless_upgrade_res),i.Protocol.SetRequest(t.sc_forge_bless_upgrade_res,Sproto.sc_forge_bless_upgrade_res_request),i.Protocol.SetProtocol(t.sc_forge_update_data),i.Protocol.SetRequest(t.sc_forge_update_data,Sproto.sc_forge_update_data_request),i.Protocol.SetProtocol(t.sc_fuben_coutdown),i.Protocol.SetRequest(t.sc_fuben_coutdown,Sproto.sc_fuben_coutdown_request),i.Protocol.SetProtocol(t.sc_func_tips),i.Protocol.SetRequest(t.sc_func_tips,Sproto.sc_func_tips_request),i.Protocol.SetProtocol(t.sc_funopen_res),i.Protocol.SetRequest(t.sc_funopen_res,Sproto.sc_funopen_res_request),i.Protocol.SetProtocol(t.sc_fuwen_equipup_data),i.Protocol.SetRequest(t.sc_fuwen_equipup_data,Sproto.sc_fuwen_equipup_data_request),i.Protocol.SetProtocol(t.sc_fuwen_open_ret),i.Protocol.SetRequest(t.sc_fuwen_open_ret,Sproto.sc_fuwen_open_ret_request),i.Protocol.SetProtocol(t.sc_gdwar_actor_data),i.Protocol.SetRequest(t.sc_gdwar_actor_data,Sproto.sc_gdwar_actor_data_request),i.Protocol.SetProtocol(t.sc_gdwar_attack_change),i.Protocol.SetRequest(t.sc_gdwar_attack_change,Sproto.sc_gdwar_attack_change_request),i.Protocol.SetProtocol(t.sc_gdwar_attackers),i.Protocol.SetRequest(t.sc_gdwar_attackers,Sproto.sc_gdwar_attackers_request),i.Protocol.SetProtocol(t.sc_gdwar_base_info),i.Protocol.SetRequest(t.sc_gdwar_base_info,Sproto.sc_gdwar_base_info_request),i.Protocol.SetProtocol(t.sc_gdwar_city_owner_change),i.Protocol.SetRequest(t.sc_gdwar_city_owner_change,Sproto.sc_gdwar_city_owner_change_request),i.Protocol.SetProtocol(t.sc_gdwar_enemies),i.Protocol.SetRequest(t.sc_gdwar_enemies,Sproto.sc_gdwar_enemies_request),i.Protocol.SetProtocol(t.sc_gdwar_flag_data),i.Protocol.SetRequest(t.sc_gdwar_flag_data,Sproto.sc_gdwar_flag_data_request),i.Protocol.SetProtocol(t.sc_gdwar_flag_notice),i.Protocol.SetRequest(t.sc_gdwar_flag_notice,Sproto.sc_gdwar_flag_notice_request),i.Protocol.SetProtocol(t.sc_gdwar_guild_group),i.Protocol.SetRequest(t.sc_gdwar_guild_group,Sproto.sc_gdwar_guild_group_request),i.Protocol.SetProtocol(t.sc_gdwar_guild_member),i.Protocol.SetRequest(t.sc_gdwar_guild_member,Sproto.sc_gdwar_guild_member_request),i.Protocol.SetProtocol(t.sc_gdwar_kill_info),i.Protocol.SetRequest(t.sc_gdwar_kill_info,Sproto.sc_gdwar_kill_info_request),i.Protocol.SetProtocol(t.sc_gdwar_lottery_over),i.Protocol.SetRequest(t.sc_gdwar_lottery_over,Sproto.sc_gdwar_lottery_over_request),i.Protocol.SetProtocol(t.sc_gdwar_lottery_point),i.Protocol.SetRequest(t.sc_gdwar_lottery_point,Sproto.sc_gdwar_lottery_point_request),i.Protocol.SetProtocol(t.sc_gdwar_lottery_start),i.Protocol.SetProtocol(t.sc_gdwar_reward),i.Protocol.SetRequest(t.sc_gdwar_reward,Sproto.sc_gdwar_reward_request),i.Protocol.SetProtocol(t.sc_gdwar_start_info),i.Protocol.SetRequest(t.sc_gdwar_start_info,Sproto.sc_gdwar_start_info_request),i.Protocol.SetProtocol(t.sc_gdwar_wall_rank),i.Protocol.SetRequest(t.sc_gdwar_wall_rank,Sproto.sc_gdwar_wall_rank_request),i.Protocol.SetProtocol(t.sc_gdwar_wall_reward),i.Protocol.SetRequest(t.sc_gdwar_wall_reward,Sproto.sc_gdwar_wall_reward_request),i.Protocol.SetProtocol(t.sc_gem_update_data),i.Protocol.SetRequest(t.sc_gem_update_data,Sproto.sc_gem_update_data_request),i.Protocol.SetProtocol(t.sc_get_actor_module_isactive),i.Protocol.SetRequest(t.sc_get_actor_module_isactive,Sproto.sc_get_actor_module_isactive_request),i.Protocol.SetProtocol(t.sc_get_caiquan_result),i.Protocol.SetRequest(t.sc_get_caiquan_result,Sproto.sc_get_caiquan_result_request),i.Protocol.SetProtocol(t.sc_get_cross_tianti_list),i.Protocol.SetRequest(t.sc_get_cross_tianti_list,Sproto.sc_get_cross_tianti_list_request),i.Protocol.SetProtocol(t.sc_get_tryroad_award),i.Protocol.SetRequest(t.sc_get_tryroad_award,Sproto.sc_get_tryroad_award_request),i.Protocol.SetProtocol(t.sc_get_tryroad_rank),i.Protocol.SetRequest(t.sc_get_tryroad_rank,Sproto.sc_get_tryroad_rank_request),i.Protocol.SetProtocol(t.sc_gold_guaji_all_die),i.Protocol.SetRequest(t.sc_gold_guaji_all_die,Sproto.sc_gold_guaji_all_die_request),i.Protocol.SetProtocol(t.sc_gold_guaji_combat_boss),i.Protocol.SetRequest(t.sc_gold_guaji_combat_boss,Sproto.sc_gold_guaji_combat_boss_request),i.Protocol.SetProtocol(t.sc_gold_guaji_info),i.Protocol.SetRequest(t.sc_gold_guaji_info,Sproto.sc_gold_guaji_info_request),i.Protocol.SetProtocol(t.sc_gold_guaji_mon_skill_num),i.Protocol.SetRequest(t.sc_gold_guaji_mon_skill_num,Sproto.sc_gold_guaji_mon_skill_num_request),i.Protocol.SetProtocol(t.sc_gold_guaji_obtain_items_info),i.Protocol.SetRequest(t.sc_gold_guaji_obtain_items_info,Sproto.sc_gold_guaji_obtain_items_info_request),i.Protocol.SetProtocol(t.sc_gold_guaji_over),i.Protocol.SetRequest(t.sc_gold_guaji_over,Sproto.sc_gold_guaji_over_request),i.Protocol.SetProtocol(t.sc_gold_guaji_over_obtain_items_info),i.Protocol.SetRequest(t.sc_gold_guaji_over_obtain_items_info,Sproto.sc_gold_guaji_over_obtain_items_info_request),i.Protocol.SetProtocol(t.sc_gold_guaji_pub_boss_ref),i.Protocol.SetRequest(t.sc_gold_guaji_pub_boss_ref,Sproto.sc_gold_guaji_pub_boss_ref_request),i.Protocol.SetProtocol(t.sc_gold_guaji_start_combat),i.Protocol.SetRequest(t.sc_gold_guaji_start_combat,Sproto.sc_gold_guaji_start_combat_request),i.Protocol.SetProtocol(t.sc_gold_guaji_start_relive),i.Protocol.SetRequest(t.sc_gold_guaji_start_relive,Sproto.sc_gold_guaji_start_relive_request),i.Protocol.SetProtocol(t.sc_guild_addhistory),i.Protocol.SetRequest(t.sc_guild_addhistory,Sproto.sc_guild_addhistory_request),i.Protocol.SetProtocol(t.sc_guild_allchat),i.Protocol.SetRequest(t.sc_guild_allchat,Sproto.sc_guild_allchat_request),i.Protocol.SetProtocol(t.sc_guild_apply),i.Protocol.SetRequest(t.sc_guild_apply,Sproto.sc_guild_apply_request),i.Protocol.SetProtocol(t.sc_guild_autoadd_ret),i.Protocol.SetRequest(t.sc_guild_autoadd_ret,Sproto.sc_guild_autoadd_ret_request),i.Protocol.SetProtocol(t.sc_guild_boss_call_info),i.Protocol.SetRequest(t.sc_guild_boss_call_info,Sproto.sc_guild_boss_call_info_request),i.Protocol.SetProtocol(t.sc_guild_boss_cd),i.Protocol.SetRequest(t.sc_guild_boss_cd,Sproto.sc_guild_boss_cd_request),i.Protocol.SetProtocol(t.sc_guild_boss_info),i.Protocol.SetRequest(t.sc_guild_boss_info,Sproto.sc_guild_boss_info_request),i.Protocol.SetProtocol(t.sc_guild_boss_rewards),i.Protocol.SetRequest(t.sc_guild_boss_rewards,Sproto.sc_guild_boss_rewards_request),i.Protocol.SetProtocol(t.sc_guild_broadcastchat),i.Protocol.SetRequest(t.sc_guild_broadcastchat,Sproto.sc_guild_broadcastchat_request),i.Protocol.SetProtocol(t.sc_guild_change_notice_ret),i.Protocol.SetRequest(t.sc_guild_change_notice_ret,Sproto.sc_guild_change_notice_ret_request),i.Protocol.SetProtocol(t.sc_guild_change_office_ret),i.Protocol.SetRequest(t.sc_guild_change_office_ret,Sproto.sc_guild_change_office_ret_request),i.Protocol.SetProtocol(t.sc_guild_concount),i.Protocol.SetRequest(t.sc_guild_concount,Sproto.sc_guild_concount_request),i.Protocol.SetProtocol(t.sc_guild_create_ret),i.Protocol.SetRequest(t.sc_guild_create_ret,Sproto.sc_guild_create_ret_request),i.Protocol.SetProtocol(t.sc_guild_fund),i.Protocol.SetRequest(t.sc_guild_fund,Sproto.sc_guild_fund_request),i.Protocol.SetProtocol(t.sc_guild_history),i.Protocol.SetRequest(t.sc_guild_history,Sproto.sc_guild_history_request),i.Protocol.SetProtocol(t.sc_guild_info),i.Protocol.SetRequest(t.sc_guild_info,Sproto.sc_guild_info_request),i.Protocol.SetProtocol(t.sc_guild_join_info),i.Protocol.SetProtocol(t.sc_guild_kick_ret),i.Protocol.SetRequest(t.sc_guild_kick_ret,Sproto.sc_guild_kick_ret_request),i.Protocol.SetProtocol(t.sc_guild_learnskill_ret),i.Protocol.SetRequest(t.sc_guild_learnskill_ret,Sproto.sc_guild_learnskill_ret_request),i.Protocol.SetProtocol(t.sc_guild_list),i.Protocol.SetRequest(t.sc_guild_list,Sproto.sc_guild_list_request),i.Protocol.SetProtocol(t.sc_guild_members),i.Protocol.SetRequest(t.sc_guild_members,Sproto.sc_guild_members_request),i.Protocol.SetProtocol(t.sc_guild_notice_apply),i.Protocol.SetRequest(t.sc_guild_notice_apply,Sproto.sc_guild_notice_apply_request),i.Protocol.SetProtocol(t.sc_guild_onetask),i.Protocol.SetRequest(t.sc_guild_onetask,Sproto.sc_guild_onetask_request),i.Protocol.SetProtocol(t.sc_guild_playerinfo),i.Protocol.SetRequest(t.sc_guild_playerinfo,Sproto.sc_guild_playerinfo_request),i.Protocol.SetProtocol(t.sc_guild_raid_actor_info),i.Protocol.SetRequest(t.sc_guild_raid_actor_info,Sproto.sc_guild_raid_actor_info_request),i.Protocol.SetProtocol(t.sc_guild_raid_overtime),i.Protocol.SetRequest(t.sc_guild_raid_overtime,Sproto.sc_guild_raid_overtime_request),i.Protocol.SetProtocol(t.sc_guild_raid_ranklist),i.Protocol.SetRequest(t.sc_guild_raid_ranklist,Sproto.sc_guild_raid_ranklist_request),i.Protocol.SetProtocol(t.sc_guild_raid_ranktop),i.Protocol.SetRequest(t.sc_guild_raid_ranktop,Sproto.sc_guild_raid_ranktop_request),i.Protocol.SetProtocol(t.sc_guild_raid_reward_pro),i.Protocol.SetRequest(t.sc_guild_raid_reward_pro,Sproto.sc_guild_raid_reward_pro_request),i.Protocol.SetProtocol(t.sc_guild_raid_stagerank),i.Protocol.SetRequest(t.sc_guild_raid_stagerank,Sproto.sc_guild_raid_stagerank_request),i.Protocol.SetProtocol(t.sc_guild_raid_starttime),i.Protocol.SetRequest(t.sc_guild_raid_starttime,Sproto.sc_guild_raid_starttime_request),i.Protocol.SetProtocol(t.sc_guild_raid_waveover),i.Protocol.SetRequest(t.sc_guild_raid_waveover,Sproto.sc_guild_raid_waveover_request),i.Protocol.SetProtocol(t.sc_guild_robber_actor_info),i.Protocol.SetRequest(t.sc_guild_robber_actor_info,Sproto.sc_guild_robber_actor_info_request),i.Protocol.SetProtocol(t.sc_guild_robber_info),i.Protocol.SetRequest(t.sc_guild_robber_info,Sproto.sc_guild_robber_info_request),i.Protocol.SetProtocol(t.sc_guild_robber_notice),i.Protocol.SetRequest(t.sc_guild_robber_notice,Sproto.sc_guild_robber_notice_request),i.Protocol.SetProtocol(t.sc_guild_robber_update),i.Protocol.SetRequest(t.sc_guild_robber_update,Sproto.sc_guild_robber_update_request),i.Protocol.SetProtocol(t.sc_guild_skillinfo),i.Protocol.SetRequest(t.sc_guild_skillinfo,Sproto.sc_guild_skillinfo_request),i.Protocol.SetProtocol(t.sc_guild_taskinfo),i.Protocol.SetRequest(t.sc_guild_taskinfo,Sproto.sc_guild_taskinfo_request),i.Protocol.SetProtocol(t.sc_guild_temperskill_ret),i.Protocol.SetRequest(t.sc_guild_temperskill_ret,Sproto.sc_guild_temperskill_ret_request),i.Protocol.SetProtocol(t.sc_guild_upbuilding_ret),i.Protocol.SetRequest(t.sc_guild_upbuilding_ret,Sproto.sc_guild_upbuilding_ret_request),i.Protocol.SetProtocol(t.sc_guildshop_info),i.Protocol.SetRequest(t.sc_guildshop_info,Sproto.sc_guildshop_info_request),i.Protocol.SetProtocol(t.sc_guildshop_open_ret),i.Protocol.SetRequest(t.sc_guildshop_open_ret,Sproto.sc_guildshop_open_ret_request),i.Protocol.SetProtocol(t.sc_guildshop_record),i.Protocol.SetRequest(t.sc_guildshop_record,Sproto.sc_guildshop_record_request),i.Protocol.SetProtocol(t.sc_guildwar_actor_scores),i.Protocol.SetRequest(t.sc_guildwar_actor_scores,Sproto.sc_guildwar_actor_scores_request),i.Protocol.SetProtocol(t.sc_guildwar_dayaward_info),i.Protocol.SetRequest(t.sc_guildwar_dayaward_info,Sproto.sc_guildwar_dayaward_info_request),i.Protocol.SetProtocol(t.sc_guildwar_disp_info),i.Protocol.SetRequest(t.sc_guildwar_disp_info,Sproto.sc_guildwar_disp_info_request),i.Protocol.SetProtocol(t.sc_guildwar_disp_ret),i.Protocol.SetRequest(t.sc_guildwar_disp_ret,Sproto.sc_guildwar_disp_ret_request),i.Protocol.SetProtocol(t.sc_guildwar_firstwinner_awardinfo),i.Protocol.SetRequest(t.sc_guildwar_firstwinner_awardinfo,Sproto.sc_guildwar_firstwinner_awardinfo_request),i.Protocol.SetProtocol(t.sc_guildwar_get_redpacket_ret),i.Protocol.SetRequest(t.sc_guildwar_get_redpacket_ret,Sproto.sc_guildwar_get_redpacket_ret_request),i.Protocol.SetProtocol(t.sc_guildwar_guild_rank_info),i.Protocol.SetRequest(t.sc_guildwar_guild_rank_info,Sproto.sc_guildwar_guild_rank_info_request),i.Protocol.SetProtocol(t.sc_guildwar_guild_scores),i.Protocol.SetRequest(t.sc_guildwar_guild_scores,Sproto.sc_guildwar_guild_scores_request),i.Protocol.SetProtocol(t.sc_guildwar_kffz_info),i.Protocol.SetRequest(t.sc_guildwar_kffz_info,Sproto.sc_guildwar_kffz_info_request),i.Protocol.SetProtocol(t.sc_guildwar_kfwin_records),i.Protocol.SetRequest(t.sc_guildwar_kfwin_records,Sproto.sc_guildwar_kfwin_records_request),i.Protocol.SetProtocol(t.sc_guildwar_redpacket_info),i.Protocol.SetRequest(t.sc_guildwar_redpacket_info,Sproto.sc_guildwar_redpacket_info_request),i.Protocol.SetProtocol(t.sc_guildwar_send_redpacket_ret),i.Protocol.SetRequest(t.sc_guildwar_send_redpacket_ret,Sproto.sc_guildwar_send_redpacket_ret_request),i.Protocol.SetProtocol(t.sc_guildwar_winleader),i.Protocol.SetRequest(t.sc_guildwar_winleader,Sproto.sc_guildwar_winleader_request),i.Protocol.SetProtocol(t.sc_guildwar_winner),i.Protocol.SetRequest(t.sc_guildwar_winner,Sproto.sc_guildwar_winner_request),i.Protocol.SetProtocol(t.sc_guildwar_winner_info),i.Protocol.SetRequest(t.sc_guildwar_winner_info,Sproto.sc_guildwar_winner_info_request),i.Protocol.SetProtocol(t.sc_heji_skill_data),i.Protocol.SetRequest(t.sc_heji_skill_data,Sproto.sc_heji_skill_data_request),i.Protocol.SetProtocol(t.sc_holygun_achievement),i.Protocol.SetRequest(t.sc_holygun_achievement,Sproto.sc_holygun_achievement_request),i.Protocol.SetProtocol(t.sc_holygun_eatdanyao),i.Protocol.SetRequest(t.sc_holygun_eatdanyao,Sproto.sc_holygun_eatdanyao_request),i.Protocol.SetProtocol(t.sc_holygun_init),i.Protocol.SetRequest(t.sc_holygun_init,Sproto.sc_holygun_init_request),i.Protocol.SetProtocol(t.sc_holygun_upscala),i.Protocol.SetRequest(t.sc_holygun_upscala,Sproto.sc_holygun_upscala_request),i.Protocol.SetProtocol(t.sc_holygun_upskill),i.Protocol.SetRequest(t.sc_holygun_upskill,Sproto.sc_holygun_upskill_request),i.Protocol.SetProtocol(t.sc_holygun_upstar),i.Protocol.SetRequest(t.sc_holygun_upstar,Sproto.sc_holygun_upstar_request),i.Protocol.SetProtocol(t.sc_kill_top_boss_actor),i.Protocol.SetRequest(t.sc_kill_top_boss_actor,Sproto.sc_kill_top_boss_actor_request),i.Protocol.SetProtocol(t.sc_ladder_buy_count),i.Protocol.SetRequest(t.sc_ladder_buy_count,Sproto.sc_ladder_buy_count_request),i.Protocol.SetProtocol(t.sc_ladder_get_record),i.Protocol.SetRequest(t.sc_ladder_get_record,Sproto.sc_ladder_get_record_request),i.Protocol.SetProtocol(t.sc_ladder_info),i.Protocol.SetRequest(t.sc_ladder_info,Sproto.sc_ladder_info_request),i.Protocol.SetProtocol(t.sc_ladder_player_back),i.Protocol.SetRequest(t.sc_ladder_player_back,Sproto.sc_ladder_player_back_request),i.Protocol.SetProtocol(t.sc_ladder_rank_list),i.Protocol.SetRequest(t.sc_ladder_rank_list,Sproto.sc_ladder_rank_list_request),i.Protocol.SetProtocol(t.sc_ladder_result),i.Protocol.SetRequest(t.sc_ladder_result,Sproto.sc_ladder_result_request),i.Protocol.SetProtocol(t.sc_legend_dress),i.Protocol.SetRequest(t.sc_legend_dress,Sproto.sc_legend_dress_request),i.Protocol.SetProtocol(t.sc_longzhuang_boost_ret),i.Protocol.SetRequest(t.sc_longzhuang_boost_ret,Sproto.sc_longzhuang_boost_ret_request),i.Protocol.SetProtocol(t.sc_longzhuang_upgrade_ret),i.Protocol.SetRequest(t.sc_longzhuang_upgrade_ret,Sproto.sc_longzhuang_upgrade_ret_request),i.Protocol.SetProtocol(t.sc_luckypackage_active_res),i.Protocol.SetRequest(t.sc_luckypackage_active_res,Sproto.sc_luckypackage_active_res_request),i.Protocol.SetProtocol(t.sc_luckypackage_res),i.Protocol.SetRequest(t.sc_luckypackage_res,Sproto.sc_luckypackage_res_request),i.Protocol.SetProtocol(t.sc_luckywheel_add_record),i.Protocol.SetRequest(t.sc_luckywheel_add_record,Sproto.sc_luckywheel_add_record_request),i.Protocol.SetProtocol(t.sc_luckywheel_goldPool_broadcast),i.Protocol.SetRequest(t.sc_luckywheel_goldPool_broadcast,Sproto.sc_luckywheel_goldPool_broadcast_request),i.Protocol.SetProtocol(t.sc_luckywheel_hunt),i.Protocol.SetRequest(t.sc_luckywheel_hunt,Sproto.sc_luckywheel_hunt_request),i.Protocol.SetProtocol(t.sc_luckywheel_rank),i.Protocol.SetRequest(t.sc_luckywheel_rank,Sproto.sc_luckywheel_rank_request),i.Protocol.SetProtocol(t.sc_luckywheel_record),i.Protocol.SetRequest(t.sc_luckywheel_record,Sproto.sc_luckywheel_record_request),i.Protocol.SetProtocol(t.sc_mail_add_info),i.Protocol.SetRequest(t.sc_mail_add_info,Sproto.sc_mail_add_info_request),i.Protocol.SetProtocol(t.sc_mail_delete),i.Protocol.SetRequest(t.sc_mail_delete,Sproto.sc_mail_delete_request),i.Protocol.SetProtocol(t.sc_mail_detailed_info),i.Protocol.SetRequest(t.sc_mail_detailed_info,Sproto.sc_mail_detailed_info_request),i.Protocol.SetProtocol(t.sc_mail_init_info),i.Protocol.SetRequest(t.sc_mail_init_info,Sproto.sc_mail_init_info_request),i.Protocol.SetProtocol(t.sc_mail_red_point),i.Protocol.SetRequest(t.sc_mail_red_point,Sproto.sc_mail_red_point_request),i.Protocol.SetProtocol(t.sc_mail_update_info),i.Protocol.SetRequest(t.sc_mail_update_info,Sproto.sc_mail_update_info_request),i.Protocol.SetProtocol(t.sc_miji_change_result),i.Protocol.SetRequest(t.sc_miji_change_result,Sproto.sc_miji_change_result_request),i.Protocol.SetProtocol(t.sc_miji_datas),i.Protocol.SetRequest(t.sc_miji_datas,Sproto.sc_miji_datas_request),i.Protocol.SetProtocol(t.sc_miji_fuben_award),i.Protocol.SetRequest(t.sc_miji_fuben_award,Sproto.sc_miji_fuben_award_request),i.Protocol.SetProtocol(t.sc_miji_fuben_award_resulte),i.Protocol.SetRequest(t.sc_miji_fuben_award_resulte,Sproto.sc_miji_fuben_award_resulte_request),i.Protocol.SetProtocol(t.sc_miji_fuben_enter_ret),i.Protocol.SetRequest(t.sc_miji_fuben_enter_ret,Sproto.sc_miji_fuben_enter_ret_request),i.Protocol.SetProtocol(t.sc_miji_fuben_finished),i.Protocol.SetRequest(t.sc_miji_fuben_finished,Sproto.sc_miji_fuben_finished_request),i.Protocol.SetProtocol(t.sc_miji_fuben_panel_info),i.Protocol.SetRequest(t.sc_miji_fuben_panel_info,Sproto.sc_miji_fuben_panel_info_request),i.Protocol.SetProtocol(t.sc_miji_fuben_quick_info),i.Protocol.SetRequest(t.sc_miji_fuben_quick_info,Sproto.sc_miji_fuben_quick_info_request),i.Protocol.SetProtocol(t.sc_miji_power_change),i.Protocol.SetRequest(t.sc_miji_power_change,Sproto.sc_miji_power_change_request),i.Protocol.SetProtocol(t.sc_miji_update),i.Protocol.SetRequest(t.sc_miji_update,Sproto.sc_miji_update_request),i.Protocol.SetProtocol(t.sc_mine_berob_record),i.Protocol.SetRequest(t.sc_mine_berob_record,Sproto.sc_mine_berob_record_request),i.Protocol.SetProtocol(t.sc_mine_info),i.Protocol.SetRequest(t.sc_mine_info,Sproto.sc_mine_info_request),i.Protocol.SetProtocol(t.sc_mine_map_info),i.Protocol.SetRequest(t.sc_mine_map_info,Sproto.sc_mine_map_info_request),i.Protocol.SetProtocol(t.sc_mine_refresh_result),i.Protocol.SetRequest(t.sc_mine_refresh_result,Sproto.sc_mine_refresh_result_request),i.Protocol.SetProtocol(t.sc_mine_reward_result),i.Protocol.SetProtocol(t.sc_money_recharge_gift_info),i.Protocol.SetRequest(t.sc_money_recharge_gift_info,Sproto.sc_money_recharge_gift_info_request),i.Protocol.SetProtocol(t.sc_money_tree_info),i.Protocol.SetRequest(t.sc_money_tree_info,Sproto.sc_money_tree_info_request),i.Protocol.SetProtocol(t.sc_money_tree_play_info),i.Protocol.SetRequest(t.sc_money_tree_play_info,Sproto.sc_money_tree_play_info_request),i.Protocol.SetProtocol(t.sc_money_tree_reward_info),i.Protocol.SetRequest(t.sc_money_tree_reward_info,Sproto.sc_money_tree_reward_info_request),i.Protocol.SetProtocol(t.sc_monopoly_buy_res),i.Protocol.SetRequest(t.sc_monopoly_buy_res,Sproto.sc_monopoly_buy_res_request),i.Protocol.SetProtocol(t.sc_monopoly_dice_res),i.Protocol.SetRequest(t.sc_monopoly_dice_res,Sproto.sc_monopoly_dice_res_request),i.Protocol.SetProtocol(t.sc_monopoly_exchange_res),i.Protocol.SetRequest(t.sc_monopoly_exchange_res,Sproto.sc_monopoly_exchange_res_request),i.Protocol.SetProtocol(t.sc_monopoly_getitem_res),i.Protocol.SetRequest(t.sc_monopoly_getitem_res,Sproto.sc_monopoly_getitem_res_request),i.Protocol.SetProtocol(t.sc_monopoly_log_res),i.Protocol.SetRequest(t.sc_monopoly_log_res,Sproto.sc_monopoly_log_res_request),i.Protocol.SetProtocol(t.sc_monopoly_nextlvl_res),i.Protocol.SetRequest(t.sc_monopoly_nextlvl_res,Sproto.sc_monopoly_nextlvl_res_request),i.Protocol.SetProtocol(t.sc_monopoly_rank_res),i.Protocol.SetRequest(t.sc_monopoly_rank_res,Sproto.sc_monopoly_rank_res_request),i.Protocol.SetProtocol(t.sc_monopoly_res),i.Protocol.SetRequest(t.sc_monopoly_res,Sproto.sc_monopoly_res_request),i.Protocol.SetProtocol(t.sc_monopoly_store_res),i.Protocol.SetRequest(t.sc_monopoly_store_res,Sproto.sc_monopoly_store_res_request),i.Protocol.SetProtocol(t.sc_monopoly_sync_res),i.Protocol.SetRequest(t.sc_monopoly_sync_res,Sproto.sc_monopoly_sync_res_request),i.Protocol.SetProtocol(t.sc_monopoly_tili_res),i.Protocol.SetRequest(t.sc_monopoly_tili_res,Sproto.sc_monopoly_tili_res_request),i.Protocol.SetProtocol(t.sc_monopoly_use_res),i.Protocol.SetRequest(t.sc_monopoly_use_res,Sproto.sc_monopoly_use_res_request),i.Protocol.SetProtocol(t.sc_monopoly_usespecial_res),i.Protocol.SetRequest(t.sc_monopoly_usespecial_res,Sproto.sc_monopoly_usespecial_res_request),i.Protocol.SetProtocol(t.sc_mystery_shop_open_state),i.Protocol.SetRequest(t.sc_mystery_shop_open_state,Sproto.sc_mystery_shop_open_state_request),i.Protocol.SetProtocol(t.sc_neigong_info),i.Protocol.SetRequest(t.sc_neigong_info,Sproto.sc_neigong_info_request),i.Protocol.SetProtocol(t.sc_notice),i.Protocol.SetRequest(t.sc_notice,Sproto.sc_notice_request),i.Protocol.SetProtocol(t.sc_notice_records),i.Protocol.SetRequest(t.sc_notice_records,Sproto.sc_notice_records_request),i.Protocol.SetProtocol(t.sc_offline_apply_res),i.Protocol.SetRequest(t.sc_offline_apply_res,Sproto.sc_offline_apply_res_request),i.Protocol.SetProtocol(t.sc_one_gift),i.Protocol.SetRequest(t.sc_one_gift,Sproto.sc_one_gift_request),i.Protocol.SetProtocol(t.sc_one_recharge_activity_gain),i.Protocol.SetRequest(t.sc_one_recharge_activity_gain,Sproto.sc_one_recharge_activity_gain_request),i.Protocol.SetProtocol(t.sc_one_recharge_activity_state),i.Protocol.SetRequest(t.sc_one_recharge_activity_state,Sproto.sc_one_recharge_activity_state_request),i.Protocol.SetProtocol(t.sc_online_res),i.Protocol.SetRequest(t.sc_online_res,Sproto.sc_online_res_request),i.Protocol.SetProtocol(t.sc_online_reward_res),i.Protocol.SetRequest(t.sc_online_reward_res,Sproto.sc_online_reward_res_request),i.Protocol.SetProtocol(t.sc_paidboss_notice_res),i.Protocol.SetRequest(t.sc_paidboss_notice_res,Sproto.sc_paidboss_notice_res_request),i.Protocol.SetProtocol(t.sc_paidboss_res),i.Protocol.SetRequest(t.sc_paidboss_res,Sproto.sc_paidboss_res_request),i.Protocol.SetProtocol(t.sc_paidboss_setting_res),i.Protocol.SetRequest(t.sc_paidboss_setting_res,Sproto.sc_paidboss_setting_res_request),i.Protocol.SetProtocol(t.sc_pet_activate_res),i.Protocol.SetRequest(t.sc_pet_activate_res,Sproto.sc_pet_activate_res_request),i.Protocol.SetProtocol(t.sc_pet_attach_init_res),i.Protocol.SetRequest(t.sc_pet_attach_init_res,Sproto.sc_pet_attach_init_res_request),i.Protocol.SetProtocol(t.sc_pet_attach_res),i.Protocol.SetRequest(t.sc_pet_attach_res,Sproto.sc_pet_attach_res_request),i.Protocol.SetProtocol(t.sc_pet_attach_unlock_res),i.Protocol.SetRequest(t.sc_pet_attach_unlock_res,Sproto.sc_pet_attach_unlock_res_request),i.Protocol.SetProtocol(t.sc_pet_attr_res),i.Protocol.SetRequest(t.sc_pet_attr_res,Sproto.sc_pet_attr_res_request),i.Protocol.SetProtocol(t.sc_pet_compose_res),i.Protocol.SetRequest(t.sc_pet_compose_res,Sproto.sc_pet_compose_res_request),i.Protocol.SetProtocol(t.sc_pet_init_res),i.Protocol.SetRequest(t.sc_pet_init_res,Sproto.sc_pet_init_res_request),i.Protocol.SetProtocol(t.sc_pet_pack_res),i.Protocol.SetRequest(t.sc_pet_pack_res,Sproto.sc_pet_pack_res_request),i.Protocol.SetProtocol(t.sc_pet_rename_res),i.Protocol.SetRequest(t.sc_pet_rename_res,Sproto.sc_pet_rename_res_request),i.Protocol.SetProtocol(t.sc_pet_setfight_res),i.Protocol.SetRequest(t.sc_pet_setfight_res,Sproto.sc_pet_setfight_res_request),i.Protocol.SetProtocol(t.sc_pet_skillup_res),i.Protocol.SetRequest(t.sc_pet_skillup_res,Sproto.sc_pet_skillup_res_request),i.Protocol.SetProtocol(t.sc_pet_smelt_res),i.Protocol.SetRequest(t.sc_pet_smelt_res,Sproto.sc_pet_smelt_res_request),i.Protocol.SetProtocol(t.sc_pet_sync_attr),i.Protocol.SetRequest(t.sc_pet_sync_attr,Sproto.sc_pet_sync_attr_request),i.Protocol.SetProtocol(t.sc_pet_uplevel_res),i.Protocol.SetRequest(t.sc_pet_uplevel_res,Sproto.sc_pet_uplevel_res_request),i.Protocol.SetProtocol(t.sc_pet_upstar_res),i.Protocol.SetRequest(t.sc_pet_upstar_res,Sproto.sc_pet_upstar_res_request),i.Protocol.SetProtocol(t.sc_pet_wake_res),i.Protocol.SetRequest(t.sc_pet_wake_res,Sproto.sc_pet_wake_res_request),i.Protocol.SetProtocol(t.sc_pet_wash_res),i.Protocol.SetRequest(t.sc_pet_wash_res,Sproto.sc_pet_wash_res_request),i.Protocol.SetProtocol(t.sc_pet_washlock_res),i.Protocol.SetRequest(t.sc_pet_washlock_res,Sproto.sc_pet_washlock_res_request),i.Protocol.SetProtocol(t.sc_pet_washrep_res),i.Protocol.SetRequest(t.sc_pet_washrep_res,Sproto.sc_pet_washrep_res_request),i.Protocol.SetProtocol(t.sc_petsSearch_hunt_result),i.Protocol.SetRequest(t.sc_petsSearch_hunt_result,Sproto.sc_petsSearch_hunt_result_request),i.Protocol.SetProtocol(t.sc_petsSearch_record),i.Protocol.SetRequest(t.sc_petsSearch_record,Sproto.sc_petsSearch_record_request),i.Protocol.SetProtocol(t.sc_pop_shouchong),i.Protocol.SetRequest(t.sc_pop_shouchong,Sproto.sc_pop_shouchong_request),i.Protocol.SetProtocol(t.sc_prestige_rank_topthree),i.Protocol.SetRequest(t.sc_prestige_rank_topthree,Sproto.sc_prestige_rank_topthree_request),i.Protocol.SetProtocol(t.sc_prestige_uplevel_result),i.Protocol.SetRequest(t.sc_prestige_uplevel_result,Sproto.sc_prestige_uplevel_result_request),i.Protocol.SetProtocol(t.sc_public_blood_update),i.Protocol.SetRequest(t.sc_public_blood_update,Sproto.sc_public_blood_update_request),i.Protocol.SetProtocol(t.sc_public_boss_be_hit),i.Protocol.SetRequest(t.sc_public_boss_be_hit,Sproto.sc_public_boss_be_hit_request),i.Protocol.SetProtocol(t.sc_public_boss_blood),i.Protocol.SetRequest(t.sc_public_boss_blood,Sproto.sc_public_boss_blood_request),i.Protocol.SetProtocol(t.sc_public_boss_challenge_result),i.Protocol.SetRequest(t.sc_public_boss_challenge_result,Sproto.sc_public_boss_challenge_result_request),i.Protocol.SetProtocol(t.sc_public_boss_challenge_suc),i.Protocol.SetRequest(t.sc_public_boss_challenge_suc,Sproto.sc_public_boss_challenge_suc_request),i.Protocol.SetProtocol(t.sc_public_boss_clear_cd),i.Protocol.SetRequest(t.sc_public_boss_clear_cd,Sproto.sc_public_boss_clear_cd_request),i.Protocol.SetProtocol(t.sc_public_boss_cur_owner),i.Protocol.SetRequest(t.sc_public_boss_cur_owner,Sproto.sc_public_boss_cur_owner_request),i.Protocol.SetProtocol(t.sc_public_boss_hurt_result),i.Protocol.SetRequest(t.sc_public_boss_hurt_result,Sproto.sc_public_boss_hurt_result_request),i.Protocol.SetProtocol(t.sc_public_boss_init_info),i.Protocol.SetRequest(t.sc_public_boss_init_info,Sproto.sc_public_boss_init_info_request),i.Protocol.SetProtocol(t.sc_public_boss_init_panel_info),i.Protocol.SetRequest(t.sc_public_boss_init_panel_info,Sproto.sc_public_boss_init_panel_info_request),i.Protocol.SetProtocol(t.sc_public_boss_kill_log),i.Protocol.SetRequest(t.sc_public_boss_kill_log,Sproto.sc_public_boss_kill_log_request),i.Protocol.SetProtocol(t.sc_public_boss_rank_update),i.Protocol.SetRequest(t.sc_public_boss_rank_update,Sproto.sc_public_boss_rank_update_request),i.Protocol.SetProtocol(t.sc_public_boss_reborn_notice),i.Protocol.SetRequest(t.sc_public_boss_reborn_notice,Sproto.sc_public_boss_reborn_notice_request),i.Protocol.SetProtocol(t.sc_public_boss_relive_time),i.Protocol.SetRequest(t.sc_public_boss_relive_time,Sproto.sc_public_boss_relive_time_request),i.Protocol.SetProtocol(t.sc_public_boss_update_boss),i.Protocol.SetRequest(t.sc_public_boss_update_boss,Sproto.sc_public_boss_update_boss_request),i.Protocol.SetProtocol(t.sc_public_boss_update_list),i.Protocol.SetRequest(t.sc_public_boss_update_list,Sproto.sc_public_boss_update_list_request),i.Protocol.SetProtocol(t.sc_public_items_droped),i.Protocol.SetRequest(t.sc_public_items_droped,Sproto.sc_public_items_droped_request),i.Protocol.SetProtocol(t.sc_public_player_list),i.Protocol.SetRequest(t.sc_public_player_list,Sproto.sc_public_player_list_request),i.Protocol.SetProtocol(t.sc_radi_artifact_cnt),i.Protocol.SetRequest(t.sc_radi_artifact_cnt,Sproto.sc_radi_artifact_cnt_request),i.Protocol.SetProtocol(t.sc_radi_artifact_morra),i.Protocol.SetRequest(t.sc_radi_artifact_morra,Sproto.sc_radi_artifact_morra_request),i.Protocol.SetProtocol(t.sc_radi_artifact_rewoard_relute),i.Protocol.SetRequest(t.sc_radi_artifact_rewoard_relute,Sproto.sc_radi_artifact_rewoard_relute_request),i.Protocol.SetProtocol(t.sc_raid_artifact_buy_res),i.Protocol.SetRequest(t.sc_raid_artifact_buy_res,Sproto.sc_raid_artifact_buy_res_request),i.Protocol.SetProtocol(t.sc_raid_artifact_cnt),i.Protocol.SetRequest(t.sc_raid_artifact_cnt,Sproto.sc_raid_artifact_cnt_request),i.Protocol.SetProtocol(t.sc_raid_artifact_kill_cnt),i.Protocol.SetRequest(t.sc_raid_artifact_kill_cnt,Sproto.sc_raid_artifact_kill_cnt_request),i.Protocol.SetProtocol(t.sc_raid_boss_box_num),i.Protocol.SetRequest(t.sc_raid_boss_box_num,Sproto.sc_raid_boss_box_num_request),i.Protocol.SetProtocol(t.sc_raid_chapter_boss_result),i.Protocol.SetRequest(t.sc_raid_chapter_boss_result,Sproto.sc_raid_chapter_boss_result_request),i.Protocol.SetProtocol(t.sc_raid_chapter_init_info),i.Protocol.SetRequest(t.sc_raid_chapter_init_info,Sproto.sc_raid_chapter_init_info_request),i.Protocol.SetProtocol(t.sc_raid_chapter_offline_reward),i.Protocol.SetRequest(t.sc_raid_chapter_offline_reward,Sproto.sc_raid_chapter_offline_reward_request),i.Protocol.SetProtocol(t.sc_raid_chapter_reward),i.Protocol.SetRequest(t.sc_raid_chapter_reward,Sproto.sc_raid_chapter_reward_request),i.Protocol.SetProtocol(t.sc_raid_chapter_wave_data),i.Protocol.SetRequest(t.sc_raid_chapter_wave_data,Sproto.sc_raid_chapter_wave_data_request),i.Protocol.SetProtocol(t.sc_raid_chapter_world_reward),i.Protocol.SetRequest(t.sc_raid_chapter_world_reward,Sproto.sc_raid_chapter_world_reward_request),i.Protocol.SetProtocol(t.sc_raid_guardian_res),i.Protocol.SetRequest(t.sc_raid_guardian_res,Sproto.sc_raid_guardian_res_request),i.Protocol.SetProtocol(t.sc_raid_info_init),i.Protocol.SetRequest(t.sc_raid_info_init,Sproto.sc_raid_info_init_request),i.Protocol.SetProtocol(t.sc_raid_reborn_cd),i.Protocol.SetRequest(t.sc_raid_reborn_cd,Sproto.sc_raid_reborn_cd_request),i.Protocol.SetProtocol(t.sc_raid_role_all_die),i.Protocol.SetRequest(t.sc_raid_role_all_die,Sproto.sc_raid_role_all_die_request),i.Protocol.SetProtocol(t.sc_raid_time),i.Protocol.SetRequest(t.sc_raid_time,Sproto.sc_raid_time_request),i.Protocol.SetProtocol(t.sc_raid_update_info),i.Protocol.SetRequest(t.sc_raid_update_info,Sproto.sc_raid_update_info_request),i.Protocol.SetProtocol(t.sc_rank_data),i.Protocol.SetRequest(t.sc_rank_data,Sproto.sc_rank_data_request),i.Protocol.SetProtocol(t.sc_rank_player_info),i.Protocol.SetRequest(t.sc_rank_player_info,Sproto.sc_rank_player_info_request),i.Protocol.SetProtocol(t.sc_rank_worship_all_count_ret),i.Protocol.SetRequest(t.sc_rank_worship_all_count_ret,Sproto.sc_rank_worship_all_count_ret_request),i.Protocol.SetProtocol(t.sc_rank_worship_data),i.Protocol.SetRequest(t.sc_rank_worship_data,Sproto.sc_rank_worship_data_request),i.Protocol.SetProtocol(t.sc_rank_worship_success),i.Protocol.SetRequest(t.sc_rank_worship_success,Sproto.sc_rank_worship_success_request),i.Protocol.SetProtocol(t.sc_rebate_activity_buy),i.Protocol.SetRequest(t.sc_rebate_activity_buy,Sproto.sc_rebate_activity_buy_request),i.Protocol.SetProtocol(t.sc_rebate_activity_gain_other_awards),i.Protocol.SetRequest(t.sc_rebate_activity_gain_other_awards,Sproto.sc_rebate_activity_gain_other_awards_request),i.Protocol.SetProtocol(t.sc_rebate_activity_info),i.Protocol.SetRequest(t.sc_rebate_activity_info,Sproto.sc_rebate_activity_info_request),i.Protocol.SetProtocol(t.sc_receive_sorce_reward),i.Protocol.SetRequest(t.sc_receive_sorce_reward,Sproto.sc_receive_sorce_reward_request),i.Protocol.SetProtocol(t.sc_recharge_change_data),i.Protocol.SetRequest(t.sc_recharge_change_data,Sproto.sc_recharge_change_data_request),i.Protocol.SetProtocol(t.sc_recharge_first_status),i.Protocol.SetRequest(t.sc_recharge_first_status,Sproto.sc_recharge_first_status_request),i.Protocol.SetProtocol(t.sc_recharge_get_data),i.Protocol.SetRequest(t.sc_recharge_get_data,Sproto.sc_recharge_get_data_request),i.Protocol.SetProtocol(t.sc_recharge_get_month_day),i.Protocol.SetRequest(t.sc_recharge_get_month_day,Sproto.sc_recharge_get_month_day_request),i.Protocol.SetProtocol(t.sc_recharge_gift_reward),i.Protocol.SetRequest(t.sc_recharge_gift_reward,Sproto.sc_recharge_gift_reward_request),i.Protocol.SetProtocol(t.sc_recharge_item_data),i.Protocol.SetRequest(t.sc_recharge_item_data,Sproto.sc_recharge_item_data_request),i.Protocol.SetProtocol(t.sc_recharge_month_reward),i.Protocol.SetRequest(t.sc_recharge_month_reward,Sproto.sc_recharge_month_reward_request),i.Protocol.SetProtocol(t.sc_record_add),i.Protocol.SetRequest(t.sc_record_add,Sproto.sc_record_add_request),i.Protocol.SetProtocol(t.sc_record_datas),i.Protocol.SetRequest(t.sc_record_datas,Sproto.sc_record_datas_request),i.Protocol.SetProtocol(t.sc_rename_result),i.Protocol.SetRequest(t.sc_rename_result,Sproto.sc_rename_result_request),i.Protocol.SetProtocol(t.sc_reward_info),i.Protocol.SetRequest(t.sc_reward_info,Sproto.sc_reward_info_request),i.Protocol.SetProtocol(t.sc_ride_change_res),i.Protocol.SetRequest(t.sc_ride_change_res,Sproto.sc_ride_change_res_request),i.Protocol.SetProtocol(t.sc_ride_eat_res),i.Protocol.SetRequest(t.sc_ride_eat_res,Sproto.sc_ride_eat_res_request),i.Protocol.SetProtocol(t.sc_ride_equip_uplevel_res),i.Protocol.SetRequest(t.sc_ride_equip_uplevel_res,Sproto.sc_ride_equip_uplevel_res_request),i.Protocol.SetProtocol(t.sc_ride_equip_upstar_res),i.Protocol.SetRequest(t.sc_ride_equip_upstar_res,Sproto.sc_ride_equip_upstar_res_request),i.Protocol.SetProtocol(t.sc_ride_equipchange_res),i.Protocol.SetRequest(t.sc_ride_equipchange_res,Sproto.sc_ride_equipchange_res_request),i.Protocol.SetProtocol(t.sc_ride_equipoff_res),i.Protocol.SetRequest(t.sc_ride_equipoff_res,Sproto.sc_ride_equipoff_res_request),i.Protocol.SetProtocol(t.sc_ride_getaward_res),i.Protocol.SetRequest(t.sc_ride_getaward_res,Sproto.sc_ride_getaward_res_request),i.Protocol.SetProtocol(t.sc_ride_init_res),i.Protocol.SetRequest(t.sc_ride_init_res,Sproto.sc_ride_init_res_request),i.Protocol.SetProtocol(t.sc_ride_skillup_res),i.Protocol.SetRequest(t.sc_ride_skillup_res,Sproto.sc_ride_skillup_res_request),i.Protocol.SetProtocol(t.sc_ride_uplevel_res),i.Protocol.SetRequest(t.sc_ride_uplevel_res,Sproto.sc_ride_uplevel_res_request),i.Protocol.SetProtocol(t.sc_ride_upstar_res),i.Protocol.SetRequest(t.sc_ride_upstar_res,Sproto.sc_ride_upstar_res_request),i.Protocol.SetProtocol(t.sc_ring_datas),i.Protocol.SetRequest(t.sc_ring_datas,Sproto.sc_ring_datas_request),i.Protocol.SetProtocol(t.sc_ring_onetask),i.Protocol.SetRequest(t.sc_ring_onetask,Sproto.sc_ring_onetask_request),i.Protocol.SetProtocol(t.sc_ring_open),i.Protocol.SetRequest(t.sc_ring_open,Sproto.sc_ring_open_request),i.Protocol.SetProtocol(t.sc_ring_soul_data),i.Protocol.SetRequest(t.sc_ring_soul_data,Sproto.sc_ring_soul_data_request),i.Protocol.SetProtocol(t.sc_ring_soul_evil_change_ret),i.Protocol.SetRequest(t.sc_ring_soul_evil_change_ret,Sproto.sc_ring_soul_evil_change_ret_request),i.Protocol.SetProtocol(t.sc_ring_soul_evil_wash_ret),i.Protocol.SetRequest(t.sc_ring_soul_evil_wash_ret,Sproto.sc_ring_soul_evil_wash_ret_request),i.Protocol.SetProtocol(t.sc_ring_taskinfo),i.Protocol.SetRequest(t.sc_ring_taskinfo,Sproto.sc_ring_taskinfo_request),i.Protocol.SetProtocol(t.sc_ring_uplevel_result),i.Protocol.SetRequest(t.sc_ring_uplevel_result,Sproto.sc_ring_uplevel_result_request),i.Protocol.SetProtocol(t.sc_ringboss_init),i.Protocol.SetRequest(t.sc_ringboss_init,Sproto.sc_ringboss_init_request),i.Protocol.SetProtocol(t.sc_rxws_can_recharge),i.Protocol.SetRequest(t.sc_rxws_can_recharge,Sproto.sc_rxws_can_recharge_request),i.Protocol.SetProtocol(t.sc_self_biaoche_info),i.Protocol.SetRequest(t.sc_self_biaoche_info,Sproto.sc_self_biaoche_info_request),i.Protocol.SetProtocol(t.sc_self_sorce_rank),i.Protocol.SetRequest(t.sc_self_sorce_rank,Sproto.sc_self_sorce_rank_request),i.Protocol.SetProtocol(t.sc_set_is_open_payfrist),i.Protocol.SetRequest(t.sc_set_is_open_payfrist,Sproto.sc_set_is_open_payfrist_request),i.Protocol.SetProtocol(t.sc_shapeshift_send_JoinInfo),i.Protocol.SetRequest(t.sc_shapeshift_send_JoinInfo,Sproto.sc_shapeshift_send_JoinInfo_request),i.Protocol.SetProtocol(t.sc_shapeshift_send_info),i.Protocol.SetRequest(t.sc_shapeshift_send_info,Sproto.sc_shapeshift_send_info_request),i.Protocol.SetProtocol(t.sc_shapeshift_send_join_relute),i.Protocol.SetRequest(t.sc_shapeshift_send_join_relute,Sproto.sc_shapeshift_send_join_relute_request),i.Protocol.SetProtocol(t.sc_shapeshift_send_shapeInfo),i.Protocol.SetRequest(t.sc_shapeshift_send_shapeInfo,Sproto.sc_shapeshift_send_shapeInfo_request),i.Protocol.SetProtocol(t.sc_shapeshift_send_skill_relute),i.Protocol.SetRequest(t.sc_shapeshift_send_skill_relute,Sproto.sc_shapeshift_send_skill_relute_request),i.Protocol.SetProtocol(t.sc_shapeshift_send_upgrade_relute),i.Protocol.SetRequest(t.sc_shapeshift_send_upgrade_relute,Sproto.sc_shapeshift_send_upgrade_relute_request),i.Protocol.SetProtocol(t.sc_share_Help_result),i.Protocol.SetRequest(t.sc_share_Help_result,Sproto.sc_share_Help_result_request),i.Protocol.SetProtocol(t.sc_share_buffer),i.Protocol.SetRequest(t.sc_share_buffer,Sproto.sc_share_buffer_request),i.Protocol.SetProtocol(t.sc_share_init_info),i.Protocol.SetRequest(t.sc_share_init_info,Sproto.sc_share_init_info_request),i.Protocol.SetProtocol(t.sc_share_notify),i.Protocol.SetRequest(t.sc_share_notify,Sproto.sc_share_notify_request),i.Protocol.SetProtocol(t.sc_shiliansha_send_bufffs),i.Protocol.SetRequest(t.sc_shiliansha_send_bufffs,Sproto.sc_shiliansha_send_bufffs_request),i.Protocol.SetProtocol(t.sc_shiliansha_send_enemyhp),i.Protocol.SetRequest(t.sc_shiliansha_send_enemyhp,Sproto.sc_shiliansha_send_enemyhp_request),i.Protocol.SetProtocol(t.sc_shiliansha_send_info),i.Protocol.SetRequest(t.sc_shiliansha_send_info,Sproto.sc_shiliansha_send_info_request),i.Protocol.SetProtocol(t.sc_shiliansha_send_relute),i.Protocol.SetRequest(t.sc_shiliansha_send_relute,Sproto.sc_shiliansha_send_relute_request),i.Protocol.SetProtocol(t.sc_shop_buy_ret),i.Protocol.SetRequest(t.sc_shop_buy_ret,Sproto.sc_shop_buy_ret_request),i.Protocol.SetProtocol(t.sc_shop_cross_tianti_glory_buy),i.Protocol.SetRequest(t.sc_shop_cross_tianti_glory_buy,Sproto.sc_shop_cross_tianti_glory_buy_request),i.Protocol.SetProtocol(t.sc_shop_cross_tianti_glory_times),i.Protocol.SetRequest(t.sc_shop_cross_tianti_glory_times,Sproto.sc_shop_cross_tianti_glory_times_request),i.Protocol.SetProtocol(t.sc_shop_data),i.Protocol.SetRequest(t.sc_shop_data,Sproto.sc_shop_data_request),i.Protocol.SetProtocol(t.sc_shop_godequip_info),i.Protocol.SetRequest(t.sc_shop_godequip_info,Sproto.sc_shop_godequip_info_request),i.Protocol.SetProtocol(t.sc_shop_jifen_buy_ret),i.Protocol.SetRequest(t.sc_shop_jifen_buy_ret,Sproto.sc_shop_jifen_buy_ret_request),i.Protocol.SetProtocol(t.sc_shop_num_limit),i.Protocol.SetRequest(t.sc_shop_num_limit,Sproto.sc_shop_num_limit_request),i.Protocol.SetProtocol(t.sc_shop_refresh_ret),i.Protocol.SetRequest(t.sc_shop_refresh_ret,Sproto.sc_shop_refresh_ret_request),i.Protocol.SetProtocol(t.sc_shop_update_buy_medal),i.Protocol.SetRequest(t.sc_shop_update_buy_medal,Sproto.sc_shop_update_buy_medal_request),i.Protocol.SetProtocol(t.sc_shop_update_medal_message),i.Protocol.SetRequest(t.sc_shop_update_medal_message,Sproto.sc_shop_update_medal_message_request),i.Protocol.SetProtocol(t.sc_show_other_actor),i.Protocol.SetRequest(t.sc_show_other_actor,Sproto.sc_show_other_actor_request),i.Protocol.SetProtocol(t.sc_skill_add_effect),i.Protocol.SetRequest(t.sc_skill_add_effect,Sproto.sc_skill_add_effect_request),i.Protocol.SetProtocol(t.sc_skill_all_upgrade_result),i.Protocol.SetRequest(t.sc_skill_all_upgrade_result,Sproto.sc_skill_all_upgrade_result_request),i.Protocol.SetProtocol(t.sc_skill_break_result),i.Protocol.SetRequest(t.sc_skill_break_result,Sproto.sc_skill_break_result_request),i.Protocol.SetProtocol(t.sc_skill_deal_add_buff),i.Protocol.SetRequest(t.sc_skill_deal_add_buff,Sproto.sc_skill_deal_add_buff_request),i.Protocol.SetProtocol(t.sc_skill_deal_remove_buff),i.Protocol.SetRequest(t.sc_skill_deal_remove_buff,Sproto.sc_skill_deal_remove_buff_request),i.Protocol.SetProtocol(t.sc_skill_remove_effect),i.Protocol.SetRequest(t.sc_skill_remove_effect,Sproto.sc_skill_remove_effect_request),i.Protocol.SetProtocol(t.sc_skill_setfight_res),i.Protocol.SetRequest(t.sc_skill_setfight_res,Sproto.sc_skill_setfight_res_request),i.Protocol.SetProtocol(t.sc_skill_upgrade_result),i.Protocol.SetRequest(t.sc_skill_upgrade_result,Sproto.sc_skill_upgrade_result_request),i.Protocol.SetProtocol(t.sc_skill_use_result),i.Protocol.SetRequest(t.sc_skill_use_result,Sproto.sc_skill_use_result_request),i.Protocol.SetProtocol(t.sc_sorce_info),i.Protocol.SetRequest(t.sc_sorce_info,Sproto.sc_sorce_info_request),i.Protocol.SetProtocol(t.sc_steal_biaoche_fight_notice),i.Protocol.SetRequest(t.sc_steal_biaoche_fight_notice,Sproto.sc_steal_biaoche_fight_notice_request),i.Protocol.SetProtocol(t.sc_steal_mine_fight_notice),i.Protocol.SetRequest(t.sc_steal_mine_fight_notice,Sproto.sc_steal_mine_fight_notice_request),i.Protocol.SetProtocol(t.sc_task_achieve_change_data),i.Protocol.SetRequest(t.sc_task_achieve_change_data,Sproto.sc_task_achieve_change_data_request),i.Protocol.SetProtocol(t.sc_task_achieve_data),i.Protocol.SetRequest(t.sc_task_achieve_data,Sproto.sc_task_achieve_data_request),i.Protocol.SetProtocol(t.sc_task_change_data),i.Protocol.SetRequest(t.sc_task_change_data,Sproto.sc_task_change_data_request),i.Protocol.SetProtocol(t.sc_task_init_data),i.Protocol.SetRequest(t.sc_task_init_data,Sproto.sc_task_init_data_request),i.Protocol.SetProtocol(t.sc_task_join_achieve_data),i.Protocol.SetRequest(t.sc_task_join_achieve_data,Sproto.sc_task_join_achieve_data_request),i.Protocol.SetProtocol(t.sc_task_vitality),i.Protocol.SetRequest(t.sc_task_vitality,Sproto.sc_task_vitality_request),i.Protocol.SetProtocol(t.sc_task_vitality_award),i.Protocol.SetRequest(t.sc_task_vitality_award,Sproto.sc_task_vitality_award_request),i.Protocol.SetProtocol(t.sc_task_warorder_data),i.Protocol.SetRequest(t.sc_task_warorder_data,Sproto.sc_task_warorder_data_request),i.Protocol.SetProtocol(t.sc_task_warorder_update),i.Protocol.SetRequest(t.sc_task_warorder_update,Sproto.sc_task_warorder_update_request),i.Protocol.SetProtocol(t.sc_tatoo_add_res),i.Protocol.SetRequest(t.sc_tatoo_add_res,Sproto.sc_tatoo_add_res_request),i.Protocol.SetProtocol(t.sc_tatoo_bag_init),i.Protocol.SetRequest(t.sc_tatoo_bag_init,Sproto.sc_tatoo_bag_init_request),i.Protocol.SetProtocol(t.sc_tatoo_equipoff_res),i.Protocol.SetRequest(t.sc_tatoo_equipoff_res,Sproto.sc_tatoo_equipoff_res_request),i.Protocol.SetProtocol(t.sc_tatoo_equipon_res),i.Protocol.SetRequest(t.sc_tatoo_equipon_res,Sproto.sc_tatoo_equipon_res_request),i.Protocol.SetProtocol(t.sc_tatoo_init_res),i.Protocol.SetRequest(t.sc_tatoo_init_res,Sproto.sc_tatoo_init_res_request),i.Protocol.SetProtocol(t.sc_tatoo_strength_res),i.Protocol.SetRequest(t.sc_tatoo_strength_res,Sproto.sc_tatoo_strength_res_request),i.Protocol.SetProtocol(t.sc_team_info_res),i.Protocol.SetRequest(t.sc_team_info_res,Sproto.sc_team_info_res_request),i.Protocol.SetProtocol(t.sc_team_join_res),i.Protocol.SetRequest(t.sc_team_join_res,Sproto.sc_team_join_res_request),i.Protocol.SetProtocol(t.sc_team_my_res),i.Protocol.SetRequest(t.sc_team_my_res,Sproto.sc_team_my_res_request),i.Protocol.SetProtocol(t.sc_team_quit_res),i.Protocol.SetRequest(t.sc_team_quit_res,Sproto.sc_team_quit_res_request),i.Protocol.SetProtocol(t.sc_team_res),i.Protocol.SetRequest(t.sc_team_res,Sproto.sc_team_res_request),i.Protocol.SetProtocol(t.sc_tendraw_send_drawcnt_relute),i.Protocol.SetRequest(t.sc_tendraw_send_drawcnt_relute,Sproto.sc_tendraw_send_drawcnt_relute_request),i.Protocol.SetProtocol(t.sc_tendraw_send_reward_relute),i.Protocol.SetRequest(t.sc_tendraw_send_reward_relute,Sproto.sc_tendraw_send_reward_relute_request),i.Protocol.SetProtocol(t.sc_ticket_treasure_add_record),i.Protocol.SetRequest(t.sc_ticket_treasure_add_record,Sproto.sc_ticket_treasure_add_record_request),i.Protocol.SetProtocol(t.sc_ticket_treasure_base_info),i.Protocol.SetRequest(t.sc_ticket_treasure_base_info,Sproto.sc_ticket_treasure_base_info_request),i.Protocol.SetProtocol(t.sc_ticket_treasure_hunt_result),i.Protocol.SetRequest(t.sc_ticket_treasure_hunt_result,Sproto.sc_ticket_treasure_hunt_result_request),i.Protocol.SetProtocol(t.sc_ticket_treasure_record_datas),i.Protocol.SetRequest(t.sc_ticket_treasure_record_datas,Sproto.sc_ticket_treasure_record_datas_request),i.Protocol.SetProtocol(t.sc_title_add),i.Protocol.SetRequest(t.sc_title_add,Sproto.sc_title_add_request),i.Protocol.SetProtocol(t.sc_title_del),i.Protocol.SetRequest(t.sc_title_del,Sproto.sc_title_del_request),i.Protocol.SetProtocol(t.sc_title_list),i.Protocol.SetRequest(t.sc_title_list,Sproto.sc_title_list_request),i.Protocol.SetProtocol(t.sc_title_set),i.Protocol.SetRequest(t.sc_title_set,Sproto.sc_title_set_request),i.Protocol.SetProtocol(t.sc_tower_award_res),i.Protocol.SetRequest(t.sc_tower_award_res,Sproto.sc_tower_award_res_request),i.Protocol.SetProtocol(t.sc_tower_floor_res),i.Protocol.SetRequest(t.sc_tower_floor_res,Sproto.sc_tower_floor_res_request),i.Protocol.SetProtocol(t.sc_tower_init_res),i.Protocol.SetRequest(t.sc_tower_init_res,Sproto.sc_tower_init_res_request),i.Protocol.SetProtocol(t.sc_tower_sweep_res),i.Protocol.SetRequest(t.sc_tower_sweep_res,Sproto.sc_tower_sweep_res_request),i.Protocol.SetProtocol(t.sc_tower_sync),i.Protocol.SetRequest(t.sc_tower_sync,Sproto.sc_tower_sync_request),i.Protocol.SetProtocol(t.sc_treasure_add_record),i.Protocol.SetRequest(t.sc_treasure_add_record,Sproto.sc_treasure_add_record_request),i.Protocol.SetProtocol(t.sc_treasure_base_info),i.Protocol.SetRequest(t.sc_treasure_base_info,Sproto.sc_treasure_base_info_request),i.Protocol.SetProtocol(t.sc_treasure_boss_list),i.Protocol.SetRequest(t.sc_treasure_boss_list,Sproto.sc_treasure_boss_list_request),i.Protocol.SetProtocol(t.sc_treasure_hunt_result),i.Protocol.SetRequest(t.sc_treasure_hunt_result,Sproto.sc_treasure_hunt_result_request),i.Protocol.SetProtocol(t.sc_treasure_record_datas),i.Protocol.SetRequest(t.sc_treasure_record_datas,Sproto.sc_treasure_record_datas_request),i.Protocol.SetProtocol(t.sc_tryroad_datas),i.Protocol.SetRequest(t.sc_tryroad_datas,Sproto.sc_tryroad_datas_request),i.Protocol.SetProtocol(t.sc_update_feats),i.Protocol.SetRequest(t.sc_update_feats,Sproto.sc_update_feats_request),i.Protocol.SetProtocol(t.sc_update_sorce),i.Protocol.SetRequest(t.sc_update_sorce,Sproto.sc_update_sorce_request),i.Protocol.SetProtocol(t.sc_vip_boss_challenge_time),i.Protocol.SetRequest(t.sc_vip_boss_challenge_time,Sproto.sc_vip_boss_challenge_time_request),i.Protocol.SetProtocol(t.sc_vip_boss_init_panel_info),i.Protocol.SetRequest(t.sc_vip_boss_init_panel_info,Sproto.sc_vip_boss_init_panel_info_request),i.Protocol.SetProtocol(t.sc_vip_boss_refresh_remind),i.Protocol.SetRequest(t.sc_vip_boss_refresh_remind,Sproto.sc_vip_boss_refresh_remind_request),i.Protocol.SetProtocol(t.sc_vip_boss_remind_panel_info),i.Protocol.SetRequest(t.sc_vip_boss_remind_panel_info,Sproto.sc_vip_boss_remind_panel_info_request),i.Protocol.SetProtocol(t.sc_vip_update_data),i.Protocol.SetRequest(t.sc_vip_update_data,Sproto.sc_vip_update_data_request),i.Protocol.SetProtocol(t.sc_vip_update_exp),i.Protocol.SetRequest(t.sc_vip_update_exp,Sproto.sc_vip_update_exp_request),i.Protocol.SetProtocol(t.sc_vip_update_state),i.Protocol.SetRequest(t.sc_vip_update_state,Sproto.sc_vip_update_state_request),i.Protocol.SetProtocol(t.sc_vipshop_datas_info),i.Protocol.SetRequest(t.sc_vipshop_datas_info,Sproto.sc_vipshop_datas_info_request),i.Protocol.SetProtocol(t.sc_vipshop_item_info),i.Protocol.SetRequest(t.sc_vipshop_item_info,Sproto.sc_vipshop_item_info_request),i.Protocol.SetProtocol(t.sc_wing_boost),i.Protocol.SetRequest(t.sc_wing_boost,Sproto.sc_wing_boost_request),i.Protocol.SetProtocol(t.sc_wing_extend),i.Protocol.SetRequest(t.sc_wing_extend,Sproto.sc_wing_extend_request),i.Protocol.SetProtocol(t.sc_wing_upgrade),i.Protocol.SetRequest(t.sc_wing_upgrade,Sproto.sc_wing_upgrade_request),i.Protocol.SetProtocol(t.sc_world_boss_challenge_result),i.Protocol.SetRequest(t.sc_world_boss_challenge_result,Sproto.sc_world_boss_challenge_result_request),i.Protocol.SetProtocol(t.sc_world_boss_open),i.Protocol.SetRequest(t.sc_world_boss_open,Sproto.sc_world_boss_open_request),i.Protocol.SetProtocol(t.sc_yb_turntable_info),i.Protocol.SetRequest(t.sc_yb_turntable_info,Sproto.sc_yb_turntable_info_request),i.Protocol.SetProtocol(t.sc_yb_turntable_msg),i.Protocol.SetRequest(t.sc_yb_turntable_msg,Sproto.sc_yb_turntable_msg_request),i.Protocol.SetProtocol(t.sc_yb_turntable_roll_start_cb),i.Protocol.SetRequest(t.sc_yb_turntable_roll_start_cb,Sproto.sc_yb_turntable_roll_start_cb_request),i.Protocol.SetProtocol(t.sc_zhuanzhi_donate),i.Protocol.SetRequest(t.sc_zhuanzhi_donate,Sproto.sc_zhuanzhi_donate_request),i.Protocol.SetProtocol(t.sc_zhuanzhi_jingmai_boost),i.Protocol.SetRequest(t.sc_zhuanzhi_jingmai_boost,Sproto.sc_zhuanzhi_jingmai_boost_request),i.Protocol.SetProtocol(t.sc_zhuanzhi_jingmai_upgrade),i.Protocol.SetRequest(t.sc_zhuanzhi_jingmai_upgrade,Sproto.sc_zhuanzhi_jingmai_upgrade_request),i.Protocol.SetProtocol(t.sc_zhuanzhi_onetask),i.Protocol.SetRequest(t.sc_zhuanzhi_onetask,Sproto.sc_zhuanzhi_onetask_request),i.Protocol.SetProtocol(t.sc_zhuanzhi_talent_init),i.Protocol.SetRequest(t.sc_zhuanzhi_talent_init,Sproto.sc_zhuanzhi_talent_init_request),i.Protocol.SetProtocol(t.sc_zhuanzhi_talent_upgrade),i.Protocol.SetRequest(t.sc_zhuanzhi_talent_upgrade,Sproto.sc_zhuanzhi_talent_upgrade_request),i.Protocol.SetProtocol(t.sc_zhuanzhi_tasklist),i.Protocol.SetRequest(t.sc_zhuanzhi_tasklist,Sproto.sc_zhuanzhi_tasklist_request),i.Protocol.SetProtocol(t.sc_zhuanzhi_uplevel_result),i.Protocol.SetRequest(t.sc_zhuanzhi_uplevel_result,Sproto.sc_zhuanzhi_uplevel_result_request),i.Protocol.SetProtocol(t.sc_zhuzai_data),i.Protocol.SetRequest(t.sc_zhuzai_data,Sproto.sc_zhuzai_data_request),i.Protocol.SetProtocol(t.sc_zhuzai_grow_result),i.Protocol.SetRequest(t.sc_zhuzai_grow_result,Sproto.sc_zhuzai_grow_result_request),i.Protocol.SetProtocol(t.sc_zhuzai_shengjie_result),i.Protocol.SetRequest(t.sc_zhuzai_shengjie_result,Sproto.sc_zhuzai_shengjie_result_request),i.Protocol.SetProtocol(t.sc_zs_boss_actordie_feats),i.Protocol.SetRequest(t.sc_zs_boss_actordie_feats,Sproto.sc_zs_boss_actordie_feats_request),i.Protocol.SetProtocol(t.sc_zs_boss_challenge_result),i.Protocol.SetRequest(t.sc_zs_boss_challenge_result,Sproto.sc_zs_boss_challenge_result_request),i.Protocol.SetProtocol(t.sc_zs_boss_get_my_point),i.Protocol.SetRequest(t.sc_zs_boss_get_my_point,Sproto.sc_zs_boss_get_my_point_request),i.Protocol.SetProtocol(t.sc_zs_boss_hudun_point),i.Protocol.SetRequest(t.sc_zs_boss_hudun_point,Sproto.sc_zs_boss_hudun_point_request),i.Protocol.SetProtocol(t.sc_zs_boss_list),i.Protocol.SetRequest(t.sc_zs_boss_list,Sproto.sc_zs_boss_list_request),i.Protocol.SetProtocol(t.sc_zs_boss_lottery_info),i.Protocol.SetRequest(t.sc_zs_boss_lottery_info,Sproto.sc_zs_boss_lottery_info_request),i.Protocol.SetProtocol(t.sc_zs_boss_open),i.Protocol.SetRequest(t.sc_zs_boss_open,Sproto.sc_zs_boss_open_request),i.Protocol.SetProtocol(t.sc_zs_boss_rank_info),i.Protocol.SetRequest(t.sc_zs_boss_rank_info,Sproto.sc_zs_boss_rank_info_request),i.Protocol.SetProtocol(t.sc_zs_boss_remain_time),i.Protocol.SetRequest(t.sc_zs_boss_remain_time,Sproto.sc_zs_boss_remain_time_request),i.Protocol.SetProtocol(t.sc_zs_boss_talk_max_point),i.Protocol.SetRequest(t.sc_zs_boss_talk_max_point,Sproto.sc_zs_boss_talk_max_point_request),i.Protocol.SetProtocol(t.sc_zs_boss_win_result),i.Protocol.SetRequest(t.sc_zs_boss_win_result,Sproto.sc_zs_boss_win_result_request),i.Protocol.SetProtocol(t.sc_zs_data),i.Protocol.SetRequest(t.sc_zs_data,Sproto.sc_zs_data_request),i.Protocol.SetProtocol(t.sc_zs_point_info),i.Protocol.SetRequest(t.sc_zs_point_info,Sproto.sc_zs_point_info_request),i.Protocol.SetProtocol(t.shape_update),i.Protocol.SetRequest(t.shape_update,Sproto.shape_update_request),i.Protocol.SetProtocol(t.show_server_tip),i.Protocol.SetRequest(t.show_server_tip,Sproto.show_server_tip_request),i.Protocol.SetProtocol(t.stop_move_entity),i.Protocol.SetRequest(t.stop_move_entity,Sproto.stop_move_entity_request),i.Protocol.SetProtocol(t.sub_role_att_change),i.Protocol.SetRequest(t.sub_role_att_change,Sproto.sub_role_att_change_request),i.Protocol.SetProtocol(t.sub_roles),i.Protocol.SetRequest(t.sub_roles,Sproto.sub_roles_request),i.Protocol.SetProtocol(t.sync_entity_pos),i.Protocol.SetRequest(t.sync_entity_pos,Sproto.sync_entity_pos_request),i
}return __extends(t,e),t.checkAccountRet=1,t.scRoleBase=3,t.sc_base_game_time=6,t.sc_base_open_day=7,t.sc_base_replace_account=8,t.scActorBase=101,t.sub_roles=102,t.enter_map=103,t.create_monster_entity=104,t.create_role_entity=105,t.gold_change=106,t.exp_change=107,t.sub_role_att_change=108,t.blood_update=109,t.remove_entity=110,t.move_entity=111,t.stop_move_entity=112,t.sync_entity_pos=113,t.entity_mp_update=114,t.sc_show_other_actor=116,t.show_server_tip=117,t.first_register=118,t.sc_get_actor_module_isactive=119,t.actor_die_notice=120,t.actor_guild_change=121,t.sc_rename_result=122,t.sc_record_datas=125,t.sc_record_add=126,t.sc_set_is_open_payfrist=127,t.shape_update=129,t.attr_update=130,t.sc_zs_point_info=131,t.sc_element_set_res=141,t.create_pet_entity=150,t.sc_raid_chapter_init_info=201,t.sc_raid_chapter_wave_data=202,t.sc_raid_chapter_boss_result=203,t.sc_raid_role_all_die=204,t.sc_raid_chapter_reward=205,t.sc_raid_chapter_world_reward=206,t.sc_raid_info_init=210,t.sc_raid_update_info=211,t.sc_raid_chapter_offline_reward=212,t.sc_raid_time=213,t.sc_raid_boss_box_num=214,t.sc_raid_reborn_cd=215,t.sc_raid_artifact_kill_cnt=216,t.sc_raid_artifact_cnt=220,t.sc_radi_artifact_cnt=221,t.sc_radi_artifact_morra=224,t.sc_radi_artifact_rewoard_relute=225,t.sc_raid_guardian_res=227,t.sc_raid_artifact_buy_res=231,t.sc_offline_apply_res=235,t.sc_skill_use_result=301,t.sc_skill_deal_add_buff=302,t.sc_skill_deal_remove_buff=303,t.sc_skill_upgrade_result=304,t.sc_skill_all_upgrade_result=305,t.sc_skill_add_effect=306,t.sc_skill_remove_effect=307,t.sc_skill_break_result=308,t.sc_skill_setfight_res=309,t.sc_actor_base_info_aritifact=351,t.sc_actor_base_info_exring=352,t.sc_actor_base_info_fuwen=353,t.sc_actor_base_info_godequip=354,t.sc_actor_base_info_skillmiji=355,t.sc_actor_base_info_jingmai=356,t.sc_actor_base_info_talent=357,t.sc_actor_base_info_lizhuang=358,t.sc_rank_player_info=400,t.sc_bag_init_data=401,t.sc_bag_deal_valumn_add=402,t.sc_bag_deal_delete_item=403,t.sc_bag_deal_add_item=404,t.sc_bag_update_item_data=405,t.sc_bag_user_item_back=406,t.sc_bag_mix_item_back=407,t.sc_bag_get_treasure_equip=408,t.sc_bag_get_tendraw_equip=410,t.sc_actor_power=411,t.sc_currency_change=412,t.sc_bag_compose_result=413,t.sc_bag_danyao_info=416,t.sc_bag_get_ticket_equip=417,t.sc_equip_update_data=501,t.sc_equip_deal_smelt_result=502,t.sc_equip_deal_upgrade_result=503,t.sc_equip_autosmelt_res=505,t.sc_equip_resolve_res=506,t.sc_exten_info=512,t.sc_encounter_last_refresh_time=601,t.sc_encounter_deal_data=602,t.sc_encounter_battle_result=603,t.sc_encounter_inquire_record=604,t.sc_encounter_update_will_boss=605,t.sc_encounter_will_boss_result=606,t.sc_encounter_data_update=607,t.sc_encounter_del_data=608,t.sc_encounter_item_info=609,t.sc_encounter_open_result=610,t.sc_encounter_player_rob=611,t.sc_encounter_my_data=612,t.sc_encounter_news=613,t.sc_encounter_news_list=614,t.sc_encounter_get_boss_award=620,t.sc_wing_boost=702,t.sc_wing_upgrade=703,t.sc_wing_extend=714,t.sc_forge_update_data=802,t.sc_forge_belss_update=803,t.sc_forge_back_goods_success=804,t.sc_forge_bless_ronglu_success=805,t.sc_forge_bless_boost_res=806,t.sc_forge_bless_upgrade_res=807,t.sc_forge_bless_smelt_res=808,t.sc_mail_init_info=901,t.sc_mail_detailed_info=902,t.sc_mail_delete=903,t.sc_mail_update_info=904,t.sc_mail_add_info=905,t.sc_mail_red_point=907,t.sc_task_init_data=1001,t.sc_task_change_data=1002,t.sc_task_vitality=1003,t.sc_task_vitality_award=1004,t.sc_task_achieve_data=1005,t.sc_task_join_achieve_data=1006,t.sc_task_achieve_change_data=1007,t.sc_task_warorder_data=1008,t.sc_task_warorder_update=1009,t.sc_public_boss_init_panel_info=1101,t.sc_public_boss_update_list=1102,t.sc_public_boss_update_boss=1103,t.sc_public_boss_kill_log=1104,t.sc_public_boss_challenge_result=1105,t.sc_public_boss_rank_update=1106,t.sc_public_boss_init_info=1110,t.sc_public_boss_hurt_result=1112,t.sc_public_boss_clear_cd=1114,t.sc_public_boss_blood=1120,t.sc_public_boss_reborn_notice=1121,t.sc_public_boss_cur_owner=1122,t.sc_public_boss_relive_time=1123,t.sc_public_boss_challenge_suc=1124,t.sc_public_boss_be_hit=1125,t.sc_public_blood_update=1126,t.sc_public_items_droped=1127,t.sc_public_player_list=1128,t.sc_cross_boss_list=1129,t.sc_vip_boss_challenge_time=1131,t.sc_vip_boss_init_panel_info=1132,t.sc_vip_boss_refresh_remind=1134,t.sc_vip_boss_remind_panel_info=1136,t.sc_paidboss_res=1140,t.sc_paidboss_setting_res=1141,t.sc_paidboss_notice_res=1143,t.sc_gem_update_data=1202,t.sc_zs_data=1401,t.sc_essence_update_data=1502,t.sc_shop_data=1701,t.sc_shop_buy_ret=1702,t.sc_shop_refresh_ret=1704,t.sc_shop_jifen_buy_ret=1705,t.sc_shop_update_medal_message=1706,t.sc_shop_update_buy_medal=1707,t.sc_shop_godequip_info=1710,t.sc_mystery_shop_open_state=1711,t.sc_shop_num_limit=1712,t.sc_shop_cross_tianti_glory_buy=1713,t.sc_shop_cross_tianti_glory_times=1714,t.sc_rank_data=1901,t.sc_rank_worship_data=1902,t.sc_rank_worship_success=1903,t.sc_rank_worship_all_count_ret=1904,t.sc_vip_update_data=2001,t.sc_vip_update_exp=2002,t.sc_vip_update_state=2003,t.sc_notice=2101,t.sc_notice_records=2102,t.sc_treasure_hunt_result=2301,t.sc_treasure_record_datas=2302,t.sc_treasure_add_record=2303,t.sc_treasure_boss_list=2304,t.sc_treasure_base_info=2305,t.sc_petsSearch_record=2307,t.sc_petsSearch_hunt_result=2308,t.sc_ticket_treasure_hunt_result=2401,t.sc_ticket_treasure_base_info=2402,t.sc_ticket_treasure_add_record=2403,t.sc_ticket_treasure_record_datas=2404,t.sc_vipshop_item_info=2450,t.sc_vipshop_datas_info=2451,t.sc_challenge_raid_update_info=2501,t.sc_activity_init_info=2601,t.sc_activity_reward_result=2602,t.sc_activity_dabiao_info=2603,t.sc_activity_dabiao_reward=2604,t.sc_activity_update_info=2606,t.sc_yb_turntable_info=2615,t.sc_yb_turntable_roll_start_cb=2617,t.sc_yb_turntable_msg=2619,t.sc_rebate_activity_info=2650,t.sc_rebate_activity_buy=2651,t.sc_rebate_activity_gain_other_awards=2652,t.sc_one_recharge_activity_state=2653,t.sc_one_recharge_activity_gain=2654,t.sc_luckywheel_hunt=2656,t.sc_luckywheel_record=2657,t.sc_luckywheel_rank=2658,t.sc_luckywheel_add_record=2660,t.sc_luckywheel_goldPool_broadcast=2661,t.sc_add_small_routine_state=2662,t.sc_activity_yuanbao=2663,t.sc_activity_RMB_info=2665,t.sc_activity_warorder_reward=2666,t.sc_activity_warorder_exreward=2667,t.sc_activityw_dresshunt_ret=2698,t.sc_activityw_update_info=2699,t.sc_artifact_datas=2701,t.sc_artifact_uplevel_result=2702,t.sc_artifact_progress_res=2703,t.sc_artifact_stone_res=2704,t.sc_recharge_get_data=2801,t.sc_recharge_change_data=2802,t.sc_recharge_item_data=2810,t.sc_recharge_get_month_day=2820,t.sc_recharge_gift_reward=2830,t.sc_recharge_month_reward=2840,t.sc_pop_shouchong=2841,t.sc_rxws_can_recharge=2845,t.sc_recharge_first_status=2850,t.sc_chat_new_msg=3101,t.sc_chat_is_send_success=3103,t.sc_chat_system_message=3104,t.sc_chat_msg_delete=3105,t.sc_zhuzai_data=3201,t.sc_zhuzai_shengjie_result=3203,t.sc_zhuzai_grow_result=3204,t.sc_zs_boss_list=3301,t.sc_zs_boss_open=3302,t.sc_zs_boss_remain_time=3303,t.sc_zs_boss_rank_info=3304,t.sc_zs_boss_lottery_info=3305,t.sc_zs_boss_challenge_result=3307,t.sc_zs_boss_hudun_point=3308,t.sc_zs_boss_win_result=3309,t.sc_zs_boss_get_my_point=3311,t.sc_zs_boss_talk_max_point=3312,t.sc_zs_boss_actordie_feats=3313,t.sc_world_boss_open=3315,t.sc_world_boss_challenge_result=3316,t.sc_ladder_info=3501,t.sc_ladder_player_back=3502,t.sc_ladder_result=3503,t.sc_ladder_rank_list=3505,t.sc_ladder_buy_count=3506,t.sc_ladder_get_record=3507,t.sc_miji_datas=3601,t.sc_miji_update=3602,t.sc_miji_change_result=3603,t.sc_miji_fuben_panel_info=3604,t.sc_miji_fuben_quick_info=3605,t.sc_miji_fuben_finished=3606,t.sc_miji_fuben_enter_ret=3607,t.sc_miji_fuben_award=3608,t.sc_miji_fuben_award_resulte=3609,t.sc_miji_power_change=3610,t.sc_money_tree_info=3701,t.sc_money_tree_play_info=3702,t.sc_money_tree_reward_info=3703,t.sc_money_recharge_gift_info=3704,t.sc_guild_info=3801,t.sc_guild_members=3802,t.sc_guild_list=3803,t.sc_guild_create_ret=3804,t.sc_guild_join_info=3806,t.sc_guild_apply=3807,t.sc_guild_notice_apply=3808,t.sc_guild_change_office_ret=3809,t.sc_guild_kick_ret=3811,t.sc_guild_fund=3813,t.sc_guild_change_notice_ret=3814,t.sc_guild_skillinfo=3815,t.sc_guild_learnskill_ret=3816,t.sc_guild_upbuilding_ret=3817,t.sc_guild_temperskill_ret=3818,t.sc_guild_taskinfo=3819,t.sc_guild_onetask=3820,t.sc_guild_history=3822,t.sc_guild_addhistory=3823,t.sc_guild_concount=3824,t.sc_guild_playerinfo=3825,t.sc_guild_broadcastchat=3826,t.sc_guild_allchat=3827,t.sc_guild_autoadd_ret=3828,t.sc_title_list=3901,t.sc_title_add=3902,t.sc_title_del=3903,t.sc_title_set=3904,t.sc_find_assets_init_info=4001,t.sc_guildwar_redpacket_info=4101,t.sc_guildwar_send_redpacket_ret=4102,t.sc_guildwar_get_redpacket_ret=4103,t.sc_guildwar_guild_scores=4108,t.sc_guildwar_actor_scores=4109,t.sc_guildwar_winner=4111,t.sc_guildwar_dayaward_info=4112,t.sc_guildwar_disp_info=4119,t.sc_guildwar_disp_ret=4120,t.sc_guildwar_winner_info=4121,t.sc_guildwar_guild_rank_info=4122,t.sc_guildwar_firstwinner_awardinfo=4123,t.sc_guildwar_winleader=4124,t.sc_guildwar_kffz_info=4125,t.sc_guildwar_kfwin_records=4126,t.sc_get_cross_tianti_list=4200,t.sc_cross_start_combat=4201,t.sc_cross_get_self_info=4202,t.sc_cross_combat_result=4203,t.sc_cross_get_combat_record=4204,t.sc_cross_get_tianti_rank_info=4205,t.sc_cross_get_tianti_history_rank=4206,t.sc_cross_gain_tianti_history_award=4207,t.sc_cross_buy_combat_num=4208,t.sc_guildshop_info=4301,t.sc_guildshop_record=4302,t.sc_guildshop_open_ret=4303,t.sc_gold_guaji_start_combat=4401,t.sc_gold_guaji_info=4402,t.sc_gold_guaji_obtain_items_info=4403,t.sc_gold_guaji_mon_skill_num=4404,t.sc_gold_guaji_over=4405,t.sc_gold_guaji_over_obtain_items_info=4406,t.sc_gold_guaji_combat_boss=4407,t.sc_gold_guaji_start_relive=4409,t.sc_gold_guaji_all_die=4410,t.sc_gold_guaji_pub_boss_ref=4411,t.sc_dress_time_end=4505,t.sc_mine_map_info=4901,t.sc_mine_berob_record=4902,t.sc_mine_info=4904,t.sc_mine_refresh_result=4905,t.sc_mine_reward_result=4906,t.sc_double_mining_notice=4907,t.sc_steal_mine_fight_notice=4908,t.sc_sorce_info=5001,t.sc_update_feats=5002,t.sc_update_sorce=5003,t.sc_can_attack_actor=5004,t.sc_already_attack_actor=5005,t.sc_can_attack_boss=5006,t.sc_enter_top_actor=5007,t.sc_kill_top_boss_actor=5008,t.sc_actor_dead=5009,t.sc_basic_info=5010,t.sc_self_sorce_rank=5011,t.sc_cur_attr_target=5012,t.sc_reward_info=5013,t.sc_receive_sorce_reward=5014,t.sc_prestige_uplevel_result=5101,t.sc_prestige_rank_topthree=5102,t.sc_heji_skill_data=5201,t.sc_longzhuang_boost_ret=5302,t.sc_longzhuang_upgrade_ret=5303,t.sc_fuwen_equipup_data=5401,t.sc_fuwen_open_ret=5402,t.sc_expjade_data=5501,t.sc_expjade_use_result=5502,t.sc_expjade_addexp=5503,t.sc_legend_dress=5601,t.sc_ring_datas=5701,t.sc_ring_uplevel_result=5702,t.sc_ring_taskinfo=5703,t.sc_ring_onetask=5704,t.sc_ring_open=5705,t.sc_ring_soul_data=5706,t.sc_ring_soul_evil_change_ret=5707,t.sc_ring_soul_evil_wash_ret=5708,t.sc_ringboss_init=5711,t.sc_eggbroken_hunt_result=5801,t.sc_eggbroken_record_datas=5802,t.sc_eggbroken_add_record=5803,t.sc_eggbroken_info=5804,t.sc_holygun_init=6001,t.sc_holygun_upstar=6002,t.sc_holygun_upscala=6003,t.sc_holygun_upskill=6004,t.sc_holygun_eatdanyao=6005,t.sc_holygun_achievement=6006,t.sc_share_init_info=6700,t.sc_share_notify=6701,t.sc_share_buffer=6704,t.sc_share_Help_result=6707,t.sc_guild_boss_info=7901,t.sc_guild_boss_call_info=7902,t.sc_guild_boss_cd=7904,t.sc_guild_boss_rewards=7905,t.sc_gdwar_attackers=8001,t.sc_gdwar_enemies=8002,t.sc_gdwar_actor_data=8003,t.sc_gdwar_start_info=8005,t.sc_gdwar_reward=8006,t.sc_gdwar_kill_info=8007,t.sc_gdwar_city_owner_change=8008,t.sc_gdwar_attack_change=8009,t.sc_gdwar_guild_member=8012,t.sc_gdwar_base_info=8013,t.sc_gdwar_guild_group=8014,t.sc_gdwar_wall_rank=8101,t.sc_gdwar_lottery_start=8102,t.sc_gdwar_lottery_over=8103,t.sc_gdwar_lottery_point=8104,t.sc_gdwar_wall_reward=8105,t.sc_gdwar_flag_data=8401,t.sc_gdwar_flag_notice=8402,t.sc_guild_robber_actor_info=9001,t.sc_guild_raid_actor_info=9002,t.sc_guild_robber_info=9011,t.sc_guild_robber_notice=9012,t.sc_guild_robber_update=9013,t.sc_guild_raid_ranklist=9021,t.sc_guild_raid_ranktop=9022,t.sc_guild_raid_stagerank=9023,t.sc_guild_raid_overtime=9024,t.sc_guild_raid_starttime=9025,t.sc_guild_raid_waveover=9026,t.sc_guild_raid_reward_pro=9027,t.sc_biaoche_list=9701,t.sc_biaoche_berob_record=9702,t.sc_self_biaoche_info=9704,t.sc_biaoche_refresh_result=9705,t.sc_biaoche_reward_result=9706,t.sc_double_biaoche_notice=9707,t.sc_steal_biaoche_fight_notice=9708,t.sc_error_code=10001,t.sc_tryroad_datas=21001,t.sc_enter_tryroad_raid=21003,t.sc_get_caiquan_result=21004,t.sc_get_tryroad_award=21005,t.sc_get_tryroad_rank=21006,t.sc_zhuanzhi_uplevel_result=22001,t.sc_zhuanzhi_tasklist=22002,t.sc_zhuanzhi_onetask=22003,t.sc_equip_star_upgrade=22005,t.sc_equip_lvl_upgrade=22006,t.sc_zhuanzhi_donate=22007,t.sc_func_tips=22008,t.sc_equip_zhuanzhi_power=22009,t.sc_equip_zhuanzhi_skill=22010,t.sc_zhuanzhi_jingmai_boost=22011,t.sc_zhuanzhi_jingmai_upgrade=22012,t.sc_zhuanzhi_talent_init=22021,t.sc_zhuanzhi_talent_upgrade=22022,t.sc_faq_res=22100,t.sc_luckypackage_res=22110,t.sc_luckypackage_active_res=22112,t.sc_online_res=22121,t.sc_online_reward_res=22122,t.sc_funopen_res=22131,t.sc_fuben_coutdown=22140,t.sc_monopoly_res=22200,t.sc_monopoly_sync_res=22201,t.sc_monopoly_dice_res=22202,t.sc_monopoly_buy_res=22204,t.sc_monopoly_use_res=22205,t.sc_monopoly_nextlvl_res=22206,t.sc_monopoly_exchange_res=22207,t.sc_monopoly_store_res=22208,t.sc_monopoly_rank_res=22209,t.sc_monopoly_getitem_res=22210,t.sc_monopoly_log_res=22212,t.sc_monopoly_usespecial_res=22213,t.sc_monopoly_tili_res=22215,t.sc_fieldexp_buff_res=22500,t.sc_shapeshift_send_join_relute=25004,t.sc_shapeshift_send_upgrade_relute=25005,t.sc_shapeshift_send_skill_relute=25006,t.sc_shapeshift_send_info=25008,t.sc_tendraw_send_reward_relute=25009,t.sc_tendraw_send_drawcnt_relute=25010,t.sc_shapeshift_send_shapeInfo=25012,t.sc_shapeshift_send_JoinInfo=25014,t.sc_shiliansha_send_bufffs=26003,t.sc_shiliansha_send_info=26004,t.sc_shiliansha_send_relute=26008,t.sc_shiliansha_send_enemyhp=26009,t.sc_neigong_info=27004,t.sc_pet_init_res=3e4,t.sc_pet_uplevel_res=30001,t.sc_pet_upstar_res=30002,t.sc_pet_activate_res=30003,t.sc_pet_rename_res=30004,t.sc_pet_setfight_res=30005,t.sc_pet_skillup_res=30006,t.sc_pet_wash_res=30007,t.sc_pet_attach_init_res=30008,t.sc_pet_attach_unlock_res=30009,t.sc_pet_attach_res=30010,t.sc_pet_washlock_res=30011,t.sc_pet_washrep_res=30012,t.sc_pet_sync_attr=30013,t.sc_pet_smelt_res=30014,t.sc_pet_compose_res=30015,t.sc_pet_wake_res=30016,t.sc_pet_pack_res=30017,t.sc_pet_attr_res=30018,t.sc_ride_init_res=30100,t.sc_ride_uplevel_res=30101,t.sc_ride_upstar_res=30102,t.sc_ride_skillup_res=30105,t.sc_ride_equip_uplevel_res=30106,t.sc_ride_equip_upstar_res=30107,t.sc_ride_equipchange_res=30108,t.sc_ride_equipoff_res=30109,t.sc_ride_eat_res=30110,t.sc_ride_getaward_res=30111,t.sc_ride_change_res=30113,t.sc_tower_init_res=30300,t.sc_tower_award_res=30301,t.sc_tower_sweep_res=30304,t.sc_tower_floor_res=30305,t.sc_tower_sync=30306,t.sc_tatoo_bag_init=30400,t.sc_tatoo_init_res=30401,t.sc_tatoo_equipon_res=30402,t.sc_tatoo_equipoff_res=30403,t.sc_tatoo_strength_res=30404,t.sc_tatoo_add_res=30405,t.sc_team_my_res=30500,t.sc_team_res=30501,t.sc_team_info_res=30502,t.sc_team_join_res=30503,t.sc_team_quit_res=30504,t.sc_one_gift=30511,t}(Sproto.ProtocolBase);__reflect(S2cProtocol.prototype,"S2cProtocol");var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shapeshift_send_comcard_request=t,__reflect(t.prototype,"Sproto.cs_shapeshift_send_comcard_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shapeshift_send_info_request=i,__reflect(i.prototype,"Sproto.cs_shapeshift_send_info_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.state&&this.se.wi(this.state,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shapeshift_send_join_request=o,__reflect(o.prototype,"Sproto.cs_shapeshift_send_join_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.pos=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.pos&&this.se.wi(this.pos,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shapeshift_send_upgrade_request=s,__reflect(s.prototype,"Sproto.cs_shapeshift_send_upgrade_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.drawType=this.de.ri();break;case 1:this.cnt=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.drawType&&this.se.wi(this.drawType,0),void 0!=this.cnt&&this.se.wi(this.cnt,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_tendraw_send_draw_request=n,__reflect(n.prototype,"Sproto.cs_tendraw_send_draw_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_tendraw_send_info_request=r,__reflect(r.prototype,"Sproto.cs_tendraw_send_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.lv=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.lv&&this.se.wi(this.lv,1),this.se.Close()},t}(e.SprotoTypeBase);e.SoltList=t,__reflect(t.prototype,"Sproto.SoltList");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.shapeid=this.de.ri();break;case 2:this.skills=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.shapeid&&this.se.wi(this.shapeid,1),void 0!=this.skills&&this.se.wia(this.skills,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shapeshift_send_JoinInfo_request=i,__reflect(i.prototype,"Sproto.sc_shapeshift_send_JoinInfo_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.joinId=this.de.ri();break;case 2:this.shapes=this.de.roa(c);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.joinId&&this.se.wi(this.joinId,1),void 0!=this.shapes&&this.se.woa(this.shapes,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shapeshift_send_info_request=o,__reflect(o.prototype,"Sproto.sc_shapeshift_send_info_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.rolseId=this.de.ri();break;case 1:this.shapeId=this.de.ri();break;case 2:this.relute=this.de.ri();break;case 3:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.rolseId&&this.se.wi(this.rolseId,0),void 0!=this.shapeId&&this.se.wi(this.shapeId,1),void 0!=this.relute&&this.se.wi(this.relute,2),void 0!=this.state&&this.se.wi(this.state,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shapeshift_send_join_relute_request=s,__reflect(s.prototype,"Sproto.sc_shapeshift_send_join_relute_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.shapeid=this.de.ri();break;case 2:this.relute=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.shapeid&&this.se.wi(this.shapeid,1),void 0!=this.relute&&this.se.wi(this.relute,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shapeshift_send_shapeInfo_request=n,__reflect(n.prototype,"Sproto.sc_shapeshift_send_shapeInfo_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.rolseId=this.de.ri();break;case 1:this.shapeId=this.de.ri();break;case 2:this.skillList=this.de.roa(u);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.rolseId&&this.se.wi(this.rolseId,0),void 0!=this.shapeId&&this.se.wi(this.shapeId,1),void 0!=this.skillList&&this.se.woa(this.skillList,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shapeshift_send_skill_relute_request=r,__reflect(r.prototype,"Sproto.sc_shapeshift_send_skill_relute_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.rolseId=this.de.ri();break;case 1:this.shapeId=this.de.ri();break;case 2:this.solteId=this.de.ri();break;case 3:this.lv=this.de.ri();break;case 4:this.Progress=this.de.ri();break;case 5:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.rolseId&&this.se.wi(this.rolseId,0),void 0!=this.shapeId&&this.se.wi(this.shapeId,1),void 0!=this.solteId&&this.se.wi(this.solteId,2),void 0!=this.lv&&this.se.wi(this.lv,3),void 0!=this.Progress&&this.se.wi(this.Progress,4),void 0!=this.state&&this.se.wi(this.state,5),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shapeshift_send_upgrade_relute_request=a,__reflect(a.prototype,"Sproto.sc_shapeshift_send_upgrade_relute_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.drawCnt=this.de.ri();break;case 1:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.drawCnt&&this.se.wi(this.drawCnt,0),void 0!=this.type&&this.se.wi(this.type,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_tendraw_send_drawcnt_relute_request=l,__reflect(l.prototype,"Sproto.sc_tendraw_send_drawcnt_relute_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.drawDatas=this.de.roa(d);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.drawDatas&&this.se.woa(this.drawDatas,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_tendraw_send_reward_relute_request=h,__reflect(h.prototype,"Sproto.sc_tendraw_send_reward_relute_request");var c=function(e){function i(t){return void 0===t&&(t=null),e.call(this,6,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.state=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.Progress=this.de.ri();break;case 3:this.SoltList=this.de.roa(t);break;case 4:this.skillList=this.de.ria();break;case 5:this.JoinState=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.state&&this.se.wi(this.state,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.Progress&&this.se.wi(this.Progress,2),void 0!=this.SoltList&&this.se.woa(this.SoltList,3),void 0!=this.skillList&&this.se.wia(this.skillList,4),void 0!=this.JoinState&&this.se.wi(this.JoinState,5),this.se.Close()},i}(e.SprotoTypeBase);e.shapeList=c,__reflect(c.prototype,"Sproto.shapeList");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.skillList=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.skillList&&this.se.wia(this.skillList,0),this.se.Close()},t}(e.SprotoTypeBase);e.skillList=u,__reflect(u.prototype,"Sproto.skillList");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.tendraw_item=d,__reflect(d.prototype,"Sproto.tendraw_item")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actId=this.de.ri();break;case 1:this.subProto=this.de.rs();break;case 2:this.subData=this.de.ro(s);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actId&&this.se.wi(this.actId,0),void 0!=this.subProto&&this.se.ws(this.subProto,1),void 0!=this.subData&&this.se.wo(this.subData,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_operate_share_request=t,__reflect(t.prototype,"Sproto.cs_operate_share_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_share_Help_request=i,__reflect(i.prototype,"Sproto.cs_share_Help_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.shareticket=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.shareticket&&this.se.ws(this.shareticket,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_share_event_request=o,__reflect(o.prototype,"Sproto.cs_share_event_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.integer_data=this.de.ria();break;case 1:this.string_data=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.integer_data&&this.se.wia(this.integer_data,0),void 0!=this.string_data&&this.se.ws(this.string_data,1),this.se.Close()},t}(e.SprotoTypeBase);e.sub_proto_data=s,__reflect(s.prototype,"Sproto.sub_proto_data")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actId=this.de.ri();break;case 1:this.shareCount=this.de.ri();break;case 2:this.reward=this.de.roa(d);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actId&&this.se.wi(this.actId,0),void 0!=this.shareCount&&this.se.wi(this.shareCount,1),void 0!=this.reward&&this.se.woa(this.reward,2),this.se.Close()},t}(e.SprotoTypeBase);e.act_accumulateshare=t,__reflect(t.prototype,"Sproto.act_accumulateshare");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actId=this.de.ri();break;case 1:this.shareCount=this.de.ri();break;case 2:this.rewardState=this.de.ri();break;case 3:this.cdtime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actId&&this.se.wi(this.actId,0),void 0!=this.shareCount&&this.se.wi(this.shareCount,1),void 0!=this.rewardState&&this.se.wi(this.rewardState,2),void 0!=this.cdtime&&this.se.wi(this.cdtime,3),this.se.Close()},t}(e.SprotoTypeBase);e.act_dailyshare=i,__reflect(i.prototype,"Sproto.act_dailyshare");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actId=this.de.ri();break;case 1:this.joinState=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actId&&this.se.wi(this.actId,0),void 0!=this.joinState&&this.se.wi(this.joinState,1),this.se.Close()},t}(e.SprotoTypeBase);e.act_firstshare=o,__reflect(o.prototype,"Sproto.act_firstshare");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actId=this.de.ri();break;case 1:this.frienddata=this.de.roa(n);break;case 2:this.redpacket=this.de.roa(r);break;case 3:this.helpcount=this.de.ri();break;case 4:this.newplayer=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actId&&this.se.wi(this.actId,0),void 0!=this.frienddata&&this.se.woa(this.frienddata,1),void 0!=this.redpacket&&this.se.woa(this.redpacket,2),void 0!=this.helpcount&&this.se.wi(this.helpcount,3),void 0!=this.newplayer&&this.se.wi(this.newplayer,4),this.se.Close()},t}(e.SprotoTypeBase);e.act_friendhelp=s,__reflect(s.prototype,"Sproto.act_friendhelp");
var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dbid=this.de.ri();break;case 1:this.accid=this.de.rs();break;case 2:this.level=this.de.ri();break;case 3:this.imgurl=this.de.rs();break;case 4:this.taghelp=this.de.ri();break;case 5:this.taglevelup=this.de.ri();break;case 6:this.friendName=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dbid&&this.se.wi(this.dbid,0),void 0!=this.accid&&this.se.ws(this.accid,1),void 0!=this.level&&this.se.wi(this.level,2),void 0!=this.imgurl&&this.se.ws(this.imgurl,3),void 0!=this.taghelp&&this.se.wi(this.taghelp,4),void 0!=this.taglevelup&&this.se.wi(this.taglevelup,5),void 0!=this.friendName&&this.se.ws(this.friendName,6),this.se.Close()},t}(e.SprotoTypeBase);e.friend_record=n,__reflect(n.prototype,"Sproto.friend_record");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.strid=this.de.rs();break;case 1:this.sharecoin=this.de.ri();break;case 2:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.strid&&this.se.ws(this.strid,0),void 0!=this.sharecoin&&this.se.wi(this.sharecoin,1),void 0!=this.state&&this.se.wi(this.state,2),this.se.Close()},t}(e.SprotoTypeBase);e.redpacket=r,__reflect(r.prototype,"Sproto.redpacket");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.state&&this.se.wi(this.state,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_share_Help_result_request=a,__reflect(a.prototype,"Sproto.sc_share_Help_result_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.lefttime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.lefttime&&this.se.wi(this.lefttime,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_share_buffer_request=l,__reflect(l.prototype,"Sproto.sc_share_buffer_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actinfos=this.de.ro(u);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actinfos&&this.se.wo(this.actinfos,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_share_init_info_request=h,__reflect(h.prototype,"Sproto.sc_share_init_info_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.actId=this.de.ri();break;case 1:this.param1=this.de.ri();break;case 2:this.param2=this.de.ri();break;case 3:this.param3=this.de.ri();break;case 5:this.friend=this.de.ro(n);break;case 6:this.redpacket=this.de.ro(r);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.actId&&this.se.wi(this.actId,0),void 0!=this.param1&&this.se.wi(this.param1,1),void 0!=this.param2&&this.se.wi(this.param2,2),void 0!=this.param3&&this.se.wi(this.param3,3),void 0!=this.friend&&this.se.wo(this.friend,5),void 0!=this.redpacket&&this.se.wo(this.redpacket,6),this.se.Close()},t}(e.SprotoTypeBase);e.sc_share_notify_request=c,__reflect(c.prototype,"Sproto.sc_share_notify_request");var u=function(e){function n(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(n,e),n.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.act1=this.de.ro(o);break;case 1:this.act2=this.de.ro(i);break;case 2:this.act3=this.de.ro(t);break;case 3:this.act4=this.de.ro(s);break;default:this.de.ReadUnknowData()}},n.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.act1&&this.se.wo(this.act1,0),void 0!=this.act2&&this.se.wo(this.act2,1),void 0!=this.act3&&this.se.wo(this.act3,2),void 0!=this.act4&&this.se.wo(this.act4,3),this.se.Close()},n}(e.SprotoTypeBase);e.share_data_collection=u,__reflect(u.prototype,"Sproto.share_data_collection");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;case 1:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.state&&this.se.wi(this.state,1),this.se.Close()},t}(e.SprotoTypeBase);e.sub_accumulatedata=d,__reflect(d.prototype,"Sproto.sub_accumulatedata")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shiliansha_send_buff_request=t,__reflect(t.prototype,"Sproto.cs_shiliansha_send_buff_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shiliansha_send_buy_buff_request=i,__reflect(i.prototype,"Sproto.cs_shiliansha_send_buy_buff_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shiliansha_send_continue_request=o,__reflect(o.prototype,"Sproto.cs_shiliansha_send_continue_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shiliansha_send_enter_request=s,__reflect(s.prototype,"Sproto.cs_shiliansha_send_enter_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shiliansha_send_info_request=n,__reflect(n.prototype,"Sproto.cs_shiliansha_send_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.sign=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.sign&&this.se.wb(this.sign,1),this.se.Close()},t}(e.SprotoTypeBase);e.buff=t,__reflect(t.prototype,"Sproto.buff");var i=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.buffs=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.buffs&&this.se.woa(this.buffs,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_shiliansha_send_bufffs_request=i,__reflect(i.prototype,"Sproto.sc_shiliansha_send_bufffs_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dhp=this.de.ri();break;case 1:this.ctype=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dhp&&this.se.wi(this.dhp,0),void 0!=this.ctype&&this.se.wi(this.ctype,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shiliansha_send_enemyhp_request=o,__reflect(o.prototype,"Sproto.sc_shiliansha_send_enemyhp_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.useCnt=this.de.ri();break;case 1:this.winCnt=this.de.ri();break;case 2:this.raidType=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.useCnt&&this.se.wi(this.useCnt,0),void 0!=this.winCnt&&this.se.wi(this.winCnt,1),void 0!=this.raidType&&this.se.wi(this.raidType,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shiliansha_send_info_request=s,__reflect(s.prototype,"Sproto.sc_shiliansha_send_info_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.relute=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.relute&&this.se.wi(this.relute,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shiliansha_send_relute_request=n,__reflect(n.prototype,"Sproto.sc_shiliansha_send_relute_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.shopType=this.de.ri();break;case 1:this.items=this.de.roa(h);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.shopType&&this.se.wi(this.shopType,0),void 0!=this.items&&this.se.woa(this.items,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shop_buy_request=t,__reflect(t.prototype,"Sproto.cs_shop_buy_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shop_buy_jifen_request=i,__reflect(i.prototype,"Sproto.cs_shop_buy_jifen_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;case 1:this.typ=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.typ&&this.se.wi(this.typ,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shop_buy_medal_request=o,__reflect(o.prototype,"Sproto.cs_shop_buy_medal_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.cfgIndex=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.cfgIndex&&this.se.wi(this.cfgIndex,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shop_cross_tianti_glory_buy_request=s,__reflect(s.prototype,"Sproto.cs_shop_cross_tianti_glory_buy_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shop_cross_tianti_glory_times_request=n,__reflect(n.prototype,"Sproto.cs_shop_cross_tianti_glory_times_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shop_godequip_buy_request=r,__reflect(r.prototype,"Sproto.cs_shop_godequip_buy_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.typ=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.typ&&this.se.wi(this.typ,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shop_medal_message_request=a,__reflect(a.prototype,"Sproto.cs_shop_medal_message_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_shop_refresh_request=l,__reflect(l.prototype,"Sproto.cs_shop_refresh_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.shopitem=h,__reflect(h.prototype,"Sproto.shopitem")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.feats_store_data=t,__reflect(t.prototype,"Sproto.feats_store_data");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.openstate=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.openstate&&this.se.wb(this.openstate,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_mystery_shop_open_state_request=i,__reflect(i.prototype,"Sproto.sc_mystery_shop_open_state_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shop_buy_ret_request=o,__reflect(o.prototype,"Sproto.sc_shop_buy_ret_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.code=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.code&&this.se.wi(this.code,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shop_cross_tianti_glory_buy_request=s,__reflect(s.prototype,"Sproto.sc_shop_cross_tianti_glory_buy_request");var n=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.cfgIdNums=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.cfgIdNums&&this.se.woa(this.cfgIdNums,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_shop_cross_tianti_glory_times_request=n,__reflect(n.prototype,"Sproto.sc_shop_cross_tianti_glory_times_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.refreshTime=this.de.ri();break;case 1:this.storescore=this.de.ri();break;case 2:this.refreshCount=this.de.ri();break;case 3:this.datas=this.de.roa(p);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.refreshTime&&this.se.wi(this.refreshTime,0),void 0!=this.storescore&&this.se.wi(this.storescore,1),void 0!=this.refreshCount&&this.se.wi(this.refreshCount,2),void 0!=this.datas&&this.se.woa(this.datas,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shop_data_request=r,__reflect(r.prototype,"Sproto.sc_shop_data_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.endtime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.endtime&&this.se.wi(this.endtime,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shop_godequip_info_request=a,__reflect(a.prototype,"Sproto.sc_shop_godequip_info_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;case 1:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),void 0!=this.num&&this.se.wi(this.num,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shop_jifen_buy_ret_request=l,__reflect(l.prototype,"Sproto.sc_shop_jifen_buy_ret_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.shopNum=this.de.ri();break;case 1:this.useNum=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.shopNum&&this.se.wi(this.shopNum,0),void 0!=this.useNum&&this.se.wi(this.useNum,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shop_num_limit_request=h,__reflect(h.prototype,"Sproto.sc_shop_num_limit_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shop_refresh_ret_request=c,__reflect(c.prototype,"Sproto.sc_shop_refresh_ret_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;case 1:this.count=this.de.ri();break;case 2:this.typ=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.count&&this.se.wi(this.count,1),void 0!=this.typ&&this.se.wi(this.typ,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_shop_update_buy_medal_request=u,__reflect(u.prototype,"Sproto.sc_shop_update_buy_medal_request");var d=function(e){function i(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.featsStoreData=this.de.roa(t);break;case 1:this.typ=this.de.ri();break;case 2:this.credit=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.featsStoreData&&this.se.woa(this.featsStoreData,0),void 0!=this.typ&&this.se.wi(this.typ,1),void 0!=this.credit&&this.se.wi(this.credit,2),this.se.Close()},i}(e.SprotoTypeBase);e.sc_shop_update_medal_message_request=d,__reflect(d.prototype,"Sproto.sc_shop_update_medal_message_request");var p=function(t){function i(e){return void 0===e&&(e=null),t.call(this,5,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.id=this.de.ri();break;case 1:this.costType=this.de.ri();break;case 2:this.costNum=this.de.ri();break;case 3:this.discountType=this.de.ri();break;case 4:this.item=this.de.ro(e.item_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.costType&&this.se.wi(this.costType,1),void 0!=this.costNum&&this.se.wi(this.costNum,2),void 0!=this.discountType&&this.se.wi(this.discountType,3),void 0!=this.item&&this.se.wo(this.item,4),this.se.Close()},i}(e.SprotoTypeBase);e.shop_data=p,__reflect(p.prototype,"Sproto.shop_data")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;case 1:this.skillID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.skillID&&this.se.wi(this.skillID,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_skill_break_request=t,__reflect(t.prototype,"Sproto.cs_skill_break_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;case 1:this.skillID=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.skillID&&this.se.wia(this.skillID,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_skill_setfight_req_request=i,__reflect(i.prototype,"Sproto.cs_skill_setfight_req_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;case 1:this.skillID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.skillID&&this.se.wi(this.skillID,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_skill_upgrade_request=o,__reflect(o.prototype,"Sproto.cs_skill_upgrade_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_skill_upgrade_all_request=s,__reflect(s.prototype,"Sproto.cs_skill_upgrade_all_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.suorceHandle=this.de.ri();break;case 1:this.targetHandle=this.de.ri();break;case 2:this.skillID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.suorceHandle&&this.se.wi(this.suorceHandle,0),void 0!=this.targetHandle&&this.se.wi(this.targetHandle,1),void 0!=this.skillID&&this.se.wi(this.skillID,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_use_skill_request=n,__reflect(n.prototype,"Sproto.cs_use_skill_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.effectID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.effectID&&this.se.wi(this.effectID,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_skill_add_effect_request=t,__reflect(t.prototype,"Sproto.sc_skill_add_effect_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;case 1:this.level=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.level&&this.se.wia(this.level,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_skill_all_upgrade_result_request=i,__reflect(i.prototype,"Sproto.sc_skill_all_upgrade_result_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;case 1:this.skillID=this.de.ri();break;case 2:this.breakLevel=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.skillID&&this.se.wi(this.skillID,1),void 0!=this.breakLevel&&this.se.wi(this.breakLevel,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_skill_break_result_request=o,__reflect(o.prototype,"Sproto.sc_skill_break_result_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.buffID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.buffID&&this.se.wi(this.buffID,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_skill_deal_add_buff_request=s,__reflect(s.prototype,"Sproto.sc_skill_deal_add_buff_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.buffID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.buffID&&this.se.wi(this.buffID,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_skill_deal_remove_buff_request=n,__reflect(n.prototype,"Sproto.sc_skill_deal_remove_buff_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.effectID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.effectID&&this.se.wi(this.effectID,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_skill_remove_effect_request=r,__reflect(r.prototype,"Sproto.sc_skill_remove_effect_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;case 1:this.skillID=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.skillID&&this.se.wia(this.skillID,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_skill_setfight_res_request=a,__reflect(a.prototype,"Sproto.sc_skill_setfight_res_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;case 1:this.skillID=this.de.ri();break;case 2:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.skillID&&this.se.wi(this.skillID,1),void 0!=this.level&&this.se.wi(this.level,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_skill_upgrade_result_request=l,__reflect(l.prototype,"Sproto.sc_skill_upgrade_result_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.sourceHandle=this.de.ri();break;case 1:this.skillID=this.de.ri();break;case 2:this.targetHandle=this.de.ri();break;case 3:this.datas=this.de.roa(c);break;case 4:this.mp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.sourceHandle&&this.se.wi(this.sourceHandle,0),void 0!=this.skillID&&this.se.wi(this.skillID,1),void 0!=this.targetHandle&&this.se.wi(this.targetHandle,2),void 0!=this.datas&&this.se.woa(this.datas,3),void 0!=this.mp&&this.se.wi(this.mp,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_skill_use_result_request=h,__reflect(h.prototype,"Sproto.sc_skill_use_result_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.type=this.de.ri();break;case 2:this.value=this.de.ri();break;case 3:this.damageType=this.de.ri();break;case 4:this.damageEle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.type&&this.se.wi(this.type,1),void 0!=this.value&&this.se.wi(this.value,2),void 0!=this.damageType&&this.se.wi(this.damageType,3),void 0!=this.damageEle&&this.se.wi(this.damageEle,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_skill_use_result_request_data=c,__reflect(c.prototype,"Sproto.sc_skill_use_result_request_data")
}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.taskID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.taskID&&this.se.wi(this.taskID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_task_apply_vitality_request=t,__reflect(t.prototype,"Sproto.cs_task_apply_vitality_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.taskID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.taskID&&this.se.wi(this.taskID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_task_get_achieve_request=i,__reflect(i.prototype,"Sproto.cs_task_get_achieve_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.taskID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.taskID&&this.se.wi(this.taskID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_task_get_task_request=o,__reflect(o.prototype,"Sproto.cs_task_get_task_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.taskID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.taskID&&this.se.wi(this.taskID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_task_get_vitality_awards_request=s,__reflect(s.prototype,"Sproto.cs_task_get_vitality_awards_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.taskID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.taskID&&this.se.wi(this.taskID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_task_share_open_request=n,__reflect(n.prototype,"Sproto.cs_task_share_open_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.taskID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.taskID&&this.se.wi(this.taskID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_task_warorder_reward_request=r,__reflect(r.prototype,"Sproto.cs_task_warorder_reward_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 1:this.id=this.de.ri();break;case 2:this.state=this.de.ri();break;case 3:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.state&&this.se.wi(this.state,2),void 0!=this.value&&this.se.wi(this.value,3),this.se.Close()},t}(e.SprotoTypeBase);e.achievement_data=t,__reflect(t.prototype,"Sproto.achievement_data");var i=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.ro(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.wo(this.data,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_task_achieve_change_data_request=i,__reflect(i.prototype,"Sproto.sc_task_achieve_change_data_request");var o=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.achiEvement=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.achiEvement&&this.se.woa(this.achiEvement,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_task_achieve_data_request=o,__reflect(o.prototype,"Sproto.sc_task_achieve_data_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.value=this.de.ri();break;case 2:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.value&&this.se.wi(this.value,1),void 0!=this.state&&this.se.wi(this.state,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_task_change_data_request=s,__reflect(s.prototype,"Sproto.sc_task_change_data_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.taskDatas=this.de.roa(u);break;case 1:this.vitality=this.de.ri();break;case 2:this.vitalityDats=this.de.roa(d);break;case 3:this.growup=this.de.ri();break;case 4:this.growupid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.taskDatas&&this.se.woa(this.taskDatas,0),void 0!=this.vitality&&this.se.wi(this.vitality,1),void 0!=this.vitalityDats&&this.se.woa(this.vitalityDats,2),void 0!=this.growup&&this.se.wi(this.growup,3),void 0!=this.growupid&&this.se.wi(this.growupid,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_task_init_data_request=n,__reflect(n.prototype,"Sproto.sc_task_init_data_request");var r=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.ro(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.wo(this.data,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_task_join_achieve_data_request=r,__reflect(r.prototype,"Sproto.sc_task_join_achieve_data_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.vitality=this.de.ri();break;case 1:this.growup=this.de.ri();break;case 2:this.growupid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.vitality&&this.se.wi(this.vitality,0),void 0!=this.growup&&this.se.wi(this.growup,1),void 0!=this.growupid&&this.se.wi(this.growupid,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_task_vitality_request=a,__reflect(a.prototype,"Sproto.sc_task_vitality_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.state&&this.se.wi(this.state,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_task_vitality_award_request=l,__reflect(l.prototype,"Sproto.sc_task_vitality_award_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.roa(p);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_task_warorder_data_request=h,__reflect(h.prototype,"Sproto.sc_task_warorder_data_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.ro(p);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.wo(this.data,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_task_warorder_update_request=c,__reflect(c.prototype,"Sproto.sc_task_warorder_update_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.value=this.de.ri();break;case 2:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.value&&this.se.wi(this.value,1),void 0!=this.state&&this.se.wi(this.state,2),this.se.Close()},t}(e.SprotoTypeBase);e.task_data=u,__reflect(u.prototype,"Sproto.task_data");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.state&&this.se.wi(this.state,1),this.se.Close()},t}(e.SprotoTypeBase);e.vitality_data=d,__reflect(d.prototype,"Sproto.vitality_data");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.state=this.de.ri();break;case 2:this.tasktype=this.de.ri();break;case 3:this.value=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.state&&this.se.wi(this.state,1),void 0!=this.tasktype&&this.se.wi(this.tasktype,2),void 0!=this.value&&this.se.wi(this.value,3),this.se.Close()},t}(e.SprotoTypeBase);e.warorder_data=p,__reflect(p.prototype,"Sproto.warorder_data")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.slot=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.slot&&this.se.wi(this.slot,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_tatoo_equipoff_req_request=t,__reflect(t.prototype,"Sproto.cs_tatoo_equipoff_req_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.slot=this.de.ri();break;case 2:this.handler=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.slot&&this.se.wi(this.slot,1),void 0!=this.handler&&this.se.wi(this.handler,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_tatoo_equipon_req_request=i,__reflect(i.prototype,"Sproto.cs_tatoo_equipon_req_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_tatoo_init_req_request=o,__reflect(o.prototype,"Sproto.cs_tatoo_init_req_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.slot=this.de.ri();break;case 2:this.handler=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.slot&&this.se.wi(this.slot,1),void 0!=this.handler&&this.se.wia(this.handler,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_tatoo_strength_req_request=s,__reflect(s.prototype,"Sproto.cs_tatoo_strength_req_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.ro(a);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.wo(this.data,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_tatoo_add_res_request=t,__reflect(t.prototype,"Sproto.sc_tatoo_add_res_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.code=this.de.ri();break;case 1:this.datas=this.de.roa(a);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.code&&this.se.wi(this.code,0),void 0!=this.datas&&this.se.woa(this.datas,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_tatoo_bag_init_request=i,__reflect(i.prototype,"Sproto.sc_tatoo_bag_init_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.slot=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.slot&&this.se.wi(this.slot,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_tatoo_equipoff_res_request=o,__reflect(o.prototype,"Sproto.sc_tatoo_equipoff_res_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.item=this.de.ro(h);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.item&&this.se.wo(this.item,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_tatoo_equipon_res_request=s,__reflect(s.prototype,"Sproto.sc_tatoo_equipon_res_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.roa(l);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_tatoo_init_res_request=n,__reflect(n.prototype,"Sproto.sc_tatoo_init_res_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.item=this.de.ro(h);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.item&&this.se.wo(this.item,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_tatoo_strength_res_request=r,__reflect(r.prototype,"Sproto.sc_tatoo_strength_res_request");var a=function(t){function i(e){return void 0===e&&(e=null),t.call(this,6,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.handle=this.de.ri();break;case 1:this.configID=this.de.ri();break;case 2:this.att=this.de.roa(e.attribute_data);break;case 3:this.level=this.de.ri();break;case 4:this.exp=this.de.ri();break;case 5:this.mainid=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.configID&&this.se.wi(this.configID,1),void 0!=this.att&&this.se.woa(this.att,2),void 0!=this.level&&this.se.wi(this.level,3),void 0!=this.exp&&this.se.wi(this.exp,4),void 0!=this.mainid&&this.se.wi(this.mainid,5),this.se.Close()},i}(e.SprotoTypeBase);e.tatoo_bag_item=a,__reflect(a.prototype,"Sproto.tatoo_bag_item");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.tatoo=this.de.roa(h);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.tatoo&&this.se.woa(this.tatoo,1),this.se.Close()},t}(e.SprotoTypeBase);e.tatoo_data=l,__reflect(l.prototype,"Sproto.tatoo_data");var h=function(t){function i(e){return void 0===e&&(e=null),t.call(this,6,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.slot=this.de.ri();break;case 1:this.itemid=this.de.ri();break;case 2:this.level=this.de.ri();break;case 3:this.exp=this.de.ri();break;case 4:this.attr=this.de.roa(e.attribute_data);break;case 5:this.mainid=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.slot&&this.se.wi(this.slot,0),void 0!=this.itemid&&this.se.wi(this.itemid,1),void 0!=this.level&&this.se.wi(this.level,2),void 0!=this.exp&&this.se.wi(this.exp,3),void 0!=this.attr&&this.se.woa(this.attr,4),void 0!=this.mainid&&this.se.wi(this.mainid,5),this.se.Close()},i}(e.SprotoTypeBase);e.tatoo_item=h,__reflect(h.prototype,"Sproto.tatoo_item")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_team_fight_req_request=t,__reflect(t.prototype,"Sproto.cs_team_fight_req_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_team_info_req_request=i,__reflect(i.prototype,"Sproto.cs_team_info_req_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.groupid=this.de.ri();break;case 1:this.teamid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.groupid&&this.se.wi(this.groupid,0),void 0!=this.teamid&&this.se.wi(this.teamid,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_team_join_req_request=o,__reflect(o.prototype,"Sproto.cs_team_join_req_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.kickid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.kickid&&this.se.wi(this.kickid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_team_kick_req_request=s,__reflect(s.prototype,"Sproto.cs_team_kick_req_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_team_quit_req_request=n,__reflect(n.prototype,"Sproto.cs_team_quit_req_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.groupid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.groupid&&this.se.wi(this.groupid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_team_req_request=r,__reflect(r.prototype,"Sproto.cs_team_req_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.teamid=this.de.ri();break;case 1:this.name=this.de.rs();break;case 2:this.captain=this.de.ri();break;case 3:this.members=this.de.roa(i);break;case 4:this.groupid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.teamid&&this.se.wi(this.teamid,0),void 0!=this.name&&this.se.ws(this.name,1),void 0!=this.captain&&this.se.wi(this.captain,2),void 0!=this.members&&this.se.woa(this.members,3),void 0!=this.groupid&&this.se.wi(this.groupid,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_team_info_res_request=t,__reflect(t.prototype,"Sproto.sc_team_info_res_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,8,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.dbid=this.de.ri();break;case 1:this.name=this.de.rs();break;case 2:this.job=this.de.ri();break;case 3:this.sex=this.de.ri();break;case 4:this.level=this.de.ri();break;case 5:this.zslevel=this.de.ri();break;case 6:this.power=this.de.ri();break;case 7:this.serverid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.dbid&&this.se.wi(this.dbid,0),void 0!=this.name&&this.se.ws(this.name,1),void 0!=this.job&&this.se.wi(this.job,2),void 0!=this.sex&&this.se.wi(this.sex,3),void 0!=this.level&&this.se.wi(this.level,4),void 0!=this.zslevel&&this.se.wi(this.zslevel,5),void 0!=this.power&&this.se.wi(this.power,6),void 0!=this.serverid&&this.se.wi(this.serverid,7),this.se.Close()},t}(e.SprotoTypeBase);e.sc_team_info_res_request_team_member=i,__reflect(i.prototype,"Sproto.sc_team_info_res_request_team_member");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_team_join_res_request=o,__reflect(o.prototype,"Sproto.sc_team_join_res_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 1:this.times=this.de.ri();break;case 2:this.id=this.de.ri();break;case 3:this.first=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.times&&this.se.wi(this.times,1),void 0!=this.id&&this.se.wi(this.id,2),void 0!=this.first&&this.se.wia(this.first,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_team_my_res_request=s,__reflect(s.prototype,"Sproto.sc_team_my_res_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.groupid=this.de.ri();break;case 1:this.teamid=this.de.ri();break;case 2:this.dbid=this.de.ri();break;case 3:this.captain=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.groupid&&this.se.wi(this.groupid,0),void 0!=this.teamid&&this.se.wi(this.teamid,1),void 0!=this.dbid&&this.se.wi(this.dbid,2),void 0!=this.captain&&this.se.wi(this.captain,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_team_quit_res_request=n,__reflect(n.prototype,"Sproto.sc_team_quit_res_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.groupid=this.de.ri();break;case 1:this.list=this.de.roa(a);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.groupid&&this.se.wi(this.groupid,0),void 0!=this.list&&this.se.woa(this.list,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_team_res_request=r,__reflect(r.prototype,"Sproto.sc_team_res_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.teamid=this.de.ri();break;case 1:this.name=this.de.rs();break;case 2:this.job=this.de.ri();break;case 3:this.sex=this.de.ri();break;case 4:this.num=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.teamid&&this.se.wi(this.teamid,0),void 0!=this.name&&this.se.ws(this.name,1),void 0!=this.job&&this.se.wi(this.job,2),void 0!=this.sex&&this.se.wi(this.sex,3),void 0!=this.num&&this.se.wi(this.num,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_team_res_request_team_item=a,__reflect(a.prototype,"Sproto.sc_team_res_request_team_item")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ticket_treasure_hunt_request=t,__reflect(t.prototype,"Sproto.cs_ticket_treasure_hunt_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ticket_treasure_record_request=i,__reflect(i.prototype,"Sproto.cs_ticket_treasure_record_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_ticket_treasure_reward_request=o,__reflect(o.prototype,"Sproto.cs_ticket_treasure_reward_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(t){function i(e){return void 0===e&&(e=null),t.call(this,1,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.treasureRecord=this.de.ro(e.treasure_record);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.treasureRecord&&this.se.wo(this.treasureRecord,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_ticket_treasure_add_record_request=t,__reflect(t.prototype,"Sproto.sc_ticket_treasure_add_record_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.treasureCnt=this.de.ri();break;case 1:this.luckyValue=this.de.ri();break;case 2:this.awardValue=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.treasureCnt&&this.se.wi(this.treasureCnt,0),void 0!=this.luckyValue&&this.se.wi(this.luckyValue,1),void 0!=this.awardValue&&this.se.wi(this.awardValue,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_ticket_treasure_base_info_request=i,__reflect(i.prototype,"Sproto.sc_ticket_treasure_base_info_request");var o=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.type=this.de.ri();break;case 1:this.items=this.de.roa(e.treasure_item);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.items&&this.se.woa(this.items,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_ticket_treasure_hunt_result_request=o,__reflect(o.prototype,"Sproto.sc_ticket_treasure_hunt_result_request");var s=function(t){function i(e){return void 0===e&&(e=null),t.call(this,1,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.treasureRecord=this.de.roa(e.treasure_record);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.treasureRecord&&this.se.woa(this.treasureRecord,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_ticket_treasure_record_datas_request=s,__reflect(s.prototype,"Sproto.sc_ticket_treasure_record_datas_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 1:this.titleid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.titleid&&this.se.wi(this.titleid,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_title_set_request=t,__reflect(t.prototype,"Sproto.cs_title_set_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.titleid=this.de.ri();break;case 1:this.titleEndTime=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.titleid&&this.se.wi(this.titleid,0),void 0!=this.titleEndTime&&this.se.wi(this.titleEndTime,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_title_add_request=t,__reflect(t.prototype,"Sproto.sc_title_add_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.titleid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.titleid&&this.se.wi(this.titleid,0),this.se.Close()
},t}(e.SprotoTypeBase);e.sc_title_del_request=i,__reflect(i.prototype,"Sproto.sc_title_del_request");var o=function(t){function i(e){return void 0===e&&(e=null),t.call(this,1,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.titles=this.de.roa(e.title_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.titles&&this.se.woa(this.titles,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_title_list_request=o,__reflect(o.prototype,"Sproto.sc_title_list_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.rolehandle=this.de.ri();break;case 1:this.titleid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.rolehandle&&this.se.wi(this.rolehandle,0),void 0!=this.titleid&&this.se.wi(this.titleid,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_title_set_request=s,__reflect(s.prototype,"Sproto.sc_title_set_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.id&&this.se.wi(this.id,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_tower_award_req_request=t,__reflect(t.prototype,"Sproto.cs_tower_award_req_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.floor=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.floor&&this.se.wi(this.floor,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_tower_enter_req_request=i,__reflect(i.prototype,"Sproto.cs_tower_enter_req_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.floor=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.floor&&this.se.wi(this.floor,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_tower_floor_req_request=o,__reflect(o.prototype,"Sproto.cs_tower_floor_req_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_tower_init_req_request=s,__reflect(s.prototype,"Sproto.cs_tower_init_req_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_tower_sweep_req_request=n,__reflect(n.prototype,"Sproto.cs_tower_sweep_req_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.status=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.status&&this.se.wi(this.status,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_tower_award_res_request=t,__reflect(t.prototype,"Sproto.sc_tower_award_res_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.data=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.data&&this.se.wia(this.data,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_tower_floor_res_request=i,__reflect(i.prototype,"Sproto.sc_tower_floor_res_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,7,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.maxlevel=this.de.ri();break;case 2:this.rewards=this.de.ria();break;case 3:this.ranks=this.de.roa(r);break;case 4:this.myrank=this.de.ri();break;case 5:this.pass=this.de.ria();break;case 6:this.sweep=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.maxlevel&&this.se.wi(this.maxlevel,1),void 0!=this.rewards&&this.se.wia(this.rewards,2),void 0!=this.ranks&&this.se.woa(this.ranks,3),void 0!=this.myrank&&this.se.wi(this.myrank,4),void 0!=this.pass&&this.se.wia(this.pass,5),void 0!=this.sweep&&this.se.wi(this.sweep,6),this.se.Close()},t}(e.SprotoTypeBase);e.sc_tower_init_res_request=o,__reflect(o.prototype,"Sproto.sc_tower_init_res_request");var s=function(t){function i(e){return void 0===e&&(e=null),t.call(this,3,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.type=this.de.ri();break;case 1:this.sweep=this.de.ri();break;case 2:this.reward=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.sweep&&this.se.wi(this.sweep,1),void 0!=this.reward&&this.se.woa(this.reward,2),this.se.Close()},i}(e.SprotoTypeBase);e.sc_tower_sweep_res_request=s,__reflect(s.prototype,"Sproto.sc_tower_sweep_res_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.pass=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.pass&&this.se.wia(this.pass,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_tower_sync_request=n,__reflect(n.prototype,"Sproto.sc_tower_sync_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.power=this.de.ri();break;case 1:this.lvl=this.de.ri();break;case 2:this.name=this.de.rs();break;case 3:this.vip=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.power&&this.se.wi(this.power,0),void 0!=this.lvl&&this.se.wi(this.lvl,1),void 0!=this.name&&this.se.ws(this.name,2),void 0!=this.vip&&this.se.wi(this.vip,3),this.se.Close()},t}(e.SprotoTypeBase);e.tower_rank_data=r,__reflect(r.prototype,"Sproto.tower_rank_data")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_enter_treasure_raid_request=t,__reflect(t.prototype,"Sproto.cs_enter_treasure_raid_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_treasure_boss_list_request=i,__reflect(i.prototype,"Sproto.cs_get_treasure_boss_list_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_treasure_daily_award_request=o,__reflect(o.prototype,"Sproto.cs_get_treasure_daily_award_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_treasure_hunt_request=s,__reflect(s.prototype,"Sproto.cs_treasure_hunt_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_treasure_record_request=n,__reflect(n.prototype,"Sproto.cs_treasure_record_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.treasureRecord=this.de.ro(l);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.treasureRecord&&this.se.wo(this.treasureRecord,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_treasure_add_record_request=t,__reflect(t.prototype,"Sproto.sc_treasure_add_record_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.todayHuntCount=this.de.ri();break;case 1:this.rewardbin=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.todayHuntCount&&this.se.wi(this.todayHuntCount,0),void 0!=this.rewardbin&&this.se.wi(this.rewardbin,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_treasure_base_info_request=i,__reflect(i.prototype,"Sproto.sc_treasure_base_info_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.bosslist=this.de.roa(r);break;case 1:this.huntMin=this.de.ri();break;case 2:this.huntMax=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.bosslist&&this.se.woa(this.bosslist,0),void 0!=this.huntMin&&this.se.wi(this.huntMin,1),void 0!=this.huntMax&&this.se.wi(this.huntMax,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_treasure_boss_list_request=o,__reflect(o.prototype,"Sproto.sc_treasure_boss_list_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.items=this.de.roa(a);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.items&&this.se.woa(this.items,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_treasure_hunt_result_request=s,__reflect(s.prototype,"Sproto.sc_treasure_hunt_result_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.treasureRecord=this.de.roa(l);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.treasureRecord&&this.se.woa(this.treasureRecord,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_treasure_record_datas_request=n,__reflect(n.prototype,"Sproto.sc_treasure_record_datas_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;case 1:this.id=this.de.ri();break;case 2:this.hp=this.de.ri();break;case 3:this.people=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),void 0!=this.id&&this.se.wi(this.id,1),void 0!=this.hp&&this.se.wi(this.hp,2),void 0!=this.people&&this.se.wi(this.people,3),this.se.Close()},t}(e.SprotoTypeBase);e.treasure_bossinfo=r,__reflect(r.prototype,"Sproto.treasure_bossinfo");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.treasure_item=a,__reflect(a.prototype,"Sproto.treasure_item");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.itemid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.itemid&&this.se.wi(this.itemid,1),this.se.Close()},t}(e.SprotoTypeBase);e.treasure_record=l,__reflect(l.prototype,"Sproto.treasure_record")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.handle=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.handle&&this.se.wi(this.handle,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_enter_tryroad_raid_request=t,__reflect(t.prototype,"Sproto.cs_enter_tryroad_raid_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_caiquan_result_request=i,__reflect(i.prototype,"Sproto.cs_get_caiquan_result_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_tryroad_award_request=o,__reflect(o.prototype,"Sproto.cs_get_tryroad_award_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_get_tryroad_rank_request=s,__reflect(s.prototype,"Sproto.cs_get_tryroad_rank_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.status=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.status&&this.se.wi(this.status,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_enter_tryroad_raid_request=t,__reflect(t.prototype,"Sproto.sc_enter_tryroad_raid_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_get_caiquan_result_request=i,__reflect(i.prototype,"Sproto.sc_get_caiquan_result_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.status=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.status&&this.se.wi(this.status,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_get_tryroad_award_request=o,__reflect(o.prototype,"Sproto.sc_get_tryroad_award_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.rank=this.de.ri();break;case 1:this.lvl=this.de.ri();break;case 2:this.data=this.de.roa(r);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.rank&&this.se.wi(this.rank,0),void 0!=this.lvl&&this.se.wi(this.lvl,1),void 0!=this.data&&this.se.woa(this.data,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_get_tryroad_rank_request=s,__reflect(s.prototype,"Sproto.sc_get_tryroad_rank_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.status=this.de.ri();break;case 2:this.rewards=this.de.roa(a);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.status&&this.se.wi(this.status,1),void 0!=this.rewards&&this.se.woa(this.rewards,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_tryroad_datas_request=n,__reflect(n.prototype,"Sproto.sc_tryroad_datas_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.rank=this.de.ri();break;case 1:this.lvl=this.de.ri();break;case 2:this.name=this.de.rs();break;case 3:this.vip=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.rank&&this.se.wi(this.rank,0),void 0!=this.lvl&&this.se.wi(this.lvl,1),void 0!=this.name&&this.se.ws(this.name,2),void 0!=this.vip&&this.se.wi(this.vip,3),this.se.Close()},t}(e.SprotoTypeBase);e.tryroad_rank_data=r,__reflect(r.prototype,"Sproto.tryroad_rank_data");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.status=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.status&&this.se.wi(this.status,1),this.se.Close()},t}(e.SprotoTypeBase);e.tryroad_reward_data=a,__reflect(a.prototype,"Sproto.tryroad_reward_data")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.lv=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.lv&&this.se.wi(this.lv,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_vip_get_awards_request=t,__reflect(t.prototype,"Sproto.sc_vip_get_awards_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.lv=this.de.ri();break;case 1:this.exp=this.de.ri();break;case 2:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.lv&&this.se.wi(this.lv,0),void 0!=this.exp&&this.se.wi(this.exp,1),void 0!=this.state&&this.se.wi(this.state,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_vip_update_data_request=t,__reflect(t.prototype,"Sproto.sc_vip_update_data_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.lv=this.de.ri();break;case 1:this.exp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.lv&&this.se.wi(this.lv,0),void 0!=this.exp&&this.se.wi(this.exp,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_vip_update_exp_request=i,__reflect(i.prototype,"Sproto.sc_vip_update_exp_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.state&&this.se.wi(this.state,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_vip_update_state_request=o,__reflect(o.prototype,"Sproto.sc_vip_update_state_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_buy_vipshop_item_request=t,__reflect(t.prototype,"Sproto.cs_buy_vipshop_item_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_vipshop_info_request=i,__reflect(i.prototype,"Sproto.cs_vipshop_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.buyCnt=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.buyCnt&&this.se.wi(this.buyCnt,1),this.se.Close()},t}(e.SprotoTypeBase);e.datas=t,__reflect(t.prototype,"Sproto.datas");var i=function(e){function i(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.datas=this.de.roa(t);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.datas&&this.se.woa(this.datas,0),this.se.Close()},i}(e.SprotoTypeBase);e.sc_vipshop_datas_info_request=i,__reflect(i.prototype,"Sproto.sc_vipshop_datas_info_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.buyCnt=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.buyCnt&&this.se.wi(this.buyCnt,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_vipshop_item_info_request=o,__reflect(o.prototype,"Sproto.sc_vipshop_item_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_wing_activate_request=t,__reflect(t.prototype,"Sproto.cs_wing_activate_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.openStatus=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.openStatus&&this.se.wb(this.openStatus,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_wing_activate_response=i,__reflect(i.prototype,"Sproto.cs_wing_activate_response");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.type=this.de.ri();break;case 2:this.canUseYuanbao=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.type&&this.se.wi(this.type,1),void 0!=this.canUseYuanbao&&this.se.wb(this.canUseYuanbao,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_wing_boost_request=o,__reflect(o.prototype,"Sproto.cs_wing_boost_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.itemHandle=this.de.ri();break;case 1:this.roleId=this.de.ri();break;case 2:this.dressIndex=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.itemHandle&&this.se.wi(this.itemHandle,0),void 0!=this.roleId&&this.se.wi(this.roleId,1),void 0!=this.dressIndex&&this.se.wi(this.dressIndex,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_wing_equip_request=s,__reflect(s.prototype,"Sproto.cs_wing_equip_request");var n=function(t){function i(e){return void 0===e&&(e=null),t.call(this,3,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.roleId=this.de.ri();break;case 1:this.index=this.de.ri();break;case 2:this.itemData=this.de.ro(e.item_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.index&&this.se.wi(this.index,1),void 0!=this.itemData&&this.se.wo(this.itemData,2),this.se.Close()},i}(e.SprotoTypeBase);e.cs_wing_equip_response=n,__reflect(n.prototype,"Sproto.cs_wing_equip_response");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_wing_evolution_request=r,__reflect(r.prototype,"Sproto.cs_wing_evolution_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.ri();break;case 1:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wi(this.result,0),void 0!=this.type&&this.se.wi(this.type,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_wing_evolution_response=a,__reflect(a.prototype,"Sproto.cs_wing_evolution_response");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.lv=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.lv&&this.se.wi(this.lv,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_wing_exten_request=l,__reflect(l.prototype,"Sproto.cs_wing_exten_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_wing_onekey_request=h,__reflect(h.prototype,"Sproto.cs_wing_onekey_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_wing_upgrade_request=c,__reflect(c.prototype,"Sproto.cs_wing_upgrade_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.star=this.de.ri();break;case 2:this.exp=this.de.ri();break;case 3:this.crit=this.de.ri();break;case 4:this.addExp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.star&&this.se.wi(this.star,1),void 0!=this.exp&&this.se.wi(this.exp,2),void 0!=this.crit&&this.se.wi(this.crit,3),void 0!=this.addExp&&this.se.wi(this.addExp,4),this.se.Close()
},t}(e.SprotoTypeBase);e.sc_wing_boost_request=t,__reflect(t.prototype,"Sproto.sc_wing_boost_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.lv=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.lv&&this.se.wi(this.lv,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_wing_extend_request=i,__reflect(i.prototype,"Sproto.sc_wing_extend_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.lv=this.de.ri();break;case 2:this.star=this.de.ri();break;case 3:this.exp=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.lv&&this.se.wi(this.lv,1),void 0!=this.star&&this.se.wi(this.star,2),void 0!=this.exp&&this.se.wi(this.exp,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_wing_upgrade_request=o,__reflect(o.prototype,"Sproto.sc_wing_upgrade_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.activityId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.activityId&&this.se.wi(this.activityId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_yb_roll_start_request=t,__reflect(t.prototype,"Sproto.cs_yb_roll_start_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.activityId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.activityId&&this.se.wi(this.activityId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_yb_turntable_info_request=i,__reflect(i.prototype,"Sproto.cs_yb_turntable_info_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.activityId=this.de.ri();break;case 1:this.level=this.de.ri();break;case 3:this.chargeRecord=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.activityId&&this.se.wi(this.activityId,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.chargeRecord&&this.se.wi(this.chargeRecord,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_yb_turntable_info_request=t,__reflect(t.prototype,"Sproto.sc_yb_turntable_info_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.name=this.de.rs();break;case 1:this.count=this.de.ri();break;case 2:this.rate=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.name&&this.se.ws(this.name,0),void 0!=this.count&&this.se.wi(this.count,1),void 0!=this.rate&&this.se.ws(this.rate,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_yb_turntable_msg_request=i,__reflect(i.prototype,"Sproto.sc_yb_turntable_msg_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.activityId=this.de.ri();break;case 1:this.resultId=this.de.ri();break;case 2:this.result=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.activityId&&this.se.wi(this.activityId,0),void 0!=this.resultId&&this.se.wi(this.resultId,1),void 0!=this.result&&this.se.wb(this.result,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_yb_turntable_roll_start_cb_request=o,__reflect(o.prototype,"Sproto.sc_yb_turntable_roll_start_cb_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.type=this.de.ri();break;case 1:this.itemid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.type&&this.se.wi(this.type,0),void 0!=this.itemid&&this.se.wi(this.itemid,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_zs_get_exp_request=t,__reflect(t.prototype,"Sproto.cs_zs_get_exp_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_zs_uplevel_request=i,__reflect(i.prototype,"Sproto.cs_zs_uplevel_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,5,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.lv=this.de.ri();break;case 1:this.exp=this.de.ri();break;case 2:this.expupCount=this.de.ri();break;case 3:this.normalupCount=this.de.ri();break;case 4:this.highupCount=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.lv&&this.se.wi(this.lv,0),void 0!=this.exp&&this.se.wi(this.exp,1),void 0!=this.expupCount&&this.se.wi(this.expupCount,2),void 0!=this.normalupCount&&this.se.wi(this.normalupCount,3),void 0!=this.highupCount&&this.se.wi(this.highupCount,4),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zs_data_request=t,__reflect(t.prototype,"Sproto.sc_zs_data_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.pos=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.pos&&this.se.wi(this.pos,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_equip_lvl_upgrade_request=t,__reflect(t.prototype,"Sproto.cs_equip_lvl_upgrade_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.pos=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.pos&&this.se.wi(this.pos,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_equip_star_upgrade_request=i,__reflect(i.prototype,"Sproto.cs_equip_star_upgrade_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_equip_zhuanzhi_skill_request=o,__reflect(o.prototype,"Sproto.cs_equip_zhuanzhi_skill_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_zhuanzhi_active_request=s,__reflect(s.prototype,"Sproto.cs_zhuanzhi_active_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.itemid=this.de.ri();break;case 1:this.count=this.de.ri();break;case 2:this.roleid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.itemid&&this.se.wi(this.itemid,0),void 0!=this.count&&this.se.wi(this.count,1),void 0!=this.roleid&&this.se.wi(this.roleid,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_zhuanzhi_donate_request=n,__reflect(n.prototype,"Sproto.cs_zhuanzhi_donate_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.taskid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.taskid&&this.se.wi(this.taskid,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_zhuanzhi_enter_raid_request=r,__reflect(r.prototype,"Sproto.cs_zhuanzhi_enter_raid_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_zhuanzhi_jingmai_boost_request=a,__reflect(a.prototype,"Sproto.cs_zhuanzhi_jingmai_boost_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_zhuanzhi_jingmai_upgrade_request=l,__reflect(l.prototype,"Sproto.cs_zhuanzhi_jingmai_upgrade_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.skillid=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.skillid&&this.se.wi(this.skillid,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_zhuanzhi_talent_upgrade_request=h,__reflect(h.prototype,"Sproto.cs_zhuanzhi_talent_upgrade_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,0,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),this.se.Close()},t}(e.SprotoTypeBase);e.cs_zhuanzhi_tasklist_req_request=c,__reflect(c.prototype,"Sproto.cs_zhuanzhi_tasklist_req_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.pos=this.de.ri();break;case 2:this.value=this.de.ri();break;case 3:this.power=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.pos&&this.se.wi(this.pos,1),void 0!=this.value&&this.se.wi(this.value,2),void 0!=this.power&&this.se.wi(this.power,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_equip_lvl_upgrade_request=t,__reflect(t.prototype,"Sproto.sc_equip_lvl_upgrade_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.pos=this.de.ri();break;case 2:this.value=this.de.ri();break;case 3:this.power=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.pos&&this.se.wi(this.pos,1),void 0!=this.value&&this.se.wi(this.value,2),void 0!=this.power&&this.se.wi(this.power,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_equip_star_upgrade_request=i,__reflect(i.prototype,"Sproto.sc_equip_star_upgrade_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleID=this.de.ri();break;case 1:this.power=this.de.ri();break;case 2:this.type=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleID&&this.se.wi(this.roleID,0),void 0!=this.power&&this.se.wi(this.power,1),void 0!=this.type&&this.se.wi(this.type,2),this.se.Close()},t}(e.SprotoTypeBase);e.sc_equip_zhuanzhi_power_request=o,__reflect(o.prototype,"Sproto.sc_equip_zhuanzhi_power_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.skill=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.skill&&this.se.wia(this.skill,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_equip_zhuanzhi_skill_request=s,__reflect(s.prototype,"Sproto.sc_equip_zhuanzhi_skill_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.roa(f);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_func_tips_request=n,__reflect(n.prototype,"Sproto.sc_func_tips_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.itemid=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.itemid&&this.se.wi(this.itemid,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zhuanzhi_donate_request=r,__reflect(r.prototype,"Sproto.sc_zhuanzhi_donate_request");var a=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.index=this.de.ri();break;case 1:this.data=this.de.ro(e.jingmai_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.data&&this.se.wo(this.data,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_zhuanzhi_jingmai_boost_request=a,__reflect(a.prototype,"Sproto.sc_zhuanzhi_jingmai_boost_request");var l=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.index=this.de.ri();break;case 1:this.data=this.de.ro(e.jingmai_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),void 0!=this.data&&this.se.wo(this.data,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_zhuanzhi_jingmai_upgrade_request=l,__reflect(l.prototype,"Sproto.sc_zhuanzhi_jingmai_upgrade_request");var h=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.task=this.de.ro(m);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.task&&this.se.wo(this.task,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zhuanzhi_onetask_request=h,__reflect(h.prototype,"Sproto.sc_zhuanzhi_onetask_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.roa(_);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zhuanzhi_talent_init_request=c,__reflect(c.prototype,"Sproto.sc_zhuanzhi_talent_init_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.skillid=this.de.ri();break;case 2:this.level=this.de.ri();break;case 3:this.power=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.skillid&&this.se.wi(this.skillid,1),void 0!=this.level&&this.se.wi(this.level,2),void 0!=this.power&&this.se.wi(this.power,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zhuanzhi_talent_upgrade_request=u,__reflect(u.prototype,"Sproto.sc_zhuanzhi_talent_upgrade_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.roa(v);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.woa(this.data,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zhuanzhi_tasklist_request=d,__reflect(d.prototype,"Sproto.sc_zhuanzhi_tasklist_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.data=this.de.ro(v);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.data&&this.se.wo(this.data,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zhuanzhi_uplevel_result_request=p,__reflect(p.prototype,"Sproto.sc_zhuanzhi_uplevel_result_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.state=this.de.ria();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.state&&this.se.wia(this.state,1),this.se.Close()},t}(e.SprotoTypeBase);e.states=f,__reflect(f.prototype,"Sproto.states");var g=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.skillid=this.de.ri();break;case 1:this.level=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.skillid&&this.se.wi(this.skillid,0),void 0!=this.level&&this.se.wi(this.level,1),this.se.Close()},t}(e.SprotoTypeBase);e.zhuanzhi_talent_info=g,__reflect(g.prototype,"Sproto.zhuanzhi_talent_info");var _=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.power=this.de.ri();break;case 2:this.list=this.de.roa(g);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.power&&this.se.wi(this.power,1),void 0!=this.list&&this.se.woa(this.list,2),this.se.Close()},t}(e.SprotoTypeBase);e.zhuanzhi_talent_list=_,__reflect(_.prototype,"Sproto.zhuanzhi_talent_list");var m=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.value=this.de.ri();break;case 2:this.state=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.value&&this.se.wi(this.value,1),void 0!=this.state&&this.se.wi(this.state,2),this.se.Close()},t}(e.SprotoTypeBase);e.zhuanzhi_task=m,__reflect(m.prototype,"Sproto.zhuanzhi_task");var v=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleid=this.de.ri();break;case 1:this.level=this.de.ri();break;case 2:this.task=this.de.roa(m);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleid&&this.se.wi(this.roleid,0),void 0!=this.level&&this.se.wi(this.level,1),void 0!=this.task&&this.se.woa(this.task,2),this.se.Close()},t}(e.SprotoTypeBase);e.zhuanzhi_task_list=v,__reflect(v.prototype,"Sproto.zhuanzhi_task_list")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.items=this.de.roa(s);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.items&&this.se.woa(this.items,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_zhuzai_fenjie_request=t,__reflect(t.prototype,"Sproto.cs_zhuzai_fenjie_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.pos=this.de.ri();break;case 2:this.isProtect=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.pos&&this.se.wi(this.pos,1),void 0!=this.isProtect&&this.se.wb(this.isProtect,2),this.se.Close()},t}(e.SprotoTypeBase);e.cs_zhuzai_grow_request=i,__reflect(i.prototype,"Sproto.cs_zhuzai_grow_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.roleId=this.de.ri();break;case 1:this.pos=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.pos&&this.se.wi(this.pos,1),this.se.Close()},t}(e.SprotoTypeBase);e.cs_zhuzai_shengjie_request=o,__reflect(o.prototype,"Sproto.cs_zhuzai_shengjie_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.itemHandle=this.de.ri();break;case 1:this.count=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.itemHandle&&this.se.wi(this.itemHandle,0),void 0!=this.count&&this.se.wi(this.count,1),this.se.Close()},t}(e.SprotoTypeBase);e.zhuzai_fenjie_data=s,__reflect(s.prototype,"Sproto.zhuzai_fenjie_data")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(t){function i(e){return void 0===e&&(e=null),t.call(this,2,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.roleId=this.de.ri();break;case 1:this.data=this.de.ro(e.zhuzai_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.roleId&&this.se.wi(this.roleId,0),void 0!=this.data&&this.se.wo(this.data,1),this.se.Close()},i}(e.SprotoTypeBase);e.sc_zhuzai_data_request=t,__reflect(t.prototype,"Sproto.sc_zhuzai_data_request");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wb(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zhuzai_grow_result_request=i,__reflect(i.prototype,"Sproto.sc_zhuzai_grow_result_request");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.result=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.result&&this.se.wb(this.result,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zhuzai_shengjie_result_request=o,__reflect(o.prototype,"Sproto.sc_zhuzai_shengjie_result_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.bossId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.bossId&&this.se.wi(this.bossId,0),this.se.Close()},t}(e.SprotoTypeBase);e.cs_zs_boss_rank_request=t,__reflect(t.prototype,"Sproto.cs_zs_boss_rank_request")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.bossId=this.de.ri();break;case 1:this.kill=this.de.rb();break;case 2:this.challengeIn=this.de.rb();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.bossId&&this.se.wi(this.bossId,0),void 0!=this.kill&&this.se.wb(this.kill,1),void 0!=this.challengeIn&&this.se.wb(this.challengeIn,2),this.se.Close()},t}(e.SprotoTypeBase);e.boss_info_data=t,__reflect(t.prototype,"Sproto.boss_info_data");var i=function(e){function t(t){return void 0===t&&(t=null),e.call(this,3,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.id=this.de.ri();break;case 1:this.names=this.de.rs();break;case 2:this.shanghai=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.id&&this.se.wi(this.id,0),void 0!=this.names&&this.se.ws(this.names,1),void 0!=this.shanghai&&this.se.wi(this.shanghai,2),this.se.Close()},t}(e.SprotoTypeBase);e.boss_rank_info=i,__reflect(i.prototype,"Sproto.boss_rank_info");var o=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_world_boss_challenge_result_request=o,__reflect(o.prototype,"Sproto.sc_world_boss_challenge_result_request");var s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.bossId=this.de.ri();break;case 1:this.nextBossId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.bossId&&this.se.wi(this.bossId,0),void 0!=this.nextBossId&&this.se.wi(this.nextBossId,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_world_boss_open_request=s,__reflect(s.prototype,"Sproto.sc_world_boss_open_request");var n=function(e){function t(t){return void 0===t&&(t=null),e.call(this,4,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.robName=this.de.rs();break;case 1:this.berobName=this.de.rs();break;case 2:this.feats=this.de.ri();break;case 3:this.totalFeats=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.robName&&this.se.ws(this.robName,0),void 0!=this.berobName&&this.se.ws(this.berobName,1),void 0!=this.feats&&this.se.wi(this.feats,2),void 0!=this.totalFeats&&this.se.wi(this.totalFeats,3),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zs_boss_actordie_feats_request=n,__reflect(n.prototype,"Sproto.sc_zs_boss_actordie_feats_request");var r=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.index=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.index&&this.se.wi(this.index,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zs_boss_challenge_result_request=r,__reflect(r.prototype,"Sproto.sc_zs_boss_challenge_result_request");var a=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.point=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.point&&this.se.wi(this.point,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zs_boss_get_my_point_request=a,__reflect(a.prototype,"Sproto.sc_zs_boss_get_my_point_request");var l=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.hudun=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.hudun&&this.se.wi(this.hudun,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zs_boss_hudun_point_request=l,__reflect(l.prototype,"Sproto.sc_zs_boss_hudun_point_request");var h=function(e){function i(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(i,e),i.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.boss_info_list=this.de.roa(t);break;case 1:this.alive_boss_num=this.de.ri();break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.boss_info_list&&this.se.woa(this.boss_info_list,0),void 0!=this.alive_boss_num&&this.se.wi(this.alive_boss_num,1),this.se.Close()
},i}(e.SprotoTypeBase);e.sc_zs_boss_list_request=h,__reflect(h.prototype,"Sproto.sc_zs_boss_list_request");var c=function(e){function t(t){return void 0===t&&(t=null),e.call(this,1,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.lotteryItemId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.lotteryItemId&&this.se.wi(this.lotteryItemId,0),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zs_boss_lottery_info_request=c,__reflect(c.prototype,"Sproto.sc_zs_boss_lottery_info_request");var u=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.bossId=this.de.ri();break;case 1:this.nextBossId=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.bossId&&this.se.wi(this.bossId,0),void 0!=this.nextBossId&&this.se.wi(this.nextBossId,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zs_boss_open_request=u,__reflect(u.prototype,"Sproto.sc_zs_boss_open_request");var d=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.bossId=this.de.ri();break;case 1:this.rank_list=this.de.roa(i);break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.bossId&&this.se.wi(this.bossId,0),void 0!=this.rank_list&&this.se.woa(this.rank_list,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zs_boss_rank_info_request=d,__reflect(d.prototype,"Sproto.sc_zs_boss_rank_info_request");var p=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.remain_time=this.de.ri();break;case 1:this.relive_time=this.de.ri();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.remain_time&&this.se.wi(this.remain_time,0),void 0!=this.relive_time&&this.se.wi(this.relive_time,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zs_boss_remain_time_request=p,__reflect(p.prototype,"Sproto.sc_zs_boss_remain_time_request");var f=function(e){function t(t){return void 0===t&&(t=null),e.call(this,2,t)||this}return __extends(t,e),t.prototype.Decode=function(){for(var e=-1;-1!=(e=this.de.rt());)switch(e){case 0:this.point=this.de.ri();break;case 1:this.name=this.de.rs();break;default:this.de.ReadUnknowData()}},t.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.point&&this.se.wi(this.point,0),void 0!=this.name&&this.se.ws(this.name,1),this.se.Close()},t}(e.SprotoTypeBase);e.sc_zs_boss_talk_max_point_request=f,__reflect(f.prototype,"Sproto.sc_zs_boss_talk_max_point_request");var g=function(t){function i(e){return void 0===e&&(e=null),t.call(this,4,e)||this}return __extends(i,t),i.prototype.Decode=function(){for(var t=-1;-1!=(t=this.de.rt());)switch(t){case 0:this.first=this.de.rs();break;case 1:this.kill=this.de.rs();break;case 2:this.myrank=this.de.ri();break;case 3:this.rewardDatas=this.de.roa(e.reward_data);break;default:this.de.ReadUnknowData()}},i.prototype.EncodeStream=function(e){return this.se.Open(e),void 0!=this.first&&this.se.ws(this.first,0),void 0!=this.kill&&this.se.ws(this.kill,1),void 0!=this.myrank&&this.se.wi(this.myrank,2),void 0!=this.rewardDatas&&this.se.woa(this.rewardDatas,3),this.se.Close()},i}(e.SprotoTypeBase);e.sc_zs_boss_win_result_request=g,__reflect(g.prototype,"Sproto.sc_zs_boss_win_result_request")}(Sproto||(Sproto={}));var CreateRoleScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnter=function(){e.prototype.onEnter.call(this),this.addLayer(LayerManager.UI_Main),this.addLayer(LayerManager.UI_Tips),ViewManager.ins().open(CreateRoleView),RoleMgr.ins().hideLabel()},t.prototype.onExit=function(){e.prototype.onExit.call(this)},t}(BaseScene);__reflect(CreateRoleScene.prototype,"CreateRoleScene"),window.CreateRoleScene=CreateRoleScene;var CreateRoleView=function(e){function t(){var t=e.call(this)||this;return t.dice=null,t.nameInput=null,t.curBtn=null,t.listH=0,t.startIdx=3,t.roleList=[JobConst.ZhanShi,JobConst.FaShi,JobConst.DaoShi],t.skinName="CreateRolSkin",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),t.startTime=egret.getTimer(),StatisticsUtils.isSetdata=!0,StatisticsUtils.setPhpLoading(1),this.onConfigComplete()},t.prototype.onConfigComplete=function(){this.onLoaded()},t.prototype.onLoaded=function(){SdkMgr.setExtData(SdkMgr.extDataType_5),this.openView()},t.prototype.openView=function(){window.__RemoveBg&&window.__RemoveBg(),this.sex=0,RoleMgr.ins().sendRandomName(this.sex),this.nameInput.maxChars=6,this.m_TouchScope.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.dice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btnBoy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btnGirl.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.nameInput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),GameGlobal.MessageCenter.addListener(MessageDef.RANDOEM_NAME,this.setName,this),this.btnGirl.selected=!1,this.btnBoy.selected=!0,this._updateContent(1),this._saveSource(),t.isOpen=!0},t.prototype._saveSource=function(){this._mc||(this._mc=new MovieClip),this._mc.x=this.groupEff.width/2,this._mc.y=this.groupEff.height/2-10,this._mc.loadUrl(ResDataPath.GetUIEffePath("eff_btn_star"),!0,-1),this._mc.touchEnabled=!1,this.groupEff.addChildAt(this._mc,-1)},t.prototype._updateContent=function(e,t){if(void 0===t&&(t=!1),this.job!=e||t){this.job=e,this.m_RoleImg.visible=!0,this.m_RoleImg.source="createRole_"+this.sex+this.job+"_png"}},t.prototype.close=function(){e.prototype.close.call(this),this.m_TouchScope.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.dice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.nameInput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btnBoy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btnGirl.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.removeEvents(),MessageCenter.ins().removeAll(this),this._mc&&(DisplayUtils.dispose(this._mc),this._mc=null)},t.prototype.onClick=function(e){switch(e.currentTarget){case this.m_TouchScope:this.sendCreateRole(),StatisticsUtils.setPhpClick(3);break;case this.dice:RoleMgr.ins().sendRandomName(this.sex),StatisticsUtils.setPhpClick(1);break;case this.nameInput:StatisticsUtils.setPhpClick(2);break;case this.btnBoy:if(0==this.sex)return;this._changeSex(0);break;case this.btnGirl:if(1==this.sex)return;this._changeSex(1)}},t.prototype._changeSex=function(e){this.sex=e,RoleMgr.ins().sendRandomName(this.sex),this._updateContent(this.job,!0)},t.prototype.sendCreateRole=function(){function e(){RoleMgr.ins().sendCreateRole(this.nameInput.text,this.sex,this.job,0,0,"")}var i=(this.nameInput.text,this.nameInput.text.trim());return null==i||""==i?void alert("名称不能为空"):StringUtils.isSpecialCharacter(i)?void alert("姓名不能含有特殊字符"):StringUtils.isEmojiCharacter(i)?void alert("姓名含有表情符号"):(t.localJob=this.job,t.localSex=this.sex,void e.bind(this)())},t.prototype.setName=function(e){this.nameInput.text=e,GameLogic.ins().actorModel.name=e},t.LAYER_LEVEL=LayerManager.UI_Main,t.isOpen=!1,t}(BaseEuiView);__reflect(CreateRoleView.prototype,"CreateRoleView"),ViewManager.ins().reg(CreateRoleView,LayerManager.UI_Main),window.CreateRoleView=CreateRoleView;var GameAnnounce=function(e){function t(){var t=e.call(this)||this;return t.skinName="AnnounceSkin",t.onLoaded(),StageUtils.ins().getUIStage().addChild(t),t.m_bg.init("GameAnnounce","游戏公告",!0,t._Close.bind(t)),t}return __extends(t,e),t.prototype.open=function(){},t.prototype.onLoaded=function(){this.dialogMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this._Close,this);var e;e=SdkMgr.isWxGame()||1==SdkMgr.requestType?Const.SERVER_LIST_URL+"get_total_notice?platformid="+SdkMgr.platformid+"&channelid="+SdkMgr.channelid:Const.SERVER_LIST_URL+"api/server/getnoticecontent?platformid="+SdkMgr.platformid+"&channelid="+SdkMgr.channelid+"&ver="+SdkMgr.ver,this.label.text="";var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT,t.open(e,egret.HttpMethod.GET),t.send(),t.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),t.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this)},t.prototype.onPostComplete=function(e){var t=e.currentTarget;try{var i=JSON.parse(t.response);(1==i.result||200==i.code)&&null!=i.data&&(this.label.text=i.data.replace(new RegExp("/n","gm"),"\n"))}catch(o){console.log(o)}},t.prototype.onPostIOError=function(e){egret.log("post error : "+e)},t.prototype.onPostProgress=function(e){egret.log("post progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},t.prototype._Close=function(){this.dialogMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._Close,this),this.removeChildren(),this.label=null,this.dialogMask=null,this.parent.removeChild(this)},t}(BaseEuiView);__reflect(GameAnnounce.prototype,"GameAnnounce"),window.GameAnnounce=GameAnnounce;var GameLoadingView=function(e){function t(i){var o=e.call(this)||this;return o.m_IsClose=!1,o.pronum=0,o.skinName="GameLoadingViewSkin",o.mResult=i,t.m_Instance=o,o.addEventListener(egret.Event.ADDED_TO_STAGE,o.creationComplete,o),StageUtils.ins().getUIStage().addChild(o),o}return __extends(t,e),t.prototype.childrenCreated=function(){if(e.prototype.childrenCreated.call(this),this.bg){var t="pic_bj_23_jpg";switch(LocationProperty.urlParam.tag){case"wdws_lezhong_ios_wdws":t="wdws_lezhong_ios_djxml_loading_jpg";break;case"wdws_lezhong_android_wdws":case"wdws_lezhong_ios_wdws_breakout":t="yinghe_loading_jpg"}this.bg.source=t,SdkMgr.isWxGame()&&(this.bg.width=800*Main.wxsystemInfo.screenWidth/StageUtils.ins().getWidth(),this.bg.height=1386*Main.wxsystemInfo.screenHeight/StageUtils.ins().getHeight(),this.bg.horizontalCenter=0,this.bg.verticalCenter=0),ResMgr.ins().saveLoadingRes(t),this.addTime()}SdkMgr.isWxGame()&&Main.instance.removeBackBg(),this.tip0.text="抵制不良游戏，拒绝盗版游戏，注意自我保护，谨防受骗上当。\n适度游戏益脑，沉迷游戏伤身，合理安排时间，享受健康生活。","bsymx_baoyu_jfty_huawei"==SdkMgr.tag?(this.versionNumber.text="新广出审[2017]5723号    ISBN 978-7-7979-8966-4\n广州汉正信息科技有限公司   2017SR094425",this.versionNumber.textColor=16777215):this.versionNumber.text="广州不思议网络科技有限公司"},t.prototype.creationComplete=function(){StatisticsUtils.setPhpLoading(2),StatisticsUtils.time=egret.getTimer(),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.creationComplete,this),this.mResult&&this.mResult()},t.prototype.ShowLoadProgress=function(e,i,o){Const.IsLoadType01?(this.bar&&(this.bar.maximum=i,this.bar.value=e,this.groupEff.x=this.bar.x+this.bar.width*(e/i)-30),this.tip&&(t.m_Instance.tip.text=o)):console.log("GameLoadingView:ShowLoadProgress",e,o)},t.prototype.addTime=function(){this.removeTime(),TimerManager.ins().doTimer(500,0,this.setPro2,this)},t.prototype.removeTime=function(){TimerManager.ins().isExists(this.setPro2,this)&&TimerManager.ins().remove(this.setPro2,this)},t.prototype.setPro2=function(){this.pronum+=Math.ceil(20*Math.random())+20,this.ShowLoadProgress2(this.pronum,100),this.pronum>=100&&(this.pronum=0)},t.prototype.ShowLoadProgress2=function(e,t){this.bar2.maximum=t,this.bar2.value=e+1},t.CloseLoad=function(){t.m_Instance&&!t.m_Instance.m_IsClose&&(t.m_Instance.bg&&(t.m_Instance.bg.visible=!1,t.m_Instance.bg.parent&&t.m_Instance.bg.parent.removeChild(t.m_Instance.bg)),DisplayUtils.disposeAll(t.m_Instance),t.m_Instance.removeTime(),t.m_Instance.removeChildren(),t.m_Instance.mc=null,t.m_Instance=null)},t.prototype._initMc=function(){this.mc=new MovieClip,this.mc.x=this.groupEff.width/2,this.mc.y=this.groupEff.height/2,this.mc.loadUrl(ResDataPath.GetUIEffePath("ui_loading"),!0),this.groupEff.addChild(this.mc),this.groupEff.x=this.bar.x+33},t}(BaseEuiView);__reflect(GameLoadingView.prototype,"GameLoadingView"),window.GameLoadingView=GameLoadingView;var RoleMgr=function(e){function t(){var t=e.call(this)||this;return t.errorCode=["","sql错误","用户没登陆","游戏服务没准备好","角色上一次保存数据是否出现异常","客户端选择角色的常规错误","角色名称重复","角色不存在","错误的性别","随机生成的名字已经分配完","客户端上传的角色阵营参数错误","客户端上传的角色职业参数错误","名称无效，名称中包含非法字符或长度不合法","如果玩家是帮主，不能删除该角色，需要玩家退帮","已经登陆到其他服务器","已经超过最大可建角色数量"],t.m_FirstVerify=!0,t.sysId=PackageID.Login,Sproto.SprotoReceiver.AddHandler(S2cProtocol.checkAccountRet,t.doCheckAccount,t),t}return __extends(t,e),Object.defineProperty(t,"actorid",{get:function(){return t._actorid},set:function(e){LocalStorageData.setHashID(e+""),this._actorid=e},enumerable:!0,configurable:!0}),t.ins=function(){return e.ins.call(this)},t.prototype.connectServer=function(e,t,i,o,s){GameSocket.ins().login(e,t,i,o,s)},t.prototype.doCheckAccount=function(e){t.Checking=!1;var i=e.result;if(StartGetUserInfo.isUsa=-1!=String(e.ipRegion).indexOf("美国")||LocationProperty.urlParam&&null!=LocationProperty.urlParam.iosiddd,t.CheckAccount=0==i,0==i){egret.log("验证成功");var o=new Sproto.QueryList_request;GameSocket.ins().Rpc(C2sProtocol.QueryList,o,this.doRoleList,this),GameGlobal.MessageCenter.dispatch(MessageDef.SOCKE_RENEECTED_SUCCESS)}else egret.log("验证失败"+e.result),UserTips.ErrorTip("验证失败状态为："+e.result),Main.instance.mStartView&&null==Main.instance.mStartView.stage&&Main.instance&&StageUtils.ins().getUIStage().addChild(Main.instance.mStartView)},t.prototype.doRoleList=function(e){if(Const.IsLoadType01)this.m_FirstVerify?(this.m_FirstVerify=!1,Main.CloseView(),egret.log("角色列表",e.code),e.code?(t.actorid=e.actorid,Main.LoadResVersionComplate()):(null==GameLoadingView.m_Instance&&(GameLoadingView.m_Instance=new GameLoadingView(null)),ResourceUtils.ins().loadGroup("createrole",this._onRoleResourceLoadComplete,this._onRoleResourceLoadProgress,this))):e.code?GameApp.IsLoadComplete&&this.sendEnterGame(e.actorid):SceneManager.ins().runScene(CreateRoleScene);else if(e.code)GameApp.IsLoadComplete&&this.sendEnterGame(e.actorid);else{var i=LocationProperty.urlParam.crn;i=decodeURI(i);var o=LocationProperty.urlParam.crji,s=o%2,n=Math.floor(o/2)+1;null!=i&&null!=o?(console.log("创建初始角色中!!!"),this.sendCreateRole(i,s,n,0,0,"")):SceneManager.ins().runScene(CreateRoleScene)}},t.EnterGame=function(){return 0==t.actorid?void console.log("RoleMgr roleid == 0"):void t.ins().sendEnterGame(t.actorid)},t.prototype.sendEnterGame=function(e){console.log("RoleMgr.sendEnterGame actor = ",e);var t=new Sproto.EnterGame_request;t.actorid=e,GameSocket.ins().Rpc(C2sProtocol.EnterGame,t,this.doEnterGame,this)},t.prototype.doEnterGame=function(e){switch(e.result){case 0:console.log("进入游戏成功"),SceneManager.ins().runScene(MainScene),GuideUtils.ins().isShow()&&GuideUtils.ins().hide(),EntityManager.ins().removeAll(),Encounter.ins().clearEncounterModel(),TeamFbModel.getInstance.releaseTeamData();break;default:4==e.result?alert("帐号被封停，请联系客服QQ："+Const.QQ):alert("进入游戏错误码:"+e.result)}},t.prototype.sendCreateRole=function(e,t,i,o,s,n){var r=new Sproto.CreateActor_request;if(r.actorname=e,r.sex=t,r.job=i,r.icon=o,r.pf=n,console.log("请求创建角色",WxSdk.ins().query),SdkMgr.isWxGame()&&WxSdk.ins().query&&WxSdk.ins().query.heId){var a=Number(WxSdk.ins().query.heId);a&&(r.inviteid=a,r.imgurl=WxSdk.ins().imgURL,WxSdk.ins().query.imgtag&&(r.imgtag=WxSdk.ins().query.imgtag),console.log("请求创建角色",r.inviteid,r.imgurl))}GameSocket.ins().Rpc(C2sProtocol.CreateActor,r,this.doCreateRole,this)},t.prototype.doCreateRole=function(e){0==e.result?(t.actorid=e.actorid,CreateRoleView.isOpen&&(LocalStorageData.setItem(LocalDataKey.job+"_0",CreateRoleView.localJob+""),LocalStorageData.setItem(LocalDataKey.sex+"_0",CreateRoleView.localSex+"")),Const.IsLoadType01?(console.log("创建完成，开始加载资源!!!"),Main.LoadResVersionComplate()):(console.log("创建完成，进入游戏!!!"),this.sendEnterGame(e.actorid)),console.log("createRole id(%d)",e.actorid),0==GameLogic.ins().actorModel.actorID&&(GameLogic.ins().actorModel.actorID=e.actorid),SdkMgr.setExtData(SdkMgr.extDataType_2),SdkMgr.isWxGame()&&WxSdk.ins().sdkRole()):(egret.is(SceneManager.ins().getCurrScene(),"CreateRoleScene")||SceneManager.ins().runScene(CreateRoleScene),this.showErrorTips(e.result))},t.prototype.sendRandomName=function(e){var t=new Sproto.RandName_request;t.sex=e,GameSocket.ins().Rpc(C2sProtocol.RandName,t,this.doRandom,this)},t.prototype.doRandom=function(e){0==e.result&&(GameGlobal.MessageCenter.dispatch(MessageDef.RANDOEM_NAME,e.actorname),GameLogic.ins().actorModel.name=e.actorname)},t.prototype.hideLabel=function(){GameLoadingView.CloseLoad(),DisplayUtils.dispose(GameLoadingView.m_Instance)},t.prototype.hideCommonLoadView=function(){GameLoadingView.CloseLoad(),DisplayUtils.dispose(GameLoadingView.m_Instance)},t.prototype.showErrorTips=function(e){0!=e&&(console.warn("showErrorTips"+e),alert(t.Create_Actor_Error(e)))},t.Create_Actor_Error=function(e){var t=["","角色不存在","重复创建角色","创建角色失败","性别职业错误","角色名称重复","角色名含特殊字符","角色名过长","角色名含有屏蔽字","角色名称重复"];return t[e]},t.prototype._onRoleResourceLoadComplete=function(){egret.log("创建角色资源组加载完成"),this.hideCommonLoadView(),Main.AddCreateRoleView(),StatisticsUtils.create()},t.prototype._onRoleResourceLoadProgress=function(e,t){GameLoadingView.m_Instance.ShowLoadProgress(e,t,"资源加载")},t.CheckAccount=!1,t.Checking=!1,t._actorid=0,t}(BaseSystem);__reflect(RoleMgr.prototype,"RoleMgr"),window.RoleMgr=RoleMgr;var SelectServerView=function(e){function t(){var i=e.call(this)||this;return i.m_SelectTab=-1,i.skinName="SelectServerSkin",i.onLoaded(),t.m_Instance=i,StageUtils.ins().getUIStage().addChild(i),GameGlobal.MessageCenter.addListener(MessageDef.START_GAME_SERVER_LIST,i.UpdateSerTable,i),i.m_bg.init("SelectServerView","选择区服",!1,i._Close.bind(i)),i}return __extends(t,e),t.prototype.open=function(){},t.prototype.onLoaded=function(){this.serverTable.addEventListener(eui.ItemTapEvent.ITEM_TAP,this._ServerTabClick,this),this.serverTable.itemRenderer=SelectServerItem01,this.serverList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this._ServerListClick,this),this.serverList.itemRenderer=SelectServerItem02,this.UpdateSerTable(),this.dialogMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this._Close,this),this.tips.text="服务器列表"},t.prototype._Close=function(){GameGlobal.MessageCenter.removeAll(this),this.serverTable.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this._ServerTabClick,this),this.serverList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this._ServerListClick,this),this.dialogMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._Close,this),this.serverTable.removeChildren(),this.serverList.removeChildren(),this.removeChildren();for(var e=this.serverList.numChildren,i=0;e>i;i++){var o=this.serverList.getChildAt(i);o&&o instanceof SelectServerItem02&&(o.bg2.filters=null)}this.serverTable=null,this.serverList=null,this.dialogMask=null,t.m_Instance.parent&&t.m_Instance.parent.removeChild(t.m_Instance),t.m_Instance=null},t.prototype._ServerTabClick=function(e){this.ClickTable(e.item.type)},t.prototype._ServerListClick=function(e){var t=e.item;StartGetUserInfo.ServerId=t.id,this._Close(),StartGameView.Start()},t.prototype.UpdateSerTable=function(){this.serverTable.dataProvider=new eui.ArrayCollection(StartGetUserInfo.mServerTab),this.UpdateServerList()},t.prototype.UpdateServerList=function(){var e=this,t=[];if(-1==this.m_SelectTab)t=StartGetUserInfo.mServerDict[-1];else{var i=StartGetUserInfo.mServerDict[this.m_SelectTab];if(null==i||0==i.length){var o=this.m_SelectTab;StartGameView.get_serverlist(o,function(t){var i=JSON.parse(t),s=i.data,n=[];for(var r in s){var a=s[r],l=StartGameView.ParserServerData(a);l&&n.push(l)}n.sort(function(e,t){return t.id-e.id}),StartGetUserInfo.mServerDict[o]=n,o==e.m_SelectTab&&(e.serverList.dataProvider=new eui.ArrayCollection(n))})}else t=i}this.serverList.dataProvider=new eui.ArrayCollection(t),this.serverTable.selectedIndex=0},t.prototype.ClickTable=function(e){var t=this;if(t.m_SelectTab!=e){t.m_SelectTab=e;for(var i=0;i<t.serverTable.numChildren;++i){var o=t.serverTable.getChildAt(i);o.UpdateSel&&o.UpdateSel()}t.UpdateServerList()}},t.ClickItem=function(e){!this.m_Instance},t.GetSelectTab=function(){return this.m_Instance?this.m_Instance.m_SelectTab:0},t}(BaseEuiView);__reflect(SelectServerView.prototype,"SelectServerView");var SelectServerItem01=function(e){function t(){var t=e.call(this)||this;t.touchChildren=!1,t.touchEnabled=!0;var i=new eui.Image;i.source="rhomb_btn_01_png",i.horizontalCenter=0,i.verticalCenter=0,i.width=154,i.height=44,t.bg=i,t.addChild(i);var o=new eui.Image;o.source="rhomb_btn_03_png",o.horizontalCenter=0,o.verticalCenter=0,o.width=154,o.height=44,t.addChild(o),t.select=o;var s=new eui.Label;return s.text="最近登录",s.size=20,s.textColor=16777215,s.horizontalCenter=0,s.verticalCenter=0,s.textAlign=egret.HorizontalAlign.CENTER,s.verticalAlign=egret.VerticalAlign.MIDDLE,s.stroke=2,s.strokeColor=10639171,t.addChild(s),t.label=s,t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.label.text=e.name,this.UpdateSel()},t.prototype.UpdateSel=function(){var e=this.data;this.select.visible=e.type==SelectServerView.GetSelectTab()},t}(eui.ItemRenderer);__reflect(SelectServerItem01.prototype,"SelectServerItem01");var SelectServerItem02=function(e){function t(){var t=e.call(this)||this;t.touchChildren=!1,t.touchEnabled=!0;var i=184,o=44,s=new eui.Image;s.source="rhomb_btn_02_png",s.horizontalCenter=0,s.verticalCenter=0,s.width=i,s.height=o,t.bg2=s,t.addChild(s);var n=new eui.Label;n.text="双线1服",n.size=20,n.textAlign=egret.HorizontalAlign.CENTER,n.verticalAlign=egret.VerticalAlign.MIDDLE,n.horizontalCenter=0,n.verticalCenter=0,n.textColor=16777215,n.stroke=2,n.strokeColor=4408994,t.addChild(n),t.label=n;var r=new eui.Image;return r.top=0,r.right=0,t.addChild(r),t.flag=r,t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.label.text=e.name,this.touchEnabled=!0;var t="";this.filters=null,1==e.status||3==e.status?(this.flag.top=0,this.flag.verticalCenter=void 0,t="comp_455_01_01_png"):2==e.status||4==e.status?(this.flag.top=void 0,this.flag.verticalCenter=0,t="comp_27_29_01_png"):5==e.status&&(this.flag.source="",this.touchEnabled=StartGetUserInfo.gmLevel>0,FilterUtil.setGayFilter2(this)),this.flag.source=t},t}(eui.ItemRenderer);__reflect(SelectServerItem02.prototype,"SelectServerItem02"),window.SelectServerView=SelectServerView,window.SelectServerItem01=SelectServerItem01,window.SelectServerItem02=SelectServerItem02;var StartGamePreload=function(e){function t(){var t=e.call(this)||this;return t.resCount=0,t.resList=[],t}return __extends(t,e),t.prototype.AddComplete=function(e){null!=e&&(++this.resCount,e.addEventListener(egret.Event.COMPLETE,this._OnComplete,this),this.resList.push(e))},t.prototype.Close=function(){for(var e=0,t=this.resList;e<t.length;e++){var i=t[e];i&&i.removeEventListener(egret.Event.COMPLETE,this._OnComplete,this)}this.resList=[]},t.prototype._OnComplete=function(){if(0==--this.resCount){var e=new eui.Image;e.source="startgame1_bg_001_jpg",this.addChild(e);var t=new eui.Image;t.source="ui_loding_di",this.addChild(t)}},t}(egret.DisplayObjectContainer);__reflect(StartGamePreload.prototype,"StartGamePreload"),window.StartGamePreload=StartGamePreload;var StartGameView=function(e){function t(i){var o=e.call(this)||this;return o.resCount=0,o.resList=[],o.skinName="StartGameSkin",o.account.prompt="请输入账号",t.m_Instance=o,o.main=i,o.addEventListener(egret.Event.ADDED_TO_STAGE,o.onAddToStage,o),GameGlobal.MessageCenter.addListener(MessageDef.START_GAME_SERVER_LIST,o.showIPListView,o),o}return __extends(t,e),t.prototype.childrenCreated=function(){if(e.prototype.childrenCreated.call(this),SdkMgr.isWxGame()?this.tips0.text="":(this.tips0.text="审批文号：科技与数字[2012]661号   出版物号：ISBN 978-7-89989-416-5\n 著作权人：深圳市汉之云网络科技有限公司   适龄提示：16岁以上\n 备案文号：文网游备字（2018）M-RPG1396号",("bsymx_baoyu_jfty_h5"==SdkMgr.tag||"bsymx_baoyu_jfty_android"==SdkMgr.tag||"bsymx_baoyu_jfty_huawei"==SdkMgr.tag||"bsymx_baoyu_jfty_bilibili"==SdkMgr.tag||"bsymx_baoyu_ppl_xiaoqi"==SdkMgr.tag)&&(this.tips0.text="新广出审[2017]5723号    ISBN 978-7-7979-8966-4\n广州汉正信息科技有限公司   2017SR094425")),!SdkMgr.isWxGame()&&this.bg){var t="pic_bj_22_png";switch(LocationProperty.urlParam.tag){case"wdws_lezhong_ios_wdws":t="wdws_lezhong_ios_djxml_startgame_jpg";break;case"wdws_lezhong_android_wdws":case"wdws_lezhong_ios_wdws_breakout":t="yinghe_start_bg_jpg"}this.bg.source=t,this._playBgAni()}else this.bg.source="",this.image.visible=this.image0.visible=this.image1.visible=this.image2.visible=this.image3.visible=this.image4.visible=!1;ResMgr.ins().saveLoadingRes(""+this.bg.source),ResMgr.ins().saveLoadingRes(""+this.image.source),ResMgr.ins().saveLoadingRes(""+this.image0.source),ResMgr.ins().saveLoadingRes(""+this.image2.source),ResMgr.ins().saveLoadingRes(""+this.image3.source),ResMgr.ins().saveLoadingRes(""+this.image4.source),ResMgr.ins().saveLoadingRes(""+this.newServerBg.source),ObjectPool.ins().create()},t.prototype._playBgAni=function(){egret.Tween.get(this.image,{loop:!0}).to({x:-114,y:193},0).to({y:180},2e3).to({y:193},2e3),egret.Tween.get(this.image0,{loop:!0}).to({x:0,y:0},0).to({x:0,y:20},2e3).to({x:0,y:0},2e3),egret.Tween.get(this.image1,{loop:!0}).to({x:496,y:142,alpha:.5,scaleX:1,scaleY:1},0).to({x:170,y:119,scaleX:.15,scaleY:.15},9e3).to({x:226},8e3).wait(50).to({x:89,y:111,scaleX:0,scaleY:0,alpha:0},2950),egret.Tween.get(this.image2,{loop:!0}).to({x:-270,y:315,alpha:.5},0).to({x:9},8e3).to({x:226,alpha:0},8e3),egret.Tween.get(this.image3,{loop:!0}).to({x:-147,y:638,alpha:.5},0).to({x:491,y:651},16e3),egret.Tween.get(this.image4,{loop:!0}).to({x:-140,y:200,alpha:.5},0).to({x:496},16e3)},t.prototype._resetAniElement=function(){var e=this;egret.Tween.removeTweens(e.image),egret.Tween.removeTweens(e.image0),egret.Tween.removeTweens(e.image1),egret.Tween.removeTweens(e.image2),egret.Tween.removeTweens(e.image3),egret.Tween.removeTweens(e.image4)},t.prototype.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),window.__RemoveBg&&window.__RemoveBg(),this.onConfigComplete()},t.getServerIp=function(){if(null==t.m_Instance||null==t.m_Instance.m_serverIp)return"";var e=t.m_Instance.m_serverIp.text.split("|");return e[0]},t.getServerId=function(){if(null==t.m_Instance.m_serverIp)return"";var e=t.m_Instance.m_serverIp.text.split("|");return e[1]?e[1]:""},t.ParserServerData=function(e){if(0==e.status&&0==StartGetUserInfo.gmLevel)return null;var t=e.serverid,i=null,o=e.name?e.name:"双线"+t+"服";return{id:t,name:o,ip:i,status:e.status,version:e.version}},t.trace=function(e){void 0===e&&(e=10);var t=arguments.callee.caller,i=0;e=e||10;for(var o="";t&&e>i;)o+=t.toString()+"\n",t=t.caller,i++;return o},t.prototype.onConfigComplete=function(){this.onLoaded()},t.prototype.onLoaded=function(){SdkMgr.setExtData(SdkMgr.extDataType_5),this.selectServer.text="点击换服>>",this.tips.text="抵制不良游戏，拒绝盗版游戏，注意自我保护，谨防受骗上当。\n适度游戏益脑，沉迷游戏伤身，合理安排时间，享受健康生活。",this.m_serverIp&&(SdkMgr.isWxGame()?this.m_serverIp.visible=!1:this.m_serverIp.visible=Window.IsOpenInputServer),1==Const.IsTestIpList?this.account.visible=this.accountBg.visible=!1:(this.account.text=egret.localStorage.getItem("account"),this.account.visible=this.accountBg.visible=!Main.isPlatform),this.showIPListView(),this.versionLabel&&(this.versionLabel.text="v"+SdkMgr.version+"8"),this.open(),egret.setTimeout(function(){StartGetUserInfo.notice_status&&new GameAnnounce},this,500)},t.prototype.showIPListView=function(){if(this.curServer){var e=StartGetUserInfo.mServerData;if(e?this.curServer.text=e.name:this.curServer.text="",this.curServer_new){var t=StartGetUserInfo.newServerName;t?(this.curServer_new.text="最新服："+t,this.newServerBg.visible=!0):(this.newServerBg.visible=!1,this.curServer_new.text="")}}},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.start.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.selectGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.announce.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._mc||(this._mc=new MovieClip),this._mc.x=this.groupBtn.width>>1,this._mc.y=this.groupBtn.height>>1,this._mc.loadUrl(ResDataPath.GetUIEffePath("eff_btn_star"),!0,-1),this.groupBtn.addChild(this._mc)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.MessageCenter.removeAll(this),this.start&&this.start.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.selectGroup&&this.selectGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.announce&&this.announce.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._mc&&(DisplayUtils.dispose(this._mc),this._mc=null),this._resetAniElement(),StartGetUserInfo.notice_status=0},t.prototype.onClick=function(e){switch(e.currentTarget){case this.announce:new GameAnnounce;break;case this.start:if(this.account.visible&&(null==this.account.text||""==this.account.text.trim()||0==this.account.text.length))break;t.Start();break;case this.selectGroup:new SelectServerView}},t.Start=function(){var e=this.m_Instance;if(!e)return void alert("启动界面未初始化");StartGetUserInfo.mServerData;1!=Const.IsTestIpList&&(Main.isPlatform||(StartGetUserInfo.pwd=e.account.text),egret.localStorage.setItem("account",e.account.text),egret.localStorage.setItem("m_serverIp",e.m_serverIp.text)),e.callbackFun(e.main)},t.prototype.callbackFun=function(e){},t.get_serverlist=function(e,t){var i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,(null==SdkMgr.appid||0/0==SdkMgr.appid)&&(SdkMgr.appid=0);var o="";o=SdkMgr.isWxGame()||1==SdkMgr.requestType?Const.SERVER_LIST_URL+"get_serverlist?platformid="+SdkMgr.platformid+"&page="+e+"&appid="+SdkMgr.appid+"&channelid="+SdkMgr.channelid:Const.SERVER_LIST_URL+"api/server/getserverlist?platformid="+SdkMgr.platformid+"&page="+e+"&appid="+SdkMgr.appid+"&channelid="+SdkMgr.channelid+"&ver="+SdkMgr.ver,StatisticsUtils.debugInfoLogPhp("serverlist=="+o),i.open(o,egret.HttpMethod.GET),i.send(),i.addEventListener(egret.Event.COMPLETE,function(e){var i=e.currentTarget;t&&t(i.response)},this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){alert("请求数据失败 => get_serverlist")},this),i.addEventListener(egret.ProgressEvent.PROGRESS,function(e){console.log("进度 => get_serverlist"+Math.floor(100*e.bytesLoaded/e.bytesTotal))},this)},t.get_server_addr=function(e,t){if(null!=e){var i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT;var o;o=SdkMgr.isWxGame()||1==SdkMgr.requestType?Const.SERVER_LIST_URL+"get_server_addr?platformid="+SdkMgr.platformid+"&serverid="+e:Const.SERVER_LIST_URL+"api/server/getserveradd?platformid="+SdkMgr.platformid+"&serverid="+e+"&ver="+SdkMgr.ver,i.open(o,egret.HttpMethod.GET),i.send(),i.addEventListener(egret.Event.COMPLETE,function(e){var i=e.currentTarget;t&&t(i.response)},this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){alert("请求数据失败 => get_server_addr")},this),i.addEventListener(egret.ProgressEvent.PROGRESS,function(e){egret.log("进度 => get_server_addr"+Math.floor(100*e.bytesLoaded/e.bytesTotal))},this),egret.log("请求addr="+o)}},t}(BaseEuiView);__reflect(StartGameView.prototype,"StartGameView"),ViewManager.ins().reg(StartGameView,LayerManager.UI_Main),window.StartGameView=StartGameView;var StartGetUserInfo=function(){function e(){}return Object.defineProperty(e,"ServerId",{set:function(e){egret.localStorage.setItem("listIP",e+"");for(var t in this.mServerDict)for(var i=0,o=this.mServerDict[t];i<o.length;i++){var s=o[i];if(s.id==e)return void(this.mServerData=s)
}},enumerable:!0,configurable:!0}),e.GetUserInfo=function(){if(Main.isDebug){for(var t=window.serverList,i=[],o=0,s=parseInt(egret.localStorage.getItem("listIP"))||0,n=0,r=t;n<r.length;n++){var a=r[n],l=a.split("|"),h={id:o--,name:l[0],ip:l[1],status:1,version:1};i.push(h),h.id==s&&(this.mServerData=h)}null==this.mServerData&&(this.mServerData=i[0]),this.mServerTab=[{type:-1,name:"最近登录"}],this.mServerDict[-1]=i,this._LoginSuc()}else{egret.log("获取服务器列表");var c=new egret.HttpRequest;c.responseType=egret.HttpResponseType.TEXT;var u=e.urlData;egret.log("请求服务器"+u),c.open(u,egret.HttpMethod.GET),c.send(),c.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),c.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),c.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this)}},e.onPostComplete=function(t){var i=t.currentTarget,o=JSON.stringify(i.response),s=JSON.parse(i.response);return egret.log("get_player_serverinfo = "+o),1!=s.result?void alert(s.result_msg):void e.manageServerList(s)},e.manageServerList=function(e){var t=this;egret.log("返回服务器列表",e);var i=e.data.playerInfo;this.uid2=e.data.uid,this.username2=e.data.username,this.channelId2=e.data.channelId,this.username,null!=e.data.platformid&&(SdkMgr.platformid=e.data.platformid),this.uid=i.uid,this.username=i.username,2==SdkMgr.currSdk&&h5_sdk["Sdk_"+SdkMgr.currSdk].ins()["initSkd_"+SdkMgr.currSdk](),this.token=i.token,this.pwd=i.token,this.gmLevel=i.gm_level||0,SdkMgr.isWxGame()&&(WxSdk.ins().openid=e.data.openid,WxSdk.ins().session_key=e.data.session_key,WxSdk.ins().sdkInit()),this.notice_status=e.data.notice_status,SdkMgr.channelid=e.data.channelid?e.data.channelid:0;var o=e.data.server_maxid;0!=e.data.last_page.length&&e.data.last_page instanceof Array||alert("last列表为空！");for(var s=0,n=0,r=e.data.last_page;n<r.length;n++){var a=r[n];this.CanConnect(a.status)&&(egret.log("可以连接"),s++)}for(var l=[],h=e.data.last_page[0],c=Math.ceil(parseInt(h.serverid)/100),u=-1,d=1;o>=d;++d){var p=Math.ceil(d/100);if(u!=p){u=p;var f=100*(p-1)+1+"-"+100*p+"服";if(egret.log("连接"+s),s>0)l.push({type:p,name:f}),this.mServerDict[p]=[];else if(c==u){if(!(this.gmLevel>0))return c>1&&(c-=1),void StartGameView.get_serverlist(c,function(i){var o=JSON.parse(i);e.data.last_page=o.data,t.loginServer(l,e)});l.push({type:p,name:f}),this.mServerDict[p]=[]}else l.push({type:p,name:f}),this.mServerDict[p]=[]}}this.loginServer(l,e)},e.loginServer=function(e,t){e.sort(function(e,t){return t.type-e.type}),e=[{type:-1,name:"最近登录"}].concat(e),this.mServerTab=e;for(var i=[],o=0;o<t.data.recent_serverids.length;o++){var s=t.data.recent_serverids[o],n=StartGameView.ParserServerData(s);n&&(n.last_online_time_num=s.last_online_time_num,i.push(n))}i.sort(function(e,t){return t.last_online_time_num-e.last_online_time_num}),this.mServerData=i[0],this.mServerDict[-1]=i;for(var r=[],a=0;a<t.data.last_page.length;a++){var s=t.data.last_page[a];if(null!=s){var n=StartGameView.ParserServerData(s);n&&r.push(n)}}if(null==e[1])return alert("服务器维护中"),void StatisticsUtils.loginErrorLogPhp("服务器维护中，没有区组");r.sort(function(e,t){return t.id-e.id}),this.mServerDict[e[1].type]=r,null!=r&&0==r.length;for(var l=0,h=r;l<h.length;l++){var c=h[l];if(this.CanConnect(c.status)){this.newServerName=c.name;break}}if(null==this.mServerData){for(var u=0,d=r;u<d.length;u++){var c=d[u],p=c.status;if(c.version&&this.CanConnect(p)){this.mServerData=c,this.mAutoEnterGame=!0;break}}if(null==this.mServerData&&r.length>0){egret.log("最新的服务器列表长度 "+r.length+" , 但是没有可以连接的服务器 "),StatisticsUtils.loginErrorLogPhp("最新的服务器列表长度 "+r.length+" , 但是没有可以连接的服务器");for(var f=0,g=r;f<g.length;f++){var c=g[f];egret.log(c.id+"_"+c.status)}}}else this.mAutoEnterGame=!1;null==this.mServerData&&(StatisticsUtils.loginErrorLogPhp("服务器维护中..."),UserTips.ErrorTip("服务器维护中"),this.mAutoEnterGame=!1),this._LoginSuc(),GameGlobal.MessageCenter.dispatch(MessageDef.START_GAME_SERVER_LIST)},e._LoginSuc=function(){this.mResult&&(this.mResult(),egret.log("回调mresult"))},e.onPostIOError=function(e){egret.log("post error : "+e)},e.onPostProgress=function(e){egret.log("post progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},e.CanConnect=function(e){return 0!=e&&3!=e&&4!=e||0!=this.gmLevel?!0:!1},e.Login=function(){var t=this;egret.log("准备连接服务器");var i=e.mServerData;if(i){var o=StartGameView.getServerIp(),s=StartGameView.getServerId();if(Main.isDebug&&null!=o&&0!=o.length&&(i.ip=o,i.id=s),i.ip){if(egret.log("已经有ip，直接登录"),!this.CanConnect(i.status))return alert("服务器正在维护，请稍后重试!"),UserTips.ErrorTip("服务器正在维护，请稍后重试!"),void StatisticsUtils.loginErrorLogPhp("获取到服务器ip返回，status维护状态");RoleMgr.ins().connectServer("","",e.pwd,i.id,i.ip),GameServer.serverName=i.name}else StartGameView.get_server_addr(i.id,function(o){if(egret.log("服务器IP返回：id="+i.id+"  rsp="+o+" http="+GameSocket.httpsProtocol),null!=o){var s=JSON.parse(o);egret.log("服务器IP数据返回："+JSON.stringify(s));var n=s.data.addr,r=n.split("|");if(GameSocket.httpsProtocol==GameSocket.HTTP?i.ip=r[0]:i.ip=r[1],egret.log("获取服务器ip=="+i.ip+"  ips.length="+r.length),!t.CanConnect(s.data.status))return alert("服务器正在维护，请稍后重试!"),void StatisticsUtils.loginErrorLogPhp("获取到服务器ip返回，status维护状态2");null!=i.ip&&""!=i.ip?(RoleMgr.ins().connectServer("","",e.pwd,i.id,i.ip),GameServer.serverName=i.name):(alert("服务器维护中"),UserTips.ErrorTip("服务器维护中"),StatisticsUtils.loginErrorLogPhp("获取到服务器ip返回，服务器ip有问题"))}else alert("服务器维护中"),UserTips.ErrorTip("服务器维护中"),StatisticsUtils.loginErrorLogPhp("没有服务器ip")})}else alert("请选择服务器"),UserTips.ErrorTip("请选择服务器"),StatisticsUtils.loginErrorLogPhp("没有服务器信息")},e.mServerTab=[],e.mServerDict={},e.mAutoEnterGame=!1,e.username="",e.username2="",e.pwd=null,e.uid="",e.uid2="",e.gmLevel=0,e.channelId="",e.channelId2="",e.notice_status=0,e.type1=0,e.type2=1,e.sessid="",e.time=0,e.token="111",e.newServerName="",e.isUsa=!1,e.isOne=!1,e}();__reflect(StartGetUserInfo.prototype,"StartGetUserInfo"),window.StartGetUserInfo=StartGetUserInfo;var GuildWarMemListRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="WarMemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.face.source=ResDataPath.GetHeadMiniImgNameById(e.head),this.nameLab.text="["+GuildLanguage.guildOffice(e.office)+"]",this.nameLab0.text=e.name,this.conLab.text=e.point+"",this.attack.text=e.attr+"",this.onLine.text=""==e.mapName||null==e.mapName?GlobalConfig.jifengTiaoyueLg.st101503:e.mapName},t}(eui.ItemRenderer);__reflect(GuildWarMemListRenderer.prototype,"GuildWarMemListRenderer"),window.GuildWarMemListRenderer=GuildWarMemListRenderer,window.Main=Main;